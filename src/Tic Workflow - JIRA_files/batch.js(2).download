;
/* module-key = 'com.atlassian.auiplugin:ajs-raf', location = 'node_modules/@atlassian/aui/src/js-vendor/raf/raf.js' */
("undefined"===typeof window?global:window).__0e57a5ff611a3173e3f9aa2306aea259=function(){for(var a=window,f=0,d=["webkit","moz"],b=a.requestAnimationFrame,c=a.cancelAnimationFrame,e=d.length;0<=--e&&!b;)b=a[d[e]+"RequestAnimationFrame"],c=a[d[e]+"CancelAnimationFrame"];if(!b||!c)b=function(a){var b=Date.now(),c=Math.max(f+16,b);return setTimeout(function(){a(f=c)},c-b)},c=clearTimeout;a.requestAnimationFrame=b;a.cancelAnimationFrame=c;return{}}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-internal-is-input', location = 'node_modules/@atlassian/aui/src/js/aui/internal/is-input.js' */
("undefined"===typeof window?global:window).__f268bb685e7e11f511cb91a156a783b0=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=function(a){return"value"in a||a.isContentEditable};return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-vendor-raf-raf', location = 'node_modules/@atlassian/aui/src/js-vendor/raf/raf.js' */
("undefined"===typeof window?global:window).__0e57a5ff611a3173e3f9aa2306aea259=function(){for(var a=window,f=0,d=["webkit","moz"],b=a.requestAnimationFrame,c=a.cancelAnimationFrame,e=d.length;0<=--e&&!b;)b=a[d[e]+"RequestAnimationFrame"],c=a[d[e]+"CancelAnimationFrame"];if(!b||!c)b=function(a){var b=Date.now(),c=Math.max(f+16,b);return setTimeout(function(){a(f=c)},c-b)},c=clearTimeout;a.requestAnimationFrame=b;a.cancelAnimationFrame=c;return{}}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-internal-has-touch', location = 'node_modules/@atlassian/aui/src/js/aui/internal/has-touch.js' */
("undefined"===typeof window?global:window).__29f0b74d9ef495751062ec4e83e0b098=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});var b=window.DocumentTouch;a.default="ontouchstart"in window||b&&document instanceof b;return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-internal-mediaQuery', location = 'node_modules/@atlassian/aui/src/js/aui/internal/mediaQuery.js' */
("undefined"===typeof window?global:window).__e67a99ea27950f14c1291fb7cebabf6d=function(){var a={};Object.defineProperty(a,"__esModule",{value:!0});a.default=function(a){if(window.matchMedia)return window.matchMedia(a).matches;var b=document.createElement("style");b.type="text/css";b.id="testMedia";b.innerText="@media "+a+" { #testMedia { width: 1px; } }";document.head.appendChild(b);a="1px"===window.getComputedStyle(b,null).width;b.parentNode.removeChild(b);return a};return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-sidebar', location = 'node_modules/@atlassian/aui/src/js/aui/sidebar.js' */
("undefined"===typeof window?global:window).__c0275cfdb12ae34a5641a8e219403604=function(){function j(a){return a&&a.__esModule?a:{"default":a}}function c(a){this.$el=(0,e.default)(a);if(this.$el.length){this.$body=(0,e.default)("body");this.$wrapper=this.$el.children(".aui-sidebar-wrapper");this.$body.addClass("aui-page-sidebar");this._previousOffsetTop=this._previousViewportWidth=this._previousViewportHeight=this._previousScrollTop=null;this.submenus=new g;var b=this;if((0,e.default)(".aui-sidebar").length){b.$el.on("hover click focus",
b.collapsedTriggersSelector,function(a){a=(0,e.default)(a.target);r(b,a)});if(y.default&&(0,z.default)("only screen and (max-device-width:1024px)"))(0,e.default)("body").addClass("aui-page-sidebar-touch");var d=null,c=function(){null===d&&(d=requestAnimationFrame(function(){b.reflow();d=null}))};(0,e.default)(window).on("scroll resize",c);b.reflow();if(b.isAnimated())b.$el.on("transitionend webkitTransitionEnd",function(){b.$el.trigger(e.default.Event(l+(b.isCollapsed()?"collapse-end":"expand-end")))});
b.$el.on("click",".aui-sidebar-toggle",function(a){a.preventDefault();b.toggle()});(0,e.default)(".aui-page-panel").click(function(){!b.isCollapsed()&&b.isViewportNarrow()&&b.collapse()});var s=function(a){a.which===AJS.keyCode.LEFT_SQUARE_BRACKET&&(!a.shiftKey&&!a.ctrlKey&&!a.metaKey&&!(0,A.default)(a.target))&&b.toggle()};(0,e.default)(document).on("keypress",s);b._remove=function(){this._removeAllTooltips();(0,e.default)(this.inlineDialogSelector).remove();this.$el.off();this.$el.remove();(0,e.default)(document).off("keypress",
s);(0,e.default)(window).off("scroll resize",c)};b.$el.on("touchend",function(a){b.isCollapsed()&&(b.expand(),a.preventDefault())});b.$el.on("mouseenter focus",b.collapsedTriggersSelector,function(){if(b.isCollapsed()){var a=(0,e.default)(this);0!==m(a).length||t(a)}});b.$el.on("click blur mouseleave",b.collapsedTriggersSelector,function(){b.isCollapsed()&&u((0,e.default)(this))});b.$el.on("mouseenter focus",b.toggleSelector,function(){var a=(0,e.default)(this);b.isCollapsed()?a.data("tooltip","Expand sidebar ( [ )"):
a.data("tooltip","Collapse sidebar ( [ )");t(a)});b.$el.on("click blur mouseleave",b.toggleSelector,function(){u((0,e.default)(this))});b.$el.on("keydown",b.collapsedTriggersSelector,function(a){if(b.isCollapsed()){var d=a.target,c=v(d);if(c){var f=(0,e.default)(c);a.keyCode===AJS.keyCode.TAB&&(!a.shiftKey&&!a.altKey)&&c.open&&(a.preventDefault(),f.attr("persistent",""),f.find(":aui-tabbable").first().focus(),setTimeout(function(){f.removeAttr("persistent")},100),f.on("keydown",
function(a){if(a.keyCode===AJS.keyCode.TAB&&a.shiftKey&&a.target===f.find(":aui-tabbable")[0]||a.keyCode===AJS.keyCode.TAB&&(!a.shiftKey&&!a.altKey)&&a.target===f.find(":aui-tabbable").last()[0])d.focus(),(0,e.default)(this).off("keydown"),p()}))}}})}var f=this;(0,e.default)(f.collapsedTriggersSelector).each(function(){var a=(0,e.default)(this);r(f,a)})}}function w(a){return e.default.map(a.split(" "),function(a){return l+a}).join(" ")}function g(){this.inlineDialog=null}function m(a){return a.is("a")?
a.next(".aui-nav"):a.children(".aui-nav, hr")}function v(a){a=a.getAttribute("aria-controls");return document.getElementById(a)}function p(){var a=document.querySelectorAll(c.prototype.inlineDialogSelector);Array.prototype.forEach.call(a,function(a){a.open=!1})}function r(a,b){if(!b.data("_aui-sidebar-submenu-constructed")&&(b.data("_aui-sidebar-submenu-constructed",!0),0!==m(b).length)){var d=document.createElement("aui-inline-dialog"),g=(0,B.default)("sidebar-submenu");b.attr("aria-controls",g);
b.attr("data-aui-trigger","");x.default.init(b);d.setAttribute("id",g);d.setAttribute("alignment","right top");d.setAttribute("aria-hidden","true");a.isCollapsed()&&d.setAttribute("responds-to","hover");(0,e.default)(d).addClass(c.prototype.inlineDialogClass);document.body.appendChild(d);x.default.init(d);d.addEventListener("aui-layer-show",function(c){if(a.isCollapsed()){b.addClass("active");d.innerHTML=C;var f=b.is("a")?b.text():b.children(".aui-nav-heading").text(),c=(0,e.default)(d).find(".aui-navgroup-inner");
c.children(".aui-nav-heading").attr("title",f).children("strong").text(f);f=m(b);f=AJS.clone(f);f.hasClass("aui-expander-content")&&(f.find(".aui-expander-cutoff").remove(),f.removeClass("aui-expander-content"));f.appendTo(c)}else c.preventDefault()});d.addEventListener("aui-layer-hide",function(){b.removeClass("active")});return d}}function t(a){a.tipsy(D).tipsy("show");(a=a.data("tipsy")&&a.data("tipsy").$tip)&&a.css({opacity:""}).addClass("tooltip-shown")}function u(a){var b=a.data("tipsy")&&a.data("tipsy").$tip;
if(b){var d=b.css("transition-duration");d&&(d=0<=d.indexOf("ms")?parseInt(d.substring(0,d.length-2),10):1E3*parseInt(d.substring(0,d.length-1),10),setTimeout(function(){a.tipsy("hide")},d));b.removeClass("tooltip-shown")}}var o={};"use strict";Object.defineProperty(o,"__esModule",{value:!0});var e=j(__307d3e18fd611f85395c67cddeb1fe24);__f673a5150978887490995d88aeec0c8d;__0e57a5ff611a3173e3f9aa2306aea259;__d74c881c8f23921c15438d0f30c99f80;var k;var h=__c8cfa00f1eba9ac7af89ee3d0d33961d;if(h&&h.__esModule)k=
h;else{var n={};if(null!=h)for(k in h)Object.prototype.hasOwnProperty.call(h,k)&&(n[k]=h[k]);n.default=h;k=n}var h=j(__4d02fe17b8e885a34493e34af3d145dd),y=j(__29f0b74d9ef495751062ec4e83e0b098),A=j(__f268bb685e7e11f511cb91a156a783b0),z=j(__e67a99ea27950f14c1291fb7cebabf6d),x=j(__c1ce1f1e3e613f564fc234ff043570f1),B=j(__9fa5e8acd81f0f9028180b8fcdcd9cb4),n=j(__e3152236c406a356c24f20f7bfcccf21),E="undefined"!==typeof document.documentElement.style.transition||"undefined"!==typeof document.documentElement.style.webkitTransition,
l="_aui-internal-sidebar-";c.prototype.on=function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1),a=w(a);this.$el.on.apply(this.$el,[a].concat(b));return this};c.prototype.off=function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1),a=w(a);this.$el.off.apply(this.$el,[a].concat(b));return this};c.prototype.setHeight=function(a,b,d){a=Math.max(0,d-a);this.$wrapper.height(b-a);return this};c.prototype.setPosition=function(a){a=a||window.pageYOffset;this.$wrapper.toggleClass("aui-is-docked",
a>this.$el.offset().top);return this};c.prototype.setCollapsedState=function(a){var b={collapsed:{},expanded:{}};b.collapsed.narrow={narrow:e.default.noop,wide:function(b){b._expand(a,!0)}};b.collapsed.wide={narrow:e.default.noop,wide:e.default.noop};b.expanded.narrow={narrow:e.default.noop,wide:function(a){a.$body.removeClass("aui-sidebar-collapsed");a.$el.removeClass("aui-sidebar-fly-out")}};b.expanded.wide={narrow:function(a){a._collapse(!0)},wide:e.default.noop};var d=this.isCollapsed()?"collapsed":
"expanded",c=this.isViewportNarrow(this._previousViewportWidth)?"narrow":"wide",g=this.isViewportNarrow(a)?"narrow":"wide";b[d][c][g](this);return this};c.prototype._collapse=function(a){if(this.isCollapsed())return this;var b=e.default.Event(l+"collapse-start",{isResponsive:a});this.$el.trigger(b);if(b.isDefaultPrevented())return this;this.$body.addClass("aui-sidebar-collapsed");this.$el.attr("aria-expanded","false");this.$el.removeClass("aui-sidebar-fly-out");this.$el.find(this.submenuTriggersSelector).attr("tabindex",
0);(0,e.default)(this.inlineDialogSelector).attr("responds-to","hover");this.isAnimated()||this.$el.trigger(e.default.Event(l+"collapse-end",{isResponsive:a}));return this};c.prototype.collapse=function(){return this._collapse(!1)};c.prototype._expand=function(a,b){var d=e.default.Event(l+"expand-start",{isResponsive:b});this.$el.trigger(d);if(d.isDefaultPrevented())return this;d=this.isViewportNarrow(a);this.$el.attr("aria-expanded","true");this.$body.toggleClass("aui-sidebar-collapsed",d);this.$el.toggleClass("aui-sidebar-fly-out",
d);this.$el.find(this.submenuTriggersSelector).removeAttr("tabindex");(0,e.default)(this.inlineDialogSelector).removeAttr("responds-to");this.isAnimated()||this.$el.trigger(e.default.Event(l+"expand-end",{isResponsive:b}));return this};c.prototype.expand=function(){this.isCollapsed()&&this._expand(this._previousViewportWidth,!1);return this};c.prototype.isAnimated=function(){return E&&this.$el.hasClass("aui-is-animated")};c.prototype.isCollapsed=function(){return"false"===this.$el.attr("aria-expanded")};
c.prototype.isViewportNarrow=function(a){a=void 0===a?this._previousViewportWidth:a;return 1240>a};c.prototype._removeAllTooltips=function(){(0,e.default)(this.tooltipSelector).remove()};c.prototype.responsiveReflow=function(a,b){if(a){if(!this.isCollapsed()&&this.isViewportNarrow(b)){var d=this.isAnimated();d&&this.$el.removeClass("aui-is-animated");this.collapse();d&&(this.$el[0].offsetHeight,this.$el.addClass("aui-is-animated"))}}else b!==this._previousViewportWidth&&this.setCollapsedState(b)};
c.prototype.reflow=function(a,b,d,c){var a=void 0===a?window.pageYOffset:a,b=void 0===b?document.documentElement.clientHeight:b,c=void 0===c?document.documentElement.scrollHeight:c,d=void 0===d?window.innerWidth:d,e=this.$el.offset().top,f=null===this._previousViewportWidth;if(!(a===this._previousScrollTop&&b===this._previousViewportHeight&&e===this._previousOffsetTop)){this.isCollapsed()&&(!f&&a!==this._previousScrollTop)&&(p(),this._removeAllTooltips());var g=this.$body.hasClass("aui-page-sidebar-touch"),
c=a!==this._previousScrollTop&&(0>a||a+b>c);if(!g&&(f||!c))this.setHeight(a,b,e),this.setPosition(a)}"false"!==this.$el.attr("data-aui-responsive")?this.responsiveReflow(f,d):(f=!this.isCollapsed()&&this.isViewportNarrow(d),this.$el.toggleClass("aui-sidebar-fly-out",f));this._previousScrollTop=a;this._previousViewportHeight=b;this._previousViewportWidth=d;this._previousOffsetTop=e;return this};c.prototype.toggle=function(){this.isCollapsed()?(this.expand(),this._removeAllTooltips()):this.collapse();
return this};c.prototype.submenuTriggersSelector=".aui-sidebar-group:not(.aui-sidebar-group-tier-one)";c.prototype.collapsedTriggersSelector=[c.prototype.submenuTriggersSelector,".aui-sidebar-group.aui-sidebar-group-tier-one > .aui-nav > li > a",".aui-sidebar-footer > .aui-sidebar-settings-button"].join(", ");c.prototype.toggleSelector=".aui-sidebar-footer > .aui-sidebar-toggle";c.prototype.tooltipSelector=".aui-sidebar-section-tooltip";c.prototype.inlineDialogClass="aui-sidebar-submenu-dialog";c.prototype.inlineDialogSelector=
"."+c.prototype.inlineDialogClass;g.prototype.submenu=function(a){i();return m(a)};g.prototype.hasSubmenu=function(a){i();return 0!==m(a).length};g.prototype.submenuHeadingHeight=function(){i();return 34};g.prototype.isShowing=function(){i();return c.prototype.isSubmenuVisible()};g.prototype.show=function(a,b){i();v(b).open=!0};g.prototype.hide=function(){i();p()};g.prototype.inlineDialogShowHandler=function(){i()};g.prototype.inlineDialogHideHandler=function(){i()};g.prototype.moveSubmenuToInlineDialog=
function(){i()};g.prototype.restoreSubmenu=function(){i()};c.prototype.getVisibleSubmenus=function(){return Array.prototype.filter.call(document.querySelectorAll(c.prototype.inlineDialogSelector),function(a){return a.open})};c.prototype.isSubmenuVisible=function(){return 0<this.getVisibleSubmenus().length};var C='<div class="aui-inline-dialog-contents"><div class="aui-sidebar-submenu" ><div class="aui-navgroup aui-navgroup-vertical"><div class="aui-navgroup-inner"><div class="aui-nav-heading"><strong></strong></div></div></div></div></div>',
D={trigger:"manual",gravity:"w",className:"aui-sidebar-section-tooltip",title:function(){var a=(0,e.default)(this);return a.is("a")?a.attr("title")||a.find(".aui-nav-item-label").text()||a.data("tooltip"):a.children(".aui-nav").attr("title")||a.children(".aui-nav-heading").text()}},q=(0,n.default)("sidebar",c);(0,e.default)(function(){q(".aui-sidebar")});var i=k.getMessageLogger("Sidebar.submenus",{removeInVersion:"6.0",sinceVersion:"5.8"});(0,h.default)("sidebar",q);o.default=q;return o=o["default"]}.call(this);;
;
/* module-key = 'com.atlassian.plugin.jslibs:marionette-2.1.0-factory', location = 'factories/marionette/2.1.0/marionette-2.1.0-factory.js' */
(function(l){define("atlassian/libs/factories/marionette-2.1.0",function(){return function(f,c){var i={_:f,Backbone:c};l.call(i);return i.Marionette.noConflict()}})})(function(){var l=this,f=this.Backbone,c=this._,i=function(a,b){var e=Error(a);e.name=b||"Error";throw e;},r=f.ChildViewContainer,m=function(a){this._views={};this._indexByModel={};this._indexByCustom={};this._updateLength();c.each(a,this.add,this)};c.extend(m.prototype,{add:function(a,b){var e=a.cid;this._views[e]=a;a.model&&(this._indexByModel[a.model.cid]=
e);b&&(this._indexByCustom[b]=e);this._updateLength();return this},findByModel:function(a){return this.findByModelCid(a.cid)},findByModelCid:function(a){return this.findByCid(this._indexByModel[a])},findByCustom:function(a){return this.findByCid(this._indexByCustom[a])},findByIndex:function(a){return c.values(this._views)[a]},findByCid:function(a){return this._views[a]},remove:function(a){var b=a.cid;a.model&&delete this._indexByModel[a.model.cid];c.any(this._indexByCustom,function(a,c){if(a===b)return delete this._indexByCustom[c],
!0},this);delete this._views[b];this._updateLength();return this},call:function(a){this.apply(a,c.tail(arguments))},apply:function(a,b){c.each(this._views,function(e){c.isFunction(e[a])&&e[a].apply(e,b||[])})},_updateLength:function(){this.length=c.size(this._views)}});c.each("forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck".split(" "),function(a){m.prototype[a]=function(){var b=[c.values(this._views)].concat(c.toArray(arguments));
return c[a].apply(c,b)}});f.ChildViewContainer=m;f.ChildViewContainer.VERSION="0.1.4";f.ChildViewContainer.noConflict=function(){f.ChildViewContainer=r;return this};var s=f.Wreqr,h=f.Wreqr={};f.Wreqr.VERSION="1.3.1";f.Wreqr.noConflict=function(){f.Wreqr=s;return this};var g=function(a){this.options=a;this._wreqrHandlers={};c.isFunction(this.initialize)&&this.initialize(a)};g.extend=f.Model.extend;c.extend(g.prototype,f.Events,{setHandlers:function(a){c.each(a,function(a,e){var d=null;c.isObject(a)&&
!c.isFunction(a)&&(d=a.context,a=a.callback);this.setHandler(e,a,d)},this)},setHandler:function(a,b,e){this._wreqrHandlers[a]={callback:b,context:e};this.trigger("handler:add",a,b,e)},hasHandler:function(a){return!!this._wreqrHandlers[a]},getHandler:function(a){var b=this._wreqrHandlers[a];if(b)return function(){var a=Array.prototype.slice.apply(arguments);return b.callback.apply(b.context,a)}},removeHandler:function(a){delete this._wreqrHandlers[a]},removeAllHandlers:function(){this._wreqrHandlers=
{}}});h.Handlers=g;g=function(a){this.options=a;this._commands={};c.isFunction(this.initialize)&&this.initialize(a)};c.extend(g.prototype,f.Events,{getCommands:function(a){var b=this._commands[a];b||(b={command:a,instances:[]},this._commands[a]=b);return b},addCommand:function(a,b){this.getCommands(a).instances.push(b)},clearCommands:function(a){this.getCommands(a).instances=[]}});h.CommandStorage=g;g=h.Handlers.extend({storageType:h.CommandStorage,constructor:function(a){this.options=a||{};this._initializeStorage(this.options);
this.on("handler:add",this._executeCommands,this);var b=Array.prototype.slice.call(arguments);h.Handlers.prototype.constructor.apply(this,b)},execute:function(a,b){a=arguments[0];b=Array.prototype.slice.call(arguments,1);this.hasHandler(a)?this.getHandler(a).apply(this,b):this.storage.addCommand(a,b)},_executeCommands:function(a,b,e){var d=this.storage.getCommands(a);c.each(d.instances,function(a){b.apply(e,a)});this.storage.clearCommands(a)},_initializeStorage:function(a){a=a.storageType||this.storageType;
this.storage=c.isFunction(a)?new a:a}});h.Commands=g;h.RequestResponse=h.Handlers.extend({request:function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1);if(this.hasHandler(a))return this.getHandler(a).apply(this,b)}});g=function(){};g.extend=f.Model.extend;c.extend(g.prototype,f.Events);h.EventAggregator=g;g=function(a){this.vent=new h.EventAggregator;this.reqres=new h.RequestResponse;this.commands=new h.Commands;this.channelName=a};c.extend(g.prototype,{reset:function(){this.vent.off();
this.vent.stopListening();this.reqres.removeAllHandlers();this.commands.removeAllHandlers();return this},connectEvents:function(a,b){this._connect("vent",a,b);return this},connectCommands:function(a,b){this._connect("commands",a,b);return this},connectRequests:function(a,b){this._connect("reqres",a,b);return this},_connect:function(a,b,e){if(b){var e=e||this,d="vent"===a?"on":"setHandler";c.each(b,function(b,f){this[a][d](f,c.bind(b,e))},this)}}});h.Channel=g;g=function(){this._channels={};this.vent=
{};this.commands={};this.reqres={};this._proxyMethods()};c.extend(g.prototype,{channel:function(a){if(!a)throw Error("Channel must receive a name");return this._getChannel(a)},_getChannel:function(a){var b=this._channels[a];b||(b=new h.Channel(a),this._channels[a]=b);return b},_proxyMethods:function(){c.each(["vent","commands","reqres"],function(a){c.each(t[a],function(b){var e=this;this[a][b]=function(c){var d=e._getChannel(c)[a],f=Array.prototype.slice.call(arguments,1);return d[b].apply(d,f)}},
this)},this)}});var t={vent:"on off trigger once stopListening listenTo listenToOnce".split(" "),commands:["execute","setHandler","setHandlers","removeHandler","removeAllHandlers"],reqres:["request","setHandler","setHandlers","removeHandler","removeAllHandlers"]},g=new g;h.radio=g;var u=f.ChildViewContainer.noConflict(),v=f.Wreqr.noConflict(),w=l.Marionette,d=f.Marionette={};d.VERSION="2.1.0";d.noConflict=function(){l.Marionette=w;return this};f.Marionette=d;d.Deferred=f.$.Deferred;var j=Array.prototype.slice;
d.extend=f.Model.extend;d.getOption=function(a,b){if(a&&b)return a.options&&void 0!==a.options[b]?a.options[b]:a[b]};d.proxyGetOption=function(a){return d.getOption(this,a)};d.normalizeMethods=function(a){var b={};c.each(a,function(a,d){c.isFunction(a)||(a=this[a]);a&&(b[d]=a)},this);return b};d.normalizeUIKeys=function(a,b){if("undefined"!==typeof a)return c.each(c.keys(a),function(e){var c=/@ui\.[a-zA-Z_$0-9]*/g;e.match(c)&&(a[e.replace(c,function(a){return b[a.slice(4)]})]=a[e],delete a[e])}),
a};d.actAsCollection=function(a,b){c.each("forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck".split(" "),function(e){a[e]=function(){var a=[c.values(c.result(this,b))].concat(c.toArray(arguments));return c[e].apply(c,a)}})};var x=function(a,b,e){return e.toUpperCase()},y=/(^|:)(\w)/gi;d.triggerMethod=function(a){var b=this["on"+a.replace(y,x)],e;c.isFunction(b)&&(e=b.apply(this,c.tail(arguments)));c.isFunction(this.trigger)&&
this.trigger.apply(this,arguments);return e};var z=document.documentElement,o=function(a){a._isShown&&a._isRendered&&f.$.contains(z,a.el)&&c.isFunction(a.triggerMethod)&&a.triggerMethod("dom:refresh")};d.MonitorDOMRefresh=function(a){a.listenTo(a,"show",function(){a._isShown=!0;o(a)});a.listenTo(a,"render",function(){a._isRendered=!0;o(a)})};var A=function(a,b,e,d){d=d.split(/\s+/);c.each(d,function(c){var d=a[c];d||i('Method "'+c+'" was configured as an event handler, but does not exist.');a.listenTo(b,
e,d)})},B=function(a,b,e,c){a.listenTo(b,e,c)},C=function(a,b,e,d){d=d.split(/\s+/);c.each(d,function(c){a.stopListening(b,e,a[c])})},D=function(a,b,c,d){a.stopListening(b,c,d)},p=function(a,b,e,d,f){b&&e&&(c.isFunction(e)&&(e=e.call(a)),c.each(e,function(e,g){c.isFunction(e)?d(a,b,g,e):f(a,b,g,e)}))};d.bindEntityEvents=function(a,b,c){p(a,b,c,B,A)};d.unbindEntityEvents=function(a,b,c){p(a,b,c,D,C)};d.proxyBindEntityEvents=function(a,b){return d.bindEntityEvents(this,a,b)};d.proxyUnbindEntityEvents=
function(a,b){return d.unbindEntityEvents(this,a,b)};d.Callbacks=function(){this._deferred=d.Deferred();this._callbacks=[]};c.extend(d.Callbacks.prototype,{add:function(a,b){var e=c.result(this._deferred,"promise");this._callbacks.push({cb:a,ctx:b});e.then(function(c){b&&(c.context=b);a.call(c.context,c.options)})},run:function(a,b){this._deferred.resolve({options:a,context:b})},reset:function(){var a=this._callbacks;this._deferred=d.Deferred();this._callbacks=[];c.each(a,function(a){this.add(a.cb,
a.ctx)},this)}});d.Controller=function(a){this.options=a||{};c.isFunction(this.initialize)&&this.initialize(this.options)};d.Controller.extend=d.extend;c.extend(d.Controller.prototype,f.Events,{destroy:function(){var a=j.call(arguments);this.triggerMethod.apply(this,["before:destroy"].concat(a));this.triggerMethod.apply(this,["destroy"].concat(a));this.stopListening();this.off();return this},triggerMethod:d.triggerMethod,getOption:d.proxyGetOption});d.Object=function(a){this.options=c.extend({},c.result(this,
"options"),a);this.initialize(this.options)};d.Object.extend=d.extend;c.extend(d.Object.prototype,{initialize:function(){},destroy:function(){this.triggerMethod("before:destroy");this.triggerMethod("destroy");this.stopListening()},triggerMethod:d.triggerMethod,getOption:d.proxyGetOption,bindEntityEvents:d.proxyBindEntityEvents,unbindEntityEvents:d.proxyUnbindEntityEvents});c.extend(d.Object.prototype,f.Events);d.Region=function(a){this.options=a||{};this.el=this.getOption("el");(this.el=this.el instanceof
f.$?this.el[0]:this.el)||i('An "el" must be specified for a region.',"NoElError");this.$el=this.getEl(this.el);if(this.initialize){var b=j.apply(arguments);this.initialize.apply(this,b)}};c.extend(d.Region,{buildRegion:function(a,b){if(c.isString(a))return this._buildRegionFromSelector(a,b);if(a.selector||a.el||a.regionClass)return this._buildRegionFromObject(a,b);if(c.isFunction(a))return this._buildRegionFromRegionClass(a);i("Improper region configuration type. Please refer to http://marionettejs.com/docs/marionette.region.html#region-configuration-types")},
_buildRegionFromSelector:function(a,b){return new b({el:a})},_buildRegionFromObject:function(a,b){var e=a.regionClass||b,d=c.omit(a,"selector","regionClass");a.selector&&!d.el&&(d.el=a.selector);e=new e(d);a.parentEl&&(e.getEl=function(b){if(c.isObject(b))return f.$(b);var e=a.parentEl;c.isFunction(e)&&(e=e());return e.find(b)});return e},_buildRegionFromRegionClass:function(a){return new a}});c.extend(d.Region.prototype,f.Events,{show:function(a,b){this._ensureElement();var e=b||{},d=a!==this.currentView,
f=!!e.forceShow,g=!!this.currentView;!e.preventDestroy&&d&&this.empty();if(d||f)a.once("destroy",c.bind(this.empty,this)),a.render(),g&&this.triggerMethod("before:swap",a),this.triggerMethod("before:show",a),c.isFunction(a.triggerMethod)?a.triggerMethod("before:show"):this.triggerMethod.call(a,"before:show"),this.attachHtml(a),this.currentView=a,g&&this.triggerMethod("swap",a),this.triggerMethod("show",a),c.isFunction(a.triggerMethod)?a.triggerMethod("show"):this.triggerMethod.call(a,"show");return this},
_ensureElement:function(){c.isObject(this.el)||(this.$el=this.getEl(this.el),this.el=this.$el[0]);(!this.$el||0===this.$el.length)&&i('An "el" '+this.$el.selector+" must exist in DOM")},getEl:function(a){return f.$(a)},attachHtml:function(a){this.el.innerHTML="";this.el.appendChild(a.el)},empty:function(){var a=this.currentView;if(a)return this.triggerMethod("before:empty",a),this._destroyView(),this.triggerMethod("empty",a),delete this.currentView,this},_destroyView:function(){var a=this.currentView;
a.destroy&&!a.isDestroyed?a.destroy():a.remove&&a.remove()},attachView:function(a){this.currentView=a;return this},hasView:function(){return!!this.currentView},reset:function(){this.empty();this.$el&&(this.el=this.$el.selector);delete this.$el;return this},getOption:d.proxyGetOption,triggerMethod:d.triggerMethod});d.Region.extend=d.extend;g=d.Controller.extend({constructor:function(a){this._regions={};d.Controller.call(this,a)},addRegions:function(a,b){c.isFunction(a)&&(a=a.apply(this,arguments));
var e={};c.each(a,function(a,d){c.isString(a)&&(a={selector:a});a.selector&&(a=c.defaults({},a,b));var f=this.addRegion(d,a);e[d]=f},this);return e},addRegion:function(a,b){var e;e=c.isObject(b);var n=c.isString(b),f=!!b.selector;e=n||e&&f?d.Region.buildRegion(b,d.Region):c.isFunction(b)?d.Region.buildRegion(b,d.Region):b;this.triggerMethod("before:add:region",a,e);this._store(a,e);this.triggerMethod("add:region",a,e);return e},get:function(a){return this._regions[a]},getRegions:function(){return c.clone(this._regions)},
removeRegion:function(a){var b=this._regions[a];this._remove(a,b);return b},removeRegions:function(){var a=this.getRegions();c.each(this._regions,function(a,c){this._remove(c,a)},this);return a},emptyRegions:function(){var a=this.getRegions();c.each(a,function(a){a.empty()},this);return a},destroy:function(){this.removeRegions();return d.Controller.prototype.destroy.apply(this,arguments)},_store:function(a,b){this._regions[a]=b;this._setLength()},_remove:function(a,b){this.triggerMethod("before:remove:region",
a,b);b.empty();b.stopListening();delete this._regions[a];this._setLength();this.triggerMethod("remove:region",a,b)},_setLength:function(){this.length=c.size(this._regions)}});d.actAsCollection(g.prototype,"_regions");d.RegionManager=g;d.TemplateCache=function(a){this.templateId=a};c.extend(d.TemplateCache,{templateCaches:{},get:function(a){var b=this.templateCaches[a];b||(b=new d.TemplateCache(a),this.templateCaches[a]=b);return b.load()},clear:function(){var a,b=j.call(arguments),c=b.length;if(0<
c)for(a=0;a<c;a++)delete this.templateCaches[b[a]];else this.templateCaches={}}});c.extend(d.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var a=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(a)},loadTemplate:function(a){var b=f.$(a).html();(!b||0===b.length)&&i('Could not find template: "'+a+'"',"NoTemplateError");return b},compileTemplate:function(a){return c.template(a)}});d.Renderer={render:function(a,b){a||
i("Cannot render the template since its false, null or undefined.","TemplateNotFoundError");return("function"===typeof a?a:d.TemplateCache.get(a))(b)}};d.View=f.View.extend({constructor:function(a){c.bindAll(this,"render");this.options=c.extend({},c.result(this,"options"),c.isFunction(a)?a.call(this):a);this.events=this.normalizeUIKeys(c.result(this,"events"));c.isObject(this.behaviors)&&new d.Behaviors(this);f.View.apply(this,arguments);d.MonitorDOMRefresh(this);this.listenTo(this,"show",this.onShowCalled)},
getTemplate:function(){return this.getOption("template")},serializeModel:function(a){return a.toJSON.apply(a,j.call(arguments,1))},mixinTemplateHelpers:function(a){var a=a||{},b=this.getOption("templateHelpers");c.isFunction(b)&&(b=b.call(this));return c.extend(a,b)},normalizeUIKeys:function(a){var b=c.result(this,"ui"),e=c.result(this,"_uiBindings");return d.normalizeUIKeys(a,e||b)},configureTriggers:function(){if(this.triggers){var a={},b=this.normalizeUIKeys(c.result(this,"triggers"));c.each(b,
function(b,d){var f=c.isObject(b),g=f?b.event:b;a[d]=function(a){if(a){var c=a.preventDefault,d=a.stopPropagation,n=f?b.stopPropagation:d;(f?b.preventDefault:c)&&c&&c.apply(a);n&&d&&d.apply(a)}this.triggerMethod(g,{view:this,model:this.model,collection:this.collection})}},this);return a}},delegateEvents:function(a){this._delegateDOMEvents(a);this.bindEntityEvents(this.model,this.getOption("modelEvents"));this.bindEntityEvents(this.collection,this.getOption("collectionEvents"));return this},_delegateDOMEvents:function(a){a=
a||this.events;c.isFunction(a)&&(a=a.call(this));var a=this.normalizeUIKeys(a),b={},e=c.result(this,"behaviorEvents")||{},d=this.configureTriggers();c.extend(b,e,a,d);f.View.prototype.delegateEvents.call(this,b)},undelegateEvents:function(){var a=j.call(arguments);f.View.prototype.undelegateEvents.apply(this,a);this.unbindEntityEvents(this.model,this.getOption("modelEvents"));this.unbindEntityEvents(this.collection,this.getOption("collectionEvents"));return this},onShowCalled:function(){},_ensureViewIsIntact:function(){if(this.isDestroyed){var a=
Error("Cannot use a view thats already been destroyed.");a.name="ViewDestroyedError";throw a;}},destroy:function(){if(!this.isDestroyed){var a=j.call(arguments);this.triggerMethod.apply(this,["before:destroy"].concat(a));this.isDestroyed=!0;this.triggerMethod.apply(this,["destroy"].concat(a));this.unbindUIElements();this.remove();return this}},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var a=c.result(this,"_uiBindings");this.ui={};c.each(c.keys(a),function(b){this.ui[b]=
this.$(a[b])},this)}},unbindUIElements:function(){this.ui&&this._uiBindings&&(c.each(this.ui,function(a,b){delete this.ui[b]},this),this.ui=this._uiBindings,delete this._uiBindings)},triggerMethod:d.triggerMethod,normalizeMethods:d.normalizeMethods,getOption:d.proxyGetOption,bindEntityEvents:d.proxyBindEntityEvents,unbindEntityEvents:d.proxyUnbindEntityEvents});d.ItemView=d.View.extend({constructor:function(){d.View.apply(this,arguments)},serializeData:function(){var a={};this.model?a=c.partial(this.serializeModel,
this.model).apply(this,arguments):this.collection&&(a={items:c.partial(this.serializeCollection,this.collection).apply(this,arguments)});return a},serializeCollection:function(a){return a.toJSON.apply(a,j.call(arguments,1))},render:function(){this._ensureViewIsIntact();this.triggerMethod("before:render",this);this._renderTemplate();this.bindUIElements();this.triggerMethod("render",this);return this},_renderTemplate:function(){var a=this.getTemplate();if(!1!==a){a||i("Cannot render the template since it is null or undefined.",
"UndefinedTemplateError");var b=this.serializeData(),b=this.mixinTemplateHelpers(b),a=d.Renderer.render(a,b,this);this.attachElContent(a);return this}},attachElContent:function(a){this.$el.html(a);return this},destroy:function(){if(!this.isDestroyed)return d.View.prototype.destroy.apply(this,arguments)}});d.CollectionView=d.View.extend({childViewEventPrefix:"childview",constructor:function(a){var b=a||{};this.sort=c.isUndefined(b.sort)?!0:b.sort;this._initChildViewStorage();d.View.apply(this,arguments);
this._initialEvents();this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment();this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer();this.isBuffering=!0},endBuffering:function(){this.isBuffering=!1;this._triggerBeforeShowBufferedChildren();this.attachBuffer(this,this.elBuffer);this._triggerShowBufferedChildren();this.initRenderBuffer()},_triggerBeforeShowBufferedChildren:function(){this._isShown&&c.invoke(this._bufferedChildren,"triggerMethod",
"before:show")},_triggerShowBufferedChildren:function(){this._isShown&&(c.each(this._bufferedChildren,function(a){c.isFunction(a.triggerMethod)?a.triggerMethod("show"):d.triggerMethod.call(a,"show")}),this._bufferedChildren=[])},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this.render),this.sort&&this.listenTo(this.collection,"sort",this._sortViews))},
_onCollectionAdd:function(a){this.destroyEmptyView();var b=this.getChildView(a),c=this.collection.indexOf(a);this.addChild(a,b,c)},_onCollectionRemove:function(a){a=this.children.findByModel(a);this.removeChildView(a);this.checkEmpty()},onShowCalled:function(){this.children.each(function(a){c.isFunction(a.triggerMethod)?a.triggerMethod("show"):d.triggerMethod.call(a,"show")})},render:function(){this._ensureViewIsIntact();this.triggerMethod("before:render",this);this._renderChildren();this.triggerMethod("render",
this);return this},resortView:function(){this.render()},_sortViews:function(){this.collection.find(function(a,b){var c=this.children.findByModel(a);return!c||c._index!==b},this)&&this.resortView()},_renderChildren:function(){this.destroyEmptyView();this.destroyChildren();this.isEmpty(this.collection)?this.showEmptyView():(this.triggerMethod("before:render:collection",this),this.startBuffering(),this.showCollection(),this.endBuffering(),this.triggerMethod("render:collection",this))},showCollection:function(){var a;
this.collection.each(function(b,c){a=this.getChildView(b);this.addChild(b,a,c)},this)},showEmptyView:function(){var a=this.getEmptyView();if(a&&!this._showingEmptyView){this.triggerMethod("before:render:empty");this._showingEmptyView=!0;var b=new f.Model;this.addEmptyView(b,a);this.triggerMethod("render:empty")}},destroyEmptyView:function(){this._showingEmptyView&&(this.destroyChildren(),delete this._showingEmptyView)},getEmptyView:function(){return this.getOption("emptyView")},addEmptyView:function(a,
b){var e=this.getOption("emptyViewOptions")||this.getOption("childViewOptions");c.isFunction(e)&&(e=e.call(this));e=this.buildChildView(a,b,e);this._isShown&&this.triggerMethod.call(e,"before:show");this.children.add(e);this.renderChildView(e,-1);this._isShown&&this.triggerMethod.call(e,"show")},getChildView:function(){var a=this.getOption("childView");a||i('A "childView" must be specified',"NoChildViewError");return a},addChild:function(a,b,e){var d=this.getOption("childViewOptions");c.isFunction(d)&&
(d=d.call(this,a,e));a=this.buildChildView(a,b,d);this._updateIndices(a,!0,e);this._addChildView(a,e);return a},_updateIndices:function(a,b,c){this.sort&&(b?(a._index=c,this.children.each(function(b){b._index>=a._index&&b._index++})):this.children.each(function(b){b._index>=a._index&&b._index--}))},_addChildView:function(a,b){this.proxyChildEvents(a);this.triggerMethod("before:add:child",a);this.children.add(a);this.renderChildView(a,b);this._isShown&&!this.isBuffering&&(c.isFunction(a.triggerMethod)?
a.triggerMethod("show"):d.triggerMethod.call(a,"show"));this.triggerMethod("add:child",a)},renderChildView:function(a,b){a.render();this.attachHtml(this,a,b);return a},buildChildView:function(a,b,e){a=c.extend({model:a},e);return new b(a)},removeChildView:function(a){a&&(this.triggerMethod("before:remove:child",a),a.destroy?a.destroy():a.remove&&a.remove(),this.stopListening(a),this.children.remove(a),this.triggerMethod("remove:child",a),this._updateIndices(a,!1));return a},isEmpty:function(){return!this.collection||
0===this.collection.length},checkEmpty:function(){this.isEmpty(this.collection)&&this.showEmptyView()},attachBuffer:function(a,b){a.$el.append(b)},attachHtml:function(a,b,c){a.isBuffering?(a.elBuffer.appendChild(b.el),a._bufferedChildren.push(b)):a._insertBefore(b,c)||a._insertAfter(b)},_insertBefore:function(a,b){var c;this.sort&&b<this.children.length-1&&(c=this.children.find(function(a){return a._index===b+1}));return c?(c.$el.before(a.el),!0):!1},_insertAfter:function(a){this.$el.append(a.el)},
_initChildViewStorage:function(){this.children=new u},destroy:function(){if(!this.isDestroyed)return this.triggerMethod("before:destroy:collection"),this.destroyChildren(),this.triggerMethod("destroy:collection"),d.View.prototype.destroy.apply(this,arguments)},destroyChildren:function(){var a=this.children.map(c.identity);this.children.each(this.removeChildView,this);this.checkEmpty();return a},proxyChildEvents:function(a){var b=this.getOption("childViewEventPrefix");this.listenTo(a,"all",function(){var d=
j.call(arguments),f=d[0],g=this.normalizeMethods(c.result(this,"childEvents"));d[0]=b+":"+f;d.splice(1,0,a);"undefined"!==typeof g&&c.isFunction(g[f])&&g[f].apply(this,d.slice(1));this.triggerMethod.apply(this,d)},this)}});d.CompositeView=d.CollectionView.extend({constructor:function(){d.CollectionView.apply(this,arguments)},_initialEvents:function(){this.once("render",function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),
this.listenTo(this.collection,"reset",this._renderChildren),this.sort&&this.listenTo(this.collection,"sort",this._sortViews))})},getChildView:function(){var a=this.getOption("childView")||this.constructor;a||i('A "childView" must be specified',"NoChildViewError");return a},serializeData:function(){var a={};this.model&&(a=c.partial(this.serializeModel,this.model).apply(this,arguments));return a},render:function(){this._ensureViewIsIntact();this.isRendered=!0;this.resetChildViewContainer();this.triggerMethod("before:render",
this);this._renderTemplate();this._renderChildren();this.triggerMethod("render",this);return this},_renderChildren:function(){this.isRendered&&d.CollectionView.prototype._renderChildren.call(this)},_renderTemplate:function(){var a={},a=this.serializeData(),a=this.mixinTemplateHelpers(a);this.triggerMethod("before:render:template");var b=this.getTemplate(),a=d.Renderer.render(b,a,this);this.attachElContent(a);this.bindUIElements();this.triggerMethod("render:template")},attachElContent:function(a){this.$el.html(a);
return this},attachBuffer:function(a,b){this.getChildViewContainer(a).append(b)},_insertAfter:function(a){this.getChildViewContainer(this).append(a.el)},getChildViewContainer:function(a){if("$childViewContainer"in a)return a.$childViewContainer;var b;(b=d.getOption(a,"childViewContainer"))?(b=c.isFunction(b)?b.call(a):b,b="@"===b.charAt(0)&&a.ui?a.ui[b.substr(4)]:a.$(b),0>=b.length&&i('The specified "childViewContainer" was not found: '+a.childViewContainer,"ChildViewContainerMissingError")):b=a.$el;
return a.$childViewContainer=b},resetChildViewContainer:function(){this.$childViewContainer&&delete this.$childViewContainer}});d.LayoutView=d.ItemView.extend({regionClass:d.Region,constructor:function(a){a=a||{};this._firstRender=!0;this._initializeRegions(a);d.ItemView.call(this,a)},render:function(){this._ensureViewIsIntact();this._firstRender?this._firstRender=!1:this._reInitializeRegions();return d.ItemView.prototype.render.apply(this,arguments)},destroy:function(){if(this.isDestroyed)return this;
this.regionManager.destroy();return d.ItemView.prototype.destroy.apply(this,arguments)},addRegion:function(a,b){this.triggerMethod("before:region:add",a);var c={};c[a]=b;return this._buildRegions(c)[a]},addRegions:function(a){this.regions=c.extend({},this.regions,a);return this._buildRegions(a)},removeRegion:function(a){this.triggerMethod("before:region:remove",a);delete this.regions[a];return this.regionManager.removeRegion(a)},getRegion:function(a){return this.regionManager.get(a)},getRegions:function(){return this.regionManager.getRegions()},
_buildRegions:function(a){var b=this,c={regionClass:this.getOption("regionClass"),parentEl:function(){return b.$el}};return this.regionManager.addRegions(a,c)},_initializeRegions:function(a){var b;this._initRegionManager();b=c.isFunction(this.regions)?this.regions(a):this.regions||{};var d=this.getOption.call(a,"regions");c.isFunction(d)&&(d=d.call(this,a));c.extend(b,d);this.addRegions(b)},_reInitializeRegions:function(){this.regionManager.emptyRegions();this.regionManager.each(function(a){a.reset()})},
getRegionManager:function(){return new d.RegionManager},_initRegionManager:function(){this.regionManager=this.getRegionManager();this.listenTo(this.regionManager,"before:add:region",function(a){this.triggerMethod("before:add:region",a)});this.listenTo(this.regionManager,"add:region",function(a,b){this[a]=b;this.triggerMethod("add:region",a,b)});this.listenTo(this.regionManager,"before:remove:region",function(a){this.triggerMethod("before:remove:region",a)});this.listenTo(this.regionManager,"remove:region",
function(a,b){delete this[a];this.triggerMethod("remove:region",a,b)})}});g=function(a,b){this.view=b;this.defaults=c.result(this,"defaults")||{};this.options=c.extend({},this.defaults,a);this.$=function(){return this.view.$.apply(this.view,arguments)};this.initialize.apply(this,arguments)};c.extend(g.prototype,f.Events,{initialize:function(){},destroy:function(){this.stopListening()},triggerMethod:d.triggerMethod,getOption:d.proxyGetOption,bindEntityEvents:d.proxyBindEntityEvents,unbindEntityEvents:d.proxyUnbindEntityEvents});
g.extend=d.extend;d.Behavior=g;var k=function(a,b){b=k.parseBehaviors(a,b||c.result(a,"behaviors"));k.wrap(a,b,c.keys(q))},q={setElement:function(a,b){a.apply(this,c.tail(arguments,2));c.each(b,function(a){a.$el=this.$el;a.el=this.el},this);return this},destroy:function(a,b){var d=c.tail(arguments,2);a.apply(this,d);c.invoke(b,"destroy",d);return this},bindUIElements:function(a,b){a.apply(this);c.invoke(b,a)},unbindUIElements:function(a,b){a.apply(this);c.invoke(b,a)},triggerMethod:function(a,b){var d=
c.tail(arguments,2);a.apply(this,d);c.each(b,function(b){a.apply(b,d)})},delegateEvents:function(a,b){var e=c.tail(arguments,2);a.apply(this,e);c.each(b,function(a){d.bindEntityEvents(a,this.model,d.getOption(a,"modelEvents"));d.bindEntityEvents(a,this.collection,d.getOption(a,"collectionEvents"))},this);return this},undelegateEvents:function(a,b){var e=c.tail(arguments,2);a.apply(this,e);c.each(b,function(a){d.unbindEntityEvents(a,this.model,d.getOption(a,"modelEvents"));d.unbindEntityEvents(a,this.collection,
d.getOption(a,"collectionEvents"))},this);return this},behaviorEvents:function(a,b){var e={},f=c.result(this,"ui");c.each(b,function(a,b){var g={},h=c.clone(c.result(a,"events"))||{},i=c.result(a,"ui"),i=c.extend({},f,i),h=d.normalizeUIKeys(h,i);c.each(c.keys(h),function(d){var e=Array(b+2).join(" "),e=d+e,d=c.isFunction(h[d])?h[d]:a[h[d]];g[e]=c.bind(d,a)});e=c.extend(e,g)});return e}};c.extend(k,{behaviorsLookup:function(){throw Error("You must define where your behaviors are stored.See https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.behaviors.md#behaviorslookup");
},getBehaviorClass:function(a,b){return a.behaviorClass?a.behaviorClass:c.isFunction(k.behaviorsLookup)?k.behaviorsLookup.apply(this,arguments)[b]:k.behaviorsLookup[b]},parseBehaviors:function(a,b){return c.chain(b).map(function(b,d){var f=new (k.getBehaviorClass(b,d))(b,a),g=k.parseBehaviors(a,c.result(f,"behaviors"));return[f].concat(g)}).flatten().value()},wrap:function(a,b,d){c.each(d,function(d){a[d]=c.partial(q[d],a[d],b)})}});d.Behaviors=k;d.AppRouter=f.Router.extend({constructor:function(a){f.Router.apply(this,
arguments);this.options=a||{};var b=this.getOption("appRoutes"),c=this._getController();this.processAppRoutes(c,b);this.on("route",this._processOnRoute,this)},appRoute:function(a,b){var c=this._getController();this._addAppRoute(c,a,b)},_processOnRoute:function(a,b){var d=c.invert(this.getOption("appRoutes"))[a];if(c.isFunction(this.onRoute))this.onRoute(a,d,b)},processAppRoutes:function(a,b){if(b){var d=c.keys(b).reverse();c.each(d,function(c){this._addAppRoute(a,c,b[c])},this)}},_getController:function(){return this.getOption("controller")},
_addAppRoute:function(a,b,d){var f=a[d];f||i('Method "'+d+'" was not found on the controller');this.route(b,d,c.bind(f,a))},getOption:d.proxyGetOption});d.Application=function(a){this._initializeRegions(a);this._initCallbacks=new d.Callbacks;this.submodules={};c.extend(this,a);this._initChannel()};c.extend(d.Application.prototype,f.Events,{execute:function(){this.commands.execute.apply(this.commands,arguments)},request:function(){return this.reqres.request.apply(this.reqres,arguments)},addInitializer:function(a){this._initCallbacks.add(a)},
start:function(a){this.triggerMethod("before:start",a);this._initCallbacks.run(a,this);this.triggerMethod("start",a)},addRegions:function(a){return this._regionManager.addRegions(a)},emptyRegions:function(){return this._regionManager.emptyRegions()},removeRegion:function(a){return this._regionManager.removeRegion(a)},getRegion:function(a){return this._regionManager.get(a)},getRegions:function(){return this._regionManager.getRegions()},module:function(a,b){var c=d.Module.getClass(b),f=j.call(arguments);
f.unshift(this);return c.create.apply(c,f)},getRegionManager:function(){return new d.RegionManager},_initializeRegions:function(a){var b=c.isFunction(this.regions)?this.regions(a):this.regions||{};this._initRegionManager();var e=d.getOption(a,"regions");c.isFunction(e)&&(e=e.call(this,a));c.extend(b,e);this.addRegions(b);return this},_initRegionManager:function(){this._regionManager=this.getRegionManager();this.listenTo(this._regionManager,"before:add:region",function(a){this.triggerMethod("before:add:region",
a)});this.listenTo(this._regionManager,"add:region",function(a,b){this[a]=b;this.triggerMethod("add:region",a,b)});this.listenTo(this._regionManager,"before:remove:region",function(a){this.triggerMethod("before:remove:region",a)});this.listenTo(this._regionManager,"remove:region",function(a,b){delete this[a];this.triggerMethod("remove:region",a,b)})},_initChannel:function(){this.channelName=c.result(this,"channelName")||"global";this.channel=c.result(this,"channel")||v.radio.channel(this.channelName);
this.vent=c.result(this,"vent")||this.channel.vent;this.commands=c.result(this,"commands")||this.channel.commands;this.reqres=c.result(this,"reqres")||this.channel.reqres},triggerMethod:d.triggerMethod,getOption:d.proxyGetOption});d.Application.extend=d.extend;d.Module=function(a,b,d){this.moduleName=a;this.options=c.extend({},this.options,d);this.initialize=d.initialize||this.initialize;this.submodules={};this._setupInitializersAndFinalizers();this.app=b;this.startWithParent=!0;c.isFunction(this.initialize)&&
this.initialize(a,b,this.options)};d.Module.extend=d.extend;c.extend(d.Module.prototype,f.Events,{initialize:function(){},addInitializer:function(a){this._initializerCallbacks.add(a)},addFinalizer:function(a){this._finalizerCallbacks.add(a)},start:function(a){this._isInitialized||(c.each(this.submodules,function(b){b.startWithParent&&b.start(a)}),this.triggerMethod("before:start",a),this._initializerCallbacks.run(a,this),this._isInitialized=!0,this.triggerMethod("start",a))},stop:function(){this._isInitialized&&
(this._isInitialized=!1,this.triggerMethod("before:stop"),c.each(this.submodules,function(a){a.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),this.triggerMethod("stop"))},addDefinition:function(a,b){this._runModuleDefinition(a,b)},_runModuleDefinition:function(a,b){if(a){var e=c.flatten([this,this.app,f,d,f.$,c,b]);a.apply(this,e)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new d.Callbacks;this._finalizerCallbacks=
new d.Callbacks},triggerMethod:d.triggerMethod});c.extend(d.Module,{create:function(a,b,d){var f=a,g=j.call(arguments);g.splice(0,3);var b=b.split("."),h=[];h[b.length-1]=d;c.each(b,function(b,c){var i=f;f=this._getModule(i,b,a,d);this._addModuleDefinition(i,f,h[c],g)},this);return f},_getModule:function(a,b,d,f){var g=c.extend({},f),f=this.getClass(f),h=a[b];h||(h=new f(b,d,g),a[b]=h,a.submodules[b]=h);return h},getClass:function(a){var b=d.Module;return!a?b:a.prototype instanceof b?a:a.moduleClass||
b},_addModuleDefinition:function(a,b,c,d){var f=this._getDefine(c),c=this._getStartWithParent(c,b);f&&b.addDefinition(f,d);this._addStartWithParent(a,b,c)},_getStartWithParent:function(a,b){var e;return c.isFunction(a)&&a.prototype instanceof d.Module?(e=b.constructor.prototype.startWithParent,c.isUndefined(e)?!0:e):c.isObject(a)?(e=a.startWithParent,c.isUndefined(e)?!0:e):!0},_getDefine:function(a){return c.isFunction(a)&&!(a.prototype instanceof d.Module)?a:c.isObject(a)?a.define:null},_addStartWithParent:function(a,
b,c){b.startWithParent=b.startWithParent&&c;b.startWithParent&&!b.startWithParentIsConfigured&&(b.startWithParentIsConfigured=!0,a.addInitializer(function(a){b.startWithParent&&b.start(a)}))}});this.Marionette=d});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:marionette', location = '/sidebar/lib/backbone.marionette.adapter.js' */
define("jira/projects/libs/marionette",["backbone","underscore","atlassian/libs/factories/marionette-2.1.0"],function(e,r,t){"use strict";return t(r,e)}),AJS.namespace("JIRA.Projects.Libs.Marionette",null,require("jira/projects/libs/marionette"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:marionette', location = '/sidebar/lib/backbone.marionette.mixins.js' */
!function(){"use strict";function e(e,t){var i=this,r=_.defaults({},t||{},{isPrevented:!1,emitter:this,preventDefault:function(){this.isPrevented=!0,i.trigger(e+":prevented",this)}});return this.trigger(e,r),r}function t(e,t){var i=this.triggerPreventable(e,t);i.isPrevented&&t.preventDefault()}_.extend(JIRA.Projects.Libs.Marionette.View.prototype,{unwrapTemplate:function(){if(this.$el.parent().length){var e=this.$el.children();this.$el.replaceWith(e),this.setElement(e)}else this.setElement(this.$el.children())},triggerPreventable:e,retriggerPreventable:t}),_.extend(JIRA.Projects.Libs.Marionette.Controller.prototype,{triggerPreventable:e,retriggerPreventable:t}),JIRA.Projects.Libs.Marionette.ViewManager=JIRA.Projects.Libs.Marionette.Controller.extend({constructor:function(){JIRA.Projects.Libs.Marionette.Controller.apply(this,arguments),this.views={}},hideView:function(e){var t=this.views[e];t&&(this.stopListening(t),t.isDestroyed||t.destroy(),delete this.views[e])},showView:function(e,t){var i=this.buildView(e,t);i.render()},buildView:function(e,t){var i=this.views[e];return i||(i=t.call(this),this.listenTo(i,"destroy",function(){this.hideView(e)}),this.views[e]=i),i},getView:function(e){return this.views[e]}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-component', location = '/sidebar/component/component.js' */
define("jira/projects/sidebar/component",["underscore","jira/projects/data/WRM"],function(e,t){"use strict";var r=Boolean(t.data.claim("is-global-sidebar"));return JIRA.Projects.Libs.Marionette.CompositeView.extend({childEvents:{"before:select":function(e,t){this.hasASelectedItem()||(t.isInitial=!0),this.retriggerPreventable("before:select",t),t.isPrevented||this.deselectAllGroups()},select:function(e,t){this.trigger("select",t)},"before:deselect":function(e,t){this.retriggerPreventable("before:deselect",t)},deselect:function(e,t){this.trigger("deselect",t)},"before:navigate":function(e,t){this.retriggerPreventable("before:navigate",t)},"before:navigate:prevented":function(e,t){this.trigger("before:navigate:prevented",t)}},events:{"click .js-nav-project-title-link":"_clickProjectName","click .js-nav-project-avatar-link":"_clickProjectAvatar","click a[data-link-id='com.atlassian.jira.jira-projects-plugin:summary-page']":"_clickProjectSummary"},initialize:function(){this.render({force:!0});try{this.tracker=require("jira/components/analytics-tracker/tracker")}catch(e){}this.bindUIElements();var t=AJS.sidebar(".aui-sidebar");e.each(["expand-end","collapse-end","collapse-start"],function(e){t.on(e,function(){this.trigger(e)}.bind(this))}.bind(this))},render:function(t){t=e.defaults({},t,{force:!1});var r="el"in t,i=r||t.force===!0,n=this.children.length>0;if(!i)return this;var a=this.triggerPreventable("before:render");if(a.isPrevented)return this;if(n){var c=this.triggerPreventable("before:detach");if(c.isPrevented)return this;this.destroyChildren({checkEmpty:!1}),this.trigger("detach")}if(r){var o=jQuery(t.el);this.$el.replaceWith(o),this.setElement(o)}return this.$(".aui-sidebar-group").each(e.bind(function(e,t){var r=new JIRA.Projects.Sidebar.Component.NavigationGroup({el:t}),i=!!this.getGroup(r.id);i&&AJS.warn&&AJS.warn('Duplicated IDs detected. There are more than one NavigationGroup with id data-id="'+r.id+'"'),this.proxyChildEvents(r),this.children.add(r,r.id)},this)),this.trigger("render"),this},reflow:function(){AJS.sidebar(".aui-sidebar").reflow()},isCollapsed:function(){return AJS.sidebar(".aui-sidebar").isCollapsed()},deselectAllGroups:function(){this.children.call("deselect")},on:function(){return JIRA.Projects.Libs.Marionette.CompositeView.prototype.on.apply(this,arguments)},off:function(){return JIRA.Projects.Libs.Marionette.CompositeView.prototype.off.apply(this,arguments)},replaceGroup:function(e,t){var r=this.getGroup(e);r.$el.replaceWith(t.$el),t.cid=r.cid,this.children.remove(r),this.children.add(t,t.id)},getGroup:function(e){return this.children.findByCustom(e)},getGroupAt:function(e){return this.children.findByIndex(e)},getItem:function(e){return this.getDefaultGroup().getItem(e)},getElement:function(){return this._trackDeprecated("getElement"),this.el},getDefaultGroup:function(){return this.getGroup("sidebar-navigation-panel")},isProjectSidebar:function(){return!r},getSelectedScopeFilterId:function(){return this._trackDeprecated("getSelectedScopeFilterId"),this.$(".scope-filter a.scope-filter-trigger").attr("data-scope-filter-id")},setReportsItemLink:function(e){this._trackDeprecated("setReportsItemLink");var t=this.getGroup("sidebar-navigation-panel"),r=t.getItem("com.atlassian.jira.jira-projects-plugin:report-page");"undefined"==typeof r&&(r=t.getItem("com.pyxis.greenhopper.jira:global-sidebar-report")),r&&r.attr("href",e)},getAUISidebar:function(){return this._trackDeprecated("getAUISidebar"),AJS.sidebar(".aui-sidebar")},getContentContainer:function(){return this._trackDeprecated("getContentContainer"),this.$(".aui-sidebar-body .sidebar-content-container")},getSelectedNavigationItem:function(){return this.getDefaultGroup().getSelectedNavigationItem()},hasASelectedItem:function(){return this.getDefaultGroup().hasASelectedItem()},dim:function(){this._trackDeprecated("dim"),this.$el.attr({dimmed:"","aria-hidden":"true"})},undim:function(){this._trackDeprecated("undim"),this.$el.removeAttr("dimmed"),this.$el.removeAttr("aria-hidden")},_clickProjectName:function(){"undefined"!=typeof this.tracker&&this.tracker.trackEvent("project.sidebar","click.projectName")},_clickProjectAvatar:function(){"undefined"!=typeof this.tracker&&this.tracker.trackEvent("project.sidebar","click.avatar")},_clickProjectSummary:function(){"undefined"!=typeof this.tracker&&this.tracker.trackEvent("project.sidebar","click.projectSummary")},_trackDeprecated:function(e){AJS.warn("The Sidebar method "+e+" is going to be deprecated"),AJS.trigger("analyticsEvent",{name:"jira.project.centric.navigation.sidebar.method.deprecated",data:{method:e}})}})}),AJS.namespace("JIRA.Projects.Sidebar.Component",null,require("jira/projects/sidebar/component"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-component', location = '/sidebar/component/navigation-item.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar.Component.NavigationItem"),JIRA.Projects.Sidebar.Component.NavigationItem=JIRA.Projects.Libs.Marionette.CompositeView.extend({ui:{link:"a.aui-nav-item"},events:{'simpleClick @ui.link:not([target="_blank"])':function(e){e.preventDefault(),this.navigate()}},initialize:function(){this.id=this.$el.find(">a").attr("data-link-id"),this.bindUIElements()},onDestroy:function(){this.unbind()},getElement:function(){return this._trackDeprecated("getElement"),this.el},navigate:function(){if(this.select()){var e=this.triggerPreventable("before:navigate");if(e.isPrevented)return!1;var t=this.ui.link.attr("href");return t&&require("jira/util/browser").reloadViaWindowLocation(t),!0}},select:function(){var e=this.triggerPreventable("before:select");return!e.isPrevented&&(this.$el.addClass("aui-nav-selected"),this.trigger("select",e),!0)},deselect:function(){if(!this.isSelected())return!0;var e=this.triggerPreventable("before:deselect");return!e.isPrevented&&(this.$el.removeClass("aui-nav-selected"),this.$el.find("a").blur(),this.trigger("deselect",e),!0)},isSelected:function(){return this.$el.hasClass("aui-nav-selected")},removeBadge:function(){this.$el.find(".aui-badge").remove()},getId:function(){return this.id},getSelectedNavigationItem:function(){if(this.isSelected())return this},hasASelectedItem:function(){return this.isSelected()},attr:function(e,t){var i=this.ui.link.attr(e,t);return t?i:this},_trackDeprecated:function(e){AJS.warn("The Sidebar item method "+e+" is going to be deprecated"),AJS.trigger("analyticsEvent",{name:"jira.project.centric.navigation.sidebar.item.method.deprecated",data:{method:e}})}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-component', location = '/sidebar/component/navigation-group.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar.Component.NavigationGroup"),JIRA.Projects.Sidebar.Component.NavigationGroup=JIRA.Projects.Libs.Marionette.CompositeView.extend({childEvents:{"before:select":function(e,t){if(this.retriggerPreventable("before:select",t),!t.isPrevented){var i=this.deselect();i||t.preventDefault()}},select:function(e,t){this.trigger("select",t)},"before:deselect":function(e,t){this.retriggerPreventable("before:deselect",t)},deselect:function(e,t){this.trigger("deselect",t)},"before:navigate":function(e,t){this.retriggerPreventable("before:navigate",t)},"before:navigate:prevented":function(e,t){this.trigger("before:navigate:prevented",t)}},initialize:function(){this.id=this.$el.attr("data-id"),this.$(">ul>li").each(_.bind(function(e,t){var i=JIRA.Projects.Sidebar.Component.NavigationGroup.build(t),n=!!this.getItem(i.id);n&&AJS.warn&&AJS.warn("Duplicated IDs detected. There are more than one NavigationItem with id data-link-id='"+i.id+"'"),this.proxyChildEvents(i),this.children.add(i,i.id)},this))},onDestroy:function(){this.unbind()},getElement:function(){return this._trackDeprecated("getElement"),this.el},deselect:function(){var e=this.triggerPreventable("before:deselect");if(e.isPrevented)return!1;var t=!0;return this.children.each(function(e){t=e.deselect()&&t}),t},getItem:function(e){return this.children.findByCustom(e)},getItemAt:function(e){return this.children.findByIndex(e)},getSelectedNavigationItem:function(){var e=this.children.find(function(e){return e.hasASelectedItem()});if(e)return e.getSelectedNavigationItem()},hasASelectedItem:function(){return this.children.any(function(e){return e.hasASelectedItem()})},_trackDeprecated:function(e){AJS.warn("The Sidebar group method "+e+" is going to be deprecated"),AJS.trigger("analyticsEvent",{name:"jira.project.centric.navigation.sidebar.group.method.deprecated",data:{method:e}})}},{build:function(e){var t;return t=AJS.$(e).find("ul").length?new JIRA.Projects.Sidebar.Component.NavigationSubgroup({el:e}):new JIRA.Projects.Sidebar.Component.NavigationItem({el:e})}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-component', location = '/sidebar/component/navigation-subgroup.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar.Component.NavigationSubgroup"),JIRA.Projects.Sidebar.Component.NavigationSubgroup=JIRA.Projects.Sidebar.Component.NavigationGroup.extend({childEvents:{"before:select":function(e,t){JIRA.Projects.Sidebar.Component.NavigationGroup.prototype.childEvents["before:select"].apply(this,arguments),t.isPrevented||this.expand()}},initialize:function(){this.childEvents=_.extend({},JIRA.Projects.Sidebar.Component.NavigationGroup.prototype.childEvents,this.childEvents),JIRA.Projects.Sidebar.Component.NavigationGroup.prototype.initialize.apply(this,arguments),this.id=this.$el.find(">a[data-link-id]").attr("data-link-id")},expand:function(){this.$el.attr("aria-expanded","true")},collapse:function(){this.$el.attr("aria-expanded","false")},isExpanded:function(){return"true"===this.$el.attr("aria-expanded")},isSelected:function(){return this.$el.hasClass("aui-nav-selected")},getId:function(){return this.id},getSelectedNavigationItem:function(){if(this.isSelected())return this;var e=this.children.find(function(e){return e.hasASelectedItem()});return e?e.getSelectedNavigationItem():void 0},hasASelectedItem:function(){return!!this.isSelected()||this.children.any(function(e){return e.hasASelectedItem()})}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-api', location = '/sidebar/api.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar"),AJS.namespace("JIRA.API");var e=AJS.$.Deferred();JIRA.API.getSidebar=JIRA.API.getSidebar||function(){return e.promise()},JIRA.Projects.Sidebar.initAPI=function(r){JIRA.API.Sidebar=r,e.resolve(JIRA.API.Sidebar)}}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/templates.soy' */
// This file was automatically generated from templates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Projects.Sidebar.ProjectShortcuts.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Projects == 'undefined') { JIRA.Projects = {}; }
if (typeof JIRA.Projects.Sidebar == 'undefined') { JIRA.Projects.Sidebar = {}; }
if (typeof JIRA.Projects.Sidebar.ProjectShortcuts == 'undefined') { JIRA.Projects.Sidebar.ProjectShortcuts = {}; }
if (typeof JIRA.Projects.Sidebar.ProjectShortcuts.Templates == 'undefined') { JIRA.Projects.Sidebar.ProjectShortcuts.Templates = {}; }


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.content = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.canManage || opt_data.numberOfShortcuts > 0) {
    output += '<div class="aui-sidebar-group jira-sidebar-group-with-divider project-shortcuts-group' + ((opt_data.numberOfShortcuts == 0) ? ' project-shortcuts-group_empty' : '') + '" data-id="project-shortcuts-group"><div class="aui-nav-heading">' + soy.$$escapeHtml('Project Shortcuts') + '</div><ul class="aui-nav project-shortcuts-list">';
    if (opt_data.shortcuts) {
      var shortcutList14 = opt_data.shortcuts;
      var shortcutListLen14 = shortcutList14.length;
      for (var shortcutIndex14 = 0; shortcutIndex14 < shortcutListLen14; shortcutIndex14++) {
        var shortcutData14 = shortcutList14[shortcutIndex14];
        output += JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcut({id: shortcutData14.id, name: shortcutData14.name, url: shortcutData14.url, icon: shortcutData14.icon, canManage: opt_data.canManage, iconsMap: opt_data.iconsMap, isWithIcon: opt_data.isWithIcons});
      }
    }
    output += ((opt_data.canManage) ? '<li><a class="aui-nav-item project-shortcuts-group__add" href="#" data-link-id="project-shortcut-add"><span class="aui-icon aui-icon-large aui-iconfont-add-small"></span><span class="aui-nav-item-label">' + soy.$$escapeHtml('Add shortcut') + '</span></a></li>' : '') + '</ul></div>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.content.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.content';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcut = function(opt_data, opt_ignored) {
  return '<li class="project-shortcut"><a class="aui-nav-item project-shortcuts-group__link" href="' + soy.$$escapeHtml(opt_data.url) + '" title="' + soy.$$escapeHtml(opt_data.name) + '" target="_blank" data-shortcut-id="' + soy.$$escapeHtml(opt_data.id) + '" data-link-id="project-shortcut-' + soy.$$escapeHtml(opt_data.id) + '">' + ((opt_data.isWithIcon) ? '<span class="aui-icon aui-icon-large ' + JIRA.Projects.Sidebar.ProjectShortcuts.Templates.icon({iconId: opt_data.icon, iconsMap: opt_data.iconsMap}) + '" data-project-shortcuts-icon-id="' + soy.$$escapeHtml(opt_data.icon) + '">' + soy.$$escapeHtml('Project shortcut icon') + '</span>' : '') + '<span class="aui-nav-item-label">' + soy.$$escapeHtml(opt_data.name) + '</span></a>' + ((opt_data.canManage) ? '<a href="#project-shortcuts-dropdown_' + soy.$$escapeHtml(opt_data.id) + '" aria-owns="project-shortcuts-dropdown_' + soy.$$escapeHtml(opt_data.id) + '" aria-haspopup="true" class="aui-dropdown2-trigger project-shortcuts-group__actions"><span>' + soy.$$escapeHtml('Actions') + '</span></a><div id="project-shortcuts-dropdown_' + soy.$$escapeHtml(opt_data.id) + '" class="aui-dropdown2 aui-style-default project-shortcuts-group__dropdown"><ul class="aui-list-truncate"><li><a class="project-shortcuts-group__actions__edit" href="#">' + soy.$$escapeHtml('Edit') + '</a></li><li><a class="project-shortcuts-group__actions__delete  " href="#">' + soy.$$escapeHtml('Delete') + '</a></li></ul></div>' : '') + '</li>';
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcut.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcut';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.icon = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '';
  if (opt_data.iconsMap) {
    var id__soy73 = opt_data.iconId && opt_data.iconsMap[opt_data.iconId] ? opt_data.iconId : '1';
    output += (opt_data.iconsMap[id__soy73]) ? soy.$$escapeHtml(opt_data.iconsMap[id__soy73].className) : '';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.icon.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.icon';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcutFormFields = function(opt_data, opt_ignored) {
  return '<div class="project-shortcuts-field-group">' + aui.form.textField({name: 'project-shortcuts-url-' + opt_data.action, id: 'project-shortcuts-url-' + opt_data.action, labelContent: 'Web address', placeholderText: 'e.g. http://www.atlassian.com', extraClasses: 'project-shortcuts-url', value: opt_data.url ? opt_data.url : '', errorTexts: opt_data.errors.urlError ? [opt_data.errors.urlError] : []}) + '<div class="field-group project-shortcuts-name">' + aui.form.label({forField: 'project-shortcuts-name-' + opt_data.action, content: 'Name'}) + '<div class="project-shortcuts-name-icon-block"><div class="project-shortcuts-icon-picker-block"></div>' + aui.form.input({name: 'project-shortcuts-name-' + opt_data.action, id: 'project-shortcuts-name-' + opt_data.action, placeholderText: 'e.g. Atlassian website', extraClasses: 'project-shortcuts-name-input' + (opt_data.isWithIcon ? ' project-shortcuts-name-input-with-icon' : ''), value: opt_data.name ? opt_data.name : '', type: 'text'}) + '</div>' + ((opt_data.errors.iconError) ? aui.form.fieldError({message: opt_data.errors.iconError}) : '') + ((opt_data.errors.nameError) ? aui.form.fieldError({message: opt_data.errors.nameError}) : '') + '</div></div>';
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcutFormFields.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcutFormFields';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsPicker = function(opt_data, opt_ignored) {
  return '<span>' + JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsList(opt_data) + '</span>' + aui.dropdown2.trigger({menu: {id: 'project-shortcuts-icons-list-' + opt_data.cid}, extraClasses: 'aui-button project-shortcuts-icons-picker', iconClasses: 'aui-icon aui-icon-large  ' + soy.$$escapeHtml(opt_data.icon.className), extraAttributes: {href: '#'}});
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsPicker.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsPicker';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsList = function(opt_data, opt_ignored) {
  var output = '<div id="project-shortcuts-icons-list-' + soy.$$escapeHtml(opt_data.cid) + '" aria-hidden="true" class="aui-style-default aui-dropdown2 project-shortcuts-icons-list aui-dropdown2-section"><ul>';
  var iconList126 = opt_data.iconsList;
  var iconListLen126 = iconList126.length;
  for (var iconIndex126 = 0; iconIndex126 < iconListLen126; iconIndex126++) {
    var iconData126 = iconList126[iconIndex126];
    output += '<li><a class="project-shortcuts-icons-icon" data-project-shortcuts-icons-id="' + soy.$$escapeHtml(iconData126.name) + '"><span class="aui-icon aui-icon-large ' + soy.$$escapeHtml(iconData126.className) + '">' + soy.$$escapeHtml('Project shortcut icon') + '</span></a></li>';
  }
  output += '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsList.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsList';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.addDialogNonAdg3 = function(opt_data, opt_ignored) {
  return '<form action="" method="post" class="aui"><h3>' + soy.$$escapeHtml('Add shortcut') + '</h3><fieldset>' + JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcutFormFields(soy.$$augmentMap(opt_data, {action: 'add'})) + '<div class="buttons-container"><div class="buttons"><button class="aui-button project-shortcuts-submit">' + soy.$$escapeHtml('Add') + '</button><button class="aui-button aui-button-link project-shortcuts-cancel">' + soy.$$escapeHtml('Cancel') + '</button></div></div></fieldset></form>';
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.addDialogNonAdg3.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.addDialogNonAdg3';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.addDialogAdg3 = function(opt_data, opt_ignored) {
  return '<section role="dialog" id="add-shortcut-dialog" class="aui-layer aui-dialog2 aui-dialog2-medium" aria-hidden="false"><header class="aui-dialog2-header" id="add-shortcut-dialog-header"></header><div class="aui-dialog2-content"><div id="image-behind"><div id="image-behind-top"/><div id="image-behind-bottom"/></div><div id="add-shortcut-image-container"><div id="add-shortcut-dialog-image"/></div><form action="" method="post" class="aui"><h1>' + soy.$$escapeHtml('Add shortcut') + '</h1><fieldset>' + JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcutFormFields(soy.$$augmentMap(opt_data, {action: 'add'})) + '</fieldset><button type="submit" class="project-shortcuts-hidden-submit" tabindex="-1"></button></form></div><div class="aui-dialog2-footer"><div class="buttons-container"><div class="buttons"><button class="aui-button aui-button-primary project-shortcuts-submit">' + soy.$$escapeHtml('Add') + '</button><button class="aui-button aui-button-text aui-button-subtle project-shortcuts-cancel">' + soy.$$escapeHtml('Cancel') + '</button></div></div></div></section>';
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.addDialogAdg3.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.addDialogAdg3';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.addDialog = function(opt_data, opt_ignored) {
  return '' + ((require("jira/featureflags/simplified-ux-feature-manager").isAdg3StylesEnabled()) ? JIRA.Projects.Sidebar.ProjectShortcuts.Templates.addDialogAdg3(opt_data) : JIRA.Projects.Sidebar.ProjectShortcuts.Templates.addDialogNonAdg3(opt_data));
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.addDialog.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.addDialog';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.editDialogChrome = function(opt_data, opt_ignored) {
  return '<section role="dialog" id="edit-project-shortcut-dialog" class="aui-layer aui-dialog2 aui-dialog2-small" aria-hidden="true" data-aui-remove-on-hide="true"><header class="aui-dialog2-header"><h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml('Edit shortcut') + '</h2></header></section>';
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.editDialogChrome.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.editDialogChrome';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.editDialog = function(opt_data, opt_ignored) {
  return ((require("jira/featureflags/simplified-ux-feature-manager").isAdg3StylesEnabled()) ? '<section role="dialog" id="add-shortcut-dialog" class="aui-layer aui-dialog2 aui-dialog2-medium" aria-hidden="false"><header class="aui-dialog2-header" id="add-shortcut-dialog-header"></header>' : '') + '<div class="aui-dialog2-content">' + ((require("jira/featureflags/simplified-ux-feature-manager").isAdg3StylesEnabled()) ? '<div id="image-behind"><div id="image-behind-top"/><div id="image-behind-bottom"/></div><div id="add-shortcut-image-container"><div id="add-shortcut-dialog-image" /></div>' : '') + '<form class="aui" method="post">' + ((require("jira/featureflags/simplified-ux-feature-manager").isAdg3StylesEnabled()) ? '<h1>' + soy.$$escapeHtml('Edit shortcut') + '</h1>' : '') + JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcutFormFields(soy.$$augmentMap(opt_data, {action: 'edit'})) + '<button type="submit" class="project-shortcuts-hidden-submit" tabindex="-1"></button></form></div><footer class="aui-dialog2-footer"><div class="aui-dialog2-footer-actions">' + ((require("jira/featureflags/simplified-ux-feature-manager").isAdg3StylesEnabled()) ? '<button class="aui-button project-shortcuts-delete">' + soy.$$escapeHtml('Delete') + '</button>' : '') + '<button class="aui-button aui-button-primary project-shortcuts-submit">' + soy.$$escapeHtml('Save') + '</button><button class="aui-button aui-button-link project-shortcuts-cancel' + ((require("jira/featureflags/simplified-ux-feature-manager").isAdg3StylesEnabled()) ? ' aui-button-subtle' : '') + '">' + soy.$$escapeHtml('Cancel') + '</button></div></footer>' + ((require("jira/featureflags/simplified-ux-feature-manager").isAdg3StylesEnabled()) ? '</section>' : '');
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.editDialog.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.editDialog';
}


JIRA.Projects.Sidebar.ProjectShortcuts.Templates.deleteDialog = function(opt_data, opt_ignored) {
  return '<section role="dialog" id="delete-project-shortcut-dialog" class="aui-layer aui-dialog2 aui-dialog2-small" aria-hidden="true" data-aui-remove-on-hide="true"><header class="aui-dialog2-header"><h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml('Delete shortcut') + '</h2></header><div class="aui-dialog2-content"><p>' + soy.$$escapeHtml('Are you sure you want to delete this shortcut?') + '</p></div><footer class="aui-dialog2-footer"><div class="aui-dialog2-footer-actions"><button class="aui-button aui-button-primary project-shortcuts-submit">' + soy.$$escapeHtml('Delete') + '</button><button class="aui-button aui-button-link project-shortcuts-cancel' + ((require("jira/featureflags/simplified-ux-feature-manager").isAdg3StylesEnabled()) ? ' aui-button-subtle' : '') + '">' + soy.$$escapeHtml('Cancel') + '</button></div></footer></section>';
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ProjectShortcuts.Templates.deleteDialog.soyTemplateName = 'JIRA.Projects.Sidebar.ProjectShortcuts.Templates.deleteDialog';
}
;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/dialogs/Add.js' */
define("jira/projects/sidebar/projectShortcuts/dialogs/add",["jira/featureflags/simplified-ux-feature-manager","underscore","jquery","jira/projects/libs/marionette","aui/flag"],function(e,t,i,o,s){return o.Controller.extend({initialize:function(o){t.bindAll(this,"hide","refresh","focusForm");const r=this;this.analyticsSave=!1,this.sidebarItem=o.sidebarItem,this.projectKey=o.projectKey,this.collection=o.collection,this.model=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcut(null,{projectKey:this.projectKey}),this.errorModel=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.ShortcutErrors(null,{model:this.model}),this.view=new JIRA.Projects.Sidebar.ProjectShortcuts.Views.AddDialogContent({model:this.model,errorModel:this.errorModel}),this.view.render();const c=i(window),a=i(document),n=i(".aui-sidebar-body");e.isGlobalSidebarEnabled()?(this.dialog=AJS.dialog2(r.view.$el),this.dialog.show(),this.view.ui.url.focus(),this.dialog.on("hide",function(){r.trigger("dialog:close",r.analyticsSave)})):(this.dialog=AJS.InlineDialog(this.sidebarItem.ui.link,"project-shortcuts-group__add-dialog",function(e,t,i){return r.sidebarItem.$el.addClass("aui-nav-selected"),r.view.render(),r.view.$el.appendTo(e),r.view.ui.url.focus(),c.on("scroll.project-shortcuts",function(){r.refresh()}),n.on("scroll.project-shortcuts",function(){r.hide()}),a.on("showLayer",r.focusForm),c.on("resize",r.refresh),i(),!1},{gravity:"w",autoWidth:!0,initCallback:function(){r.trigger("dialog:open"),r.analyticsSave=!1},hideCallback:function(){r.sidebarItem.$el.removeClass("aui-nav-selected"),r.sidebarItem.ui.link.blur(),c.off("scroll.project-shortcuts"),n.off("scroll.project-shortcuts"),a.off("showLayer",r.focusForm),r.trigger("dialog:close",r.analyticsSave)},persistent:!0,closeOnTriggerClick:!0,offsetY:function(e,t){const i=t.target.height(),o=e.height()/2;return o-i-10},arrowOffsetY:function(e,t){const i=t.target.height()/2,o=e.height()/2;return-o+22+i}}),this.listenTo(this.sidebarItem,"before:select",function(e){e.preventDefault()}),AJS.sidebar(".aui-sidebar").on("collapse-start",this.hide),i(".project-shortcuts-group").on("click","li",this.hide)),this.listenTo(this.view,"render",this.refresh),this.listenTo(this.view,"cancel",this.hideAndRender),this.listenTo(this.model,"save:success",function(){const t=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcut(this.model.toJSON(),{projectKey:this.projectKey});this.model.clear(),this.collection.add(t),e.isGlobalSidebarEnabled()&&this._addToADG3Sidebar(t),s({type:"success",title:"You have added the shortcut",body:"Nicely done! Your team is going to love this.",close:"auto"}),this.analyticsSave=!0,this.hide()})},_addToADG3Sidebar:function(e){JIRA.API.getSidebar().done(function(t){const i="sidebar-project-shortcuts",o="com.atlassian.jira.jira-projects-plugin:project.shortcut.default.link."+e.id,s={id:o,name:e.get("name"),url:e.get("url"),icon:"shortcut",canEdit:!0};t.addItem(i,s,!0)})},show:function(){this.dialog.show()},hide:function(){this.view.hideIconPicker(),this.dialog.hide()},refresh:function(){this.view.hideIconPicker(),e.isGlobalSidebarEnabled()||this.dialog.refresh()},hideAndRender:function(){this.hide()},focusForm:function(){this.view.ui.url.focus()}})}),AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Add",null,require("jira/projects/sidebar/projectShortcuts/dialogs/add"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/services/AvailableIcons.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Services.AvailableIcons");var t=[],n={},e=!1;JIRA.Projects.Sidebar.ProjectShortcuts.Services.AvailableIcons={initialize:function(e){t=e||t,n={},_.each(e,function(t){n[t.name]=t})},getIconsList:function(){return t},getIconsMap:function(){return n},getAllIconsClasses:function(){return _.reduce(t,function(t,n){return t+n.className+" "},"")},getIconFromName:function(t){return this.getIconsMap()[t]?this.getIconsMap()[t]:this.getIconsList()[0]?this.getIconsList()[0]:{}},setWithIcons:function(t){e=t},isWithIcons:function(){return e}}}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/entities/Shortcut.js' */
!function(){"use strict";function t(t){var e;try{e=JSON.parse(t.responseText)}catch(t){e={message:"We couldn\'t complete the action as there seems to be a communication issue."}}return e}AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcut"),JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcut=Backbone.Model.extend({defaults:{url:"",name:"",icon:"",type:""},initialize:function(t,e){if(!e||!e.projectKey)throw"Project key is required";this.projectKey=e.projectKey},urlRoot:function(){return AJS.contextPath()+"/rest/projects/1.0/project/"+encodeURIComponent(this.projectKey)+"/shortcut"},clear:function(){this.unset("id"),this.set("url",this.defaults.url),this.set("name",this.defaults.name),this.set("icon",this.defaults.icon),this.set("type",this.defaults.type)},save:function(){if(1!=this.saving){this.saving=!0;var e=this;e.trigger("save:start");var s=this.isNew()?"create":"update";this.sync(s,e).always(function(){e.saving=!1,e.trigger("save:finish")}).done(function(t){e.set(t,{silent:!0}),JIRA.trace("jira.projects.shortcuts."+s+".success"),e.trigger("save:success")}).fail(function(r){var i=t(r);JIRA.trace("jira.projects.shortcuts."+s+".fail"),e.trigger("save:failure",i)})}},destroy:function(){if(1!=this.saving){this.saving=!0;var e=this;e.trigger("remove:start");var s=Backbone.Model.prototype.destroy.apply(this,arguments);return s.always(function(){e.saving=!1,e.trigger("remove:finish")}).done(function(){e.trigger("remove:success")}).fail(function(s){var r=t(s);e.trigger("remove:failure",r)}),s}}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/entities/ShortcutErrors.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Entities.ShortcutErrors"),JIRA.Projects.Sidebar.ProjectShortcuts.Entities.ShortcutErrors=Backbone.Model.extend({defaults:{urlError:"",nameError:"",iconError:"",generalError:""},initialize:function(r,e){var s=e.model;this.listenTo(s,"save:failure remove:failure",function(r){this.set({urlError:r.errors&&r.errors.url,nameError:r.errors&&r.errors.name,iconError:r.errors&&r.errors.icon,generalError:r.message||r.errorMessages&&r.errorMessages.length>0?r.message||r.errorMessages[0]:void 0})}),this.listenTo(s,"save:success remove:success",this.clear)}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/entities/Shortcuts.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcuts"),JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcuts=Backbone.Collection.extend({model:JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcut,initialize:function(t,e){this.projectKey=e.projectKey}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/views/IconPickerContent.js' */
!function(i){"use strict";function c(i,c){var e,o=5,n=i.ui.iconList.find(".active"),s=i.ui.iconList.find("li").size();switch(c.keyCode){case AJS.keyCode.LEFT:e=-1;break;case AJS.keyCode.RIGHT:e=1;break;case AJS.keyCode.DOWN:e=o;break;case AJS.keyCode.UP:e=-o;break;default:e=0}var a=n.closest("li").index()+e;(a<0||a>=s)&&(a+=s,a%=s),n.removeClass(t),i.ui.icon.eq(a).addClass(t)}var e="projectShortcutsIconsId",t="active aui-dropdown2-active";AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Views.IconPickerContent"),JIRA.Projects.Sidebar.ProjectShortcuts.Views.IconPickerContent=JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsPicker,ui:{icon:".project-shortcuts-icons-icon",iconList:".project-shortcuts-icons-list",iconPicker:".project-shortcuts-icons-picker"},modelEvents:{"change:icon":function(){var i=this._modelIcon(),c=this.ui.iconPicker.children();c.removeClass(this.iconFactory.getAllIconsClasses()),c.addClass(i.className),this.ui.iconPicker.data(e,i.name)},"save:start":function(){this.ui.iconPicker.attr("aria-disabled",!0)},"save:finish":function(){this.ui.iconPicker.attr("aria-disabled",!1)}},events:{"keydown @ui.iconPicker":function(i){if(this.isPickerActive())switch(i.keyCode){case AJS.keyCode.LEFT:case AJS.keyCode.RIGHT:case AJS.keyCode.DOWN:case AJS.keyCode.UP:c(this,i),i.stopPropagation(),i.preventDefault(),this.ui.iconList.trigger("aui-dropdown2-item-selected");break;case AJS.keyCode.ESCAPE:this.hideIconPicker(),i.stopPropagation(),i.preventDefault()}}},initialize:function(i){this.iconFactory=JIRA.Projects.Sidebar.ProjectShortcuts.Services.AvailableIcons,this.analytics=JIRA.Projects.Sidebar.ProjectShortcuts.Analytics},onRender:function(){var c=this;this.ui.icon.on("click",function(){var t=i(this).data(e);c.analytics.iconChangeConfirmed(c.model,t),c.analyticsOldIconId="",c.analyticsIconClicked=!0,c.model.set("icon",t),c.ui.iconPicker.focus()}),this.ui.iconList.on("aui-dropdown2-show",function(){c.ui.iconPicker.focus(),c.analyticsIconClicked=!1,c.analytics.iconPickerOpened(c.model)}),this.ui.iconList.on("aui-dropdown2-hide",function(){c.analytics.iconPickerClosed(c.model,c.analyticsIconClicked)}),this.analyticsOldIconId="",this.ui.iconList.on("aui-dropdown2-item-selected",function(i){var t=AJS.$(this).find(".active").data(e);c.analyticsOldIconId&&c.analyticsOldIconId!==t&&c.analytics.iconChanged(c.model,t,c.analyticsOldIconId),c.analyticsOldIconId=t}),this.ui.iconPicker.data(e,this.model.get("icon"))},hideIconPicker:function(){this.isPickerActive()&&this.ui.iconPicker.trigger("aui-button-invoke")},isPickerActive:function(){return this.ui.iconPicker.hasClass("active")},_modelIcon:function(){return this.iconFactory.getIconFromName(this.model.get("icon"))},onFormSubmit:function(){this.model.set("icon",this.ui.iconPicker.data(e)||"")},focus:function(){this.ui.iconPicker.focus()},serializeData:function(){return{iconsList:this.iconFactory.getIconsList(),icon:this._modelIcon(),cid:this.cid}}})}(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/views/DialogContent.js' */
!function(t){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Views.DialogContent"),JIRA.Projects.Sidebar.ProjectShortcuts.Views.DialogContent=JIRA.Projects.Libs.Marionette.LayoutView.extend({ui:{form:"form",inputs:"input, button",submit:".project-shortcuts-submit",cancel:".project-shortcuts-cancel",url:".project-shortcuts-url input",name:".project-shortcuts-name input"},regions:{iconPicker:".project-shortcuts-icon-picker-block"},events:{"click @ui.cancel":function(t){t.preventDefault(),this.model.clear(),this.setNameAutomagically=!0,this.errorModel.clear(),this.trigger("cancel")},"click @ui.submit":"formSubmit","submit @ui.form":"formSubmit","blur @ui.url":function(){this.ensureProtocolPrefix(),this.tryToAutomagicallyDeriveNameFromUrl()},"input @ui.url":function(){this.model.set("url",this.ui.url.val()),this.tryToAutomagicallyDeriveNameFromUrl()},"input @ui.name":function(){this.setNameAutomagically=!1,this.model.set("name",this.ui.name.val())},"keydown @ui.name":function(t){this.iconPickerContent&&t.shiftKey&&t.keyCode===AJS.keyCode.TAB&&(t.preventDefault(),this.iconPickerContent.focus())},"keydown @ui.url":function(t){this.iconPickerContent&&(t.shiftKey||t.keyCode!==AJS.keyCode.TAB||(t.preventDefault(),this.iconPickerContent.focus()))}},modelEvents:{"save:start":function(){this.ui.inputs.prop("disabled",!0),this.ui.submit.addClass("loading"),this.ui.submit.spin({className:"spinner"})},"save:finish":function(){this.ui.inputs.prop("disabled",!1),this.ui.submit.removeClass("loading"),this.ui.submit.spinStop({className:"spinner"})},"save:failure":function(){if(this.render(),this.errorModel.get("generalError")){var t=require("aui/flag");t({type:"error",title:"We couldn\'t save the shortcut for you",close:"auto",body:this.errorModel.get("generalError")})}return this.errorModel.get("nameError")&&this.ui.name.focus(),this.errorModel.get("urlError")&&this.ui.url.focus(),this},"save:success":function(){this.setNameAutomagically=!0}},initialize:function(t){this.errorModel=t.errorModel;var e=this.model.get("name");this.setNameAutomagically=0==e.length,this.iconFactory=JIRA.Projects.Sidebar.ProjectShortcuts.Services.AvailableIcons},serializeData:function(){return _.extend(this.model.toJSON(),{errors:this.errorModel.toJSON(),action:this.action,isWithIcon:this.iconFactory.isWithIcons()})},onRender:function(){this.iconFactory.isWithIcons()?(this.iconPickerContent=new JIRA.Projects.Sidebar.ProjectShortcuts.Views.IconPickerContent({model:this.model,action:this.action,observable:this}),this.getRegion("iconPicker").show(this.iconPickerContent)):delete this.iconPickerContent},hideIconPicker:function(){this.iconPickerContent&&this.iconPickerContent.hideIconPicker()},setName:function(t){this.ui.name.val(t),this.model.set("name",t)},setUrl:function(t){this.ui.url.val(t),this.model.set("url",t)},ensureProtocolPrefix:function(){var t=this.ui.url.val().trim();t.length>0&&!JIRA.Projects.Sidebar.ProjectShortcuts.Views.DialogContent.urlPattern.test(t)&&this.setUrl("http://"+t)},tryToAutomagicallyDeriveNameFromUrl:function(){var t=this.ui.url.val().trim();if(this.setNameAutomagically)if(JIRA.Projects.Sidebar.ProjectShortcuts.Views.DialogContent.urlOptionalProtocolPattern.test(t)){var e=JIRA.Projects.Sidebar.ProjectShortcuts.Views.DialogContent.urlOptionalProtocolPattern.exec(t);this.setName(e[3])}else this.setName(t)},formSubmit:function(t){t.preventDefault(),this.ensureProtocolPrefix(),this.tryToAutomagicallyDeriveNameFromUrl(),this.iconPickerContent&&this.iconPickerContent.onFormSubmit(),this.model.set({url:this.ui.url.val(),name:this.ui.name.val()}),this.model.save()}},{urlPattern:/^[a-zA-Z0-9]+:(\/\/)?([^\/]*).*/,urlOptionalProtocolPattern:/^([a-zA-Z0-9]+:(\/\/)?)?([^\/]*).*/})}(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/views/AddDialogContent.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Views.AddDialogContent"),JIRA.Projects.Sidebar.ProjectShortcuts.Views.AddDialogContent=JIRA.Projects.Sidebar.ProjectShortcuts.Views.DialogContent.extend({template:JIRA.Projects.Sidebar.ProjectShortcuts.Templates.addDialog})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/views/EditDialogContent.js' */
define("jira/projects/sidebar/project-shortcuts/views/edit-dialog-content",["underscore","jira/featureflags/simplified-ux-feature-manager"],function(e,t){"use strict";var r=JIRA.Projects.Sidebar.ProjectShortcuts.Views.DialogContent,i=r.extend({template:JIRA.Projects.Sidebar.ProjectShortcuts.Templates.editDialog});return t.isAdg3ModeOn()?i.extend({ui:e.extend({},r.prototype.ui,{delete:".project-shortcuts-delete"})}):i}),AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Views.EditDialogContent",null,require("jira/projects/sidebar/project-shortcuts/views/edit-dialog-content"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/dialogs/Edit.js' */
define("jira/projects/sidebar/project-shortcuts/dialogs/edit",["jquery","jira/projects/sidebar/project-shortcuts/views/edit-dialog-content","jira/projects/libs/marionette","aui/flag","jira/featureflags/simplified-ux-feature-manager","jira/api/projects"],function(e,t,o,i,s,r){"use strict";return o.Controller.extend({initialize:function(o){var c=this;_.bindAll(this,"hide"),this.model=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcut(o.model.toJSON(),{projectKey:o.model.projectKey||o.model.collection.projectKey}),this.errorModel=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.ShortcutErrors((void 0),{model:this.model}),this.view=new t({model:this.model,errorModel:this.errorModel}),this.analyticsSave=!1,this.view.render();var d=e(JIRA.Projects.Sidebar.ProjectShortcuts.Templates.editDialogChrome({}));if(this.view.$el.appendTo(d),this.dialog=AJS.dialog2(d),this.dialog.show(),this.view.ui.url.focus(),s.isAdg3ModeOn()){var l=r.getCurrentProjectType(),n=r.getCurrentProjectId();this.view.ui.delete.on("click",function(e){c.hide(),e.preventDefault(),AJS.trigger("analyticsEvent",{name:"jira.projects.shortcut.delete.dialog.opened",data:{isSave:!1,shortcutId:c.model.get("id"),projectId:n,projectType:l}});var t=new JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Delete({model:c.model});c.listenToOnce(t,"dialog:close",function(e){AJS.trigger("analyticsEvent",{name:"jira.projects.shortcut.delete.dialog.closed",data:{isSave:e,shortcutId:c.model.get("id"),projectId:n,projectType:l}})})}),this.listenTo(this.model,"remove:success",function(){o.model.collection&&o.model.collection.remove(c.model),i({type:"success",body:"Shortcut deleted.",close:"auto"})})}this._onResizeWindow=function(){c.hideIconPicker()},e(window).on("resize",this._onResizeWindow),this.listenTo(this.view,"cancel",this.hide),this.listenTo(this.model,"save:success",function(){i({type:"success",body:"You have updated the shortcut.",close:"auto"}),this.analyticsSave=!0,this.hide(),o.model.set(c.model.toJSON())}),this.dialog.on("hide",function(){c.trigger("dialog:close",c.analyticsSave)})},hideIconPicker:function(){this.view.hideIconPicker()},hide:function(){this.dialog.hide(),e(window).off("resize",this._onResizeWindow)}})}),AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Edit",null,require("jira/projects/sidebar/project-shortcuts/dialogs/edit"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/views/Shortcut.js' */
!function(e){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Views.Shortcut");var o=require("jira/projects/sidebar/project-shortcuts/dialogs/edit");JIRA.Projects.Sidebar.ProjectShortcuts.Views.Shortcut=JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcut,initialize:function(){_.bindAll(this,"toggleDropdown"),this.iconFactory=JIRA.Projects.Sidebar.ProjectShortcuts.Services.AvailableIcons},ui:{del:".project-shortcuts-group__actions__delete",edit:".project-shortcuts-group__actions__edit",trigger:".project-shortcuts-group__actions",dropdown:".project-shortcuts-group__dropdown",link:".project-shortcuts-group__link"},modelEvents:{change:"render"},events:{"click @ui.link":function(){this.trigger("click:link",this.model)}},onRender:function(){var t=this;this.unwrapTemplate();var i=e(window),r=e(".aui-sidebar-body");this.ui.trigger.on("click",function(e){t.trigger("dropdown:click",t.model)}),this.ui.edit.on("click",function(e){e.preventDefault(),t.ui.trigger.blur();var i=new o({model:t.model});t.trigger("edit:open",t.model),t.listenToOnce(i,"dialog:close",function(e){t.trigger("edit:close",t.model,e)})}),this.ui.del.on("click",function(e){e.preventDefault(),t.ui.trigger.blur();var o=new JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Delete({model:t.model});t.trigger("delete:open",t.model),t.listenToOnce(o,"dialog:close",function(e){t.trigger("delete:close",t.model,e)})}),this.ui.dropdown.on({"aui-dropdown2-show":function(){t.$el.addClass("aui-nav-selected"),r.one("scroll",t.toggleDropdown),i.one("scroll",t.toggleDropdown),t.ui.trigger.focus()},"aui-dropdown2-hide":function(){t.$el.removeClass("aui-nav-selected"),r.off("scroll",t.toggleDropdown),i.off("scroll",t.toggleDropdown)}})},serializeData:function(){var e=_.extend(this.model.toJSON(),{canManage:!0,isWithIcon:this.iconFactory.isWithIcons()});return this.iconFactory.isWithIcons()&&(e=_.extend(e,{iconsMap:JIRA.Projects.Sidebar.ProjectShortcuts.Services.AvailableIcons.getIconsMap()})),e},toggleDropdown:function(){this.ui.trigger.trigger("aui-button-invoke")}})}(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/views/ShortcutsList.js' */
!function(t){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Views.List");var e=require("jira/projects/sidebar/projectShortcuts/dialogs/add");JIRA.Projects.Sidebar.ProjectShortcuts.Views.List=JIRA.Projects.Libs.Marionette.CompositeView.extend({template:JIRA.Projects.Sidebar.ProjectShortcuts.Templates.content,childView:JIRA.Projects.Sidebar.ProjectShortcuts.Views.Shortcut,ui:{itemsContainer:".aui-nav",description:".project-shortcuts-group__description",add:".project-shortcuts-group__add"},collectionEvents:{"add remove":function(){(0==this.collection.length&&0!=this.lastCollectionLength||0!=this.collection.length&&0==this.lastCollectionLength)&&(this.lastCollectionLength=this.collection.length,this.ui.description.toggleClass("hidden",this.collection.length>0),this.$el.toggleClass("project-shortcuts-group_empty",0==this.collection.length))}},initialize:function(){var e=this;JIRA.API.getSidebar().done(function(o){o.on("expand-end",function(){t(".aui-sidebar-submenu-dialog .project-shortcuts-group__dropdown").remove()},!0),o.on("collapse-start",function(){e.$(".project-shortcuts-group__actions.aui-dropdown2-active").trigger("aui-button-invoke")},!0)}),this.lastCollectionLength=this.collection.length},attachElContent:function(e){var o=new JIRA.Projects.Sidebar.Component.NavigationGroup({el:e});return JIRA.API.Sidebar.replaceGroup(this.options.targetGroup,o),this.$el=t(o.getElement()),this},onRender:function(){var t=new e({sidebarItem:JIRA.API.Sidebar.getGroup("project-shortcuts-group",!0).getItem("project-shortcut-add",!0),projectKey:this.collection.projectKey,collection:this.collection});this.listenTo(t,"dialog:open",function(){this.trigger("add:open")}),this.listenTo(t,"dialog:close",function(t){this.trigger("add:close",t)})},serializeData:function(){return{canManage:!0,numberOfShortcuts:this.collection.length}},attachBuffer:function(t,e){this.ui.itemsContainer.prepend(e)},onAddChild:function(t){this.ui.add.parent().before(t.$el)}})}(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = '/sidebar/project-shortcuts/dialogs/Delete.js' */
!function(e){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Delete"),JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Delete=JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Projects.Sidebar.ProjectShortcuts.Templates.deleteDialog,ui:{inputs:"input, button",submit:".project-shortcuts-submit",cancel:".project-shortcuts-cancel"},events:{"click @ui.cancel":function(e){e.preventDefault(),this.trigger("dialog:close",!1),this.dialog.hide()},"click @ui.submit":function(e){e.preventDefault(),this.trigger("dialog:close",!0),this.model.destroy({wait:!0})}},modelEvents:{"remove:start":function(){this.ui.inputs.prop("disabled",!0),this.ui.submit.addClass("loading"),this.ui.submit.spin({className:"spinner"})},"remove:finish":function(){this.ui.inputs.prop("disabled",!1),this.ui.submit.removeClass("loading"),this.ui.submit.spinStop({className:"spinner"}),this.dialog.hide(),JIRA.trace("jira.projects.shortcuts.deleted")},"remove:failure":function(e){if(e.message||e.errorMessages&&e.errorMessages.length>0){var t=require("aui/flag");t({type:"error",title:"We couldn\'t delete the shortcut for you",close:"auto",body:e.message||e.errorMessages[0]})}}},initialize:function(){this.render(),this.$el.appendTo("body"),this.dialog=AJS.dialog2(this.$el),this.dialog.show();var e=this;this.dialog.on("hide",function(){_.defer(function(){e.destroy()})})},onRender:function(){this.unwrapTemplate()}})}(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts-adg3', location = '/sidebar/project-shortcuts/project-shortcuts-analytics.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Analytics");var t="a.project-shortcuts-group__link",e=AJS.DarkFeatures.isEnabled("com.atlassian.jira.projects.ProjectCentricNavigation.ProjectShortcutIcons"),i=require("jira/api/projects");JIRA.Projects.Sidebar.ProjectShortcuts.Analytics={initialize:function(){},initShortcutClick:function(c,o){var r=AJS.sidebar(o),n=AJS.$(c),s=this;n.on("click",t,function(c){var o=n.find(t),d=AJS.$(this);i.getCurrentProjectId(),i.getCurrentProjectType();s._triggerAnalyticsEvent("jira.projects.shortcut.clicked",{shortcutId:d.data("shortcutId"),shortcutPosition:d.closest("li").index()+1,shortcutIconName:e?d.find(".aui-icon").data("projectShortcutsIconId"):"",shortcutCount:o.size(),isWithIcons:e,isSidebarCollapsed:r.isCollapsed(),projectId:s.projectId,projectType:s.projectType})})},initDialogActions:function(t){var i=this,c=function(t,c){var o=t.collection.indexOf(t)+1;return{isWithIcons:e,isSave:c,shortcutId:t.get("id"),shortcutPosition:o,shortcutCount:t.collection.size(),projectId:i.projectId,projectType:i.projectType}};t.on("childview:dropdown:click",function(t,e){i._triggerAnalyticsEvent("jira.projects.shortcut.dropdown.clicked",c(e,!1))}),t.on("childview:edit:open",function(t,e){i._triggerAnalyticsEvent("jira.projects.shortcut.edit.dialog.opened",c(e,!1))}),t.on("childview:edit:close",function(t,e,o){i._triggerAnalyticsEvent("jira.projects.shortcut.edit.dialog.closed",c(e,o))}),t.on("childview:delete:open",function(t,e){i._triggerAnalyticsEvent("jira.projects.shortcut.delete.dialog.opened",c(e))}),t.on("childview:delete:close",function(t,e,o){i._triggerAnalyticsEvent("jira.projects.shortcut.delete.dialog.closed",c(e,o))}),t.on("add:open",function(){i._triggerAnalyticsEvent("jira.projects.shortcut.add.dialog.opened",{isWithIcons:e,projectId:i.projectId,projectType:i.projectType})}),t.on("add:close",function(t){i._triggerAnalyticsEvent("jira.projects.shortcut.add.dialog.closed",{isWithIcons:e,isSave:t,projectId:i.projectId,projectType:i.projectType})})},iconChanged:function(t,e,i){this._triggerAnalyticsEvent("jira.projects.shortcut.icon.changed",{iconName:e,oldIconName:i,shortcutId:t.isNew()?"":t.get("id"),isNew:t.isNew(),cid:t.cid,projectId:this.projectId,projectType:this.projectType})},iconChangeConfirmed:function(t,e){this._triggerAnalyticsEvent("jira.projects.shortcut.icon.confirmed",{oldIconName:t.get("icon"),iconName:e,shortcutId:t.isNew()?"":t.get("id"),isNew:t.isNew(),cid:t.cid,projectId:this.projectId,projectType:projectType})},iconPickerOpened:function(t){this._triggerAnalyticsEvent("jira.projects.shortcut.icon.picker.opened",{shortcutId:t.isNew()?"":t.get("id"),isNew:t.isNew(),cid:t.cid,projectId:this.projectId,projectType:this.projectType})},iconPickerClosed:function(t,e){this._triggerAnalyticsEvent("jira.projects.shortcut.icon.picker.closed",{shortcutId:t.isNew()?"":t.get("id"),isNew:t.isNew(),cid:t.cid,isSave:e,projectId:this.projectId,projectType:this.projectType})},_triggerAnalyticsEvent:function(t,e){AJS.trigger("analyticsEvent",{name:t,data:e})}}}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts-adg3', location = '/sidebar/project-shortcuts/project-shortcuts-init-adg3.js' */
require(["jira/featureflags/simplified-ux-feature-manager","jira/featureflags/feature-manager","jira/projects/sidebar/projectShortcuts/dialogs/add","jira/api/projects"],function(t,e,r,i){if(t.isAdg3ModeOn()){var o="com.atlassian.jira.jira-projects-plugin:project.shortcut.default.link.",a="project.shortcut.default.link",n=i.getCurrentProjectKey(),c=i.getCurrentProjectType(),s=i.getCurrentProjectId(),d=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcuts([],{projectKey:n}),u=function(t){t.on(t.events.JIRA_SUMMON_ADD_SHORTCUT_DIALOG,function(t,e){if("com.atlassian.jira.jira-projects-plugin:project-shortcut-type"===e.shortcutTypeId){AJS.trigger("analyticsEvent",{name:"jira.projects.shortcut.add.dialog.opened",data:{projectId:s,projectType:c}});var i=new r({projectKey:n,collection:d});i.on("dialog:close",function(t){AJS.trigger("analyticsEvent",{name:"jira.projects.shortcut.add.dialog.closed",data:{isSave:t,projectId:s,projectType:c}})})}},!0)},j=function(t){t.on(t.events.EDIT,function(e){var r=e.target.getId();if(r&&0===r.indexOf(o)){var i=r.substr(o.length),u=t.getItem(r,!0),j=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcut({id:i,name:u.name,type:a,url:u.url},{projectKey:n});d.add(j),AJS.trigger("analyticsEvent",{name:"jira.projects.shortcut.edit.dialog.opened",data:{isSave:!1,shortcutId:j.get("id"),projectId:s,projectType:c}});var l=new JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Edit({model:j});l.on("dialog:close",function(t){AJS.trigger("analyticsEvent",{name:"jira.projects.shortcut.edit.dialog.closed",data:{isSave:t,shortcutId:j.get("id"),projectId:s,projectType:c}})}),j.on("change",function(){t.replaceItem(r,{id:r,name:j.get("name"),url:j.get("url"),canEdit:!0},!0)}),d.on("remove",function(e){t.deleteItem(o+e.get("id"),!0)})}},!0)},o="com.atlassian.jira.jira-projects-plugin:project.shortcut.default.link.",l="com.atlassian.jira.jira-projects-plugin:source.code.link.",g="com.atlassian.jira.projects.ProjectCentricNavigation.ProjectShortcutIcons",p=function(t){t.on(t.events.BEFORE_NAVIGATE,function(r){var i=r.target.getId(),a=!1,n="";if(i.indexOf(o)>=0?(a=!0,n=o):l.indexOf(l)>=0&&(a=!0,n=l),a){var c={},s=t.findParentOf(i,!0),d=t.getItem(i,!0),u=s.links.filter(function(t){return t.indexOf(n)>=0});c.shortcutId=i.substring(n.length),c.shortcutPosition=u.indexOf(i),c.shortcutIconName=d.icon||"",c.shortcutCount=u.length,c.isWithIcons=e.isFeatureEnabled(g),AJS.trigger("analyticsEvent",{name:"jira.projects.shortcut.clicked",data:c})}}.bind(this),!0)}.bind(this);JIRA.API.getSidebar().done(function(t){u(t),j(t),p(t)})}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-backbone-define', location = 'js/util/DevStatusBackboneDefine.js' */
"use strict";Backbone&&!Backbone.define&&(Backbone.define=function(name,ctor){eval("Backbone['Class: "+name+"'] = function() { Backbone['Class: "+name+"'].__ctor.apply(this, arguments); }");var cls=Backbone["Class: "+name];cls.__ctor=ctor,ctor.prototype.name=name,cls.prototype=ctor.prototype,_.extend(cls,ctor),_.each(ctor.prototype,function(t,e){"function"==typeof t&&(t.displayName=name+"."+e)});var context=window,parts=name.split(".");return _.each(parts,function(t,e){e===parts.length-1?context[t]=cls:context=null==context[t]?context[t]={}:context[t]}),cls});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:event-publisher', location = 'js/util/EventPublisher.js' */
"use strict";define("jira-development-status/util/event-publisher",function(){return{trigger:AJS.trigger}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-wrm', location = 'js/util/DevStatusWRM.js' */
"use strict";define("jira-development-status/util/WRM",["underscore","jira-development-status/util/event-publisher"],function(e,r){var n="wrc!com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-dialog-resources-ctx",i="jira.devsummary.dialog-resources.wrm.load",t=function(){return window.performance.now()},a=function(e){var r=t();WRM.require([n],function(){o(r),e&&e()})},u=function(e){var n=Math.round(t()-e);r.trigger("analyticsEvent",{name:i,data:{durationInMillis:n}})},o=e.once(u);return{ANALYTIC_EVENT:i,requireDetailDialogResources:a}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:utils', location = 'js/util/DateUtils.js' */
"use strict";define("jira/dev-status/util/date",["jquery"],function(t){return{addTooltip:function(e){var a=e.find("time.livestamp");a.livestamp(),a.each(function(){var e=t(this),a=e.attr("datetime"),i=isNaN(a)?a:+a,n=moment(i).zone(i);n.isValid()||(n=moment(i)),e.attr("title",n.format(JIRA.DevStatus.Date.format))})},format:"LLL"}}),function(t){AJS.namespace("JIRA.DevStatus.Date",null,t)}(require("jira/dev-status/util/date"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:utils', location = 'js/util/dev-status-console.js' */
"use strict";define("jira-development-status/util/console",[],function(){if(console)return console;var e=function(){};return{log:e,info:e,warn:e,debug:e,error:e}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:utils', location = 'js/util/dev-status-constants.js' */
"use strict";define("jira-development-status/util/constants",function(){return{PLUGIN_KEY:"com.atlassian.jira.plugins.jira-development-integration-plugin",RELEASE_REPORT_SELECTED_TAB:"release-report-selected-tab"}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:utils', location = 'js/util/LocalStorage.js' */
"use strict";define("jira-development-status/util/local-storage",[],function(){return localStorage?localStorage:{setItem:function(){},getItem:function(){},removeItem:function(){},clear:function(){}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:utils', location = 'js/util/ApplinksUtils.js' */
"use strict";define("jira-development-status/util/applinks-utils",[],function(){return ApplinksUtils});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:utils', location = 'js/util/DevStatusLocalStorage.js' */
"use strict";define("jira-development-status/util/dev-status-local-storage",["underscore","jira-development-status/util/console","jira-development-status/util/local-storage"],function(e,t,r){var o=e.extend({},r);return o.setItem=function(e,o){try{r.setItem(e,o)}catch(a){var l="";(22===a.code||1014===a.code&&"NS_ERROR_DOM_QUOTA_REACHED"===a.name)&&(l=". Browser local storage is full. For more information please follow https://confluence.atlassian.com/jirakb/functionality-in-jira-fails-due-to-exceeding-chrome-quota-762874705.html"),t.error("Couldn't store '"+e+"' & '"+o+"' key-value pair locally: "+a.name+l)}},o.getItem=function(e){try{return r.getItem(e)}catch(o){t.error("Couldn't retrieve locally stored value for key '"+e+"': "+o.name)}},o.removeItem=function(e){try{r.removeItem(e)}catch(o){t.error("Couldn't remove locally stored value for key '"+e+"': "+o.name)}},o.clear=function(){try{r.clear()}catch(e){t.error("Couldn't clear local storage: "+e.name)}},o});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:utils', location = 'js/util/Listeners.js' */
"use strict";define("jira/devstatus/util/listeners",["underscore"],function(t){return Class.extend({init:function(){this._listening=[]},startListening:function(t,i,n,s){var e={start:function(){return t.on(i,n,s),this},stop:function(){return t.off(i,n,s),this}};this._listening.push(e.start())},stopListening:function(){t.each(this._listening,function(t){t.stop()}),this._listening=[]}})}),Backbone.define("JIRA.DevStatus.Util.Listeners",require("jira/devstatus/util/listeners"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:utils', location = 'js/util/DevStatusNavigation.js' */
"use strict";define("jira-development-status/util/navigate",["underscore"],function(n){return{getUrl:function(){return window.location.href},reload:function(){n.defer(function(){window.location.reload()})},navigate:function(t){n.defer(function(){window.location=t})},redirectToLogin:function(){this.navigate(AJS.contextPath()+"/login.jsp?permissionViolation=true&os_destination="+encodeURIComponent(window.location.href))}}}),function(n){AJS.namespace("JIRA.DevStatus.Navigate",null,n)}(require("jira-development-status/util/navigate"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:utils', location = 'js/util/DevStatusURLUtils.js' */
"use strict";define("jira/dev-status/util/url",["jquery","underscore"],function(e,t){return{getDetailDialogParam:function(){var e=this._removeKickAssIHashFromUrl(JIRA.DevStatus.Navigate.getUrl()),t=parseUri(e);return t&&t.queryKey&&t.queryKey.devStatusDetailDialog},getUrlWithDetailDialogParam:function(e){var t=this._removeKickAssIHashFromUrl(JIRA.DevStatus.Navigate.getUrl()),r=parseUri(t);return r.queryKey.devStatusDetailDialog=encodeURIComponent(e),this.createUrlFromParsedUri(r)},getCreateReviewDetailUrl:function(e){return this.getUrlWithDetailDialogParam("create-review-"+e)},isCreateReviewDetailDialogLink:function(e){return e&&e.lastIndexOf&&0===e.lastIndexOf("create-review-",0)},getCreateReviewDetailDialogApplicationType:function(e){return e.substring("create-review-".length)},_removeKickAssIHashFromUrl:function(e){return e.replace("i#","")},createUrlFromParsedUri:function(r){var a=[];e.each(r.queryKey,function(r,i){t.isObject(i)?e.each(i,function(e,t){a.push(r+"="+t)}):a.push(r+"="+i)});var i="";return r.protocol&&(i+=r.protocol+"://"),r.authority&&(i+=r.authority),r.path&&(i+=r.path),a.length>0&&(i+="?"+a.join("&")),r.anchor&&(i+="#"+r.anchor),i}}}),function(e){AJS.namespace("JIRA.DevStatus.URL",null,e)}(require("jira/dev-status/util/url"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:utils', location = 'js/util/ES6Utils.js' */
"use strict";define("jira/dev-status/util/es6",["exports"],function(e){e.stringStartsWith=function(e,t){return e.slice(0,0+t.length)===t},e.findIndex=function(e,t){for(var n=0;n<e.length;++n)if(t(e[n]))return n;return-1},e.requestIdleCallback=function(e){"requestIdleCallback"in window?window.requestIdleCallback(e):setTimeout(e)}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'templates/repository-shortcuts/repository-shortcuts.soy' */
// This file was automatically generated from repository-shortcuts.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Software.RepositoryShortcuts.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Software == 'undefined') { JIRA.Software = {}; }
if (typeof JIRA.Software.RepositoryShortcuts == 'undefined') { JIRA.Software.RepositoryShortcuts = {}; }
if (typeof JIRA.Software.RepositoryShortcuts.Templates == 'undefined') { JIRA.Software.RepositoryShortcuts.Templates = {}; }


JIRA.Software.RepositoryShortcuts.Templates.content = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.canManageShortcuts || opt_data.numberOfShortcuts > 0) {
    output += '<div class="aui-sidebar-group jira-sidebar-group-with-divider repo-shortcuts-group' + ((opt_data.numberOfShortcuts == 0) ? ' repo-shortcuts-group_empty' : '') + '" data-id="repo-shortcuts-group"><div class="aui-nav-heading">' + soy.$$escapeHtml('Source code') + '</div><ul class="aui-nav repo-shortcuts-list">';
    if (opt_data.shortcuts) {
      var shortcutList14 = opt_data.shortcuts;
      var shortcutListLen14 = shortcutList14.length;
      for (var shortcutIndex14 = 0; shortcutIndex14 < shortcutListLen14; shortcutIndex14++) {
        var shortcutData14 = shortcutList14[shortcutIndex14];
        output += JIRA.Software.RepositoryShortcuts.Templates.shortcut({canManageShortcuts: opt_data.canManageShortcuts, canManageDVCS: opt_data.canManageDVCS, id: shortcutData14.id, name: shortcutData14.name, url: shortcutData14.url, dvcsType: shortcutData14.dvcsType, shouldWarnPotentialConnection: shortcutData14.shouldWarnPotentialConnection, isFirstSyncRunning: shortcutData14.isFirstSyncRunning});
      }
    }
    output += ((opt_data.canManageShortcuts) ? '<li><a class="aui-nav-item repo-shortcuts-group__add" href="#" data-link-id="repo-shortcut-add">' + aui.icons.icon({useIconFont: true, size: 'large', icon: 'add-small'}) + '<span class="aui-nav-item-label">' + soy.$$escapeHtml('Add source code') + '</span></a></li>' : '') + '</ul></div>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.content.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.content';
}


JIRA.Software.RepositoryShortcuts.Templates.shortcut = function(opt_data, opt_ignored) {
  var output = '';
  var imgBaseUrl__soy37 = "" + '/download/resources/com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts/images';
  output += '<li class="repo-shortcut"><a class="aui-nav-item repo-shortcuts-group__link" href="' + soy.$$escapeHtml(opt_data.url) + '" title="' + soy.$$escapeHtml(opt_data.name) + '" target="_blank" data-shortcut-id="' + soy.$$escapeHtml(opt_data.id) + '" data-link-id="repo-shortcut-' + soy.$$escapeHtml(opt_data.id) + '">' + ((opt_data.dvcsType == 'bitbucket') ? '<span class="aui-icon aui-icon-large aui-iconfont-bitbucket">' + soy.$$escapeHtml('Bitbucket source code link') + '</span>' : (opt_data.dvcsType == 'github') ? '<img class="aui-icon" src="' + soy.$$escapeHtml(imgBaseUrl__soy37) + '/octocat-icon.svg" alt="' + soy.$$escapeHtml('GitHub source code link') + '" />' : '<span class="aui-icon aui-icon-large aui-iconfont-link">' + soy.$$escapeHtml('Unknown source code link') + '</span>') + '<span class="aui-nav-item-label">' + soy.$$escapeHtml(opt_data.name) + '</span></a>' + ((opt_data.canManageShortcuts) ? '<a href="#repo-shortcuts-dropdown_' + soy.$$escapeHtml(opt_data.id) + '" aria-owns="repo-shortcuts-dropdown_' + soy.$$escapeHtml(opt_data.id) + '" aria-haspopup="true" class="aui-dropdown2-trigger repo-shortcuts-group__actions" style="' + ((opt_data.isFirstSyncRunning || opt_data.shouldWarnPotentialConnection) ? 'right: 40px' : '') + '"><span>' + soy.$$escapeHtml('Actions') + '</span></a><div id="repo-shortcuts-dropdown_' + soy.$$escapeHtml(opt_data.id) + '" class="aui-dropdown2 aui-style-default repo-shortcuts-group__dropdown"><ul class="aui-list-truncate">' + ((opt_data.shouldWarnPotentialConnection) ? '' : '') + '<li><a class="repo-shortcuts-group__actions__edit" href="#">' + soy.$$escapeHtml('Edit') + '</a></li><li><a class="repo-shortcuts-group__actions__delete" href="#">' + soy.$$escapeHtml('Delete') + '</a></li></ul></div>' : '') + ((opt_data.isFirstSyncRunning) ? '<a class="repo-shortcuts-group__warning syncing-trigger" href="#syncing-dialog-' + soy.$$escapeHtml(opt_data.id) + '" data-aui-trigger aria-controls="syncing-dialog-' + soy.$$escapeHtml(opt_data.id) + '"><span class="aui-icon aui-icon-small aui-iconfont-warning" original-title="warning">$' + soy.$$escapeHtml('Sync in progress') + '</span></a>' + JIRA.Software.RepositoryShortcuts.Templates.syncInProgressDialog(opt_data) : '') + ((opt_data.shouldWarnPotentialConnection) ? '<a class="repo-shortcuts-group__warning suggest-connection-trigger" href="#suggest-connection-dialog-' + soy.$$escapeHtml(opt_data.id) + '" data-aui-trigger aria-controls="suggest-connection-dialog-' + soy.$$escapeHtml(opt_data.id) + '"><span class="aui-icon aui-icon-small aui-iconfont-warning" original-title="warning">$' + soy.$$escapeHtml('Sync in progress') + '</span></a>' : '') + '</li>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.shortcut.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.shortcut';
}


JIRA.Software.RepositoryShortcuts.Templates.shortcutFormFields = function(opt_data, opt_ignored) {
  return '<div class="repo-shortcuts-field-group">' + aui.form.textField({name: 'repo-shortcuts-url-' + opt_data.action, id: 'repo-shortcuts-url-' + opt_data.action, labelContent: opt_data.urlLabel ? opt_data.urlLabel : 'Repo link', placeholderText: 'e.g. https://bitbucket.org/org/projectrepository', extraClasses: 'repo-shortcuts-url', value: opt_data.url ? opt_data.url : '', errorTexts: opt_data.errors.urlError ? [opt_data.errors.urlError] : []}) + '<div class="field-group repo-shortcuts-name">' + aui.form.label({forField: 'repo-shortcuts-name-' + opt_data.action, content: opt_data.nameLabel ? opt_data.nameLabel : 'Label'}) + '<div class="repo-shortcuts-name-icon-block"><div class="repo-shortcuts-icon-picker-block"></div>' + aui.form.input({name: 'repo-shortcuts-name-' + opt_data.action, id: 'repo-shortcuts-name-' + opt_data.action, placeholderText: 'e.g. Project repository', extraClasses: 'repo-shortcuts-name-input' + (opt_data.isWithIcon ? ' repo-shortcuts-name-input-with-icon' : ''), value: opt_data.name ? opt_data.name : '', type: 'text'}) + '</div>' + ((opt_data.errors.iconError) ? aui.form.fieldError({message: opt_data.errors.iconError}) : '') + ((opt_data.errors.nameError) ? aui.form.fieldError({message: opt_data.errors.nameError}) : '') + '</div></div>';
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.shortcutFormFields.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.shortcutFormFields';
}


JIRA.Software.RepositoryShortcuts.Templates.addDialog = function(opt_data, opt_ignored) {
  return '<div class="repo-shortcuts-header-image add-repo"></div><form action="" method="post" class="aui"><h3>' + soy.$$escapeHtml('Create a repo link') + '</h3><p>' + soy.$$escapeHtml('Add a link to this project\x27s repo so your team can easily find their code.') + '</p><fieldset>' + JIRA.Software.RepositoryShortcuts.Templates.shortcutFormFields(soy.$$augmentMap(opt_data, {action: 'add'})) + '<div class="buttons-container"><div class="buttons repo-shortcuts-buttons">' + aui.buttons.button({text: 'Link repo', type: 'primary', extraClasses: 'repo-shortcuts-submit'}) + aui.buttons.button({text: 'Cancel', type: 'link', extraClasses: 'repo-shortcuts-cancel'}) + '</div></div></fieldset></form>';
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.addDialog.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.addDialog';
}


JIRA.Software.RepositoryShortcuts.Templates.adg3ManageShortcutDialog = function(opt_data, opt_ignored) {
  return '<section role="dialog" id="' + soy.$$escapeHtml(opt_data.isAddDialog ? 'add-repository-dialog' : 'edit-repository-dialog') + '" class="aui-layer aui-dialog2 aui-dialog2-medium" aria-hidden="false"><header class="aui-dialog2-header" id="manage-shortcut-dialog-header"></header><div class="aui-dialog2-content"><div id="image-behind"><div id="image-behind-top"/><div id="image-behind-bottom"/></div><div id="manage-repository-image-container"><div id="manage-repository-dialog-image"/></div><form action="" method="post" class="aui"><h1 id="manage-repository-dialog-title">' + soy.$$escapeHtml(opt_data.isAddDialog ? 'Connect a repository' : 'Edit repository') + '</h1><p id="manage-repository-dialog-description">' + soy.$$escapeHtml('Linking a repository will show information about your branches, commits and pull requests in Jira issues.') + '</p><fieldset>' + JIRA.Software.RepositoryShortcuts.Templates.shortcutFormFields(soy.$$augmentMap(opt_data, {action: opt_data.isAddDialog ? 'add' : 'edit', urlLabel: 'Repository link', nameLabel: 'Name'})) + '</fieldset><button type="submit" class="repo-shortcuts-hidden-submit" tabindex="-1"></button></form></div><div class="aui-dialog2-footer"><div class="buttons-container"><div class="buttons">' + ((! opt_data.isAddDialog) ? '<button class="aui-button repo-shortcuts-delete">' + soy.$$escapeHtml('Delete') + '</button>' : '') + '<button class="aui-button aui-button-primary repo-shortcuts-submit">' + soy.$$escapeHtml(opt_data.isAddDialog ? 'Connect' : 'Update') + '</button><button class="aui-button aui-button-text aui-button-subtle repo-shortcuts-cancel">' + soy.$$escapeHtml('Cancel') + '</button></div></div></div></section>';
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.adg3ManageShortcutDialog.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.adg3ManageShortcutDialog';
}


JIRA.Software.RepositoryShortcuts.Templates.adg3AddDialog = function(opt_data, opt_ignored) {
  return '' + JIRA.Software.RepositoryShortcuts.Templates.adg3ManageShortcutDialog(soy.$$augmentMap(opt_data, {isAddDialog: true}));
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.adg3AddDialog.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.adg3AddDialog';
}


JIRA.Software.RepositoryShortcuts.Templates.adg3EditDialog = function(opt_data, opt_ignored) {
  return '' + JIRA.Software.RepositoryShortcuts.Templates.adg3ManageShortcutDialog(soy.$$augmentMap(opt_data, {isAddDialog: false}));
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.adg3EditDialog.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.adg3EditDialog';
}


JIRA.Software.RepositoryShortcuts.Templates.suggestConnectionDialog = function(opt_data, opt_ignored) {
  return '<div class="repo-shortcuts-header-image connection-request"></div><h3 class="repo-shortcuts-connectionRequestHeading">' + soy.$$escapeHtml('Linked but not integrated') + '</h3><p class="repo-shortcuts-connectionRequestDescription">' + soy.$$escapeHtml(AJS.format('Your repo is now linked, but your team can get visibility of development progress in their issues when {0} and Jira are integrated.',opt_data.dvcsName)) + '</p>' + ((opt_data.isIntegration) ? aui.buttons.button({text: AJS.format('Integrate Jira with {0}',opt_data.dvcsName), type: 'primary', extraClasses: 'repo-connection-start'}) : aui.buttons.button({text: 'Sync repository with Jira', type: 'primary', extraClasses: 'repo-connection-start'})) + aui.buttons.button({text: 'No thanks', type: 'link', extraClasses: 'repo-connection-cancel'});
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.suggestConnectionDialog.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.suggestConnectionDialog';
}


JIRA.Software.RepositoryShortcuts.Templates.syncInProgressDialog = function(opt_data, opt_ignored) {
  return '<aui-inline-dialog id="syncing-dialog-' + soy.$$escapeHtml(opt_data.id) + '" class="repo-shortcuts-syncing-dialog" responds-to="hover"><div class="repo-shortcuts-syncing-dialog-header"></div><h3>' + soy.$$escapeHtml(AJS.format('Syncing Jira with {0}',opt_data.dvcsType)) + '</h3><p>' + soy.$$escapeHtml(AJS.format('We\x27re busy syncing Jira with {0} \xe2\x80\x93 larger repos will take an hour or two. Once done, your team will',opt_data.dvcsType)) + '&nbsp;<a href="https://confluence.atlassian.com/display/JIRASOFTWARECLOUD/Using+JIRA+applications+with+Bitbucket+Cloud">' + soy.$$escapeHtml('enjoy greater confidence') + '</a>&nbsp;' + soy.$$escapeHtml('in their development process, and they can start') + '&nbsp;<a href="https://confluence.atlassian.com/display/BITBUCKET/Processing+JIRA+Software+issues+with+Smart+Commit+messages">' + soy.$$escapeHtml('using issue keys') + '</a>&nbsp;' + soy.$$escapeHtml('in commit messages right now!') + '</p>' + ((opt_data.canManageDVCS) ? aui.buttons.button({text: 'See syncing progress', type: 'link', href: '/secure/admin/ConfigureDvcsOrganizations!default.jspa'}) : '') + '</aui-inline-dialog>';
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.syncInProgressDialog.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.syncInProgressDialog';
}


JIRA.Software.RepositoryShortcuts.Templates.editDialogChrome = function(opt_data, opt_ignored) {
  return '<section role="dialog" id="edit-repo-shortcuts-dialog" class="aui-layer aui-dialog2 aui-dialog2-small" aria-hidden="true" data-aui-remove-on-hide="true"><header class="aui-dialog2-header"><h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml('Edit repo link') + '</h2></header></section>';
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.editDialogChrome.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.editDialogChrome';
}


JIRA.Software.RepositoryShortcuts.Templates.editDialog = function(opt_data, opt_ignored) {
  return '<div class="aui-dialog2-content"><form class="aui" method="post">' + JIRA.Software.RepositoryShortcuts.Templates.shortcutFormFields(soy.$$augmentMap(opt_data, {action: 'edit'})) + '<button type="submit" class="repo-shortcuts-hidden-submit" tabindex="-1"></button></form></div><footer class="aui-dialog2-footer"><div class="aui-dialog2-footer-actions">' + aui.buttons.button({text: 'Save', type: 'primary', extraClasses: 'repo-shortcuts-submit'}) + aui.buttons.button({text: 'Cancel', type: 'link', extraClasses: 'repo-shortcuts-cancel'}) + '</div></footer>';
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.editDialog.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.editDialog';
}


JIRA.Software.RepositoryShortcuts.Templates.deleteDialog = function(opt_data, opt_ignored) {
  return '<section role="dialog" id="delete-repo-shortcuts-dialog" class="aui-layer aui-dialog2 aui-dialog2-small" aria-hidden="true" data-aui-remove-on-hide="true"><header class="aui-dialog2-header"><h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml('Delete repo link') + '</h2></header><div class="aui-dialog2-content"><p>' + soy.$$escapeHtml('Are you sure you want to delete this repo link?') + '</p></div><footer class="aui-dialog2-footer"><div class="aui-dialog2-footer-actions">' + aui.buttons.button({text: 'Delete', type: 'primary', extraClasses: 'repo-shortcuts-submit'}) + aui.buttons.button({text: 'Cancel', type: 'link', extraClasses: 'repo-shortcuts-cancel'}) + '</div></footer></section>';
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.deleteDialog.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.deleteDialog';
}


JIRA.Software.RepositoryShortcuts.Templates.modalValuePropContent = function(opt_data, opt_ignored) {
  var output = '';
  var imgBaseUrl__soy267 = "" + '/download/resources/com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts/images';
  output += '<div class="aui-dialog2-content">' + ((opt_data.isAdg3AddItemEnabled) ? '<img src="' + soy.$$escapeHtml(imgBaseUrl__soy267) + '/integrate-product-with-jira.svg" style="width: 100%" /><div class="description-container">' + ((opt_data.canUserManageDVCSAccounts && ! opt_data.isIntegration) ? '<p>' + soy.$$escapeHtml(AJS.format('A shortcut to your {0} repository has been created.',opt_data.dvcsName)) + '</p><p>' + soy.$$escapeHtml(AJS.format('Next, sync your Jira Cloud and {0} repository.',opt_data.dvcsName)) + '</p>' : '<p>' + soy.$$escapeHtml(AJS.format('Your repo is now linked, but your team can get visibility of development progress in their issues when {0} and Jira are integrated.',opt_data.dvcsName)) + '</p>') + ((! opt_data.canUserManageDVCSAccounts) ? '<p>' + soy.$$escapeHtml('A Jira admin needs to do this. Should we contact them for you?') + '</p>' : '') + '</div>' : '<div class="container"><div class="suggestion"><h3><span class="aui-icon aui-icon-small aui-iconfont-approve" original-title="approve"></span>' + soy.$$escapeHtml('Your link is ready.') + '</h3><p>' + soy.$$escapeHtml(AJS.format('The shortcut to your {0} repo has been created.',opt_data.dvcsName)) + '</p><h3>' + soy.$$escapeHtml('Now get the full experience!') + '</h3><p>' + soy.$$escapeHtml(AJS.format('Sync your Jira and {0} accounts to enjoy the seamless integration of issues and code.',opt_data.dvcsName)) + '<p></div><div class="value-prop"><img src="' + soy.$$escapeHtml(imgBaseUrl__soy267) + '/repo-issue-update.svg" width="128" height="100"/><p class="issue-update">' + soy.$$escapeHtml('Jira issues update to show repo branch, commit and pull request activity.') + '</p></div><div class="value-prop"><img src="' + soy.$$escapeHtml(imgBaseUrl__soy267) + '/repo-issue-transition.svg" width="114" height="87"/><p class="issue-transition">' + soy.$$escapeHtml('Jira workflows sync with repo activity to update automatically as you work.') + '</p></div></div>' + ((! opt_data.canUserManageDVCSAccounts) ? '<p class="non-admin-info"><span class="aui-icon aui-icon-small aui-iconfont-info"></span>' + soy.$$escapeHtml('A Jira admin needs to do this. Should we contact them for you?') + '</p>' : '')) + '</div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.modalValuePropContent.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.modalValuePropContent';
}


JIRA.Software.RepositoryShortcuts.Templates.integrationModalContent = function(opt_data, opt_ignored) {
  return '<header class="aui-dialog2-header"><h2 class="aui-dialog2-header-main" style="overflow: visible">' + ((opt_data.isIntegration) ? soy.$$escapeHtml(AJS.format('Integrate Jira with {0}',opt_data.dvcsName)) : soy.$$escapeHtml('Sync repository with Jira')) + '</h2></header>' + JIRA.Software.RepositoryShortcuts.Templates.modalValuePropContent(opt_data) + '<footer class="aui-dialog2-footer"><div class="aui-dialog2-footer-actions">' + ((opt_data.canUserManageDVCSAccounts && opt_data.isIntegration) ? aui.buttons.button({text: opt_data.isAdg3AddItemEnabled ? AJS.format('Integrate with {0}',opt_data.dvcsName) : AJS.format('Integrate {0}',opt_data.dvcsName), type: 'primary', extraClasses: 'repo-connect-start'}) : (opt_data.canUserManageDVCSAccounts && ! opt_data.isIntegration) ? aui.buttons.button({text: 'Start syncing', type: 'primary', extraClasses: 'repo-connect-start'}) : aui.buttons.button({text: 'Ask my admin', type: 'primary', extraClasses: 'repo-connect-start'})) + ((opt_data.isAdg3AddItemEnabled && opt_data.canUserManageDVCSAccounts) ? aui.buttons.button({text: 'Edit repository', type: 'link', extraClasses: 'repo-connect-edit aui-button-subtle'}) : (opt_data.isAdg3AddItemEnabled && ! opt_data.canUserManageDVCSAccounts) ? aui.buttons.button({text: 'Maybe later', type: 'link', extraClasses: 'repo-connect-cancel aui-button-subtle'}) : aui.buttons.button({text: 'Maybe later', type: 'link', extraClasses: 'repo-connect-cancel'})) + '</div></footer>';
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.integrationModalContent.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.integrationModalContent';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/services/URLMatcher.js' */
"use strict";define("repository-shortcuts/services/url-matcher",[],function(){return{parseUrl:function(t){function s(t,s,e){if(t&&t[1]&&s.indexOf(t[1])===-1&&e.indexOf(t[2])===-1)return{dvcsOrg:t[1],dvcsRepo:t[2]}}function e(){var e=/https:\/\/bitbucket\.org(?:\/([^\/\?#]+)(?:\/([^\/\?#]+))?)?/,r=t.match(e),c=["snippets","account","dashboard"],i=["profile"];return s(r,c,i)}function r(){var e=/https:\/\/github\.com(?:\/([^\/\?#]+)(?:\/([^\/\?#]+))?)?/,r=t.match(e),c=["pulls","issues","notifications","explore","integrations","settings","blog","about","site","security"],i=[];return s(r,c,i)}if("string"!=typeof t)throw new Error("parseUrl expects URLs to be strings");return e()?{dvcsType:"bitbucket",dvcsOrg:e().dvcsOrg,dvcsRepo:e().dvcsRepo}:r()?{dvcsType:"github",dvcsOrg:r().dvcsOrg,dvcsRepo:r().dvcsRepo}:{dvcsType:"unsupported"}}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/services/DVCSAccountMatcher.js' */
"use strict";define("repository-shortcuts/services/dvcs-account-matcher",["jquery","underscore","bluebird/Promise","wrm/context-path","repository-shortcuts/services/url-matcher","jira/featureflags/feature-manager"],function(e,t,r,n,s,i){return{matchUrlAgainstNetwork:function(u){function c(s){var i=n()+"/rest/bitbucket/1.0/repository/summary/find?type="+s.dvcsType+"&orgName="+s.dvcsOrg+"&repoSlug="+s.dvcsRepo;return r.resolve(e.get(i)).then(function(e){return t.extend({},s,e)})["catch"](function(e){return e&&404===e.status?a(s):s})}function a(t){var s=n()+"/rest/bitbucket/1.0/organization/find?name="+t.dvcsOrg+"&type="+t.dvcsType;return r.resolve(e.get(s)).then(function(e){var r=e.dvcsType,n=e.name,s=e.approvalState,i=r===t.dvcsType,u=n===t.dvcsOrg,c="APPROVED"===s;return t.isOrganisationLinked=i&&u&&c,t})["catch"](function(e){return t})}function o(t){var s=n()+"/rest/devinfoadmin/1.0/githubAppDetails";return r.resolve(e.get(s)).then(function(e){var r=e.githubAppInstalled;return r&&(t.isOrganisationLinked=!0,t.isRepositoryLinked=!0),t.githubAppInstalled=r,t})["catch"](function(e){return t})}try{var d=s.parseUrl(u);if("unsupported"===d.dvcsType)return r.resolve(d);var v=i.isFeatureEnabled("fusion-dvcs-new-github-integrations-allowed");return d.newGithubDvcsIntegrationsAllowed=v,v||"github"!==d.dvcsType?d.dvcsRepo?c(d):a(d):o(d)}catch(p){return r.reject(p)}}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/services/DVCSIntegrator.js' */
"use strict";define("repository-shortcuts/services/dvcs-integrator",["jquery","bluebird/Promise","jira/featureflags/simplified-ux-feature-manager","wrm/context-path","aui/flag","jira/featureflags/feature-manager"],function(t,e,o,n,r,i){function a(i){var a=i.dvcsRepoId,s=i.dvcsRepo;return e.resolve(t.ajax({type:"POST",contentType:"application/json",url:n()+"/rest/bitbucket/1.0/repo/"+a+"/autolink",data:JSON.stringify({payload:!0})})).then(function(){t.ajax({type:"POST",url:n()+"/rest/bitbucket/1.0/repository/"+a+"/softsync"}),r(o.isGlobalSidebarEnabled()?{type:"success",title:"You have added the repository",body:"Nicely done! Your team is going to love this.",close:"auto"}:{type:"success",body:AJS.format("\u003cstrong\u003e{0}\u003c/strong\u003e repo is now linked with Jira",s),close:"auto"})})["catch"](function(t){return r({type:"error",body:AJS.format("Failed to link \u003cstrong\u003e{0}\u003c/strong\u003e repo with Jira",s)}),e.reject(t)})}function s(t){if(void 0===t)return"";var e=t.length;if(0===e)return"";if(1===e)return"/"===t?"":t;var o="/"===t.charAt(0),n="/"===t.charAt(e-1);return t.substring(o?1:0,n?e-1:e)}function c(t,e,o,n,r){var i=s(n),a=t+"//"+s(e)+"/"+s(o),c=s(a);return c+"/"+i+"?atl_token="+r}function u(t){var e=i.getFlagValue("fusion-dvcs-github-addon-url"),o=""+n(),r=window.location.host,a=window.location.protocol,s=c(a,r,o,e,t);window.location.href=s}return{startBBOrganisationLink:function(t){var e=""+window.location.origin+n(),o=e+"/rest/aci/1.0/installation/jira-bitbucket-connector-plugin/descriptor",r=document.getElementById("atlassian-token").getAttribute("content"),i=e+"/secure/BitbucketPostInstallApprovalAction.jspa?jiraInitiated=true&customReturnUrl="+(window.location.href+"&atl_token="+r),a="https://bitbucket.org/site/addons/authorize";window.location.href=a+"?account="+t+"&descriptor_uri="+encodeURIComponent(o)+"&redirect_uri="+encodeURIComponent(i)},startBBRepositoryLink:function(t){var e=t.dvcsRepoId,o=t.dvcsRepo;return a({dvcsRepoId:e,dvcsRepo:o})},startGithubOrganisationLink:function(){var t=document.getElementById("atlassian-token").getAttribute("content"),e=i.isFeatureEnabled("fusion-dvcs-new-github-integrations-allowed");if(e){var o=n()+"/secure/admin/ConfigureDvcsOrganizations!default.jspa?openGithubDialog=1&customReturnUrl="+(window.location.href+"&atl_token="+t);window.location.href=o}else u(t)},startGithubRepositoryLink:function(t){var e=t.dvcsRepoId,o=t.dvcsRepo,n=i.isFeatureEnabled("fusion-dvcs-new-github-integrations-allowed");if(n)return a({dvcsRepoId:e,dvcsRepo:o});var r=document.getElementById("atlassian-token").getAttribute("content");u(r)},normalize:function(t){return s(t)},buildAbsoluteAddOnMarketplaceUrl:function(t,e,o,n,r){return c(t,e,o,n,r)}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/services/RepoShortcutUpdateHandler.js' */
"use strict";define("repository-shortcuts/services/repo-shortcut-update-handler",["repository-shortcuts/views/connection-modal","jira/featureflags/simplified-ux-feature-manager","aui/flag"],function(e,t,r){return function(o,s){var a=o.attributes;if(o.hasLinkedAllComponents()){var i=a.dvcsRepo||a.dvcsOrg,n=a.dvcsRepo?"repository":"organisation",c="bitbucket"===a.dvcsType?"Bitbucket":"GitHub";return void(t.isGlobalSidebarEnabled()||r({type:"success",body:AJS.format("{0} {1} \u003cstrong\u003e{2}\u003c/strong\u003e is linked with Jira",c,n,i),close:"auto"}))}var u={repoShortcutModel:o,canUserManageDVCSAccounts:s},d=new e(u);d.render()}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/models/RepositoryShortcut.js' */
"use strict";define("repository-shortcuts/models/repository-shortcut",[],function(){return JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcut.extend({defaults:{url:"",name:"",icon:"",type:"source.code.link",dvcsType:"unsupported",isPendingApproval:!1,dvcsOrg:void 0,dvcsRepo:void 0,dvcsRepoId:void 0,isOrganisationLinked:void 0,isRepositoryLinked:void 0,isFirstSyncRunning:void 0,newGithubDvcsIntegrationsAllowed:!0,githubAppInstalled:!1},clear:function(){this.unset("id"),this.set(this.defaults)},hasLinkedOrg:function(){var t=this.attributes;return t.dvcsOrg&&t.isOrganisationLinked},hasNotLinkedOrg:function(){var t=this.attributes;return t.dvcsOrg&&!t.isOrganisationLinked},hasLinkedOrgAndNotRepo:function(){var t=this.attributes;return this.hasLinkedOrg()&&t.dvcsRepo&&!t.isRepositoryLinked},isGithubAndNewGithubDvcsIntegrationsDisabled:function(){var t=this.attributes;return"github"===t.dvcsType&&!t.newGithubDvcsIntegrationsAllowed},hasLinkedAllComponents:function(){function t(){return s.dvcsRepo&&s.isRepositoryLinked}function i(){return!s.dvcsRepo}var s=this.attributes;return this.isGithubAndNewGithubDvcsIntegrationsDisabled()?s.githubAppInstalled:this.hasLinkedOrg()&&(t()||i())}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/models/RepositoryShortcuts.js' */
"use strict";define("repository-shortcuts/models/repository-shortcuts",["repository-shortcuts/models/repository-shortcut"],function(t){return JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcuts.extend({model:t,initialize:function(t,e){var i=this;this.projectKey=e.projectKey,this.canUserManageDVCSAccounts=e.canUserManageDVCSAccounts,this.listenTo(this,"dvcsremote:change",function(t){i._handleRepoLinkChangeOrAdd(t)})},_handleRepoLinkChangeOrAdd:function(t){var e=function(t,e){return t.get("dvcsType")===e.get("dvcsType")&&t.get("dvcsOrg")===e.get("dvcsOrg")},i=function(t,i){return e(t,i)&&t.get("dvcsRepo")===i.get("dvcsRepo")};this.forEach(function(n){t.id!==n.id&&(i(t,n)?n.set({isOrganisationLinked:t.get("isOrganisationLinked"),isRepositoryLinked:t.get("isRepositoryLinked"),dvcsRepoId:t.get("dvcsRepoId"),isFirstSyncRunning:t.get("isFirstSyncRunning")}):e(t,n)&&n.set({isOrganisationLinked:t.get("isOrganisationLinked")}))})}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/views/RepositoryShortcutsList.js' */
"use strict";define("repository-shortcuts/views/repository-shortcut-list",["jquery","repository-shortcuts/views/repository-shortcut","repository-shortcuts/dialogs/add"],function(t,e,o){return JIRA.Projects.Sidebar.ProjectShortcuts.Views.List.extend({template:JIRA.Software.RepositoryShortcuts.Templates.content,childView:e,ui:{itemsContainer:".aui-nav",add:".repo-shortcuts-group__add"},collectionEvents:{add:function(){0!==this.collection.length&&this.$el.hasClass("repo-shortcuts-group_empty")&&this.$el.removeClass("repo-shortcuts-group_empty")},remove:function(){0!==this.collection.length||this.$el.hasClass("repo-shortcuts-group_empty")||this.$el.addClass("repo-shortcuts-group_empty")}},initialize:function(){var e=this;JIRA.API.getSidebar().done(function(o){var r=o.getAUISidebar(!0);r.on("expand-end",function(){t(".aui-sidebar-submenu-dialog .repo-shortcuts-group__dropdown").remove(),t(".aui-sidebar-submenu-dialog .repo-shortcuts-syncing-dialog").remove()}),r.on("collapse-start",function(){e.$(".repo-shortcuts-group__actions.aui-dropdown2-active").trigger("aui-button-invoke"),e._addConnectionsAvailableMarkerOnSidebarIcon()})})},onRender:function(){var t=this,e=new o({sidebarItem:JIRA.API.Sidebar.getGroup(this.options.targetGroup,!0).getItem("repo-shortcut-add"),projectKey:this.collection.projectKey,collection:this.collection}),r=JIRA.API.Projects.getCurrentProjectId();this.listenTo(e,"dialog:open",function(){t.trigger("add:open"),AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.add-link.click",data:{projectId:r}})}),this.listenTo(e,"dialog:close",function(e){t.trigger("add:close",e),AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.connect-repo.add-link.close",data:{projectId:r,isSave:e}})}),this._addConnectionsAvailableMarkerOnSidebarIcon()},serializeData:function(){return{canManageShortcuts:!0,numberOfShortcuts:this.collection.length}},_addConnectionsAvailableMarkerOnSidebarIcon:function(){var t=this.collection.some(function(t){return t.hasNotLinkedOrg()||t.hasLinkedOrgAndNotRepo()});t&&this.$el.addClass("connections-available")}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/views/RepositoryShortcut.js' */
"use strict";define("repository-shortcuts/views/repository-shortcut",["jquery","underscore","repository-shortcuts/dialogs/connection","repository-shortcuts/dialogs/edit","repository-shortcuts/services/dvcs-integrator"],function(e,t,o,i,r){function n(e){return"bitbucket"===e||"github"===e}return JIRA.Projects.Sidebar.ProjectShortcuts.Views.Shortcut.extend({template:JIRA.Software.RepositoryShortcuts.Templates.shortcut,initialize:function(){t.bindAll(this,"toggleDropdown")},ui:{integrate:".repo-shortcuts-group__actions__integrate",del:".repo-shortcuts-group__actions__delete",edit:".repo-shortcuts-group__actions__edit",trigger:".repo-shortcuts-group__actions",dropdown:".repo-shortcuts-group__dropdown",link:".repo-shortcuts-group__link",connectionDialogTrigger:".suggest-connection-trigger"},templateHelpers:function(){var e=this.model.attributes,t=this.model.collection.canUserManageDVCSAccounts,o=n(e.dvcsType);if(t&&this.model.isGithubAndNewGithubDvcsIntegrationsDisabled()){var i=e.githubAppInstalled;return{warnOnGithubConnection:i}}var r=!(!e.isOrganisationLinked||e.dvcsRepo&&!e.isRepositoryLinked),s=t&&o&&!r;return{shouldWarnPotentialConnection:s}},onRender:function(){this.unwrapTemplate();var t=this,n=e(window),s=e(".aui-sidebar-body");new o({$trigger:this.ui.connectionDialogTrigger,repoShortcutModel:this.model}),this.ui.integrate.on("click",function(e){var o=t.model.attributes;if(e.preventDefault(),t.ui.trigger.blur(),"bitbucket"===o.dvcsType&&t.model.hasNotLinkedOrg())r.startBBOrganisationLink(o.dvcsOrg);else if("bitbucket"===o.dvcsType&&t.model.hasLinkedOrgAndNotRepo())r.startBBRepositoryLink(t.model.attributes).then(function(){t.model.set({isRepositoryLinked:!0}),t.model.trigger("dvcsremote:change",t.model)});else{if("github"!==o.dvcsType)throw"Unsupported DVCS Type";o.newGithubDvcsIntegrationsAllowed?t.model.hasNotLinkedOrg()?r.startGithubOrganisationLink():t.model.hasLinkedOrgAndNotRepo()&&r.startGithubRepositoryLink(t.model.attributes).then(function(){t.model.set({isRepositoryLinked:!0}),t.model.trigger("dvcsremote:change",t.model)}):o.githubAppInstalled||r.startGithubOrganisationLink()}}),this.ui.edit.on("click",function(e){e.preventDefault(),t.ui.trigger.blur();var o=new i({repoShortcutModel:t.model,canUserManageDVCSAccounts:t.model.collection.canUserManageDVCSAccounts});t.trigger("edit:open",t.model),t.listenToOnce(o,"dialog:close",function(e){t.trigger("edit:close",t.model,e)})}),this.ui.del.on("click",function(e){e.preventDefault(),t.ui.trigger.blur(),new JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Delete({model:t.model})}),this.ui.dropdown.on({"aui-dropdown2-show":function(){t.$el.addClass("aui-nav-selected"),s.one("scroll",t.toggleDropdown),n.one("scroll",t.toggleDropdown),t.ui.trigger.focus()},"aui-dropdown2-hide":function(){t.$el.removeClass("aui-nav-selected"),s.off("scroll",t.toggleDropdown),n.off("scroll",t.toggleDropdown)}}),this.ui.connectionDialogTrigger.on("click",function(){AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.warning.click",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutId:t.model.id}})}),this.ui.link.on("click",function(){AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.shortcut.click",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutId:t.model.id,shortcutType:t.model.dvcsType}})})},serializeData:function(){var e=t.extend(this.model.toJSON(),{canManageShortcuts:!0,canManageDVCS:this.model.collection.canUserManageDVCSAccounts});return e}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/views/DialogContent.js' */
"use strict";define("repository-shortcuts/views/dialog-content",["repository-shortcuts/services/url-matcher","repository-shortcuts/services/dvcs-account-matcher"],function(t,e){var r=JIRA.Projects.Sidebar.ProjectShortcuts.Views.DialogContent;return r.extend({ui:{form:"form",inputs:"input, button",submit:".repo-shortcuts-submit",cancel:".repo-shortcuts-cancel",url:".repo-shortcuts-url input",name:".repo-shortcuts-name input"},events:{"click @ui.cancel":function(t){t.preventDefault(),this.model.clear(),this.setNameAutomagically=!0,this.errorModel.clear(),this.trigger("cancel")},"click @ui.submit":"_handleFormSubmit","submit @ui.form":"_handleFormSubmit","blur @ui.url":function(){this.ensureProtocolPrefix(),this.tryToAutomagicallyDeriveNameFromUrl()},"input @ui.url":function(){this.model.set("url",this.ui.url.val()),this.tryToAutomagicallyDeriveNameFromUrl()},"input @ui.name":function(){this.setNameAutomagically=!1,this.model.set("name",this.ui.name.val())}},initialize:function(t){var e=t.errorModel,r=t.canUserManageDVCSAccounts;this.canUserManageDVCSAccounts=r,this.errorModel=e;var i=this.model.get("name");this.setNameAutomagically=0===i.length},serializeData:function(){return _.extend(this.model.toJSON(),{errors:this.errorModel.toJSON(),action:this.action})},onRender:function(){},hideIconPicker:function(){},_handleFormSubmit:function(r){var i=this,o=function(t){i.model.set({url:i.ui.url.val(),name:i.ui.name.val()}),i.model.set(t),i.model.save()};r.preventDefault(),this.ensureProtocolPrefix(),this.tryToAutomagicallyDeriveNameFromUrl(),this.model.set(this.model.defaults);var s=this.ui.url.val();if(this.canUserManageDVCSAccounts)e.matchUrlAgainstNetwork(s).then(function(t){return o(t)})["catch"](function(){return o({})});else{var a=t.parseUrl(s);o(a)}},tryToAutomagicallyDeriveNameFromUrl:function(){var e=this.ui.url.val().trim();if(this.setNameAutomagically){var i=t.parseUrl(e);if(i.dvcsRepo)this.setName(i.dvcsRepo);else{if(!i.dvcsOrg)return r.prototype.tryToAutomagicallyDeriveNameFromUrl.call(this);this.setName(i.dvcsOrg)}}}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/views/AddDialogContent.js' */
"use strict";define("repository-shortcuts/views/add-dialog-content",["repository-shortcuts/views/dialog-content","jira/featureflags/simplified-ux-feature-manager"],function(e,t){var o=t.isAdg3ModeOn(),r=o?JIRA.Software.RepositoryShortcuts.Templates.adg3AddDialog:JIRA.Software.RepositoryShortcuts.Templates.addDialog;return e.extend({template:r})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/views/EditDialogContent.js' */
"use strict";define("repository-shortcuts/views/edit-dialog-content",["repository-shortcuts/views/dialog-content","jira/featureflags/simplified-ux-feature-manager"],function(e,t){var o=t.isAdg3ModeOn();return o?e.extend({template:JIRA.Software.RepositoryShortcuts.Templates.adg3EditDialog,ui:_.extend({},e.prototype.ui,{"delete":".repo-shortcuts-delete"})}):e.extend({template:JIRA.Software.RepositoryShortcuts.Templates.editDialog})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/views/ConnectionDialogContent.js' */
"use strict";define("repository-shortcuts/views/connection-dialog-content",["repository-shortcuts/services/dvcs-integrator"],function(t){return JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Software.RepositoryShortcuts.Templates.suggestConnectionDialog,ui:{start:".repo-connection-start",cancel:".repo-connection-cancel"},events:{"click @ui.start":function(t){t.preventDefault(),this.triggerSubmitAnalyticEvent(),this.startConnection(),this.trigger("connection:start")},"click @ui.cancel":function(t){t.preventDefault(),this.triggerCancelAnalyticEvent(),this.trigger("connection:cancel")}},triggerSubmitAnalyticEvent:function(){this.isIntegration?AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.connect-repo.inline-integrate.click",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutType:this.dvcsName}}):AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.connect-repo.inline-sync.click",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutType:this.dvcsName}})},triggerCancelAnalyticEvent:function(){this.isIntegration?AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.connect-repo.inline-integrate.cancel",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutType:this.dvcsName}}):AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.connect-repo.inline-sync.cancel",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutType:this.dvcsName}})},templateHelpers:function(){return{dvcsName:this.dvcsName,isIntegration:this.isIntegration}},initialize:function(e){var n=e.repoShortcutModel,i=function(t){t.set({isRepositoryLinked:!0}),t.trigger("dvcsremote:change",t)},r=n.attributes;if(this.dvcsName="bitbucket"===r.dvcsType?"Bitbucket":"GitHub",this.isIntegration=n.hasNotLinkedOrg(),"bitbucket"===r.dvcsType&&n.hasNotLinkedOrg())this.startConnection=function(){return t.startBBOrganisationLink(r.dvcsOrg)};else if("bitbucket"===r.dvcsType&&n.hasLinkedOrgAndNotRepo())this.startConnection=function(){t.startBBRepositoryLink(n.attributes).then(function(){return i(n)})};else{if("github"!==r.dvcsType)throw"Unsupported DVCS Type";r.newGithubDvcsIntegrationsAllowed?n.hasNotLinkedOrg()?this.startConnection=function(){t.startGithubOrganisationLink()}:n.hasLinkedOrgAndNotRepo()&&(this.startConnection=function(){t.startGithubRepositoryLink(n.attributes).then(function(){return i(n)})}):r.githubAppInstalled||(this.startConnection=function(){t.startGithubOrganisationLink()})}}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/views/modal-dialogs/ConnectionModal.js' */
"use strict";define("repository-shortcuts/views/connection-modal",["underscore","aui/flag","repository-shortcuts/services/dvcs-integrator","jira/featureflags/simplified-ux-feature-manager"],function(t,e,i,n){var r=n.isAdg3ModeOn(),a=r?"aui-dialog2-small":"aui-dialog2-medium";return JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Software.RepositoryShortcuts.Templates.integrationModalContent,tagName:"section",attributes:{role:"dialog","class":"aui-layer aui-dialog2 "+a+" repo-integration-dialog","aria-hidden":"true","data-aui-modal":r?"false":"true","data-aui-focus-selector":".aui-dialog2-content .repo-connect-start"},ui:{submit:".repo-connect-start",cancel:".repo-connect-cancel",edit:".repo-connect-edit"},events:{"click @ui.submit":function(t){t.preventDefault(),this.triggerSubmitAnalyticEvent(),this.handleSubmit()},"click @ui.cancel":function(t){t.preventDefault(),this.triggerCancelAnalyticEvent(),this._removeAndHide()},"click @ui.edit":function(t){t.preventDefault(),this._removeAndHide(),this.triggerEditAnalyticEvent(),this.repoShortcutModel.trigger("edit:start",this.repoShortcutModel.id)}},templateHelpers:function(){return{dvcsName:this.dvcsName,canUserManageDVCSAccounts:this.canUserManageDVCSAccounts,isIntegration:this.isIntegration,isAdg3AddItemEnabled:r}},_removeAndHide:function(){var t=this;AJS.dialog2(this.$el).hide(),setTimeout(function(){return t.destroy()})},triggerSubmitAnalyticEvent:function(){this.canUserManageDVCSAccounts?this.isIntegration?AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.connect-repo.integrate.click",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutType:this.dvcsName}}):AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.connect-repo.sync.click",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutType:this.dvcsName}}):AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.connect-repo.sync.ask-admin.click",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutType:this.dvcsName}})},triggerEditAnalyticEvent:function(){this.canUserManageDVCSAccounts&&(this.isIntegration?AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.connect-repo.integrate.edit",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutType:this.dvcsName}}):AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.connect-repo.sync.edit",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutType:this.dvcsName}}))},triggerCancelAnalyticEvent:function(){this.canUserManageDVCSAccounts?this.isIntegration?AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.connect-repo.integrate.cancel",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutType:this.dvcsName}}):AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.connect-repo.sync.cancel",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutType:this.dvcsName}}):AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.connect-repo.sync.ask-admin.cancel",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutType:this.dvcsName}})},initialize:function(t){var n=this,r=t.repoShortcutModel,a=t.canUserManageDVCSAccounts;this.repoShortcutModel=r;var s=function(t){t.set({isRepositoryLinked:!0}),t.trigger("dvcsremote:change",t),n._removeAndHide()},c=function(){r.set({isPendingApproval:!0}),n.listenTo(r,"save:success",function(){e({type:"success",body:"Your admin will be notified when they next login",close:"auto"}),n._removeAndHide()}),n.listenTo(r,"save:failure",function(){e({type:"error",body:"Failed to notify admin"}),n._removeAndHide()}),r.save()},o=r.attributes;if(this.dvcsName="bitbucket"===o.dvcsType?"Bitbucket":"GitHub",this.canUserManageDVCSAccounts=a,this.isIntegration=r.hasNotLinkedOrg(),a)if("bitbucket"===o.dvcsType&&r.hasNotLinkedOrg()&&a)this.handleSubmit=function(){return i.startBBOrganisationLink(o.dvcsOrg)};else if("bitbucket"===o.dvcsType&&r.hasLinkedOrgAndNotRepo()&&a)this.handleSubmit=function(){i.startBBRepositoryLink(r.attributes).then(function(){return s(r)})["catch"](function(){return n._removeAndHide()})};else{if("github"!==o.dvcsType)throw"Unsupported DVCS Type";o.newGithubDvcsIntegrationsAllowed?r.hasNotLinkedOrg()?this.handleSubmit=function(){i.startGithubOrganisationLink()}:r.hasLinkedOrgAndNotRepo()&&(this.handleSubmit=function(){i.startGithubRepositoryLink(r.attributes).then(function(){return s(r)})}):o.githubAppInstalled||(this.handleSubmit=function(){i.startGithubOrganisationLink()})}else this.handleSubmit=c},onRender:function(){AJS.dialog2(this.$el).show()}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/dialogs/Add.js' */
"use strict";define("repository-shortcuts/dialogs/add",["jquery","repository-shortcuts/models/repository-shortcut","repository-shortcuts/views/add-dialog-content","repository-shortcuts/services/repo-shortcut-update-handler"],function(e,t,s,i){return JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Add.extend({initialize:function(r){_.bindAll(this,"hide","refresh","focusForm");var o=this;this.analyticsSave=!1,this.sidebarItem=r.sidebarItem,this.projectKey=r.projectKey,this.collection=r.collection,this.model=new t(null,{projectKey:this.projectKey}),this.errorModel=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.ShortcutErrors(null,{model:this.model}),this.view=new s({model:this.model,errorModel:this.errorModel,canUserManageDVCSAccounts:this.collection.canUserManageDVCSAccounts}),this.view.render();var c=e(window),n=e(document),a=e(".aui-sidebar-body");this.dialog=AJS.InlineDialog(this.sidebarItem.ui.link,"repo-shortcuts-group__add-dialog",function(e,t,s){return o.sidebarItem.$el.addClass("aui-nav-selected"),o.view.render(),o.view.$el.appendTo(e),o.view.ui.url.focus(),c.on("scroll.repo-shortcuts",function(){o.refresh()}),a.on("scroll.repo-shortcuts",function(){o.hide()}),n.on("showLayer",o.focusForm),c.on("resize",o.refresh),s(),!1},{gravity:"w",autoWidth:!0,initCallback:function(){o.trigger("dialog:open"),o.analyticsSave=!1},hideCallback:function(){o.sidebarItem.$el.removeClass("aui-nav-selected"),o.sidebarItem.ui.link.blur(),c.off("scroll.repo-shortcuts"),a.off("scroll.repo-shortcuts"),n.off("showLayer",o.focusForm),o.trigger("dialog:close",o.analyticsSave)},persistent:!0,closeOnTriggerClick:!0}),this.listenTo(this.view,"render",this.refresh),this.listenTo(this.view,"cancel",this.hideAndRender),this.listenTo(this.model,"save:success",function(){var e=new t(this.model.toJSON(),{projectKey:this.projectKey});this.collection.add(e),this.model.clear(),this.analyticsSave=!0,this.hide(),"bitbucket"!==e.attributes.dvcsType&&"github"!==e.attributes.dvcsType||i(e,this.collection.canUserManageDVCSAccounts),AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.link-repo.click",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),dvcsType:e.attributes.dvcsType}})}),this.listenTo(this.sidebarItem,"before:select",function(e){return e.preventDefault()}),AJS.sidebar(".aui-sidebar").on("collapse-start",this.hide),e(".repo-shortcuts-group").on("click","li",this.hide)}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/dialogs/AddModal.js' */
"use strict";define("repository-shortcuts/dialogs/add-modal",["jquery","repository-shortcuts/models/repository-shortcut","repository-shortcuts/views/add-dialog-content","repository-shortcuts/services/repo-shortcut-update-handler","aui/flag"],function(t,e,o,s,i){return JIRA.Projects.Libs.Marionette.Controller.extend({initialize:function(t){this.collection=t.collection,this.projectKey=t.projectKey,this.projectId=t.projectId,this.analyticsSave=!1,this.model=new e(null,{projectKey:this.projectKey}),this.errorModel=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.ShortcutErrors(null,{model:this.model}),this.view=new o({model:this.model,errorModel:this.errorModel,canUserManageDVCSAccounts:this.collection.canUserManageDVCSAccounts}),this.view.render(),this.dialog=AJS.dialog2(this.view.$el),this.listenTo(this.model,"save:success",function(){var t=new e(this.model.toJSON(),{projectKey:this.projectKey});this.collection.add(t),this.model.clear(),AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.link-repo.click",data:{projectId:this.projectId,dvcsType:t.attributes.dvcsType}}),this.analyticsSave=!0,this._closeDialog(),"bitbucket"===t.attributes.dvcsType||"github"===t.attributes.dvcsType?(s(t,this.collection.canUserManageDVCSAccounts),t.hasLinkedAllComponents()&&i({type:"success",title:"You have added the repository",body:"Nicely done! Your team is going to love this.",close:"auto"})):i({type:"success",title:"You have added the shortcut",body:"Nicely done! Your team is going to love this.",close:"auto"})}),this.listenTo(this.view,"cancel",this._closeDialog),this.listenTo(this.dialog,"hide",this._cleanUpDialog)},show:function(){this.dialog.show(),this.view.ui.url.focus(),AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.add-link.click",data:{projectId:this.projectId}})},_closeDialog:function(){this.dialog.hide()},_cleanUpDialog:function(){AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.connect-repo.add-link.close",data:{projectId:this.projectId,isSave:this.analyticsSave}}),t("#add-repository-dialog").parent().remove()}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/dialogs/Edit.js' */
"use strict";define("repository-shortcuts/dialogs/edit",["jquery","repository-shortcuts/models/repository-shortcut","repository-shortcuts/views/edit-dialog-content","repository-shortcuts/services/repo-shortcut-update-handler","aui/flag","jira/featureflags/simplified-ux-feature-manager"],function(e,t,o,r,s,i){var c=i.isAdg3ModeOn();return JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Edit.extend({initialize:function(i){var d=this,a=i.repoShortcutModel,n=i.canUserManageDVCSAccounts;_.bindAll(this,"hide"),this.model=new t(a.toJSON(),{projectKey:a.projectKey||a.collection.projectKey}),this.errorModel=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.ShortcutErrors((void 0),{model:this.model}),this.view=new o({model:this.model,errorModel:this.errorModel,canUserManageDVCSAccounts:n}),this.view.render();var l=e(JIRA.Software.RepositoryShortcuts.Templates.editDialogChrome({}));if(this.view.$el.appendTo(l),this.dialog=AJS.dialog2(l),this.dialog.show(),this.view.ui.url.focus(),c){var u=JIRA.API.Projects.getCurrentProjectId();this.view.ui["delete"].on("click",function(e){AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.delete-link.click",data:{projectId:u,shortcutId:d.model.id}}),e.preventDefault(),d.hide();var t=new JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Delete({model:d.model});d.listenToOnce(t,"dialog:close",function(e){e?AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.delete-link.confirm",data:{projectId:u,shortcutId:d.model.id}}):AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.delete-link.cancel",data:{projectId:u,shortcutId:d.model.id}})})}),this.listenTo(this.model,"remove:success",function(){AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.delete-link.success",data:{projectId:u,shortcutId:d.model.id}}),a.collection.remove(a),s({type:"success",body:"Shortcut deleted.",close:"auto"})}),this.listenTo(this.model,"save:start",function(){AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.edit.save",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutId:d.model.id}})})}this.listenTo(this.view,"cancel",function(){c&&AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.edit.cancel",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutId:a.id}}),d.hide()}),this.listenTo(this.model,"save:success",function(){c&&AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.edit.success",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutId:d.model.id}}),d.hide(),a.set(d.model.toJSON()),"bitbucket"===a.get("dvcsType")||"github"===a.get("dvcsType")?(r(a,n),c&&a.hasLinkedAllComponents()&&s({type:"success",body:"You have updated the repository",close:"auto"})):c&&s({type:"success",body:"You have updated the shortcut",close:"auto"})}),this.dialog.on("hide",function(){return d.trigger("dialog:close",d.analyticsSave)})}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/dialogs/Connection.js' */
"use strict";define("repository-shortcuts/dialogs/connection",["jquery","underscore","repository-shortcuts/views/connection-dialog-content"],function(i,e,o){return JIRA.Projects.Libs.Marionette.Controller.extend({initialize:function(t){var r=this,s=t.$trigger,n=t.repoShortcutModel;e.bindAll(this,"hide");var c=this,l={gravity:"w",persistent:!0,closeOnTriggerClick:!0,initCallback:function(){c.trigger("dialog:open"),c.analyticsSave=!1},hideCallback:function(){i(window).off("scroll.repo-shortcuts"),i(".aui-sidebar-body").off("scroll.repo-shortcuts"),i(document).off("showLayer",c.focusForm),c.trigger("syncDialog:close")}},a=function(e,o,t){var s=i(window),n=i(".aui-sidebar-body");return e.addClass("connection-dialog"),r.view.render(),r.view.$el.appendTo(e),s.on("resize",r.refresh),s.on("scroll.repo-shortcuts",r.refresh),n.on("scroll.repo-shortcuts",r.hide),t(),!1},d="suggest-connection-dialog-"+n.id;this.view=new o({repoShortcutModel:n}),this.listenTo(this.view,"connection:start",this.hide),this.listenTo(this.view,"connection:cancel",this.hide),this.dialog=AJS.InlineDialog(s,d,a,l),AJS.sidebar(".aui-sidebar").on("collapse-start",this.hide)},hide:function(){this.dialog.hide()},refresh:function(){this.dialog.refresh()}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/init-adg2.js' */
"use strict";require(["underscore","bluebird/Promise","repository-shortcuts/models/repository-shortcuts","repository-shortcuts/views/repository-shortcut-list","repository-shortcuts/services/dvcs-account-matcher","jira/featureflags/simplified-ux-feature-manager","jira/featureflags/feature-manager","aui/flag"],function(e,t,r,a,s,o,i,c){function n(o){var i=WRM.data.claim("com.atlassian.jira.plugin.devstatus.web.reposhortcuts:can-manage-dvcs"),c=JIRA.API.Projects.getCurrentProjectKey(),n=o.map(function(e){return s.matchUrlAgainstNetwork(e.url)});t.all(n).then(function(t){var s=o.map(function(r,a){return e.extend({},r,t[a])}),n=new r(s,{projectKey:c,canUserManageDVCSAccounts:i}),u=new a({collection:n,targetGroup:"repo-shortcuts-group"});u.render()})["catch"](function(e){AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.notifications.connect-repo.shortcut-data-retrieve-fail",errorMessage:e&&e.message})})}function u(){var e=JSON.parse(sessionStorage.getItem("reposhortcuts.pageloadmessages")),t=Array.isArray(e)?e:[];t.forEach(function(e){c({type:e.type,title:e.title,body:e.body,close:e.close})}),sessionStorage.removeItem("reposhortcuts.pageloadmessages")}JIRA.API.getSidebar().done(function(){if(!o.isGlobalSidebarEnabled()){var e=WRM.data.claim("com.atlassian.jira.plugin.devstatus.web.reposhortcuts:can-manage-shortcuts"),t=WRM.data.claim("com.atlassian.jira.plugin.devstatus.web.reposhortcuts:repository-shortcuts");e&&Array.isArray(t)&&(n(t),u())}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts-shortcut-utils', location = 'js/repository-shortcuts/utils/ShortcutUtils.js' */
"use strict";define("repository-shortcuts/utils/repository-shortcut-utils",["exports"],function(t){t.mapDvcsTypeToIcon=function(t){switch(t){case"bitbucket":return"bitbucket";case"github":return"repos";default:return"shortcut"}},t.shouldShowSync=function(t,e){var s=t.attributes,i="bitbucket"===s.dvcsType||"github"===s.dvcsType,o=Boolean(s.isOrganisationLinked&&(!s.dvcsRepo||s.isRepositoryLinked));return e&&i&&!o}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts-adg3', location = 'js/repository-shortcuts/views/RepositoryShortcutsSidebarGroup.js' */
"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,o=Array(t.length);e<t.length;e++)o[e]=t[e];return o}return Array.from(t)}define("repository-shortcuts/views/repository-shortcut-sidebar-group",["underscore","jira/dev-status/util/es6","repository-shortcuts/views/connection-modal","repository-shortcuts/dialogs/edit","repository-shortcuts/utils/repository-shortcut-utils"],function(t,e,o,n,r){var i="com.atlassian.jira.jira-projects-plugin:source.code.link.",c="sidebar-project-shortcuts";return JIRA.Projects.Libs.Marionette.CompositeView.extend({initialize:function(){var t=this;JIRA.API.getSidebar().done(function(e){t._updateAllRepoShortcutItems(e),t._initialiseSyncRepoDialog(e),t._initialiseEditRepoDialog(e),t.collection.on("change",function(o){return t._updateRepoShortcutItem(o,e)},!0).on("add",function(o){return t._addNewShortcutToSidebar(o,e)},!0).on("remove",function(o){return t._removeShortcutFromSidebar(o.id,e)},!0).on("edit:start",function(e){t._showEditShortcutDialog(e,"integrationDialog")},!0)})},_updateAllRepoShortcutItems:function(t){var o=this;if(!this.collection.isEmpty()){var n=t.getGroup(c,!0).links.slice(0),a=n.filter(function(t){return e.stringStartsWith(t.id,i)});if(0!==a.length){var s=a[0].canEdit,u=this.collection.map(function(t){return{id:""+i+t.id,name:t.get("name"),url:t.get("url"),icon:r.mapDvcsTypeToIcon(t.get("dvcsType")),canEdit:s,showSync:r.shouldShowSync(t,o.collection.canUserManageDVCSAccounts)}}),d=e.findIndex(n,function(t){return t.id===a[0].id});n.splice.apply(n,[d,a.length].concat(_toConsumableArray(u)));var l=t.getGroup(c,!0);t.replaceGroup(c,t.createGroup({id:c,name:l.getName(),links:n,section:!0},!0),!0)}}},_updateRepoShortcutItem:function(t,e){e.replaceItem(""+i+t.id,{id:""+i+t.id,name:t.get("name"),url:t.get("url"),icon:r.mapDvcsTypeToIcon(t.get("dvcsType")),canEdit:!0,showSync:r.shouldShowSync(t,this.collection.canUserManageDVCSAccounts)},!0)},_initialiseSyncRepoDialog:function(t){var e=this;t.on(t.events.SYNC,function(t){var n=e._getRepoShortcutId(t.target.getId(!0));if(n){var r=e.collection.models.find(function(t){return t.get("id")===n}),i=new o({repoShortcutModel:r,canUserManageDVCSAccounts:e.collection.canUserManageDVCSAccounts});i.render()}},!0)},_initialiseEditRepoDialog:function(t){var e=this;t.on(t.events.EDIT,function(t){e._showEditShortcutDialog(e._getRepoShortcutId(t.target.getId(!0)),"sidebar")},!0)},_showEditShortcutDialog:function(t,e){if(t){AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.edit",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutId:t,referrer:e}});var o=this.collection.models.find(function(e){return e.get("id")===t});new n({repoShortcutModel:o,canUserManageDVCSAccounts:this.collection.canUserManageDVCSAccounts})}},_getRepoShortcutId:function(t){return e.stringStartsWith(t,i)?t.substr(i.length):null},_addNewShortcutToSidebar:function(t,o){var n=""+i+t.id,a={id:n,name:t.get("name"),url:t.get("url"),icon:r.mapDvcsTypeToIcon(t.get("dvcsType")),showSync:r.shouldShowSync(t,this.collection.canUserManageDVCSAccounts),canEdit:!0},s=o.getGroup(c,!0).links,u=e.findIndex(s,function(t){return e.stringStartsWith(t.id,"com.atlassian.jira.jira-projects-plugin:project.shortcut.default.link")});u=u>=0?u:void 0,o.addItem(c,a,u,!0)},_removeShortcutFromSidebar:function(t,e){var o=""+i+t;e.deleteItem(o,!0)}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts-adg3', location = 'js/repository-shortcuts/init-adg3.js' */
"use strict";require(["jquery","underscore","bluebird/Promise","repository-shortcuts/models/repository-shortcuts","repository-shortcuts/services/dvcs-account-matcher","repository-shortcuts/dialogs/add-modal","repository-shortcuts/views/repository-shortcut-sidebar-group","jira/featureflags/simplified-ux-feature-manager","aui/flag"],function(e,t,r,o,n,a,i,s){function c(a,s){var c=AJS.contextPath()+"/rest/projects/1.0/project/"+encodeURIComponent(a)+"/shortcut";e.ajax(c+"?shortcutType=source.code.link").done(function(e){var c=e.map(function(e){return n.matchUrlAgainstNetwork(e.url)});r.all(c).then(function(r){var n=e.map(function(e,o){return t.extend({},e,r[o])}),c=new o(n,{projectKey:a,canUserManageDVCSAccounts:s});new i({collection:c}),p(c)})["catch"](function(e){AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.notifications.connect-repo.shortcut-data-retrieve-fail",errorMessage:e&&e.message})})})}function u(e){var t=JIRA.API.Projects.getCurrentProjectId(),r=new a({projectKey:e.projectKey,projectId:t,collection:e});r.show()}function p(e){JIRA.API.getSidebar().done(function(t){t.on(t.events.JIRA_SUMMON_ADD_SHORTCUT_DIALOG,function(t,r){r.shortcutTypeId===l&&u(e)},!0),t.on(t.events.BEFORE_NAVIGATE,function(t,r){t.target.getId(!0)===d&&u(e)},!0)})}var d="com.pyxis.greenhopper.jira:project-sidebar-simple-add-repo",l="com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcut-type",g="com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts-adg3.repository-shortcuts-data";JIRA.API.getSidebar().done(function(){if(s.isAdg3ModeOn()){var e=WRM.data.claim(g),t=JIRA.API.Projects.getCurrentProjectKey();c(t,e.canManageDVCS)}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts-navigation-next', location = 'js/repository-shortcuts/integration/navigation-next.js' */
"use strict";define("repository-shortcuts/navigation-next",["jquery","underscore","bluebird/Promise","jira/dev-status/util/es6","repository-shortcuts/models/repository-shortcuts","repository-shortcuts/dialogs/add-modal","repository-shortcuts/dialogs/edit","repository-shortcuts/views/connection-modal","repository-shortcuts/utils/repository-shortcut-utils","repository-shortcuts/services/dvcs-account-matcher","jira/featureflags/feature-manager"],function(t,e,n,r,o,i,c,a,s,u,d){var l="com.atlassian.jira.jira-projects-plugin:source.code.link.",f="com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts-navigation-next.repository-shortcuts-data",p="com.pyxis.greenhopper.jira:project-sidebar-simple-add-repo",g=WRM.data.claim(f),h=g.canManageDVCS,m="endeavour.performance.shortcuts-optimization",v=d.isFeatureEnabled(m);return function(d){var f=d.shortcuts,g=d.onAdd,m=d.onEdit,y=d.onDelete,j=d.onBulkEdit,E=d.projectKey,A=void 0===E?"":E,I=d.projectId,w=void 0===I?"":I,S=d.isAdmin,C=void 0!==S&&S,b=d.canUserManageDVCSAccounts,D=void 0===b?h:b,M=A||JIRA.API.Projects.getCurrentProjectKey(),P=w||JIRA.API.Projects.getCurrentProjectId(),k=C||D,x=new o([],{canUserManageDVCSAccounts:k,projectKey:M}),J=!1,K=function(t){if(!J){var e=t.get("icon");if(e)return e}return s.mapDvcsTypeToIcon(t.get("dvcsType"))},R=function(t){return s.shouldShowSync(t,k)},U=function(t){return l+t.id},V=function(t,n){return e.extend({},n,{name:t.get("name"),url:t.get("url"),type:t.get("type"),id:U(t),icon:K(t),showSync:R(t),onEditClick:function(){return F(t.id,"sidebar")},onSyncClick:function(){return N(t.id)}})},T=function(t){return{name:t.text,url:t.href,id:t.id,icon:t.icon}},q=function(){return new i({collection:x,projectKey:M,projectId:P}).show()},F=function(t,e){AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.edit",data:{projectId:P,shortcutId:t,referrer:e}}),new c({repoShortcutModel:x.get(t),canUserManageDVCSAccounts:k})},N=function(t){return new a({repoShortcutModel:x.get(t),canUserManageDVCSAccounts:k}).render()},W=function(t){return g(V(t,{canEdit:!0}))},z=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.canEdit,r=[].concat(t);v?j(r.map(function(t){return V(t,{canEdit:n})})):r.forEach(function(t){return m(V(t,{canEdit:n}))})},B=function(t){return y(U(t))};x.add(f.map(T),{projectKey:M}),f._collection=x,f.length&&!v&&z(x.models,{canEdit:f[0].canEdit}),x.on("add",function(t){return W(t)}).on("change",function(t,e){var n=e.canEdit,r=void 0===n||n;return z(t,{canEdit:r})}).on("remove",function(t){return B(t)}).on("edit:start",function(t){return F(t,"integrationDialog")});var O=f.map(function(t){return u.matchUrlAgainstNetwork(t.href)});return n.all(O).then(function(t){J=!0,t.forEach(function(t,e){var n=f[e],r=x.get(n.id);r&&r.set(t,{silent:v,canEdit:n.canEdit})}),v&&r.requestIdleCallback(function(){f.length&&z(x.models,{canEdit:f[0].canEdit})})})["catch"](function(t){AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.notifications.connect-repo.shortcut-data-retrieve-fail",errorMessage:t&&t.message})}),(JIRA.API.getNavigationApi||t.Deferred)().then(function(t){t.onItemClick(t.viewIds.SOFTWARE,p,q)}),{add:q}}});;
;
/* module-key = 'com.atlassian.gadgets.embedded:gadget-core-resources', location = 'js/rpc.js' */
var gadgets=gadgets||{};gadgets.rpc=function(){var CALLBACK_NAME="__cb";var DEFAULT_NAME="";var FE_G2C_CHANNEL="__g2c_rpc";var FE_C2G_CHANNEL="__c2g_rpc";var services={};var iframePool=[];var relayUrl={};var useLegacyProtocol={};var authToken={};var callId=0;var callbacks={};var setup={};var sameDomain={};var params={};if(gadgets.util){params=gadgets.util.getUrlParameters()}authToken[".."]=params.rpctoken||params.ifpctok||0;function getRelayChannel(){return typeof window.postMessage==="function"?"wpm":typeof document.postMessage==="function"?"dpm":navigator.product==="Gecko"?"fe":"ifpc"}function setupChannel(){if(relayChannel==="dpm"||relayChannel==="wpm"){window.addEventListener("message",function(packet){try{if(packet&&packet.origin&&packet.origin!=="null"&&typeof packet.data==="string"){if(!isRpcRequest(gadgets.json.parse(packet.data))){return }if(packet.origin===location.origin){process(gadgets.json.parse(packet.data))}else{AJS.$.get(AJS.contextPath()+"/rest/whitelist/1/check",{url:packet.origin}).done(function(result){if(result&&result.inbound&&result.inbound===true){process(gadgets.json.parse(packet.data))}else{if(AJS.debug){AJS.log("RPC: request rejected (bad origin): "+(packet&&packet.origin?packet.origin:"undefined origin"))}}}).fail(function(jqXHR,textStatus,errorThrown){AJS.log("RPC: REST "+textStatus,errorThrown)})}}}catch(e){if(AJS.debug){var origin=packet&&packet.origin?packet.origin:"undefined origin";AJS.log("Error processing gadget rpc message from '"+origin+"': "+e)}}},false)}}var relayChannel=getRelayChannel();setupChannel();services[DEFAULT_NAME]=function(){throw new Error("Unknown RPC service: "+this.s)};services[CALLBACK_NAME]=function(callbackId,result){var callback=callbacks[callbackId];if(callback){delete callbacks[callbackId];callback(result)}};function setupFrame(frameId){if(setup[frameId]){return }if(relayChannel==="fe"){try{var frame=document.getElementById(frameId);frame[FE_G2C_CHANNEL]=function(args){process(gadgets.json.parse(args))}}catch(e){}}setup[frameId]=true}function encodeLegacyData(args){var stringify=gadgets.json.stringify;var argsEscaped=[];for(var i=0,j=args.length;i<j;++i){argsEscaped.push(encodeURIComponent(stringify(args[i])))}return argsEscaped.join("&")}function isRpcRequest(request){return request&&typeof request.s==="string"&&typeof request.f==="string"&&request.a instanceof Array}function process(rpc){if(isRpcRequest(rpc)){if(authToken[rpc.f]){if(authToken[rpc.f]!=rpc.t){if(AJS.debug){console.log("Invalid auth token received for operation: "+rpc.s)}return }}if(rpc.c){rpc.callback=function(result){gadgets.rpc.call(rpc.f,CALLBACK_NAME,null,rpc.c,result)}}var result=(services[rpc.s]||services[DEFAULT_NAME]).apply(rpc,rpc.a);if(rpc.c&&typeof result!="undefined"){gadgets.rpc.call(rpc.f,CALLBACK_NAME,null,rpc.c,result)}}}function callFrameElement(targetId,serviceName,from,rpcData,callArgs){try{if(from!=".."){var fe=window.frameElement;if(typeof fe[FE_G2C_CHANNEL]==="function"){if(typeof fe[FE_G2C_CHANNEL][FE_C2G_CHANNEL]!=="function"){fe[FE_G2C_CHANNEL][FE_C2G_CHANNEL]=function(args){process(gadgets.json.parse(args))}}fe[FE_G2C_CHANNEL](rpcData);return }}else{var frame=document.getElementById(targetId);if(typeof frame[FE_G2C_CHANNEL]==="function"&&typeof frame[FE_G2C_CHANNEL][FE_C2G_CHANNEL]==="function"){frame[FE_G2C_CHANNEL][FE_C2G_CHANNEL](rpcData);return }}}catch(e){}callIfpc(targetId,serviceName,from,rpcData,callArgs)}function callIfpc(targetId,serviceName,from,rpcData,callArgs){var relay=gadgets.rpc.getRelayUrl(targetId);if(!relay){throw new Error("No relay file assigned for IFPC")}var src=null;if(useLegacyProtocol[targetId]){src=[relay,"#",encodeLegacyData([from,callId,1,0,encodeLegacyData([from,serviceName,"","",from].concat(callArgs))])].join("")}else{src=[relay,"#",targetId,"&",from,"@",callId,"&1&0&",encodeURIComponent(rpcData)].join("")}emitInvisibleIframe(src)}function emitInvisibleIframe(src){var iframe;for(var i=iframePool.length-1;i>=0;--i){var ifr=iframePool[i];try{if(ifr&&(ifr.recyclable||ifr.readyState==="complete")){ifr.parentNode.removeChild(ifr);if(window.ActiveXObject){iframePool[i]=ifr=null;iframePool.splice(i,1)}else{ifr.recyclable=false;iframe=ifr;break}}}catch(e){}}if(!iframe){iframe=document.createElement("iframe");iframe.style.border=iframe.style.width=iframe.style.height="0px";iframe.style.visibility="hidden";iframe.style.position="absolute";iframe.onload=function(){this.recyclable=true};iframePool.push(iframe)}iframe.src=src;setTimeout(function(){document.body.appendChild(iframe)},0)}function callSameDomain(target,rpc){if(typeof sameDomain[target]==="undefined"){sameDomain[target]=false;var targetEl=null;if(target===".."){targetEl=parent}else{targetEl=frames[target]}try{sameDomain[target]=targetEl.gadgets.rpc.receiveSameDomain}catch(e){}}if(typeof sameDomain[target]==="function"){sameDomain[target](rpc);return true}return false}if(gadgets.config){function init(config){if(config.rpc.parentRelayUrl.substring(0,7)==="http://"){relayUrl[".."]=config.rpc.parentRelayUrl}else{var params=document.location.search.substring(0).split("&");var parentParam="";for(var i=0,param;param=params[i];++i){if(param.indexOf("parent=")===0){parentParam=decodeURIComponent(param.substring(7));break}}relayUrl[".."]=parentParam+config.rpc.parentRelayUrl}useLegacyProtocol[".."]=!!config.rpc.useLegacyProtocol}var requiredConfig={parentRelayUrl:gadgets.config.NonEmptyStringValidator};gadgets.config.register("rpc",requiredConfig,init)}return{register:function(serviceName,handler){if(serviceName==CALLBACK_NAME){throw new Error("Cannot overwrite callback service")}if(serviceName==DEFAULT_NAME){throw new Error("Cannot overwrite default service:"+" use registerDefault")}services[serviceName]=handler},unregister:function(serviceName){if(serviceName==CALLBACK_NAME){throw new Error("Cannot delete callback service")}if(serviceName==DEFAULT_NAME){throw new Error("Cannot delete default service:"+" use unregisterDefault")}delete services[serviceName]},registerDefault:function(handler){services[""]=handler},unregisterDefault:function(){delete services[""]},call:function(targetId,serviceName,callback,var_args){++callId;targetId=targetId||"..";if(callback){callbacks[callId]=callback}var from="..";if(targetId===".."){from=window.name}var rpc={s:serviceName,f:from,c:callback?callId:0,a:Array.prototype.slice.call(arguments,3),t:authToken[targetId]};if(callSameDomain(targetId,rpc)){return }var rpcData=gadgets.json.stringify(rpc);var channelType=relayChannel;if(useLegacyProtocol[targetId]){channelType="ifpc"}switch(channelType){case"dpm":var targetDoc=targetId===".."?parent.document:frames[targetId].document;targetDoc.postMessage(rpcData);break;case"wpm":var targetWin=targetId===".."?parent:frames[targetId];targetWin.postMessage(rpcData,relayUrl[targetId]);break;case"fe":callFrameElement(targetId,serviceName,from,rpcData,rpc.a);break;default:callIfpc(targetId,serviceName,from,rpcData,rpc.a);break}},getRelayUrl:function(targetId){return relayUrl[targetId]},setRelayUrl:function(targetId,url,opt_useLegacy){relayUrl[targetId]=url;useLegacyProtocol[targetId]=!!opt_useLegacy},setAuthToken:function(targetId,token){authToken[targetId]=token;setupFrame(targetId)},getRelayChannel:function(){return relayChannel},receive:function(fragment){if(fragment.length>4){process(gadgets.json.parse(decodeURIComponent(fragment[fragment.length-1])))}},receiveSameDomain:function(rpc){rpc.a=Array.prototype.slice.call(rpc.a);window.setTimeout(function(){process(rpc)},0)}}}();;
;
/* module-key = 'com.atlassian.gadgets.embedded:gadget-core-resources', location = 'js/util.js' */
Function.prototype.inherits=function(parentCtor){function tempCtor(){}tempCtor.prototype=parentCtor.prototype;this.superClass_=parentCtor.prototype;this.prototype=new tempCtor();this.prototype.constructor=this};;
;
/* module-key = 'com.atlassian.gadgets.embedded:gadget-core-resources', location = 'js/json.js' */
var gadgets=gadgets||{};gadgets.json=function(){function f(n){return n<10?"0"+n:n}Date.prototype.toJSON=function(){return[this.getUTCFullYear(),"-",f(this.getUTCMonth()+1),"-",f(this.getUTCDate()),"T",f(this.getUTCHours()),":",f(this.getUTCMinutes()),":",f(this.getUTCSeconds()),"Z"].join("")};var m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function stringify(value){var a,i,k,l,r=/["\\\x00-\x1f\x7f-\x9f]/g,v;switch(typeof value){case"string":return r.test(value)?'"'+value.replace(r,function(a){var c=m[a];if(c){return c}c=a.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"':'"'+value+'"';case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}a=[];if(typeof value.length==="number"&&!(value.propertyIsEnumerable("length"))){l=value.length;for(i=0;i<l;i+=1){a.push(stringify(value[i])||"null")}return"["+a.join(",")+"]"}for(k in value){if(value.hasOwnProperty(k)){if(typeof k==="string"){v=stringify(value[k]);if(v){a.push(stringify(k)+":"+v)}}}}return"{"+a.join(",")+"}"}}return{stringify:stringify,parse:function(text){if(/^[\],:{}\s]*$/.test(text.replace(/\\["\\\/b-u]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){return eval("("+text+")")}return false}}}();;
;
/* module-key = 'com.atlassian.gadgets.embedded:gadget-core-resources', location = 'js/gadgets-core.js' */
var gadgets=gadgets||{};gadgets.error={};gadgets.error.SUBCLASS_RESPONSIBILITY="subclass responsibility";gadgets.error.TO_BE_DONE="to be done";gadgets.log=function(message){if(window.console&&console.log){console.log(message)}else{var logEntry=document.createElement("div");logEntry.className="gadgets-log-entry";logEntry.innerHTML=message;document.body.appendChild(logEntry)}};gadgets.Extensible=function(){};gadgets.Extensible.prototype.setDependencies=function(dependencies){for(var p in dependencies){this[p]=dependencies[p]}};gadgets.Extensible.prototype.getDependencies=function(name){return this[name]};gadgets.UserPrefStore=function(){};gadgets.UserPrefStore.prototype.getPrefs=function(gadget){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.UserPrefStore.prototype.savePrefs=function(gadget){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.DefaultUserPrefStore=function(){gadgets.UserPrefStore.call(this)};gadgets.DefaultUserPrefStore.inherits(gadgets.UserPrefStore);gadgets.DefaultUserPrefStore.prototype.getPrefs=function(gadget){};gadgets.DefaultUserPrefStore.prototype.savePrefs=function(gadget){};gadgets.GadgetService=function(){};gadgets.GadgetService.prototype.setHeight=function(elementId,height){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.GadgetService.prototype.setTitle=function(gadget,title){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.GadgetService.prototype.setUserPref=function(id){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.IfrGadgetService=function(){gadgets.GadgetService.call(this);var service=this;gadgets.rpc.register("resize_iframe",function(){service.setHeight.apply(this,arguments)});gadgets.rpc.register("set_pref",function(){service.setUserPref.apply(this,arguments)});gadgets.rpc.register("set_title",function(){service.setTitle.apply(this,arguments)});gadgets.rpc.register("requestNavigateTo",function(){service.requestNavigateTo.apply(this,arguments)})};gadgets.IfrGadgetService.inherits(gadgets.GadgetService);gadgets.IfrGadgetService.prototype.setHeight=function(height){if(height>gadgets.container.maxheight_){height=gadgets.container.maxheight_}var element=document.getElementById(this.f);if(element){element.style.height=height+"px"}};gadgets.IfrGadgetService.prototype.requestNavigateTo=function(view,opt_params){var id=this.getGadgetIdFromModuleId(this.f);var url=this.getUrlForView(view);if(opt_params){var paramStr=JSON.stringify(opt_params);if(paramStr.length>0){url+="&appParams="+encodeURIComponent(paramStr)}}if(url&&document.location.href.indexOf(url)==-1){document.location.href=url}};gadgets.IfrGadgetService.prototype.getUrlForView=function(view){if(view==="canvas"){return"/canvas"}else{if(view==="profile"){return"/profile"}else{return null}}};gadgets.IfrGadgetService.prototype.getGadgetIdFromModuleId=function(moduleId){return parseInt(moduleId.match(/_([0-9]+)$/)[1],10)};gadgets.LayoutManager=function(){};gadgets.LayoutManager.prototype.getGadgetChrome=function(gadget){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.StaticLayoutManager=function(){gadgets.LayoutManager.call(this)};gadgets.StaticLayoutManager.inherits(gadgets.LayoutManager);gadgets.StaticLayoutManager.prototype.setGadgetChromeIds=function(gadgetChromeIds){this.gadgetChromeIds_=gadgetChromeIds};gadgets.StaticLayoutManager.prototype.getGadgetChrome=function(gadget){var chromeId=this.gadgetChromeIds_[gadget.id];return chromeId?document.getElementById(chromeId):null};gadgets.FloatLeftLayoutManager=function(layoutRootId){gadgets.LayoutManager.call(this);this.layoutRootId_=layoutRootId};gadgets.FloatLeftLayoutManager.inherits(gadgets.LayoutManager);gadgets.FloatLeftLayoutManager.prototype.getGadgetChrome=function(gadget){var layoutRoot=document.getElementById(this.layoutRootId_);if(layoutRoot){var chrome=document.createElement("div");chrome.className="gadgets-gadget-chrome";chrome.style.cssFloat="left";layoutRoot.appendChild(chrome);return chrome}else{return null}};;
;
/* module-key = 'com.atlassian.gadgets.embedded:gadget-container-resources', location = 'js/gadgets-container.js' */
gadgets.Container=function(){this.parentUrl_="http://"+document.location.host;this.country_="ALL";this.language_="ALL";this.view_="default";this.nocache_=1;this.maxheight_=2147483647};gadgets.Container.inherits(gadgets.Extensible);gadgets.Container.prototype.userPrefStore=new gadgets.DefaultUserPrefStore();gadgets.Container.prototype.gadgetService=new gadgets.GadgetService();gadgets.Container.prototype.layoutManager=new gadgets.StaticLayoutManager();gadgets.Container.prototype.setParentUrl=function(url){this.parentUrl_=url};gadgets.Container.prototype.setCountry=function(country){this.country_=country};gadgets.Container.prototype.setNoCache=function(nocache){this.nocache_=nocache};gadgets.Container.prototype.setLanguage=function(language){this.language_=language};gadgets.Container.prototype.setView=function(view){this.view_=view};gadgets.Container.prototype.setMaxHeight=function(maxheight){this.maxheight_=maxheight};gadgets.Container.prototype.getGadgetKey_=function(instanceId){return"gadget_"+instanceId};gadgets.IfrContainer=function(){gadgets.Container.call(this)};gadgets.IfrContainer.inherits(gadgets.Container);gadgets.IfrContainer.prototype.gadgetService=new gadgets.IfrGadgetService();gadgets.IfrContainer.prototype.setParentUrl=function(url){if(!url.match(/^http[s]?:\/\//)){url=document.location.href.match(/^[^?#]+\//)[0]+url}this.parentUrl_=url};gadgets.container=new gadgets.IfrContainer();;
;
/* module-key = 'com.atlassian.gadgets.embedded:gadget-standalone-resources', location = 'js/gadgets-standalone.js' */
new gadgets.IfrGadgetService();gadgets.IfrGadgetService.prototype.setTitle=function(title){};;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:project-page', location = '/sidebar/navigation/items.js' */
AJS.$(function(n){n(document).on("click",'.aui-nav > [aria-expanded] > a.aui-nav-item[href="#"]',function(a){a.preventDefault(),AJS.navigation(n(this).siblings(".aui-nav")).toggle()})});;
;
/* module-key = 'jira.webresources:change-project-type-dialog', location = 'includes/jira/dialog/changeProjectTypeDialog.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.project&&(JIRA.Templates.project={}),"undefined"==typeof JIRA.Templates.project.ChangeType&&(JIRA.Templates.project.ChangeType={}),JIRA.Templates.project.ChangeType.changeProjectTypeDialog=function(e,t){return'<section role="dialog" id="change-project-type-dialog-'+soy.$$escapeHtml(e.projectId)+'" class="aui-layer aui-dialog2 aui-dialog2-medium" aria-hidden="true"><header class="aui-dialog2-header"><h2 class="aui-dialog2-header-main">'+soy.$$escapeHtml("Change project type")+'</h2></header><div class="aui-dialog2-content"></div><footer class="aui-dialog2-footer"><div class="aui-dialog2-footer-actions form-footer"><div class="icon throbber"></div><button class="aui-button aui-button-primary dialog-change-button hidden">'+soy.$$escapeHtml("Change")+'</button><button class="aui-button aui-button-link dialog-close-button">'+soy.$$escapeHtml("Cancel")+"</button></div></footer></section>"},JIRA.Templates.project.ChangeType.changeProjectTypeForm=function(e,t){var a='<form class="aui change-project-type-form"><div class="form-body"><div class="aui-group project-type-change-group"><div class="aui-item">'+JIRA.Templates.project.ChangeType.projectAvatar(e)+'</div><div class="aui-item project-type-select-group">'+JIRA.Templates.project.ChangeType.projectTypeDropdown({projectTypeKey:e.project.projectTypeKey,projectTypes:e.projectTypes})+"</div></div></div></form><p>",o="<a href="+soy.$$escapeHtml(e.helpLink)+' target="_blank">';return a+=soy.$$filterNoAutoescape(AJS.format("If you change the project type, you\'\'ll also change what your users can see and do with the project. {0}Check the differences here{1}",o,"</a>"))+"</p>"},JIRA.Templates.project.ChangeType.projectTypeDropdown=function(e,t){for(var a='<select class="project-type-select select" name="project-type">',o=e.projectTypes,p=o.length,c=0;c<p;c++){var s=o[c];a+='<option class="imagebacked" data-icon="data:image/svg+xml;base64, '+soy.$$escapeHtml(s.icon)+'" value="'+soy.$$escapeHtml(s.key)+'" '+(s.key==e.projectTypeKey?" selected ":"")+">"+soy.$$escapeHtml(s.formattedKey)+"</option>"}return a+="</select>"},JIRA.Templates.project.ChangeType.updateTargetElement=function(e,t){return'<img src="data:image/svg+xml;base64,'+soy.$$escapeHtml(e.icon)+'" class="project-type-icon" /><span>'+soy.$$escapeHtml(e.formattedKey)+"</span>"},JIRA.Templates.project.ChangeType.projectAvatar=function(e,t){return'<div class="project-avatar-header"><span class="aui-avatar aui-avatar-large aui-avatar-project"><span class="aui-avatar-inner"><img src="'+soy.$$escapeHtml(e.project.avatarUrls["48x48"])+'" alt="'+soy.$$escapeHtml(e.project.name)+'"></span></span><div class="project-header" title="'+soy.$$escapeHtml(e.project.name)+'">'+soy.$$escapeHtml(e.project.name)+"</div></div>"},JIRA.Templates.project.ChangeType.dialogSpinner=function(e,t){return'<div class="dialog-spinner"></div>'},JIRA.Templates.project.ChangeType.successMsg=function(e,t){return""+soy.$$escapeHtml(AJS.format("You have just changed {0} to a {1} project type.",e.projectName,e.projectTypeName))};;
;
/* module-key = 'jira.webresources:change-project-type-dialog', location = '/includes/jira/dialog/changeProjectTypeDialog.js' */
define("jira/project/admin/change-project-type-dialog",["jira/util/formatter","jquery","underscore","jira/message","jira/ajs/select/single-select","wrm/context-path"],function(e,t,o,n,a,r){function c(e){return t.ajax({url:r()+"/rest/internal/2/projects/"+e+"/changetypedata",dataType:"json",contentType:"application/json",type:"GET"})}function p(a){var c=t(".project-type-select",a.dialogBody),p=c.val()[0],d=o.findWhere(a.projectTypes,{key:p});t(".dialog-change-button",a.dialogBody).attr("disabled","disabled"),t(t.ajax({url:r()+"/rest/api/2/project/"+a.projectId+"/type/"+p,dataType:"json",contentType:"application/json",type:"PUT"}).done(function(){a.changeProjectTypeDialog.hide(),a.onProjectTypeChanged&&a.onProjectTypeChanged(a.trigger,d),n.showSuccessMsg(JIRA.Templates.project.ChangeType.successMsg({projectName:a.projectName,projectTypeName:d.formattedKey})),AJS.EventQueue.push({name:"administration.projecttype.change",properties:{projectId:a.projectId,sourceProjectType:i(a.sourceProjectType),destinationProjectType:i(p)}})}).fail(function(){t(".aui-dialog2-content",a.dialogBody).prepend(aui.message.error({content:e.format("We haven\'\'t been able to complete the project conversion. You could refresh the page and try again. If this doesn\'\'t work, contact {0}Support{1}.",'<a href="https://support.atlassian.com/">',"</a>")}))})).throbber({target:t(".throbber",a.dialogBody)})}function i(e){return e&&e.replace("_","")}function d(e,t,o){e==t?o.find(".dialog-change-button").attr("disabled","disabled"):o.find(".dialog-change-button").removeAttr("disabled")}function s(o){var n=t(JIRA.Templates.project.ChangeType.changeProjectTypeDialog({projectId:o.projectId})),r=AJS.dialog2(n);r.on("show",function(){t(".aui-dialog2-content",n).html(JIRA.Templates.project.ChangeType.dialogSpinner()),t(".dialog-spinner",n).spin(),t(".dialog-change-button",n).unbind("click").addClass("hidden")}),t(o.trigger).click(function(i){i.preventDefault(),r.show(),c(o.projectId).done(function(e){n.find(".aui-dialog2-content").html(JIRA.Templates.project.ChangeType.changeProjectTypeForm(e)),new a({element:t(".project-type-select",n),revertOnInvalid:!0,width:165}),n.find(".dialog-change-button").removeClass("hidden"),d(t(".project-type-select",n).val(),e.project.projectTypeKey,n);var c={dialogBody:n,changeProjectTypeDialog:r,projectName:e.project.name,projectTypes:e.projectTypes,trigger:o.trigger,projectId:o.projectId,onProjectTypeChanged:o.onProjectTypeChanged,sourceProjectType:e.project.projectTypeKey};t(".dialog-change-button",n).click(function(e){e.preventDefault(),p(c)}),t(".change-project-type-form",n).on("submit",function(e){e.preventDefault(),p(c)}),t(".project-type-select",n).on("change",function(o){d(t(this).val(),e.project.projectTypeKey,n)})}).fail(function(){t(".aui-dialog2-content",n).html(aui.message.error({content:e.format("We were unable to load data required for the project type change. You could refresh the page and try again. If this doesn\'\'t work, contact {0}Support{1}.",'<a href="https://support.atlassian.com/">',"</a>")}))})}),t(".dialog-close-button",n).click(function(e){e.preventDefault(),r.hide()})}return function(e){s(e)}});;
;
/* module-key = 'jira.webresources:project-type-warning', location = '/static/projecttypes/warning/dialog/project-type-warning-dialog.js' */
define("jira/project/types/warning/dialog",["require"],function(e){"use strict";function t(t,a,i){var o=n(".project-type-warning-icon",i);r(o,"uninstalled-warning-dialog",function(r,i,o){r.html(JIRA.Project.Types.Warning.dialog({title:t.title,firstParagraph:t.firstParagraph,secondParagraph:t.secondParagraph,callToActionText:t.callToActionText}));var c=e("jira/project/admin/change-project-type-dialog");return c({trigger:n(".warning-dialog-change-project-type"),projectId:t.projectId,onProjectTypeChanged:a}),o(),!1},{width:375,gravity:"w"})}var n=e("jquery"),a=e("wrm/data"),r=e("aui/inline-dialog"),i=a.claim("project.type.warning.dialogs.data");return{init:function(e){e=e||{},e.sectionElement=e.sectionElement||n("body"),t(i,e.onProjectTypeChanged,e.sectionElement)}}});;
;
/* module-key = 'jira.webresources:project-type-warning', location = 'static/projecttypes/warning/dialog/templates/templates.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Project&&(JIRA.Project={}),"undefined"==typeof JIRA.Project.Types&&(JIRA.Project.Types={}),"undefined"==typeof JIRA.Project.Types.Warning&&(JIRA.Project.Types.Warning={}),JIRA.Project.Types.Warning.dialog=function(e,a){return'<div class="project-type-warning-dialog"><p class="header"><span>'+soy.$$escapeHtml(e.title)+'</span></p><p class="type-not-accessible-message">'+soy.$$escapeHtml(e.firstParagraph)+'</p><p class="available-functionality-message">'+soy.$$escapeHtml(e.secondParagraph)+'</p><div class="actions"><a class="warning-dialog-change-project-type" href="#">'+soy.$$escapeHtml(e.callToActionText)+"</a></div></div>"};;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-analytics', location = '/sidebar/analytics/analytics.js' */
!function(e){"use strict";function r(e){return JIRA.Projects.Sidebar.Analytics.Hash.prefixedHash(e||"NONE")}function i(e,r){AJS.trigger("analyticsEvent",{name:"jira.project.centric.navigation.sidebar."+e,data:r})}function o(){return"atl.jira.proj.config"===e('meta[name="admin.active.section"]').attr("content")}function t(e){return n.indexOf([c,e].join("."))!==-1}AJS.namespace("JIRA.Projects.Sidebar.Analytics");var c="proj.config";JIRA.Projects.Sidebar.Analytics=function(a){var s=AJS.sidebar(a),p=e();if(p=p.add(s.$el),p=p.add(s.submenus.inlineDialog),!JIRA.API.Sidebar)throw new Error("Error: cannot start analytics before JIRA.Projects.Sidebar.initAPI is called");JIRA.API.Sidebar.isProjectSidebar()?i("load.project",{projectId:JIRA.API.Projects.getCurrentProjectId(),projectType:JIRA.API.Projects.getCurrentProjectType()}):i("load.global"),p.on("click","a",function(){var a=r(e(this).attr("data-link-id")),s={id:a.hash,prefix:a.prefix},p=AJS.Meta.get("sidebar-source-page");if(p)s.sidebarSourcePage=p;else if(e(".issue-tools button.expand").length>0)s.sidebarSourcePage="search-el";else if(e(".navigation-tools button.collapse").length>0)s.sidebarSourcePage="fullscreen-el";else if(o()){var j=e('meta[name="admin.active.tab"]').attr("content");j=j.replace("com.atlassian.servicedesk.project-ui:",""),t(j)?s.sidebarSourcePage=[c,j].join("."):s.sidebarSourcePage=c}n.indexOf(s.sidebarSourcePage)===-1&&(s.sidebarSourcePage="unknown"),i("click.link",s)})};var n=["search-el","fullscreen-el","search","fullscreen","rapid-board","service-desk","proj.config","proj.config.view_project_summary","proj.config.view_project_issuetypes","proj.config.project-issuetypes-expand","proj.config.view_project_workflows","proj.config.view_project_screens","proj.config.view_project_fields","proj.config.view_project_versions","proj.config.view_project_components","proj.config.view_project_roles","proj.config.view_project_permissions","proj.config.view_project_issuesecurity","proj.config.view_project_notifications","proj.config.devstatus-admin-page-link","proj.config.hipchat-project-admin-page-link","proj.config.view_issue_collectors","proj.config.sd-project-request-types-item","proj.config.sd-project-request-security-item","proj.config.sd-project-portal-settings-item","proj.config.sd-project-feedback-settings-item","proj.config.sd-project-email-settings-item","proj.config.sd-project-confluence-kb-item","proj.config.sd-project-sidebar-sla","proj.config.sd-project-automation-item"]}(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-analytics', location = '/sidebar/analytics/hash.js' */
!function(){"use strict";function n(n,r){return 0===n.indexOf(r)}function r(r,t){return r.substring(n(r,t)?t.length:0)}function t(n){var r,t=0;if(!n)return"";for(var e=0;e<n.length;e+=1)r=n.charCodeAt(e),t=32*t-t+r,t|=0;return t}AJS.namespace("JIRA.Projects.Sidebar.Analytics");var e=[];JIRA.Projects.Sidebar.Analytics.Hash={prefixedHash:function(i){var a=_.find(e,_.partial(n,i))||"";return{prefix:a,hash:a+t(r(i,a))}},addPrefix:function(n){n&&!_.contains(e,n)&&e.push(n)},clearPrefixes:function(){e.length=0}}}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-expansion-manager', location = '/sidebar/expansion-manager.js' */
!function(){"use strict";var e="jira-sidebar-collapsed";AJS.namespace("JIRA.Projects.Sidebar"),JIRA.Projects.Sidebar.initExpansionManager=function(){var a=Boolean(WRM.data.claim("sidebar-collapsed-by-default"));JIRA.Projects.Sidebar.ExpansionManager=function(n,i){function o(a){a.isResponsive&&"true"===i[e]&&a.preventDefault()}function r(a){a.isResponsive||n.isViewportNarrow()||(i[e]=n.isCollapsed().toString())}function s(){n.reflow()&&n.isViewportNarrow()||(a&&void 0===i[e]||"true"===i[e]?n.collapse():n.expand())}i||(i=window.localStorage),s(),n.on("expand-start",o),n.on("expand-end collapse-end",r)}},JIRA.Projects.Sidebar.initExpansionManager()}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:collapsed-scope-filter', location = '/sidebar/scopefilter/templates.soy' */
// This file was automatically generated from templates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Projects.Sidebar.ScopeFilter.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Projects == 'undefined') { JIRA.Projects = {}; }
if (typeof JIRA.Projects.Sidebar == 'undefined') { JIRA.Projects.Sidebar = {}; }
if (typeof JIRA.Projects.Sidebar.ScopeFilter == 'undefined') { JIRA.Projects.Sidebar.ScopeFilter = {}; }
if (typeof JIRA.Projects.Sidebar.ScopeFilter.Templates == 'undefined') { JIRA.Projects.Sidebar.ScopeFilter.Templates = {}; }


JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedContainer = function(opt_data, opt_ignored) {
  return '<div class="aui-sidebar-group aui-sidebar-group-actions collapsed-scope-filter-container"></div>';
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedContainer.soyTemplateName = 'JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedContainer';
}


JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedScopeList = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '';
  if (opt_data.selectableScopes || opt_data.createActions) {
    output += '<div class="aui-nav-heading" title="' + soy.$$escapeHtml('Boards in this project') + '"><strong class="collapsed-scope-header">' + soy.$$escapeHtml('Boards in this project') + '</strong></div><ul class="aui-nav collapsed-scope-list" title="' + soy.$$escapeHtml('Select a board') + '">';
    if (opt_data.selectedScope) {
      output += '<li class="scope-filter selected-scope-filter" title="' + soy.$$escapeHtml(opt_data.selectedScope.label) + '">' + soy.$$escapeHtml(opt_data.selectedScope.label) + '</li>';
      var scopeFilterList21 = opt_data.selectableScopes;
      var scopeFilterListLen21 = scopeFilterList21.length;
      for (var scopeFilterIndex21 = 0; scopeFilterIndex21 < scopeFilterListLen21; scopeFilterIndex21++) {
        var scopeFilterData21 = scopeFilterList21[scopeFilterIndex21];
        output += JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedSelectableItem({itemClass: 'scope-filter', anchorClass: scopeFilterData21.styleClass, label: scopeFilterData21.label, link: scopeFilterData21.link});
      }
    }
    if (opt_data.createActions) {
      var createActionList30 = opt_data.createActions;
      var createActionListLen30 = createActionList30.length;
      for (var createActionIndex30 = 0; createActionIndex30 < createActionListLen30; createActionIndex30++) {
        var createActionData30 = createActionList30[createActionIndex30];
        output += JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedSelectableItem({itemClass: 'create-scope-action', anchorClass: createActionData30.styleClass, label: createActionData30.label, link: createActionData30.link});
      }
    }
    output += '</ul>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedScopeList.soyTemplateName = 'JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedScopeList';
}


JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedSelectableItem = function(opt_data, opt_ignored) {
  return '<li class="' + soy.$$escapeHtml(opt_data.itemClass) + '"><a href="' + soy.$$escapeHtml(opt_data.link) + '" title="' + soy.$$escapeHtml(opt_data.label) + '"' + ((opt_data.anchorClass) ? ' class="' + soy.$$escapeHtml(opt_data.anchorClass) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.label) + '</a></li>';
};
if (goog.DEBUG) {
  JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedSelectableItem.soyTemplateName = 'JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedSelectableItem';
}
;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:collapsed-scope-filter', location = '/sidebar/scopefilter/model.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ScopeFilter"),JIRA.Projects.Sidebar.ScopeFilter.Model=function(e){this.selectedScope=e.selectedScope,this.createScopeActions=e.createScopeActions,this.selectedScope?this.selectableScopes=_.reject(e.scopes,function(e){return e.label===this.selectedScope.label&&e.link===this.selectedScope.link},this):this.selectableScopes=e.scopes;var t=this.createScopeActions.length>0,c=this.selectableScopes.length>0;this.displayWhenSidebarIsCollapsed=t||c},JIRA.Projects.Sidebar.ScopeFilter.Model.prototype.getSelectedScope=function(){return this.selectedScope},JIRA.Projects.Sidebar.ScopeFilter.Model.prototype.getSelectableScopes=function(){return this.selectableScopes},JIRA.Projects.Sidebar.ScopeFilter.Model.prototype.getCreateScopeActions=function(){return this.createScopeActions},JIRA.Projects.Sidebar.ScopeFilter.Model.prototype.shouldDisplayWhenSidebarIsCollapsed=function(){return this.displayWhenSidebarIsCollapsed}}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:collapsed-scope-filter', location = '/sidebar/scopefilter/collapsed-view.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ScopeFilter"),JIRA.Projects.Sidebar.ScopeFilter.CollapsedView=JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedScopeList,serializeData:function(){return{selectedScope:this.model.getSelectedScope(),selectableScopes:this.model.getSelectableScopes(),createActions:this.model.getCreateScopeActions()}},onRender:function(){this.unwrapTemplate()}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:collapsed-scope-filter', location = '/sidebar/scopefilter/collapsed-controller.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ScopeFilter"),JIRA.Projects.Sidebar.ScopeFilter.CollapsedController=JIRA.Projects.Libs.Marionette.Controller.extend({initialize:function(e){this.scopeFilter=e.scopeFilter;var t=JIRA.Projects.Libs.Marionette.Region.extend({attachHtml:function(e){this.$el.empty().append(e.$el)}});this.collapsedScopeFilterContainer=new t({el:e.collapsedScopeFilterContainer})},render:function(){var e=new JIRA.Projects.Sidebar.ScopeFilter.CollapsedView({model:this.scopeFilter});this.collapsedScopeFilterContainer.show(e)},remove:function(){this.collapsedScopeFilterContainer.empty(),this.collapsedScopeFilterContainer.$el.empty()}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:collapsed-scope-filter', location = '/sidebar/scopefilter/collapsed-initializer.js' */
!function(){"use strict";function e(e){var i=AJS.$(JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedContainer());return e.prepend(i),i}function i(e,i){e.on("collapse-start",function(){i.render(),JIRA.trace("sidebar.scopefilter.collapsed")}),e.on("expand-end",function(){i.remove()})}AJS.namespace("JIRA.Projects.Sidebar.ScopeFilter"),JIRA.Projects.Sidebar.ScopeFilter.CollapsedInitializer=JIRA.Projects.Libs.Marionette.Controller.extend({initialize:function(e){this.sidebarAPI=e.sidebarAPI,this.scopeFilterData=e.scopeFilterData,this.$sidebarContentContainer=e.$sidebarContentContainer},run:function(){if(this.sidebarAPI.isProjectSidebar()){var t=new JIRA.Projects.Sidebar.ScopeFilter.Model(this.scopeFilterData);if(t.shouldDisplayWhenSidebarIsCollapsed()){var r=e(this.$sidebarContentContainer),o=new JIRA.Projects.Sidebar.ScopeFilter.CollapsedController({scopeFilter:t,collapsedScopeFilterContainer:r});i(this.sidebarAPI,o),this.sidebarAPI.isCollapsed()&&o.render()}}}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:collapsed-scope-filter', location = '/sidebar/scopefilter/scope-filter-analytics.js' */
!function(){"use strict";function e(){var e=!0;AJS.$("body").on("click.expanded-filter-list","#sidebar-scope-filter-list a",function(e){n(AJS.$(e.target))}),AJS.$("body").on("aui-dropdown2-show","#sidebar-scope-filter-list",function(){o(e)}),AJS.$("body").on("aui-dropdown2-hide","#sidebar-scope-filter-list",function(){a(e)})}function i(){var e=!1;AJS.$("body").on("click.collapsed-filter-list","aui-inline-dialog#sidebar-submenu1 a",function(e){t(AJS.$(e.target))}),AJS.$("body").on("aui-show","aui-inline-dialog#sidebar-submenu1",function(){o(e)}),AJS.$("body").on("aui-hide","aui-inline-dialog#sidebar-submenu1",function(){a(e)})}function n(e){if(1===e.parent().parent().parent().index())c(!0);else{var i=e.parent().index(),n=e.data("scope-filter-id");r(!0,n,i)}}function t(e){if(e.parent().hasClass("create-scope-action"))c(!1);else{var i=e.parent().index(),n=JIRA.Projects.Sidebar.ScopeFilter.Analytics.scopes[i].id,t=i-1;r(!1,n,t)}}function o(e){s("","open",{expanded:e})}function a(e){s("","close",{expanded:e})}function c(e){s("create","click",{expanded:e})}function r(e,i,n){s("scope","click",{expanded:e,scopeId:i,scopePosition:n})}function s(e,i,n){var t="sidebar.scopeFilter"+(e?"."+e:"");d.trackEvent(t,i,n)}var d=require("jira/components/analytics-tracker/tracker");AJS.namespace("JIRA.Projects.Sidebar.ScopeFilter.Analytics"),JIRA.Projects.Sidebar.ScopeFilter.Analytics={initScopeFilterAnalytics:function(n){this.scopes=n,e(),i()}}}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:collapsed-scope-filter', location = '/sidebar/scopefilter/collapsed-init.js' */
!function(){"use strict";JIRA.API.getSidebar().done(function(e){var t=WRM.data.claim("scope-filter-data");if(t){var i=new JIRA.Projects.Sidebar.ScopeFilter.CollapsedInitializer({sidebarAPI:e,scopeFilterData:t,$sidebarContentContainer:e.getContentContainer()});i.run(),JIRA.Projects.Sidebar.ScopeFilter.Analytics.initScopeFilterAnalytics(t.scopes)}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-last-visited', location = '/sidebar/lastvisited/last-visited-sidebar-util.js' */
define("jira/projects/sidebar/lastvisited/last-visited-sidebar-util",["exports"],function(e){"use strict";function t(e,i){var r=i.findParentOf(e,!0);if(!r)return e;var n=i.findParentOf(r.id,!0);return n?t(r.id,i):e}e.getParentTopLevelNavItemId=t});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-last-visited', location = '/sidebar/lastvisited/last-visited-updater.js' */
define("jira/projects/sidebar/lastvisited/updater",["jquery","jira/projects/sidebar/lastvisited/last-visited-sidebar-util","jira/featureflags/simplified-ux-feature-manager"],function(e,t,i){"use strict";function a(e){return s.indexOf(e)>-1}function r(t,r,n){if(!i.isAdg3ModeOn()||!a(r)){n=n||function(){};var s=function(){JIRA.trace("last.visited.item.saved")};e.ajax({url:AJS.contextPath()+"/rest/projects/1.0/project/"+encodeURIComponent(t)+"/lastVisited",type:"PUT",contentType:"application/json",data:JSON.stringify({id:r})}).done(function(){n(),s()})}}function n(e,i,a,n){var s=t.getParentTopLevelNavItemId(i,a);s&&r(e,s,n)}var s=["com.atlassian.jira.jira-projects-issue-navigator:sidebar-issue-navigator"];return{start:function(e,t){var a=JIRA.API&&JIRA.API.Projects&&JIRA.API.Projects.getCurrentProjectKey()||null;if(a){var s=e.getSelectedNavigationItem(!0);s&&s.getId()&&(i.isAdg3ModeOn()?n(a,s.getId(),e,t):r(a,s.getId(),t)),i.isAdg3ModeOn()?e.on("before:select",function(i){n(a,i.target.getId(),e,t)},!0):(e.on("before:navigate:prevented",function(e){r(a,e.emitter.id,t)},!0),e.on("before:select",function(e){e.isInitial&&r(a,e.emitter.id,t)},!0))}}}}),AJS.namespace("JIRA.Projects.Sidebar.LastVisited.Updater",null,require("jira/projects/sidebar/lastvisited/updater"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-init-adg3', location = '/sidebar/main-adg3.js' */
require(["jira/projects/sidebar/lastvisited/updater","jira/featureflags/simplified-ux-feature-manager"],function(e,i){"use strict";i.isGlobalSidebarEnabled()&&JIRA.API.getSidebar().done(function(i){i.isProjectSidebar(!0)&&e.start(i)})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts-init', location = '/sidebar/project-shortcuts/project-shortcuts-analytics.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Analytics");var t="a.project-shortcuts-group__link",e=AJS.DarkFeatures.isEnabled("com.atlassian.jira.projects.ProjectCentricNavigation.ProjectShortcutIcons"),i=require("jira/api/projects");JIRA.Projects.Sidebar.ProjectShortcuts.Analytics={initialize:function(){},initShortcutClick:function(c,o){var r=AJS.sidebar(o),n=AJS.$(c),s=this;n.on("click",t,function(c){var o=n.find(t),d=AJS.$(this);i.getCurrentProjectId(),i.getCurrentProjectType();s._triggerAnalyticsEvent("jira.projects.shortcut.clicked",{shortcutId:d.data("shortcutId"),shortcutPosition:d.closest("li").index()+1,shortcutIconName:e?d.find(".aui-icon").data("projectShortcutsIconId"):"",shortcutCount:o.size(),isWithIcons:e,isSidebarCollapsed:r.isCollapsed(),projectId:s.projectId,projectType:s.projectType})})},initDialogActions:function(t){var i=this,c=function(t,c){var o=t.collection.indexOf(t)+1;return{isWithIcons:e,isSave:c,shortcutId:t.get("id"),shortcutPosition:o,shortcutCount:t.collection.size(),projectId:i.projectId,projectType:i.projectType}};t.on("childview:dropdown:click",function(t,e){i._triggerAnalyticsEvent("jira.projects.shortcut.dropdown.clicked",c(e,!1))}),t.on("childview:edit:open",function(t,e){i._triggerAnalyticsEvent("jira.projects.shortcut.edit.dialog.opened",c(e,!1))}),t.on("childview:edit:close",function(t,e,o){i._triggerAnalyticsEvent("jira.projects.shortcut.edit.dialog.closed",c(e,o))}),t.on("childview:delete:open",function(t,e){i._triggerAnalyticsEvent("jira.projects.shortcut.delete.dialog.opened",c(e))}),t.on("childview:delete:close",function(t,e,o){i._triggerAnalyticsEvent("jira.projects.shortcut.delete.dialog.closed",c(e,o))}),t.on("add:open",function(){i._triggerAnalyticsEvent("jira.projects.shortcut.add.dialog.opened",{isWithIcons:e,projectId:i.projectId,projectType:i.projectType})}),t.on("add:close",function(t){i._triggerAnalyticsEvent("jira.projects.shortcut.add.dialog.closed",{isWithIcons:e,isSave:t,projectId:i.projectId,projectType:i.projectType})})},iconChanged:function(t,e,i){this._triggerAnalyticsEvent("jira.projects.shortcut.icon.changed",{iconName:e,oldIconName:i,shortcutId:t.isNew()?"":t.get("id"),isNew:t.isNew(),cid:t.cid,projectId:this.projectId,projectType:this.projectType})},iconChangeConfirmed:function(t,e){this._triggerAnalyticsEvent("jira.projects.shortcut.icon.confirmed",{oldIconName:t.get("icon"),iconName:e,shortcutId:t.isNew()?"":t.get("id"),isNew:t.isNew(),cid:t.cid,projectId:this.projectId,projectType:projectType})},iconPickerOpened:function(t){this._triggerAnalyticsEvent("jira.projects.shortcut.icon.picker.opened",{shortcutId:t.isNew()?"":t.get("id"),isNew:t.isNew(),cid:t.cid,projectId:this.projectId,projectType:this.projectType})},iconPickerClosed:function(t,e){this._triggerAnalyticsEvent("jira.projects.shortcut.icon.picker.closed",{shortcutId:t.isNew()?"":t.get("id"),isNew:t.isNew(),cid:t.cid,isSave:e,projectId:this.projectId,projectType:this.projectType})},_triggerAnalyticsEvent:function(t,e){AJS.trigger("analyticsEvent",{name:t,data:e})}}}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts-init', location = '/sidebar/project-shortcuts/project-shortcuts-init.js' */
require(["jira/featureflags/simplified-ux-feature-manager"],function(t){t.isAdg3ModeOn()||JIRA.API.getSidebar().done(function(){var t=WRM.data.claim("com.atlassian.jira.projects.shortcuts:project-id"),r=JIRA.API.Projects.getCurrentProjectType();if(JIRA.Projects.Sidebar.ProjectShortcuts.Analytics.initialize(t,r),WRM.data.claim("com.atlassian.jira.projects.shortcuts:can-manage")){var e=WRM.data.claim("com.atlassian.jira.projects.shortcuts:with-icons");e&&JIRA.Projects.Sidebar.ProjectShortcuts.Services.AvailableIcons.initialize(WRM.data.claim("com.atlassian.jira.projects.shortcuts:icons-list")),JIRA.Projects.Sidebar.ProjectShortcuts.Services.AvailableIcons.setWithIcons(e);var c=JIRA.API.Projects.getCurrentProjectKey(),s=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcuts(WRM.data.claim("com.atlassian.jira.projects.shortcuts:shortcuts"),{projectKey:c}),a=new JIRA.Projects.Sidebar.ProjectShortcuts.Views.List({collection:s,targetGroup:"project-shortcuts-group"});a.render(),JIRA.Projects.Sidebar.ProjectShortcuts.Analytics.initDialogActions(a)}JIRA.Projects.Sidebar.ProjectShortcuts.Analytics.initShortcutClick(".project-shortcuts-list",".aui-sidebar")})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:report-page-assets', location = '/page/project/report/analytics.js' */
!function(t){"use strict";AJS.namespace("JIRA.Projects.Report"),JIRA.Projects.Report.Analytics=function(){t(".reports .reports__list__report").on("click",function(r){var e=t(this);AJS.trigger("analyticsEvent",{name:"jira.projects.report.clicked",data:{report:e.attr("data-report-key"),category:e.closest("ul").attr("data-category-key"),listPosition:e.closest("li").prevAll().length+1}})})},t(JIRA.Projects.Report.Analytics)}(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:reports-link-storage', location = '/sidebar/reports/reports-link-storage.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar.Reports"),JIRA.Projects.Sidebar.Reports={storeLastViewedReportLink:function(e,r){if(JIRA.API.Sidebar&&JIRA.API.Sidebar.isProjectSidebar()||r&&r.isProjectSidebar(!0)){var t=this._createLastViewedReportKey(r);require("jira/data/local-storage").setItem(t,e),this._setReportsItemLink(e,r)}JIRA.trace("jira.projects.sidebar.reports.link.stored")},restoreLastViewedReportLink:function(e){if(JIRA.API.Sidebar&&JIRA.API.Sidebar.isProjectSidebar()||e&&e.isProjectSidebar(!0)){var r=this._createLastViewedReportKey(e),t=require("jira/data/local-storage").getItem(r);t&&this._setReportsItemLink(t,e)}JIRA.trace("jira.projects.sidebar.reports.link.restored")},removeLastViewedReportLink:function(e){if(JIRA.API.Sidebar&&JIRA.API.Sidebar.isProjectSidebar()||e&&e.isProjectSidebar(!0)){var r=this._createLastViewedReportKey(e);require("jira/data/local-storage").removeItem(r)}JIRA.trace("jira.projects.sidebar.reports.link.remove")},getLastViewedReportLink:function(e){if(JIRA.API.Sidebar&&JIRA.API.Sidebar.isProjectSidebar()||e&&e.isProjectSidebar(!0)){var r=this._createLastViewedReportKey(e),t=require("jira/data/local-storage").getItem(r);if(t)return t}return""},_createLastViewedReportKey:function(e){var r=JIRA.API.Sidebar?JIRA.API.Sidebar.getSelectedScopeFilterId():e?e.getSelectedScopeFilterId(!0):"",t=JIRA.API.Projects.getCurrentProjectKey()||AJS.Meta.get("project-key")||"uc.context",i="last.viewed.report."+t;return r&&(i+="."+r),i},_setReportsItemLink:function(e,r){if(!JIRA.API.Sidebar)return"";var t=JIRA.API.Sidebar.getGroup("sidebar-navigation-panel"),i=t.getItem("com.atlassian.jira.jira-projects-plugin:report-page");"undefined"==typeof i&&(i=t.getItem("com.pyxis.greenhopper.jira:global-sidebar-report")),i&&i.attr("href",e)}}}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:reports-link', location = '/sidebar/reports/reports-link.js' */
define("jira/projects/sidebar/reports/reports-link",["jira/featureflags/simplified-ux-feature-manager","underscore"],function(e,t){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ReportsLink"),JIRA.Projects.Sidebar.ReportsLink={CONSTANT:{REPORTS_NAVGROUP_IDS:["com.atlassian.jira.jira-projects-plugin:report-page","com.pyxis.greenhopper.jira:user-container-sidebar-report"],COMPARE_PARAMS:["chart","rapidView","view"],AGILE_SECTION_IN_UC_SIDEBAR_ID:"uc_report_agile_sidebar_links",OVERVIEW_PAGE_REGEX:/projects\/.+selectedItem=com.atlassian.jira.jira-projects-plugin:report-page/i},_location:function(){if("undefined"!=typeof window)return window.location},_isSameReport:function(e,r){var i=this._getUrlParams(e),n=this._getUrlParams(r);return t.filter(this.CONSTANT.COMPARE_PARAMS,function(e){return i[e]&&n[e]&&i[e]===n[e]}).length===this.CONSTANT.COMPARE_PARAMS.length},_getUrlParams:function(e){var t=e.split("?");try{return 1===t.length?{}:JSON.parse('{"'+t[1].replace(/#.*$/,"").replace(/&/g,'","').replace(/=/g,'":"')+'"}',function(e,t){return""===e?t:decodeURIComponent(t)})}catch(e){return{}}},handleOverviewPage:function(t){var r=this.CONSTANT.OVERVIEW_PAGE_REGEX.test(this._location().href);r&&e.isAdg3ModeOn()&&JIRA.Projects.Sidebar.Reports.removeLastViewedReportLink(t)},handleNonAgileReports:function(t){var r=this._location().pathname,i=0===r.indexOf(AJS.contextPath()+"/secure/ConfigureReport");if(i&&(JIRA.Projects.Sidebar.Reports.removeLastViewedReportLink(t),e.isAdg3ModeOn())){var n=this._location().href.replace(/^.*\/\/[^\/]+/,"");JIRA.Projects.Sidebar.Reports.storeLastViewedReportLink(n,t)}},handleAdg2:function(e){JIRA.Projects.Sidebar.Reports.restoreLastViewedReportLink(e)},handleClickingOnReports:function(e,r){if(t.contains(this.CONSTANT.REPORTS_NAVGROUP_IDS,r.target.getId(!0))){var i=AJS.contextPath(),n=JIRA.API.Projects.getCurrentProjectKey()||AJS.Meta.get("project-key"),a=this._location().href.replace(/^.*\/\/[^\/]+/,""),o=JIRA.Projects.Sidebar.Reports.getLastViewedReportLink(e);if(n){var s=i+"/projects/"+n+"?selectedItem=com.atlassian.jira.jira-projects-plugin:report-page";o=o||s}else{var c=e.getGroup(this.CONSTANT.AGILE_SECTION_IN_UC_SIDEBAR_ID,!0);!o&&c&&c.links&&c.links.length&&(o=c.links[0].url)}o===a||this._isSameReport(o,a)||(r.preventDefault(),this._location().assign(o))}},handleSwitchingBoards:function(e,t){e.preventDefault(),AJS.$.ajax({url:AJS.contextPath()+"/rest/greenhopper/1.0/rapidview/addtohistory",type:"POST",data:JSON.stringify({rapidViewId:t.id}),dataType:"json",contentType:"application/json"}).done(function(){JIRA.Projects.Sidebar.ReportsLink._location().reload()})},handleReportsLink:function(t){if(this.handleOverviewPage(t),this.handleNonAgileReports(t),this.handleAdg2(t),e.isAdg3ModeOn()){var r=this;t.on("before:nested",function(e){r.handleClickingOnReports(t,e)},!0);var i=this.CONSTANT.OVERVIEW_PAGE_REGEX.test(this._location().href),n=this._location().pathname,a=0===n.indexOf(AJS.contextPath()+"/secure/ConfigureReport");(i||a)&&t.on("scope-switcher:before:navigate",this.handleSwitchingBoards,!0)}}}});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:reports-link-init', location = '/sidebar/reports/reports-link-init.js' */
AJS.$(function(){"use strict";require("jira/projects/sidebar/reports/reports-link"),JIRA.API.getSidebar().done(function(e){JIRA.Projects.Sidebar.ReportsLink.handleReportsLink(e)})});;
;
/* module-key = 'com.atlassian.jira.jira-one-click-invite-plugin:one-click-invite-init', location = 'js/sidebar/one-click-invite/one-click-invite-init.js' */
AJS.toInit(function(){var i=WRM.data.claim("com.atlassian.jira.jira-one-click-invite-plugin:one-click-invite-init.is-ondemand-data-provider");i&&WRM.require("wrc!com.atlassian.jira.jira-one-click-invite-plugin:one-click-invite")});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-ads-plugin:jira-ads-plugin-resources', location = '/js/jira-ads-plugin.js' */
AJS.toInit(function(c){var d=Class.extend({init:function(f){var h=f.find(".ads"),g=this;this._fireShowEvent=_.debounce(_.bind(this._fireShowEvent,this),2500);this._bindShowEvent();this._fireShowEvent(h);f.on("click",".click-ad-analytics",i);f.on("click",".adContainer .icon-close",e);function e(){var k=c(this).closest(".adContainer"),j=k.attr("data-id");g._dismissForUserForGood(j);k.remove()}function i(){var l=c(this),m=l.data("link-id"),j=l.closest(".adContainer").attr("data-id"),k=l.closest(".ads").data("issuetypeid");g._raiseAnalyticsEvent(j,k,m)}},_bindShowEvent:function(){var e=this;JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(g,f){if(f.hasClass("ads")){e._fireShowEvent(f)}})},_fireShowEvent:function(g){var f=g.data("issuetypeid"),e=this;g.find(".adContainer").each(function(){var h=c(this).attr("data-id");e._raiseAnalyticsEvent(h,f,"show")})},_raiseAnalyticsEvent:function(e,f,h){var g={name:"jiraads."+e+"."+h,data:{issueTypeId:f,adLocation:"viewIssue"}};AJS.trigger("analyticsEvent",g)},_dismissForUserForGood:function(e){c.ajax({url:AJS.contextPath()+"/rest/recommendations/latest/configuration/"+encodeURIComponent(e)+"/dismiss",type:"PUT"})}});var b=Class.extend({init:function(e){this._attachContactDetailsPopup(e)},_attachContactDetailsPopup:function(e){AJS.InlineDialog(".adContainer #contactLicensee","contactLicensee",function(i,g,j){var f=c(g),h=f.closest(".adContainer");i.html(h.find(".contactLicenseePopup").html());j()},{container:e,closeOthers:false,useLiveEvents:true})}});var a=c("#page");new d(a);new b(a)});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-base', location = 'js/i18n.js' */
define("dndattachment/i18n",function(){var t={"dnd.attachment.unsupported.browser":"Drag and Drop of attachments is currently only available for the following browsers:","dnd.attachment.file.is.too.large":"File exceeds maximum size limit set by the administrator ({0}).","dnd.attachment.upload.in.progress":"Upload in progress, please wait.","dnd.attachment.not.uploaded":function(t){return AJS.format("File \"{0}\" was not uploaded",t)},"dnd.attachment.unauthorized":"You are not authorized, session has expired or connection is lost.","dnd.attachment.internal.server.error":"An internal error has occurred. Please contact your administrator.","dnd.attachment.upload.aborted":"Upload was aborted.","dnd.attachment.upload.remove":"Remove attachment"};return function(n){if(t[n])return t[n];throw"Unknown key: "+n}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-base', location = 'js/TemporaryAttachments.js' */
define("dndattachment/TemporaryAttachments",[],function(){var t={};return{createAttachment:function(t,e,n,a){return{id:t,name:e,type:n,file:a}},getAttachment:function(e,n){return t[e]||this.createAttachment(e,n)},putAttachment:function(e,n){return t[e]=this.createAttachment(e,n.name,n.type,n)}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-base', location = 'js/Parser.js' */
define("dndattachment/Parser",["dndattachment/aui","jquery"],function(e,n){function r(e){var r=n(e).find(a).add(e.filter(a)),d=r.addClass(t).map(function(e,r){var t=new n.Deferred;return require([n(r).attr("duiType")],function(e){"function"==typeof e?t.resolve(new e(r)):t.reject()}),t});return n.when.apply(window,n.makeArray(d))}var t="-dui-type-parsed",a="*[duiType]:not(."+t+")";return JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(e,n,t){r(n)}),n.isReady?r(n("body")):n(function(){r(n("body"))}),{parse:r}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-base', location = 'js/dropzones/IssueDropZone.js' */
define("dndattachment/dropzones/IssueDropZone",["jquery","jira/flag","dndattachment/Parser","dndattachment/aui","dndattachment/JIRA","dndattachment/i18n","dndattachment/TemporaryAttachments","dndattachment/util/DataTransfer","dndattachment/ctrlv/utility"],function(e,t,n,i,s,r,a,o,d){var u=5e3,l=["An internal error has occurred. Please contact your administrator."],h=Class.extend({eventGroup:"issuedropzone",progressBarType:"dndattachment/progressbars/UploadProgressBar",init:function(t){return this.$node=e(t),this.isSupportedBrowser()?(this.$node.parents(".mod-content")&&this.$node.parents(".mod-content").addClass("issue-drop-zone"),this.uploadLimit=this.$node.data("upload-limit"),this.uploadSize=this.$node.data("upload-size"),this.formToken=this.$node.data("form-token"),this.attachFileUrl=contextPath+"/secure/AttachFile.jspa",this.pendingQueue=[],this.render(),void this.queueEvent("init")):this.renderUnsupported()},queueTask:function(t){this.pendingQueue.push(t),t.always(function(){this.pendingQueue.splice(this.pendingQueue.indexOf(t),1)}.bind(this)),this.markDirty(!0),e.when.apply(window,this.pendingQueue).always(_.debounce(this.checkMarkDirty,!1,!0).bind(this))},render:function(){this.$node.html(s.Templates.DnDAttachmentPlugin.IssueDropZone({})),this.fileInput=this.$node.find(".issue-drop-zone__file"),this.fileButton=this.$node.find("button.issue-drop-zone__button"),this.connectListeners(),s.trace("jira.issue.dnd.issuedropzone.render")},addHandlerToBrowseLink:function(){this.fileButton.click(this.browseLinkHandler.bind(this))},browseLinkHandler:function(e){e.preventDefault(),this.fileInput.click()},connectListeners:function(){this.fileInput.change(function(e){this.handleFilesReceived(this.fileInput[0].files),this.queueEvent("fileInput",{count:this.fileInput[0].files.length}),this.fileInput.attr("value",null)}.bind(this)),this.addHandlerToBrowseLink();var t=this.$node.parents(".issue-drop-zone").length>0?this.$node.parents(".issue-drop-zone"):this.$node;this.$dropTarget=t.find(">*").andSelf(),this.$dropTarget.on("dragover dragenter drop",function(n){if(n.preventDefault(),n.stopPropagation(),t.addClass("dragover"),"drop"==n.type){t.removeClass("dragover"),e(document).trigger("dropHandled");var i=new o(n.dataTransfer);i.getFiles().then(function(e){this.handleFilesReceived(e),this.queueEvent("fileDrop",{count:e.length})}.bind(this))}}.bind(this)),this.$dropTarget.on("dragleave",function(){t.removeClass("dragover")}.bind(this))},configureUploadProgressBar:function(e,t){e.data("upload-size",this.uploadSize).data("file",t).data("form-token",this.formToken)},createUploadProgressBar:function(t){var i=e('<div duiType="'+this.progressBarType+'" class="upload-progress-bar"></div>');return this.configureUploadProgressBar(i,t),n.parse(i).then(function(e){this.placeUploadProgressBar(i,e),this.handleNewProgressBar(e)}.bind(this))},placeUploadProgressBar:function(e){return e.insertAfter(this.$node)},handleNewProgressBar:function(e){},handleFilesReceived:function(e){this.uploadFiles(e)},uploadFiles:function(n){var r=new e.Deferred,a=[],o=s.Issues.Api.getSelectedIssueKey(),d=s.Issues.Api.getSelectedIssueId(),l=i.Meta.get("viewissue-permlink"),h=e("#summary-val input").attr("value")||e("#summary-val").text(),c=s.Templates.DnDAttachmentPlugin.SuccessMessageLink({issueLink:l,issueKey:o,issueSummary:h}),p=_.map(n,function(t){var n=new e.Deferred;return this.createUploadProgressBar(t).then(function(e){this.trigger("progressBarInserted",e),a.push(e),e.uploadFile(t,this.uploadLimit).then(n.resolve.bind(n),n.resolve.bind(n)).done(function(){this.trigger("uploadFinished",e)}.bind(this)).fail(function(){s.trace("jira.issue.dnd.upload.fail"),r.reject(arguments)})}.bind(this)),n}.bind(this)),f=e.when.apply(window,p);return f.done(function(){var e=_.filter(1==p.length?[arguments]:arguments,function(e){return e&&e[0]&&e[0].id}).map(function(e){return e[0].id});0!=e.length&&this.commitUpload(e,d).done(function(){_.delay(function(){a.some(function(e){e.getAutoDestroy()&&(e.destroy(),this.queueEvent("autoDestroy"))}.bind(this))}.bind(this),u);var e=_.filter(a,function(e){return e.result.isResolved()});if(1==e.length){var n=e[0].getFileName();t.showSuccessMsg("",i.format("{0} was attached successfully to {1}.",n,c))}else e.length>1&&t.showSuccessMsg("",i.format("{0} files were attached successfully to {1}.",e.length,c));r.resolve(_.map(e,function(e){return e.file.name}))}.bind(this)).fail(function(e,t){r.reject(e,t),e&&e.forEach(function(e){a.forEach(function(t){t.reportError(e)})}),t&&a.forEach(function(e){var n=t["#"+e.getFileID()]||t[e.getFileName()];n&&e.reportError(n)}),s.trace("jira.issue.dnd.commit.fail")})}.bind(this)),this.queueTask(f),r},loadAttachments:function(e){e.forEach(function(e){this.createUploadProgressBar(e.file).then(function(t){t.setFileID(e.id),t.setFileName(e.name),t.setFileSize(e.size),t.setProgress(1),t.setFinished(),this.trigger("uploadFinished",t)}.bind(this))},this)},commitUpload:function(t,n){return new e.Deferred},attachFile:function(t,n){var i=new e.Deferred;return s.SmartAjax.makeRequest({type:"POST",url:this.attachFileUrl,data:{inline:!0,id:n||s.Issue.getIssueId(),filetoconvert:t,atl_token:atl_token(),formToken:this.formToken},dataType:"json"}).done(i.resolve.bind(i)).fail(function(e){try{var t=JSON.parse(e.responseText);i.reject(t.errorMessages||l,t.errors)}catch(e){i.reject(l)}}),i},isSupportedBrowser:function(){if(e("html.webkit")[0]||e("html.safari")[0]){if(!(parseFloat(e.browser.version)>=537))return!1}else if(e("html.mozilla")[0]){if(!(parseFloat(e.browser.version)>=1.9))return!1}else{if(!e("html.msie")[0])return!1;if(!(parseFloat(e.browser.version)>=10))return!1}return!0},renderUnsupported:function(){this.$node.addClass("issue-drop-zone__not-supported").text(r("dnd.attachment.unsupported.browser")).append("<ul><li>FireFox 3.6+</li><li>Chrome 5+</li><li>Safari 5</li></ul>")},markDirty:function(e){this.$node.addClass(s.DirtyForm.ClassNames.SANCTIONED),this.$node.toggleClass(s.DirtyForm.ClassNames.EXEMPT,!e),this.$node.attr("value",!1),this.$node.attr("defaultValue",!0)},checkMarkDirty:function(){0==this.pendingQueue.length&&this.markDirty(!1)},queueEvent:function(e,t){i.trigger("analytics",{name:"issue.dnd.attachment."+this.eventGroup+"."+e,data:t||{}})}});return h});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:drag-and-drop-attachment-javascript-init', location = 'js/initIssueDropZone.js' */
require(["dndattachment/Parser","jquery","dndattachment/dropzones/IssueDropZone","dndattachment/upload/handler","dndattachment/upload/default/executor","dndattachment/aui","dndattachment/TemporaryAttachments","dndattachment/util/Configuration","dndattachment/util/FileSizeUtil"],function(t,e,n,a,o,i,r,d,s){function u(n,o){var i=n.find(".field-group.file-input-list");if(0!=i.size()&&!(i.find('*[duiType*="'+o+'"]').length>0)){var d=i.find("input[name=filetoconvert]:checked").map(function(t,n){return r.getAttachment(n.value,e(n).siblings("label").text())}).toArray(),u=i.find(".description:last-child").html();i.empty();var c=e(JIRA.Templates.DnDAttachmentPlugin[o]({uploadLimit:s.format(m),jiraAttachmentSize:m,description:u}));t.parse(c.appendTo(i)).then(function(t){null!=t&&(t.loadAttachments(d),a.setCurrentDropZone(t))})}}function c(t,n){var o=function(){u(t.$popupContent,n)};t.$popup&&t.$popup.is(":visible")?o():t.onContentReady(o),e(t).bind("Dialog.hide",function(){a.disconnectCurrentDropZone()})}function l(n){var o=n&&"attachmentmodule"==n.attr("id")&&e(".mod-content:not(.issue-drop-zone)",n);if(o&&o.size()>0){if(0==n.find("#add-attachments-link").length)return;o.addClass("issue-drop-zone");var i=e(JIRA.Templates.DnDAttachmentPlugin.AttachmentsDropZone({uploadLimit:s.format(m),jiraAttachmentSize:m}));t.parse(i.prependTo(o)).then(function(t){p&&p.disconnectContainer(),p=t,a.setAttachmentDropZone(t)})}}if(n.prototype.isSupportedBrowser()){var p,m=d.getWRM("upload-limit"),h=function(){JIRA.Dialogs.attachFile&&c(JIRA.Dialogs.attachFile,"AttachFilesDropZone");var t=["create-issue-dialog","create-subtask-dialog","edit-issue-dialog"],n=function(e,n,a){_.contains(t,n.attr("id"))&&c(a,"CreateIssueDropZone")};e(i).on("Dialog.show",n),JIRA.Dialog.current&&n(null,JIRA.Dialog.current.$popup,JIRA.Dialog.current),JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(t,e,n){u(e,"CreateIssueDropZone"),l(e)});var r=e("form#issue-create, form#issue-edit");r.size()>0&&u(r,"CreateIssueDropZone"),a.initialize(),a.registerExecutor(o),l(e("#attachmentmodule"));var d="issue-drop-zone-document__dragover";e(document).on("dragover dragenter",function(){e("body").addClass(d)}),e(document).on("dragleave drop dropHandled",function(){e("body").removeClass(d)})};e.isReady?h():i.$(h),e.event.props.push("dataTransfer")}});;
;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:soy-templates', location = 'viewissue/attachmentsblock.soy' */
// This file was automatically generated from attachmentsblock.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.ViewIssue.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.ViewIssue == 'undefined') { JIRA.Templates.ViewIssue = {}; }


JIRA.Templates.ViewIssue.renderAttachments = function(opt_data, opt_ignored) {
  return '' + ((opt_data.viewMode == 'list') ? JIRA.Templates.ViewIssue.fileAttachments(opt_data) : JIRA.Templates.ViewIssue.galleryAttachments(opt_data));
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.renderAttachments.soyTemplateName = 'JIRA.Templates.ViewIssue.renderAttachments';
}


JIRA.Templates.ViewIssue.fileAttachments = function(opt_data, opt_ignored) {
  var output = '<ol id="file_attachments" class="item-attachments" data-sort-key="' + soy.$$escapeHtml(opt_data.sortKey) + '" data-sort-order="' + soy.$$escapeHtml(opt_data.sortOrder) + '">';
  var fileAttachmentList14 = opt_data.attachments;
  var fileAttachmentListLen14 = fileAttachmentList14.length;
  for (var fileAttachmentIndex14 = 0; fileAttachmentIndex14 < fileAttachmentListLen14; fileAttachmentIndex14++) {
    var fileAttachmentData14 = fileAttachmentList14[fileAttachmentIndex14];
    output += JIRA.Templates.ViewIssue.fileAttachment(soy.$$augmentMap(opt_data, {fileAttachment: fileAttachmentData14}));
  }
  output += '</ol>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.fileAttachments.soyTemplateName = 'JIRA.Templates.ViewIssue.fileAttachments';
}


JIRA.Templates.ViewIssue.galleryAttachments = function(opt_data, opt_ignored) {
  var output = '<ol id="attachment_thumbnails" class="item-attachments" data-sort-key="' + soy.$$escapeHtml(opt_data.sortKey) + '" data-sort-order="' + soy.$$escapeHtml(opt_data.sortOrder) + '">';
  var imageAttachmentList25 = opt_data.attachments;
  var imageAttachmentListLen25 = imageAttachmentList25.length;
  for (var imageAttachmentIndex25 = 0; imageAttachmentIndex25 < imageAttachmentListLen25; imageAttachmentIndex25++) {
    var imageAttachmentData25 = imageAttachmentList25[imageAttachmentIndex25];
    output += JIRA.Templates.ViewIssue.imageAttachment(soy.$$augmentMap(opt_data, {imageAttachment: imageAttachmentData25}));
  }
  output += '</ol>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.galleryAttachments.soyTemplateName = 'JIRA.Templates.ViewIssue.galleryAttachments';
}


JIRA.Templates.ViewIssue.fileAttachment = function(opt_data, opt_ignored) {
  return '<li class="attachment-content js-file-attachment' + ((! opt_data.fileAttachment.latest) ? ' earlier-version' : '') + '" data-attachment-id="' + soy.$$escapeHtml(opt_data.fileAttachment.id) + '"' + JIRA.Templates.ViewIssue.renderAttachmentData({issue: opt_data.issue, attachment: opt_data.fileAttachment}) + '>' + ((opt_data.fileAttachment.expandable) ? JIRA.Templates.ViewIssue.zipFileAttachment(opt_data) : '<div class="attachment-thumb"><a href="' + soy.$$escapeHtml(opt_data.baseurl) + '/' + soy.$$escapeHtml('' + opt_data.fileAttachment.attachmentUrl) + '" draggable="true" data-downloadurl="' + soy.$$escapeHtml(opt_data.fileAttachment.mimeType) + ':' + soy.$$escapeHtml(opt_data.fileAttachment.fileName) + ':' + soy.$$escapeHtml(opt_data.fullBaseUrl) + '/' + soy.$$escapeHtml('' + opt_data.fileAttachment.attachmentUrl) + '"' + JIRA.Templates.ViewIssue.tagAttachment({attachment: opt_data.fileAttachment}) + '>' + JIRA.Templates.ViewIssue.renderAttachmentIcon(soy.$$augmentMap(opt_data, {mimetype: opt_data.fileAttachment.mimeType})) + '</a></div><dl>' + JIRA.Templates.ViewIssue.renderAttachmentInfo(soy.$$augmentMap(opt_data, {attachment: opt_data.fileAttachment})) + '</dl>') + '</li>';
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.fileAttachment.soyTemplateName = 'JIRA.Templates.ViewIssue.fileAttachment';
}


JIRA.Templates.ViewIssue.zipFileAttachment = function(opt_data, opt_ignored) {
  return '<div class="twixi-block collapsed expander"><div class="twixi-wrap verbose"><a href="#" class="twixi"><span class="icon-default aui-icon aui-icon-small aui-iconfont-expanded"><span>' + soy.$$escapeHtml('Hide') + '</span></span></a><div class="attachment-thumb"><a href="' + soy.$$escapeHtml(opt_data.baseurl) + '/' + soy.$$escapeHtml('' + opt_data.fileAttachment.attachmentUrl) + '" draggable="true" data-downloadurl="' + soy.$$escapeHtml(opt_data.fileAttachment.mimeType) + ':' + soy.$$escapeHtml(opt_data.fileAttachment.fileName) + ':' + soy.$$escapeHtml(opt_data.fullBaseUrl) + '/' + soy.$$escapeHtml('' + opt_data.fileAttachment.attachmentUrl) + '"' + JIRA.Templates.ViewIssue.tagAttachment({attachment: opt_data.fileAttachment}) + '>' + JIRA.Templates.ViewIssue.renderAttachmentIcon(soy.$$augmentMap(opt_data, {mimetype: opt_data.fileAttachment.mimeType})) + '</a></div><dl>' + JIRA.Templates.ViewIssue.renderAttachmentInfo(soy.$$augmentMap(opt_data, {attachment: opt_data.fileAttachment})) + '<dd class="zip-contents"><ol><li><div class="attachment-thumb"><img src="' + soy.$$escapeHtml(opt_data.baseurl) + '/images/icons/wait.gif" /></div>' + soy.$$escapeHtml('Extracting archive...') + '</li></ol></dd></dl></div><div class="twixi-wrap concise"><a href="#" class="twixi"><span class="icon-default aui-icon aui-icon-small aui-iconfont-collapsed"><span>' + soy.$$escapeHtml('Show') + '</span></span></a><div class="attachment-thumb"><a href="' + soy.$$escapeHtml(opt_data.baseurl) + '/' + soy.$$escapeHtml('' + opt_data.fileAttachment.attachmentUrl) + '" draggable="true" data-downloadurl="' + soy.$$escapeHtml(opt_data.fileAttachment.mimeType) + ':' + soy.$$escapeHtml(opt_data.fileAttachment.fileName) + ':' + soy.$$escapeHtml(opt_data.fullBaseUrl) + '/' + soy.$$escapeHtml('' + opt_data.fileAttachment.attachmentUrl) + '"' + JIRA.Templates.ViewIssue.tagAttachment({attachment: opt_data.fileAttachment}) + '>' + JIRA.Templates.ViewIssue.renderAttachmentIcon(soy.$$augmentMap(opt_data, {mimetype: opt_data.fileAttachment.mimeType})) + '</a></div><dl>' + JIRA.Templates.ViewIssue.renderAttachmentInfo(soy.$$augmentMap(opt_data, {attachment: opt_data.fileAttachment})) + '</dl></div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.zipFileAttachment.soyTemplateName = 'JIRA.Templates.ViewIssue.zipFileAttachment';
}


JIRA.Templates.ViewIssue.imageAttachment = function(opt_data, opt_ignored) {
  return '<li class="attachment-content js-file-attachment" draggable="true" data-downloadurl="' + soy.$$escapeHtml(opt_data.imageAttachment.mimeType) + ':' + soy.$$escapeHtml(opt_data.imageAttachment.fileName) + ':' + soy.$$escapeHtml(opt_data.fullBaseUrl) + '/' + soy.$$escapeHtml('' + opt_data.imageAttachment.attachmentUrl) + '"' + JIRA.Templates.ViewIssue.renderAttachmentData({issue: opt_data.issue, attachment: opt_data.imageAttachment}) + '><div class="attachment-thumb"><a href="' + soy.$$escapeHtml(opt_data.baseurl) + '/' + soy.$$escapeHtml('' + opt_data.imageAttachment.attachmentUrl) + '" title="' + soy.$$escapeHtml(opt_data.imageAttachment.fileName) + ' -' + ((opt_data.imageAttachment.latest) ? ' ' + soy.$$escapeHtml('Latest') : '') + ' ' + soy.$$escapeHtml(opt_data.imageAttachment.createdDateTime) + ((opt_data.imageAttachment.authorDisplayName) ? ' - ' + soy.$$escapeHtml(opt_data.imageAttachment.authorDisplayName) : '') + '"' + JIRA.Templates.ViewIssue.tagAttachment({attachment: opt_data.imageAttachment}) + '>' + ((opt_data.imageAttachment.thumbnailUrl != null) ? '<jira-attachment-thumbnail url="' + soy.$$escapeHtml('' + opt_data.imageAttachment.thumbnailUrl) + '" jira-url="' + soy.$$escapeHtml('' + opt_data.imageAttachment.jiraThumbnailUrl) + '" filename="' + soy.$$escapeHtml(opt_data.imageAttachment.fileName) + '"></jira-attachment-thumbnail>' : JIRA.Templates.ViewIssue.renderThumbnailIcon({mimetype: opt_data.imageAttachment.mimeType})) + '</a></div><dl ' + ((! opt_data.imageAttachment.latest) ? 'class="earlier-version"' : '') + '><dt>' + ((opt_data.imageAttachment.deletable) ? '<span class="blender blender-delete"></span><div class="attachment-delete"><a title="' + soy.$$escapeHtml('Delete this attachment') + '" id="del_' + soy.$$escapeHtml(opt_data.imageAttachment.id) + '" href="' + soy.$$escapeHtml(opt_data.baseurl) + '/secure/DeleteAttachment!default.jspa?id=' + soy.$$escapeHtml(opt_data.issue.id) + '&deleteAttachmentId=' + soy.$$escapeHtml(opt_data.imageAttachment.id) + '&from=issue"><span class="icon-default aui-icon aui-icon-small aui-iconfont-delete">' + soy.$$escapeHtml('Delete this attachment') + '</span></a></div>' : '<span class="blender"></span>') + '<a  href="' + soy.$$escapeHtml(opt_data.baseurl) + '/' + soy.$$escapeHtml('' + opt_data.imageAttachment.attachmentUrl) + '" class="attachment-title" title="' + soy.$$escapeHtml(opt_data.imageAttachment.fileName) + ' -' + ((opt_data.imageAttachment.latest) ? ' ' + soy.$$escapeHtml('Latest') : '') + ' ' + soy.$$escapeHtml(opt_data.imageAttachment.createdDateTime) + ((opt_data.imageAttachment.authorDisplayName) ? ' - ' + soy.$$escapeHtml(opt_data.imageAttachment.authorDisplayName) : '') + '"' + JIRA.Templates.ViewIssue.tagAttachment({attachment: opt_data.imageAttachment}) + '>' + soy.$$escapeHtml(opt_data.imageAttachment.fileName) + '</a></dt><dd class="attachment-size">' + soy.$$escapeHtml(opt_data.imageAttachment.fileSize) + '</dd><dd class="attachment-date"><time class="livestamp" datetime="' + soy.$$escapeHtml('' + opt_data.imageAttachment.createdIso8601) + '">' + soy.$$escapeHtml(opt_data.imageAttachment.createdDateTime) + '</time></dd></dl></li>';
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.imageAttachment.soyTemplateName = 'JIRA.Templates.ViewIssue.imageAttachment';
}


JIRA.Templates.ViewIssue.renderAttachmentInfo = function(opt_data, opt_ignored) {
  return '<dt class="attachment-title"><a href="' + soy.$$escapeHtml(opt_data.baseurl) + '/' + soy.$$escapeHtml('' + opt_data.attachment.attachmentUrl) + '" title="' + ((opt_data.attachment.latest) ? soy.$$escapeHtml('Latest') + ' ' : '') + ' ' + soy.$$escapeHtml(opt_data.attachment.createdDateTime) + ((opt_data.attachment.authorDisplayName) ? ' - ' + soy.$$escapeHtml(opt_data.attachment.authorDisplayName) : '') + '" draggable="true" data-downloadurl="' + soy.$$escapeHtml(opt_data.attachment.mimeType) + ':' + soy.$$escapeHtml(opt_data.attachment.fileName) + ':' + soy.$$escapeHtml(opt_data.fullBaseUrl) + '/' + soy.$$escapeHtml('' + opt_data.attachment.attachmentUrl) + '"' + JIRA.Templates.ViewIssue.tagAttachment(opt_data) + '>' + soy.$$escapeHtml(opt_data.attachment.fileName) + '</a></dt><dd class="attachment-delete">' + ((opt_data.attachment.deletable) ? '<a title="' + soy.$$escapeHtml('Delete this attachment') + '" id="del_' + soy.$$escapeHtml(opt_data.attachment.id) + '" href="' + soy.$$escapeHtml(opt_data.baseurl) + '/secure/DeleteAttachment!default.jspa?id=' + soy.$$escapeHtml(opt_data.issue.id) + '&deleteAttachmentId=' + soy.$$escapeHtml(opt_data.attachment.id) + '&from=issue"><span class="icon-default aui-icon aui-icon-small aui-iconfont-delete">' + soy.$$escapeHtml('Delete this attachment') + '</span></a>' : '<span class="icon"></span>') + '</dd><dd class="attachment-date"><time class="livestamp" datetime="' + soy.$$escapeHtml('' + opt_data.attachment.createdIso8601) + '">' + soy.$$escapeHtml(opt_data.attachment.createdDateTime) + '</time></dd><dd class="attachment-size">' + soy.$$escapeHtml(opt_data.attachment.fileSize) + '</dd><dd class="attachment-author">' + soy.$$escapeHtml(opt_data.attachment.authorDisplayName ? opt_data.attachment.authorDisplayName : '') + '</dd>';
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.renderAttachmentInfo.soyTemplateName = 'JIRA.Templates.ViewIssue.renderAttachmentInfo';
}


JIRA.Templates.ViewIssue.renderAttachmentData = function(opt_data, opt_ignored) {
  return 'data-issue-id="' + soy.$$escapeHtml(opt_data.issue.id) + '"' + ((opt_data.attachment.expandable) ? 'data-attachment-type="expandable"' : (opt_data.attachment.thumbnailUrl != null) ? 'data-attachment-type="image"' : 'data-attachment-type="file"');
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.renderAttachmentData.soyTemplateName = 'JIRA.Templates.ViewIssue.renderAttachmentData';
}


JIRA.Templates.ViewIssue.renderAttachmentLegacyIcon = function(opt_data, opt_ignored) {
  var output = '';
  var fileIconUrl__soy286 = '' + JIRA.Templates.ViewIssue.matchFileIconUrl(opt_data);
  var fileIconAlt__soy288 = '' + JIRA.Templates.ViewIssue.matchFileIconAlt(opt_data);
  output += '<img src="' + soy.$$escapeHtml(fileIconUrl__soy286) + '" height="16" width="16" border="0" alt="' + soy.$$escapeHtml(fileIconAlt__soy288) + '">';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.renderAttachmentLegacyIcon.soyTemplateName = 'JIRA.Templates.ViewIssue.renderAttachmentLegacyIcon';
}


JIRA.Templates.ViewIssue.matchFileIconUrl = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml(opt_data.baseurl) + '/images/icons/attach/' + JIRA.Templates.ViewIssue.matchFileIcon(opt_data);
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.matchFileIconUrl.soyTemplateName = 'JIRA.Templates.ViewIssue.matchFileIconUrl';
}


JIRA.Templates.ViewIssue.matchFileIcon = function(opt_data, opt_ignored) {
  var output = '';
  switch (opt_data.mimetype) {
    case 'application/pdf':
      output += 'pdf.gif';
      break;
    case 'image/gif':
      output += 'image.gif';
      break;
    case 'image/png':
      output += 'image.gif';
      break;
    case 'image/jpeg':
      output += 'image.gif';
      break;
    case 'text/xml':
      output += 'xml.gif';
      break;
    case 'text/html':
      output += 'html.gif';
      break;
    case 'text/plain':
      output += 'text.gif';
      break;
    case 'application/zip':
      output += 'zip.gif';
      break;
    case 'application/x-gzip-compressed':
      output += 'zip.gif';
      break;
    case 'application/msword':
      output += 'word.gif';
      break;
    case 'application/msword-template':
      output += 'word.gif';
      break;
    case 'application/vnd.ms-word.document.macroEnabled.12':
      output += 'word.gif';
      break;
    case 'application/vnd.openxmlformats-officedocument.wordprocessingml.document':
      output += 'word.gif';
      break;
    case 'application/vnd.ms-word.template.macroEnabled.12':
      output += 'word.gif';
      break;
    case 'application/vnd.openxmlformats-officedocument.wordprocessingml.template':
      output += 'word.gif';
      break;
    case 'application/vnd.ms-excel':
      output += 'excel.gif';
      break;
    case 'application/vnd.ms-excel.addin.macroEnabled.12':
      output += 'excel.gif';
      break;
    case 'application/vnd.ms-excel.sheet.binary.macroEnabled.12':
      output += 'excel.gif';
      break;
    case 'application/vnd.ms-excel.sheet.macroEnabled.12':
      output += 'excel.gif';
      break;
    case 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet':
      output += 'excel.gif';
      break;
    case 'application/vnd.ms-excel.template.macroEnabled.12':
      output += 'excel.gif';
      break;
    case 'application/vnd.openxmlformats-officedocument.spreadsheetml.template':
      output += 'excel.gif';
      break;
    case 'application/vnd.ms-powerpoint':
      output += 'powerpoint.gif';
      break;
    case 'application/vnd.ms-powerpoint.template.macroEnabled.12':
      output += 'powerpoint.gif';
      break;
    case 'application/vnd.openxmlformats-officedocument.presentationml.template':
      output += 'powerpoint.gif';
      break;
    case 'application/vnd.ms-powerpoint.addin.macroEnabled.12':
      output += 'powerpoint.gif';
      break;
    case 'application/vnd.ms-powerpoint.slideshow.macroEnabled.12':
      output += 'powerpoint.gif';
      break;
    case 'application/vnd.openxmlformats-officedocument.presentationml.slideshow':
      output += 'powerpoint.gif';
      break;
    case 'application/vnd.ms-powerpoint.presentation.macroEnabled.12':
      output += 'powerpoint.gif';
      break;
    case 'application/vnd.openxmlformats-officedocument.presentationml.presentation':
      output += 'powerpoint.gif';
      break;
    case 'text/x-java':
      output += 'java.gif';
      break;
    case 'text/x-java-source':
      output += 'java.gif';
      break;
    case 'application/x-java-archive':
      output += 'java.gif';
      break;
    default:
      output += 'file.gif';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.matchFileIcon.soyTemplateName = 'JIRA.Templates.ViewIssue.matchFileIcon';
}


JIRA.Templates.ViewIssue.matchFileIconAlt = function(opt_data, opt_ignored) {
  var output = '';
  switch (opt_data.mimetype) {
    case 'application/pdf':
      output += soy.$$escapeHtml('PDF File');
      break;
    case 'image/gif':
      output += soy.$$escapeHtml('GIF File');
      break;
    case 'image/png':
      output += soy.$$escapeHtml('PNG File');
      break;
    case 'image/jpeg':
      output += soy.$$escapeHtml('JPEG File');
      break;
    case 'text/xml':
      output += soy.$$escapeHtml('XML File');
      break;
    case 'text/html':
      output += soy.$$escapeHtml('HTML File');
      break;
    case 'text/plain':
      output += soy.$$escapeHtml('Text File');
      break;
    case 'application/zip':
      output += soy.$$escapeHtml('Zip Archive');
      break;
    case 'application/x-gzip-compressed':
      output += soy.$$escapeHtml('GZip Archive');
      break;
    case 'application/msword':
      output += soy.$$escapeHtml('Microsoft Word');
      break;
    case 'application/msword-template':
      output += soy.$$escapeHtml('Microsoft Word');
      break;
    case 'application/vnd.openxmlformats':
      output += soy.$$escapeHtml('Microsoft Word');
      break;
    case 'application/vnd.ms-word.document.macroEnabled.12':
      output += soy.$$escapeHtml('Microsoft Word');
      break;
    case 'application/vnd.openxmlformats-officedocument.wordprocessingml.document':
      output += soy.$$escapeHtml('Microsoft Word');
      break;
    case 'application/vnd.ms-word.template.macroEnabled.12':
      output += soy.$$escapeHtml('Microsoft Word');
      break;
    case 'application/vnd.openxmlformats-officedocument.wordprocessingml.template':
      output += soy.$$escapeHtml('Microsoft Word');
      break;
    case 'application/vnd.ms-excel':
      output += soy.$$escapeHtml('Microsoft Word');
      break;
    case 'application/vnd.ms-excel':
      output += soy.$$escapeHtml('Microsoft Word');
      break;
    case 'application/vnd.ms-excel.addin.macroEnabled.12':
      output += soy.$$escapeHtml('Microsoft Word');
      break;
    case 'application/vnd.ms-excel.sheet.binary.macroEnabled.12':
      output += soy.$$escapeHtml('Microsoft Word');
      break;
    case 'application/vnd.ms-excel.sheet.macroEnabled.12':
      output += soy.$$escapeHtml('Microsoft Word');
      break;
    case 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet':
      output += soy.$$escapeHtml('Microsoft Word');
      break;
    case 'application/vnd.ms-excel.template.macroEnabled.12':
      output += soy.$$escapeHtml('Microsoft Word');
      break;
    case 'application/vnd.openxmlformats-officedocument.spreadsheetml.template':
      output += soy.$$escapeHtml('Microsoft Word');
      break;
    case 'application/vnd.ms-powerpoint':
      output += soy.$$escapeHtml('Microsoft PowerPoint');
      break;
    case 'application/vnd.ms-powerpoint.template.macroEnabled.12':
      output += soy.$$escapeHtml('Microsoft PowerPoint');
      break;
    case 'application/vnd.openxmlformats-officedocument.presentationml.template':
      output += soy.$$escapeHtml('Microsoft PowerPoint');
      break;
    case 'application/vnd.ms-powerpoint.addin.macroEnabled.12':
      output += soy.$$escapeHtml('Microsoft PowerPoint');
      break;
    case 'application/vnd.ms-powerpoint.slideshow.macroEnabled.12':
      output += soy.$$escapeHtml('Microsoft PowerPoint');
      break;
    case 'application/vnd.openxmlformats-officedocument.presentationml.slideshow':
      output += soy.$$escapeHtml('Microsoft PowerPoint');
      break;
    case 'application/vnd.ms-powerpoint.presentation.macroEnabled.12':
      output += soy.$$escapeHtml('Microsoft PowerPoint');
      break;
    case 'application/vnd.openxmlformats-officedocument.presentationml.presentation':
      output += soy.$$escapeHtml('Microsoft PowerPoint');
      break;
    case 'text/x-java':
      output += soy.$$escapeHtml('Java Source File');
      break;
    case 'text/x-java-source':
      output += soy.$$escapeHtml('Java Source File');
      break;
    case 'application/x-java-archive':
      output += soy.$$escapeHtml('Java Archive File');
      break;
    default:
      output += soy.$$escapeHtml('File');
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.matchFileIconAlt.soyTemplateName = 'JIRA.Templates.ViewIssue.matchFileIconAlt';
}


JIRA.Templates.ViewIssue.renderAttachmentIcon = function(opt_data, opt_ignored) {
  var output = '';
  var fileClass__soy444 = '' + JIRA.Templates.ViewIssue.matchFileClass(opt_data);
  var fileIconAlt__soy446 = '' + JIRA.Templates.ViewIssue.matchFileIconAlt(opt_data);
  output += '<span class="aui-icon aui-icon-small attachment-icon ' + soy.$$escapeHtml(fileClass__soy444) + '" title="' + soy.$$escapeHtml(fileIconAlt__soy446) + '"></span>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.renderAttachmentIcon.soyTemplateName = 'JIRA.Templates.ViewIssue.renderAttachmentIcon';
}


JIRA.Templates.ViewIssue.renderThumbnailIcon = function(opt_data, opt_ignored) {
  var output = '';
  var fileClass__soy454 = '' + JIRA.Templates.ViewIssue.matchFileClass(opt_data);
  output += '<span class="aui-icon aui-icon-large attachment-thumbnail-icon ' + soy.$$escapeHtml(fileClass__soy454) + '"></span>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.renderThumbnailIcon.soyTemplateName = 'JIRA.Templates.ViewIssue.renderThumbnailIcon';
}


JIRA.Templates.ViewIssue.matchFileClass = function(opt_data, opt_ignored) {
  var output = '';
  switch (opt_data.mimetype) {
    case 'application/pdf':
      output += 'aui-iconfont-file-pdf';
      break;
    case 'image/gif':
      output += 'aui-iconfont-image';
      break;
    case 'image/png':
      output += 'aui-iconfont-image';
      break;
    case 'image/jpeg':
      output += 'aui-iconfont-image';
      break;
    case 'video/mp4':
      output += 'aui-iconfont-file-video';
      break;
    case 'text/xml':
      output += 'aui-iconfont-file-code';
      break;
    case 'text/html':
      output += 'aui-iconfont-file-code';
      break;
    case 'text/plain':
      output += 'aui-iconfont-file-txt';
      break;
    case 'application/zip':
      output += 'aui-iconfont-file-zip';
      break;
    case 'application/x-gzip-compressed':
      output += 'aui-iconfont-file-zip';
      break;
    case 'application/msword':
      output += 'aui-iconfont-file-doc';
      break;
    case 'application/msword-template':
      output += 'aui-iconfont-file-doc';
      break;
    case 'application/vnd.ms-word.document.macroEnabled.12':
      output += 'aui-iconfont-file-doc';
      break;
    case 'application/vnd.openxmlformats-officedocument.wordprocessingml.document':
      output += 'aui-iconfont-file-doc';
      break;
    case 'application/vnd.ms-word.template.macroEnabled.12':
      output += 'aui-iconfont-file-doc';
      break;
    case 'application/vnd.openxmlformats-officedocument.wordprocessingml.template':
      output += 'aui-iconfont-file-doc';
      break;
    case 'application/vnd.ms-excel':
      output += 'aui-iconfont-file-xls';
      break;
    case 'application/vnd.ms-excel.addin.macroEnabled.12':
      output += 'aui-iconfont-file-xls';
      break;
    case 'application/vnd.ms-excel.sheet.binary.macroEnabled.12':
      output += 'aui-iconfont-file-xls';
      break;
    case 'application/vnd.ms-excel.sheet.macroEnabled.12':
      output += 'aui-iconfont-file-xls';
      break;
    case 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet':
      output += 'aui-iconfont-file-xls';
      break;
    case 'application/vnd.ms-excel.template.macroEnabled.12':
      output += 'aui-iconfont-file-xls';
      break;
    case 'application/vnd.openxmlformats-officedocument.spreadsheetml.template':
      output += 'aui-iconfont-file-xls';
      break;
    case 'application/vnd.ms-powerpoint':
      output += 'aui-iconfont-file-ppt';
      break;
    case 'application/vnd.ms-powerpoint.template.macroEnabled.12':
      output += 'aui-iconfont-file-ppt';
      break;
    case 'application/vnd.openxmlformats-officedocument.presentationml.template':
      output += 'aui-iconfont-file-ppt';
      break;
    case 'application/vnd.ms-powerpoint.addin.macroEnabled.12':
      output += 'aui-iconfont-file-ppt';
      break;
    case 'application/vnd.ms-powerpoint.slideshow.macroEnabled.12':
      output += 'aui-iconfont-file-ppt';
      break;
    case 'application/vnd.openxmlformats-officedocument.presentationml.slideshow':
      output += 'aui-iconfont-file-ppt';
      break;
    case 'application/vnd.ms-powerpoint.presentation.macroEnabled.12':
      output += 'aui-iconfont-file-ppt';
      break;
    case 'application/vnd.openxmlformats-officedocument.presentationml.presentation':
      output += 'aui-iconfont-file-ppt';
      break;
    case 'text/x-java':
      output += 'aui-iconfont-file-code';
      break;
    case 'text/x-java-source':
      output += 'aui-iconfont-file-code';
      break;
    case 'application/x-java-archive':
      output += 'aui-iconfont-file-zip';
      break;
    default:
      output += 'aui-iconfont-devtools-file';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.matchFileClass.soyTemplateName = 'JIRA.Templates.ViewIssue.matchFileClass';
}


JIRA.Templates.ViewIssue.tagAttachment = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ViewIssue.tagFilePreview({id: opt_data.attachment.id, title: opt_data.attachment.fileName, mimeType: opt_data.attachment.mimeType, thumbnailUrl: opt_data.attachment.thumbnailUrl});
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.tagAttachment.soyTemplateName = 'JIRA.Templates.ViewIssue.tagAttachment';
}


JIRA.Templates.ViewIssue.tagFilePreview = function(opt_data, opt_ignored) {
  var output = '';
  var previewType__soy538 = '' + ((opt_data.mimeType == null && opt_data.thumbnailUrl != null) ? 'image' : (opt_data.mimeType != null && ('' + opt_data.mimeType).indexOf('image/') != -1) ? 'image' : (opt_data.mimeType != null && ('' + opt_data.mimeType).indexOf('video/mp4') != -1) ? 'video' : (opt_data.mimeType == 'application/pdf') ? 'document' : 'unknown');
  output += (previewType__soy538 != 'unknown') ? ' file-preview-id="' + soy.$$escapeHtml(opt_data.id) + '" file-preview-title="' + soy.$$escapeHtml(opt_data.title) + '" file-preview-type="' + soy.$$escapeHtml(previewType__soy538) + '" file-preview-mime-type="' + soy.$$escapeHtml(opt_data.mimeType) + '"' + ((opt_data.thumbnailUrl != null) ? 'file-preview-url="' + soy.$$escapeHtml('' + opt_data.thumbnailUrl) + '"' : '') : '';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.tagFilePreview.soyTemplateName = 'JIRA.Templates.ViewIssue.tagFilePreview';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone', location = 'js/dropzones/AttachmentsDropZone.js' */
define("dndattachment/dropzones/AttachmentsDropZone",["dndattachment/dropzones/IssueDropZone","jira/util/events","dndattachment/util/events/types","jquery","dndattachment/util/DataTransfer","dndattachment/ctrlv/utility","jira/dialog/dialog","dndattachment/integration-register","dndattachment/upload/handler"],function(e,t,n,o,r,i,a,s,d){var h=function(){var e=parseUri(window.location);return e.protocol+"://"+e.authority}(),c=e.extend({eventGroup:"attachmentsdropzone",progressBarType:"dndattachment/progressbars/AttachmentsUploadProgressBar",init:function(){this._super.apply(this,arguments),this.attachFileUrl=contextPath+"/rest/jddap/1.0/attachment",t.bind(JIRA.Events.PANEL_REFRESHED,this.panelRefreshed.bind(this)),this.connectContainer()},connectContainer:function(){this.$containerNode=this.getContainerNode(),this.$dragoverDropzone=o(JIRA.Templates.DnDAttachmentPlugin.dropzone()),this.$dragoverBorder=this.$dragoverDropzone.find(".attachments-drop-zone__dragover-border"),this.$dragoverInfo=this.$dragoverDropzone.find(".attachments-drop-zone__dragover-info"),this.$dragoverDropzone.appendTo(this.$containerNode),this._connectDropzone(),this.$windowMask=o(JIRA.Templates.DnDAttachmentPlugin.windowDropzoneMask()),this.$body=o(document.body),this.$body.append(this.$windowMask),this.$body.on("dragenter",_.throttle(this.onBodyDragEnter.bind(this),200,{trailing:!1})),this.$body.on("dragleave",this.onBodyDragLeave.bind(this)),this.$windowMask.on("dragover dragenter",this.onWindowMaskDragEnter.bind(this)),this.$windowMask.on("dragleave",this.onWindowMaskDragLeave.bind(this)),this.$windowMask.on("drop",this.onWindowMaskDrop.bind(this)),this.$auiSidebar=o(".aui-sidebar-body"),this._disconnectListenersFromParentDropzone(),this.onContentAddedHandler=this.onContentAdded.bind(this),t.bind(JIRA.Events.NEW_CONTENT_ADDED,this.onContentAddedHandler),this.externalHandler=s.getBrowseLinkHandler()},_connectDropzone:function(){var e=s.getAttachmentsZoneCreator();this.onDragOverDropHandler=this.onDragOverDrop.bind(this),this.onDragLeaveHandler=this.onDragLeave.bind(this),this.$containerNode.on("dragover dragenter drop",this.onDragOverDropHandler),this.$containerNode.on("dragleave",this.onDragLeaveHandler),"function"==typeof e&&(this.externalZone=e(this.$containerNode[0]))},_disconnectListenersFromParentDropzone:function(){this.$dropTarget.off("dragover drop dragleave dragenter"),o(document).off("dragover dragenter")},disconnectContainer:function(){this.$dragoverDropzone.remove(),this.$windowMask.remove(),this.$body.removeClass("attachments-drop-zone__dragover"),this.$body.off("dragenter",this.onBodyDragEnter.bind(this)),this.$containerNode.off("dragenter dragover drop",this.onDragOverDropHandler),this.$containerNode.off("dragleave",this.onDragLeaveHandler),this.externalZone&&this.externalZone.deactivate(),t.unbind(JIRA.Events.NEW_CONTENT_ADDED,this.onContentAddedHandler),d.disconnectCurrentDropZone(this)},isAttached:function(){return o.contains(document.body,this.$node[0])},onContentAdded:function(){this.isAttached()||this.disconnectContainer()},getContainerNode:function(){var e=o(o(".issue-container")[0]);return"static"===e.css("position")&&e.css("position","relative"),e},addHandlerToBrowseLink:function(){this.fileButton.click(this.browseFilesAndUpload.bind(this))},canDoFullPageDrop:function(){return a.current?(JIRA.trace("jira.issue.dnd.dropnotallowed"),!1):(JIRA.trace("jira.issue.dnd.dropallowed"),!0)},onDragOverDrop:function(e){if(!this.isAttached())return void this.disconnectContainer();if(i.dragEventContainsFiles(e)&&this.canDoFullPageDrop()&&(e.preventDefault(),e.originalEvent&&(e.originalEvent.dataTransfer.dropEffect="copy"),JIRA.trace("jira.issue.dnd.dragover"),this.$body.addClass("attachments-drop-zone__dragover"),this.$body.addClass("attachments-drop-zone__window-dragover"),this.$containerNode.addClass("attachments-drop-zone__dragover-fade"),this._readjustDropzone(),this._repositionStickyInfoBox(),"dragenter"===e.type&&this.externalZone&&(d.isDefaultExecutor({})?this.externalZone.activate():this.externalZone.deactivate()),"drop"==e.type))if(this.removeAllDragoverClasses(this.$containerNode),o(document).trigger("dropHandled"),this.externalZone&&d.isDefaultExecutor({}))this.externalZone.drop();else{var t=new r(e.dataTransfer);t.getFiles().then(function(e){this.handleFilesReceived(e),this.queueEvent("fileDrop",{count:e.length})}.bind(this))}},onDragLeave:function(){this.removeAllDragoverClasses(this.$containerNode)},browseFilesAndUpload:function(e,t){return"function"==typeof this.externalHandler&&d.isDefaultExecutor({})?this.externalHandler.call(null,e,t||{}):this.browseLinkHandler.call(this,e),!0},_readjustDropzone:function(){if(0!==this.$auiSidebar.length){var e=this.$auiSidebar.offset().left+this.$auiSidebar.width();if(this.$dragoverBorder.parent().offset()){var t=this.$dragoverBorder.parent().offset().left;e>t?this.$dragoverBorder.css({left:e-t}):this.$dragoverBorder.css({left:0})}else this.$dragoverBorder.css({left:0})}},_repositionStickyInfoBox:function(){var e,t=this.$containerNode.scrollParent().scrollTop()+10,n=this.$containerNode.offset().top;e=this.$containerNode.scrollParent().offset()?this.$containerNode.scrollParent().offset().top:0;var o;o=0===e?t>=n?t-n:10:t,this.$dragoverInfo.css({top:o})},onBodyDragEnter:function(e){i.dragEventContainsFiles(e)&&(this._readjustDropzone(),this.$body.addClass("attachments-drop-zone__window-dragover"))},onBodyDragLeave:function(){this.removeAllDragoverClasses()},onWindowMaskDragEnter:function(e){i.dragEventContainsFiles(e)&&(e.preventDefault(),e.originalEvent&&(e.originalEvent.dataTransfer.dropEffect="none"),this._readjustDropzone(),this.$body.addClass("attachments-drop-zone__window-dragover"),this.canDoFullPageDrop()&&(this.$body.addClass("attachments-drop-zone__dragover"),this._repositionStickyInfoBox()))},onWindowMaskDragLeave:function(){this.removeAllDragoverClasses()},onWindowMaskDrop:function(e){e.preventDefault(),this.removeAllDragoverClasses()},removeAllDragoverClasses:function(e){e&&e.removeClass("attachments-drop-zone__dragover-fade"),this.$body.removeClass("attachments-drop-zone__window-dragover"),this.$body.removeClass("attachments-drop-zone__dragover")},handleFilesReceived:function(e){var r=o("textarea.wiki-textfield:visible:focus"),i=r.length>0;t.trigger(n.ATTACHMENT_FOR_PAGE_RECEIVED,{files:e,isWikiTextfieldFocused:i,wikiTextfield:r[0]})},render:function(){return this.$node.parents("#attachmentmodule").addClass("attachments-drop-zone-parent"),this.$listNode=this.$node.siblings("#file_attachments, #attachment_thumbnails"),this._super.apply(this,arguments)},panelRefreshed:function(e,t,n,r){if(r.find(this.$node).is("*")){this.getViewMode();n=n.find(">.mod-content"),n.addClass("issue-drop-zone"),this.$node.prependTo(n),this.render();var i=r.find(".attachments-upload-progress-bar");i.data("viewMode",this.getViewMode()).each(function(e,t){const n=o(t).prop("_instance");void 0!=n&&n.render()}),i.each(function(e,t){this.insertProgressBar(o(t))}.bind(this)),this._disconnectListenersFromParentDropzone()}},getViewMode:function(){return"file_attachments"==this.$listNode.attr("id")?"list":"gallery"},getSortBy:function(){return this.$listNode.data("sort-key")},getSortOrder:function(){return this.$listNode.data("sort-order")},getSortComparator:function(){var e="asc"==this.getSortOrder()?1:-1,t="fileName"==this.getSortBy()?function(e){return e.find(".attachment-title").text()}:function(e){return new Date(e.find("*[datetime]").attr("datetime")).getTime()},n="fileName"==this.getSortBy()&&String.prototype.localeCompare?function(e,t){return e.localeCompare(t)}:function(e,t){return e<t?-1:e>t?1:0};return function(o,r){var i=t(o),a=t(r);return e*n(i,a)}},commitUpload:function(e,t){var n=new o.Deferred;return this.attachFile(e,t).then(n.resolve.bind(n),n.reject.bind(n)),n.then(function(n){var r=o(JIRA.Templates.ViewIssue.renderAttachments({baseurl:contextPath,fullBaseUrl:h+contextPath,issue:{id:t},attachments:n,viewMode:this.getViewMode()})).find(".attachment-content");n.forEach(function(t,n){var o=r[n],i=this.$listNode.find('>*[data-file-id="'+e[n]+'"]');i.replaceWith(o)},this),JIRA.trigger(JIRA.Events.NEW_CONTENT_ADDED,[this.$listNode,JIRA.CONTENT_ADDED_REASON.panelRefreshed]),JIRA.trace("jira.issue.dnd.attached")}.bind(this)),this.queueTask(n),this.queueEvent("commitUpload",{count:e.length}),n},configureUploadProgressBar:function(e){this._super.apply(this,arguments),e.data("viewMode",this.getViewMode())},placeUploadProgressBar:function(e,t){return t.$node.find("time.livestamp").attr("datetime",(new Date).toISOString()).livestamp(),this.insertProgressBar(e),t.bind("onDestroy",function(){var t=e.parents(".item-attachments");0==t.find(".attachments-upload-progress-bar, .attachment-content").length&&t.remove()}),e},insertProgressBar:function(e){var t=this.getSortComparator(),n=this.$listNode.children().toArray(),r=function(n){if(t(e,o(n))<1)return e.insertBefore(n),!0};n.some(r)||e.appendTo(this.$listNode)}});return c});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone', location = 'js/progressbars/UploadProgressBar.js' */
define("dndattachment/progressbars/UploadProgressBar",["jquery","dndattachment/Parser","dndattachment/JIRA","dndattachment/aui","dndattachment/i18n","dndattachment/TemporaryAttachments","dndattachment/util/Configuration","dndattachment/util/FileSizeUtil"],function(t,e,i,s,n,o,r,a){function d(t,e){s.trigger("analytics",{name:"issue.dnd.attachment.uploadprogress."+t,data:e||{}})}var h=["aui-iconfont-error","aui-iconfont-success","aui-iconfont-close-dialog"],u=r.getWRM("thumbnail-mime-types").split(","),l=Class.extend({autoDestroy:!0,init:function(e){this.result=new t.Deferred,this.$node=t(e),this.file=this.$node.data("file"),this.uploadSize=this.$node.data("upload-size"),this.formToken=this.$node.data("form-token"),this.$node.prop("_instance",this),this.render()},render:function(){this.$node.html(i.Templates.DnDAttachmentPlugin.UploadProgressBar({isImageType:this.isImageType()})),this.afterRender()},afterRender:function(){this.file&&(this.setFileName(this.file.name),this.setFileSize(this.file.size),this.loadThumbnail(this.file)),this.progress&&this.updateProgress(),this.connectListeners()},connectListeners:function(){this.getControlNode().on("click",function(){this.destroy(),d("buttonClick")}.bind(this))},destroy:function(){this.destroyed||(this.upload&&this.upload.abort(),this.setAutoDestroy(!1),this.trigger("onBeforeDestroy"),this.destroyed=!0,this.$node.animate({opacity:0},{duration:250,complete:function(){this.$node.slideUp(250,function(){this.objectURL&&window.URL.revokeObjectURL(this.objectURL),this.$node.remove(),i.trace("jira.issue.dnd.progressbar.removed"),this.trigger("onDestroy")}.bind(this))}.bind(this)}))},isDestroyed:function(){return!!this.destroyed},setAutoDestroy:function(t){this.autoDestroy=t},getAutoDestroy:function(){return this.autoDestroy},getUploadParams:function(t){var e={filename:t.name,size:t.size,atl_token:atl_token(),formToken:this.formToken};return _.extend(e,this.getEntityParams()),e},getEntityParams:function(){var t={},e=i.Issue.getIssueId(),s=this.$node.parents("form").find('*[name="pid"]').attr("value");return s?t.projectId=s:e&&(t.issueId=e),t},setFile:function(t){this.file=t},setFileID:function(t){this.fileID=t,this.$node.attr("data-file-id",t)},getFileID:function(){return this.fileID},setFileName:function(t){this.$node.find(".upload-progress-bar__file-name").text(t)},getFileName:function(){return this.$node.find(".upload-progress-bar__file-name").text()},setFileSize:function(t){t>=0&&this.$node.find(".upload-progress-bar__file-size").html(a.format(t))},uploadFile:function(t,e){this.setFile(t);var r=this.result;if(this.monitorUpload(r),r.fail(this.reportError.bind(this)),t.size>e)return r.reject(n("dnd.attachment.file.is.too.large").replace("{0}",this.uploadSize),!0),r;for(var a=["\\","/",'"',":","?","*","<","|",">"],d=0;d<a.length;d++){var h=a[d];if(_.contains(t.name,h))return r.reject(s.format("{0} contains the invalid character \'\'{1}\'\'. Please rename the file and try again.",t.name,h),!0),r}return this.upload=new s.InlineAttach.AjaxUpload({file:t,params:this.getUploadParams(t),url:s.InlineAttach.AjaxPresenter.DEFAULT_URL,progress:function(e){r.notify(e/t.size)},success:function(e,i){void 0!==e.id&&void 0!==e.name?(r.notify(1),r.resolve(e,i,t)):r.reject(e,i,t)},error:function(t,e){r.reject(n("dnd.attachment.internal.server.error"),e)},abort:function(){r.reject(n("dnd.attachment.upload.aborted"),"abort")}}),this.checkSession().then(function(){this.upload.upload()}.bind(this)).fail(function(){r.reject(n("dnd.attachment.unauthorized"),401)}),this.$node.find(".upload-progress-bar__control>*").on("click",function(){this.upload.abort(),r.reject()}.bind(this)),r.done(function(e){o.putAttachment(e.id,t),this.setFileID(e.id),i.trace("jira.issue.dnd.uploaded")}.bind(this)),r},monitorUpload:function(t){t.progress(this.setProgress.bind(this)),t.done(this.setFinished.bind(this)),t.fail(this.setFailed.bind(this))},setProgress:function(t){this.progress=t,this.updateProgress()},updateProgress:function(){var t=this.$node.find(".upload-progress-bar__progress-bar");t.toggleClass("UploadProgressBar_progressUnknown",this.progress===!1),this.progress>=0&&t.find(".upload-progress-bar__bar").css("width",100*this.progress+"%")},setFinished:function(){this.$node.addClass("upload-progress-bar__upload-finished"),this.$node.find(".upload-progress-bar__control button .aui-icon").addClass("aui-iconfont-success").removeClass("aui-iconfont-close-dialog"),this.finished=!0,this.trigger("onFinished")},setFailed:function(){this.$node.addClass("UploadProgressBar_uploadFailed"),this.finished=!0,this.failed=!0,this.trigger("onFailed")},isFinished:function(){return!!this.finished},isFailed:function(){return!!this.failed},isSuccessful:function(){return this.isFinished()&&!this.isFailed()},isImageType:function(){return this.file&&this.file.type&&_.contains(u,this.file.type)},getThumbnailSrc:function(t){return this.isImageType()&&(this.objectURL=window.URL.createObjectURL(t)),this.objectURL||i.Templates.ViewIssue.matchFileIconUrl({baseurl:s.contextPath(),mimetype:t.type})},getThumbnailNode:function(){return this.$node.find(".upload-progress-bar__thumbnail")},getControlNode:function(){return this.$node.find(".upload-progress-bar__control button")},loadThumbnail:function(e){var i=this.getThumbnailSrc(e),s=this.getThumbnailNode();s.addClass(this.objectURL?"upload-progress-bar__thumbnail_image":"upload-progress-bar__thumbnail_icon");var n=t("<img/>").attr("src",i);return n.appendTo(s)},reportError:function(t,e){"object"==typeof t&&t.errorMessage&&(t=t.errorMessage),this.$node.addClass("upload-progress-bar__upload-error"),this.$node.removeClass("upload-progress-bar__upload-finished"),this.$node.find(".upload-progress-bar__bar").css("width","100%"),this.showErrorMessage(t,e),this.setAutoDestroy(!1),d("error",{message:t})},showErrorMessage:function(t){this.$node.find(".upload-progress-bar__error-message").text(t)},setIcon:function(t){var e=this.$node.find(".upload-progress-bar__control button .aui-icon");if(!h.some(function(i){return e.toggleClass(i,i==t),i==t}))throw"Unknown icon"},checkSession:function(){var e=new t.Deferred;return s.$.ajax({type:"GET",url:contextPath+"/rest/auth/1/session",contentType:"application/json"}).done(function(){e.resolve()}).fail(function(){this.checkPermissions().done(function(t){e.resolve()}).fail(function(){e.reject()})}.bind(this)),e},checkPermissions:function(){var e=new t.Deferred;return s.$.ajax({type:"GET",url:contextPath+"/rest/api/2/mypermissions",contentType:"application/json",data:t.extend({},this.getEntityParams(),{permissions:"CREATE_ATTACHMENTS"})}).done(function(t){t.permissions.CREATE_ATTACHMENTS.havePermission?e.resolve():e.reject()}).fail(function(){e.reject()}),e}});return l});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone', location = 'js/progressbars/AttachmentsUploadProgressBar.js' */
define("dndattachment/progressbars/AttachmentsUploadProgressBar",["dndattachment/progressbars/UploadProgressBar","jira/flag","jquery","dndattachment/i18n"],function(e,t,a,n){return e.extend({render:function(){this.$node.html(JIRA.Templates.DnDAttachmentPlugin.AttachmentsUploadProgressBar({isImageType:this.isImageType()})).removeClass("upload-progress-bar").addClass("attachments-upload-progress-bar"),this.$node.toggleClass("attachment-content",!this.isImageType()),this.afterRender()},loadThumbnail:function(t){return"gallery"==this.$node.data("viewMode")?e.prototype.isImageType.call(this)?this._super.apply(this,arguments):a(JIRA.Templates.ViewIssue.renderThumbnailIcon({mimetype:t.type})).appendTo(this.getThumbnailNode()):a(JIRA.Templates.ViewIssue.renderAttachmentIcon({mimetype:t.type})).appendTo(this.getThumbnailNode())},showErrorMessage:function(e,s){if("abort"!=s){var o=t.showErrorMsg(n("dnd.attachment.not.uploaded")(this.getFileName()),AJS.escapeHTML(e));a(o).on("aui-flag-close",function(){this.destroy()}.bind(this)),this.bind("onDestroy",function(){o.close()})}},isImageType:function(){return"gallery"==this.$node.data("viewMode")},getControlNode:function(){return this.$node.find(".upload-progress-bar__upload-control span")},getAutoDestroy:function(){return!1}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone', location = 'templates/IssueDropZone.soy' */
// This file was automatically generated from IssueDropZone.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DnDAttachmentPlugin.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DnDAttachmentPlugin == 'undefined') { JIRA.Templates.DnDAttachmentPlugin = {}; }


JIRA.Templates.DnDAttachmentPlugin.IssueDropZone = function(opt_data, opt_ignored) {
  return '<div class="issue-drop-zone__target"></div><span class="issue-drop-zone__text"><span class="issue-drop-zone__drop-icon"> </span> ' + soy.$$escapeHtml('Drop files to attach, or') + ' <button type="button" class="issue-drop-zone__button"> ' + soy.$$escapeHtml('browse') + '.</button><input class="issue-drop-zone__file ignore-inline-attach" type="file" multiple /></span>';
};
if (goog.DEBUG) {
  JIRA.Templates.DnDAttachmentPlugin.IssueDropZone.soyTemplateName = 'JIRA.Templates.DnDAttachmentPlugin.IssueDropZone';
}


JIRA.Templates.DnDAttachmentPlugin.AttachmentsDropZone = function(opt_data, opt_ignored) {
  return '<div duiType="dndattachment/dropzones/AttachmentsDropZone" class="issue-drop-zone" data-upload-limit="' + soy.$$escapeHtml(opt_data.jiraAttachmentSize) + '" data-upload-size="' + soy.$$escapeHtml(opt_data.uploadLimit) + '" data-upload-size="' + soy.$$escapeHtml(opt_data.uploadLimit) + '"></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.DnDAttachmentPlugin.AttachmentsDropZone.soyTemplateName = 'JIRA.Templates.DnDAttachmentPlugin.AttachmentsDropZone';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone', location = 'templates/AttachmentsDropZone.soy' */
// This file was automatically generated from AttachmentsDropZone.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DnDAttachmentPlugin.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DnDAttachmentPlugin == 'undefined') { JIRA.Templates.DnDAttachmentPlugin = {}; }


JIRA.Templates.DnDAttachmentPlugin.dropzoneMask = function(opt_data, opt_ignored) {
  return '<span><div class="attachments-drop-zone__dragover-mask" /></span>';
};
if (goog.DEBUG) {
  JIRA.Templates.DnDAttachmentPlugin.dropzoneMask.soyTemplateName = 'JIRA.Templates.DnDAttachmentPlugin.dropzoneMask';
}


JIRA.Templates.DnDAttachmentPlugin.dropzone = function(opt_data, opt_ignored) {
  return '<span><div class="attachments-drop-zone__dragover-border"><div class="attachments-drop-zone__dragover-info"><p>' + soy.$$escapeHtml('Drop files to attach them to the issue') + '</p></div></div></span>';
};
if (goog.DEBUG) {
  JIRA.Templates.DnDAttachmentPlugin.dropzone.soyTemplateName = 'JIRA.Templates.DnDAttachmentPlugin.dropzone';
}


JIRA.Templates.DnDAttachmentPlugin.windowDropzoneMask = function(opt_data, opt_ignored) {
  return '<span><div class="attachments-drop-zone__window-dragover-mask" /></span>';
};
if (goog.DEBUG) {
  JIRA.Templates.DnDAttachmentPlugin.windowDropzoneMask.soyTemplateName = 'JIRA.Templates.DnDAttachmentPlugin.windowDropzoneMask';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone', location = 'templates/UploadProgressBar.soy' */
// This file was automatically generated from UploadProgressBar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DnDAttachmentPlugin.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DnDAttachmentPlugin == 'undefined') { JIRA.Templates.DnDAttachmentPlugin = {}; }


JIRA.Templates.DnDAttachmentPlugin.UploadProgressBar = function(opt_data, opt_ignored) {
  return '<div class="upload-progress-bar__thumbnail"> </div><span class="upload-progress-bar__file-name"> </span><span class="upload-progress-bar__file-size"> </span><div class="upload-progress-bar__progress-bar"><span class="upload-progress-bar__bar"> </span></div><div class="upload-progress-bar__control"><button type="button" class="aui-button aui-button-subtle aui-button-compact"><span class="aui-icon aui-icon-small aui-iconfont-close-dialog">' + soy.$$escapeHtml('Cancel upload') + '</span></button></div><div class="upload-progress-bar__error-message"></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.DnDAttachmentPlugin.UploadProgressBar.soyTemplateName = 'JIRA.Templates.DnDAttachmentPlugin.UploadProgressBar';
}


JIRA.Templates.DnDAttachmentPlugin.AttachmentsUploadProgressBar = function(opt_data, opt_ignored) {
  return '' + ((opt_data.isImageType) ? '<div class="upload-progress-bar__thumbnail"><div class="upload-progress-bar__progress-bar"><span class="upload-progress-bar__bar"> </span></div></div><dl><dt><span class="upload-progress-bar__file-name"> </span></dt><dd class="upload-progress-bar__file-size"> </dd><dd class="upload-progress-bar__upload-control"><span>' + soy.$$escapeHtml('Cancel') + '</span></dd><dd class="upload-progress-bar__error-message"></dd><dd class="attachment-date"><time class="livestamp" /></dd></dl>' : '<div class="attachment-thumb upload-progress-bar__thumbnail"></div><dl><dt class="attachment-title upload-progress-bar__file-name"></dt><dd class="upload-progress-bar__upload-control"><span>' + soy.$$escapeHtml('Cancel') + '</span></dd><dd class="attachment-size"><span class="upload-progress-bar__file-size"> </span><div class="upload-progress-bar__progress-bar"><span class="upload-progress-bar__bar"> </span></div></dd><dd class="attachment-author"> </dd><dd class="attachment-date"><time class="livestamp" /></dd></dl>');
};
if (goog.DEBUG) {
  JIRA.Templates.DnDAttachmentPlugin.AttachmentsUploadProgressBar.soyTemplateName = 'JIRA.Templates.DnDAttachmentPlugin.AttachmentsUploadProgressBar';
}


JIRA.Templates.DnDAttachmentPlugin.TempUploadProgressBar = function(opt_data, opt_ignored) {
  return '<div class="temp-upload-progress-bar__parent-container temp-upload-progress-bar__uploading"><div class="temp-upload-progress-bar__container"><div class="upload-progress-bar__thumbnail"/><div class="upload-progress-bar__progress-bar"><span class="upload-progress-bar__bar"> </span></div><div class="upload-progress-bar__error"><div class="upload-progress-bar__error-indicator"><span class="aui-icon aui-icon-large aui-iconfont-error">' + soy.$$escapeHtml('Upload error') + '</span></div><div class="upload-progress-bar__error-text">' + soy.$$escapeHtml('Upload failed') + '</div></div><div class="upload-progress-bar__upload-mask"/><div class="upload-progress-bar__control"><button type="button" class="aui-button aui-button-subtle aui-button-compact"><span class="aui-icon aui-icon-small aui-iconfont-close-dialog"><div class="button-text" aria-label="' + soy.$$escapeHtml('Cancel upload') + ' "></div><div class="file-name"></div><div class="error-message"></div></span></button></div><div class="upload-progress-bar__progress-bar"><span class="upload-progress-bar__bar"> </span></div></div><div class="upload-progress-bar_file-name-container"><span class="upload-progress-bar__file-name"></span></div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.DnDAttachmentPlugin.TempUploadProgressBar.soyTemplateName = 'JIRA.Templates.DnDAttachmentPlugin.TempUploadProgressBar';
}


JIRA.Templates.DnDAttachmentPlugin.SuccessMessageLink = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.issueLink) + '">' + soy.$$escapeHtml(opt_data.issueKey) + ' - ' + soy.$$escapeHtml(opt_data.issueSummary) + '</a>';
};
if (goog.DEBUG) {
  JIRA.Templates.DnDAttachmentPlugin.SuccessMessageLink.soyTemplateName = 'JIRA.Templates.DnDAttachmentPlugin.SuccessMessageLink';
}
;
;
/* module-key = 'com.atlassian.jira.plugin.system.comment-panel:expandablecomments', location = 'js/plugin/comment/init-comments-expanding.js' */
require(["jira/util/formatter","jira/util/logger","jira/util/events","jira/util/events/types","jira/util/events/reasons","jira/ajs/ajax/smart-ajax","jquery"],function(e,t,a,n,i,s,o){o(document).on("simpleClick",".collapsed-comments",function(r){function c(){d.find(".show-more-comments").text("Loading...")}function l(){var e=d.attr("href");s.makeRequest({url:e,method:"GET",headers:{"X-PJAX":!0}}).done(m)}function m(e){var s=o(e).find(".activity-comment").slice(v,v+j);u.replaceWith(s),t.trace("jira.issue.comment.expanded"),a.trigger(n.NEW_CONTENT_ADDED,[p,i.panelRefreshed]),f.find(".activity-comment:first").removeClass("collapsed").addClass("expanded")}r.preventDefault();var d=o(this),u=d.closest(".message-container"),f=d.closest(".issuePanelContainer"),p=d.closest(".module"),v=u.prevAll(".activity-comment").length,j=d.find(".show-more-comments").data("collapsed-count");c(),l()})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-dialog-resources', location = 'templates/viewissue/devstatus-panel.soy' */
// This file was automatically generated from devstatus-panel.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }


JIRA.Templates.DevStatus.connectionProblemAsInfoWithoutIcon = function(opt_data, opt_ignored) {
  return '' + aui.message.info({content: '' + JIRA.Templates.DevStatus.connectionAndConfigErrorsMessages({errorInstances: opt_data.instances, notConfiguredInstances: opt_data.notConfiguredInstances, showContactAdminForm: opt_data.showContactAdminForm})});
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.connectionProblemAsInfoWithoutIcon.soyTemplateName = 'JIRA.Templates.DevStatus.connectionProblemAsInfoWithoutIcon';
}


JIRA.Templates.DevStatus.connectionProblemAsWarning = function(opt_data, opt_ignored) {
  return '' + aui.message.warning({content: '' + JIRA.Templates.DevStatus.connectionAndConfigErrorsMessages({errorInstances: opt_data.instances, notConfiguredInstances: opt_data.notConfiguredInstances, showContactAdminForm: opt_data.showContactAdminForm})});
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.connectionProblemAsWarning.soyTemplateName = 'JIRA.Templates.DevStatus.connectionProblemAsWarning';
}


JIRA.Templates.DevStatus.connectionAndConfigErrorsMessages = function(opt_data, opt_ignored) {
  return '' + (((! opt_data.errorInstances || opt_data.errorInstances.length == 0) && (! opt_data.notConfiguredInstances || opt_data.notConfiguredInstances.length == 0)) ? '<p class="connection-error">' + soy.$$filterNoAutoescape('JIRA is having difficulty contacting the applications that supply development status information.') + ' ' + JIRA.Templates.DevStatus.contactAdmin(opt_data) + '</p>' : ((opt_data.errorInstances.length > 0) ? '<p class="connection-error">' + JIRA.Templates.DevStatus.connectionProblemMultipleInstances({instances: opt_data.errorInstances}) + ' ' + JIRA.Templates.DevStatus.contactAdmin(opt_data) + '</p>' : '') + ((opt_data.notConfiguredInstances && opt_data.notConfiguredInstances.length > 0) ? '<p class="config-errors">' + JIRA.Templates.DevStatus.configProblem(opt_data) + '</p>' : ''));
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.connectionAndConfigErrorsMessages.soyTemplateName = 'JIRA.Templates.DevStatus.connectionAndConfigErrorsMessages';
}


JIRA.Templates.DevStatus.contactAdmin = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + soy.$$filterNoAutoescape(AJS.format('If this condition persists, please contact your {0}JIRA administrators{1}.',opt_data.showContactAdminForm ? '<a id="contact-admin" href="' + "" + '/secure/ContactAdministrators!default.jspa">' : '',opt_data.showContactAdminForm ? '</a>' : ''));
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.contactAdmin.soyTemplateName = 'JIRA.Templates.DevStatus.contactAdmin';
}


JIRA.Templates.DevStatus.connectionProblem = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.adminError) {
    output += JIRA.Templates.DevStatus.connectionProblemAdminError(opt_data);
  } else {
    output += '<p class="connection-error">' + ((! opt_data.instances || opt_data.instances.length == 0) ? soy.$$filterNoAutoescape('JIRA is having difficulty contacting the applications that supply development status information.') : JIRA.Templates.DevStatus.connectionProblemMultipleInstances(opt_data)) + ' ';
    var contactAdminAnchor__soy57 = '<a id="contact-admin" href="' + soy.$$escapeHtml("") + '/secure/ContactAdministrators!default.jspa">';
    output += soy.$$filterNoAutoescape(AJS.format('If this condition persists, please contact your {0}JIRA administrators{1}.',opt_data.showContactAdminForm ? contactAdminAnchor__soy57 : '',opt_data.showContactAdminForm ? '</a>' : '')) + '</p>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.connectionProblem.soyTemplateName = 'JIRA.Templates.DevStatus.connectionProblem';
}


JIRA.Templates.DevStatus.connectionProblemAdminError = function(opt_data, opt_ignored) {
  var output = '<p class="connection-error admin-error">' + soy.$$escapeHtml(opt_data.adminError.message) + '</p><p class="configure-applinks-link"><a href="' + soy.$$escapeHtml("") + '/plugins/servlet/applinks/listApplicationLinks">' + soy.$$escapeHtml('Configure Application Links') + '</a></p>';
  if (opt_data.adminError.details) {
    output += '<p class="connection-error"><a id="replace-text-trigger" data-replace-text="' + soy.$$escapeHtml('Hide error details') + '" class="aui-expander-trigger" aria-controls="expander-with-replace-text-content">' + soy.$$escapeHtml('Show error details') + '</a></p><div id="expander-with-replace-text-content" class="aui-expander-content admin-error-details"><ul>';
    var detailList79 = opt_data.adminError.details;
    var detailListLen79 = detailList79.length;
    for (var detailIndex79 = 0; detailIndex79 < detailListLen79; detailIndex79++) {
      var detailData79 = detailList79[detailIndex79];
      output += '<li>' + soy.$$escapeHtml(detailData79) + '</li>';
    }
    output += '</ul></div>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.connectionProblemAdminError.soyTemplateName = 'JIRA.Templates.DevStatus.connectionProblemAdminError';
}


JIRA.Templates.DevStatus.configProblem = function(opt_data, opt_ignored) {
  var output = '';
  var servers__soy86 = opt_data.notConfiguredInstances;
  output += '<span class="description">';
  var server0__soy88 = '' + JIRA.Templates.DevStatus.connectionProblemSingleInstance({instance: servers__soy86[0]});
  if (servers__soy86.length == 1) {
    output += soy.$$filterNoAutoescape(AJS.format('Couldn\x27\x27t read data from {0}.',server0__soy88));
  } else {
    var server1__soy96 = '' + JIRA.Templates.DevStatus.connectionProblemSingleInstance({instance: servers__soy86[1]});
    if (servers__soy86.length == 2) {
      output += soy.$$filterNoAutoescape(AJS.format('Couldn\x27\x27t read data from {0} and {1}.',server0__soy88,server1__soy96));
    } else {
      var server2__soy104 = '' + JIRA.Templates.DevStatus.connectionProblemSingleInstance({instance: servers__soy86[2]});
      output += (servers__soy86.length == 3) ? soy.$$filterNoAutoescape(AJS.format('Couldn\x27\x27t read data from {0}, {1}, and {2}.',server0__soy88,server1__soy96,server2__soy104)) : soy.$$filterNoAutoescape(AJS.format('Couldn\x27\x27t read data from {0}, {1}, {2}, and {3} other {3,choice,1#application|1\x3capplications}.',server0__soy88,server1__soy96,server2__soy104,servers__soy86.length - 3));
    }
  }
  output += '</span> <span class="hints">';
  var helpUrl__soy115 = ({"alt":"Get help!","title":"JIRA Application Development panel displays error - Couldn't read data","url":"https://confluence.atlassian.com/display/JIRAKB/JIRA+Application+Development+panel+displays+error+-+Couldn%27t+read+data"});
  output += soy.$$filterNoAutoescape(AJS.format('Learn {0}about this issue{1} or go to {2}application links{3} to fix it.','<a href="' + helpUrl__soy115.url + '" target="_blank">','</a>','<a href="' + "" + '/plugins/servlet/applinks/listApplicationLinks">','</a>')) + '</span>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.configProblem.soyTemplateName = 'JIRA.Templates.DevStatus.configProblem';
}


JIRA.Templates.DevStatus.connectionProblemMultipleInstances = function(opt_data, opt_ignored) {
  var output = '';
  var instance0__soy120 = '' + JIRA.Templates.DevStatus.connectionProblemSingleInstance({instance: opt_data.instances[0]});
  if (opt_data.instances.length == 1) {
    output += soy.$$filterNoAutoescape(AJS.format('JIRA is having difficulty contacting {0}.',instance0__soy120));
  } else {
    var instance1__soy128 = '' + JIRA.Templates.DevStatus.connectionProblemSingleInstance({instance: opt_data.instances[1]});
    if (opt_data.instances.length == 2) {
      output += soy.$$filterNoAutoescape(AJS.format('JIRA is having difficulty contacting {0} and {1}.',instance0__soy120,instance1__soy128));
    } else {
      var instance2__soy136 = '' + JIRA.Templates.DevStatus.connectionProblemSingleInstance({instance: opt_data.instances[2]});
      output += soy.$$filterNoAutoescape(AJS.format('JIRA is having difficulty contacting {0}, {1}, {3,choice,0#and {2}|1#{2}, and another application|1\x3c{2}, and {3} more applications}.',instance0__soy120,instance1__soy128,instance2__soy136,opt_data.instances.length - 3));
    }
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.connectionProblemMultipleInstances.soyTemplateName = 'JIRA.Templates.DevStatus.connectionProblemMultipleInstances';
}


JIRA.Templates.DevStatus.connectionProblemSingleInstance = function(opt_data, opt_ignored) {
  return '<span class="instance" data-name="' + soy.$$escapeHtml(opt_data.instance.name) + '"><a href="' + soy.$$escapeHtml(opt_data.instance.baseUrl) + '" title="' + soy.$$escapeHtml(opt_data.instance.name) + '">' + soy.$$escapeHtml(opt_data.instance.name) + '</a></span>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.connectionProblemSingleInstance.soyTemplateName = 'JIRA.Templates.DevStatus.connectionProblemSingleInstance';
}


JIRA.Templates.DevStatus.lastUpdated = function(opt_data, opt_ignored) {
  return '' + ((opt_data.lastUpdated) ? '<dd class="sub-text' + ((opt_data.extraClass) ? ' ' + soy.$$escapeHtml(opt_data.extraClass) : '') + '">' + JIRA.Templates.DevStatus.transitionContainer({content: '<div>' + soy.$$escapeHtml(opt_data.text) + ' <time class="livestamp date user-tz allow-future" ' + ((opt_data.datetimeFormat) ? 'data-datetime-format="' + soy.$$escapeHtml(opt_data.datetimeFormat) + '" ' : '') + 'datetime="' + soy.$$escapeHtml(opt_data.lastUpdated) + '">$' + soy.$$escapeHtml(opt_data.lastUpdated) + '</time></div>'}) + '</dd>' : '');
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.lastUpdated.soyTemplateName = 'JIRA.Templates.DevStatus.lastUpdated';
}


JIRA.Templates.DevStatus.transitionContainer = function(opt_data, opt_ignored) {
  return '<div class="rolling-container sliding-container"><div class="rolling-content">' + soy.$$filterNoAutoescape(opt_data.content) + '</div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.transitionContainer.soyTemplateName = 'JIRA.Templates.DevStatus.transitionContainer';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-dialog-resources', location = 'templates/viewissue/devstatus-cta-dialog.soy' */
// This file was automatically generated from devstatus-cta-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.Dialog.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.Dialog == 'undefined') { JIRA.Templates.DevStatus.Dialog = {}; }


JIRA.Templates.DevStatus.Dialog.content = function(opt_data, opt_ignored) {
  var output = '<div class="jira-dialog-heading">' + ((opt_data.prompt) ? '<h2>' + soy.$$escapeHtml(opt_data.prompt) + '</h2>' : '') + '</div><div class="jira-dialog-content"><ul class="targets">';
  var remoteAppList10 = opt_data.remoteApps;
  var remoteAppListLen10 = remoteAppList10.length;
  for (var remoteAppIndex10 = 0; remoteAppIndex10 < remoteAppListLen10; remoteAppIndex10++) {
    var remoteAppData10 = remoteAppList10[remoteAppIndex10];
    output += '<li>' + JIRA.Templates.DevStatus.Dialog.remoteApp(remoteAppData10) + '</li>';
  }
  output += '</ul><div class="buttons-container"><div class="buttons"><button class="aui-button aui-button-link cancel" id="aui-dialog-close">' + soy.$$escapeHtml('Cancel') + '</button></div></div></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Dialog.content.soyTemplateName = 'JIRA.Templates.DevStatus.Dialog.content';
}


JIRA.Templates.DevStatus.Dialog.remoteApp = function(opt_data, opt_ignored) {
  return '<a class="target ' + ((opt_data.primary) ? 'primary' : '') + '" data-application-type="' + soy.$$escapeHtml(opt_data.applicationType) + '" href="' + soy.$$escapeHtml(opt_data.url) + '">' + ((opt_data.iconUrl) ? '<img class="application-icon" src="' + soy.$$escapeHtml(opt_data.iconUrl) + '">' : '<span class="application-icon ' + soy.$$escapeHtml(opt_data.iconClass) + '"></span>') + '<div class="title" title="' + soy.$$escapeHtml(opt_data.name) + '">' + soy.$$escapeHtml(opt_data.name) + '</div><div class="base-url" title="' + soy.$$escapeHtml(opt_data.baseUrl) + '">' + soy.$$escapeHtml(opt_data.baseUrl) + '</div></a>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Dialog.remoteApp.soyTemplateName = 'JIRA.Templates.DevStatus.Dialog.remoteApp';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-dialog-resources', location = 'templates/common/devstatus-common.soy' */
// This file was automatically generated from devstatus-common.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.Common.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.Common == 'undefined') { JIRA.Templates.DevStatus.Common = {}; }


JIRA.Templates.DevStatus.Common.learnMoreLink = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + ((opt_data.devToolsLearnMoreLink) ? ' <a href="' + soy.$$escapeHtml(opt_data.devToolsLearnMoreLink) + '" class="learn-more-link" target="_blank">' + soy.$$escapeHtml('Learn more') + '</a>' : '');
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Common.learnMoreLink.soyTemplateName = 'JIRA.Templates.DevStatus.Common.learnMoreLink';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-analytics-resources', location = 'js/analytics/devstatus-analytics.js' */
"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};define("jira/dev-status/analytics",["require","exports"],function(e,i){var n=e("jira/util/events"),t=e("jira/util/events/types"),a=e("jira/util/data/meta"),l=e("jquery"),c=e("underscore"),r=".edit-permission-link";i.Analytics={fireEvent:function(e,i){var n="devstatus."+e,t="object"!==("undefined"==typeof i?"undefined":_typeof(i))?{}:i;AJS.trigger("analyticsEvent",{name:n,data:t})},fireAgileDevStatusLinkClicked:function(){return i.Analytics.fireEvent("panel.agile.icon.clicked")}},i.SummaryAnalytics={fireSummaryShownEvent:function(e){var n=e.isAssignee,t=e.eventProperties,a=n?"assignee":"nonassignee";return i.Analytics.fireEvent("summary.shown."+a,t)},fireSummaryClickedEvent:function(e,n){var t=a.get("fusion-analytics-new-context-link"),l=".clicked";return t&&(a.set("fusion-analytics-new-context-link",void 0),l+=".newcontext"),i.Analytics.fireEvent(e+".summary"+l,n)},fireDetailTabClicked:function(e,n){return i.Analytics.fireEvent(n+".detail.tab.clicked",{applicationName:e})}},i.BuildsAnalytics={fireSummaryClickedEvent:function(e){return i.SummaryAnalytics.fireSummaryClickedEvent("builds",e)},fireDetailProjectClicked:function(){return i.Analytics.fireEvent("builds.detail.project.clicked")},fireDetailPlanClicked:function(){return i.Analytics.fireEvent("builds.detail.plan.clicked")},fireDetailBuildClicked:function(){return i.Analytics.fireEvent("builds.detail.build.clicked")}},i.DeploymentsAnalytics={fireSummaryClickedEvent:function(e){return i.SummaryAnalytics.fireSummaryClickedEvent("deployments",e)},fireDetailProjectClicked:function(){return i.Analytics.fireEvent("deployments.detail.project.clicked")},fireDetailEnvironmentClicked:function(){return i.Analytics.fireEvent("deployments.detail.environment.clicked")},fireDetailReleaseClicked:function(){return i.Analytics.fireEvent("deployments.detail.release.clicked")}},i.CommitsAnalytics={fireSummaryClickedEvent:function(e){return i.SummaryAnalytics.fireSummaryClickedEvent("commits",e)},fireDetailRepoClicked:function(e){return i.Analytics.fireEvent("commits.detail.repo.clicked",{applicationName:e})},fireDetailCommitClicked:function(e){return i.Analytics.fireEvent("commits.detail.commit.clicked",{applicationName:e})},fireDetailTabClicked:function(e){return i.SummaryAnalytics.fireDetailTabClicked(e,"commits")},fireDetailFileExpandedClicked:function(e){return i.Analytics.fireEvent("commits.detail.file.expanded.clicked",{applicationName:e})},fireDetailFilesExpandedClicked:function(e){return i.Analytics.fireEvent("commits.detail.files.expanded.clicked",{applicationName:e})},fireDetailFileClicked:function(e){return i.Analytics.fireEvent("commits.detail.file.clicked",{applicationName:e})},fireDetailReviewsShown:function(e){return i.Analytics.fireEvent("commits.detail.reviews.shown",{applicationName:e})},fireDetailReviewClicked:function(e){return i.Analytics.fireEvent("commits.detail.review.clicked",{applicationName:e})},fireDetailBranchesShown:function(e){return i.Analytics.fireEvent("commits.detail.branches.shown",{applicationName:e})},fireDetailCreateReviewClicked:function(e,n){return i.Analytics.fireEvent("commits.detail.review.create"+(n?".all":""),{applicationName:e})}},i.ReviewsAnalytics={fireSummaryClickedEvent:function(e){return i.SummaryAnalytics.fireSummaryClickedEvent("reviews",e)},fireDetailReviewClicked:function(){return i.Analytics.fireEvent("reviews.detail.review.clicked")}},i.BranchesAnalytics={fireSummaryClickedEvent:function(e){return i.SummaryAnalytics.fireSummaryClickedEvent("branches",e)},_fireDetailClickedEvent:function(e,n){return i.Analytics.fireEvent("branches.detail."+n+".clicked",{applicationName:e})},_fireDetailClickedEventAssignable:function(e,i,n,t){"undefined"!=typeof n&&"undefined"!=typeof t&&(n?e+=".assignee":(e+=".nonassignee",e+=t?".assignable":".nonassignable")),this._fireDetailClickedEvent(i,e)},fireDetailRepoClicked:function(e){this._fireDetailClickedEvent(e,"repo")},fireDetailBranchClicked:function(e){this._fireDetailClickedEvent(e,"branch")},fireDetailPullRequestLozengeClick:function(e){this._fireDetailClickedEvent(e,"pullrequest.lozenge")},fireDetailReviewLozengeClick:function(e){this._fireDetailClickedEvent(e,"review.lozenge")},fireDetailTabClicked:function(e){return i.SummaryAnalytics.fireDetailTabClicked(e,"branches")},fireDetailCreatePullRequestClicked:function(e,i,n){this._fireDetailClickedEventAssignable("pullrequest.create",e,i,n)},fireDetailCreateReviewClicked:function(e,i,n){this._fireDetailClickedEventAssignable("review.create",e,i,n)}},i.PullRequestsAnalytics={fireSummaryClickedEvent:function(e){return i.SummaryAnalytics.fireSummaryClickedEvent("pullrequests",e)},fireDetailPullRequestClicked:function(e){return i.Analytics.fireEvent("pullrequests.detail.pullrequest.clicked",{applicationName:e})},fireDetailTabClicked:function(e){return i.SummaryAnalytics.fireDetailTabClicked(e,"pullrequests")}},i.LearnMoreAnalytics={fireLearnMoreEvent:function(e,n){return i.Analytics.fireEvent("learnmore."+e,n)}},i.CtaDialogAnalytics={issueDetails:{},fireCreateBranchEvent:function(e,n){n="object"!==("undefined"==typeof n?"undefined":_typeof(n))?{}:n;var t=l.extend({issueStatus:this.issueDetails.status,issueType:this.issueDetails.type},n);return i.Analytics.fireEvent("createbranch."+e+"."+(this.issueDetails.isAssignee?"assignee":"nonassignee"),t)},_populateIssueDetails:function(e){this.issueDetails={status:""+e.data("issueStatus"),type:""+e.data("issueType"),isAssignee:e.data("isAssignee")}},_initHandler:function(e,i,n,t){if(n&&i.not(document).is(n)){var a=this;i.find(t).on("simpleClick",function(){var e=l(this);a._fireCreateBranchEvent(e)})}},_fireCreateBranchEvent:function(e){this._populateIssueDetails(e);var i="click",n=a.get("fusion-analytics-new-context-link");n&&(a.set("fusion-analytics-new-context-link",void 0),i+=".newcontext"),this.fireCreateBranchEvent(i)},initialize:function(e,a,r){var s=this;n.bind(t.NEW_CONTENT_ADDED,c.bind(function(i,n){this._initHandler(i,n,e,a)},this)),n.bind("GH.DetailView.updated",c.bind(function(i){this._initHandler(i,l(e),e,a)},this)),l(a).on("simpleClick",function(){var e=l(this);s._fireCreateBranchEvent(e)}),l(document).on("click","#"+r+" .jira-dialog-content .target",function(){var e=l(this);s.fireCreateBranchEvent("dialog.click",{title:e.find(".title").attr("title"),applicationType:e.data("applicationType")})}),l(document).on("click","#"+r+" .jira-dialog-content button.cancel",function(){s.fireCreateBranchEvent("dialog.cancel")}),l(document).on("click",".cta-tooltip .cta-learn-more-link",function(){i.LearnMoreAnalytics.fireLearnMoreEvent("click.ctahelptipbranching")})}},i.AdminAnalytics={fireAdminEvent:function(e,n){return i.Analytics.fireEvent("admin."+e,n)},initialize:function(){var e=this,n=l("#project-config-panel-dev-status");n.find(r).on("click",function(){e.fireAdminEvent("editpermissionlink.config."+(l("ul.permissions-list li.devstatus-admin-permission-item").length>0?"withpermissions":"nopermissions"))}),n.find(".learn-more-link").on("click",function(){i.LearnMoreAnalytics.fireLearnMoreEvent("click.adminappvertisementlink")}),n.find("#project-config-applinks-connect").on("click",function(){e.fireAdminEvent("connect")}),n.find(".devstatus-admin-connect-button-option").on("click",function(){var i=l(this).data("key")||"unknown";e.fireAdminEvent("connect."+i)})}},i.AdminSummaryAnalytics={initialize:function(){l("#project-config-webpanel-devstatus-admin-summary-panel").find(r).on("click",function(){i.AdminAnalytics.fireAdminEvent("editpermissionlink.summary.nopermissions")})}}}),function(e){AJS.namespace("JIRA.DevStatus.AdminAnalytics",null,e.AdminAnalytics),AJS.namespace("JIRA.DevStatus.AdminSummaryAnalytics",null,e.AdminSummaryAnalytics),AJS.namespace("JIRA.DevStatus.Analytics",null,e.Analytics),AJS.namespace("JIRA.DevStatus.BranchesAnalytics",null,e.BranchesAnalytics),AJS.namespace("JIRA.DevStatus.BuildsAnalytics",null,e.BuildsAnalytics),AJS.namespace("JIRA.DevStatus.CommitsAnalytics",null,e.CommitsAnalytics),AJS.namespace("JIRA.DevStatus.CtaDialogAnalytics",null,e.CtaDialogAnalytics),AJS.namespace("JIRA.DevStatus.DeploymentsAnalytics",null,e.DeploymentsAnalytics),AJS.namespace("JIRA.DevStatus.LearnMoreAnalytics",null,e.LearnMoreAnalytics),AJS.namespace("JIRA.DevStatus.PullRequestsAnalytics",null,e.PullRequestsAnalytics),AJS.namespace("JIRA.DevStatus.ReviewsAnalytics",null,e.ReviewsAnalytics),AJS.namespace("JIRA.DevStatus.SummaryAnalytics",null,e.SummaryAnalytics)}(require("jira/dev-status/analytics"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-analytics-resources', location = 'js/analytics/devstatus-rest-duration-analytics.js' */
"use strict";define("jira/dev-status/rest-duration-analytics",["jquery","underscore","jira/dev-status/time-tracking-analytics-event"],function(e,r,t){var n={ISSUE_SUMMARY_EVENT:"issue.summary.fetch.duration",ISSUE_DETAIL_EVENT:"issue.detail.fetch.duration",RR_TAB_EVENT:"release.report.tab.content.fetch.duration",ISSUE_BULK_SUMMARY_EVENT:"issue.bulksummary.fetch.duration",STALE_ISSUE_EVENT:"issue.stale.issue.fetch.duration"},s={},u=function(e){return e.indexOf("rest/dev-status/1.0/")>=0},a=function(e){return e.indexOf("rest/release-report/1.0")>=0},i=function(e){return e&&e.responseText?e.responseText.length:0},E=function(e,t){if(t){r.isArray(t)||(t=[t]);var n={};return e.split("?")[1].split("&").map(function(e){return e.split("=")}).filter(function(e){return r.include(t,e[0])}).reduce(function(e,t){var s=n[t[0]];s?r.isArray(s)?s.push(t[1]):n[t[0]]=[s,t[1]]:n[t[0]]=t[1]},{}),n}},o=function(e){return e.indexOf("issue/detail")>=0?n.ISSUE_DETAIL_EVENT:e.indexOf("issue/summary")>=0?n.ISSUE_SUMMARY_EVENT:e.indexOf("issue/bulksummary")>=0?n.ISSUE_BULK_SUMMARY_EVENT:e.indexOf("issue/stale-issues")>=0?n.STALE_ISSUE_EVENT:e.indexOf("release-report/1.0/tab/content")>=0?n.RR_TAB_EVENT:void 0},c=function(e,n,u){n||(n=[]),r.isArray(n)||(n=[n]),n.push("_");var a=E(e,n),i=new t(o(e),a._,r.extend(a,u));i.start(),s[i.getFullId()]=i},l=function(e){var r=o(e);if(r){var n=E(e,"_");return s[t.generateFullId(r,n?n._:void 0)]}},d=function(e,r){var t=l(e);t&&(t.endAndFire(r),delete s[t.getFullId()])},S=function(e){return e.status>=200&&e.status<300},_=function(e,r,t){c(t.url)},f=function(e,r,t){var n=S(r),s=n?JSON.parse(r.responseText):void 0,u={successful:n,contentLength:i(r),hasData:!(!s||!s.summary),hasErrors:!!(s&&s.errors&&s.errors.length)};d(t.url,u)},T=function(e,r,t){c(t.url,["applicationType","dataType"])},h=function(e,r,t){var n=S(r),s=n?JSON.parse(r.responseText):void 0,u={successful:n,contentLength:i(r),hasData:!!(s&&s.detail&&s.detail.length),hasErrors:!!(s&&s.errors&&s.errors.length)};d(t.url,u)},v=function(e,t,n){var s=E(n.url,["issueId"]).issueId,u=s?r.isArray(s)?s.length:1:0;c(n.url,[],{issues:u})},I=function(e,r,t){var n=S(r),s=n?JSON.parse(r.responseText):void 0,u={successful:n,contentLength:i(r),hasErrors:!!(s&&s.errors&&s.errors.length),changedIssues:n&&s.changedIssues?s.changedIssues.length:0,changed:n&&s.changed,devSummaryStale:n&&s.devSummaryStale};d(t.url,u)},U=function(e,r,t){c(t.url)},A=function(e,r,t){var n=S(r),s=n?JSON.parse(r.responseText):void 0,u={successful:n,contentLength:i(r),issues:n&&s?s.length:0};d(t.url,u)},p=function(e,r,t){c(t.url,"selectedTab")},N=function(e,r,t){var n=S(r),s={successful:n,contentLength:i(r)};d(t.url,s)},g={};g[n.ISSUE_DETAIL_EVENT]=T,g[n.ISSUE_SUMMARY_EVENT]=_,g[n.ISSUE_BULK_SUMMARY_EVENT]=v,g[n.STALE_ISSUE_EVENT]=U,g[n.RR_TAB_EVENT]=p;var V={};V[n.ISSUE_DETAIL_EVENT]=h,V[n.ISSUE_SUMMARY_EVENT]=f,V[n.ISSUE_BULK_SUMMARY_EVENT]=I,V[n.STALE_ISSUE_EVENT]=A,V[n.RR_TAB_EVENT]=N;var m=function(e,r,t,n){if(u(n.url)||a(n.url)){var s=e?g:V,i=s[o(n.url)];i&&i(r,t,n)}};e(document).ajaxSend(m.bind(null,!0)),e(document).ajaxComplete(m.bind(null,!1))});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-analytics-resources', location = 'js/analytics/time-tracking-analytics-event.js' */
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();define("jira/dev-status/time-tracking-analytics-event",["underscore","jquery","jira/dev-status/analytics"],function(t,e,n){return function(){function e(t,n,r){_classCallCheck(this,e),this.category=t,2===arguments.length&&"object"===("undefined"==typeof n?"undefined":_typeof(n))&&(r=n,n=void 0),this.id=n,this.data=r||{}}return _createClass(e,[{key:"start",value:function(t){return this.addData(t),this.startTime=window.performance.now(),this}},{key:"end",value:function(t){return this.addData(t),this.endTime=window.performance.now(),this.data.timeElapsed=Math.round(this.endTime-this.startTime),this}},{key:"endAndFire",value:function(t){return this.end(t).fire()}},{key:"fire",value:function(){return n.Analytics.fireEvent(this.category,this.data),this}},{key:"addData",value:function(e){return t.extend(this.data,e),this}},{key:"getFullId",value:function(){return this.constructor.generateFullId(this.category,this.id)}}],[{key:"generateFullId",value:function(t,e){return t+(e?"_"+e:"")}}]),e}()});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-analytics-resources', location = 'js/analytics/AnalyticsModel.js' */
"use strict";define("jira/devstatus/analytics-model",["backbone","underscore","jira/dev-status/rest-duration-analytics"],function(t,a){return t.Model.extend({TO_ANALYTIC_KEY_OVERRIDE:{repository:"commit"},properties:["issue","summary"],initialize:function(t){this.devStatusContainer=t.devStatusContainer,this.devStatusData=t.devStatusData,this._getAllAnalyticData()},getIssue:function(){return this.get("issue")},getSummary:function(){return this.get("summary")},_getAllAnalyticData:function(){this.set("issue",this._getAnalyticIssueData()),this._initListenerToData()},_getAnalyticIssueData:function(){return{isAssignee:this.devStatusContainer.data("is-assignee"),isAssignable:this.devStatusContainer.data("is-assignable"),issueStatus:this.devStatusContainer.data("issue-status"),issueType:this.devStatusContainer.data("issue-type"),issueId:this.devStatusContainer.data("issue-id"),projectId:this.devStatusContainer.data("project-id")}},_getAnalyticSummaryData:function(t){var e=this,s={};return a.each(t.summary,function(t,a){s[e.TO_ANALYTIC_KEY_OVERRIDE[a]||a]=t.overall.count>0}),s},_initListenerToData:function(){var t=this;this.devStatusData.on("requestSuccess",function(){t.set("summary",t._getAnalyticSummaryData(t.devStatusData.get("aggregatedData")))})}})}),Backbone.define("JIRA.DevStatus.AnalyticsModel",require("jira/devstatus/analytics-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:fusion-widget-common-clientside', location = 'templates/fusion-widget/fusion-widget-common.soy' */
// This file was automatically generated from fusion-widget-common.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.FusionWidget.Common.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.FusionWidget == 'undefined') { JIRA.Templates.FusionWidget = {}; }
if (typeof JIRA.Templates.FusionWidget.Common == 'undefined') { JIRA.Templates.FusionWidget.Common = {}; }


JIRA.Templates.FusionWidget.Common.branches = function(opt_data, opt_ignored) {
  return '' + soy.$$filterNoAutoescape(AJS.format('{0}{1}{2} {1,choice,1#branch|1\x3cbranches}','<span class="count">',opt_data.count,'</span>'));
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.branches.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.branches';
}


JIRA.Templates.FusionWidget.Common.buildsText = function(opt_data, opt_ignored) {
  var output = '';
  var tagStart__soy6 = '<span class="count">';
  var tagEnd__soy7 = '</span>';
  output += (opt_data.successfulBuildCount > 0) ? (opt_data.failedBuildCount > 0) ? soy.$$filterNoAutoescape(AJS.format('{0}{1}{2} {1,choice,1#build|1\x3cbuilds} failing',tagStart__soy6,opt_data.failedBuildCount,tagEnd__soy7)) : (opt_data.unknownBuildCount > 0) ? soy.$$filterNoAutoescape(AJS.format('{0}{1}{2} {1,choice,1#build|1\x3cbuilds}',tagStart__soy6,opt_data.successfulBuildCount,tagEnd__soy7)) : soy.$$filterNoAutoescape(AJS.format('{0}{1}{2} {1,choice,1#build|1\x3cbuilds}',tagStart__soy6,opt_data.count,tagEnd__soy7)) : (opt_data.failedBuildCount > 0) ? (opt_data.unknownBuildCount > 0) ? soy.$$filterNoAutoescape(AJS.format('{0}{1}{2} {1,choice,1#build|1\x3cbuilds} failing',tagStart__soy6,opt_data.failedBuildCount,tagEnd__soy7)) : soy.$$filterNoAutoescape(AJS.format('{0}{1}{2} {1,choice,1#build|1\x3cbuilds} failing',tagStart__soy6,opt_data.count,tagEnd__soy7)) : soy.$$filterNoAutoescape(AJS.format('{0}{1}{2} {1,choice,1#build|1\x3cbuilds} incomplete',tagStart__soy6,opt_data.count,tagEnd__soy7));
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.buildsText.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.buildsText';
}


JIRA.Templates.FusionWidget.Common.buildsIconClass = function(opt_data, opt_ignored) {
  return '' + ((opt_data.failedBuildCount > 0) ? 'aui-iconfont-error' : (opt_data.successfulBuildCount > 0) ? 'aui-iconfont-approve' : (opt_data.unknownBuildCount > 0) ? 'aui-iconfont-devtools-task-cancelled' : '');
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.buildsIconClass.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.buildsIconClass';
}


JIRA.Templates.FusionWidget.Common.commits = function(opt_data, opt_ignored) {
  return '' + soy.$$filterNoAutoescape(AJS.format('{0}{1}{2} {1,choice,1#commit|1\x3ccommits}','<span class="count">',opt_data.count,'</span>'));
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.commits.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.commits';
}


JIRA.Templates.FusionWidget.Common.deployments = function(opt_data, opt_ignored) {
  var output = '';
  var instanceOne__soy43 = '' + JIRA.Templates.FusionWidget.Common.deploymentsInstance({environment: opt_data.topEnvironments[0], showProjects: opt_data.showProjects});
  var instanceTwo__soy47 = '' + JIRA.Templates.FusionWidget.Common.deploymentsInstance({environment: opt_data.topEnvironments[1], showProjects: opt_data.showProjects});
  var instanceThree__soy51 = '' + JIRA.Templates.FusionWidget.Common.deploymentsInstance({environment: opt_data.topEnvironments[2], showProjects: opt_data.showProjects});
  output += soy.$$filterNoAutoescape(AJS.format('{5}Deployed{6} to {0,choice,1#{1}|2#{1} and {2}|3#{1}, {2} and {3}|3\x3c{1}, {2}, {3}, and {4} more}',opt_data.successfulCount,instanceOne__soy43,instanceTwo__soy47,instanceThree__soy51,opt_data.successfulCount - 3,opt_data.anchorStart,opt_data.anchorEnd));
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.deployments.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.deployments';
}


JIRA.Templates.FusionWidget.Common.deploymentsInstance = function(opt_data, opt_ignored) {
  return '' + ((opt_data.environment) ? '<span class="environment" ' + ((opt_data.showProjects) ? 'title="' + soy.$$escapeHtml(AJS.format('Project: {0}',opt_data.environment.project)) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.environment.title) + '</span>' : '');
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.deploymentsInstance.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.deploymentsInstance';
}


JIRA.Templates.FusionWidget.Common.pullRequestsText = function(opt_data, opt_ignored) {
  return '' + soy.$$filterNoAutoescape(AJS.format('{0}{1}{2} {1,choice,1#pull request|1\x3cpull requests}','<span class="count">',opt_data.stateCount,'</span>'));
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.pullRequestsText.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.pullRequestsText';
}


JIRA.Templates.FusionWidget.Common.reviewsText = function(opt_data, opt_ignored) {
  return '' + soy.$$filterNoAutoescape(AJS.format('{0}{1}{2} {1,choice,1#review|1\x3creviews}','<span class="count">',opt_data.stateCount,'</span>'));
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.reviewsText.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.reviewsText';
}


JIRA.Templates.FusionWidget.Common.reviewsState = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.FusionWidget.Common.stateLozenge({isSubtle: opt_data.isSubtle, lozengeClass: opt_data.stateClasses[opt_data.state], text: opt_data.stateText[opt_data.state], classes: opt_data.classes, tooltip: opt_data.tooltip, tooltipClass: opt_data.tooltipClass, tooltipText: opt_data.tooltipText});
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.reviewsState.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.reviewsState';
}


JIRA.Templates.FusionWidget.Common.pullRequestsStateViewIssue = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.FusionWidget.Common.reviewsState({isSubtle: true, state: opt_data.state, stateClasses: {OPEN: 'aui-lozenge-complete', MERGED: 'aui-lozenge-success', DECLINED: 'aui-lozenge-error'}, stateText: {OPEN: 'OPEN', MERGED: 'MERGED', DECLINED: 'DECLINED'}, classes: 'pullrequest-state'});
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.pullRequestsStateViewIssue.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.pullRequestsStateViewIssue';
}


JIRA.Templates.FusionWidget.Common.pullRequestsStateReleaseReport = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.FusionWidget.Common.reviewsState({isSubtle: true, state: opt_data.state, stateClasses: {OPEN: 'aui-lozenge-complete', MERGED: 'aui-lozenge-success', DECLINED: 'aui-lozenge-error'}, stateText: {OPEN: 'Under Review', MERGED: 'MERGED', DECLINED: 'DECLINED'}, tooltip: true, tooltipClass: 'fusion-widget-tooltip', tooltipText: opt_data.tooltipText});
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.pullRequestsStateReleaseReport.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.pullRequestsStateReleaseReport';
}


JIRA.Templates.FusionWidget.Common.reviewsStateViewIssue = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.FusionWidget.Common.reviewsState({isSubtle: true, state: opt_data.state, stateClasses: {REVIEW: 'aui-lozenge-complete', CLOSED: 'aui-lozenge-success', DRAFT: 'aui-lozenge-complete', DEAD: 'aui-lozenge-error', REJECTED: 'aui-lozenge-error', UNKNOWN: 'aui-lozenge-error', APPROVAL: 'aui-lozenge-current', SUMMARIZE: 'aui-lozenge-complete'}, stateText: {REVIEW: 'Open', CLOSED: 'Closed', DRAFT: 'Draft', DEAD: 'Abandoned', REJECTED: 'Rejected', UNKNOWN: 'Unknown', APPROVAL: 'Approval', SUMMARIZE: 'Summarize'}});
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.reviewsStateViewIssue.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.reviewsStateViewIssue';
}


JIRA.Templates.FusionWidget.Common.reviewsStateReleaseReport = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.FusionWidget.Common.reviewsState({isSubtle: true, state: opt_data.state, stateClasses: {REVIEW: 'aui-lozenge-complete', CLOSED: 'aui-lozenge-success', DRAFT: 'aui-lozenge-complete', DEAD: 'aui-lozenge-error', REJECTED: 'aui-lozenge-error', UNKNOWN: 'aui-lozenge-error', APPROVAL: 'aui-lozenge-complete', SUMMARIZE: 'aui-lozenge-complete'}, stateText: {REVIEW: 'Under Review', CLOSED: 'Closed', DRAFT: 'Draft', DEAD: 'Abandoned', REJECTED: 'Rejected', UNKNOWN: 'Unknown', APPROVAL: 'Under Review', SUMMARIZE: 'Under Review'}, tooltip: true, tooltipClass: 'fusion-widget-tooltip', tooltipText: opt_data.tooltipText});
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.reviewsStateReleaseReport.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.reviewsStateReleaseReport';
}


JIRA.Templates.FusionWidget.Common.stateLozenge = function(opt_data, opt_ignored) {
  return '<span class="aui-lozenge aui-lozenge-overflow ' + ((opt_data.isSubtle) ? 'aui-lozenge-subtle' : '') + ' ' + soy.$$escapeHtml(opt_data.lozengeClass) + ' ' + ((opt_data.tooltip) ? soy.$$escapeHtml(opt_data.tooltipClass) : '') + ' ' + ((opt_data.classes) ? soy.$$escapeHtml(opt_data.classes) : '') + '"' + ((opt_data.tooltip) ? 'data-tooltip="' + soy.$$escapeHtml(opt_data.tooltipText) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.text) + '</span>';
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.stateLozenge.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.stateLozenge';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-instance-picker-view', location = 'js/viewissue/dialog/InstancePickerView.js' */
"use strict";define("jira/devstatus/instance-picker-view",["backbone","jquery","underscore","jira-development-status/util/navigate"],function(e,t,s,i){return e.View.extend({ARROW_KEY_UP_CODE:38,ARROW_KEY_DOWN_CODE:40,template:JIRA.Templates.DevStatus.Dialog.content,events:{"keydown .jira-dialog-content":"_onTargetKeyboardSelect","focus .target":"_onTargetFocus"},initialize:function(e){this.currentSelected=null,this.link=e.activeTrigger,this.cta=e.cta,this.processTargets=e.processTargets,this.issueId=e.issueId,this.uniqueResultAction=e.uniqueResultAction||function(e){i.navigate(e.url)}},render:function(){var e=this._getIssueId(this.link),i=t.Deferred();return this._fetchTargets(this.cta,e).done(s.bind(function(e){this.processTargets&&(e.remoteApps=this.processTargets(e.remoteApps));var s=this._isUniqueResult(e);if(s)this.uniqueResultAction(s);else{var n=t(this.template(e));i.resolve(n)}},this)).fail(function(e){i.resolve(e)}),i.promise()},_fetchTargets:function(e,s){var i=t.Deferred();return t.ajax({url:contextPath+"/rest/dev-status/1.0/issue/targets?cta="+encodeURIComponent(e)+"&issueId="+encodeURIComponent(s)}).done(function(e){i.resolve(e)}).fail(function(e,t){i.reject(JIRA.SmartAjax.buildDialogErrorContent(e).html())}),i.promise()},_getIssueId:function(e){return this.issueId||e&&e.data("issueid")||t("#devstatus-container").data("issue-id")},_isUniqueResult:function(e){return 1===e.remoteApps.length&&e.remoteApps[0]},_toggleEntry:function(e,t,s){var i=e.eq(t);s&&i.focus(),i.addClass("selected"),this.currentSelected=i},_removeSelected:function(){this.currentSelected&&(this.currentSelected.removeClass("selected"),this.currentSelected=null)},_onTargetKeyboardSelect:function(e){if("keydown"===e.type){var t=0;if(e.keyCode===this.ARROW_KEY_UP_CODE?t=-1:e.keyCode===this.ARROW_KEY_DOWN_CODE&&(t=1),0!==t){e.preventDefault();var s=this.$el.find(".target"),i=s.index(this.$el.find(".selected"));i!==-1&&s.eq((i+t)%s.size()).focus()}}},_onTargetFocus:function(e){this._removeSelected(),this._toggleEntry(t(e.target),0,!1)}})}),Backbone.define("JIRA.DevStatus.InstancePickerView",require("jira/devstatus/instance-picker-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/dialog/CreateBranchFormDialog.js' */
"use strict";define("jira/devstatus/create-branch-form-dialog",["backbone","jquery","require","jira/dialog/form-dialog","jira-development-status/util/WRM"],function(e,t,i,a,r){return e.View.extend({initialize:function(e){AJS.namespace("JIRA.DevStatus.CtaDialog"),this.parentContainerSelector=e.parentContainerSelector,this.panelSelector=e.panelSelector,this.linkSelector=e.linkSelector,this.dialogId="devstatus-cta-dialog",JIRA.DevStatus.CtaDialogAnalytics.initialize(this.parentContainerSelector,this.linkSelector,this.dialogId),this._initFormDialog()},_initFormDialog:function(){var e=this,n=JIRA.DevStatus.CtaDialog.dialog=new a({id:this.dialogId,width:560,content:function(a){var o=this;r.requireDetailDialogResources(function(){var r=i("jira/devstatus/instance-picker-view");o.pickerView=new r({el:o.$popup,activeTrigger:o.$activeTrigger,cta:e._getCta(o.$activeTrigger)}),o.pickerView.render().always(function(e){a(e),t(n.$popup).find(".target").eq(0).focus(),JIRA.DevStatus.CtaDialogAnalytics.fireCreateBranchEvent("dialog.open")})})},trigger:this.linkSelector,autoClose:!0})},_getCta:function(e){var t=e.data("cta");if(t)return t;var i=e.attr("href"),a=i&&/\#([a-zA-Z\.]+)/.exec(i);return a&&a[1]}})}),Backbone.define("JIRA.DevStatus.CreateBranchFormDialog",require("jira/devstatus/create-branch-form-dialog"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/DevStatusModule.js' */
"use strict";define("jira/devstatus/dev-status-module",["backbone","jquery","require","underscore","jira/util/data/meta"],function(t,e,i,a,s){return t.Model.extend({initialize:function(t){a.defaults(this,t),this._listeners=new JIRA.DevStatus.Util.Listeners;var e=i("jira/devstatus/create-branch-form-dialog");this.createBranchFormDialog=new e(t),this.devSummaryJson=null,this.triggerHelpTipShown=!1,this.aitHelptip=null,this._initFocusHandler()},initializePanel:function(t){return this._listeners.stopListening(),this._renderedData=null,this._getContainers(t),this._createCreateBranchView(t),this.devSummaryJson=this.devStatusContainer.find(".dev-summary.json-blob").data("json"),this._createDevStatusData(t),this._createAnalyticsModel(t),this._createSummaryViews(t),this._setupDataEventHandlers(),this.devStatusPanelVisibilityToggler=t.devStatusPanelVisibilityToggler,this._startDevStatus(),this},_createCreateBranchView:function(t){var e=i("jira/devstatus/create-branch-view");this.createBranchView=new e({el:this.createBranchContainer,showTooltip:t.showTooltip})},_createDevStatusData:function(t){this.devStatusData=new JIRA.DevStatus.DevStatusData({issueId:this.devStatusContainer.data("issue-id"),issueKey:this.devStatusContainer.data("issue-key")})},_createSummaryViews:function(t){var i=this,s=this.devStatusContainer.data();this._summaryModules=a.clone(this.statusPanelContainer.find(".status-panel").map(function(){var t=e(this);return new(JIRA.DevStatus[t.data("module")])({dataAttrs:s,el:t,analyticsModel:i.analyticsModel})})),this._errorModule=new JIRA.DevStatus.SummaryErrorModule({el:this.messagePanelContainer,dataAttrs:s})},_createAnalyticsModel:function(t){this.analyticsModel=new JIRA.DevStatus.AnalyticsModel({devStatusContainer:this.devStatusContainer,devStatusData:this.devStatusData})},_getContainers:function(t){this.devStatusContainer=t.container,this.parentContainer=t.container.closest(this.parentContainerSelector),this.createBranchContainer=t.container.find(this.linkSelector),this.statusPanelContainer=t.container.find(this.statusPanelSelector),this.headerContainer=this.parentContainer.find(t.headerSelector),this.messagePanelContainer=t.container.find(".message-panel")},_onLoadingStarted:function(){this._startLoadingModuleData()},_onLoadingSuccess:function(t,e,i){var a=this.devStatusData.get("aggregatedData");this._renderModules({success:!0,renderData:a}),this._postRender(!e,i,a)},_onLoadingFailure:function(){this._renderModules({success:!1}),this._postRender(!1,!0)},_setupDataEventHandlers:function(){this._listeners.startListening(this.devStatusData,"beforeRequest",this._onLoadingStarted,this),this._listeners.startListening(this.devStatusData,"requestSuccess",this._onLoadingSuccess,this),this._listeners.startListening(this.devStatusData,"requestFail",this._onLoadingFailure,this)},_startDevStatus:function(){var t=!this.devSummaryJson||this.devSummaryJson.isStale===!0;this.devSummaryJson&&this.devStatusData.setAggregateData(this.devSummaryJson.cachedValue,!0,!t),t&&(this._startLoadingModuleData(),this.devStatusData.retrieveAggregateData())},_initFocusHandler:function(){var t=JIRA.DevStatus.DevStatusModule.MAX_REFRESH_WINDOW;e(window).on("focus",a.throttle(a.bind(this.refreshSummaryData,this),t,{trailing:!1}))},refreshSummaryData:function(){this.devStatusData&&this.devStatusData.retrieveAggregateData()},_postRender:function(t,e,i){function s(){e&&(u.addClass("js-animation-completed"),r._attachAutomaticTransitionsHelpTip(i))}var n=this._isAnySummaryViewVisibleOnPanel()||this._isAnyErrorViewVisible(),r=this;if(n){var o=this.analyticsModel.getIssue();JIRA.DevStatus.SummaryAnalytics.fireSummaryShownEvent({isAssignee:o.isAssignee,eventProperties:a.extend({},o,this.analyticsModel.getSummary())}),this._openDetailDialogUrlLink()}this._togglePanelEmptyStatus(!this._isAnySummaryViewVisibleOnPanel());var u=this.parentContainer,l=n||this.createBranchContainer.size()>0;this.devStatusPanelVisibilityToggler&&u.is(":visible")!==l?(this.devStatusPanelVisibilityToggler(this.parentContainer,l,t,s),!l&&this.aitHelptip&&this.aitHelptip.isVisible()&&this.aitHelptip.hide()):s()},_attachAutomaticTransitionsHelpTip:function(t){var i=this.parentContainer.is(":visible"),s=this._shouldRenderAITTooltip(t);!s&&this.aitHelptip&&this.aitHelptip.isVisible()?this.aitHelptip.hide():s&&!this.triggerHelpTipShown&&JIRA.DevStatus.showAITTooltip&&i&&(a.defer(a.bind(function(){this.aitHelptip=new AJS.HelpTip({id:"automaticTransitionDevSummaryTooltip",title:"Automate your status updates",bodyHtml:JIRA.Templates.DevStatus.Tooltip.automaticTransitions({aitHelpLinkUrl:this.devStatusContainer.data("ait-help-url-json")}),anchor:"#viewissue-devstatus-panel_heading .toggle-title",isSequence:!0,callbacks:{init:function(){e("#trigger-docs-link").on("click",function(){AJS.trigger("analyticsEvent",{name:"devstatus.automatic.transitions.learn.more.clicked",data:{}})})}},inlineDialogOpts:{width:400}}),AJS.HelpTip.Manager.showSequences()},this)),this.triggerHelpTipShown=!0)},_shouldRenderAITTooltip:function(t){return!!t&&(t.summary.branch.overall.count>0||t.summary.repository.overall.count>0||t.summary.pullrequest.overall.count>0||t.summary.review.overall.count>0)},_getModuleByType:function(t){return a.find(this._summaryModules,function(e){return e.data&&e.data.getType&&a.isEqual(e.data.getType(),t)})},_openDetailDialogUrlLink:function(){var t=s.get("fusion-open-detail-dialog");if(t){var e;if(JIRA.DevStatus.URL.isCreateReviewDetailDialogLink(t)?e=this._getModuleByType("repository"):(e=this._getModuleByType(t),e&&s.set("fusion-open-detail-dialog",void 0)),e){var i=e.view;i&&i.isVisible()&&(s.set("fusion-analytics-new-context-link",!0),i.getSummaryLink().click())}}},_togglePanelEmptyStatus:function(t){this.statusPanelContainer&&this.statusPanelContainer.toggleClass("empty-status",t)},_isAnySummaryViewVisibleOnPanel:function(){return!!a.find(this._summaryModules,function(t){return t.isViewVisible()})},_isAnyErrorViewVisible:function(){return this._errorModule.isViewVisible()},_renderModules:function(t){var e=this._renderedData=t.renderData||this._renderedData;a.each(this._summaryModules,function(t){t.render(e)}),this._errorModule.render(t.success?e:void 0)},_startLoadingModuleData:function(){a.each(this._summaryModules,function(t){t.startLoading()})}},{MAX_REFRESH_WINDOW:3e4})}),Backbone.define("JIRA.DevStatus.DevStatusModule",require("jira/devstatus/dev-status-module"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/DevStatusData.js' */
"use strict";define("jira/devstatus/dev-status-data",["backbone","jquery","underscore"],function(e,t,s){return e.Model.extend({properties:["aggregatedData"],namedEvents:["beforeRequest","requestFail","requestSuccess"],initialize:function(e){this.issueId=e.issueId,this.issueKey=e.issueKey},retrieveAggregateData:function(){var e=AJS.contextPath()+"/rest/dev-status/1.0/issue/summary?issueId="+this.issueId;return this.trigger("beforeRequest"),t.ajax(e).done(s.bind(this.setAggregateData,this)).fail(s.bind(this.setAggregateDataError,this)).promise()},setAggregateData:function(e,t,s){this.set("aggregatedData",e),this.trigger("requestSuccess",this,t===!0,!!s)},setAggregateDataError:function(e,t){this.set("aggregatedData",void 0),this.trigger("requestFail",this,e)}})}),Backbone.define("JIRA.DevStatus.DevStatusData",require("jira/devstatus/dev-status-data"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/summary/CreateBranchView.js' */
"use strict";define("jira/devstatus/create-branch-view",["backbone","underscore","jira/util/data/meta"],function(t,e,i){return t.View.extend({initialize:function(t){this.tooltipShown=!t.showTooltip,this.linkTextSelector=".devstatus-cta-link-text",this.issueContainer=".issue-container",this._processLinkForNavigableURL(),this._initTooltip(),e.defer(e.bind(this._openCreateBranchDialog,this))},getCreateBranchLink:function(){return this.$el},_processLinkForNavigableURL:function(){this.getCreateBranchLink().data("cta",this._getCta(this.$el)),this.getCreateBranchLink().attr("href",JIRA.DevStatus.URL.getUrlWithDetailDialogParam("create-branch"))},_openCreateBranchDialog:function(){var t=i.get("fusion-open-detail-dialog");"create-branch"===t&&(i.set("fusion-open-detail-dialog",void 0),i.set("fusion-analytics-new-context-link",!0),this.getCreateBranchLink().click())},_initTooltip:function(){!this.tooltipShown&&this.$el.length>0&&e.defer(e.bind(function(){var t=this.$el.data("cta");t&&(new AJS.HelpTip({id:t+".tooltip",title:"Start development",bodyHtml:JIRA.Templates.DevStatus.Tooltip.createBranch(),anchor:this.$el.find(this.linkTextSelector),isSequence:!0,inlineDialogOpts:{container:this.issueContainer,width:400}}),this.tooltipShown=!0,AJS.HelpTip.Manager.showSequences())},this))},_getCta:function(t){var e=t.attr("href"),i=e&&/\#([a-zA-Z\.]+)/.exec(e);return i&&i[1]}})}),Backbone.define("JIRA.DevStatus.CreateBranchView",require("jira/devstatus/create-branch-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/summary/BasePanelModule.js' */
"use strict";define("jira/devstatus/base-panel-module",["backbone","underscore"],function(e,t){return e.Model.extend({initialize:function(e){this.options=t.defaults({},e),this.data=this.createModel()},render:function(e){this.startViews(),this.data.updateData(e),this.view.render()},startLoading:function(){this.data.startLoadingData&&this.data.startLoadingData()},startViews:function(){this.view||(this.view=this.createView())},stopViews:function(){this.view&&(this.view.undelegateEvents(),this.view.$el.empty(),this.view.hide(),this.view=null)},isViewVisible:function(){return this.view&&this.view.isVisible()},createView:function(){},createModel:function(){}})}),Backbone.define("JIRA.DevStatus.BasePanelModule",require("jira/devstatus/base-panel-module"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/summary/BaseSummaryView.js' */
"use strict";define("jira/devstatus/base-summary-view",["backbone","jquery","underscore"],function(t,e,i){return t.View.extend({template:void 0,events:{"simpleClick .summary":"_onSummaryLinkClick"},initialize:function(t){this.options=i.clone(t),this.model.on("change:hasData",this._addOrRemoveHasDataClass,this),this.model.on("change:dataLoading",this._addOrRemoveDataLoadingClass,this),this.transitionView=new JIRA.DevStatus.SummaryTransitionView({model:this.model,el:this.$el})},render:function(){var t=this.isVisible();if(t){var s=e(this.template(i.extend({issueKey:this.options.dataAttrs.issueKey},this.model.getOverall())));this._shouldAnimateDataTransition()?this.transitionView.renderVisible(s):(this.$el.html(s),JIRA.DevStatus.Date.addTooltip(s)),this._renderNavigableSummaryLink(),this.show()}else this._isHidden()||(this._shouldAnimateDataTransition()?this.transitionView.renderHidden(i.bind(this.hide,this)):this.hide());this._addOrRemoveDataLoadingClass(),this._addOrRemoveHasDataClass()},getDefaultDetailDialogParameters:function(){return{issueKey:this.options.dataAttrs.issueKey,issueId:this.options.dataAttrs.issueId,tabs:this.model.get("byInstanceType"),dataType:this.model.getType(),showContactAdminForm:this.options.dataAttrs&&this.options.dataAttrs.showContactAdminForm}},getSummaryLink:function(){return this.$el.find("a.summary")},isVisible:function(){return this.model.getOverall().count>0},_addOrRemoveHasDataClass:function(){var t=this.model.get("hasData");this.$el.toggleClass("js-has-data",t)},_renderNavigableSummaryLink:function(){this.getSummaryLink().attr("href",JIRA.DevStatus.URL.getUrlWithDetailDialogParam(this.model.getType()))},_addOrRemoveDataLoadingClass:function(){var t=this.model.get("dataLoading");this.$el.toggleClass("data-loading",t)},_onSummaryLinkClick:function(t){t.preventDefault(),console.log("Summary view not supported: ",this)},_shouldAnimateDataTransition:function(){return!!this.model.getPreviousOverall()},_isHidden:function(){return this.$el.hasClass("hidden")},show:function(){this.$el.removeClass("hidden")},hide:function(){this.$el.addClass("hidden")}})}),Backbone.define("JIRA.DevStatus.BaseSummaryView",require("jira/devstatus/base-summary-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/summary/SummaryTransitionView.js' */
"use strict";define("jira/devstatus/summary-transition-view",["backbone","jquery","underscore","jira/dev-status/util/date"],function(i,t,n,s){return i.View.extend({slideTransitionTime:500,initialize:function(){},renderVisible:function(i){var e=!t.contains(document,this.$el[0]);this._hasPreviousData()?this._hasDataChanged()&&(this._prepareContentsForTransition(i,this.$el),this.$el.addClass("roll-transition")):(this._preStartSlideTransition(),this.$el.addClass("slide-down-transition"),e=!0),this.$el.html(i),s.addTooltip(i),e?n.defer(n.bind(this._initiateTransition,this)):this._initiateTransition()},renderHidden:function(i){var t=this;this.$el.slideUp(this.slideTransitionTime,function(){t.$el.css("display",""),i()})},_initiateTransition:function(){if(this.$el.hasClass("slide-down-transition"))this._postStartSlideTransition(),this.$el.removeClass("slide-down-transition"),this._startSlideDownTransition(this.$el,0);else{this.$el.hasClass("roll-transition")&&(this.$el.removeClass("roll-transition"),this._startRollTransition());var i=this.$el.find(".sliding-container");if(i.length>0){var n=this;i.each(function(i,s){var e=t(s),a=e.data("prevHeight");n._startSlideDownTransition(e,a)})}}},_startSlideDownTransition:function(i,t){var n=i.height();t!==n&&i.height(t).animate({height:n},this.slideTransitionTime,function(){i.css("height","auto"),i.find(".rolling-content").removeClass("transit")})},_startRollTransition:function(){this.$el.find(".rolling-container").each(n.bind(function(i,n){var s=t(n),e=s.find(".rolling-content"),a=e.find(":not(.old-content)"),r=a.height();s.height(r),e.addClass("transit"),a.css("margin-top","-"+r+"px").animate({"margin-top":"0"},this.slideTransitionTime,function(){s.css("height","auto"),s.find(".old-content").remove(),e.removeClass("transit"),a.css("margin-top","")})},this))},_prepareContentsForTransition:function(i,n){i=t("<div></div>").append(i);var s=i.find(".sliding-container"),e=n.find(".sliding-container");s.each(function(i,n){var s=e.get(i);if(s){var a=t(s);t(n).data("prevHeight",a.height())}});var a=i.find(".rolling-container"),r=n.find(".rolling-container");a.each(function(i,n){var s=t(n).find(".rolling-content"),e=r.get(i);if(e){var a=t(e).find(".rolling-content").children();a.addClass("old-content"),s.append(a)}})},_hasPreviousData:function(){var i=this.model.getPreviousOverall();return i&&i.count>0},_hasDataChanged:function(){return!n.isEqual(this.model.getOverall(),this.model.getPreviousOverall())},_preStartSlideTransition:function(){this.$el.css("height","0"),this.$el.css("opacity","0")},_postStartSlideTransition:function(){this.$el.css("height",""),this.$el.css("opacity","")}})}),Backbone.define("JIRA.DevStatus.SummaryTransitionView",require("jira/devstatus/summary-transition-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/summary/BaseSummaryModule.js' */
"use strict";define("jira/devstatus/base-summary-module",["underscore","jira/devstatus/base-panel-module"],function(e,t){return t.extend({model:void 0,viewType:void 0,createModel:function(){return new this.model({})},createView:function(){return new this.viewType(e.extend(e.clone(this.options),{model:this.data}))}})}),Backbone.define("JIRA.DevStatus.BaseSummaryModule",require("jira/devstatus/base-summary-module"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/summary/BaseSummaryModel.js' */
"use strict";define("jira/devstatus/base-summary-model",["backbone"],function(e){return e.Model.extend({typeId:void 0,properties:["byInstanceType","overall","previousOverall","hasData","dataLoading"],startLoadingData:function(){this.set("dataLoading",!0)},updateData:function(e){if(this.set("hasData",void 0!==e),this.set("dataLoading",!1),this.set("previousOverall",this.getOverall()),e&&e.summary&&e.summary[this.typeId]){var t=e.summary[this.typeId];this.set("byInstanceType",t.byInstanceType),this.set("overall",t.overall)}else this.set("byInstanceType",{}),this.set("overall",{count:0})},getType:function(){return this.typeId},getOverall:function(){return this.get("overall")},getPreviousOverall:function(){return this.get("previousOverall")}})}),Backbone.define("JIRA.DevStatus.BaseSummaryModel",require("jira/devstatus/base-summary-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/summary/SummaryErrorModule.js' */
"use strict";define("jira/devstatus/summary-error-module",["jira/devstatus/base-panel-module"],function(t){return t.extend({createModel:function(){return new JIRA.DevStatus.SummaryErrorModel({})},createView:function(){var t=this.options.dataAttrs&&this.options.dataAttrs.showContactAdminForm;return new JIRA.DevStatus.SummaryErrorView({model:this.data,el:this.options.el,showContactAdminForm:t})}})}),Backbone.define("JIRA.DevStatus.SummaryErrorModule",require("jira/devstatus/summary-error-module"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/summary/SummaryErrorModel.js' */
"use strict";define("jira/devstatus/summary-error-model",["backbone","underscore"],function(r,e){return r.Model.extend({properties:["hasErrors","errorInstances","configInstances"],defaults:function(){return{hasErrors:!1,errorInstances:[],configInstances:[]}},updateData:function(r){var t=this._extractErrors(r&&r.errors),s=this._extractErrors(r&&r.configErrors);this.set("hasErrors",!r||!e.isEmpty(t)||!e.isEmpty(s)),this.set("errorInstances",t),this.set("configInstances",s)},_extractErrors:function(r){return r?e.map(e.filter(r,function(r){return r.error}),function(r){return r.instance}):[]}})}),Backbone.define("JIRA.DevStatus.SummaryErrorModel",require("jira/devstatus/summary-error-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/summary/SummaryErrorView.js' */
"use strict";define("jira/devstatus/summary-error-view",["jira/devstatus/base-summary-view"],function(t){return t.extend({initialize:function(t){this.showContactAdminForm=t.showContactAdminForm},render:function(){return this.isVisible()?(this.$el.html(JIRA.Templates.DevStatus.connectionProblemAsInfoWithoutIcon({instances:this.model.get("errorInstances"),notConfiguredInstances:this.model.get("configInstances"),showContactAdminForm:this.showContactAdminForm})),this.show()):this.hide(),this},isVisible:function(){return this.model.get("hasErrors")}})}),Backbone.define("JIRA.DevStatus.SummaryErrorView",require("jira/devstatus/summary-error-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/DevStatusInit.js' */
"use strict";!function(){JIRA.DevStatus.setDetailDialogParam=function(){AJS.Meta.set("fusion-open-detail-dialog",JIRA.DevStatus.URL.getDetailDialogParam())},JIRA.DevStatus.setDetailDialogParam()}(),AJS.$(function(){function e(e){return e.find("body").hasClass("page-type-dashboard")}function t(e){return e.find("body").hasClass("ghx-agile")}function a(e){return e.find("body").hasClass("ka ajax-issue-search-and-view")}function n(){return AJS.Meta.get("is-servicedesk-rendered")}function i(e,t,a){JIRA.DevStatus.devStatusModule.initializePanel({container:e,showTooltip:JIRA.DevStatus.showTooltip,headerSelector:t,devStatusPanelVisibilityToggler:a})}function s(e,t,a,n){_.defer(function(){var i=a?1e3:0,s={duration:i,complete:n};t?e.slideDown(s):e.slideUp(s)})}JIRA.DevStatus.showTooltip=!0,JIRA.DevStatus.showAITTooltip=!0;var o={devStatusContainer:"#devstatus-container",parentContainer:"[id$='devstatus-panel']",link:"a.devstatus-cta-link",statusPanel:".status-panels",viewIssueHeader:".mod-header",agileHeader:".ghx-header",agileNavMenuLink:'a[href="#ghx-tab-com-atlassian-jira-plugins-jira-development-integration-plugin-greenhopper-devstatus-panel"]'};JIRA.DevStatus.documentReadyInit=function(u){if(JIRA.DevStatus.devStatusModule=new JIRA.DevStatus.DevStatusModule({parentContainerSelector:o.parentContainer,linkSelector:o.link,panelSelector:o.devStatusContainer,statusPanelSelector:o.statusPanel}),e(u)||t(u))u.find("body").on("click",o.agileNavMenuLink,JIRA.DevStatus.Analytics.fireAgileDevStatusLinkClicked),JIRA.DevStatus.showTooltip=!1,JIRA.DevStatus.showAITTooltip=!1;else if(a(u)&&JIRA.Issues.Api.isFullScreenIssueVisible()){var l=AJS.$(o.devStatusContainer);l.length>0&&i(l,o.viewIssueHeader,s)}n()&&(JIRA.DevStatus.showTooltip=!1,JIRA.DevStatus.showAITTooltip=!1),JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(e,t){return!!t.not(document).is(o.parentContainer)&&(i(t.find(o.devStatusContainer),o.viewIssueHeader,s),JIRA.DevStatus.showTooltip=!1,!0)}),JIRA.bind("GH.DetailView.updated",function(e,t){var a=AJS.$(o.devStatusContainer);a.length&&i(a,o.agileHeader)}),require(["jira-development-status/util/WRM"],function(e){e.requireDetailDialogResources()})},AJS.$(function(){JIRA.DevStatus.documentReadyInit(AJS.$(document))})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-commit-panel-resources', location = 'js/viewissue/summary/commit/CommitModel.js' */
"use strict";define("jira/devstatus/commit-model",["jira/devstatus/base-summary-model"],function(e){return e.extend({typeId:"repository"})}),Backbone.define("JIRA.DevStatus.CommitModel",require("jira/devstatus/commit-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-commit-panel-resources', location = 'templates/viewissue/commit/devstatus-panel-commit.soy' */
// This file was automatically generated from devstatus-panel-commit.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.Commit.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.Commit == 'undefined') { JIRA.Templates.DevStatus.Commit = {}; }


JIRA.Templates.DevStatus.Commit.summaryPanel = function(opt_data, opt_ignored) {
  return '<dl><dt>' + JIRA.Templates.DevStatus.transitionContainer({content: '<div class="summary-content"><a class="summary" href="#" title="' + soy.$$escapeHtml(AJS.format('Commits related to {0}',opt_data.issueKey)) + '">' + JIRA.Templates.FusionWidget.Common.commits(opt_data) + '</a></div>'}) + '</dt>' + JIRA.Templates.DevStatus.lastUpdated({text: 'Latest', lastUpdated: opt_data.lastUpdated, datetimeFormat: 'fullAge'}) + '</dl>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Commit.summaryPanel.soyTemplateName = 'JIRA.Templates.DevStatus.Commit.summaryPanel';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-commit-panel-resources', location = 'js/viewissue/summary/commit/CommitView.js' */
"use strict";define("jira/devstatus/commit-view",["underscore","jira/devstatus/base-summary-view","jira-development-status/util/WRM"],function(e,t,i){return t.extend({template:JIRA.Templates.DevStatus.Commit.summaryPanel,_onSummaryLinkClick:function(t){t.preventDefault();var a=this;i.requireDetailDialogResources(function(){var t=require("jira/devstatus/detail-dialog-commit-view");a.detailDialogCommitView=new t(e.extend(a.getDefaultDetailDialogParameters(),{id:"devstatus-commit-detail-dialog",count:a.model.getOverall().count})),JIRA.DevStatus.CommitsAnalytics.fireSummaryClickedEvent(a.options.analyticsModel.getSummary()),a.detailDialogCommitView.show()})}})}),Backbone.define("JIRA.DevStatus.CommitView",require("jira/devstatus/commit-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-commit-panel-resources', location = 'js/viewissue/summary/commit/CommitModule.js' */
"use strict";define("jira/devstatus/commit-module",["jira/devstatus/base-summary-module","jira/devstatus/commit-model","jira/devstatus/commit-view"],function(e,t,i){return e.extend({model:t,viewType:i})}),Backbone.define("JIRA.DevStatus.CommitModule",require("jira/devstatus/commit-module"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-pullrequest-panel-resources', location = 'js/viewissue/summary/pullrequest/PullRequestModel.js' */
"use strict";define("jira/devstatus/pull-request-model",["jira/devstatus/base-summary-model"],function(e){return e.extend({typeId:"pullrequest"})}),Backbone.define("JIRA.DevStatus.PullRequestModel",require("jira/devstatus/pull-request-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-pullrequest-panel-resources', location = 'templates/viewissue/pullrequest/devstatus-panel-pullrequest.soy' */
// This file was automatically generated from devstatus-panel-pullrequest.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.PullRequest.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.PullRequest == 'undefined') { JIRA.Templates.DevStatus.PullRequest = {}; }


JIRA.Templates.DevStatus.PullRequest.summaryPanel = function(opt_data, opt_ignored) {
  return '<dl><dt>' + JIRA.Templates.DevStatus.transitionContainer({content: '<div class="summary-content"><a class="summary" href="#" title="' + soy.$$escapeHtml(AJS.format('Pull requests related to {0}',opt_data.issueKey)) + '">' + JIRA.Templates.FusionWidget.Common.pullRequestsText(opt_data) + '</a> ' + JIRA.Templates.FusionWidget.Common.pullRequestsStateViewIssue(opt_data) + '</div>'}) + '</dt>' + JIRA.Templates.DevStatus.lastUpdated({text: 'Updated', lastUpdated: opt_data.lastUpdated, datetimeFormat: 'fullAge'}) + '</dl>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.PullRequest.summaryPanel.soyTemplateName = 'JIRA.Templates.DevStatus.PullRequest.summaryPanel';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-pullrequest-panel-resources', location = 'js/viewissue/summary/pullrequest/PullRequestView.js' */
"use strict";define("jira/devstatus/pull-request-view",["underscore","jira/devstatus/base-summary-view","jira-development-status/util/WRM"],function(e,t,u){return t.extend({template:JIRA.Templates.DevStatus.PullRequest.summaryPanel,_onSummaryLinkClick:function(t){t.preventDefault();var a=this;u.requireDetailDialogResources(function(){var t=require("jira/devstatus/detail-dialog-pull-request-view");a.detailDialogPullRequestView=new t(e.extend(a.getDefaultDetailDialogParameters(),{id:"devstatus-pullrequest-detail-dialog",count:a.model.getOverall().count,reviewersThreshold:2})),JIRA.DevStatus.PullRequestsAnalytics.fireSummaryClickedEvent(a.options.analyticsModel.getSummary()),a.detailDialogPullRequestView.show()})}})}),Backbone.define("JIRA.DevStatus.PullRequestView",require("jira/devstatus/pull-request-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-pullrequest-panel-resources', location = 'js/viewissue/summary/pullrequest/PullRequestModule.js' */
"use strict";define("jira/devstatus/pull-request-module",["jira/devstatus/base-summary-module","jira/devstatus/pull-request-model","jira/devstatus/pull-request-view"],function(e,u,t){return e.extend({model:u,viewType:t})}),Backbone.define("JIRA.DevStatus.PullRequestModule",require("jira/devstatus/pull-request-module"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-review-panel-resources', location = 'js/viewissue/summary/review/ReviewModel.js' */
"use strict";define("jira/devstatus/review-model",["jira/devstatus/base-summary-model"],function(e){return e.extend({typeId:"review"})}),Backbone.define("JIRA.DevStatus.ReviewModel",require("jira/devstatus/review-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-review-panel-resources', location = 'templates/viewissue/review/devstatus-panel-review.soy' */
// This file was automatically generated from devstatus-panel-review.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.Review.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.Review == 'undefined') { JIRA.Templates.DevStatus.Review = {}; }


JIRA.Templates.DevStatus.Review.summaryPanel = function(opt_data, opt_ignored) {
  return '<dl><dt>' + JIRA.Templates.DevStatus.transitionContainer({content: '<div class="summary-content"><a class="summary" href="#" title="' + soy.$$escapeHtml(AJS.format('Reviews related to {0}',opt_data.issueKey)) + '">' + JIRA.Templates.FusionWidget.Common.reviewsText(opt_data) + '</a> ' + JIRA.Templates.FusionWidget.Common.reviewsStateViewIssue(opt_data) + '</div>'}) + '</dt>' + JIRA.Templates.DevStatus.Review.reviewDate(soy.$$augmentMap(opt_data, {showUpdatedText: true})) + '</dl>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Review.summaryPanel.soyTemplateName = 'JIRA.Templates.DevStatus.Review.summaryPanel';
}


JIRA.Templates.DevStatus.Review.reviewDate = function(opt_data, opt_ignored) {
  return '' + ((opt_data.dueDate && ! opt_data.completed) ? JIRA.Templates.DevStatus.lastUpdated({text: 'Due', lastUpdated: opt_data.dueDate, extraClass: opt_data.overDue ? 'overdue' : undefined, datetimeFormat: 'fullAge'}) : (opt_data.lastUpdated) ? JIRA.Templates.DevStatus.lastUpdated({text: opt_data.showUpdatedText ? 'Updated' : '', lastUpdated: opt_data.lastUpdated, datetimeFormat: 'fullAge'}) : '');
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Review.reviewDate.soyTemplateName = 'JIRA.Templates.DevStatus.Review.reviewDate';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-review-panel-resources', location = 'js/viewissue/summary/review/ReviewView.js' */
"use strict";define("jira/devstatus/review-view",["underscore","jira/devstatus/base-summary-view","jira-development-status/util/WRM"],function(e,t,i){return t.extend({template:JIRA.Templates.DevStatus.Review.summaryPanel,_onSummaryLinkClick:function(t){t.preventDefault();var a=this;i.requireDetailDialogResources(function(){var t=require("jira/devstatus/detail-dialog-review-view");a.detailDialogReviewView=new t(e.extend(a.getDefaultDetailDialogParameters(),{id:"devstatus-review-detail-dialog",count:a.model.getOverall().count,reviewersThreshold:2,completed:a.model.getOverall().completed})),JIRA.DevStatus.ReviewsAnalytics.fireSummaryClickedEvent(a.options.analyticsModel.getSummary()),a.detailDialogReviewView.show()})}})}),Backbone.define("JIRA.DevStatus.ReviewView",require("jira/devstatus/review-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-review-panel-resources', location = 'js/viewissue/summary/review/ReviewModule.js' */
"use strict";define("jira/devstatus/review-module",["jira/devstatus/base-summary-module","jira/devstatus/review-model","jira/devstatus/review-view"],function(e,i,t){return e.extend({model:i,viewType:t})}),Backbone.define("JIRA.DevStatus.ReviewModule",require("jira/devstatus/review-module"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-branch-panel-resources', location = 'js/viewissue/summary/branch/BranchModel.js' */
"use strict";define("jira/devstatus/branch-model",["jira/devstatus/base-summary-model"],function(e){return e.extend({typeId:"branch"})}),Backbone.define("JIRA.DevStatus.BranchModel",require("jira/devstatus/branch-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-branch-panel-resources', location = 'templates/viewissue/branch/devstatus-panel-branch.soy' */
// This file was automatically generated from devstatus-panel-branch.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.Branches.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.Branches == 'undefined') { JIRA.Templates.DevStatus.Branches = {}; }


JIRA.Templates.DevStatus.Branches.summaryPanel = function(opt_data, opt_ignored) {
  return '<dl><dt>' + JIRA.Templates.DevStatus.transitionContainer({content: '<div class="summary-content"><a class="summary" href="#" title="' + soy.$$escapeHtml(AJS.format('Branches related to {0}',opt_data.issueKey)) + '">' + JIRA.Templates.FusionWidget.Common.branches(opt_data) + '</a></div>'}) + '</dt>' + JIRA.Templates.DevStatus.lastUpdated({text: 'Updated', lastUpdated: opt_data.lastUpdated, datetimeFormat: 'fullAge'}) + '</dl>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Branches.summaryPanel.soyTemplateName = 'JIRA.Templates.DevStatus.Branches.summaryPanel';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-branch-panel-resources', location = 'js/viewissue/summary/branch/BranchView.js' */
"use strict";define("jira/devstatus/branch-view",["require","underscore","jira/devstatus/base-summary-view","jira-development-status/util/WRM"],function(e,a,t,i){return t.extend({template:JIRA.Templates.DevStatus.Branches.summaryPanel,_onSummaryLinkClick:function(t){t.preventDefault();var r=this;i.requireDetailDialogResources(function(){var t=e("jira/devstatus/detail-dialog-branch-view");r.detailDialogBranchView=new t(a.extend(r.getDefaultDetailDialogParameters(),{id:"devstatus-branch-detail-dialog",count:r.model.getOverall().count,analyticIssueData:r.options.analyticsModel.getIssue()})),JIRA.DevStatus.BranchesAnalytics.fireSummaryClickedEvent(r.options.analyticsModel.getSummary()),r.detailDialogBranchView.show()})}})}),Backbone.define("JIRA.DevStatus.BranchView",require("jira/devstatus/branch-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-branch-panel-resources', location = 'js/viewissue/summary/branch/BranchModule.js' */
"use strict";define("jira/devstatus/branch-module",["jira/devstatus/base-summary-module","jira/devstatus/branch-model","jira/devstatus/branch-view"],function(e,a,t){return e.extend({model:a,viewType:t})}),Backbone.define("JIRA.DevStatus.BranchModule",require("jira/devstatus/branch-module"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-build-panel-resources', location = 'js/viewissue/summary/build/BuildModel.js' */
"use strict";define("jira/devstatus/build-model",["jira/devstatus/base-summary-model"],function(e){return e.extend({typeId:"build"})}),Backbone.define("JIRA.DevStatus.BuildModel",require("jira/devstatus/build-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-build-panel-resources', location = 'templates/viewissue/build/devstatus-panel-build.soy' */
// This file was automatically generated from devstatus-panel-build.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.Build.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.Build == 'undefined') { JIRA.Templates.DevStatus.Build = {}; }


JIRA.Templates.DevStatus.Build.summaryPanel = function(opt_data, opt_ignored) {
  var output = '<dl><dt>';
  var param4 = '<div class="summary-content"><a class="summary" href="#" title="' + soy.$$escapeHtml(AJS.format('Builds related to {0}',opt_data.issueKey)) + '">';
  var countText__soy8 = '' + JIRA.Templates.FusionWidget.Common.buildsText(opt_data);
  param4 += soy.$$filterNoAutoescape(countText__soy8) + '</a> ' + JIRA.Templates.DevStatus.Build.statusIcon(opt_data) + '</div>';
  output += JIRA.Templates.DevStatus.transitionContainer({content: param4});
  output += '</dt>' + JIRA.Templates.DevStatus.lastUpdated({text: 'Latest', lastUpdated: opt_data.lastUpdated, datetimeFormat: 'fullAge'}) + '</dl>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Build.summaryPanel.soyTemplateName = 'JIRA.Templates.DevStatus.Build.summaryPanel';
}


JIRA.Templates.DevStatus.Build.statusIcon = function(opt_data, opt_ignored) {
  var output = '';
  var iconClass__soy27 = '' + JIRA.Templates.FusionWidget.Common.buildsIconClass(opt_data);
  output += '<span class="aui-icon aui-icon-small ' + soy.$$escapeHtml(iconClass__soy27) + '">' + soy.$$escapeHtml(opt_data.iconText) + '</span>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Build.statusIcon.soyTemplateName = 'JIRA.Templates.DevStatus.Build.statusIcon';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-build-panel-resources', location = 'js/viewissue/summary/build/BuildView.js' */
"use strict";define("jira/devstatus/build-view",["underscore","jira/devstatus/base-summary-view","jira-development-status/util/WRM"],function(e,i,t){return i.extend({template:JIRA.Templates.DevStatus.Build.summaryPanel,_onSummaryLinkClick:function(i){i.preventDefault();var a=this;t.requireDetailDialogResources(function(){var i=require("jira/devstatus/detail-dialog-build-view");a.detailDialogBuildView=new i(e.extend(a.getDefaultDetailDialogParameters(),{id:"devstatus-build-detail-dialog",count:a.model.getOverall().count})),JIRA.DevStatus.BuildsAnalytics.fireSummaryClickedEvent(a.options.analyticsModel.getSummary()),a.detailDialogBuildView.show()})}})}),Backbone.define("JIRA.DevStatus.BuildView",require("jira/devstatus/build-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-build-panel-resources', location = 'js/viewissue/summary/build/BuildModule.js' */
"use strict";define("jira/devstatus/build-module",["jira/devstatus/base-summary-module","jira/devstatus/build-model","jira/devstatus/build-view"],function(e,u,d){return e.extend({model:u,viewType:d})}),Backbone.define("JIRA.DevStatus.BuildModule",require("jira/devstatus/build-module"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-deployment-panel-resources', location = 'js/viewissue/summary/deployment/DeploymentModel.js' */
"use strict";define("jira/devstatus/deployment-model",["jira/devstatus/base-summary-model"],function(e){return e.extend({typeId:"deployment-environment"})}),Backbone.define("JIRA.DevStatus.DeploymentModel",require("jira/devstatus/deployment-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-deployment-panel-resources', location = 'templates/viewissue/deployment/devstatus-panel-deployment.soy' */
// This file was automatically generated from devstatus-panel-deployment.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.Deployment.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.Deployment == 'undefined') { JIRA.Templates.DevStatus.Deployment = {}; }


JIRA.Templates.DevStatus.Deployment.summaryPanel = function(opt_data, opt_ignored) {
  return '<dl><dd>' + JIRA.Templates.DevStatus.transitionContainer({content: '<div class="summary-content" title="' + soy.$$escapeHtml(AJS.format('Deployments related to {0}',opt_data.issueKey)) + '">' + ((opt_data.topEnvironments.length) ? JIRA.Templates.FusionWidget.Common.deployments({anchorStart: '<a class="summary">', anchorEnd: '</a>', showProjects: opt_data.showProjects, successfulCount: opt_data.successfulCount, topEnvironments: opt_data.topEnvironments}) : soy.$$escapeHtml('No deployments contain latest commits')) + '</div>'}) + '</dd></dl>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Deployment.summaryPanel.soyTemplateName = 'JIRA.Templates.DevStatus.Deployment.summaryPanel';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-deployment-panel-resources', location = 'js/viewissue/summary/deployment/DeploymentView.js' */
"use strict";define("jira/devstatus/deployment-view",["underscore","jira/devstatus/base-summary-view","jira-development-status/util/WRM"],function(e,t,a){return t.extend({template:JIRA.Templates.DevStatus.Deployment.summaryPanel,_onSummaryLinkClick:function(t){t.preventDefault();var i=this;a.requireDetailDialogResources(function(){var t=require("jira/devstatus/detail-dialog-deployment-view");i.detailDialogDeploymentView=new t(e.extend(i.getDefaultDetailDialogParameters(),{id:"devstatus-deployment-detail-dialog",count:i.model.getOverall().count})),JIRA.DevStatus.DeploymentsAnalytics.fireSummaryClickedEvent(i.options.analyticsModel.getSummary()),i.detailDialogDeploymentView.show()})}})}),Backbone.define("JIRA.DevStatus.DeploymentView",require("jira/devstatus/deployment-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-deployment-panel-resources', location = 'js/viewissue/summary/deployment/DeploymentModule.js' */
"use strict";define("jira/devstatus/deployment-module",["jira/devstatus/base-summary-module","jira/devstatus/deployment-model","jira/devstatus/deployment-view"],function(e,t,d){return e.extend({model:t,viewType:d})}),Backbone.define("JIRA.DevStatus.DeploymentModule",require("jira/devstatus/deployment-module"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-cta-tooltip-resources', location = 'templates/viewissue/devstatus-cta-tooltips.soy' */
// This file was automatically generated from devstatus-cta-tooltips.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.Tooltip.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.Tooltip == 'undefined') { JIRA.Templates.DevStatus.Tooltip = {}; }


JIRA.Templates.DevStatus.Tooltip.createBranch = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.DevStatus.Tooltip.tooltipLayout({extraClasses: 'create-branch', content: '<span class="branch-illustration"></span><div class="branch-text"><p>' + soy.$$escapeHtml('Create a branch for this issue in your source repository') + '.<br /> <a class="cta-learn-more-link" href="https://www.atlassian.com/git/workflows" target="_blank">' + soy.$$escapeHtml('Learn more about branching strategies') + '.</a></p></div>'});
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Tooltip.createBranch.soyTemplateName = 'JIRA.Templates.DevStatus.Tooltip.createBranch';
}


JIRA.Templates.DevStatus.Tooltip.automaticTransitions = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.DevStatus.Tooltip.tooltipLayout({extraClasses: 'dev-summary-automatic-transitions', content: '<p>' + soy.$$escapeHtml('Now JIRA can automatically update your issue status when pull requests and other actions occur.') + '</p><p><a href="' + soy.$$escapeHtml(opt_data.aitHelpLinkUrl.url) + '" id="trigger-docs-link" target="_blank" title="' + soy.$$escapeHtml('Learn about automating your workflow') + '">' + soy.$$escapeHtml('Learn about automating your workflow') + '</a></p>'});
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Tooltip.automaticTransitions.soyTemplateName = 'JIRA.Templates.DevStatus.Tooltip.automaticTransitions';
}


JIRA.Templates.DevStatus.Tooltip.tooltipLayout = function(opt_data, opt_ignored) {
  return '<div class="cta-tooltip' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '">' + soy.$$filterNoAutoescape(opt_data.content) + '</div>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Tooltip.tooltipLayout.soyTemplateName = 'JIRA.Templates.DevStatus.Tooltip.tooltipLayout';
}
;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-internal-constants', location = 'node_modules/@atlassian/aui/src/js/aui/internal/constants.js' */
("undefined"===typeof window?global:window).__fa2d609d3773596cc2b702b68678a39c=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default={INPUT_SUFFIX:"-input"};return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-toggle', location = 'node_modules/@atlassian/aui/src/js/aui/toggle.js' */
("undefined"===typeof window?global:window).__1840a42d6d7e6ab244ecf3cf5bcc56cd=function(){function e(a){return a&&a.__esModule?a:{"default":a}}function c(a){return a._input||(a._input=a.querySelector("input"))}function f(a,b){c(b).removeAttribute(a)}function h(a,b,d){c(b).setAttribute(a,d.newValue)}function i(a){return{removed:f.bind(this,a),fallback:h.bind(this,a)}}"use strict";__e573296a636ce4ee054d5d3b9c8823fb;__8a6820c3d0bc5d638a8490d849a5b750;var g=__29fa312a51517f20df339a1900640e1d,d=e(__307d3e18fd611f85395c67cddeb1fe24),
k=e(__8339408c10b0a9052af9f3aad7b3a4e8),l=e(__f52b7059926ab2bdcd0aee12b4bc782b),m=e(__c1ce1f1e3e613f564fc234ff043570f1),n=__fa2d609d3773596cc2b702b68678a39c,j={removed:function(a){f.call(this,"form",a);a._formId=null},fallback:function(a,b){h.call(this,"form",a,b);a._formId=b.newValue}},o={removed:f.bind(void 0,"id"),fallback:function(a,b){c(a).setAttribute("id",""+b.newValue+n.INPUT_SUFFIX)}};(0,m.default)("aui-toggle",{template:(0,l.default)('<input type="checkbox" class="aui-toggle-input">','<span class="aui-toggle-view">',
'<span class="aui-toggle-tick aui-icon aui-icon-small aui-iconfont-success"></span>','<span class="aui-toggle-cross aui-icon aui-icon-small aui-iconfont-close-dialog"></span>',"</span>"),created:function(a){a._input=c(a);a._tick=a.querySelector(".aui-toggle-tick");a._cross=a.querySelector(".aui-toggle-cross");(0,d.default)(a._input).tooltip({title:function(){return this.checked?this.getAttribute("tooltip-on"):this.getAttribute("tooltip-off")},gravity:"s",hoverable:!1});a._input.addEventListener("keydown",
function(b){a.busy&&b.keyCode===AJS.keyCode.SPACE&&b.preventDefault()});-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&a._input.addEventListener("click",function(b){a.busy&&b.preventDefault()})},attached:function(a){(0,k.default)(a).attributeExists("label")},events:{click:function(a,b){!a.disabled&&(!a.busy&&b.target!==a._input)&&a._input.click();(0,g.setBooleanAttribute)(a,"checked",c(a).checked)}},attributes:{id:o,checked:{removed:function(a){f.call(this,"checked",a);c(a).checked=!1},
fallback:function(a,b){h.call(this,"checked",a,b);c(a).checked=!0}},disabled:i("disabled"),form:j,name:i("name"),value:i("value"),"tooltip-on":{value:"On",fallback:function(a,b){c(a).setAttribute("tooltip-on",b.newValue||"On")}},"tooltip-off":{value:"Off",fallback:function(a,b){c(a).setAttribute("tooltip-off",b.newValue||"Off")}},label:{removed:function(a){c(a).removeAttribute("aria-label")},
fallback:function(a,b){c(a).setAttribute("aria-label",b.newValue)}}},prototype:{focus:function(){this._input.focus();return this},get checked(){return this._input.checked},set checked(a){this._input.checked=a;return(0,g.setBooleanAttribute)(this,"checked",a)},get disabled(){return this._input.disabled},set disabled(a){return(0,g.setBooleanAttribute)(this,"disabled",a)},get form(){return document.getElementById(this._formId)},set form(a){j.fallback.call(this,this,{newValue:a||null});return this.form},
get name(){return this._input.name},set name(a){this.setAttribute("name",a);return a},get value(){return this._input.value},set value(a){this.setAttribute("value",null===a?"":a);return a},get busy(){return"true"===this._input.getAttribute("aria-busy")},set busy(a){(0,g.setBooleanAttribute)(this,"busy",a);a?(this._input.setAttribute("aria-busy","true"),this._input.indeterminate=!0,this.checked?((0,d.default)(this._input).addClass("indeterminate-checked"),(0,d.default)(this._tick).spin({zIndex:null})):
(0,d.default)(this._cross).spin({zIndex:null,color:"black"})):((0,d.default)(this._input).removeClass("indeterminate-checked"),this._input.indeterminate=!1,this._input.removeAttribute("aria-busy"),(0,d.default)(this._cross).spinStop(),(0,d.default)(this._tick).spinStop());var b=!!a;this.id&&Array.prototype.forEach.call(document.querySelectorAll('aui-label[for="'+this.id+'"]'),function(a){a.disabled=b});return a}}});return{}}.call(this);;
;
/* module-key = 'com.atlassian.plugin.jslibs:backbone-1.0.0-factory', location = 'factories/backbone/1.0.0/backbone-1.0.0-factory.js' */
(function(k){define("atlassian/libs/factories/backbone-1.0.0",function(){return function(t,i){var p={_:t,$:i};k.call(p);return"undefined"!==typeof exports?exports.noConflict():p.Backbone.noConflict()}})})(function(){var k=this,t=k.Backbone,i=[],p=i.push,u=i.slice,C=i.splice,g;g="undefined"!==typeof exports?exports:k.Backbone={};g.VERSION="1.0.0";var e=k._;!e&&"undefined"!==typeof require&&(e=require("underscore"));g.$=k.jQuery||k.Zepto||k.ender||k.$;g.noConflict=function(){k.Backbone=t;return this};
g.emulateHTTP=!1;g.emulateJSON=!1;var h=g.Events={on:function(a,b,c){if(!q(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});(this._events[a]||(this._events[a]=[])).push({callback:b,context:c,ctx:c||this});return this},once:function(a,b,c){if(!q(this,"once",a,[b,c])||!b)return this;var d=this,f=e.once(function(){d.off(a,f);b.apply(this,arguments)});f._callback=b;return this.on(a,f,c)},off:function(a,b,c){var d,f,v,g,j,w,l,h;if(!this._events||!q(this,"off",a,[b,c]))return this;if(!a&&
!b&&!c)return this._events={},this;g=a?[a]:e.keys(this._events);j=0;for(w=g.length;j<w;j++)if(a=g[j],v=this._events[a]){this._events[a]=d=[];if(b||c){l=0;for(h=v.length;l<h;l++)f=v[l],(b&&b!==f.callback&&b!==f.callback._callback||c&&c!==f.context)&&d.push(f)}d.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=u.call(arguments,1);if(!q(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;c&&x(c,b);d&&x(d,arguments);return this},stopListening:function(a,
b,c){var d=this._listeners;if(!d)return this;var f=!b&&!c;"object"===typeof b&&(c=this);a&&((d={})[a._listenerId]=a);for(var e in d)d[e].off(b,c,this),f&&delete this._listeners[e];return this}},y=/\s+/,q=function(a,b,c,d){if(!c)return!0;if("object"===typeof c){for(var f in c)a[b].apply(a,[f,c[f]].concat(d));return!1}if(y.test(c)){c=c.split(y);f=0;for(var e=c.length;f<e;f++)a[b].apply(a,[c[f]].concat(d));return!1}return!0},x=function(a,b){var c,d=-1,f=a.length,e=b[0],g=b[1],j=b[2];switch(b.length){case 0:for(;++d<
f;)(c=a[d]).callback.call(c.ctx);break;case 1:for(;++d<f;)(c=a[d]).callback.call(c.ctx,e);break;case 2:for(;++d<f;)(c=a[d]).callback.call(c.ctx,e,g);break;case 3:for(;++d<f;)(c=a[d]).callback.call(c.ctx,e,g,j);break;default:for(;++d<f;)(c=a[d]).callback.apply(c.ctx,b)}};e.each({listenTo:"on",listenToOnce:"once"},function(a,b){h[b]=function(b,d,f){var g=this._listeners||(this._listeners={}),o=b._listenerId||(b._listenerId=e.uniqueId("l"));g[o]=b;"object"===typeof d&&(f=this);b[a](d,f,this);return this}});
h.bind=h.on;h.unbind=h.off;e.extend(g,h);var n=g.Model=function(a,b){var c,d=a||{};b||(b={});this.cid=e.uniqueId("c");this.attributes={};e.extend(this,e.pick(b,D));b.parse&&(d=this.parse(d,b)||{});if(c=e.result(this,"defaults"))d=e.defaults({},d,c);this.set(d,b);this.changed={};this.initialize.apply(this,arguments)},D=["url","urlRoot","collection"];e.extend(n.prototype,h,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return e.clone(this.attributes)},
sync:function(){return g.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return e.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,b,c){var d,f,g,o,j,h,l;if(null==a)return this;"object"===typeof a?(f=a,c=b):(f={})[a]=b;c||(c={});if(!this._validate(f,c))return!1;g=c.unset;o=c.silent;a=[];j=this._changing;this._changing=!0;j||(this._previousAttributes=e.clone(this.attributes),this.changed={});l=this.attributes;h=this._previousAttributes;
this.idAttribute in f&&(this.id=f[this.idAttribute]);for(d in f)b=f[d],e.isEqual(l[d],b)||a.push(d),e.isEqual(h[d],b)?delete this.changed[d]:this.changed[d]=b,g?delete l[d]:l[d]=b;if(!o){a.length&&(this._pending=!0);b=0;for(d=a.length;b<d;b++)this.trigger("change:"+a[b],this,l[a[b]],c)}if(j)return this;if(!o)for(;this._pending;)this._pending=!1,this.trigger("change",this,c);this._changing=this._pending=!1;return this},unset:function(a,b){return this.set(a,void 0,e.extend({},b,{unset:!0}))},clear:function(a){var b=
{},c;for(c in this.attributes)b[c]=void 0;return this.set(b,e.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!e.isEmpty(this.changed):e.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?e.clone(this.changed):!1;var b,c=!1,d=this._changing?this._previousAttributes:this.attributes,f;for(f in a)if(!e.isEqual(d[f],b=a[f]))(c||(c={}))[f]=b;return c},previous:function(a){return null==a||!this._previousAttributes?null:this._previousAttributes[a]},previousAttributes:function(){return e.clone(this._previousAttributes)},
fetch:function(a){a=a?e.clone(a):{};void 0===a.parse&&(a.parse=!0);var b=this,c=a.success;a.success=function(d){if(!b.set(b.parse(d,a),a))return false;c&&c(b,d,a);b.trigger("sync",b,d,a)};r(this,a);return this.sync("read",this,a)},save:function(a,b,c){var d,f=this.attributes;null==a||"object"===typeof a?(d=a,c=b):(d={})[a]=b;if(d&&(!c||!c.wait)&&!this.set(d,c))return!1;c=e.extend({validate:!0},c);if(!this._validate(d,c))return!1;d&&c.wait&&(this.attributes=e.extend({},f,d));void 0===c.parse&&(c.parse=
!0);var g=this,h=c.success;c.success=function(a){g.attributes=f;var b=g.parse(a,c);c.wait&&(b=e.extend(d||{},b));if(e.isObject(b)&&!g.set(b,c))return false;h&&h(g,a,c);g.trigger("sync",g,a,c)};r(this,c);a=this.isNew()?"create":c.patch?"patch":"update";"patch"===a&&(c.attrs=d);a=this.sync(a,this,c);d&&c.wait&&(this.attributes=f);return a},destroy:function(a){var a=a?e.clone(a):{},b=this,c=a.success,d=function(){b.trigger("destroy",b,b.collection,a)};a.success=function(e){(a.wait||b.isNew())&&d();c&&
c(b,e,a);b.isNew()||b.trigger("sync",b,e,a)};if(this.isNew())return a.success(),!1;r(this,a);var f=this.sync("delete",this,a);a.wait||d();return f},url:function(){var a=e.result(this,"urlRoot")||e.result(this.collection,"url")||z();return this.isNew()?a:a+("/"===a.charAt(a.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(a){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(a){return this._validate({},e.extend(a||
{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;var a=e.extend({},this.attributes,a),c=this.validationError=this.validate(a,b)||null;if(!c)return!0;this.trigger("invalid",this,c,e.extend(b||{},{validationError:c}));return!1}});e.each("keys values pairs invert pick omit".split(" "),function(a){n.prototype[a]=function(){var b=u.call(arguments);b.unshift(this.attributes);return e[a].apply(e,b)}});var s=g.Collection=function(a,b){b||(b={});b.url&&(this.url=b.url);b.model&&
(this.model=b.model);void 0!==b.comparator&&(this.comparator=b.comparator);this._reset();this.initialize.apply(this,arguments);a&&this.reset(a,e.extend({silent:!0},b))},E={add:!0,remove:!0,merge:!0},F={add:!0,merge:!1,remove:!1};e.extend(s.prototype,h,{model:n,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return g.sync.apply(this,arguments)},add:function(a,b){return this.set(a,e.defaults(b||{},F))},remove:function(a,b){a=e.isArray(a)?
a.slice():[a];b||(b={});var c,d,f,g;c=0;for(d=a.length;c<d;c++)if(g=this.get(a[c]))delete this._byId[g.id],delete this._byId[g.cid],f=this.indexOf(g),this.models.splice(f,1),this.length--,b.silent||(b.index=f,g.trigger("remove",g,this,b)),this._removeReference(g);return this},set:function(a,b){b=e.defaults(b||{},E);b.parse&&(a=this.parse(a,b));e.isArray(a)||(a=a?[a]:[]);var c,d,f,g,h,j=b.at,k=this.comparator&&null==j&&!1!==b.sort,l=e.isString(this.comparator)?this.comparator:null,i=[],m=[],n={};c=
0;for(d=a.length;c<d;c++)if(f=this._prepareModel(a[c],b))(g=this.get(f))?(b.remove&&(n[g.cid]=!0),b.merge&&(g.set(f.attributes,b),k&&(!h&&g.hasChanged(l))&&(h=!0))):b.add&&(i.push(f),f.on("all",this._onModelEvent,this),this._byId[f.cid]=f,null!=f.id&&(this._byId[f.id]=f));if(b.remove){c=0;for(d=this.length;c<d;++c)n[(f=this.models[c]).cid]||m.push(f);m.length&&this.remove(m,b)}i.length&&(k&&(h=!0),this.length+=i.length,null!=j?C.apply(this.models,[j,0].concat(i)):p.apply(this.models,i));h&&this.sort({silent:!0});
if(b.silent)return this;c=0;for(d=i.length;c<d;c++)(f=i[c]).trigger("add",f,this,b);h&&this.trigger("sort",this,b);return this},reset:function(a,b){b||(b={});for(var c=0,d=this.models.length;c<d;c++)this._removeReference(this.models[c]);b.previousModels=this.models;this._reset();this.add(a,e.extend({silent:!0},b));b.silent||this.trigger("reset",this,b);return this},push:function(a,b){a=this._prepareModel(a,b);this.add(a,e.extend({at:this.length},b));return a},pop:function(a){var b=this.at(this.length-
1);this.remove(b,a);return b},unshift:function(a,b){a=this._prepareModel(a,b);this.add(a,e.extend({at:0},b));return a},shift:function(a){var b=this.at(0);this.remove(b,a);return b},slice:function(a,b){return this.models.slice(a,b)},get:function(a){return null==a?void 0:this._byId[null!=a.id?a.id:a.cid||a]},at:function(a){return this.models[a]},where:function(a,b){return e.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var d in a)if(a[d]!==b.get(d))return!1;return!0})},findWhere:function(a){return this.where(a,
!0)},sort:function(a){if(!this.comparator)throw Error("Cannot sort a set without a comparator");a||(a={});e.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(e.bind(this.comparator,this));a.silent||this.trigger("sort",this,a);return this},sortedIndex:function(a,b,c){b||(b=this.comparator);var d=e.isFunction(b)?b:function(a){return a.get(b)};return e.sortedIndex(this.models,a,d,c)},pluck:function(a){return e.invoke(this.models,"get",
a)},fetch:function(a){a=a?e.clone(a):{};void 0===a.parse&&(a.parse=!0);var b=a.success,c=this;a.success=function(d){c[a.reset?"reset":"set"](d,a);b&&b(c,d,a);c.trigger("sync",c,d,a)};r(this,a);return this.sync("read",this,a)},create:function(a,b){b=b?e.clone(b):{};if(!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var c=this,d=b.success;b.success=function(e){b.wait&&c.add(a,b);d&&d(a,e,b)};a.save(null,b);return a},parse:function(a){return a},clone:function(){return new this.constructor(this.models)},
_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(a,b){if(a instanceof n)return a.collection||(a.collection=this),a;b||(b={});b.collection=this;var c=new this.model(a,b);return!c._validate(a,b)?(this.trigger("invalid",this,a,b),!1):c},_removeReference:function(a){this===a.collection&&delete a.collection;a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"===a||"remove"===a)&&c!==this||("destroy"===a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&
(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments))}});e.each("forEach each map collect reduce foldl inject reduceRight foldr find detect filter select reject every all some any include contains invoke max min toArray size first head take initial rest tail drop last without indexOf shuffle lastIndexOf isEmpty chain".split(" "),function(a){s.prototype[a]=function(){var b=u.call(arguments);b.unshift(this.models);return e[a].apply(e,b)}});
e.each(["groupBy","countBy","sortBy"],function(a){s.prototype[a]=function(b,c){var d=e.isFunction(b)?b:function(a){return a.get(b)};return e[a](this.models,d,c)}});var i=g.View=function(a){this.cid=e.uniqueId("view");this._configure(a||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()},G=/^(\S+)\s*(.*)$/,H="model collection el id attributes className tagName events".split(" ");e.extend(i.prototype,h,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},
render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(a,b){this.$el&&this.undelegateEvents();this.$el=a instanceof g.$?a:g.$(a);this.el=this.$el[0];!1!==b&&this.delegateEvents();return this},delegateEvents:function(a){if(!a&&!(a=e.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var c=a[b];e.isFunction(c)||(c=this[a[b]]);if(c){var d=b.match(G),f=d[1],d=d[2],c=e.bind(c,this),f=f+(".delegateEvents"+this.cid);
if(""===d)this.$el.on(f,c);else this.$el.on(f,d,c)}}return this},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid);return this},_configure:function(a){this.options&&(a=e.extend({},e.result(this,"options"),a));e.extend(this,e.pick(a,H));this.options=a},_ensureElement:function(){if(this.el)this.setElement(e.result(this,"el"),!1);else{var a=e.extend({},e.result(this,"attributes"));this.id&&(a.id=e.result(this,"id"));this.className&&(a["class"]=e.result(this,"className"));a=g.$("<"+
e.result(this,"tagName")+">").attr(a);this.setElement(a,!1)}}});g.sync=function(a,b,c){var d=I[a];e.defaults(c||(c={}),{emulateHTTP:g.emulateHTTP,emulateJSON:g.emulateJSON});var f={type:d,dataType:"json"};c.url||(f.url=e.result(b,"url")||z());if(null==c.data&&b&&("create"===a||"update"===a||"patch"===a))f.contentType="application/json",f.data=JSON.stringify(c.attrs||b.toJSON(c));c.emulateJSON&&(f.contentType="application/x-www-form-urlencoded",f.data=f.data?{model:f.data}:{});if(c.emulateHTTP&&("PUT"===
d||"DELETE"===d||"PATCH"===d)){f.type="POST";c.emulateJSON&&(f.data._method=d);var h=c.beforeSend;c.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",d);if(h)return h.apply(this,arguments)}}"GET"!==f.type&&!c.emulateJSON&&(f.processData=!1);if("PATCH"===f.type&&window.ActiveXObject&&(!window.external||!window.external.msActiveXFilteringEnabled))f.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")};a=c.xhr=g.ajax(e.extend(f,c));b.trigger("request",b,a,c);return a};var I=
{create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};g.ajax=function(){return g.$.ajax.apply(g.$,arguments)};var A=g.Router=function(a){a||(a={});a.routes&&(this.routes=a.routes);this._bindRoutes();this.initialize.apply(this,arguments)},J=/\((.*?)\)/g,K=/(\(\?)?:\w+/g,L=/\*\w+/g,M=/[\-{}\[\]+?.,\\\^$|#\s]/g;e.extend(A.prototype,h,{initialize:function(){},route:function(a,b,c){e.isRegExp(a)||(a=this._routeToRegExp(a));e.isFunction(b)&&(c=b,b="");c||(c=this[b]);var d=this;g.history.route(a,
function(e){e=d._extractParameters(a,e);c&&c.apply(d,e);d.trigger.apply(d,["route:"+b].concat(e));d.trigger("route",b,e);g.history.trigger("route",d,b,e)});return this},navigate:function(a,b){g.history.navigate(a,b);return this},_bindRoutes:function(){if(this.routes){this.routes=e.result(this,"routes");for(var a,b=e.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){a=a.replace(M,"\\$&").replace(J,"(?:$1)?").replace(K,function(a,c){return c?a:"([^/]+)"}).replace(L,
"(.*?)");return RegExp("^"+a+"$")},_extractParameters:function(a,b){var c=a.exec(b).slice(1);return e.map(c,function(a){return a?decodeURIComponent(a):null})}});var m=g.History=function(){this.handlers=[];e.bindAll(this,"checkUrl");"undefined"!==typeof window&&(this.location=window.location,this.history=window.history)},B=/^[#\/]|\s+$/g,N=/^\/+|\/+$/g,O=/msie [\w.]+/,P=/\/$/;m.started=!1;e.extend(m.prototype,h,{interval:50,getHash:function(a){return(a=(a||this).location.href.match(/#(.*)$/))?a[1]:
""},getFragment:function(a,b){if(null==a)if(this._hasPushState||!this._wantsHashChange||b){var a=this.location.pathname,c=this.root.replace(P,"");a.indexOf(c)||(a=a.substr(c.length))}else a=this.getHash();return a.replace(B,"")},start:function(a){if(m.started)throw Error("Backbone.history has already been started");m.started=!0;this.options=e.extend({},{root:"/"},this.options,a);this.root=this.options.root;this._wantsHashChange=!1!==this.options.hashChange;this._wantsPushState=!!this.options.pushState;
this._hasPushState=!(!this.options.pushState||!this.history||!this.history.pushState);var a=this.getFragment(),b=document.documentMode,b=O.exec(navigator.userAgent.toLowerCase())&&(!b||7>=b);this.root=("/"+this.root+"/").replace(N,"/");b&&this._wantsHashChange&&(this.iframe=g.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(a));if(this._hasPushState)g.$(window).on("popstate",this.checkUrl);else if(this._wantsHashChange&&"onhashchange"in window&&
!b)g.$(window).on("hashchange",this.checkUrl);else this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval));this.fragment=a;a=this.location;b=a.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!b)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&(this._hasPushState&&b&&a.hash)&&(this.fragment=this.getHash().replace(B,
""),this.history.replaceState({},document.title,this.root+this.fragment+a.search));if(!this.options.silent)return this.loadUrl()},stop:function(){g.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);m.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(){var a=this.getFragment();a===this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe)));if(a===this.fragment)return!1;this.iframe&&
this.navigate(a);this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(a){var b=this.fragment=this.getFragment(a);return e.any(this.handlers,function(a){if(a.route.test(b))return a.callback(b),!0})},navigate:function(a,b){if(!m.started)return!1;if(!b||!0===b)b={trigger:b};a=this.getFragment(a||"");if(this.fragment!==a){this.fragment=a;var c=this.root+a;if(this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else if(this._wantsHashChange)this._updateHash(this.location,
a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace));else return this.location.assign(c);b.trigger&&this.loadUrl(a)}},_updateHash:function(a,b,c){c?(c=a.href.replace(/(javascript:|#).*$/,""),a.replace(c+"#"+b)):a.hash="#"+b}});g.history=new m;n.extend=s.extend=A.extend=i.extend=m.extend=function(a,b){var c=this,d;d=a&&e.has(a,"constructor")?a.constructor:function(){return c.apply(this,
arguments)};e.extend(d,c,b);var f=function(){this.constructor=d};f.prototype=c.prototype;d.prototype=new f;a&&e.extend(d.prototype,a);d.__super__=c.prototype;return d};var z=function(){throw Error('A "url" property or function must be specified');},r=function(a,b){var c=b.error;b.error=function(d){c&&c(a,d,b);a.trigger("error",a,d,b)}}});;
;
/* module-key = 'com.atlassian.plugin.jslibs:brace-1.1.0-factory', location = 'factories/brace/1.1.0/brace-1.1.0-factory.js' */
(function(j){define("atlassian/libs/factories/brace-1.1.0",function(){return function(n,g){var c={_:n,Backbone:g};j.call(c);c=c.Brace.noConflict();c.VERSION="1.1.0";return c}})})(function(){var j=this,n=j.Brace,g,c=j._,i=j.Backbone,o=function(a){return c.isArray(a)?c.reduce(a,function(b,a){b[a]=null;return b},{}):a},m=function(a,b){if(!a||null==b||a===String&&c.isString(b)||a===Number&&c.isNumber(b)||a===Boolean&&c.isBoolean(b))return b;if("string"===typeof a||a instanceof String){if(typeof b!==""+
a)throw"The typeof "+b+" is "+typeof b+" but expected it to be "+a;return b}if(c.isArray(a)||a===Array){if(!c.has(b,"length")||b instanceof String||c.has({string:1,"function":1},typeof b)||b instanceof i.Collection)throw"Array type expected, but nonnull, non-Array value provided.";return a===Array||!a[0]?b:c.map(b,c.bind(m,null,a[0]))}if("function"!==typeof a)throw"Invalid expected type "+a+". Should be falsy, String, Array, Backbone.Collection constructor, or function.";return b instanceof a?b:p(a)?
new a(m([a.model],b)):new a(b)},p=function(a,b){return a&&(a.__super__ instanceof(b||i.Collection)||a.__super__===(b||i.Collection).prototype||a===(b||i.Collection))},x=function(a,b){var d={};c.each(a,function(a,c){if(!b[c]||q(a,b[c]))d[c]=a;else if(a&&!q(b[c],a))throw c+" has conflicted type descriptors.";});return d},q=function(a,b){return!b||b===a?!0:!a||"string"===typeof a?!1:a instanceof Array?b===Array||b instanceof Array&&q(a[0],b[0]):"function"!==typeof b?!1:p(b)?p(a,b):a.prototype instanceof
b};g=function(a){var b=a.extend(),d=a.extend;b.extend=function w(a,b){var h,g=c.extend({},a),i;a&&a.mixins&&(i=a.mixins,delete g.mixins);h=d.call(this,g,b);this.prototype.namedEvents&&f.Mixins.applyMixin(h,{namedEvents:this.prototype.namedEvents});this.prototype.namedAttributes&&f.Mixins.applyMixin(h,{namedAttributes:this.prototype.namedAttributes});this.prototype.ignoreUnknownAttributes&&f.Mixins.applyMixin(h,{ignoreUnknownAttributes:this.prototype.ignoreUnknownAttributes});i&&c.each(a.mixins,function(a){f.Mixins.applyMixin(h,
a)});h.prototype.namedEvents&&f.Mixins.applyMixin(h,f.EventsMixinCreator.create(h.prototype.namedEvents));h.prototype.namedAttributes&&(h.prototype.namedAttributes=o(h.prototype.namedAttributes),f.Mixins.applyMixin(h,f.AttributesMixinCreator.create(h.prototype.namedAttributes,h.prototype.idAttribute)));if(h.prototype.toJSON){var j=h.prototype.toJSON;h.prototype.toJSON=function(){var a;a=j.call(this);a=c.isObject(a)?c.reduce(a,function(a,b,d){b&&c.isFunction(b.toJSON)?a[d]=b.toJSON():c.isArray(b)&&
(a[d]=c.map(b,function(a){return a&&c.isFunction(a.toJSON)?a.toJSON():a}));return a},a):a;return a}}h.extend=w;return h};return b};var f={Mixins:{createMethodName:function(a,b){return a+b.charAt(0).toUpperCase()+b.substr(1)},applyMixin:function(a,b){c.forEach(c.keys(b),function(d){var e=a.prototype;if("initialize"===d){var f=e.initialize;e.initialize=function(){f&&f.apply(this,arguments);b.initialize.apply(this,arguments)}}else if("validate"===d){var g=e.validate;e.validate=function(){if(g){var a=
g.apply(this,arguments);if(a)return a}return b.validate.apply(this,arguments)}}else if("defaults"===d){var e=e.defaults||(e.defaults={}),d=b[d],k;for(k in d){if(e.hasOwnProperty(k))throw"Mixin error: class already has default '"+k+"' defined";e[k]=d[k]}}else if("namedAttributes"===d)k=o(e.namedAttributes)||{},d=o(b[d]),e.namedAttributes=c.extend(k,x(d,k));else if("namedEvents"===d){if(!c.isArray(b[d]))throw"Expects events member on mixin to be an array";e.namedEvents||(e.namedEvents=[]);e.namedEvents=
c.uniq(e.namedEvents.concat(b[d]))}else if("ignoreUnknownAttributes"===d)e.hasOwnProperty(d)||(e.ignoreUnknownAttributes=b[d]||!1);else{if(e.hasOwnProperty(d))throw"Mixin error: class already has property '"+d+"' defined";e[d]=b[d]}},this)}}};f.AttributesMixinCreator={create:function(a,b){var d={};a||(a={});c.has(a,"id")||(a.id=null);c.each(a,function(a,b){var c=f.Mixins.createMethodName("set",b);d[c]=function(a,c){return this.set(b,a,c)};c=f.Mixins.createMethodName("get",b);d[c]=function(){return this.get(b)}});
if("string"===typeof b&&"undefined"!==typeof a[b]&&"id"!==b){a.id=a[b];var e=f.Mixins.createMethodName("get",b),g=f.Mixins.createMethodName("set",b);d.getId=function(){return this[e]()};d.setId=function(a,b){return this[g](a,b)}}return d},ensureType:m};f.EventsMixinCreator={create:function(a){var b={};c.each(a,c.bind(function(a){var e=f.Mixins.createMethodName("on",a);b[e]=function(){return this.on.apply(this,[a].concat(c.toArray(arguments)))};e=f.Mixins.createMethodName("trigger",a);b[e]=function(){return this.trigger.apply(this,
[a].concat(c.toArray(arguments)))}},this));return b}};var l=f,r=i.Model,s=g(r),t=r.prototype,u=s.prototype,v=t.set;u.set=function(a,b,d){var e,f=this.namedAttributes;if(!f||null==a)return v.apply(this,arguments);c.isObject(a)?(e=c.clone(a),d=b):(e={},e[a]=b);for(var g in e)if(c.has(e,g)){if(!c.has(f,g)&&!this.ignoreUnknownAttributes)throw"Attribute '"+g+"' does not exist";e[g]=m(f[g],e[g])}return v.call(this,e,d)};var y=t.get;u.get=function(a){if(this.namedAttributes&&!c.has(this.namedAttributes,
a)&&!this.ignoreUnknownAttributes)throw"Attribute '"+a+"' does not exist";return y.apply(this,arguments)};var z=r.prototype.parse;s.prototype.parse=function(a,b){return c.pick(z(a,b),c.keys(this.namedAttributes))};l.Model=s;f.Collection=g(i.Collection);f.View=g(i.View);f.Router=g(i.Router);l=function(){this.initialize.apply(this,arguments)};c.extend(l.prototype,i.Events,{initialize:function(){}});l.extend=i.Model.extend;f.Evented=g(l);g=f;g.noConflict=function(){j.Brace=n;return this};j.Brace=g});;
;
/* module-key = 'com.atlassian.servicedesk.frontend-webpack-plugin:context-common-jsd-entry-chunk', location = 'common-jsd-entry-chunk.bundle.js' */
!function(e){function a(d){if(t[d])return t[d].exports;var n=t[d]={i:d,l:!1,exports:{}};return e[d].call(n.exports,n,n.exports,a),n.l=!0,n.exports}var d=window.sdJsonp;window.sdJsonp=function(t,c,s){for(var r,o,i,f=0,u=[];f<t.length;f++){if(o=t[f],n[o])u.push(n[o][0]);n[o]=0}for(r in c)if(Object.prototype.hasOwnProperty.call(c,r))e[r]=c[r];if(d)d(t,c,s);for(;u.length;)u.shift()();if(s)for(f=0;f<s.length;f++)i=a(a.s=s[f]);return i};var t={},n={48:0};a.e=function(e){function d(){s.onerror=s.onload=null,clearTimeout(r);var a=n[e];if(0!==a){if(a)a[1](new Error("Loading chunk "+e+" failed."));n[e]=void 0}}if(0===n[e])return Promise.resolve();if(n[e])return n[e][2];var t=new Promise(function(a,d){n[e]=[a,d]});n[e][2]=t;var c=document.getElementsByTagName("head")[0],s=document.createElement("script");if(s.type="text/javascript",s.charset="utf-8",s.async=!0,s.timeout=12e4,a.nc)s.setAttribute("nonce",a.nc);s.src=a.p+"context-"+({0:"sd.project.queues",1:"sd.queues.addon",2:"sd.agent.reports.custom",3:"sd.agent.reports.kb.requests.resolved",4:"sd.agent.reports.kb.requests.deflected",5:"sd.agent.reports.csat",6:"sd.admin.automation",7:"sd.admin.request.type.group",8:"sd.agent.queues.custom",9:"sd.admin.sla.custom",10:"sd.admin.languagesupport",11:"sd.admin.request.type.edit",12:"sd.agent.organisation",13:"sd.agent.customers",14:"sd.admin.outgoing.email",15:"sd.admin.portal.settings",16:"sd.admin.sla",17:"sd.admin.email.settings",18:"sd.admin.kb.settings",19:"sd.agent.getting.started",20:"sd.agent.reports.workload",21:"sd.project.reports",22:"sd.agent.reports.sla",23:"sd.agent.issue",24:"sd.admin.feedback.settings",25:"sd.admin.request.security",26:"sd.admin.request.types",27:"sd.admin.widget.addon.installer",28:"sd.admin.addon",29:"jira.view.issue",30:"sd.project.admin",31:"sd.project.view",32:"atl.dashboard",33:"sd.project.sidebar.content",34:"focus.tour.queue.view",35:"atl.general",36:"jira.workflow.view",37:"jira.admin.conf",38:"sd.channel.picker.focus.tour",39:"jira.admin",40:"jira.view.issue.asset.unlicensed",41:"sd.template.wizard.n2n.onboarding",42:"sd.template.wizard.n2e.onboarding",43:"sd.admin.email.requests",44:"sd.admin.config",45:"jira.create.issue.asset.unlicensed",46:"sd.agent.unlicensed",47:"asset.tracking.field.config"}[e]||e)+"-"+{0:"242e22b22bb20e9490f4",1:"616eacfd61aceaabfd14",2:"8d99ce221e478c85153b",3:"1dfc0572dd5315c8c560",4:"3d4745c5d894264c97fc",5:"c96eb0a7d0c94efb56a7",6:"1fe935193b5a3416b3b6",7:"0462f7e3eae55ec964c4",8:"c0084c1cae34310316f0",9:"d73938784ca7c58ce994",10:"597902e07589c33501da",11:"1716618caa5b2c76f77f",12:"cc775de296edd6d72a63",13:"60d8e81cfc8fde7e4811",14:"e59a7c84d593e4d9b57c",15:"fdeaa52a01c3ddad71ba",16:"ce665e11eaa87a48b277",17:"27a0fc520417467f75d8",18:"f91bc4cf37e7854f727d",19:"c56af3084775f3da8a71",20:"ef45ff4b753133d1d306",21:"042693f88f82aad67c40",22:"14d9b4f671d2e7a65d14",23:"7e05c94c35ec00052452",24:"8072358ce7f1a36a074c",25:"1916572fd0b0bfcb4618",26:"333175a20192f81fc559",27:"55882b8c5f2085eccda1",28:"8ba63446eafe308cfbda",29:"7bf55723f3c1b73c1815",30:"6bc1dcfa9ef761d01dbc",31:"4262f39986da36f73b54",32:"5fa4324d471aa3e3d611",33:"126f24ddc716b1331cdc",34:"67bda36cfc93da0ae3dc",35:"113f92bed11db7b3d2c7",36:"ae2ddacfb342ecb261c9",37:"a786e89023e35409da67",38:"df9e15430e3bc761910a",39:"bded37330aec876e2e49",40:"96acf8173c8880d81e64",41:"1949bb5ffeb7d3d65054",42:"dddff61ac0c6652a485f",43:"adf36458ee872c255f32",44:"b32b436b22bde2c5f9cb",45:"827eb1a29a33d66a7fdb",46:"5c79b2c653576d579a43",47:"16101d5a1cd356540916"}[e]+".js?locale=" + __webpack_public_path_locale__;var r=setTimeout(d,12e4);return s.onerror=s.onload=d,c.appendChild(s),t},a.m=e,a.c=t,a.i=function(e){return e},a.d=function(e,d,t){if(!a.o(e,d))Object.defineProperty(e,d,{configurable:!1,enumerable:!0,get:t})},a.n=function(e){var d=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(d,"a",d),d},a.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},a.p="",a.oe=function(e){throw console.error(e),e}}([]);;
;
/* module-key = 'com.atlassian.servicedesk.frontend-webpack-plugin:context-jira.view.issue.asset.unlicensed', location = 'jira.view.issue.asset.unlicensed.bundle.js' */
sdJsonp([40],{0:function(e,t,n){var i,s;i=[n(28)],void 0!==(s=function(e){return e}.apply(t,i))&&(e.exports=s)},1:function(e,t,n){var i;void 0!==(i=function(){return jQuery}.call(t,n,t,e))&&(e.exports=i)},10:function(e,t,n){var i,s;if(void 0===r)var r={};if(void 0===r.buttons)r.buttons={};if(r.buttons.button=function(e,t){return e.href?'<a href="'+soy.$$escapeHtml(e.href)+'"'+r.buttons.buttonAttributes(soy.$$augmentMap(e,{tagName:"a"}))+">"+r.buttons.buttonIcon(e)+(e.hasLabel?'<span class="aui-button-label">':"")+soy.$$escapeHtml(e.text)+(e.hasLabel?"</span>":"")+"</a>":"input"==e.tagName?'<input type="'+soy.$$escapeHtml(e.inputType?e.inputType:"button")+'" '+r.buttons.buttonAttributes(e)+' value="'+soy.$$escapeHtml(e.text)+'" />':"<"+soy.$$escapeHtml(e.tagName?e.tagName:"button")+r.buttons.buttonAttributes(soy.$$augmentMap(e,{tagName:e.tagName?e.tagName:"button"}))+">"+r.buttons.buttonIcon(e)+(e.hasLabel?'<span class="aui-button-label">':"")+soy.$$escapeHtml(e.text)+(e.hasLabel?"</span>":"")+"</"+soy.$$escapeHtml(e.tagName?e.tagName:"button")+">"},goog.DEBUG)r.buttons.button.soyTemplateName="aui.buttons.button";if(r.buttons.buttons=function(e,t){return"<div"+(e.id?' id="'+soy.$$escapeHtml(e.id)+'"':"")+' class="aui-buttons'+r.renderExtraClasses(e)+'"'+r.renderExtraAttributes(e)+">"+soy.$$filterNoAutoescape(e.content)+"</div>"},goog.DEBUG)r.buttons.buttons.soyTemplateName="aui.buttons.buttons";if(r.buttons.buttonAttributes=function(e,t){e=e||{};var n=(e.id?' id="'+soy.$$escapeHtml(e.id)+'"':"")+' class="aui-button'+("main"==e.splitButtonType?" aui-button-split-main":"")+(e.dropdown2Target?" aui-dropdown2-trigger"+("more"==e.splitButtonType?" aui-button-split-more":""):"");switch(e.type){case"primary":n+=" aui-button-primary";break;case"link":n+=" aui-button-link";break;case"subtle":n+=" aui-button-subtle"}return n+=r.renderExtraClasses(e)+'"'+r.renderExtraAttributes(e)+(e.isPressed?' aria-pressed="'+soy.$$escapeHtml(e.isPressed)+'"':"")+(e.isDisabled?' aria-disabled="'+soy.$$escapeHtml(e.isDisabled)+'"'+(1==e.isDisabled?"button"==e.tagName||"input"==e.tagName?' disabled="disabled" ':"":""):"")+(e.dropdown2Target?' aria-owns="'+soy.$$escapeHtml(e.dropdown2Target)+'" aria-haspopup="true"':"")+("a"==e.tagName?' tabindex="0"':"")},goog.DEBUG)r.buttons.buttonAttributes.soyTemplateName="aui.buttons.buttonAttributes";if(r.buttons.buttonIcon=function(e,t){return e=e||{},e.iconType?'<span class="'+("aui"==e.iconType?"aui-icon":"")+(e.iconClass?" "+soy.$$escapeHtml(e.iconClass):"")+'">'+(e.iconText?soy.$$escapeHtml(e.iconText)+" ":"")+"</span>":""},goog.DEBUG)r.buttons.buttonIcon.soyTemplateName="aui.buttons.buttonIcon";if(r.buttons.splitButton=function(e,t){return""+r.buttons.button(soy.$$augmentMap(e.splitButtonMain,{splitButtonType:"main"}))+r.buttons.button(soy.$$augmentMap(e.splitButtonMore,{splitButtonType:"more"}))},goog.DEBUG)r.buttons.splitButton.soyTemplateName="aui.buttons.splitButton";i=[n(11)],void 0!==(s=function(){return r.buttons}.apply(t,i))&&(e.exports=s)},11:function(e,t,n){var i,s;if(void 0===r)var r={};if(r.table=function(e,t){return"<table"+(e.id?' id="'+soy.$$escapeHtml(e.id)+'"':"")+' class="aui'+r.renderExtraClasses(e)+'"'+r.renderExtraAttributes(e)+">"+(e.columnsContent?soy.$$filterNoAutoescape(e.columnsContent):"")+(e.captionContent?"<caption>"+soy.$$filterNoAutoescape(e.captionContent)+"</caption>":"")+(e.theadContent?"<thead>"+soy.$$filterNoAutoescape(e.theadContent)+"</thead>":"")+(e.tfootContent?"<tfoot>"+soy.$$filterNoAutoescape(e.tfootContent)+"</tfoot>":"")+(!e.contentIncludesTbody?"<tbody>":"")+soy.$$filterNoAutoescape(e.content)+(!e.contentIncludesTbody?"</tbody>":"")+"</table>"},goog.DEBUG)r.table.soyTemplateName="aui.table";i=[],void 0!==(s=function(){return r}.apply(t,i))&&(e.exports=s)},13:function(e,t,n){var i,s;i=[n(0),n(1),n(29)],void 0!==(s=function(e,t,n){return n(e,t)}.apply(t,i))&&(e.exports=s)},16:function(e,t,n){"use strict";e.exports=n(24).polyfill()},17:function(e,t,n){var i,s;i=[n(44)],void 0!==(s=function(e){return e}.apply(t,i))&&(e.exports=s)},18:function(e,t,n){var i,s;i=[n(1),n(0),t],void 0!==(s=function(e,t,n){function i(e,t){l[e]=t}function s(e){var t=e?e.toLowerCase():"";if("true"===t)return!0;if("false"===t)return!1;else return e}function r(t){if(void 0!==l[t])return l[t];var n=e("meta[name='ajs-"+t+"']");if(n.length){return s(n.attr("content"))}}function o(e){return!0===this.get(e)}function a(e){return+this.get(e)}function u(){var t={};return e("meta[name^=ajs-]").each(function(){t[this.name.substring(4)]=this.content}),e.extend(t,l)}var l={};n.set=i,n.get=r,n.getBoolean=o,n.getNumber=a,n.getAllAsMap=u}.apply(t,i))&&(e.exports=s)},19:function(e,t,n){var i,s;if(void 0===r)var r={};if(void 0===r.icons)r.icons={};if(r.icons.icon=function(e,t){return"<"+soy.$$escapeHtml(e.tagName?e.tagName:"span")+(e.id?' id="'+soy.$$escapeHtml(e.id)+'"':"")+' class="aui-icon'+(e.useIconFont?" aui-icon-"+soy.$$escapeHtml(e.size?e.size:"small"):"")+" aui"+soy.$$escapeHtml(e.useIconFont?"-iconfont":"-icon")+soy.$$escapeHtml(e.iconFontSet?"-"+e.iconFontSet:"")+"-"+soy.$$escapeHtml(e.icon)+r.renderExtraClasses(e)+'"'+r.renderExtraAttributes(e)+">"+(e.accessibilityText?soy.$$escapeHtml(e.accessibilityText):"")+"</"+soy.$$escapeHtml(e.tagName?e.tagName:"span")+">"},goog.DEBUG)r.icons.icon.soyTemplateName="aui.icons.icon";i=[n(11)],void 0!==(s=function(){return r.icons}.apply(t,i))&&(e.exports=s)},2:function(e,t,n){var i,s;i=[n(0),n(13),n(30)],void 0!==(s=function(e,t,n){var i=n(e,t);return i.Model.prototype.ignoreUnknownAttributes=!0,i}.apply(t,i))&&(e.exports=s)},20:function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){if("object"==typeof window)n=window}e.exports=n},24:function(e,t,n){(function(t,i){/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   4.1.0
 */
!function(t,n){!0?e.exports=n():"function"==typeof define&&define.amd?define(n):t.ES6Promise=n()}(this,function(){"use strict";function e(e){return"function"==typeof e||"object"==typeof e&&null!==e}function s(e){return"function"==typeof e}function r(e){Q=e}function o(e){X=e}function a(){return function(){return t.nextTick(p)}}function u(){if(void 0!==V)return function(){V(p)};else return f()}function l(){var e=0,t=new Z(p),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function c(){var e=new MessageChannel;return e.port1.onmessage=p,function(){return e.port2.postMessage(0)}}function f(){var e=setTimeout;return function(){return e(p,1)}}function p(){for(var e=0;e<q;e+=2){(0,ne[e])(ne[e+1]),ne[e]=void 0,ne[e+1]=void 0}q=0}function d(){try{var e=n(26);return V=e.runOnLoop||e.runOnContext,u()}catch(e){return f()}}function m(e,t){var n=arguments,i=this,s=new this.constructor(h);if(void 0===s[se])L(s);var r=i._state;if(r)!function(){var e=n[r-1];X(function(){return F(r,s,e,i._result)})}();else _(i,s,e,t);return s}function v(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(h);return w(n,e),n}function h(){}function g(){return new TypeError("You cannot resolve a promise with itself")}function y(){return new TypeError("A promises callback cannot return that same promise.")}function b(e){try{return e.then}catch(e){return ue.error=e,ue}}function k(e,t,n,i){try{e.call(t,n,i)}catch(e){return e}}function A(e,t,n){X(function(e){var i=!1,s=k(n,t,function(n){if(!i)if(i=!0,t!==n)w(e,n);else $(e,n)},function(t){if(!i)i=!0,C(e,t)},"Settle: "+(e._label||" unknown promise"));if(!i&&s)i=!0,C(e,s)},e)}function x(e,t){if(t._state===oe)$(e,t._result);else if(t._state===ae)C(e,t._result);else _(t,void 0,function(t){return w(e,t)},function(t){return C(e,t)})}function S(e,t,n){if(t.constructor===e.constructor&&n===m&&t.constructor.resolve===v)x(e,t);else if(n===ue)C(e,ue.error),ue.error=null;else if(void 0===n)$(e,t);else if(s(n))A(e,t,n);else $(e,t)}function w(t,n){if(t===n)C(t,g());else if(e(n))S(t,n,b(n));else $(t,n)}function T(e){if(e._onerror)e._onerror(e._result);D(e)}function $(e,t){if(e._state===re)if(e._result=t,e._state=oe,0!==e._subscribers.length)X(D,e)}function C(e,t){if(e._state===re)e._state=ae,e._result=t,X(T,e)}function _(e,t,n,i){var s=e._subscribers,r=s.length;if(e._onerror=null,s[r]=t,s[r+oe]=n,s[r+ae]=i,0===r&&e._state)X(D,e)}function D(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var i=void 0,s=void 0,r=e._result,o=0;o<t.length;o+=3)if(i=t[o],s=t[o+n],i)F(n,i,s,r);else s(r);e._subscribers.length=0}}function I(){this.error=null}function j(e,t){try{return e(t)}catch(e){return le.error=e,le}}function F(e,t,n,i){var r=s(n),o=void 0,a=void 0,u=void 0,l=void 0;if(r){if((o=j(n,i))===le)l=!0,a=o.error,o.error=null;else u=!0;if(t===o)return void C(t,y())}else o=i,u=!0;if(t._state!==re);else if(r&&u)w(t,o);else if(l)C(t,a);else if(e===oe)$(t,o);else if(e===ae)C(t,o)}function E(e,t){try{t(function(t){w(e,t)},function(t){C(e,t)})}catch(t){C(e,t)}}function O(){return ce++}function L(e){e[se]=ce++,e._state=void 0,e._result=void 0,e._subscribers=[]}function M(e,t){if(this._instanceConstructor=e,this.promise=new e(h),!this.promise[se])L(this.promise);if(K(t)){if(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length)$(this.promise,this._result);else if(this.length=this.length||0,this._enumerate(),0===this._remaining)$(this.promise,this._result)}else C(this.promise,H())}function H(){return new Error("Array Methods must be provided an Array")}function N(e){return new M(this,e).promise}function B(e){var t=this;if(!K(e))return new t(function(e,t){return t(new TypeError("You must pass an array to race."))});else return new t(function(n,i){for(var s=e.length,r=0;r<s;r++)t.resolve(e[r]).then(n,i)})}function J(e){var t=this,n=new t(h);return C(n,e),n}function P(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function R(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function U(e){if(this[se]=O(),this._result=this._state=void 0,this._subscribers=[],h!==e)"function"!=typeof e&&P(),this instanceof U?E(this,e):R()}function z(){var e=void 0;if(void 0!==i)e=i;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=U}var G=void 0;if(!Array.isArray)G=function(e){return"[object Array]"===Object.prototype.toString.call(e)};else G=Array.isArray;var K=G,q=0,V=void 0,Q=void 0,X=function(e,t){if(ne[q]=e,ne[q+1]=t,2===(q+=2))if(Q)Q(p);else ie()},W="undefined"!=typeof window?window:void 0,Y=W||{},Z=Y.MutationObserver||Y.WebKitMutationObserver,ee="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),te="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ne=new Array(1e3),ie=void 0;if(ee)ie=a();else if(Z)ie=l();else if(te)ie=c();else if(void 0===W)ie=d();else ie=f();var se=Math.random().toString(36).substring(16),re=void 0,oe=1,ae=2,ue=new I,le=new I,ce=0;return M.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===re&&n<e;n++)this._eachEntry(t[n],n)},M.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,i=n.resolve;if(i===v){var s=b(e);if(s===m&&e._state!==re)this._settledAt(e._state,t,e._result);else if("function"!=typeof s)this._remaining--,this._result[t]=e;else if(n===U){var r=new n(h);S(r,e,s),this._willSettleAt(r,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(i(e),t)},M.prototype._settledAt=function(e,t,n){var i=this.promise;if(i._state===re)if(this._remaining--,e===ae)C(i,n);else this._result[t]=n;if(0===this._remaining)$(i,this._result)},M.prototype._willSettleAt=function(e,t){var n=this;_(e,void 0,function(e){return n._settledAt(oe,t,e)},function(e){return n._settledAt(ae,t,e)})},U.all=N,U.race=B,U.resolve=v,U.reject=J,U._setScheduler=r,U._setAsap=o,U._asap=X,U.prototype={constructor:U,then:m,catch:function(e){return this.then(null,e)}},U.polyfill=z,U.Promise=U,U})}).call(t,n(25),n(20))},25:function(e,t){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function s(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function r(e){if(f===clearTimeout)return clearTimeout(e);if((f===i||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function o(){if(v&&d){if(v=!1,d.length)m=d.concat(m);else h=-1;if(m.length)a()}}function a(){if(!v){var e=s(o);v=!0;for(var t=m.length;t;){for(d=m,m=[];++h<t;)if(d)d[h].run();h=-1,t=m.length}d=null,v=!1,r(e)}}function u(e,t){this.fun=e,this.array=t}function l(){}var c,f,p=e.exports={};!function(){try{if("function"==typeof setTimeout)c=setTimeout;else c=n}catch(e){c=n}try{if("function"==typeof clearTimeout)f=clearTimeout;else f=i}catch(e){f=i}}();var d,m=[],v=!1,h=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(m.push(new u(e,t)),1===m.length&&!v)s(a)},u.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=l,p.addListener=l,p.once=l,p.off=l,p.removeListener=l,p.removeAllListeners=l,p.emit=l,p.prependListener=l,p.prependOnceListener=l,p.listeners=function(e){return[]},p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},26:function(e,t){},28:function(e,t,n){var i,s;(function(){function n(e){function t(t,n,i,s,r,o){for(;r>=0&&r<o;r+=e){var a=s?s[r]:r;i=n(i,t[a],a,t)}return i}return function(n,i,s,r){i=S(i,r,4);var o=!I(n)&&x.keys(n),a=(o||n).length,u=e>0?0:a-1;if(arguments.length<3)s=n[o?o[u]:u],u+=e;return t(n,i,s,o,u,a)}}function r(e){return function(t,n,i){n=w(n,i);for(var s=D(t),r=e>0?0:s-1;r>=0&&r<s;r+=e)if(n(t[r],r,t))return r;return-1}}function o(e,t,n){return function(i,s,r){var o=0,a=D(i);if("number"==typeof r)if(e>0)o=r>=0?r:Math.max(r+a,o);else a=r>=0?Math.min(r+1,a):r+a+1;else if(n&&r&&a)return r=n(i,s),i[r]===s?r:-1;if(s!==s)return r=t(m.call(i,o,a),x.isNaN),r>=0?r+o:-1;for(r=e>0?o:a-1;r>=0&&r<a;r+=e)if(i[r]===s)return r;return-1}}function a(e,t){var n=L.length,i=e.constructor,s=x.isFunction(i)&&i.prototype||f,r="constructor";if(x.has(e,r)&&!x.contains(t,r))t.push(r);for(;n--;)if((r=L[n])in e&&e[r]!==s[r]&&!x.contains(t,r))t.push(r)}var u=this,l=u._,c=Array.prototype,f=Object.prototype,p=Function.prototype,d=c.push,m=c.slice,v=f.toString,h=f.hasOwnProperty,g=Array.isArray,y=Object.keys,b=p.bind,k=Object.create,A=function(){},x=function(e){if(e instanceof x)return e;if(!(this instanceof x))return new x(e);else return void(this._wrapped=e)};if(!0){if(void 0!==e&&e.exports)t=e.exports=x;t._=x}else u._=x;x.VERSION="1.8.3";var S=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,s){return e.call(t,n,i,s)};case 4:return function(n,i,s,r){return e.call(t,n,i,s,r)}}return function(){return e.apply(t,arguments)}},w=function(e,t,n){if(null==e)return x.identity;if(x.isFunction(e))return S(e,t,n);if(x.isObject(e))return x.matcher(e);else return x.property(e)};x.iteratee=function(e,t){return w(e,t,1/0)};var T=function(e,t){return function(n){var i=arguments.length;if(i<2||null==n)return n;for(var s=1;s<i;s++)for(var r=arguments[s],o=e(r),a=o.length,u=0;u<a;u++){var l=o[u];if(!t||void 0===n[l])n[l]=r[l]}return n}},$=function(e){if(!x.isObject(e))return{};if(k)return k(e);A.prototype=e;var t=new A;return A.prototype=null,t},C=function(e){return function(t){return null==t?void 0:t[e]}},_=Math.pow(2,53)-1,D=C("length"),I=function(e){var t=D(e);return"number"==typeof t&&t>=0&&t<=_};x.each=x.forEach=function(e,t,n){t=S(t,n);var i,s;if(I(e))for(i=0,s=e.length;i<s;i++)t(e[i],i,e);else{var r=x.keys(e);for(i=0,s=r.length;i<s;i++)t(e[r[i]],r[i],e)}return e},x.map=x.collect=function(e,t,n){t=w(t,n);for(var i=!I(e)&&x.keys(e),s=(i||e).length,r=Array(s),o=0;o<s;o++){var a=i?i[o]:o;r[o]=t(e[a],a,e)}return r},x.reduce=x.foldl=x.inject=n(1),x.reduceRight=x.foldr=n(-1),x.find=x.detect=function(e,t,n){var i;if(I(e))i=x.findIndex(e,t,n);else i=x.findKey(e,t,n);if(void 0!==i&&-1!==i)return e[i]},x.filter=x.select=function(e,t,n){var i=[];return t=w(t,n),x.each(e,function(e,n,s){if(t(e,n,s))i.push(e)}),i},x.reject=function(e,t,n){return x.filter(e,x.negate(w(t)),n)},x.every=x.all=function(e,t,n){t=w(t,n);for(var i=!I(e)&&x.keys(e),s=(i||e).length,r=0;r<s;r++){var o=i?i[r]:r;if(!t(e[o],o,e))return!1}return!0},x.some=x.any=function(e,t,n){t=w(t,n);for(var i=!I(e)&&x.keys(e),s=(i||e).length,r=0;r<s;r++){var o=i?i[r]:r;if(t(e[o],o,e))return!0}return!1},x.contains=x.includes=x.include=function(e,t,n,i){if(!I(e))e=x.values(e);if("number"!=typeof n||i)n=0;return x.indexOf(e,t,n)>=0},x.invoke=function(e,t){var n=m.call(arguments,2),i=x.isFunction(t);return x.map(e,function(e){var s=i?t:e[t];return null==s?s:s.apply(e,n)})},x.pluck=function(e,t){return x.map(e,x.property(t))},x.where=function(e,t){return x.filter(e,x.matcher(t))},x.findWhere=function(e,t){return x.find(e,x.matcher(t))},x.max=function(e,t,n){var i,s,r=-1/0,o=-1/0;if(null==t&&null!=e){e=I(e)?e:x.values(e);for(var a=0,u=e.length;a<u;a++)if((i=e[a])>r)r=i}else t=w(t,n),x.each(e,function(e,n,i){if((s=t(e,n,i))>o||s===-1/0&&r===-1/0)r=e,o=s});return r},x.min=function(e,t,n){var i,s,r=1/0,o=1/0;if(null==t&&null!=e){e=I(e)?e:x.values(e);for(var a=0,u=e.length;a<u;a++)if((i=e[a])<r)r=i}else t=w(t,n),x.each(e,function(e,n,i){if((s=t(e,n,i))<o||s===1/0&&r===1/0)r=e,o=s});return r},x.shuffle=function(e){for(var t,n=I(e)?e:x.values(e),i=n.length,s=Array(i),r=0;r<i;r++){if((t=x.random(0,r))!==r)s[r]=s[t];s[t]=n[r]}return s},x.sample=function(e,t,n){if(null==t||n){if(!I(e))e=x.values(e);return e[x.random(e.length-1)]}return x.shuffle(e).slice(0,Math.max(0,t))},x.sortBy=function(e,t,n){return t=w(t,n),x.pluck(x.map(e,function(e,n,i){return{value:e,index:n,criteria:t(e,n,i)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(n<i||void 0===i)return-1}return e.index-t.index}),"value")};var j=function(e){return function(t,n,i){var s={};return n=w(n,i),x.each(t,function(i,r){var o=n(i,r,t);e(s,i,o)}),s}};x.groupBy=j(function(e,t,n){if(x.has(e,n))e[n].push(t);else e[n]=[t]}),x.indexBy=j(function(e,t,n){e[n]=t}),x.countBy=j(function(e,t,n){if(x.has(e,n))e[n]++;else e[n]=1}),x.toArray=function(e){if(!e)return[];if(x.isArray(e))return m.call(e);if(I(e))return x.map(e,x.identity);else return x.values(e)},x.size=function(e){if(null==e)return 0;else return I(e)?e.length:x.keys(e).length},x.partition=function(e,t,n){t=w(t,n);var i=[],s=[];return x.each(e,function(e,n,r){(t(e,n,r)?i:s).push(e)}),[i,s]},x.first=x.head=x.take=function(e,t,n){if(null!=e)if(null==t||n)return e[0];else return x.initial(e,e.length-t)},x.initial=function(e,t,n){return m.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},x.last=function(e,t,n){if(null!=e)if(null==t||n)return e[e.length-1];else return x.rest(e,Math.max(0,e.length-t))},x.rest=x.tail=x.drop=function(e,t,n){return m.call(e,null==t||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var F=function(e,t,n,i){for(var s=[],r=0,o=i||0,a=D(e);o<a;o++){var u=e[o];if(I(u)&&(x.isArray(u)||x.isArguments(u))){if(!t)u=F(u,t,n);var l=0,c=u.length;for(s.length+=c;l<c;)s[r++]=u[l++]}else if(!n)s[r++]=u}return s};x.flatten=function(e,t){return F(e,t,!1)},x.without=function(e){return x.difference(e,m.call(arguments,1))},x.uniq=x.unique=function(e,t,n,i){if(!x.isBoolean(t))i=n,n=t,t=!1;if(null!=n)n=w(n,i);for(var s=[],r=[],o=0,a=D(e);o<a;o++){var u=e[o],l=n?n(u,o,e):u;if(t){if(!o||r!==l)s.push(u);r=l}else if(n){if(!x.contains(r,l))r.push(l),s.push(u)}else if(!x.contains(s,u))s.push(u)}return s},x.union=function(){return x.uniq(F(arguments,!0,!0))},x.intersection=function(e){for(var t=[],n=arguments.length,i=0,s=D(e);i<s;i++){var r=e[i];if(!x.contains(t,r)){for(var o=1;o<n&&x.contains(arguments[o],r);o++);if(o===n)t.push(r)}}return t},x.difference=function(e){var t=F(arguments,!0,!0,1);return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){return x.unzip(arguments)},x.unzip=function(e){for(var t=e&&x.max(e,D).length||0,n=Array(t),i=0;i<t;i++)n[i]=x.pluck(e,i);return n},x.object=function(e,t){for(var n={},i=0,s=D(e);i<s;i++)if(t)n[e[i]]=t[i];else n[e[i][0]]=e[i][1];return n},x.findIndex=r(1),x.findLastIndex=r(-1),x.sortedIndex=function(e,t,n,i){n=w(n,i,1);for(var s=n(t),r=0,o=D(e);r<o;){var a=Math.floor((r+o)/2);if(n(e[a])<s)r=a+1;else o=a}return r},x.indexOf=o(1,x.findIndex,x.sortedIndex),x.lastIndexOf=o(-1,x.findLastIndex),x.range=function(e,t,n){if(null==t)t=e||0,e=0;n=n||1;for(var i=Math.max(Math.ceil((t-e)/n),0),s=Array(i),r=0;r<i;r++,e+=n)s[r]=e;return s};var E=function(e,t,n,i,s){if(!(i instanceof t))return e.apply(n,s);var r=$(e.prototype),o=e.apply(r,s);if(x.isObject(o))return o;else return r};x.bind=function(e,t){if(b&&e.bind===b)return b.apply(e,m.call(arguments,1));if(!x.isFunction(e))throw new TypeError("Bind must be called on a function");var n=m.call(arguments,2),i=function(){return E(e,i,t,this,n.concat(m.call(arguments)))};return i},x.partial=function(e){var t=m.call(arguments,1),n=function(){for(var i=0,s=t.length,r=Array(s),o=0;o<s;o++)r[o]=t[o]===x?arguments[i++]:t[o];for(;i<arguments.length;)r.push(arguments[i++]);return E(e,n,this,this,r)};return n},x.bindAll=function(e){var t,n,i=arguments.length;if(i<=1)throw new Error("bindAll must be passed function names");for(t=1;t<i;t++)n=arguments[t],e[n]=x.bind(e[n],e);return e},x.memoize=function(e,t){var n=function(i){var s=n.cache,r=""+(t?t.apply(this,arguments):i);if(!x.has(s,r))s[r]=e.apply(this,arguments);return s[r]};return n.cache={},n},x.delay=function(e,t){var n=m.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=x.partial(x.delay,x,1),x.throttle=function(e,t,n){var i,s,r,o=null,a=0;if(!n)n={};var u=function(){if(a=!1===n.leading?0:x.now(),o=null,r=e.apply(i,s),!o)i=s=null};return function(){var l=x.now();if(!a&&!1===n.leading)a=l;var c=t-(l-a);if(i=this,s=arguments,c<=0||c>t){if(o)clearTimeout(o),o=null;if(a=l,r=e.apply(i,s),!o)i=s=null}else if(!o&&!1!==n.trailing)o=setTimeout(u,c);return r}},x.debounce=function(e,t,n){var i,s,r,o,a,u=function(){var l=x.now()-o;if(l<t&&l>=0)i=setTimeout(u,t-l);else if(i=null,!n)if(a=e.apply(r,s),!i)r=s=null};return function(){r=this,s=arguments,o=x.now();var l=n&&!i;if(!i)i=setTimeout(u,t);if(l)a=e.apply(r,s),r=s=null;return a}},x.wrap=function(e,t){return x.partial(t,e)},x.negate=function(e){return function(){return!e.apply(this,arguments)}},x.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,i=e[t].apply(this,arguments);n--;)i=e[n].call(this,i);return i}},x.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},x.before=function(e,t){var n;return function(){if(--e>0)n=t.apply(this,arguments);if(e<=1)t=null;return n}},x.once=x.partial(x.before,2);var O=!{toString:null}.propertyIsEnumerable("toString"),L=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];x.keys=function(e){if(!x.isObject(e))return[];if(y)return y(e);var t=[];for(var n in e)if(x.has(e,n))t.push(n);if(O)a(e,t);return t},x.allKeys=function(e){if(!x.isObject(e))return[];var t=[];for(var n in e)t.push(n);if(O)a(e,t);return t},x.values=function(e){for(var t=x.keys(e),n=t.length,i=Array(n),s=0;s<n;s++)i[s]=e[t[s]];return i},x.mapObject=function(e,t,n){t=w(t,n);for(var i,s=x.keys(e),r=s.length,o={},a=0;a<r;a++)i=s[a],o[i]=t(e[i],i,e);return o},x.pairs=function(e){for(var t=x.keys(e),n=t.length,i=Array(n),s=0;s<n;s++)i[s]=[t[s],e[t[s]]];return i},x.invert=function(e){for(var t={},n=x.keys(e),i=0,s=n.length;i<s;i++)t[e[n[i]]]=n[i];return t},x.functions=x.methods=function(e){var t=[];for(var n in e)if(x.isFunction(e[n]))t.push(n);return t.sort()},x.extend=T(x.allKeys),x.extendOwn=x.assign=T(x.keys),x.findKey=function(e,t,n){t=w(t,n);for(var i,s=x.keys(e),r=0,o=s.length;r<o;r++)if(i=s[r],t(e[i],i,e))return i},x.pick=function(e,t,n){var i,s,r={},o=e;if(null==o)return r;if(x.isFunction(t))s=x.allKeys(o),i=S(t,n);else s=F(arguments,!1,!1,1),i=function(e,t,n){return t in n},o=Object(o);for(var a=0,u=s.length;a<u;a++){var l=s[a],c=o[l];if(i(c,l,o))r[l]=c}return r},x.omit=function(e,t,n){if(x.isFunction(t))t=x.negate(t);else{var i=x.map(F(arguments,!1,!1,1),String);t=function(e,t){return!x.contains(i,t)}}return x.pick(e,t,n)},x.defaults=T(x.allKeys,!0),x.create=function(e,t){var n=$(e);if(t)x.extendOwn(n,t);return n},x.clone=function(e){if(!x.isObject(e))return e;else return x.isArray(e)?e.slice():x.extend({},e)},x.tap=function(e,t){return t(e),e},x.isMatch=function(e,t){var n=x.keys(t),i=n.length;if(null==e)return!i;for(var s=Object(e),r=0;r<i;r++){var o=n[r];if(t[o]!==s[o]||!(o in s))return!1}return!0};var M=function(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;if(e instanceof x)e=e._wrapped;if(t instanceof x)t=t._wrapped;var s=v.call(e);if(s!==v.call(t))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":if(+e!=+e)return+t!=+t;else return 0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t}var r="[object Array]"===s;if(!r){if("object"!=typeof e||"object"!=typeof t)return!1;var o=e.constructor,a=t.constructor;if(o!==a&&!(x.isFunction(o)&&o instanceof o&&x.isFunction(a)&&a instanceof a)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],i=i||[];for(var u=n.length;u--;)if(n[u]===e)return i[u]===t;if(n.push(e),i.push(t),r){if((u=e.length)!==t.length)return!1;for(;u--;)if(!M(e[u],t[u],n,i))return!1}else{var l,c=x.keys(e);if(u=c.length,x.keys(t).length!==u)return!1;for(;u--;)if(l=c[u],!x.has(t,l)||!M(e[l],t[l],n,i))return!1}return n.pop(),i.pop(),!0};if(x.isEqual=function(e,t){return M(e,t)},x.isEmpty=function(e){if(null==e)return!0;if(I(e)&&(x.isArray(e)||x.isString(e)||x.isArguments(e)))return 0===e.length;else return 0===x.keys(e).length},x.isElement=function(e){return!(!e||1!==e.nodeType)},x.isArray=g||function(e){return"[object Array]"===v.call(e)},x.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},x.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){x["is"+e]=function(t){return v.call(t)==="[object "+e+"]"}}),!x.isArguments(arguments))x.isArguments=function(e){return x.has(e,"callee")};if("function"!=typeof/./&&"object"!=typeof Int8Array)x.isFunction=function(e){return"function"==typeof e||!1};x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!==+e},x.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===v.call(e)},x.isNull=function(e){return null===e},x.isUndefined=function(e){return void 0===e},x.has=function(e,t){return null!=e&&h.call(e,t)},x.noConflict=function(){return u._=l,this},x.identity=function(e){return e},x.constant=function(e){return function(){return e}},x.noop=function(){},x.property=C,x.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},x.matcher=x.matches=function(e){return e=x.extendOwn({},e),function(t){return x.isMatch(t,e)}},x.times=function(e,t,n){var i=Array(Math.max(0,e));t=S(t,n,1);for(var s=0;s<e;s++)i[s]=t(s);return i},x.random=function(e,t){if(null==t)t=e,e=0;return e+Math.floor(Math.random()*(t-e+1))},x.now=Date.now||function(){return(new Date).getTime()};var H={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},N=x.invert(H),B=function(e){var t=function(t){return e[t]},n="(?:"+x.keys(e).join("|")+")",i=RegExp(n),s=RegExp(n,"g");return function(e){return e=null==e?"":""+e,i.test(e)?e.replace(s,t):e}};x.escape=B(H),x.unescape=B(N),x.result=function(e,t,n){var i=null==e?void 0:e[t];if(void 0===i)i=n;return x.isFunction(i)?i.call(e):i};var J=0;x.uniqueId=function(e){var t=++J+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var P=/(.)^/,R={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},U=/\\|'|\r|\n|\u2028|\u2029/g,z=function(e){return"\\"+R[e]};x.template=function(e,t,n){if(!t&&n)t=n;t=x.defaults({},t,x.templateSettings);var i=RegExp([(t.escape||P).source,(t.interpolate||P).source,(t.evaluate||P).source].join("|")+"|$","g"),s=0,r="__p+='";if(e.replace(i,function(t,n,i,o,a){if(r+=e.slice(s,a).replace(U,z),s=a+t.length,n)r+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'";else if(i)r+="'+\n((__t=("+i+"))==null?'':__t)+\n'";else if(o)r+="';\n"+o+"\n__p+='";return t}),r+="';\n",!t.variable)r="with(obj||{}){\n"+r+"}\n";r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n";try{var o=new Function(t.variable||"obj","_",r)}catch(e){throw e.source=r,e}var a=function(e){return o.call(this,e,x)},u=t.variable||"obj";return a.source="function("+u+"){\n"+r+"}",a},x.chain=function(e){var t=x(e);return t._chain=!0,t};var G=function(e,t){return e._chain?x(t).chain():t};if(x.mixin=function(e){x.each(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return d.apply(e,arguments),G(this,n.apply(x,e))}})},x.mixin(x),x.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=c[e];x.prototype[e]=function(){var n=this._wrapped;if(t.apply(n,arguments),("shift"===e||"splice"===e)&&0===n.length)delete n[0];return G(this,n)}}),x.each(["concat","join","slice"],function(e){var t=c[e];x.prototype[e]=function(){return G(this,t.apply(this._wrapped,arguments))}}),x.prototype.value=function(){return this._wrapped},x.prototype.valueOf=x.prototype.toJSON=x.prototype.value,x.prototype.toString=function(){return""+this._wrapped},!0)i=[],void 0!==(s=function(){return x}.apply(t,i))&&(e.exports=s)}).call(this)},29:function(e,t){e.exports=window.require("atlassian/libs/factories/backbone-1.0.0")},30:function(e,t){e.exports=window.require("atlassian/libs/factories/brace-1.1.0")},32:function(e,t,n){var i,s;i=[n(18),t],void 0!==(s=function(e,t){t.getPluginVersion=function(){return(AJS.Meta||e).get("sdPluginVersion")}}.apply(t,i))&&(e.exports=s)},332:function(e,t,n){var i,s;i=[],void 0!==(s=function(){return function(e){return{value:e.origin.appKey+"/"+e.origin.originId,label:e.label.value}}}.apply(t,i))&&(e.exports=s)},333:function(e,t,n){var i,s;i=[n(1)],void 0!==(s=function(e){return function(t,n){e.ajax({url:AJS.contextPath()+"/rest/assetapi/asset/"+t,cache:!0,headers:{"X-B3-Sampled":"1"}}).fail(function(){var e=t.split("/");n({origin:{appKey:e[0],originId:e[1]},label:{value:"Unknown Asset"}})}).then(function(e){n&&n(e)})}}.apply(t,i))&&(e.exports=s)},34:function(e,t,n){var i,s;i=[n(0),n(17)],void 0!==(s=function(e,t){var n=void 0;return function(){var i=this,s=e.toArray(arguments);return{install:e.once(function(){try{n=t.apply(i,s)}catch(e){console.log("Failed to install skate component, maybe it has already been installed")}return n})}}}.apply(t,i))&&(e.exports=s)},343:function(e,t){},348:function(e,t){e.exports=window.require("jira/ajs/list/list")},4:function(e,t,n){var i,s;i=[n(0),n(1),n(32),t],void 0!==(s=function(e,t,n,i){function s(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function r(){return""+s()+s()+"-"+s()+"-"+s()+"-"+s()+"-"+s()+s()+s()}function o(){if(window.trackingSession.setTimeoutId)clearTimeout(window.trackingSession.setTimeoutId);window.trackingSession.setTimeoutId=setTimeout(function(){if(!window.trackingSession.isUserActive)i.trackEvent("servicedesk.inactive-timeout",{lastEvent:window.trackingSession.actionBeforeInactive},!1,!0)},v)}function a(){window.trackingSession.timeLoaded=Math.round(performance.now()),window.trackingSession.isUserActive=!1,o()}function u(){window.trackingSession={actionBeforeInactive:"pageLoad",sessionIdentifier:r(),isUserActive:!1},a(),o(window.trackingSession)}function l(){if(!window.trackingSession)u()}function c(){if(AJS&&AJS.Meta)return AJS.Meta.get("projectId");else return t("body").data("projectId")||null}function f(e,t){if(m)AJS.log("Tracking page view: "+e,t);var n=e.replace(/^\/?/,"").replace(/\//g,".");this.trackEvent("page.view."+n,t)}function p(t,i,s,r){if(l(),"string"==typeof i)t=[t,i].join("."),i=arguments[2];if(m)AJS.log("TrackEvent: "+t,i);if(!s&&0!==t.indexOf("servicedesk."))t="servicedesk."+t;var o={};if(void 0!==i)if(!e.isObject(i)||e.isArray(i)){var a="A tracking call was made with invalid properties. Data should be key-value pairs. Event name is '"+t+"' and data is: ";AJS.warn(a,i)}else e.extend(o,i);var u=n.getPluginVersion();if(u)o.sdVersion=u;else o.sdVersion=o.sdVersion||"unknown";var f=c();if(f)o.projectId=o.projectId||f;if(window.trackingSession)o.sessionId=window.trackingSession.sessionIdentifier;if(r&&!window.trackingSession.isUserActive)window.trackingSession.timeLoaded=window.trackingSession.timeLoaded||Math.round(performance.now()),o.timeToFirstAction=Math.round(performance.now())-window.trackingSession.timeLoaded;var p={name:t,properties:o};AJS.EventQueue.push(p)}function d(e,t,n){window.trackingSession.actionBeforeInactive=e,p(e,t,n,!0),window.trackingSession.isUserActive=!0}var m=!1,v=3e5;AJS.EventQueue=AJS.EventQueue||[],l(),i.trackEvent=p,i.trackPageview=f,i.trackAction=d,i.resetTimer=a}.apply(t,i))&&(e.exports=s)},401:function(e,t,n){var i,s;if("undefined"==typeof ServiceDesk)window.ServiceDesk={};if(void 0===ServiceDesk.Templates)ServiceDesk.Templates={};if(void 0===ServiceDesk.Templates.Components)ServiceDesk.Templates.Components={};if(void 0===ServiceDesk.Templates.Components.Assets)ServiceDesk.Templates.Components.Assets={};if(void 0===ServiceDesk.Templates.Components.Assets.Field)ServiceDesk.Templates.Components.Assets.Field={};if(ServiceDesk.Templates.Components.Assets.Field.assetLozenge=function(e,t){return'<li class="sd-asset-lozenge" title="'+soy.$$escapeHtml(e.asset.label.value)+'"><span class="sd-asset" title="'+soy.$$escapeHtml(e.asset.label.value)+'">'+("Unknown Asset"==e.asset.label.value?'<span class="sd-asset-value">&nbsp;'+soy.$$escapeHtml("Unknown Asset")+"&nbsp;</span>"+aui.icons.icon({useIconFont:!0,icon:"warning",extraClasses:"aui-iconfont-warning"}):'<span class="sd-asset-value">&nbsp;'+soy.$$escapeHtml(e.asset.label.value)+"</span>")+'</span><button type="button" class="js-remove aui-icon aui-icon-small aui-iconfont-delete" tabindex="-1"></button></li>'},goog.DEBUG)ServiceDesk.Templates.Components.Assets.Field.assetLozenge.soyTemplateName="ServiceDesk.Templates.Components.Assets.Field.assetLozenge";i=[n(19)],void 0!==(s=function(){return ServiceDesk.Templates.Components.Assets.Field}.apply(t,i))&&(e.exports=s)},418:function(e,t,n){var i,s;i=[n(401),n(343)],void 0!==(s=function(){var e=ServiceDesk.Templates.Components.Assets.Field.assetLozenge;return function(t){return $(e({asset:t}))}}.apply(t,i))&&(e.exports=s)},419:function(e,t,n){var i,s;i=[n(0),n(1),n(17),n(2),n(55),n(91),n(52),n(51),n(34),n(418),n(332),n(333),n(343)],void 0!==(s=function(e,t,n,i,s,r,o,a,u,l,c,f){var p=r.extend({keys:{Up:function(){return this.keys.Left.apply(this,arguments)},Down:function(){return this.keys.Right.apply(this,arguments)}}}),d=s.extend({init:function(e,t){var n=this;f(e.properties.value,function(e){n.$lozenge=l(e),n._assignEvents("instance",n)._assignEvents("removeButton",n.$lozenge.find(".js-remove")),t(n.$lozenge)})},_events:{instance:{focus:function(){this.$lozenge.addClass("focused")},blur:function(){this.$lozenge.removeClass("focused")},remove:function(){this.$lozenge.remove()}},removeButton:{click:function(){this.trigger("remove")}}}}),m=o.extend({init:function(){this._super.apply(this,arguments),this.$container.addClass("sd-asset-field")},_getTypeOriginAsSerializedType:function(e){return encodeURIComponent((e.appKey+"/"+e.originId).toLowerCase())},_getAssetFieldConfigQueryParamsAsString:function(e){var t=this,n="";return e.types.forEach(function(e){n+="type="+t._getTypeOriginAsSerializedType(e)+"&"}),n.slice(0,-1)},_getDefaultOptions:function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];var s=t(n[0].element).data().assetFieldConfig,r="";if(s)r=this._getAssetFieldConfigQueryParamsAsString(s);return t.extend(!0,this._super(),{showDropdownButton:!1,itemGroup:new p,itemAttrDisplayed:"label",errorMessage:!1,matchingStrategy:".*",itemBuilder:function(e){var t=this;return new d(e,function(e){e.appendTo(t.$selectedItemsContainer),t.updateItemsIndent()})},ajaxOptions:{url:AJS.contextPath()+"/rest/assetapi/asset/search?"+r,query:!0,formatResponse:this._formatResponse,headers:{"X-B3-Sampled":"1"}}})},_formatResponse:function(t){return e.map(t.values,function(e){return new a(c(e))})},updateItemsIndent:function(){var e=5,n=this.$selectedItemsContainer.outerHeight()+e+e;if(this.$field.css({paddingLeft:e,paddingTop:n,height:n+20+e}),t.browser.msie&&parseInt(t.browser.version,10)<11)this.$field.val(this.$field.val()+" "),this.$field.val(this.$field.val().replace(/\s$/,""))},keys:{Up:function(){var t=this;if(!this.suggestionsVisible&&this.lozengeGroup.items.length>0&&this.lozengeGroup.index<0)e.defer(e.bind(function(){t.lozengeGroup.shiftFocus(-1)},this))}}});return u("js-request-asset-field",{created:function(e){e.field=new m({element:e})}})}.apply(t,i))&&(e.exports=s)},44:function(e,t){e.exports=window.require("atlassian/libs/skate-0.12.6")},5:function(e,t,n){var i,s;i=[n(18)],void 0!==(s=function(e){var t=e.get("context-path");if(void 0===t)if(AJS&&AJS.contextPath)t=AJS.contextPath();return t}.apply(t,i))&&(e.exports=s)},51:function(e,t){e.exports=window.require("jira/ajs/list/item-descriptor")},511:function(e,t,n){var i,s;if("undefined"==typeof ServiceDesk)window.ServiceDesk={};if(void 0===ServiceDesk.Templates)ServiceDesk.Templates={};if(void 0===ServiceDesk.Templates.Components)ServiceDesk.Templates.Components={};if(void 0===ServiceDesk.Templates.Components.Assets)ServiceDesk.Templates.Components.Assets={};if(ServiceDesk.Templates.Components.Assets.main=function(e,t){return""+(e.displayedAssets.length?ServiceDesk.Templates.Components.Assets.assetsList({assets:e.displayedAssets,displayRemoveLink:e.displayRemoveLink,removeLinkOptions:e.removeLinkOptions})+(e.hasToggle?e.expanded?aui.buttons.button({extraClasses:"js-assets-contract",type:"link",text:"Less"}):aui.buttons.button({extraClasses:"js-assets-expand",type:"link",text:AJS.format("More",e.totalAssets)}):""):"")},goog.DEBUG)ServiceDesk.Templates.Components.Assets.main.soyTemplateName="ServiceDesk.Templates.Components.Assets.main";if(ServiceDesk.Templates.Components.Assets.assetsList=function(e,t){for(var n='<ul class="sd-assets-list">',i=e.assets,s=i.length,r=0;r<s;r++){var o=i[r];n+='<li class="sd-asset" data-key="'+soy.$$escapeHtml(o.value)+'">'+ServiceDesk.Templates.Components.Assets.assetItem({asset:o,displayRemoveLink:e.displayRemoveLink,removeLinkOptions:e.removeLinkOptions})+"</li>"}return n+="</ul>"},goog.DEBUG)ServiceDesk.Templates.Components.Assets.assetsList.soyTemplateName="ServiceDesk.Templates.Components.Assets.assetsList";if(ServiceDesk.Templates.Components.Assets.assetItem=function(e,t){return'<span class="sd-asset" data-key="'+soy.$$escapeHtml(e.asset.value)+'"><span class="sd-asset-label">'+soy.$$escapeHtml("Unknown Asset"==e.asset.label?"Unknown Asset":e.asset.label)+"</span>"+("Unknown Asset"==e.asset.label?"&nbsp;"+aui.icons.icon({useIconFont:!0,icon:"warning"}):"")+"</span>"+(e.displayRemoveLink?ServiceDesk.Templates.Components.Assets.removeAssetLink({assetId:e.asset.value,removeLinkOptions:e.removeLinkOptions}):"")},goog.DEBUG)ServiceDesk.Templates.Components.Assets.assetItem.soyTemplateName="ServiceDesk.Templates.Components.Assets.assetItem";if(ServiceDesk.Templates.Components.Assets.removeAssetLink=function(e,t){return'<div class="'+soy.$$escapeHtml(e.removeLinkOptions.class)+'">'+aui.buttons.button({text:"sd.request.details.assets.remove.asset",type:"link",extraAttributes:{"data-id":e.assetId},extraClasses:e.removeLinkOptions.trigger})+'<span class="'+soy.$$escapeHtml(e.removeLinkOptions.statusClass)+'"></span></div>'},goog.DEBUG)ServiceDesk.Templates.Components.Assets.removeAssetLink.soyTemplateName="ServiceDesk.Templates.Components.Assets.removeAssetLink";i=[n(10),n(19)],void 0!==(s=function(){return ServiceDesk.Templates.Components.Assets}.apply(t,i))&&(e.exports=s)},52:function(e,t){e.exports=window.require("jira/ajs/select/multi-select")},527:function(e,t,n){var i;void 0!==(i=function(){return JIRA.Issue}.call(t,n,t,e))&&(e.exports=i)},528:function(e,t,n){var i;void 0!==(i=function(){return JIRA.Issues.Api}.call(t,n,t,e))&&(e.exports=i)},537:function(e,t){},538:function(e,t){},55:function(e,t){e.exports=window.require("jira/ajs/control")},554:function(e,t,n){!function(e,t,n,i,s){e(function(){n.install(),i.install(),t.install(),s.install()})}(n(1),n(724),n(723),n(419),n(721))},678:function(e,t,n){var i,s;if("undefined"==typeof ServiceDesk)window.ServiceDesk={};if(void 0===ServiceDesk.Templates)ServiceDesk.Templates={};if(void 0===ServiceDesk.Templates.Components)ServiceDesk.Templates.Components={};if(void 0===ServiceDesk.Templates.Components.Assets)ServiceDesk.Templates.Components.Assets={};if(void 0===ServiceDesk.Templates.Components.Assets.Field)ServiceDesk.Templates.Components.Assets.Field={};if(ServiceDesk.Templates.Components.Assets.Field.container=function(e,t){for(var n='<div id="asset-fields-panel" class="module">',i=e.fields,s=i.length,r=0;r<s;r++){var o=i[r];n+='<div class="asset-field" data-field="'+soy.$$escapeHtml(o)+'"><div class="asset-field-label">'+soy.$$escapeHtml(o.label)+"</div>";for(var a=o.assets,u=a.length,l=0;l<u;l++){var c=a[l];n+='<div class="asset-container"><div class="linked-asset asset-info" data-origin="'+soy.$$escapeHtml(c.asset.serializedOrigin)+'" data-app-key="'+soy.$$escapeHtml(c.asset.appKey)+'" data-field-id="'+soy.$$escapeHtml(o.id)+'" data-linked-assets="'+soy.$$escapeHtml(o.assetsAsJson)+'"></div>';var f=c.iframes;n+='<div class="iframes">'+soy.$$filterNoAutoescape(f)+"</div></div>"}n+='</div><asset-picker data-linked-assets="'+soy.$$escapeHtml(o.assetsAsJson)+'" data-field-id="'+soy.$$escapeHtml(o.id)+'" data-field-config="'+soy.$$escapeHtml(o.configAsJson)+'"></asset-picker>'}return n+="</div>"},goog.DEBUG)ServiceDesk.Templates.Components.Assets.Field.container.soyTemplateName="ServiceDesk.Templates.Components.Assets.Field.container";if(ServiceDesk.Templates.Components.Assets.Field.asset=function(e,t){return'<div class="asset-rendered asset-info"><div class="asset-vendor-icon '+soy.$$escapeHtml(e.iconCssClass)+'"></div><div class="label">'+soy.$$escapeHtml(e.asset.label.value)+'</div><div class="more" id="more-'+soy.$$escapeHtml(e.fieldId)+"-"+soy.$$escapeHtml(e.asset.origin.appKey)+"-"+soy.$$escapeHtml(e.asset.origin.originId)+'">'+ServiceDesk.Templates.Components.Assets.Field.more(e)+'</div><div class="control">'+(e.expanded?'<div class="js-asset-collapse asset-toggle">'+aui.icons.icon({useIconFont:!0,size:"small",icon:"arrow-up"})+"</div>":'<div class="js-asset-expand asset-toggle">'+aui.icons.icon({useIconFont:!0,size:"small",icon:"arrow-down"})+"</div>")+"</div></div>"},goog.DEBUG)ServiceDesk.Templates.Components.Assets.Field.asset.soyTemplateName="ServiceDesk.Templates.Components.Assets.Field.asset";if(ServiceDesk.Templates.Components.Assets.Field.add=function(e,t){return""+aui.buttons.button({id:"sd-add-asset-button",text:"+ "+"Add asset",type:"link"})},goog.DEBUG)ServiceDesk.Templates.Components.Assets.Field.add.soyTemplateName="ServiceDesk.Templates.Components.Assets.Field.add";if(ServiceDesk.Templates.Components.Assets.Field.picker=function(e,t){return'<form class="aui"><select name="assetPickerId" class="js-asset-selector-element"></select></form>'},goog.DEBUG)ServiceDesk.Templates.Components.Assets.Field.picker.soyTemplateName="ServiceDesk.Templates.Components.Assets.Field.picker";if(ServiceDesk.Templates.Components.Assets.Field.more=function(e,t){return'<button id="asset-more-button" class="aui-button aui-button-compact aui-button-subtle aui-dropdown2-trigger aui-dropdown2-trigger-arrowless" aria-controls="asset-more-dropdown-'+soy.$$escapeHtml(e.fieldId)+"-"+soy.$$escapeHtml(e.asset.origin.appKey)+"-"+soy.$$escapeHtml(e.asset.origin.originId)+'"><span class="aui-icon aui-icon-small aui-iconfont-more">More</span></button><aui-dropdown-menu id="asset-more-dropdown-'+soy.$$escapeHtml(e.fieldId)+"-"+soy.$$escapeHtml(e.asset.origin.appKey)+"-"+soy.$$escapeHtml(e.asset.origin.originId)+'" class="dropdown aui-style-default aui-dropdown2"><aui-item-link class="unlink-asset">'+soy.$$escapeHtml("Unlink asset")+"</aui-item-link></aui-dropdown-menu>"},goog.DEBUG)ServiceDesk.Templates.Components.Assets.Field.more.soyTemplateName="ServiceDesk.Templates.Components.Assets.Field.more";i=[n(19),n(10)],void 0!==(s=function(){return ServiceDesk.Templates.Components.Assets.Field}.apply(t,i))&&(e.exports=s)},7:function(e,t,n){var i,s;i=[n(1),n(0),t],void 0!==(s=function(e,t,n){function i(e,t){var n=void 0;if("timeout"===t)n="The call to the Jira server did not complete within the timeout period.  We are unsure of the result of this operation.";else if(401===e.status)n="You are not authorized to perform this operation.  Please log in.";else if(e.responseText&&e.responseText.length>0)n="The Jira server was contacted but has returned an error response. We are unsure of the result of this operation.";else n="The Jira server could not be contacted. This may be a temporary glitch or the server may be down.";return n}function s(e){return e.then(null,function(e){return t.extend(e,n.getErrorCollection(e))}),e}function r(e,n,i,s,r){return t.extend({},v,{url:e,type:n,dataType:i,contentType:s,timeout:h,headers:r||{}})}function o(n,i){var o=r(n,"GET","json","application/json",i);if(t.isObject(n))o=t.extend(o,n);else o.url=n;return s(e.ajax(o))}function a(t,n,i,o,a,u){var l=r(i,"POST",t,n,a);if("application/json"===n)l.data=JSON.stringify(o);else l.data=o;if(u)l.timeout=u;return s(e.ajax(l))}function u(e,t,n,i){return s(a("json","application/json",e,t,n,i))}function l(e,t,n,i){return s(a("html","application/json",e,t,n,i))}function c(e,t,n,i,r){return s(a("json",e,t,n,i,r))}function f(t,n,i){var o=r(t,"PUT","json","application/json",i);return o.data=JSON.stringify(n),s(e.ajax(o))}function p(t,n){var i=r(t,"DELETE","json","application/json",n);return s(e.ajax(i))}function d(t){e(document).ajaxSuccess(t)}function m(t){e(document).off("ajaxSuccess",t)}var v={traditional:!0},h=18e4;n.get=o,n.post=u,n.postForHtml=l,n.postWithContentType=c,n.put=f,n.del=p,n.registerGlobalAjaxSuccessHandler=d,n.unregisterGlobalAjaxSuccessHandler=m,n.markupWithErrors=s,n.getErrorCollection=function(e){var t=void 0;try{t=JSON.parse(e.responseText)}catch(e){t={errors:[{errorMessage:"Something has gone wrong with your request. If symptoms persist contact your System Administrator."}]}}return t},n.getErrorMessage=function(e){try{return JSON.parse(e.responseText).errors[0].errorMessage}catch(e){return "Something has gone wrong with your request. If symptoms persist contact your System Administrator."}},n.buildSimpleErrorContent=i}.apply(t,i))&&(e.exports=s)},720:function(e,t,n){var i,s;i=[n(2),n(5),n(7)],void 0!==(s=function(e){return e.Model.extend({namedAttributes:{value:String,label:String},defaults:{value:"",label:""}})}.apply(t,i))&&(e.exports=s)},721:function(e,t,n){var i,s;i=[n(0),n(2),n(4),n(1),n(34),n(332),n(722),n(511),n(537),n(891)],void 0!==(s=function(e,t,n,i,s,r,o){var a=t.Model.extend({namedAttributes:{appKey:String,originId:String,serializedOrigin:String,value:String}}),u=t.Model.extend({namedAttributes:{asset:a,iframes:String}}),l=t.Collection.extend({model:u}),c=t.Model.extend({namedAttributes:{appKey:String,originId:String}}),f=t.Collection.extend({model:c}),p=t.Model.extend({namedAttributes:{types:f}}),d=t.Model.extend({namedAttributes:{linkedAssets:l,fieldId:String,fieldConfig:p}}),m=t.View.extend({templatePicker:ServiceDesk.Templates.Components.Assets.Field.picker,templateAdd:ServiceDesk.Templates.Components.Assets.Field.add,events:{"click #sd-add-asset-button":"renderPicker","blur #assetPickerId-field":"renderAdd"},renderAdd:function(){var e=this.templateAdd({});this.$el.html(e)},renderPicker:function(){var e=this.templatePicker({});this.$el.html(e);var t=this.$el.find(".js-asset-selector-element")[0];new o({element:t,linkedAssets:this.model.getLinkedAssets(),fieldId:this.model.getFieldId(),fieldConfig:this.model.getFieldConfig()}).$field.focus().select()},render:function(){this.renderAdd()}});return s("asset-picker",{created:function(e){var t=i(e);new m({el:t,model:new d(t.data())}).render()}})}.apply(t,i))&&(e.exports=s)},722:function(e,t,n){function i(e,t,n){if(t in e)Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0});else e[t]=n;return e}var s,r;s=[n(0),n(1),n(348),n(527),n(528),n(538)],void 0!==(r=function(e,t,n,s,r){var o=n.extend({templates:{assetSubtitle:ServiceDesk.Templates.Components.Assets.Field.subtitle},_renders:{suggestion:function(e,t){var i=n.prototype._renders.suggestion.call(this,e,t),s=i.find(".aui-list-item-link");if(e.properties.subtitle){var r=this.templates.assetSubtitle({text:e.properties.subtitle});s.append(r)}return i}}});return AJS.SingleSelect.extend({init:function(n){function i(t){t=t||{};var i=[],s=e.reject(t.values,function(t){return e.some(n.linkedAssets.models,function(e){return t.origin.appKey+"/"+t.origin.originId===e.getAsset().getSerializedOrigin()})});return e.each(s,function(e){var t=n.buildItemValue(e);i.push(new AJS.ItemDescriptor({value:t,label:e.label.value,title:e.label.value,icon:null,disabled:!1}))}),i}n.buildItemValue=n.buildItemValue||function(e){return e.origin.appKey+"/"+e.origin.originId};var s=function(e){return encodeURIComponent((e.getAppKey()+"/"+e.getOriginId()).toLowerCase())},r=function(t){var n="";return e.each(t,function(e){n+="type="+s(e)+"&"}),n.slice(0,-1)},o=r(n.fieldConfig.getTypes().models);t.extend(n,{submitInputVal:!0,removeDuplicates:!0,ajaxOptions:{url:AJS.contextPath()+"/rest/assetapi/asset/search?"+o,query:!0,formatResponse:i,headers:{"X-B3-Sampled":"1"}}}),this._super(n)},_getFieldData:function(e){return i({issueId:s.getIssueId(),atl_token:atl_token(),singleFieldEdit:!0,fieldsToForcePresent:this.options.fieldId},this.options.fieldId,e.properties.value)},_getFormDataFromData:function(e){var t=new FormData;for(var n in e)if(e.hasOwnProperty(n))t.append(n,e[n]);return t},_appendLinkedAssetsToFormData:function(t){var n=this;return e.each(this.options.linkedAssets.models,function(e){t.append(n.options.fieldId,e.getAsset().getSerializedOrigin())}),t},_updateFieldsSelectedAssets:function(e){t.ajax({url:AJS.contextPath()+"/secure/AjaxIssueAction.jspa?decorator=none",data:e,type:"POST",contentType:!1,processData:!1,headers:{"X-SITEMESH-OFF":!0},success:function(){r.refreshSelectedIssue()}})},_createListController:function(){var e=this;this.listController=new o({containerSelector:t(".aui-list",this.$container),matchingStrategy:this.options.matchingStrategy,maxInlineResultsDisplayed:this.options.maxInlineResultsDisplayed,matchItemText:this.options.matchItemText,hasLinks:this.options.hasLinks,selectionHandler:function(t){var n=this.getFocused(),i=n.data("descriptor");e.setSelection(i),e.$field.select();var s=e._getFieldData(i),r=e._appendLinkedAssetsToFormData(e._getFormDataFromData(s));e._updateFieldsSelectedAssets(r),t.preventDefault()}})}})}.apply(t,s))&&(e.exports=r)},723:function(e,t,n){var i,s;i=[n(0),n(2),n(4),n(1),n(34),n(720),n(332),n(333),n(511),n(537)],void 0!==(s=function(e,t,n,i,s,r,o,a){var u=t.Collection.extend({model:r}),l=t.Model.extend({namedAttributes:{maxDisplayedAssets:Number,expanded:Boolean,assets:u,displayRemoveLink:Boolean,removeLinkClass:String,removeLinkTrigger:String,removeLinkStatusClass:String},getDisplayedAssets:function(){var e=this.getAssets().toJSON();if(e.sort(function(e,t){if(e.label<t.label)return-1;if(e.label>t.label)return 1;else return 0}),this.getExpanded())return e;else return e.slice(0,this.getMaxDisplayedAssets())},getRemoveLinkOptions:function(){return{class:this.getRemoveLinkClass(),trigger:this.getRemoveLinkTrigger(),statusClass:this.getRemoveLinkStatusClass()}},hasToggle:function(){return this.getAssets().length>this.getMaxDisplayedAssets()},defaults:{maxDisplayedAssets:5,expanded:!1,displayRemoveLink:!1,removeLinkClass:"",removeLinkTrigger:"",removeLinkStatusClass:""}}),c=t.View.extend({template:ServiceDesk.Templates.Components.Assets.main,events:{"click .js-assets-expand":"onExpandClicked","click .js-assets-contract":"onContractClicked"},onContractClicked:function(e){this.model.setExpanded(!1),n.trackEvent("servicedesk.issue.assets.list.contracted"),e.preventDefault(),this.render()},onExpandClicked:function(e){this.model.setExpanded(!0),n.trackEvent("servicedesk.issue.assets.list.expanded"),e.preventDefault(),this.render()},renderTemplate:function(e){var t=this.template({displayedAssets:e,totalAssets:this.model.getAssets().length,hasToggle:this.model.hasToggle(),expanded:this.model.getExpanded(),displayRemoveLink:this.model.getDisplayRemoveLink(),removeLinkOptions:this.model.getRemoveLinkOptions()});this.$el.html(t)},render:function(){var e=this;this.renderTemplate(this.model.getDisplayedAssets()),this.model.getDisplayedAssets().forEach(function(t){a(t.value,function(t){i("[data-key='"+t.origin.appKey+"/"+t.origin.originId+"']").html(ServiceDesk.Templates.Components.Assets.assetItem({asset:o(t),displayRemoveLink:e.model.getDisplayRemoveLink(),removeLinkOptions:e.model.getRemoveLinkOptions()}))})})}});return s("sd-assets",{created:function(e){var t=i(e);new c({el:t,model:new l(t.data())}).render()}})}.apply(t,i))&&(e.exports=s)},724:function(e,t,n){var i,s;i=[n(0),n(2),n(1),n(7),n(5),n(34),n(333),n(527),n(528),n(678),n(538)],void 0!==(s=function(e,t,n,i,s,r,o,a,u){var l=t.Model.extend({namedAttributes:{appKey:String,originId:String,serializedOrigin:String,value:String}}),c=t.Model.extend({namedAttributes:{asset:l,iframes:String}}),f=t.Collection.extend({model:c}),p=t.Model.extend({namedAttributes:{linkedAssets:f,fieldId:String,appKey:String,origin:String,expanded:Boolean,moreClicked:Boolean},defaults:{expanded:!1,moreClicked:!1}}),d=t.View.extend({templateAsset:ServiceDesk.Templates.Components.Assets.Field.asset,resolvedAsset:null,events:{"click .more":"onMoreClick",click:"onClick"},_getFieldData:function(){return{issueId:a.getIssueId(),atl_token:atl_token(),singleFieldEdit:!0,fieldsToForcePresent:this.model.getFieldId()}},_getFormDataFromData:function(e){var t=new FormData;for(var n in e)if(e.hasOwnProperty(n))t.append(n,e[n]);return t},_appendOtherLinkedAssetsToFormData:function(t){var n=this;return e.each(this.model.getLinkedAssets().models,function(e){if(e.getAsset().getSerializedOrigin()!==n.model.getOrigin())t.append(n.model.getFieldId(),e.getAsset().getSerializedOrigin())}),t},_updateFieldsSelectedAssets:function(e){n.ajax({url:AJS.contextPath()+"/secure/AjaxIssueAction.jspa?decorator=none",data:e,type:"POST",contentType:!1,processData:!1,headers:{"X-SITEMESH-OFF":!0}}).done(function(){u.refreshSelectedIssue()})},unlinkAsset:function(){var e=this._getFieldData(),t=this._appendOtherLinkedAssetsToFormData(this._getFormDataFromData(e));this._updateFieldsSelectedAssets(t)},onClick:function(e){if(!this.model.getMoreClicked()){if(e.preventDefault(),this.model.getExpanded())this.model.setExpanded(!1),this.$el.next().removeClass("expanded");else this.model.setExpanded(!0),this.$el.next().addClass("expanded");this.render()}this.model.setMoreClicked(!1)},onMoreClick:function(e){var t=this;e.stopImmediatePropagation(),this.model.setMoreClicked(!0);var i=this.model.getFieldId(),s=this.model.getOrigin().split("/")[0],r=this.model.getOrigin().split("/")[1],o=n("#more-"+i+"-"+s+"-"+r+" > #asset-more-button"),a=n(".unlink-asset > a");o.css("visibility","visible"),n(document).one("click",function(){o.css("visibility","")}),a.on("click",function(){t.unlinkAsset()})},createIconCssClass:function(){return this.model.getAppKey().replace(/\./g,"-")},renderAsset:function(e){var t=this.templateAsset({asset:e,fieldId:this.model.getFieldId(),expanded:this.model.getExpanded(),iconCssClass:this.createIconCssClass()});this.$el.html(t)},render:function(){var e=this;if(null===this.resolvedAsset)o(this.model.getOrigin(),function(t){e.renderAsset(t),e.resolvedAsset=t});else this.renderAsset(this.resolvedAsset)}});return r("linked-asset",{created:function(e){var t=n(e);new d({el:t,model:new p(t.data())}).render()}})}.apply(t,i))&&(e.exports=s)},891:function(e,t){},91:function(e,t){e.exports=window.require("jira/ajs/select/multi-select/lozenge-group")},941:function(e,t,n){n(16),e.exports=n(554)}},[941]);;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:lib', location = 'namespaces.js' */
JIRA.Components=JIRA.Components||{},JIRA.Issues=JIRA.Issues||{},JIRA.Events=JIRA.Events||{};
//# sourceMappingURL=namespaces-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:custom-fields', location = 'customfields/js/util/IssuesApi.js' */
define("jira-project-config/issues/api",function(){return window.JIRA&&window.JIRA.Issues&&window.JIRA.Issues.Api});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:custom-fields', location = 'customfields/js/main.js' */
require(["jira-project-config/issues/api","wrm/require","jquery"],function(i,e,c){var n=function(i){e(["wrc!com.atlassian.jira.jira-project-config-plugin.custom-fields-impl"],function(){require(["jira-project-config/custom-fields/api"],i)})};c(document).on("click",".issueaction-fields-add",function(e){e.preventDefault();var c=i.getSelectedIssueId();n(function(i){i.addCustomFieldToIssue(c)})})});;
;
/* module-key = 'com.atlassian.jira.jira-share-plugin:share-resources', location = 'templates/share-dialog.soy' */
// This file was automatically generated from share-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Dialogs.Share.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Dialogs == 'undefined') { JIRA.Templates.Dialogs = {}; }
if (typeof JIRA.Templates.Dialogs.Share == 'undefined') { JIRA.Templates.Dialogs.Share = {}; }


JIRA.Templates.Dialogs.Share.contentPopup = function(opt_data, opt_ignored) {
  return '<form action="#" method="post" class="aui recipients-form share-content-popup ' + ((opt_data.shareData.issue) ? ' viewissue ' : (opt_data.shareData.filter) ? ' issuenav ' : '') + '">' + JIRA.Templates.Dialogs.Share.shareLink(opt_data) + '<fieldset class="padding">' + ((opt_data.showForm) ? JIRA.Templates.Dialogs.Share.shareForm(opt_data) : JIRA.Templates.Dialogs.Share.disabledMailMessage(soy.$$augmentMap(opt_data.isAdmin, {isAdmin: opt_data.isAdmin}))) + '</fieldset></form>';
};
if (goog.DEBUG) {
  JIRA.Templates.Dialogs.Share.contentPopup.soyTemplateName = 'JIRA.Templates.Dialogs.Share.contentPopup';
}


JIRA.Templates.Dialogs.Share.shareForm = function(opt_data, opt_ignored) {
  return '<label for="sharenames-multi-select">' + soy.$$escapeHtml('User name or email') + '</label><div class="autocomplete-user-target"><select id="sharenames" name="sharenames" class="share-user-picker hidden" multiple="multiple"></select></div><ol class="recipients"></ol><div><label for="note">' + soy.$$escapeHtml('Note') + '</label></div><textarea class="textarea long-field" id="note" placeholder="' + soy.$$escapeHtml('Add an optional note') + '"/><div class="button-panel"><div class="status"><div class="icon"></div><div class="progress-messages"></div></div><div class="buttons"><input accesskey="' + soy.$$escapeHtml('s') + '" id="submitShare" title="' + soy.$$escapeHtml(AJS.format('Press {1}+{0} to submit this form','s',opt_data.modifierKey)) + '" class="button submit" type="submit" value="' + soy.$$escapeHtml('Share') + '" disabled/> <a accesskey="' + soy.$$escapeHtml('`') + '" id="cancelShare" title="' + soy.$$escapeHtml(AJS.format('Press {1}+{0} to cancel','`',opt_data.modifierKey)) + '" class="close-dialog" href="javascript:">' + soy.$$escapeHtml('Cancel') + '</a></div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.Dialogs.Share.shareForm.soyTemplateName = 'JIRA.Templates.Dialogs.Share.shareForm';
}


JIRA.Templates.Dialogs.Share.disabledMailMessage = function(opt_data, opt_ignored) {
  return '' + ((! opt_data.isAdmin) ? aui.message.generic({content: '<p>' + soy.$$escapeHtml('Outgoing mail is not configured. Please contact your Jira administrator to enable sharing.') + '</p>', extraClasses: 'disabled-mail-message'}) : aui.message.generic({content: '<p>' + soy.$$escapeHtml('Outgoing mail is not configured. You can configure it here') + '<a class="aui-list-item-link" id="configure_mail_server" href="' + soy.$$escapeHtml("") + '/secure/admin/OutgoingMailServers.jspa"><em> ' + soy.$$escapeHtml('Outgoing mail') + '</em></a>.</p>', extraClasses: 'disabled-mail-message'}));
};
if (goog.DEBUG) {
  JIRA.Templates.Dialogs.Share.disabledMailMessage.soyTemplateName = 'JIRA.Templates.Dialogs.Share.disabledMailMessage';
}


JIRA.Templates.Dialogs.Share.shareLink = function(opt_data, opt_ignored) {
  return '' + ((opt_data.shareData.permlink) ? '<div class="issuenav-permalink padding"><label>' + ((opt_data.shareData.issue) ? soy.$$escapeHtml('Link to issue') : (opt_data.shareData.filter) ? soy.$$escapeHtml('Link to filter') : '') + '</label><input class="permalink text long-field" value="' + soy.$$escapeHtml(opt_data.shareData.permlinkWithAtlOrigin) + '" readonly></div>' : '');
};
if (goog.DEBUG) {
  JIRA.Templates.Dialogs.Share.shareLink.soyTemplateName = 'JIRA.Templates.Dialogs.Share.shareLink';
}
;
;
/* module-key = 'com.atlassian.jira.jira-share-plugin:share-resources', location = 'js/share-user-multi-select.js' */
define("jira/share-plugin/share-user-picker",["jira/skate","jira/field/multi-user-list-picker","jquery"],function(e,r,t){var a=t(document);return e("share-user-picker",{type:e.type.CLASSNAME,attached:function(e){var i=t(e),u=new r({layerId:i.attr("id")+"-layer",element:i,freeEmailInput:!0});a.trigger("ready.multi-select.share-user",u)}})});;
;
/* module-key = 'com.atlassian.jira.jira-share-plugin:share-resources', location = 'js/share-dialog.js' */
define("jira/share-plugin/share-plugin-dialog",["jira/util/logger","jira/util/formatter","wrm/context-path","underscore","jira/share-plugin/share-user-picker","jira/ajs/layer/inline-layer","jira/ajs/ajax/smart-ajax","jira/util/events","jira/util/events/types","jira/util/data/meta","jira/util/events/reasons","aui/inline-dialog","jquery","jira/analytics","OriginTracing"],function(e,i,n,t,r,a,s,o,l,d,u,h,c,g,f){return function(){function r(){return c(this).attr("data-username")}function m(){return c(this).attr("data-email")}var p,b,v,_=!0;this.resetAndHide=function(){return c(document).one("hideLayer",function(e,i,n){"inlineDialog"===i&&n.popup===p&&(c(document).unbind(".share-dialog"),v.empty(),v=void 0,b=void 0)}),this.hideDialog()},this.hideDialog=function(){return p.hide(),!1},this._originTracingForShare={},this._originTracingForIssueLink={},this._getShareType=function(e){return e.issue?"issue":e.jql?"unsaved-filter":e.filterId?"saved-filter":void 0},this._getNewOriginTracingInstance=function(){return new f({product:"jira"})},this._buildSendShareUrl=function(e,i){var t=n()+"/rest/share/1.0";return e.issue?t+="/issue/"+e.issueKey:e.filter&&(e.filterId?t+="/filter/"+e.filterId:(i.jql=e.jql,t+="/search")),t},this._successShareHandler=function(){var e=v.find(".button-panel .icon");e.removeClass("throbber loading").addClass("icon-tick");var n=v.find(".progress-messages");n.removeClass("sending").addClass("success").text("Sent"),setTimeout(this.resetAndHide.bind(this),1e3)},this._errorShareHandler=function(){var e=v.find(".button-panel .icon");e.removeClass("throbber loading").addClass("icon-cross");var n=v.find(".progress-messages");n.removeClass("sending").addClass("error").text("Error while sending")},this._sendShare=function(n,r){c("button,input,textarea",this).attr("disabled","disabled");var a=v.find(".button-panel .icon");a.addClass("throbber loading");var o=v.find(".progress-messages");o.text("Sending"),o.addClass("sending");var l=this._buildSendShareUrl(r,n);e.trace("jira.plugins.share.send",t.defaults({url:l},n));var d={type:"POST",contentType:"application/json",dataType:"json",url:l,data:JSON.stringify(n),success:this._successShareHandler.bind(this),error:this._errorShareHandler.bind(this)};s.makeRequest(d)},this._collectMailData=function(){var e=v.find(".recipients"),i=e.find("li[data-username]").map(r).toArray(),n=e.find("li[data-email]").map(m).toArray();if(!i.length&&!n.length)return!1;var t=v.find("#note").val()||"",a={usernames:i,emails:n,message:t};return this._originTracingForShare=this._getNewOriginTracingInstance(),a.atlOrigin=this._originTracingForShare.encode(),a},this.submit=function(e){var i=this._collectMailData();if(i){this._sendShare(i,e);var n={shareType:this._getShareType(e)};i.usernames&&(n.userCount=i.usernames.length),i.emails&&(n.emailCount=i.emails.length),i.message&&(n.messageLength=i.message.length),g.send({name:"jira.sharedialog.share.submitted",properties:t.extend(n,this._originTracingForShare.toAnalyticsAttributes({hasGeneratedId:!0}))})}return!1},this._enableSubmit=function(e){v.find(".submit").prop("disabled",!e)},this.enableAccessKeys=function(e){c(e).handleAccessKeys({selective:!1})},this._getShareData=function(e){var i,n,t=c(e);t.hasClass("viewissue-share")?(i="issue",n=d.get("viewissue-permlink")):(i="filter",n=d.get("issuenav-permlink")),this._originTracingForIssueLink=this._getNewOriginTracingInstance();var r={issueKey:d.get("issue-key"),filterId:d.get("filter-id"),jql:d.get("filter-jql"),permlink:n,permlinkWithAtlOrigin:this._originTracingForIssueLink.addToUrl(n)};return r[i]=!0,r},this._enableSubmitWhenIsRecipient=function(){var e=v.find("#sharenames").val(),i=null!=e&&e.length>0;this._enableSubmit(i)},this._selectIssueLink=function(e,i){return i.target.select(),g.send({name:"jira.sharedialog.permalink.clicked",properties:t.extend({shareType:this._getShareType(e)},this._originTracingForIssueLink.toAnalyticsAttributes({hasGeneratedId:!0}))}),!1},this._addInteractionHandlersToDialog=function(e){v.find("#sharenames").bind("change unselect",this._enableSubmitWhenIsRecipient.bind(this)),v.find(".close-dialog").click(this.resetAndHide.bind(this)),v.find("form").submit(this.submit.bind(this,e)),v.find(".issuenav-permalink .text").click(this._selectIssueLink.bind(this,e)),c(document).bind("keyup.share-dialog",function(e){return e.keyCode!==c.ui.keyCode.ESCAPE||this.hideDialog()}.bind(this)),c(document).bind("showLayer.share-dialog",function(e,i,n){"inlineDialog"===i&&n.popup===p&&v.find("#sharenames-textarea").focus()})},this._renderDialogContent=function(e){v.html(JIRA.Templates.Dialogs.Share.contentPopup({shareData:e,modifierKey:d.get("keyboard-accesskey-modifier"),showForm:d.get("outgoing-mail-enabled"),isAdmin:d.get("is-admin")}))},this._generatePopup=function(e,i,n){var t=this._getShareData(i);return v&&b===t.permlink?(v=e,v.find(".permalink").val(t.permlinkWithAtlOrigin),void n()):(b=t.permlink,v=e,this._renderDialogContent(t),c.browser.msie&&v.find("form").ieImitationPlaceholder(),this._enableSubmit(!1),this._addInteractionHandlersToDialog.call(this,t),this.enableAccessKeys(c("form",v)),n(),void o.trigger(l.NEW_CONTENT_ADDED,[v,u.shareDialogOpened]))},this._scrollIntoViewForAuto=function(){var e=this,i=c(this.context);i.scrollIntoViewForAuto({complete:function(){var i=c(this).add(window);t.delay(function(){i.one("scroll",function(){c(document.activeElement).blur(),e.hideDialog()})},20)}})},this._createDialogOptions=function(e){var i=e.indexOf("issuenav")!==-1?-110:-170;return{preHideCallback:function(){return _},hideCallback:function(){c(".dashboard-actions .explanation").hide()},offsetY:17,offsetX:i,hideDelay:36e5,useLiveEvents:!0,initCallback:this._scrollIntoViewForAuto.bind(this)}},this._addAJSInlineLayerEventHandlers=function(){o.bind(a.EVENTS.beforeShow,function(e,i,n){"sharenames-layer"===n&&(_=!1)}),o.bind(a.EVENTS.hide,function(e,i,n,t){"sharenames-layer"===t&&setTimeout(function(){_=!0},0)})},this._initShareDialog=function(e,i){this.context=i,this._addAJSInlineLayerEventHandlers();var n=this._createDialogOptions(e);p=h(c(i),e,this._generatePopup.bind(this),n),p[0].popup._validateClickToClose=function(e){return validationResult=0===p.has(e.target).length},c(i).live("click",function(){AJS.$(".aui-dropdown2-active").trigger("aui-button-invoke"),p.find(".contents:visible").length&&p.find("a.close-dialog").click()}),c(document).bind("keydown",function(e){e.keyCode===c.ui.keyCode.ESCAPE&&h.current!==p&&p.is(":visible")&&(h.current&&h.current.hide(),p.hide())})},this._overrideContents=function(e){v=e},this._getCurrentDialogContent=function(){return v},this._getAllowDialogHide=function(){return _}}}),AJS.namespace("JIRA.JiraSharePlugin.SharePluginDialog",null,require("jira/share-plugin/share-plugin-dialog"));;
;
/* module-key = 'com.atlassian.jira.jira-share-plugin:share-resources-init', location = 'js/share-dialog-init.js' */
define("jira/share-plugin/initialiser",["underscore","jira/share-plugin/share-plugin-dialog","jquery"],function(i,e,a){return{init:i.once(function(){var s={};return s.viewIssueDialog=new e(a),s.issueNavDialog=new e(a),a(i.bind(s.viewIssueDialog._initShareDialog,s.viewIssueDialog,"share-entity-popup-viewissue","#jira-share-trigger.viewissue-share")),a(i.bind(s.issueNavDialog._initShareDialog,s.issueNavDialog,"share-entity-popup-issuenav","#jira-share-trigger.issuenav-share")),s})}}),function(i){var e=i.init();AJS.namespace("JIRA.JiraSharePlugin.viewIssueDialog",null,e.viewIssueDialog),AJS.namespace("JIRA.JiraSharePlugin.issueNavDialog",null,e.issueNavDialog)}(require("jira/share-plugin/initialiser"));;
;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:marionette', location = 'lib/backbone/marionette/backbone.marionette-amd.js' */
define("jira/view-issue-plugin/lib/marionette",["backbone","underscore","atlassian/libs/factories/marionette-2.1.0"],function(e,i,n){return n(i,e)});;
;
/* module-key = 'com.atlassian.plugin.jslibs:jquery.fancybox-1.3.4', location = 'jquery-plugins/jquery.fancybox/1.3.4/jquery.fancybox-1.3.4.js' */
(function(r){define("atlassian/jquery-plugins/jquery.fancybox-1.3.4",function(){return function(t){r(window,document,t);return t}})})(function(r,t,R){var a=R,n,u,v,e,B,l,C,i,y,z,q=0,d={},o=[],p=0,b={},j=[],E=null,m=new Image,H=/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i,T=/[^\.]\.(swf)\s*$/i,I,J=1,x=0,w="",s,g,k=!1,A=a.extend(a("<div/>")[0],{prop:0}),K=a.browser.msie&&7>a.browser.version&&!r.XMLHttpRequest,L=function(){u.hide();m.onerror=m.onload=null;E&&E.abort();n.empty()},M=function(){!1===d.onError(o,q,
d)?(u.hide(),k=!1):(d.titleShow=!1,d.width="auto",d.height="auto",n.html('<p id="fancybox-error">The requested content cannot be loaded.<br />Please try again later.</p>'),D())},G=function(){var c=o[q],b,f,e,g,j,i;L();d=a.extend({},a.fn.fancybox.defaults,"undefined"==typeof a(c).data("fancybox")?d:a(c).data("fancybox"));i=d.onStart(o,q,d);if(!1===i)k=!1;else{"object"==typeof i&&(d=a.extend(d,i));e=d.title||(c.nodeName?a(c).attr("title"):c.title)||"";c.nodeName&&!d.orig&&(d.orig=a(c).children("img:first").length?
a(c).children("img:first"):a(c));""===e&&(d.orig&&d.titleFromAlt)&&(e=d.orig.attr("alt"));b=d.href||(c.nodeName?a(c).attr("href"):c.href)||null;if(/^(?:javascript)/i.test(b)||"#"==b)b=null;d.type?(f=d.type,b||(b=d.content)):d.content?f="html":b&&(f=b.match(H)?"image":b.match(T)?"swf":a(c).hasClass("iframe")?"iframe":0===b.indexOf("#")?"inline":"ajax");if(f)switch("inline"==f&&(c=b.substr(b.indexOf("#")),f=0<a(c).length?"inline":"ajax"),d.type=f,d.href=b,d.title=e,d.autoDimensions&&("html"==d.type||
"inline"==d.type||"ajax"==d.type?(d.width="auto",d.height="auto"):d.autoDimensions=!1),d.modal&&(d.overlayShow=!0,d.hideOnOverlayClick=!1,d.hideOnContentClick=!1,d.enableEscapeButton=!1,d.showCloseButton=!1),d.padding=parseInt(d.padding,10),d.margin=parseInt(d.margin,10),n.css("padding",d.padding+d.margin),a(".fancybox-inline-tmp").unbind("fancybox-cancel").bind("fancybox-change",function(){a(this).replaceWith(l.children())}),f){case "html":n.html(d.content);D();break;case "inline":if(!0===a(c).parent().is("#fancybox-content")){k=
!1;break}a('<div class="fancybox-inline-tmp" />').hide().insertBefore(a(c)).bind("fancybox-cleanup",function(){a(this).replaceWith(l.children())}).bind("fancybox-cancel",function(){a(this).replaceWith(n.children())});a(c).appendTo(n);D();break;case "image":k=!1;a.fancybox.showActivity();m=new Image;m.onerror=function(){M()};m.onload=function(){k=true;m.onerror=m.onload=null;d.width=m.width;d.height=m.height;a("<img />").attr({id:"fancybox-img",src:m.src,alt:d.title}).appendTo(n);N()};m.src=b;break;
case "swf":d.scrolling="no";g='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+d.width+'" height="'+d.height+'"><param name="movie" value="'+b+'"></param>';j="";a.each(d.swf,function(a,c){g=g+('<param name="'+a+'" value="'+c+'"></param>');j=j+(" "+a+'="'+c+'"')});g+='<embed src="'+b+'" type="application/x-shockwave-flash" width="'+d.width+'" height="'+d.height+'"'+j+"></embed></object>";n.html(g);D();break;case "ajax":k=!1;a.fancybox.showActivity();d.ajax.win=d.ajax.success;
E=a.ajax(a.extend({},d.ajax,{url:b,data:d.ajax.data||{},error:function(a){a.status>0&&M()},success:function(a,c,f){if((typeof f=="object"?f:E).status==200){if(typeof d.ajax.win=="function"){i=d.ajax.win(b,a,c,f);if(i===false){u.hide();return}if(typeof i=="string"||typeof i=="object")a=i}n.html(a);D()}}}));break;case "iframe":N()}else M()}},D=function(){var c=d.width,b=d.height,c=-1<c.toString().indexOf("%")?parseInt((a(r).width()-2*d.margin)*parseFloat(c)/100,10)+"px":"auto"==c?"auto":c+"px",b=-1<
b.toString().indexOf("%")?parseInt((a(r).height()-2*d.margin)*parseFloat(b)/100,10)+"px":"auto"==b?"auto":b+"px";n.wrapInner('<div style="width:'+c+";height:"+b+";overflow: "+("auto"==d.scrolling?"auto":"yes"==d.scrolling?"scroll":"hidden")+';position:relative;"></div>');d.width=n.width();d.height=n.height();N()},N=function(){var c,h;u.hide();if(e.is(":visible")&&!1===b.onCleanup(j,p,b))a.event.trigger("fancybox-cancel"),k=!1;else{k=!0;a(l.add(v)).unbind();a(r).unbind("resize.fb scroll.fb");a(t).unbind("keydown.fb");
e.is(":visible")&&"outside"!==b.titlePosition&&e.css("height",e.height());j=o;p=q;b=d;if(b.overlayShow){if(v.css({"background-color":b.overlayColor,opacity:b.overlayOpacity,cursor:b.hideOnOverlayClick?"pointer":"auto",height:a(t).height()}),!v.is(":visible")){if(K)a("select:not(#fancybox-tmp select)").filter(function(){return"hidden"!==this.style.visibility}).css({visibility:"hidden"}).one("fancybox-cleanup",function(){this.style.visibility="inherit"});v.show()}}else v.hide();c=O();var f={},F=b.autoScale,
m=2*b.padding;f.width=-1<b.width.toString().indexOf("%")?parseInt(c[0]*parseFloat(b.width)/100,10):b.width+m;f.height=-1<b.height.toString().indexOf("%")?parseInt(c[1]*parseFloat(b.height)/100,10):b.height+m;if(F&&(f.width>c[0]||f.height>c[1]))if("image"==d.type||"swf"==d.type){if(F=b.width/b.height,f.width>c[0]&&(f.width=c[0],f.height=parseInt((f.width-m)/F+m,10)),f.height>c[1])f.height=c[1],f.width=parseInt((f.height-m)*F+m,10)}else f.width=Math.min(f.width,c[0]),f.height=Math.min(f.height,c[1]);
f.top=parseInt(Math.max(c[3]-20,c[3]+0.5*(c[1]-f.height-40)),10);f.left=parseInt(Math.max(c[2]-20,c[2]+0.5*(c[0]-f.width-40)),10);g=f;w=b.title||"";x=0;i.empty().removeAttr("style").removeClass();if(!1!==b.titleShow&&(w=a.isFunction(b.titleFormat)?b.titleFormat(w,j,p,b):w&&w.length?"float"==b.titlePosition?'<table id="fancybox-title-float-wrap" cellpadding="0" cellspacing="0"><tr><td id="fancybox-title-float-left"></td><td id="fancybox-title-float-main">'+w+'</td><td id="fancybox-title-float-right"></td></tr></table>':
'<div id="fancybox-title-'+b.titlePosition+'">'+w+"</div>":!1)&&""!==w)switch(i.addClass("fancybox-title-"+b.titlePosition).html(w).appendTo("body").show(),b.titlePosition){case "inside":i.css({width:g.width-2*b.padding,marginLeft:b.padding,marginRight:b.padding});x=i.outerHeight(!0);i.appendTo(B);g.height+=x;break;case "over":i.css({marginLeft:b.padding,width:g.width-2*b.padding,bottom:b.padding}).appendTo(B);break;case "float":i.css("left",-1*parseInt((i.width()-g.width-40)/2,10)).appendTo(e);break;
default:i.css({width:g.width-2*b.padding,paddingLeft:b.padding,paddingRight:b.padding}).appendTo(e)}i.hide();e.is(":visible")?(a(C.add(y).add(z)).hide(),c=e.position(),s={top:c.top,left:c.left,width:e.width(),height:e.height()},h=s.width==g.width&&s.height==g.height,l.fadeTo(b.changeFade,0.3,function(){var c=function(){l.html(n.contents()).fadeTo(b.changeFade,1,P)};a.event.trigger("fancybox-change");l.empty().removeAttr("filter").css({"border-width":b.padding,width:g.width-2*b.padding,height:d.autoDimensions?
"auto":g.height-x-2*b.padding});h?c():(A.prop=0,a(A).animate({prop:1},{duration:b.changeSpeed,easing:b.easingChange,step:Q,complete:c}))})):(e.removeAttr("style"),l.css("border-width",b.padding),"elastic"==b.transitionIn?(s=S(),l.html(n.contents()),e.show(),b.opacity&&(g.opacity=0),A.prop=0,a(A).animate({prop:1},{duration:b.speedIn,easing:b.easingIn,step:Q,complete:P})):("inside"==b.titlePosition&&0<x&&i.show(),l.css({width:g.width-2*b.padding,height:d.autoDimensions?"auto":g.height-x-2*b.padding}).html(n.contents()),
e.css(g).fadeIn("none"==b.transitionIn?0:b.speedIn,P)))}},P=function(){a.support.opacity||(l.get(0).style.removeAttribute("filter"),e.get(0).style.removeAttribute("filter"));d.autoDimensions&&l.css("height","auto");e.css("height","auto");w&&w.length&&i.show();b.showCloseButton&&C.show();(b.enableEscapeButton||b.enableKeyboardNav)&&a(t).bind("keydown.fb",function(c){if(c.keyCode==27&&b.enableEscapeButton){c.preventDefault();a.fancybox.close()}else if((c.keyCode==37||c.keyCode==39)&&b.enableKeyboardNav&&
c.target.tagName!=="INPUT"&&c.target.tagName!=="TEXTAREA"&&c.target.tagName!=="SELECT"){c.preventDefault();a.fancybox[c.keyCode==37?"prev":"next"]()}});b.showNavArrows?((b.cyclic&&1<j.length||0!==p)&&y.show(),(b.cyclic&&1<j.length||p!=j.length-1)&&z.show()):(y.hide(),z.hide());b.hideOnContentClick&&l.bind("click",a.fancybox.close);b.hideOnOverlayClick&&v.bind("click",a.fancybox.close);a(r).bind("resize.fb",a.fancybox.resize);b.centerOnScroll&&a(r).bind("scroll.fb",a.fancybox.center);"iframe"==b.type&&
a('<iframe id="fancybox-frame" name="fancybox-frame'+(new Date).getTime()+'" frameborder="0" hspace="0" '+(a.browser.msie?'allowtransparency="true""':"")+' scrolling="'+d.scrolling+'" src="'+b.href+'"></iframe>').appendTo(l);e.show();k=!1;a.fancybox.center();b.onComplete(j,p,b);var c,h;j.length-1>p&&(c=j[p+1].href,"undefined"!==typeof c&&c.match(H)&&(h=new Image,h.src=c));0<p&&(c=j[p-1].href,"undefined"!==typeof c&&c.match(H)&&(h=new Image,h.src=c))},Q=function(a){var d={width:parseInt(s.width+(g.width-
s.width)*a,10),height:parseInt(s.height+(g.height-s.height)*a,10),top:parseInt(s.top+(g.top-s.top)*a,10),left:parseInt(s.left+(g.left-s.left)*a,10)};"undefined"!==typeof g.opacity&&(d.opacity=0.5>a?0.5:a);e.css(d);l.css({width:d.width-2*b.padding,height:d.height-x*a-2*b.padding})},O=function(){return[a(r).width()-2*b.margin,a(r).height()-2*b.margin,a(t).scrollLeft()+b.margin,a(t).scrollTop()+b.margin]},S=function(){var c=d.orig?a(d.orig):!1,h={};c&&c.length?(h=c.offset(),h.top+=parseInt(c.css("paddingTop"),
10)||0,h.left+=parseInt(c.css("paddingLeft"),10)||0,h.top+=parseInt(c.css("border-top-width"),10)||0,h.left+=parseInt(c.css("border-left-width"),10)||0,h.width=c.width(),h.height=c.height(),h={width:h.width+2*b.padding,height:h.height+2*b.padding,top:h.top-b.padding-20,left:h.left-b.padding-20}):(c=O(),h={width:2*b.padding,height:2*b.padding,top:parseInt(c[3]+0.5*c[1],10),left:parseInt(c[2]+0.5*c[0],10)});return h},U=function(){u.is(":visible")?(a("div",u).css("top",-40*J+"px"),J=(J+1)%12):clearInterval(I)};
a.fn.fancybox=function(c){if(!a(this).length)return this;a(this).data("fancybox",a.extend({},c,a.metadata?a(this).metadata():{})).unbind("click.fb").bind("click.fb",function(c){c.preventDefault();k||(k=!0,a(this).blur(),o=[],q=0,c=a(this).attr("rel")||"",!c||""==c||"nofollow"===c?o.push(this):(o=a("a[rel="+c+"], area[rel="+c+"]"),q=o.index(this)),G())});return this};a.fancybox=function(c,b){var d;if(!k){k=!0;d="undefined"!==typeof b?b:{};o=[];q=parseInt(d.index,10)||0;if(a.isArray(c)){for(var e=0,
g=c.length;e<g;e++)"object"==typeof c[e]?a(c[e]).data("fancybox",a.extend({},d,c[e])):c[e]=a({}).data("fancybox",a.extend({content:c[e]},d));o=R.merge(o,c)}else"object"==typeof c?a(c).data("fancybox",a.extend({},d,c)):c=a({}).data("fancybox",a.extend({content:c},d)),o.push(c);if(q>o.length||0>q)q=0;G()}};a.fancybox.showActivity=function(){clearInterval(I);u.show();I=setInterval(U,66)};a.fancybox.hideActivity=function(){u.hide()};a.fancybox.next=function(){return a.fancybox.pos(p+1)};a.fancybox.prev=
function(){return a.fancybox.pos(p-1)};a.fancybox.pos=function(a){k||(a=parseInt(a),o=j,-1<a&&a<j.length?(q=a,G()):b.cyclic&&1<j.length&&(q=a>=j.length?0:j.length-1,G()))};a.fancybox.cancel=function(){k||(k=!0,a.event.trigger("fancybox-cancel"),L(),d.onCancel(o,q,d),k=!1)};a.fancybox.close=function(){function c(){v.fadeOut("fast");i.empty().hide();e.hide();a.event.trigger("fancybox-cleanup");l.empty();b.onClosed(j,p,b);j=d=[];p=q=0;b=d={};k=!1}if(!k&&!e.is(":hidden"))if(k=!0,b&&!1===b.onCleanup(j,
p,b))k=!1;else if(L(),a(C.add(y).add(z)).hide(),a(l.add(v)).unbind(),a(r).unbind("resize.fb scroll.fb"),a(t).unbind("keydown.fb"),l.find("iframe").attr("src",K&&/^https/i.test(r.location.href||"")?"javascript:void(false)":"about:blank"),"inside"!==b.titlePosition&&i.empty(),e.stop(),"elastic"==b.transitionOut){s=S();var h=e.position();g={top:h.top,left:h.left,width:e.width(),height:e.height()};b.opacity&&(g.opacity=1);i.empty().hide();A.prop=1;a(A).animate({prop:0},{duration:b.speedOut,easing:b.easingOut,
step:Q,complete:c})}else e.fadeOut("none"==b.transitionOut?0:b.speedOut,c)};a.fancybox.resize=function(){v.is(":visible")&&v.css("height",a(t).height());a.fancybox.center(!0)};a.fancybox.center=function(a){var d,f;if(!k&&(f=!0===a?1:0,d=O(),f||!(e.width()>d[0]||e.height()>d[1])))e.stop().animate({top:parseInt(Math.max(d[3]-20,d[3]+0.5*(d[1]-l.height()-40)-b.padding)),left:parseInt(Math.max(d[2]-20,d[2]+0.5*(d[0]-l.width()-40)-b.padding))},"number"==typeof a?a:200)};a.fancybox.init=function(){a("#fancybox-wrap").length||
(a("body").append(n=a('<div id="fancybox-tmp"></div>'),u=a('<div id="fancybox-loading"><div></div></div>'),v=a('<div id="fancybox-overlay"></div>'),e=a('<div id="fancybox-wrap"></div>')),B=a('<div id="fancybox-outer"></div>').append('<div class="fancybox-bg" id="fancybox-bg-n"></div><div class="fancybox-bg" id="fancybox-bg-ne"></div><div class="fancybox-bg" id="fancybox-bg-e"></div><div class="fancybox-bg" id="fancybox-bg-se"></div><div class="fancybox-bg" id="fancybox-bg-s"></div><div class="fancybox-bg" id="fancybox-bg-sw"></div><div class="fancybox-bg" id="fancybox-bg-w"></div><div class="fancybox-bg" id="fancybox-bg-nw"></div>').appendTo(e),
B.append(l=a('<div id="fancybox-content"></div>'),C=a('<a id="fancybox-close"></a>'),i=a('<div id="fancybox-title"></div>'),y=a('<a href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a>'),z=a('<a href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a>')),C.click(a.fancybox.close),u.click(a.fancybox.cancel),y.click(function(c){c.preventDefault();a.fancybox.prev()}),z.click(function(c){c.preventDefault();a.fancybox.next()}),
a.fn.mousewheel&&e.bind("mousewheel.fb",function(c,b){if(k)c.preventDefault();else if(0==a(c.target).get(0).clientHeight||a(c.target).get(0).scrollHeight===a(c.target).get(0).clientHeight)c.preventDefault(),a.fancybox[0<b?"prev":"next"]()}),a.support.opacity||e.addClass("fancybox-ie"),K&&(u.addClass("fancybox-ie6"),e.addClass("fancybox-ie6"),a('<iframe id="fancybox-hide-sel-frame" src="'+(/^https/i.test(r.location.href||"")?"javascript:void(false)":"about:blank")+'" scrolling="no" border="0" frameborder="0" tabindex="-1"></iframe>').prependTo(B)))};
a.fn.fancybox.defaults={padding:10,margin:40,opacity:!1,modal:!1,cyclic:!1,scrolling:"auto",width:560,height:340,autoScale:!0,autoDimensions:!0,centerOnScroll:!1,ajax:{},swf:{wmode:"transparent"},hideOnOverlayClick:!0,hideOnContentClick:!1,overlayShow:!0,overlayOpacity:0.7,overlayColor:"#777",titleShow:!0,titlePosition:"float",titleFormat:null,titleFromAlt:!1,transitionIn:"fade",transitionOut:"fade",speedIn:300,speedOut:300,changeSpeed:300,changeFade:"fast",easingIn:"swing",easingOut:"swing",showCloseButton:!0,
showNavArrows:!0,enableEscapeButton:!0,enableKeyboardNav:!0,onStart:function(){},onCancel:function(){},onComplete:function(){},onCleanup:function(){},onClosed:function(){},onError:function(){}};a(t).ready(function(){a.fancybox.init()})});;
;
/* module-key = 'jira.webresources:jquery-fancybox', location = '/includes/jquery/plugins/fancybox/jquery.fancybox.jira.js' */
require(["jquery","atlassian/jquery-plugins/jquery.fancybox-1.3.4"],function(t,i){i(t),t.fn.fancybox.defaults.titleFormat=function(t){if(t&&t.length)return t=AJS.escapeHtml(t),"float"===this.titlePosition?'<table id="fancybox-title-float-wrap" cellpadding="0" cellspacing="0"><tr><td id="fancybox-title-float-left"></td><td id="fancybox-title-float-main">'+t+'</td><td id="fancybox-title-float-right"></td></tr></table>':'<div id="fancybox-title-'+this.titlePosition+'">'+t+"</div>"}});;
;
/* module-key = 'jira.webresources:jquery-livestamp', location = '/includes/jquery/plugins/livestamp/time.js' */
define("jira/jquery/plugins/livestamp/time",["jira/util/formatter","jira/moment","jira/util/data/meta"],function(e,t,n){"use strict";function o(e,t){this.key=e,this.isAge=t}function r(t,n,o){return t in y?e.format(y[t],o):null}function a(e){switch(e.key){case"short":case"shortAge":return"ll";case"long":case"longAge":return"LL";case"full":case"fullAge":return"LLL";case"timestamp":return"LLL";default:return null}}function i(e){return e.clone().hours(0).minutes(0).seconds(0).milliseconds(0)}function u(e,t){var n=i(e),o=n.clone().subtract("d",1);return o<=t&&t<n}function l(e,t){var n=i(e).add("d",1),o=n.clone().add("d",1);return n<=t&&t<o}function m(e,t){return Math.floor(t.diff(e,"minutes",!0))}function s(e,t){var n=t.diff(e,"hours",!0);return Math.round(n)}function c(e,t){return Math.floor(t.diff(e,"days",!0))}function d(e,t){var n=a(t);return e.format(n)}function g(e,n,o){if(o=o||t(),e<=o){if(e>o.clone().subtract("m",1))return r("aMomentAgo",n);if(e>o.clone().subtract("m",2))return r("oneMinuteAgo",n);if(e>o.clone().subtract("m",50))return r("xMinutesAgo",n,m(e,o));if(e>o.clone().subtract("m",90))return r("oneHourAgo",n);if(u(o,e)&&e<o.clone().subtract("h",5))return r("oneDayAgo",n);if(e>o.clone().subtract("d",1))return r("xHoursAgo",n,s(e,o));if(e>o.clone().subtract("d",7))return r("xDaysAgo",n,Math.max(c(e,o),2));if(e>o.clone().subtract("d",8))return r("oneWeekAgo",n)}else{if(e<o.clone().add("m",1))return r("inAMoment",n);if(e<o.clone().add("m",2))return r("inOneMinute",n);if(e<o.clone().add("m",50))return r("inXMinutes",n,m(o,e));if(e<o.clone().add("m",90))return r("inOneHour",n);if(l(o,e)&&e>o.clone().add("h",5))return r("inOneDay",n);if(e<o.clone().add("d",1))return r("inXHours",n,s(o,e));if(e<o.clone().add("d",7))return r("inXDays",n,Math.max(c(o,e),2));if(e<o.clone().add("d",8))return r("inOneWeek",n)}return d(e,n)}var f={},v=n.getBoolean("date-relativize");o.types={};for(var x,A=["shortAge","longAge","fullAge","short","long","full","timestamp"],h=0,T=A.length;h<T;h++)x=A[h],o.types[x]=new o(x,x.toLowerCase().indexOf("age")!==-1);var y={};return f.FormatType=o,f.formatDate=function(e,t,n){return e&&t?(v||n)&&t.isAge?g(e,t):d(e,t):null},f.setRelativeTranslations=function(e){for(var t in e)y[t]=e[t]},f.restoreDefaultRelativeTranslations=function(){this.setRelativeTranslations({inAMoment:"Now",inOneMinute:"In 1 minute",inXMinutes:"In {0} minutes",inOneHour:"In 1 hour",inXHours:"In {0} hours",inOneDay:"Tomorrow",inXDays:"In {0} days",inOneWeek:"In 1 week",aMomentAgo:"Just now",oneMinuteAgo:"1 minute ago",xMinutesAgo:"{0} minutes ago",oneHourAgo:"1 hour ago",xHoursAgo:"{0} hours ago",oneDayAgo:"Yesterday",xDaysAgo:"{0} days ago",oneWeekAgo:"1 week ago"})},f.restoreDefaultRelativeTranslations(),f.formatDateWithRelativeAge=g,f.formatDateWithFormatString=d,f}),AJS.namespace("JIRA.Time",null,require("jira/jquery/plugins/livestamp/time"));;
;
/* module-key = 'jira.webresources:jquery-livestamp', location = '/includes/jquery/plugins/livestamp/livestamp.js' */
define("jira/jquery/plugins/livestamp/livestamp",["jquery","jira/skate","jira/moment","jira/util/data/meta","jira/jquery/plugins/livestamp/time"],function(t,e,i,a,r){"use strict";var n=6e3,u=a.getBoolean("date-relativize");e("livestamp",{type:e.type.CLASSNAME,prototype:{update:function(){var e=t(this),a=e.data("relativize"),n=e.attr("datetime");if(n&&(n=isNaN(n)?i(n).zone(n):i(parseInt(n,10)),i.isMoment(n)&&n.isValid())){var m=e.data("datetime-format");m=m?m:"fullAge",u||a||(m=m.replace("Age",""));var o=r.formatDate(n,r.FormatType.types[m],a);return e.text()!==o&&e.text(o),!0}return!1},onTimeout:function(){this.timerId&&(clearTimeout(this.timerId),this.timerId=!1);var t=this.update();t&&(this.timerId=setTimeout(this.onTimeout.bind(this),n))}},attributes:function(t){t.onTimeout()},attached:function(t){t.onTimeout()},detached:function(t){clearTimeout(t.timerId),t.timerId=!1}}),t.fn.livestamp=function(){return this}}),function(){require("jira/jquery/plugins/livestamp/livestamp")}();;
;
/* module-key = 'com.atlassian.plugin.jslibs:uri-1.14.1', location = 'libs/uri/1.14.1/uri-1.14.1.js' */
(function(n){define("atlassian/libs/uri-1.14.1",function(){var q={};n.call(q);return q.URI.noConflict()})})(function(){var n=this.punycode,q=this.IPv6,p=this.SecondLevelDomains,k=this,e=function(a,b){if(!(this instanceof e))return new e(a,b);void 0===a&&(a="undefined"!==typeof location?location.href+"":"");this.href(a);return void 0!==b?this.absoluteTo(b):this},o=function(a){return a.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},t=function(a){return void 0===a?"Undefined":String(Object.prototype.toString.call(a)).slice(8,
-1)},j=function(a){return"Array"===t(a)},s=function(a,b){var c,e;if(j(b)){c=0;for(e=b.length;c<e;c++)if(!s(a,b[c]))return!1;return!0}var h=t(b);c=0;for(e=a.length;c<e;c++)if("RegExp"===h){if("string"===typeof a[c]&&a[c].match(b))return!0}else if(a[c]===b)return!0;return!1},w=function(a,b){if(!j(a)||!j(b)||a.length!==b.length)return!1;a.sort();b.sort();for(var c=0,e=a.length;c<e;c++)if(a[c]!==b[c])return!1;return!0},A=function(a){return escape(a)},u=function(a){return encodeURIComponent(a).replace(/[!'()*]/g,
A).replace(/\*/g,"%2A")},r=function(a){return function(b,c){if(void 0===b)return this._parts[a]||"";this._parts[a]=b||null;this.build(!c);return this}},x=function(a,b){return function(c,e){if(void 0===c)return this._parts[a]||"";null!==c&&(c+="",c.charAt(0)===b&&(c=c.substring(1)));this._parts[a]=c;this.build(!e);return this}},B=k&&k.URI;e.version="1.14.1";var d=e.prototype,m=Object.prototype.hasOwnProperty;e._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,
port:null,path:null,query:null,fragment:null,duplicateQueryParameters:e.duplicateQueryParameters,escapeQuerySpace:e.escapeQuerySpace}};e.duplicateQueryParameters=!1;e.escapeQuerySpace=!0;e.protocol_expression=/^[a-z][a-z0-9.+-]*$/i;e.idn_expression=/[^a-z0-9\.-]/i;e.punycode_expression=/(xn--)/i;e.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/;e.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/;
e.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u2018\u2019]))/ig;e.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u201e\u2018\u2019]+$/};e.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"};e.invalid_hostname_characters=
/[^a-zA-Z0-9\.-]/;e.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"};e.getDomAttribute=function(a){if(a&&a.nodeName){var b=a.nodeName.toLowerCase();return"input"===b&&"image"!==a.type?void 0:e.domAttributes[b]}};e.encode=u;e.decode=decodeURIComponent;e.iso8859=function(){e.encode=escape;e.decode=unescape};e.unicode=function(){e.encode=u;e.decode=
decodeURIComponent};e.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/ig,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",",
"%3B":";","%3D":"="}}}};e.encodeQuery=function(a,b){var c=e.encode(a+"");void 0===b&&(b=e.escapeQuerySpace);return b?c.replace(/%20/g,"+"):c};e.decodeQuery=function(a,b){a+="";void 0===b&&(b=e.escapeQuerySpace);try{return e.decode(b?a.replace(/\+/g,"%20"):a)}catch(c){return a}};e.recodePath=function(a){for(var a=(a+"").split("/"),b=0,c=a.length;b<c;b++)a[b]=e.encodePathSegment(e.decode(a[b]));return a.join("/")};e.decodePath=function(a){for(var a=(a+"").split("/"),b=0,c=a.length;b<c;b++)a[b]=e.decodePathSegment(a[b]);
return a.join("/")};var y={encode:"encode",decode:"decode"},v,z=function(a,b){return function(c){try{return e[b](c+"").replace(e.characters[a][b].expression,function(c){return e.characters[a][b].map[c]})}catch(f){return c}}};for(v in y)e[v+"PathSegment"]=z("pathname",y[v]);e.encodeReserved=z("reserved","encode");e.parse=function(a,b){var c;b||(b={});c=a.indexOf("#");-1<c&&(b.fragment=a.substring(c+1)||null,a=a.substring(0,c));c=a.indexOf("?");-1<c&&(b.query=a.substring(c+1)||null,a=a.substring(0,
c));"//"===a.substring(0,2)?(b.protocol=null,a=a.substring(2),a=e.parseAuthority(a,b)):(c=a.indexOf(":"),-1<c&&(b.protocol=a.substring(0,c)||null,b.protocol&&!b.protocol.match(e.protocol_expression)?b.protocol=void 0:"//"===a.substring(c+1,c+3)?(a=a.substring(c+3),a=e.parseAuthority(a,b)):(a=a.substring(c+1),b.urn=!0)));b.path=a;return b};e.parseHost=function(a,b){var c=a.indexOf("/"),e;-1===c&&(c=a.length);"["===a.charAt(0)?(e=a.indexOf("]"),b.hostname=a.substring(1,e)||null,b.port=a.substring(e+
2,c)||null,"/"===b.port&&(b.port=null)):a.indexOf(":")!==a.lastIndexOf(":")?(b.hostname=a.substring(0,c)||null,b.port=null):(e=a.substring(0,c).split(":"),b.hostname=e[0]||null,b.port=e[1]||null);b.hostname&&"/"!==a.substring(c).charAt(0)&&(c++,a="/"+a);return a.substring(c)||"/"};e.parseAuthority=function(a,b){a=e.parseUserinfo(a,b);return e.parseHost(a,b)};e.parseUserinfo=function(a,b){var c=a.indexOf("/"),f=a.lastIndexOf("@",-1<c?c:a.length-1);-1<f&&(-1===c||f<c)?(c=a.substring(0,f).split(":"),
b.username=c[0]?e.decode(c[0]):null,c.shift(),b.password=c[0]?e.decode(c.join(":")):null,a=a.substring(f+1)):(b.username=null,b.password=null);return a};e.parseQuery=function(a,b){if(!a)return{};a=a.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"");if(!a)return{};for(var c={},f=a.split("&"),h=f.length,d,i,l=0;l<h;l++)d=f[l].split("="),i=e.decodeQuery(d.shift(),b),d=d.length?e.decodeQuery(d.join("="),b):null,m.call(c,i)?("string"===typeof c[i]&&(c[i]=[c[i]]),c[i].push(d)):c[i]=d;return c};e.build=function(a){var b=
"";a.protocol&&(b+=a.protocol+":");if(!a.urn&&(b||a.hostname))b+="//";b+=e.buildAuthority(a)||"";"string"===typeof a.path&&("/"!==a.path.charAt(0)&&"string"===typeof a.hostname&&(b+="/"),b+=a.path);"string"===typeof a.query&&a.query&&(b+="?"+a.query);"string"===typeof a.fragment&&a.fragment&&(b+="#"+a.fragment);return b};e.buildHost=function(a){var b="";if(a.hostname)b=e.ip6_expression.test(a.hostname)?b+("["+a.hostname+"]"):b+a.hostname;else return"";a.port&&(b+=":"+a.port);return b};e.buildAuthority=
function(a){return e.buildUserinfo(a)+e.buildHost(a)};e.buildUserinfo=function(a){var b="";a.username&&(b+=e.encode(a.username),a.password&&(b+=":"+e.encode(a.password)),b+="@");return b};e.buildQuery=function(a,b,c){var f="",h,d,i,l;for(d in a)if(m.call(a,d)&&d)if(j(a[d])){h={};i=0;for(l=a[d].length;i<l;i++)void 0!==a[d][i]&&void 0===h[a[d][i]+""]&&(f+="&"+e.buildQueryParameter(d,a[d][i],c),!0!==b&&(h[a[d][i]+""]=!0))}else void 0!==a[d]&&(f+="&"+e.buildQueryParameter(d,a[d],c));return f.substring(1)};
e.buildQueryParameter=function(a,b,c){return e.encodeQuery(a,c)+(null!==b?"="+e.encodeQuery(b,c):"")};e.addQuery=function(a,b,c){if("object"===typeof b)for(var f in b)m.call(b,f)&&e.addQuery(a,f,b[f]);else if("string"===typeof b)void 0===a[b]?a[b]=c:("string"===typeof a[b]&&(a[b]=[a[b]]),j(c)||(c=[c]),a[b]=(a[b]||[]).concat(c));else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");};e.removeQuery=function(a,b,c){var f;if(j(b)){c=0;for(f=b.length;c<f;c++)a[b[c]]=
void 0}else if("object"===typeof b)for(f in b)m.call(b,f)&&e.removeQuery(a,f,b[f]);else if("string"===typeof b)if(void 0!==c)if(a[b]===c)a[b]=void 0;else{if(j(a[b])){f=a[b];var d={},g,i;if(j(c)){g=0;for(i=c.length;g<i;g++)d[c[g]]=!0}else d[c]=!0;g=0;for(i=f.length;g<i;g++)void 0!==d[f[g]]&&(f.splice(g,1),i--,g--);a[b]=f}}else a[b]=void 0;else throw new TypeError("URI.addQuery() accepts an object, string as the first parameter");};e.hasQuery=function(a,b,c,f){if("object"===typeof b){for(var d in b)if(m.call(b,
d)&&!e.hasQuery(a,d,b[d]))return!1;return!0}if("string"!==typeof b)throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter");switch(t(c)){case "Undefined":return b in a;case "Boolean":return a=Boolean(j(a[b])?a[b].length:a[b]),c===a;case "Function":return!!c(a[b],b,a);case "Array":return!j(a[b])?!1:(f?s:w)(a[b],c);case "RegExp":return!j(a[b])?Boolean(a[b]&&a[b].match(c)):!f?!1:s(a[b],c);case "Number":c=String(c);case "String":return!j(a[b])?a[b]===c:!f?!1:s(a[b],c);default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter");
}};e.commonPath=function(a,b){var c=Math.min(a.length,b.length),e;for(e=0;e<c;e++)if(a.charAt(e)!==b.charAt(e)){e--;break}if(1>e)return a.charAt(0)===b.charAt(0)&&"/"===a.charAt(0)?"/":"";if("/"!==a.charAt(e)||"/"!==b.charAt(e))e=a.substring(0,e).lastIndexOf("/");return a.substring(0,e+1)};e.withinString=function(a,b,c){c||(c={});var f=c.start||e.findUri.start,d=c.end||e.findUri.end,g=c.trim||e.findUri.trim,i=/[a-z0-9-]=["']?$/i;for(f.lastIndex=0;;){var l=f.exec(a);if(!l)break;l=l.index;if(c.ignoreHtml){var j=
a.slice(Math.max(l-3,0),l);if(j&&i.test(j))continue}var j=l+a.slice(l).search(d),k=a.slice(l,j).replace(g,"");if(!c.ignore||!c.ignore.test(k))j=l+k.length,k=b(k,l,j,a),a=a.slice(0,l)+k+a.slice(j),f.lastIndex=l+k.length}f.lastIndex=0;return a};e.ensureValidHostname=function(a){if(a.match(e.invalid_hostname_characters)){if(!n)throw new TypeError('Hostname "'+a+'" contains characters other than [A-Z0-9.-] and Punycode.js is not available');if(n.toASCII(a).match(e.invalid_hostname_characters))throw new TypeError('Hostname "'+
a+'" contains characters other than [A-Z0-9.-]');}};e.noConflict=function(a){if(a)return a={URI:this.noConflict()},k.URITemplate&&"function"===typeof k.URITemplate.noConflict&&(a.URITemplate=k.URITemplate.noConflict()),k.IPv6&&"function"===typeof k.IPv6.noConflict&&(a.IPv6=k.IPv6.noConflict()),k.SecondLevelDomains&&"function"===typeof k.SecondLevelDomains.noConflict&&(a.SecondLevelDomains=k.SecondLevelDomains.noConflict()),a;k.URI===this&&(k.URI=B);return this};d.build=function(a){if(!0===a)this._deferred_build=
!0;else if(void 0===a||this._deferred_build)this._string=e.build(this._parts),this._deferred_build=!1;return this};d.clone=function(){return new e(this)};d.valueOf=d.toString=function(){return this.build(!1)._string};d.protocol=r("protocol");d.username=r("username");d.password=r("password");d.hostname=r("hostname");d.port=r("port");d.query=x("query","?");d.fragment=x("fragment","#");d.search=function(a,b){var c=this.query(a,b);return"string"===typeof c&&c.length?"?"+c:c};d.hash=function(a,b){var c=
this.fragment(a,b);return"string"===typeof c&&c.length?"#"+c:c};d.pathname=function(a,b){if(void 0===a||!0===a){var c=this._parts.path||(this._parts.hostname?"/":"");return a?e.decodePath(c):c}this._parts.path=a?e.recodePath(a):"/";this.build(!b);return this};d.path=d.pathname;d.href=function(a,b){var c;if(void 0===a)return this.toString();this._string="";this._parts=e._parts();var f=a instanceof e,d="object"===typeof a&&(a.hostname||a.path||a.pathname);a.nodeName&&(d=e.getDomAttribute(a),a=a[d]||
"",d=!1);!f&&(d&&void 0!==a.pathname)&&(a=a.toString());if("string"===typeof a||a instanceof String)this._parts=e.parse(String(a),this._parts);else if(f||d)for(c in f=f?a._parts:a,f)m.call(this._parts,c)&&(this._parts[c]=f[c]);else throw new TypeError("invalid input");this.build(!b);return this};d.is=function(a){var b=!1,c=!1,f=!1,d=!1,g=!1,i=!1,j=!1,k=!this._parts.urn;this._parts.hostname&&(k=!1,c=e.ip4_expression.test(this._parts.hostname),f=e.ip6_expression.test(this._parts.hostname),b=c||f,g=
(d=!b)&&p&&p.has(this._parts.hostname),i=d&&e.idn_expression.test(this._parts.hostname),j=d&&e.punycode_expression.test(this._parts.hostname));switch(a.toLowerCase()){case "relative":return k;case "absolute":return!k;case "domain":case "name":return d;case "sld":return g;case "ip":return b;case "ip4":case "ipv4":case "inet4":return c;case "ip6":case "ipv6":case "inet6":return f;case "idn":return i;case "url":return!this._parts.urn;case "urn":return!!this._parts.urn;case "punycode":return j}return null};
var C=d.protocol,D=d.port,E=d.hostname;d.protocol=function(a,b){if(void 0!==a&&a&&(a=a.replace(/:(\/\/)?$/,""),!a.match(e.protocol_expression)))throw new TypeError('Protocol "'+a+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return C.call(this,a,b)};d.scheme=d.protocol;d.port=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0!==a&&(0===a&&(a=null),a&&(a+="",":"===a.charAt(0)&&(a=a.substring(1)),a.match(/[^0-9]/))))throw new TypeError('Port "'+a+'" contains characters other than [0-9]');
return D.call(this,a,b)};d.hostname=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0!==a){var c={};e.parseHost(a,c);a=c.hostname}return E.call(this,a,b)};d.host=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a)return this._parts.hostname?e.buildHost(this._parts):"";e.parseHost(a,this._parts);this.build(!b);return this};d.authority=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a)return this._parts.hostname?e.buildAuthority(this._parts):
"";e.parseAuthority(a,this._parts);this.build(!b);return this};d.userinfo=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a){if(!this._parts.username)return"";var c=e.buildUserinfo(this._parts);return c.substring(0,c.length-1)}"@"!==a[a.length-1]&&(a+="@");e.parseUserinfo(a,this._parts);this.build(!b);return this};d.resource=function(a,b){var c;if(void 0===a)return this.path()+this.search()+this.hash();c=e.parse(a);this._parts.path=c.path;this._parts.query=c.query;this._parts.fragment=
c.fragment;this.build(!b);return this};d.subdomain=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var c=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,c)||""}c=this._parts.hostname.length-this.domain().length;c=this._parts.hostname.substring(0,c);c=RegExp("^"+o(c));a&&"."!==a.charAt(a.length-1)&&(a+=".");a&&e.ensureValidHostname(a);this._parts.hostname=this._parts.hostname.replace(c,
a);this.build(!b);return this};d.domain=function(a,b){if(this._parts.urn)return void 0===a?"":this;"boolean"===typeof a&&(b=a,a=void 0);if(void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var c=this._parts.hostname.match(/\./g);if(c&&2>c.length)return this._parts.hostname;c=this._parts.hostname.length-this.tld(b).length-1;c=this._parts.hostname.lastIndexOf(".",c-1)+1;return this._parts.hostname.substring(c)||""}if(!a)throw new TypeError("cannot set domain empty");e.ensureValidHostname(a);
!this._parts.hostname||this.is("IP")?this._parts.hostname=a:(c=RegExp(o(this.domain())+"$"),this._parts.hostname=this._parts.hostname.replace(c,a));this.build(!b);return this};d.tld=function(a,b){if(this._parts.urn)return void 0===a?"":this;"boolean"===typeof a&&(b=a,a=void 0);if(void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var c=this._parts.hostname.lastIndexOf("."),c=this._parts.hostname.substring(c+1);return!0!==b&&p&&p.list[c.toLowerCase()]?p.get(this._parts.hostname)||c:c}if(a)if(a.match(/[^a-zA-Z0-9-]/))if(p&&
p.is(a))c=RegExp(o(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(c,a);else throw new TypeError('TLD "'+a+'" contains characters other than [A-Z0-9]');else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");c=RegExp(o(this.tld())+"$");this._parts.hostname=this._parts.hostname.replace(c,a)}else throw new TypeError("cannot set TLD empty");this.build(!b);return this};d.directory=function(a,b){if(this._parts.urn)return void 0===a?
"":this;if(void 0===a||!0===a){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var c=this._parts.path.length-this.filename().length-1,c=this._parts.path.substring(0,c)||(this._parts.hostname?"/":"");return a?e.decodePath(c):c}c=this._parts.path.length-this.filename().length;c=this._parts.path.substring(0,c);c=RegExp("^"+o(c));this.is("relative")||(a||(a="/"),"/"!==a.charAt(0)&&(a="/"+a));a&&"/"!==a.charAt(a.length-1)&&(a+="/");a=e.recodePath(a);this._parts.path=
this._parts.path.replace(c,a);this.build(!b);return this};d.filename=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a||!0===a){if(!this._parts.path||"/"===this._parts.path)return"";var c=this._parts.path.lastIndexOf("/"),c=this._parts.path.substring(c+1);return a?e.decodePathSegment(c):c}c=!1;"/"===a.charAt(0)&&(a=a.substring(1));a.match(/\.?\//)&&(c=!0);var f=RegExp(o(this.filename())+"$"),a=e.recodePath(a);this._parts.path=this._parts.path.replace(f,a);c?this.normalizePath(b):
this.build(!b);return this};d.suffix=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a||!0===a){if(!this._parts.path||"/"===this._parts.path)return"";var c=this.filename(),f=c.lastIndexOf(".");if(-1===f)return"";c=c.substring(f+1);c=/^[a-z0-9%]+$/i.test(c)?c:"";return a?e.decodePathSegment(c):c}"."===a.charAt(0)&&(a=a.substring(1));if(c=this.suffix())f=a?RegExp(o(c)+"$"):RegExp(o("."+c)+"$");else{if(!a)return this;this._parts.path+="."+e.recodePath(a)}f&&(a=e.recodePath(a),
this._parts.path=this._parts.path.replace(f,a));this.build(!b);return this};d.segment=function(a,b,c){var e=this._parts.urn?":":"/",d=this.path(),g="/"===d.substring(0,1),d=d.split(e);void 0!==a&&"number"!==typeof a&&(c=b,b=a,a=void 0);if(void 0!==a&&"number"!==typeof a)throw Error('Bad segment "'+a+'", must be 0-based integer');g&&d.shift();0>a&&(a=Math.max(d.length+a,0));if(void 0===b)return void 0===a?d:d[a];if(null===a||void 0===d[a])if(j(b))for(var d=[],a=0,i=b.length;a<i;a++){if(b[a].length||
d.length&&d[d.length-1].length)d.length&&!d[d.length-1].length&&d.pop(),d.push(b[a])}else{if(b||"string"===typeof b)""===d[d.length-1]?d[d.length-1]=b:d.push(b)}else b?d[a]=b:d.splice(a,1);g&&d.unshift("");return this.path(d.join(e),c)};d.segmentCoded=function(a,b,c){var d,h;"number"!==typeof a&&(c=b,b=a,a=void 0);if(void 0===b){a=this.segment(a,b,c);if(j(a)){d=0;for(h=a.length;d<h;d++)a[d]=e.decode(a[d])}else a=void 0!==a?e.decode(a):void 0;return a}if(j(b)){d=0;for(h=b.length;d<h;d++)b[d]=e.decode(b[d])}else b=
"string"===typeof b||b instanceof String?e.encode(b):b;return this.segment(a,b,c)};var F=d.query;d.query=function(a,b){if(!0===a)return e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"===typeof a){var c=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace),d=a.call(this,c);this._parts.query=e.buildQuery(d||c,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);this.build(!b);return this}return void 0!==a&&"string"!==typeof a?(this._parts.query=e.buildQuery(a,
this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!b),this):F.call(this,a,b)};d.setQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("string"===typeof a||a instanceof String)d[a]=void 0!==b?b:null;else if("object"===typeof a)for(var h in a)m.call(a,h)&&(d[h]=a[h]);else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");this._parts.query=e.buildQuery(d,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);
"string"!==typeof a&&(c=b);this.build(!c);return this};d.addQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);e.addQuery(d,a,void 0===b?null:b);this._parts.query=e.buildQuery(d,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);"string"!==typeof a&&(c=b);this.build(!c);return this};d.removeQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);e.removeQuery(d,a,b);this._parts.query=e.buildQuery(d,this._parts.duplicateQueryParameters,
this._parts.escapeQuerySpace);"string"!==typeof a&&(c=b);this.build(!c);return this};d.hasQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return e.hasQuery(d,a,b,c)};d.setSearch=d.setQuery;d.addSearch=d.addQuery;d.removeSearch=d.removeQuery;d.hasSearch=d.hasQuery;d.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()};
d.normalizeProtocol=function(a){"string"===typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!a));return this};d.normalizeHostname=function(a){this._parts.hostname&&(this.is("IDN")&&n?this._parts.hostname=n.toASCII(this._parts.hostname):this.is("IPv6")&&q&&(this._parts.hostname=q.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!a));return this};d.normalizePort=function(a){"string"===typeof this._parts.protocol&&
this._parts.port===e.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!a));return this};d.normalizePath=function(a){if(this._parts.urn||!this._parts.path||"/"===this._parts.path)return this;var b,c=this._parts.path,d="",h,g;"/"!==c.charAt(0)&&(b=!0,c="/"+c);c=c.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/");b&&(d=c.substring(1).match(/^(\.\.\/)+/)||"")&&(d=d[0]);for(;;){h=c.indexOf("/..");if(-1===h)break;else if(0===h){c=c.substring(3);continue}g=c.substring(0,h).lastIndexOf("/");
-1===g&&(g=h);c=c.substring(0,g)+c.substring(h+3)}b&&this.is("relative")&&(c=d+c.substring(1));c=e.recodePath(c);this._parts.path=c;this.build(!a);return this};d.normalizePathname=d.normalizePath;d.normalizeQuery=function(a){"string"===typeof this._parts.query&&(this._parts.query.length?this.query(e.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!a));return this};d.normalizeFragment=function(a){this._parts.fragment||(this._parts.fragment=null,this.build(!a));
return this};d.normalizeSearch=d.normalizeQuery;d.normalizeHash=d.normalizeFragment;d.iso8859=function(){var a=e.encode,b=e.decode;e.encode=escape;e.decode=decodeURIComponent;this.normalize();e.encode=a;e.decode=b;return this};d.unicode=function(){var a=e.encode,b=e.decode;e.encode=u;e.decode=unescape;this.normalize();e.encode=a;e.decode=b;return this};d.readable=function(){var a=this.clone();a.username("").password("").normalize();var b="";a._parts.protocol&&(b+=a._parts.protocol+"://");a._parts.hostname&&
(a.is("punycode")&&n?(b+=n.toUnicode(a._parts.hostname),a._parts.port&&(b+=":"+a._parts.port)):b+=a.host());a._parts.hostname&&(a._parts.path&&"/"!==a._parts.path.charAt(0))&&(b+="/");b+=a.path(!0);if(a._parts.query){for(var c="",d=0,h=a._parts.query.split("&"),g=h.length;d<g;d++){var i=(h[d]||"").split("="),c=c+("&"+e.decodeQuery(i[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"));void 0!==i[1]&&(c+="="+e.decodeQuery(i[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}b+="?"+c.substring(1)}return b+=
e.decodeQuery(a.hash(),!0)};d.absoluteTo=function(a){var b=this.clone(),c=["protocol","username","password","hostname","port"],d,h;if(this._parts.urn)throw Error("URNs do not have any generally defined hierarchical components");a instanceof e||(a=new e(a));b._parts.protocol||(b._parts.protocol=a._parts.protocol);if(this._parts.hostname)return b;for(d=0;h=c[d];d++)b._parts[h]=a._parts[h];b._parts.path?".."===b._parts.path.substring(-2)&&(b._parts.path+="/"):(b._parts.path=a._parts.path,b._parts.query||
(b._parts.query=a._parts.query));"/"!==b.path().charAt(0)&&(a=a.directory(),b._parts.path=(a?a+"/":"")+b._parts.path,b.normalizePath());b.build();return b};d.relativeTo=function(a){var b=this.clone().normalize(),c,d,h,g;if(b._parts.urn)throw Error("URNs do not have any generally defined hierarchical components");a=(new e(a)).normalize();c=b._parts;d=a._parts;h=b.path();g=a.path();if("/"!==h.charAt(0))throw Error("URI is already relative");if("/"!==g.charAt(0))throw Error("Cannot calculate a URI relative to another relative URI");
c.protocol===d.protocol&&(c.protocol=null);if(!(c.username!==d.username||c.password!==d.password)&&!(null!==c.protocol||null!==c.username||null!==c.password)&&c.hostname===d.hostname&&c.port===d.port)c.hostname=null,c.port=null;else return b.build();if(h===g)return c.path="",b.build();a=e.commonPath(b.path(),a.path());if(!a)return b.build();d=d.path.substring(a.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");c.path=d+c.path.substring(a.length);return b.build()};d.equals=function(a){var b=this.clone(),
a=new e(a),c={},d={},h={},g;b.normalize();a.normalize();if(b.toString()===a.toString())return!0;c=b.query();d=a.query();b.query("");a.query("");if(b.toString()!==a.toString()||c.length!==d.length)return!1;c=e.parseQuery(c,this._parts.escapeQuerySpace);d=e.parseQuery(d,this._parts.escapeQuerySpace);for(g in c)if(m.call(c,g)){if(j(c[g])){if(!w(c[g],d[g]))return!1}else if(c[g]!==d[g])return!1;h[g]=!0}for(g in d)if(m.call(d,g)&&!h[g])return!1;return!0};d.duplicateQueryParameters=function(a){this._parts.duplicateQueryParameters=
!!a;return this};d.escapeQuerySpace=function(a){this._parts.escapeQuerySpace=!!a;return this};this.URI=e});;
;
/* module-key = 'com.atlassian.jira.jira-fileviewer-plugin:fileviewer', location = '/file-service.js' */
define("jira/fileviewer/file-service",["jira/featureflags/feature-manager","jquery"],function(e,n){"use strict";function i(){return Object.keys(r).map(function(e){return r[e].join(", ")}).join(", ")}function t(e,n){Array.isArray(n)?e.push.apply(e,n):e.push(n)}var r={image:["a[file-preview-type=image]"],video:["a[file-preview-type=video]"],document:["a[file-preview-type=document]"]};return{findFiles:function(e){return n(e||document.body).find(i())},getFileSelector:i,getImageSelector:function(){return r.image.join(", ")},addImageSelector:function(e){t(r.image,e)},getVideoSelector:function(){return r.video.join(", ")},getDocumentSelector:function(){return r.document.join(", ")},addDocumentSelector:function(e){t(r.document,e)}}});;
;
/* module-key = 'com.atlassian.jira.jira-fileviewer-plugin:fileviewer', location = '/fileviewer.js' */
define("jira/fileviewer",["wrm/require","jira/fileviewer/file-service","jira/loading/loading","jira/ajs/keyboardshortcut/keyboard-shortcut-toggle","jira/components/analytics-tracker/tracker","jira/util/navigator","atlassian/libs/uri-1.14.1","jquery","underscore"],function(e,i,t,r,n,a,o,l,c){"use strict";function d(){var e=l.Deferred();return s().done(function(){e.resolve(FileViewer)}),e.promise()}function u(e){var i=o(e.data("download-url")||e.attr("href"));return a.isIE()&&a.majorVersion()<12&&i.addSearch("stream","true"),i.toString()}function f(e){return e.data("download-url")||e.attr("href")}function s(){return m||(m=e(["wr!com.atlassian.jira.jira-fileviewer-plugin:atlassian-fileviewer"]),m.done(function(){g=new FileViewer({enableMiniMode:!0,viewers:["image","document","video"],moduleBackend:require("jira/fileviewer/module-backend/asynchronous"),analyticsBackend:require("jira/fileviewer/module-backend/analytics")}),g.on("fv.open",function(){r.disable,n.trackEvent("viewissue.attachment.view","click")}),g.on("fv.close",r.enable)})),m}function v(){g&&g.close()}function p(){var e=[],t=i.getImageSelector(),r=i.getDocumentSelector(),n=i.getVideoSelector(),a=l(t+", "+r+", "+n);a.each(function(){var i=l(this).closest("a");i.is(t)&&e.push({type:"image/png",id:i.attr("file-preview-id"),src:f(i),title:i.attr("file-preview-title"),thumbnail:i.attr("file-preview-url")||i.attr("data-download-url")||i.find("img").attr("src")}),i.is(r)&&e.push({type:"application/pdf",id:i.attr("file-preview-id"),src:u(i),title:i.attr("file-preview-title")}),i.is(n)&&e.push({type:i.attr("file-preview-mime-type"),id:i.attr("file-preview-id"),src:f(i),title:i.attr("file-preview-title"),thumbnail:i.attr("file-preview-url")||i.attr("data-download-url")||i.find("img").attr("src")})});var o=c.uniq(e,!1,function(e){return e.id});g.setFiles(o),a.off("simpleClick.fvOpen").on("simpleClick.fvOpen",function(e){e.preventDefault(),g.open({id:l(this).attr("file-preview-id")})})}function w(e){if(g)p();else{var r=i.findFiles(e);r.off("simpleClick.fvInit").on("simpleClick.fvInit",function(e){e.preventDefault();var i=l(this);t.showLoadingIndicator(),AJS.dim(),s().done(function(){p(),g.open({id:i.attr("file-preview-id")})}).fail(function(){window.location=f(i)}).always(function(){r.off("simpleClick.fvInit"),AJS.undim(),l(".aui-blanket").remove(),t.hideLoadingIndicator()})})}}var m,g;return{attachToElements:w,closeViewer:v,addImageSelector:function(e){i.addImageSelector(e)},addDocumentSelector:function(e){i.addDocumentSelector(e)},getFileViewerConstructor:d}});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = 'includes/jira/viewissue/issuecomponents.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.Issue&&(JIRA.Templates.Issue={}),JIRA.Templates.Issue.watchersWithBrowse=function(e,s){for(var a='<form action="#" method="post" class="aui recipients-form"><a href="#" class="cancel" role="button"><span class="icon-default aui-icon aui-icon-small aui-iconfont-close-dialog">'+soy.$$escapeHtml("Close")+'</span></a><fieldset><label class="js-add-watchers-label">'+soy.$$escapeHtml("Add Watchers")+'</label><div class="autocomplete-user-target"><select id="watchers" name="watchers" data-description="'+soy.$$escapeHtml("Start Typing for Users")+'" class="watchers-user-picker hidden" multiple="multiple">',t=e.watchers,l=t.length,c=0;c<l;c++){var o=t[c];a+="<option style=\"background-image:url('"+soy.$$escapeHtml(o.avatarUrls["16x16"])+'\')" selected="selected" value="'+soy.$$escapeHtml(o.name)+'">'+soy.$$escapeHtml(o.displayName)+"</option>"}return a+="</select></div></fieldset></form>"},JIRA.Templates.Issue.watchersNoBrowse=function(e,s){for(var a='<form action="#" method="post" class="aui recipients-form"><a href="#" class="cancel" role="button"><span class="icon-default aui-icon aui-icon-small aui-iconfont-close-dialog">'+soy.$$escapeHtml("Close")+'</span></a><fieldset><label for="watchers-multi-select">'+soy.$$escapeHtml("Add Watchers")+'</label><div><input type="text" class="text" id="watchers-nosearch" /><div class="description">'+soy.$$escapeHtml("Type username and press enter.")+'</div></div><div class="recipients"><ol class="watchers">',t=e.watchers,l=t.length,c=0;c<l;c++){var o=t[c];a+=JIRA.Templates.Fields.recipientUsername({username:o.name,icon:o.avatarUrls["16x16"],displayName:o.displayName,escape:!0})}return a+="</ol></div></fieldset></form>"},JIRA.Templates.Issue.error=function(e,s){for(var a="<p>"+soy.$$escapeHtml(e.msg)+"</p><ul>",t=e.errors,l=t.length,c=0;c<l;c++){var o=t[c];a+="<li>"+soy.$$escapeHtml(o)+"</li>"}return a+="</ul>"},JIRA.Templates.Issue.usersListReadOnly=function(e,s){for(var a='<form class="aui recipients-form"><a href="#" class="cancel" role="button"><span class="icon-default aui-icon aui-icon-small aui-iconfont-close-dialog">'+soy.$$escapeHtml("Close")+'</span></a><fieldset><div class="recipients"><ol class="voters">',t=e.users,l=t.length,c=0;c<l;c++){var o=t[c];a+=JIRA.Templates.Fields.recipientUsername({username:o.name,icon:o.avatarUrls["16x16"],displayName:o.displayName,readOnly:!0,escape:!0})}return a+="</ol></div></fieldset></form>"};;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/entities/user-collection.js' */
define("jira/viewissue/watchers-voters/entities/user-collection",["require"],function(e){var r=e("jira/message"),s=e("backbone"),t=e("underscore"),o=e("jquery"),n=e("wrm/context-path"),i=e("jira/util/formatter"),a=JIRA.Templates.Issue,u=s.Model.extend({idAttribute:"key"});return s.Collection.extend({model:u,initialize:function(e){if(void 0===e)throw new Error("Must supply options");if(!e.issueKey)throw new Error("Must supply issue key");if(this.issueKey=e.issueKey,!e.endpoint)throw new Error("Must supply an endpoint");if(this.endpoint=e.endpoint,!e.modelKey)throw new Error("Must supply an model key");this.modelKey=e.modelKey},url:function(){return[n(),"rest/api/2/issue",this.issueKey,this.endpoint].join("/")},parse:function(e){return e&&e[this.modelKey]?e[this.modelKey]:[]},ajax:function(e){return e=t.extend({url:this.url(),headers:{"Content-Type":"application/json"},success:t.bind(function(){this.fetch()},this),error:t.bind(function(e){404!==e.status&&this.handleErrorResponse(e,"There was an error adding watcher")},this)},e),o.ajax(e)},getUser:function(e){return o.ajax({url:n()+"/rest/api/2/user?username="+encodeURIComponent(e),error:t.bind(function(e){404!==e.status&&this.handleErrorResponse(e,"There was an error adding watcher")},this)})},handleErrorResponse:function(e,s){var t=this._parseResponse(e.responseText);if(t.errorMessages){var o=a.error({msg:s,errors:t.errorMessages});r.showErrorMsg(o,{closeable:!0})}this.trigger("errorOccurred")},_parseResponse:function(e){try{return JSON.parse(e)}catch(e){return this._showFatalErrorMessage(),null}},_showFatalErrorMessage:function(){var e="<p>"+"Communications Breakdown"+"</p><p>"+"Close this dialog and press refresh in your browser"+"</p>";r.showErrorMsg(e,{closeable:!0})}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/entities/voters-user-collection.js' */
define("jira/viewissue/watchers-voters/entities/voters-user-collection",["jira/viewissue/watchers-voters/entities/user-collection"],function(e){return e.extend({initialize:function(t){var i={issueKey:t,endpoint:"votes",modelKey:"voters"};e.prototype.initialize.apply(this,[i])},vote:function(){return this.ajax({type:"POST"})},unvote:function(){return this.ajax({type:"DELETE"})}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/entities/watchers-user-collection.js' */
define("jira/viewissue/watchers-voters/entities/watchers-user-collection",["jira/viewissue/watchers-voters/entities/user-collection","jira/util/data/meta"],function(e,t){return e.extend({initialize:function(i){this.canBrowseUsers=t.get("can-search-users"),this.isReadOnly=!t.get("can-edit-watchers");var s={issueKey:i,endpoint:"watchers",modelKey:"watchers"};e.prototype.initialize.apply(this,[s])},addWatcher:function(e){return this.ajax({type:"POST",data:'"'+e+'"'})},removeWatcher:function(e){return this.ajax({type:"DELETE",url:this.url()+"?username="+e})}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/views/voters-view.js' */
define("jira/viewissue/watchers-voters/views/voters-view",["require"],function(e){var t=e("aui/message"),i=e("backbone"),r=e("underscore"),s=(e("jquery"),e("jira/jquery/deferred")),n=e("jira/util/formatter"),o=JIRA.Templates.Issue;return i.View.extend({$empty:void 0,initialize:function(e){this.collection=e.collection,this.collection.bind("replace reset add remove",this.render,this)},renderNoWatchers:function(){0===this.$(".recipients li").length?(this.$empty=t.info({closeable:!1,body:"There are no voters for this issue"}),this.$("fieldset").append(this.$empty)):this.$empty&&this.$empty.remove()},render:function(){var e=s();return this.collection.fetch().done(r.bind(function(){this.$el.html(o.usersListReadOnly({users:this.collection.toJSON()})),this.renderNoWatchers(),e.resolve(this.$el)},this)),e.promise()}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/views/abstract-watchers-view.js' */
define("jira/viewissue/watchers-voters/views/abstract-watchers-view",["require"],function(e){var t=e("aui/message"),i=e("backbone"),n=e("underscore"),r=e("jquery"),s=e("jira/jquery/deferred"),a=e("jira/util/formatter");return i.View.extend({$empty:void 0,renderNoWatchers:function(){0===this.$(".recipients li").length?(this.$empty=t.info({closeable:!1,body:"There are no watchers."}),this.$("fieldset").append(this.$empty)):this.$empty&&this.$empty.remove()},render:function(){var e=s();return this.collection.fetch().done(n.bind(function(){this._render(),this.renderNoWatchers(),e.resolve(this.$el),setTimeout(n.bind(function(){this.focus()},this),0)},this)),e.promise()},watch:function(){r("#watching-toggle").text("Stop watching this issue")},unwatch:function(){r("#watching-toggle").text("Start watching this issue")},focus:r.noop,_incrementWatcherCount:function(){var e=r("#watcher-data"),t=parseInt(e.text(),10);e.text(t+1),this.renderNoWatchers()},_decrementWatcherCount:function(){var e=r("#watcher-data"),t=parseInt(e.text(),10);e.text(t-1),this.renderNoWatchers()}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/views/watchers-view.js' */
define("jira/viewissue/watchers-voters/views/watchers-view",["require"],function(e){var t=e("jira/viewissue/watchers-voters/views/abstract-watchers-view"),r=r,i=e("jira/util/data/meta"),a=e("underscore"),s=e("jira/util/logger"),r=e("jira/field/multi-user-list-picker"),c=JIRA.Templates.Issue;return t.extend({events:{selected:"addWatcherToModel",unselect:"removeWatcherFromModel"},_render:function(){this.$el.html(c.watchersWithBrowse({watchers:this.collection.toJSON()}));var e=new r({element:this.$el.find(".watchers-user-picker"),width:220});this.$el.find(".js-add-watchers-label").attr("for",e.$field.attr("id"))},focus:function(){this.$el.find("#watchers-textarea").focus()},addWatcherToModel:function(e,t){e.preventDefault(),this.collection.addWatcher(t.value()).done(a.bind(function(){this._incrementWatcherCount(),t.value()===i.get("remote-user")&&this.watch()},this))},removeWatcherFromModel:function(e,t){this.collection.removeWatcher(t.value()).done(a.bind(function(){this._decrementWatcherCount(),t.value()===i.get("remote-user")&&(this.unwatch(),s.trace("jira.issue.watcher.deleted"))},this))}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/views/watchers-no-browse-view.js' */
define("jira/viewissue/watchers-voters/views/watchers-no-browse-view",["require"],function(e){var t=e("jira/viewissue/watchers-voters/views/abstract-watchers-view"),r=e("jira/util/data/meta"),a=e("underscore"),i=e("jquery"),s=e("jira/util/logger"),n=e("jira/util/formatter"),o=JIRA.Templates.Issue;return t.extend({events:{"click .remove-recipient":"removeWatcher",submit:"addWatcher"},addWatcher:function(e){e.preventDefault(),this.removeInlineError();var t=i("#watchers-nosearch"),s=i.trim(t.val());t.attr("disabled","disabled"),this.hasUsername(s)?(t.removeAttr("disabled"),this.showInlineError(n.format("User {0} is already watching this issue",s)),t.val("")):this.collection.getUser(s).done(a.bind(function(e){var a=JIRA.Templates.Fields.recipientUsername({icon:e.avatarUrls["16x16"],username:e.name,displayName:e.displayName});s===r.get("remote-user")&&this.watch(),t.val(""),this.$(".watchers").append(a),this.collection.addWatcher(e.name),this._incrementWatcherCount()},this)).fail(a.bind(function(e){404===e.status&&this.showInlineError("User does not exist")},this)).always(function(){t.removeAttr("disabled").focus()})},hasUsername:function(e){var t=!1;return this.$(".watchers li").each(function(){if(i(this).attr("data-username")===e)return t=!0,!1}),t},removeInlineError:function(){this.$(".error").remove()},showInlineError:function(e){i("<div />").addClass("error").text(e).insertAfter(this.$(".description"))},focus:function(){i("#watchers-nosearch").focus()},removeWatcher:function(e){e.preventDefault();var t=i(e.target).closest("li"),a=t.attr("data-username");a&&(t.remove(),this.collection.removeWatcher(a),this._decrementWatcherCount(),a===r.get("remote-user")&&this.unwatch()),s.trace("jira.issue.watcher.deleted")},_render:function(){this.$el.html(o.watchersNoBrowse({watchers:this.collection.toJSON()}))}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/views/watchers-read-only-view.js' */
define("jira/viewissue/watchers-voters/views/watchers-read-only-view",["require"],function(e){var s=e("jira/viewissue/watchers-voters/views/abstract-watchers-view"),r=JIRA.Templates.Issue;return s.extend({_render:function(){this.$el.html(r.usersListReadOnly({users:this.collection.toJSON()}))}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/views/watchers-inline-dialog-view.js' */
define("jira/viewissue/watchers-voters/views/watchers-inline-dialog-view",["require"],function(e){var i=e("backbone"),t=e("jira/skate"),n=i.View.prototype.setElement;return i.View.extend({id:"inline-dialog-watchers",events:{"click .cancel":function(e){e.preventDefault(),this.hide()}},setElement:function(e){var s=e instanceof i.$?e.get(0):e;if(s)return this.el&&this.el.parentNode&&this.el!==s&&this.el.parentNode.removeChild(this.el),n.call(this,s),t.init(this.el),this},contents:function(e){var i=this.$el.find(".aui-inline-dialog-contents");0===i.length&&(i=AJS.$("<div/>",{class:"aui-inline-dialog-contents"}),this.$el.append(i)),i.html(e)},show:function(){this.el.setAttribute("open","")},hide:function(){this.el.removeAttribute("open")},isVisible:function(){return!!this.el.hasAttribute("open")}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/watchers.js' */
define("jira/viewissue/watchers-voters/watchers",["require"],function(e){"use strict";function i(){return h||(h=new a({el:d("#inline-dialog-watchers").get(0)})),h}function s(e){return e.isReadOnly?n:e.canBrowseUsers?r:t}var n=e("jira/viewissue/watchers-voters/views/watchers-read-only-view"),t=e("jira/viewissue/watchers-voters/views/watchers-no-browse-view"),r=e("jira/viewissue/watchers-voters/views/watchers-view"),o=e("jira/viewissue/watchers-voters/entities/watchers-user-collection"),a=e("jira/viewissue/watchers-voters/views/watchers-inline-dialog-view"),c=e("jira/util/events"),l=e("jira/util/events/types"),w=e("jira/util/events/reasons"),u=e("jira/issue"),v=e("aui/inline-dialog"),d=e("jquery"),h=null;d(document).on("click","#view-watcher-list",function(e){e.preventDefault();var n=i(),t=d("#watching-toggle").next(".icon"),r=new o(u.getIssueKey());t.addClass("loading");var a=s(r);new a({collection:r}).render().done(function(e){t.removeClass("loading"),n.contents(e),n.show()}),r.on("errorOccurred",function(){n.hide()})}),d(document).on("keydown",function(e){h&&27===e.keyCode&&v.current!==h.el&&h.isVisible()&&(v.current&&v.current.hide(),h.hide())}),d(document).on("click",function(e){if(h){var i=d(e.target).closest("#inline-dialog-watchers, #watchers-suggestions").length;0===i&&h.isVisible()&&h.hide()}}),c.bind(l.NEW_CONTENT_ADDED,function(e,s,n){n===w.panelRefreshed&&s.is("#peoplemodule")&&i().setElement(s.find("#inline-dialog-watchers").get(0))})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/voters.js' */
define("jira/viewissue/watchers-voters/voters",["require"],function(e){"use strict";var i=e("jira/viewissue/watchers-voters/entities/voters-user-collection"),r=e("jira/viewissue/watchers-voters/views/voters-view"),t=e("jira/issue"),n=e("jira/ajs/layer/inline-layer"),s=e("aui/inline-dialog"),o=e("jquery"),c=s("#view-voter-list","voters",function(e,n,s){var u=o("#vote-toggle").next(".icon"),l=new i(t.getIssueKey());u.addClass("loading"),new r({collection:l}).render().done(function(i){e.html(i),e.find(".cancel").click(function(e){c.hide(),e.preventDefault()}),u.removeClass("loading"),s()}),l.on("errorOccurred",function(){c.hide()})},{width:240,useLiveEvents:!0,items:"#view-voters-list",preHideCallback:function(){return!n.current}});o(document).bind("keydown",function(e){27===e.keyCode&&s.current!==c&&c.is(":visible")&&(s.current&&s.current.hide(),c.hide())}),o(document).click(function(e){var i=s.current;i&&"voters"===i.id&&(o(e.target).closest("#inline-dialog-voters").length||i.hide())})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/toggler.js' */
define("jira/viewissue/watchers-voters/toggler",["require"],function(t){var e=t("jira/components/analytics-tracker/tracker"),a=t("jira/ajs/ajax/smart-ajax"),o=t("jira/flag"),n=t("jquery"),s=t("wrm/context-path"),i=t("jira/util/formatter"),r=function(t,o,i,r,c){var u,f=o+"-on",g=o+"-off",d="/voters",x=t.next(".icon"),p="POST",v=t.hasClass(f)?"on":"off";t.hasClass(f)&&(p="DELETE"),o.indexOf("watch")!==-1&&(d="/watchers"),t.removeClass(f).removeClass(g),"POST"===p&&(u={dummy:!0}),e.trackEvent("viewissue."+o+"."+v,"click"),n(a.makeRequest({url:s()+"/rest/api/1.0/issues/"+t.attr("rel")+d,type:p,dataType:"json",data:u,contentType:"application/json",complete:function(e,a,o){var n="POST"===p;o.successful?(n?(t.addClass(f),t.text(c.titleOn),r.attr("title",c.titleOn).text(c.textOn)):(t.addClass(g),t.text(c.titleOff),r.attr("title",c.titleOff).text(c.textOff)),i.text(o.data.count),i[n?"addClass":"removeClass"](f),i[n?"removeClass":"addClass"](g)):(o.aborted||l(o),n?(t.addClass(g),t.text(c.titleOff),r.attr("title",c.titleOff).text(c.textOff)):(t.addClass(f),t.text(c.titleOn),r.attr("title",c.titleOn).text(c.textOn)))}})).throbber({target:x})},l=function(t){var e=a.buildSimpleErrorContent(t,{alert:!0});if(t.hasData){var n=JSON.parse(t.data);n.errorMessages&&(e=n.errorMessages[0])}o.showErrorMsg(e,{closeable:!0})};n(document).delegate("#toggle-vote-issue","click",function(t){t.preventDefault(),n("#vote-toggle").click()}),n(document).delegate("#toggle-watch-issue","click",function(t){t.preventDefault(),n("#watching-toggle").click()});var c=function(t){n("input[type=hidden][id|=error]").each(function(e,a){var o=a.id.replace("error-","");t[o]=a.value})};n(document).delegate("#vote-toggle","click",function(t){t.preventDefault();var e={titleOn:"Remove vote for this issue",titleOff:"Vote for this issue",textOn:"Remove vote",textOff:"Add vote",actionTextOff:"Vote",actionTextOn:"Voted"},a=n(this),o=n(document.querySelectorAll("#vote-data")),s=n(document.querySelectorAll("#toggle-vote-issue"));c(e),r(a,"vote-state",o,s,e)}),n(document).delegate("#watching-toggle","click",function(t){t.preventDefault();var e={titleOn:"Stop watching this issue",titleOff:"Start watching this issue",textOn:"Stop watching",textOff:"Watch issue",actionTextOff:"Watch",actionTextOn:"Watching"},a=n(this),o=n(document.querySelectorAll("#watcher-data")),s=n(document.querySelectorAll("#toggle-watch-issue"));c(e),r(a,"watch-state",o,s,e)})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/initWatchersAndVoters.js' */
AJS.namespace("JIRA.VotersUsersCollection",null,require("jira/viewissue/watchers-voters/entities/voters-user-collection")),AJS.namespace("JIRA.WatchersUsersCollection",null,require("jira/viewissue/watchers-voters/entities/watchers-user-collection")),AJS.namespace("JIRA.VotersView",null,require("jira/viewissue/watchers-voters/views/voters-view")),AJS.namespace("JIRA.WatchersView",null,require("jira/viewissue/watchers-voters/views/watchers-view")),AJS.namespace("JIRA.WatchersNoBrowseView",null,require("jira/viewissue/watchers-voters/views/watchers-no-browse-view")),AJS.namespace("JIRA.WatchersReadOnly",null,require("jira/viewissue/watchers-voters/views/watchers-read-only-view"));;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/AnalyticsUtils.js' */
define("jira/viewissue/analytics-utils",["jira/util/data/meta","jira/issuenavigator/issue-navigator","jira/util/strings","wrm/context-path","jquery","exports"],function(n,t,e,i,r,s){function a(){return r(document.body).hasClass("navigator-issue-only")}function u(){return!!n.get("is-servicedesk-rendered")}function o(){return t.isNavigator()}function c(){return a()&&e.contains(location.search,"jql=")}function l(){return e.startsWith(location.pathname,i()+"/projects/")}s.context=function(){return c()?"fullscreen-issuenav":a()?"fullscreen":u()?"sd-queue":o()?"issuenav":l()?"project":"unknown"}});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/slideshow/slideshow-configuration.js' */
define("jira/viewissue/slideshow/slideshow-configuration",["jira/ajs/keyboardshortcut/keyboard-shortcut-toggle","jquery"],function(e,t){var i={type:"image",centerOnScroll:!0,onStart:e.disable,onClosed:e.enable},n="elastic";return t.extend({},i,{transitionIn:n,transitionOut:n})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/element/image-wrap.js' */
define("jira/viewissue/element/image-wrap",["jira/fileviewer","jira/skate","jira/featureflags/feature-manager","underscore"],function(e,a,i,t){a("file-preview-type",{type:a.type.ATTRIBUTE,attached:t.debounce(function(){e.attachToElements()},0),detached:function(){e.closeViewer()}})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/ajs/shorten/shortener.js' */
define("jira/ajs/shorten/shortener",["jira/util/formatter","jira/ajs/control","jira/data/local-storage","jquery"],function(t,e,i,s){return e.extend({_getDefaultOptions:function(){return{items:"a, span",numRows:1,shortenText:"hide",shortenOnInit:!0,persist:!0,expandButtonTooltip:"Click to view {0} more",collapseButtonTooltip:"Hide"}},init:function(t){"string"==typeof t&&(t={element:t}),t=t||{},this.options=s.extend(this._getDefaultOptions(),t),this._timerId=0,this.expanded=!1,this.$container=s(this.options.element),this._assignEvents("body",document.body),this._ready()},_isValid:function(){return!this.initialized&&this.$container.is(":visible")&&this.$container.children().length>0},_ready:function(){this._isValid()&&(this.$items=this.$container.children(this.options.items),this.$expandButton=this._render("expandButton"),this.$collapseButton=this._render("collapseButton"),this._assignEvents("expand-button",".shortener-expand"),this._assignEvents("collapse-button",".shortener-collapse"),(!s.browser.msie||s.browser.version>="9")&&this._assignEvents("resize-region",window),this._isCollapsedOnInit()?this.collapse():this.expand(),this.initialized=!0)},_renders:{expandButton:function(){return s("<a href='#' class='ellipsis shortener-expand'></a>").attr("title",this.options.expandButtonTooltip).add("<br>")},collapseButton:function(){return s("<a href='#' title='Hide' class='icon icon-hide shortener-collapse'></a>").append(s("<span>").text(this.options.collapseButtonTooltip))}},_events:{"expand-button":{click:function(t){t.currentTarget===this.$expandButton[0]&&(t.preventDefault(),this.expand(),this._saveState("expanded"))}},"collapse-button":{click:function(t){t.currentTarget===this.$collapseButton[0]&&(t.preventDefault(),this.collapse(),this._saveState("collapsed"),this.$container.scrollIntoView())}},"resize-region":{resize:function(){if(clearTimeout(this._timerId),!this.expanded){var t=this;this._timerId=setTimeout(function(){t.collapse()},400)}}},body:{tabSelect:function(){this._ready()}}},_saveState:function(t){try{i.setItem("AJS.Shortener#"+this.$container.closest("[id]").attr("id"),t)}catch(t){}},_loadState:function(){return i.getItem("AJS.Shortener#"+this.$container.closest("[id]").attr("id"))},_isCollapsedOnInit:function(){var t=this._loadState();return null!==t?"expanded"!==t:this.options.shortenOnInit},_removeButtons:function(){this.$expandButton.remove(),this.$collapseButton.remove()},_getOverflowIndex:function(){if(this.$items.length>1)for(var t=1,e=-1,i=0;i<this.$items.length;i++){var s=this.$items.eq(i).offset().left;if(s<=e&&(t++,t>this.options.numRows))return i;e=s}return-1},expand:function(){this._removeButtons(),this._getOverflowIndex()>0&&(this.$collapseButton=this._render("collapseButton"),this.$container.append(this.$collapseButton),this.$container.css("height","auto"),s.browser.msie&&s.browser.version<"9"&&s("body").toggleClass("reflow")),this.expanded=!0},collapse:function(){this._removeButtons();var e=this._getOverflowIndex();if(e>0){this.$container.css({position:"absolute",visibility:"hidden",width:this.$container[0].clientWidth+"px"});var i=this.$expandButton.first();do{var n=this.$items.length-e;i.text("("+n+")"),this.$expandButton.insertBefore(this.$items[e]),e--;var o=this.$items.eq(e).offset(),r=this.$expandButton.offset();if(o.left<r.left&&r.top<o.top+10)break}while(e>0);var a=e<this.$items.length-1?this.$items.eq(e+1).offset().top-this.$container.offset().top+"px":"auto";this.$container.css({height:a,position:"static",visibility:"visible",width:"auto"}),i.attr("title",t.format(this.options.expandButtonTooltip,n)),s.browser.msie&&s.browser.version<"9"&&s("body").toggleClass("reflow")}else this.$container.css("height","auto");this.expanded=!1}})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/ajs/shorten/namespace.js' */
AJS.namespace("AJS.Shortener",null,require("jira/ajs/shorten/shortener"));;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jquery/plugins/shorten/shortener.js' */
define("jira/jquery/plugins/shorten/shorten",["jira/ajs/shorten/shortener","jquery"],function(n,e){e.fn.shorten=function(e){var r=[];return e=e||{},this.each(function(){e.element=this,r.push(new n(e))}),r}});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jquery/plugins/shorten/install.js' */
!function(){require("jira/jquery/plugins/shorten/shorten")}();;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/element/shorten.js' */
define("jira/viewissue/element/shorten",["jira/ajs/shorten/shortener","jira/skate"],function(e,t){return t("shorten",{type:t.type.CLASSNAME,attached:function(t){var n={};n.element=t,new e(n)}})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/initToggleBlock.js' */
define("jira/viewissue/init-toggle-block",["jira/util/events","jira/util/events/types","jira/toggleblock/toggle-block"],function(e,t,i){new i({blockSelector:".toggle-wrap",triggerSelector:".issue-container .mod-header .toggle-title",storageCollectionName:"block-states"}),t.ISSUE_REFRESHED&&e.bind(t.ISSUE_REFRESHED,function(){t.REFRESH_TOGGLE_BLOCKS&&e.trigger(t.REFRESH_TOGGLE_BLOCKS)})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/comment/comment-form.js' */
define("jira/viewissue/comment/comment-form",["jira/util/formatter","jira/util/events","jira/util/events/types","jira/ajs/ajax/smart-ajax","jira/issue","jira/dialog/form-dialog","wrm/context-path","jira/jquery/deferred","jquery"],function(e,t,i,n,r,o,s,a,m){var l=s(),d={setCaretAtEndOfCommentField:function(){var e,t=this.getField(),i=t[0];t.length&&(e=t.val().length,t.scrollTop(t.attr("scrollHeight")),i.setSelectionRange&&e>0&&i.setSelectionRange(e,e))},disable:function(){this.getForm().find("textarea").attr("readonly","readonly"),this.getForm().find("input[type=submit]").attr("disabled","disabled")},isDirty:function(){var e=this.getField();return!!e.length&&e[0].value!==e[0].defaultValue},handleBrowseAway:function(){if(d.isDirty()){var t=d.getForm(),i=t.length&&t.is(":visible");return i?"You have entered a comment on this issue. If you navigate away from this page without first saving, the comment will be lost.":void 0}},isVisibilityAvailble:function(){return"none"!=this.getForm().find("#commentLevel :selected").val()},setSubmitState:function(){m.trim(this.getField().val()).length>0&&this.isVisibilityAvailble()?this.getForm().find("#issue-comment-add-submit").removeAttr("disabled"):this.getForm().find("#issue-comment-add-submit").attr("disabled","disabled")},enable:function(){this.getForm().find("textarea").removeAttr("readonly"),this.getForm().find("input[type=submit]").removeAttr("disabled")},getCommentVisibility:function(){var e=this.getForm().find("#commentLevel :selected").val();if(e){var t=e.split(":");return{type:t[0],value:this.getForm().find("#commentLevel :selected").text()}}return null},ajaxSubmit:function(){var s=m('<span class="icon throbber loading"></span>'),u=r.getIssueId(),c=r.getIssueKey(),g=l+"/rest/api/2/issue/"+c+"/comment",f={body:this.getField()[0].value.replace(/\r?\n/g,"\r\n")},h=this.getCommentVisibility();h&&(f.visibility=h);var v=a(),b=m.ajax({url:g,type:"POST",contentType:"application/json",data:JSON.stringify(f),success:function(e){t.trigger(i.UNLOCK_PANEL_REFRESHING,["addcommentmodule"]),t.trigger(i.REFRESH_ISSUE_PAGE,[u,{complete:function(){var t="comment-"+e.id;m("#"+t).scrollIntoView({marginBottom:200,marginTop:200});var i=m("#issue_actions_container > .issue-data-block.focused");i.removeClass("focused");var n=m("#"+t);n.addClass("focused"),s.remove(),d.enable(),v.resolve()}}])},error:function(t){function i(t){var i="<h2>"+"Error"+'</h2><div class="ajaxerror"><div class="aui-message error"><span class="aui-icon icon-warning"/>'+t+"</div></div>";return m(i)}var r,a=m.parseJSON(t.responseText);r=a&&a.errors&&a.errors.comment?i(a.errors.comment):n.buildDialogErrorContent(t),new o({content:r}).show(),s.remove(),d.enable(),v.reject()}});return s.appendTo(this.getForm().find("input[type=submit]").parent()),m.when(b,v)},getForm:function(){var e=m("form#issue-comment-add");return 1===e.length&&(this.$form=e),this.$form||m()},getField:function(){return this.getForm().find("#comment")},getSubmitButton:function(){return this.getForm().find("#issue-comment-add-submit")},hide:function(e){e&&this.cancel(),this.getForm().detach(),i.UNLOCK_PANEL_REFRESHING&&t.trigger(i.UNLOCK_PANEL_REFRESHING,["addcommentmodule"])},show:function(){this.focus(),i.LOCK_PANEL_REFRESHING&&t.trigger(i.LOCK_PANEL_REFRESHING,["addcommentmodule"])},focus:function(){this.focusField(),this.setCaretAtEndOfCommentField()},focusField:function(){this.getField().focus().trigger("keyup"),this.getSubmitButton().scrollIntoView({marginBottom:200})},showNoCommentMsg:function(e){if(""===this.getField().val())return m("#emptyCommentErrMsg").show(),!0},cancel:function(){var e=this;setTimeout(function(){e.getField().val("")},100),m("#comment-preview_link.selected").click()}};return d});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/comment/footer-comment.js' */
define("jira/viewissue/comment/footer-comment",["jira/viewissue/comment/comment-form","jquery"],function(e,t){var i=!1,n=!1,o={getModule:function(){return t("#addcomment")},isActive:function(){return this.getModule().hasClass("active")},hide:function(t){if(this.isActive()){var o=e.handleBrowseAway();(n||i||!o||confirm(o))&&(this.getModule().removeClass("active"),e.hide(t))}},ajaxSubmit:function(){i=!0,e.ajaxSubmit().then(function(){o.hide(!0)})},show:function(){this.isActive()?e.focusField():(i=!1,this.getModule().addClass("active"),this.appendForm(),e.show())},appendForm:function(){this.getModule().find(".mod-content").append(e.getForm())}};return o.setPreviewMode=function(e){n=Boolean(e)},o});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/init-comment-areas.js' */
define("jira/viewissue/init-comment-areas",["require"],function(e){var t=e("jira/viewissue/comment/comment-form"),n=e("jira/viewissue/comment/footer-comment"),i=e("jira/issue"),o=e("jquery"),a=e("jira/libs/parse-uri"),m=window.onbeforeunload,u={};u.openFooterComment=function(){n.show(),t.getForm().find("#commentLevel").bind("change",function(){t.setSubmitState()}),t.setSubmitState()},o(document).delegate("#addcomment #issue-comment-add","submit",function(e){n.ajaxSubmit(),e.preventDefault()}).delegate(".issue-header #comment-issue","click",function(e){n.show(),e.preventDefault()}).delegate("#footer-comment-button","click",function(e){u.openFooterComment(),e.preventDefault()}).delegate("#addcomment .cancel","click",function(e){e.preventDefault(),n.hide(!0)}).delegate("#issue-comment-add","submit",function(){window.setTimeout(function(){t.disable()},0)}).delegate("#issue-comment-add #comment","input",function(){t.setSubmitState()}).delegate("#issue-comment-add input[type='submit']","click",function(e){t.showNoCommentMsg()&&e.preventDefault()}).bind("showWikiInput",function(){n.setPreviewMode(!1);var e=t.getField();e.is(":visible:enabled")&&(i.getStalker().trigger("stalkerHeightUpdated"),e.length>0&&e.focus(),t.setCaretAtEndOfCommentField())}).bind("showWikiPreview",function(){n.setPreviewMode(!0),i.getStalker().trigger("stalkerHeightUpdated")}),window.onbeforeunload=function(){var e=void 0;return o.isFunction(m)&&(e=m.apply(this,arguments)),e||t.handleBrowseAway.apply(this,arguments)},o(function(){"add-comment"===a(window.location.href).anchor&&u.openFooterComment()})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/invoke-comment-trigger.js' */
define("jira/viewissue/invoke-comment-trigger",["jquery"],function(e){return function(){var i=e(".add-issue-comment");if(0!==i.length){var r=i.filter(".toolbar-trigger");r.length>0?r.click():i.click()}}});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/namespace.js' */
AJS.namespace("JIRA.Issue.CommentForm",null,require("jira/viewissue/comment/comment-form")),AJS.namespace("JIRA.Issue.getDirtyCommentWarning",null,require("jira/viewissue/comment/comment-form").handleBrowseAway),AJS.namespace("JIRA.Issue.invokeCommentTrigger",null,require("jira/viewissue/invoke-comment-trigger"));;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/initCustomFieldTabs.js' */
define("jira/viewissue/init-custom-field-tabs",["jira/util/logger","jira/util/events","jira/util/events/types","aui/tabs","jquery"],function(t,i,e,n,a){var r="#customfieldmodule",l=function(i){var e;"string"!=typeof i&&i.length>0||("#"!==i[0]&&(i="#"+i),t.log("activating tab",i),e=a("a[href='"+i+"']",r),e.length&&n.change(e))},u=function(t){var i=a(t.target).closest(".tabs-pane");i.length>0&&l(i.attr("id"))};a(function(){e.NEW_CONTENT_ADDED&&i.bind(e.NEW_CONTENT_ADDED,function(t,i){var e=i.find(r);e.unbind("reveal"),e.bind("reveal",u),n.setup()}),e.PANEL_REFRESHED&&i.bind(e.PANEL_REFRESHED,function(t,i,e,n){if("details-module"===i){var a=n.find(r).find(".active-tab");1===a.length&&l(a.find("a").attr("href"))}}),a(r).bind("reveal",u)})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/initSubtaskTimeLogging.js' */
define("jira/viewissue/init-subtask-time-logging",["jquery"],function(i){i(document).delegate("#tt_include_subtasks input","click",function(t){i(this).is(":checked")?(i("#tt_info_single").hide(),i("#tt_info_aggregate").show()):(i("#tt_info_aggregate").hide(),i("#tt_info_single").show())})});;
;
/* module-key = 'jira.webresources:viewissue', location = 'includes/jira/viewissue/ViewIssueTabs.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.Issue&&(JIRA.Templates.Issue={}),"undefined"==typeof JIRA.Templates.Issue.Tabs&&(JIRA.Templates.Issue.Tabs={}),JIRA.Templates.Issue.Tabs.label=function(e,s){return"<strong>"+soy.$$escapeHtml(e.text)+"</strong>"},JIRA.Templates.Issue.Tabs.tab=function(e,s){return'<a id="'+soy.$$escapeHtml(e.id)+'" href="'+soy.$$escapeHtml(e.href)+'" class="'+soy.$$escapeHtml(e.linkClass)+'">'+JIRA.Templates.Issue.Tabs.label(e)+"</a>"};;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/ViewIssueTabsAnalytics.js' */
define("jira/viewissue/tabs/analytics",["jquery","jira/analytics","jira/util/strings","jira/viewissue/analytics-utils","jira/components/analytics-tracker/tracker","underscore"],function(e,t,a,n,i,s){function r(e){return m.indexOf(e)>-1?e:a.hashCode(e)}function c(e){return{tab:r(e.attr("data-key")),tabPosition:e.index()}}function l(e,t){return{inNewWindow:e,keyboard:t,context:n.context()}}function o(e){var t=e.attr("id");return!!t&&/\d+_thumb/.test(t)}function u(e){return e.hasClass("issue-link")?"issue":e.hasClass("external-link")?"external":o(e)?"attachment":"unknown"}function d(e,t,a,n){var r=e.closest(".mod-content").find("#issue-tabs li.active"),o=l(a,n);s.extend(o,c(r)),s.extend(o,{linkType:t}),i.trackEvent("viewissue","tab.link.clicked",o)}var m=["com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel","com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel","com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel","com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel","com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab"];return{tabClicked:function(e,a,n){var r=e.parent(),o=s.extend({},l(a,n),c(r));t.send({name:"jira.viewissue.tab.clicked",data:o}),i.trackEvent("viewissue","tab.clicked",o)},buttonClicked:function(e,a,n){if(e.is("[data-tab-sort]")){var i=e.data("order"),r=e.parents(".tabwrap").find("li.active");t.send({name:"jira.viewissue.tabsort.clicked",data:s.extend({},l(a,n),c(r),{order:i})})}},permalinkClicked:function(e,t){i.trackEvent("viewissue","comment.permalink.click",{commentId:e,keyboard:t})},permalinkContextMenuOpened:function(e,t){i.trackEvent("viewissue","comment.permalink.contextmenu.opened",{commentId:e,keyboard:t})},tabItemDetailsLinkClicked:function(e,t,a){d(e,"profile",t,a)},tabItemBodyLinkClicked:function(e,t,a){d(e,u(e),t,a)}}});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/ViewIssueTabs.js' */
define("jira/viewissue/tabs",["jira/util/logger","jira/util/formatter","jquery","jira/jquery/deferred","jira/util/data/meta","jira/dialog/form-dialog","jira/ajs/ajax/smart-ajax","jira/userhover/userhover","jira/viewissue/tabs/analytics"],function(t,e,i,a,n,r,o,s,c){function u(t){t=t||document,i.each(F,function(e,i){i(t)})}function l(t){var e=i(t).find(".issuePanelWrapper"),a=i(t).find("#issue_actions_container");q=a.length?a:q,_=e.length?e:_}function f(t,e){var i=new r({id:"issue-tab-error-dialog",widthClass:"small",content:o.buildDialogErrorContent(t,!1)});d(e),q.show(),i.show()}function d(t){i("#issue-tabs li").each(function(){var e=i(this),a=e.data("key"),n=e.data("label");if(a==t)e.addClass("active"),e.html(D.label({text:n}));else{e.removeClass("active");var r=e.data("id"),o=e.data("href");e.html(D.tab({id:r,href:o,linkClass:J,text:n}))}}),k(i("#issue-tabs"))}function h(t){d(t)}function v(t,e){var i=t.pageX,a=t.pageY,n=e.offset(),r=e.outerWidth(),o=e.outerHeight();return 0==i&&0==a||!(i>=n.left&&i<=n.left+r&&a>=n.top&&a<=n.top+o)}function m(){var t=i("#issue_actions_container");p(t,"action-details","viewIssueTabDetailsLink",c.tabItemDetailsLinkClicked),p(t,"action-body","viewIssueTabBodyLink",c.tabItemBodyLinkClicked)}function p(t,e,a,n){var r="."+e+" a";t.find(r).off("click."+a).on("click."+a,function(t){var e=i(this),a=t.metaKey,r=v(t,e);n(e,a,r)})}function b(){var t=i('[id^="permlink_comment"]');t.off("click").on("click",function(t){var e=g(t.target),a=i(this),n=v(t,a);c.permalinkClicked(e,n)}),t.off("contextmenu").on("contextmenu",function(t){var e=g(t.target),a=i(this),n=v(t,a);c.permalinkContextMenuOpened(e,n)})}function g(t){var e=i(t).closest('[id^="permlink_comment"]').attr("id"),a=e.split("_").pop();return a}function k(t){var e=i(t).find("li.active").data("key");i(t).find(E).off("click.viewIssueTabs").on("click.viewIssueTabs",function(t){var a=i(this),n=v(t,a),r=a.parent().data("key"),o=t.metaKey;r?c.tabClicked(a,o,n):c.buttonClicked(a,o,n),o||(t.preventDefault(),r&&h(r),y(e,a.attr("href")).done(function(t){n&&(r?t.find("#"+a.attr("id")+" > :first-child").focus():t.find(".sortwrap  > :first-child").focus())}).done(u))})}function y(e,n){var r=a();L&&L.abort();var s=o.makeRequest({jqueryAjaxFn:R?i.pjax:i.ajax,headers:{"X-PJAX":!0},container:S,url:n,timeout:null,complete:function(a,n,o){if("abort"!=n){if(L=null,!o.successful)return void((o.status<300||o.status>=400)&&f(o,e));var s=i(this.container),c=document.createElement("div");c.innerHTML=o.data;var u=document.createDocumentFragment().appendChild(c);R||j(s,u),t.trace("jira.issue.tab.loaded"),r.resolve(s)}}});return i(s).throbber({target:_}),L=s,r}function j(t,e){var a=e.querySelectorAll(".tabwrap"),n=t.find(".tabwrap"),r=i(e.querySelectorAll("#issue_actions_container")).contents(),o=q.contents();if(a.length&&n.length&&r.length&&o.length){n.replaceWith(a),q.stop(!0,!0);var s=q.height();q.append(r);var c=q.height()-s,u=s-c;u>0?(q.css("height",c+u),o.remove(),w(c,u)):q.empty().append(r),i(e.querySelectorAll("script")).each(function(){i.globalEval(this.text||this.textContent||this.innerHTML||"")})}else t.empty().append(e)}function w(t,e){var i=150,a=800,n=e/a*1e3;setTimeout(function(){q.animate({height:t+1},n,"easeOutQuart",function(){q.css("height","auto")})},i)}function x(t){i(t).find(E).each(function(){var t=i(this);t.attr("href",t.attr("href")+"#issue-tabs")})}function C(t){!R||i.support.pjax?k(t):x(t)}function T(t){i(t).bind("moveToFinished",function(t,e){i("a.twixi:visible",e).focus()})}function I(t){t.find("time.livestamp").livestamp()}function A(t){i.inArray(t,F)<0&&F.push(t)}var _,q,L,D=JIRA.Templates.Issue.Tabs,R=n.get("viewissue-use-history-api")!==!1,J="ajax-activity-content",S="#activitymodule div.mod-content",E=e.format("a.{0}",J),F=[];return A(l),A(C),A(T),A(s),A(I),A(m),A(b),{onTabReady:A,domReady:u}}),AJS.namespace("JIRA.ViewIssueTabs",null,require("jira/viewissue/tabs"));;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/initViewIssueTabs.js' */
define("jira/viewissue/init-view-issue-tabs",["require"],function(i){var e=i("jquery"),n=i("jira/util/events"),s=i("jira/util/events/types"),t=i("jira/viewissue/tabs");e(function(){s.PANEL_REFRESHED&&n.bind(s.PANEL_REFRESHED,function(i,e,n,s){if("activitymodule"===e){var t=s.find("#issue_actions_container > .issue-data-block.focused");1===t.length&&n.find("#"+t.attr("id")).addClass("focused")}})}),n.bind(s.NEW_CONTENT_ADDED,function(i,e){t.domReady(e)})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/initViewissue.js' */
require(["jira/viewissue/element/shorten","jira/viewissue/element/image-wrap","jira/viewissue/watchers-voters/watchers","jira/viewissue/watchers-voters/voters","jira/viewissue/watchers-voters/toggler","jira/viewissue/init-comment-areas","jira/viewissue/init-subtask-time-logging","jira/viewissue/init-toggle-block","jira/viewissue/init-custom-field-tabs","jira/viewissue/init-view-issue-tabs"],function(){});;
;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:asynchronous-attachment-expansion', location = 'viewissue/attachment/attachment-contents-view.js' */
define("jira/view-issue-plugin/attachment/attachment-contents-view",["jira/view-issue-plugin/lib/marionette"],function(t){"use strict";return t.ItemView.extend({template:JIRA.Templates.ViewIssue.attachmentContents,initialize:function(t){this.attachment=t.attachment,this.issueId=t.issueId,this.baseUrl=t.baseUrl},serializeData:function(){return{attachment:this.attachment,issueId:this.issueId,baseUrl:this.baseUrl}}})});;
;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:asynchronous-attachment-expansion', location = 'viewissue/attachment/attachment-contents-view-alias.js' */
define("jira/attachment/attachment-contents-view",["jira/view-issue-plugin/attachment/attachment-contents-view"],function(t){return t});;
;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:asynchronous-attachment-expansion', location = 'viewissue/attachment/attachment-element.js' */
define("jira/view-issue-plugin/attachment/attachment-element",["jira/util/logger","wrm/context-path","jquery","jira/skate","jira/viewissue/slideshow/slideshow-configuration","jira/view-issue-plugin/lib/marionette","jira/attachment/attachment-contents-view"],function(t,e,n,i,a,o,r){"use strict";function c(i){var a=n(i),c=a.data("attachment-id"),s=a.data("issue-id"),u=e()+"/rest/api/2/attachment/"+c+"/expand/human",l=n.get(u);l.done(function(t){var n=new o.Region({el:a.find(".zip-contents").first()}),i=new r({attachment:t,issueId:s,baseUrl:window.location.protocol+"//"+window.location.host+e()});n.show(i)}),l.error(function(e){t.error(e)})}return i("js-file-attachment",{type:i.type.CLASSNAME,attached:function(e){n(e).find(".expander").one("expandBlock",function(){c(e)}),t.trace("jira.plugins.viewissue.expansion.wired")},events:{"click .attachment-title":function(t,e){if(1===e.which){var n=t.getThumbnailImage();n.length&&(n.click(),e.preventDefault())}}},prototype:{getThumbnailImage:function(){var t=this;return n(".gallery",t)}}})});;
;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:asynchronous-attachment-expansion', location = 'viewissue/attachment/attachment.soy' */
// This file was automatically generated from attachment.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.ViewIssue.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.ViewIssue == 'undefined') { JIRA.Templates.ViewIssue = {}; }


JIRA.Templates.ViewIssue.attachmentContents = function(opt_data, opt_ignored) {
  var output = '<ol class="archive-expanded">';
  var entries__soy4 = opt_data.attachment.entries;
  var entryList5 = entries__soy4;
  var entryListLen5 = entryList5.length;
  for (var entryIndex5 = 0; entryIndex5 < entryListLen5; entryIndex5++) {
    var entryData5 = entryList5[entryIndex5];
    output += JIRA.Templates.ViewIssue.attachmentArchiveEntry(soy.$$augmentMap(opt_data, {entry: entryData5}));
  }
  output += ((opt_data.attachment.totalEntryCount == 0) ? '<li><div class="aui-message aui-message-warning" style="display: inline-block"><p>' + soy.$$escapeHtml('This archive is either corrupt, empty or not an archive at all') + '.</p></div></li>' : '') + '</ol><span class="zip-contents-trailer">' + ((entries__soy4.length < opt_data.attachment.totalEntryCount) ? '<span class="limit-info">' + soy.$$escapeHtml(AJS.format('Showing {0} of {1} items',entries__soy4.length,opt_data.attachment.totalEntryCount)) + ' </span>' : '');
  var attachmentUrl__soy20 = soy.$$escapeHtml(opt_data.baseUrl) + '/secure/attachment/' + soy.$$escapeHtml(opt_data.attachment.id) + '/';
  output += '<a href="' + soy.$$escapeHtml(attachmentUrl__soy20) + '" draggable="true" data-downloadurl="' + soy.$$escapeHtml(opt_data.attachment.mediaType) + ':' + soy.$$escapeHtml(opt_data.attachment.name) + ':' + soy.$$escapeHtml(attachmentUrl__soy20) + '">' + soy.$$escapeHtml('Download Zip') + '</a></span>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.attachmentContents.soyTemplateName = 'JIRA.Templates.ViewIssue.attachmentContents';
}


JIRA.Templates.ViewIssue.attachmentArchiveEntry = function(opt_data, opt_ignored) {
  var output = '';
  var entryUrl__soy37 = soy.$$escapeHtml(opt_data.baseUrl) + '/secure/attachmentzip/unzip/' + soy.$$escapeHtml(opt_data.issueId) + '/' + soy.$$escapeHtml(opt_data.attachment.id) + '%5B' + soy.$$escapeHtml(opt_data.entry.index) + '%5D/';
  var entryDownloadUrl__soy49 = soy.$$filterNoAutoescape(opt_data.entry.mediaType) + ':' + soy.$$filterNoAutoescape(opt_data.entry.path) + ':' + soy.$$filterNoAutoescape(entryUrl__soy37);
  output += '<li class="archive-entry" data-entry-index="' + soy.$$escapeHtml(opt_data.entry.index) + '"><div class="attachment-thumb"><a href="' + soy.$$escapeHtml(entryUrl__soy37) + '" draggable="true" data-downloadurl="' + soy.$$escapeHtml(entryDownloadUrl__soy49) + '"' + JIRA.Templates.ViewIssue.tagFilePreview({id: opt_data.attachment.id + '/' + opt_data.entry.index, title: opt_data.entry.label, mimeType: opt_data.entry.mediaType}) + '>' + JIRA.Templates.ViewIssue.renderAttachmentIcon({mimetype: opt_data.entry.mediaType, baseurl: opt_data.baseUrl}) + '</a></div><a class="file-path" href="' + soy.$$escapeHtml(entryUrl__soy37) + '" title="' + soy.$$escapeHtml(opt_data.entry.path) + '" draggable="true" data-downloadurl="' + soy.$$escapeHtml(entryDownloadUrl__soy49) + '"' + JIRA.Templates.ViewIssue.tagFilePreview({id: opt_data.attachment.id + '/' + opt_data.entry.index, title: opt_data.entry.label, mimeType: opt_data.entry.mediaType}) + '>' + soy.$$escapeHtml(opt_data.entry.label) + '</a><span class="attachment-size">' + soy.$$escapeHtml(opt_data.entry.size) + '</span></li>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ViewIssue.attachmentArchiveEntry.soyTemplateName = 'JIRA.Templates.ViewIssue.attachmentArchiveEntry';
}
;
;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:draggableattachment', location = 'viewissue/initDraggableAttachment.js' */
define("jira/view-issue-plugin/init-draggable-attachment",["jquery"],function(a){a.event.props.push("dataTransfer"),a("[draggable=true]").live("dragstart",function(e){var t=a(this),i=e.dataTransfer;i.effectAllowed="copy",i.dropEffect="copy",i.setData("DownloadURL",t.data("downloadurl")),t.find("img").length||i.setDragImage(t.closest("li").find("img:visible")[0],8,8)})});;
;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:analytics', location = 'viewissue/analytics.js' */
define("jira/view-issue-plugin/analytics",["jquery"],function(i){var n=i(document);n.on("click","#subtasks-bulk-operation",function(){AJS.trigger("analyticsEvent",{name:"jira.bulk.move.click.subtasks-bulk-operation"})}),n.on("click","#subtasks-open-issue-navigator",function(){AJS.trigger("analyticsEvent",{name:"jira.bulk.move.click.subtasks-open-issue-navigator"})})});;
;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:attachment-thumbnail', location = 'viewissue/attachment/attachment-thumbnail.js' */
define("jira/view-issue-plugin/attachment/attachment-thumbnail",["jira/analytics","jira/view-issue-plugin/attachment/image-element","jira/skate"],function(t,e,i){function r(t){var e=c.exec(t);if(null!==e)return e[1]}function n(t,e,i){var r=document.createEvent("CustomEvent");r.initCustomEvent(e,!0,!1,i),t.dispatchEvent(r)}function a(t,i){var r=e.create();return r.setAttribute("alt",i),r.setAttribute("src",t),r.className="hidden",r.addEventListener("error",function(){n(this,"load-error")}),r.addEventListener("load",function(){this.className="",n(this,"load-finished")}),r}var u=3,l=3e3,s=JIRA.Templates.ViewIssue,d="attachment.thumbnail.load.failed",o="attachment.thumbnail.load.retried",c=/\/file\/([\w-]+)\/image/;return i("jira-attachment-thumbnail",{type:i.type.TAG,created:function(t){t.retryCount=0,t.fallbacked=!1},attached:function(t){var e=t.querySelector("img");e&&t.removeChild(e),t.appendChild(a(t.getAttribute("url"),t.getAttribute("filename")))},events:{"load-error":function(t){t.fallbacked||(t.removeChild(e.find(t)),t.retryCount>=u?(t.applyFallback(),t.triggerFailedEvent()):(t.retryCount++,t.retryAttachment()))},"load-finished":function(t){t.retryCount>0&&t.retryCount<u&&t.triggerRetriedEvent()}},prototype:{applyFallback:function(){this.fallbacked=!0,this.getAttribute("jira-url")?this.appendChild(a(this.getAttribute("jira-url"),this.getAttribute("filename"))):this.innerHTML=s.renderAttachmentIcon({mimetype:"default"})},retryAttachment:function(){setTimeout(function(){this.appendChild(a(this.getAttribute("url"),this.getAttribute("filename")))}.bind(this),l)},triggerFailedEvent:function(){var e=r(this.getAttribute("url"));e&&t.send({name:d,properties:{fileId:e}})},triggerRetriedEvent:function(){var e=r(this.getAttribute("url"));e&&t.send({name:o,properties:{retries:this.retryCount,fileId:e}})}}})});;
;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:attachment-thumbnail', location = 'viewissue/attachment/image-element.js' */
define("jira/view-issue-plugin/attachment/image-element",{create:function(){return document.createElement("img")},find:function(e){return e.querySelector("img")}});;
;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:issuelink-init', location = 'viewissue/issuelink/issuelink-init.js' */
define("jira/view-issue-plugin/issuelink/issuelink-init",["jquery","underscore","jira/skate","jira/featureflags/feature-manager","jira/components/analytics-tracker/tracker","jira/components/linkedissue/bridge/api"],function(e,t,r,i,a,n){function s(r){return(t.isUndefined(r.which)||null===r.which||1===r.which||0===r.which&&e.browser.msie)&&!(r.metaKey||r.ctrlKey||r.shiftKey||r.altKey&&!e.browser.msie)}function u(){return e("#linked-issue-modal-root").attr("data-project-type")}function o(e,t){a.trackEvent(h,"linkedissue-modal.load.failed",{errorMessage:e,targetIssueId:t})}function l(e,t,r,i){var a=f();if(null!==a){try{a.show({issueId:e,issueKey:t,sourceProjectType:r,targetProjectType:i})}catch(t){var n=t&&t.stack||"Call to linkedIssueModalApp#show threw an exception";return o(n,e),!1}return!0}return o("Show called before linked issue modal available",e),!1}function c(e){return"true"===e.attr(y)}function d(t){var r=e(t.target),i=r.attr(j),n=r.attr(w),o=u(),d=r.attr("data-project-type"),k=s(t),f=c(r);if(o&&d){var p=k?"click":"click.newtab";if(a.trackEvent(h,p,{sourceProjectType:o,targetProjectType:d,targetIssueId:i,showModal:f}),f&&k){var y=l(i,n,o,d);if(y)return!1}}else a.trackEvent(h,"click.missing.project.types",{sourceProjectType:o,targetProjectType:d,targetIssueId:i})}function k(e){return e.find(p+"["+y+'="true"]').size()>0}function f(){if(null!==v)return v;if(null===g){var e=Date.now();g=n.loadResource(),g.then(function(t){v=t;var r=Date.now()-e;a.trackEvent(h,"linkedissue-modal.load",{loadTimeMillis:r})})}return v}if(i.isFeatureEnabled("jira.linked.issues.modal")){var h="viewissue.issuelink",p="a.linked-issue",y="data-show-modal",w="data-issue-key",j="data-issue-id",v=null,g=null;return r("js-linkingmodule-container-skate-target",{type:r.type.CLASSNAME,attached:function(t){var r=e(t);r.on("click",p,d),k(r)&&f()}}),{shouldLoadLinkedIssueModal:k,showLinkedIssueModal:l,handleIssueLinkClicked:d}}});;
;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:initialiser', location = 'viewissue/initViewIssue.js' */
require(["jira/view-issue-plugin/attachment/attachment-element","jira/view-issue-plugin/init-draggable-attachment","jira/view-issue-plugin/analytics","jira/view-issue-plugin/attachment/attachment-thumbnail","jira/view-issue-plugin/issuelink/issuelink-init"]);;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-edit-issue-bootstrap', location = 'js/init/edit-bootstrap-wrm.js' */
require(["jquery","underscore","wrm/require","quick-edit/util/loading-indicator","jira/ajs/keyboardshortcut/keyboard-shortcut-toggle"],function(i,e,t,n,r){var a,u=function(){r.disable(),n.showLoadingIndicator()},c=function(){n.hideLoadingIndicator(!0),r.enable()},o=function(e){e.preventDefault(),u();var n="wr!com.atlassian.jira.jira-quick-edit-plugin:quick-edit-issue",o=t([n]);o.then(function(){var t=require("quick-edit/init/edit");a||(a=t.initDialog()),a._events.trigger.simpleClick.call(a,e,i(e.target)),r.enable()},function(){c()})};i(document).delegate(".issueaction-edit-issue","click",o)});;
;
/* module-key = 'jira.webresources:attach-screenshot-resources', location = '/includes/jira/issue/attachScreenshot.js' */
AJS.namespace("JIRA.Issue.AttachScreenshot"),function(){"use strict";AJS.EventQueue=AJS.EventQueue||[],AJS.$(document).on("click","#attach-screenshot",function(){AJS.EventQueue.push({name:"attach.screenshot.display",properties:{}})})}();;
;
/* module-key = 'com.atlassian.labs.hipchat.hipchat-for-jira-plugin:hipchat-viewissue-panel-resources-init', location = 'js/feature/issuepanel/issuepanel-loader.js' */
AJS.toInit(function(){var a=WRM.data.claim("com.atlassian.labs.hipchat.hipchat-for-jira-plugin:hipchat-viewissue-panel-resources-init.user-logged-in-data-provider");if(a){WRM.require("wrc!com.atlassian.labs.hipchat.hipchat-for-jira-plugin:hipchat-viewissue-panel-resources")}});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:create-linked-issue-init', location = '/js/create-linked-issue/create-linked-issue-init.js' */
require(["jquery","wrm/require","quick-edit/util/loading-indicator"],function(i,e,n){var t=function(){n.showLoadingIndicator()},a=function(){n.hideLoadingIndicator(!0)},r=!1;i(document).on("click",".issueaction-create-linked-issue",function(i){i.preventDefault(),r||(r=!0,t(),e(["wr!com.atlassian.jira.jira-quick-edit-plugin:create-linked-issue"]).done(function(){var i=require("quick-edit/create-linked-issue/create-linked-issue-form-factory");i().asDialog({id:"create-linked-issue-dialog",windowTitle:"Create linked issue"}).show(),r=!1}).fail(function(){a(),r=!1}))})});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:import-issues', location = 'js/form/import-issues/import-issues.js' */
define("quick-edit/form/import-issues",[],function(){"use strict";var t=function(){},e=AJS.contextPath();return t.setForm=function(t){this.form=t},t.bindImportIssueUrl=function(){var i=t.getImportIssue();i.click(function(t){const i="/secure/BulkCreateSetupPage!default.jspa?externalSystem=com.atlassian.jira.plugins.jim-plugin:bulkCreateCsv";window.location=e+i})},t.getImportIssue=function(){return this.form.$element.find("#import-issues")},t});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form-templates', location = 'soy/quickform.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.QuickForm&&(JIRA.Templates.QuickForm={}),JIRA.Templates.QuickForm.field=function(e,i){return""+soy.$$filterNoAutoescape(e.editHtml)},JIRA.Templates.QuickForm.fieldPicker=function(e,i){return'<div class="qf-picker"><div class="qf-picker-header"><dl><dt>'+soy.$$escapeHtml("Show Fields:")+"</dt>"+(e.isConfigurable?'<dd><a class="qf-unconfigurable" href="#">'+soy.$$escapeHtml("All")+"</a></dd><dd>"+soy.$$escapeHtml("Custom")+"</dd>":"<dd>"+soy.$$escapeHtml("All")+'</dd><dd><a class="qf-configurable" href="#">'+soy.$$escapeHtml("Custom")+"</a></dd>")+'<div class="whereismycf-qfpicker-link" id="qf-picker-custom-link"/></dl></div><div class="qf-picker-content '+(e.isConfigurable?"":"qf-picker-unconfigurable")+'"></div><div class="qf-picker-footer"></div></div>'},JIRA.Templates.QuickForm.configurablePickerButton=function(e,i){return'<a title="'+soy.$$escapeHtml(e.label)+'" data-field-id="'+soy.$$escapeHtml(e.fieldId)+'" class="qf-picker-button'+(e.isActive?" qf-active":"")+'" href="#">'+soy.$$escapeHtml(e.label)+(e.required?'<span class="aui-icon icon-required"></span>':"")+"</a>"},JIRA.Templates.QuickForm.unconfigurablePickerButton=function(e,i){return'<span title="'+soy.$$escapeHtml(e.label)+'" data-field-id="'+soy.$$escapeHtml(e.fieldId)+'" class="qf-picker-button'+(e.isActive?" qf-active":"")+'" href="#">'+soy.$$escapeHtml(e.label)+(e.required?'<span class="aui-icon icon-required"></span>':"")+"</span>"},JIRA.Templates.QuickForm.errorMessage=function(e,i){return""+aui.message.error({closeable:"true",content:e.message})};;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form-templates', location = 'soy/issue.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.Issue&&(JIRA.Templates.Issue={}),JIRA.Templates.Issue.editIssueError=function(e,s){return"<h2>"+soy.$$escapeHtml("Edit issue")+'</h2><div class="form-body">'+soy.$$filterNoAutoescape(e.errorHtml)+"</div>"},JIRA.Templates.Issue.editIssueForm=function(e,s){return'<form action="#" name="jiraform" class="aui"><h2>'+(e.showFieldConfigurationToolBar?JIRA.Templates.Issue.fieldConfigurationToolbar(null):"")+soy.$$filterNoAutoescape(e.title)+'</h2><div class="form-body"><input type="hidden" name="id" value="'+soy.$$escapeHtml(e.issueId)+'" /><input type="hidden" name="atl_token" value="'+soy.$$escapeHtml(e.atlToken)+'" /><input type="hidden" name="formToken" value="'+soy.$$escapeHtml(e.formToken)+'" /><input type="hidden" name="pid" value="'+soy.$$escapeHtml(e.pid)+'" /><div class="content">'+(e.fieldsHtml?soy.$$filterNoAutoescape(e.fieldsHtml):"")+(e.commentField?soy.$$filterNoAutoescape(e.commentField.editHtml):"")+'<!-- fields inserted here via javascript --></div></div><div class="buttons-container form-footer"><div class="buttons"><input accesskey="'+soy.$$escapeHtml("s")+'" title="'+soy.$$escapeHtml(AJS.format("Press {1}+{0} to submit this form","s",e.modifierKey))+'" class="aui-button aui-button-primary" id="edit-issue-submit" name="Edit" type="submit" value="'+soy.$$escapeHtml("Update")+'" /><a href="#" accesskey="'+soy.$$escapeHtml("`")+'" title="'+soy.$$escapeHtml(AJS.format("Press {1}+{0} to cancel","`",e.modifierKey))+'" class="cancel">'+soy.$$escapeHtml("Cancel")+"</a></div></div></form>"},JIRA.Templates.Issue.fieldConfigurationToolbar=function(e,s){return""+aui.toolbar2.toolbar2({extraClasses:"qf-form-operations",content:""+aui.toolbar2.item({item:"secondary",content:""+aui.buttons.button({text:" "+soy.$$escapeHtml("Configure fields"),id:"qf-field-picker-trigger",extraClasses:"toolbar-trigger",iconText:"Configure fields",iconType:"aui",iconClass:"aui-icon-small aui-iconfont-configure"})})})},JIRA.Templates.Issue.issueFields=function(e,s){var t="";if(e.hasTabs){t+='<div class="aui-tabs horizontal-tabs" id="horizontal"><ul class="tabs-menu">';for(var i=e.tabs,o=i.length,a=0;a<o;a++){var l=i[a];t+=l?'<li class="menu-item '+(l.isFirst?"first active-tab":"")+' "><a href="#tab-'+soy.$$escapeHtml(l.position)+'" ><strong>'+soy.$$escapeHtml(l.label)+"</strong></a></li>":""}t+="</ul>";for(var n=e.tabs,r=n.length,c=0;c<r;c++){var d=n[c];if(d){if(t+='<div class="tabs-pane '+(d.isFirst?"active-pane":"")+'" id="tab-'+soy.$$escapeHtml(d.position)+'">',e.simpleCreate)t+=JIRA.Templates.Issue.issueFieldSection({tabPosition:d.position,fields:d.fields});else for(var u=d.fields,m=u.length,f=0;f<m;f++){var p=u[f];t+=p.editHtml?soy.$$filterNoAutoescape(p.editHtml):""}t+="</div>"}}t+="</div>"}else if(e.simpleCreate)t+=JIRA.Templates.Issue.issueFieldSection({tabPosition:0,fields:e.fields});else for(var $=e.fields,y=$.length,I=0;I<y;I++){var v=$[I];t+=v.editHtml?soy.$$filterNoAutoescape(v.editHtml):""}return t},JIRA.Templates.Issue.issueFieldSection=function(e,s){return""+JIRA.Templates.Issue.issueFieldsContentPrimary({fields:e.fields.primary})+(e.fields.secondary.length>0?JIRA.Templates.Issue.issueFieldsContentSecondary({tabPosition:e.tabPosition,fields:e.fields.secondary}):"")},JIRA.Templates.Issue.issueFieldsContentPrimary=function(e,s){for(var t='<div class="issue-field-section-primary">',i=e.fields,o=i.length,a=0;a<o;a++){var l=i[a];t+=l.editHtml?soy.$$filterNoAutoescape(l.editHtml):""}return t+="</div>"},JIRA.Templates.Issue.issueFieldsContentSecondary=function(e,s){for(var t='<div style="text-align: center"><a id="issue-field-section-secondary-show-trigger" data-replace-text="'+soy.$$escapeHtml("Show less")+'" class="aui-expander-trigger" aria-controls="issue-field-section-secondary-'+soy.$$escapeHtml(e.tabPosition)+'">'+soy.$$escapeHtml("Show more")+'</a></div><div id="issue-field-section-secondary-'+soy.$$escapeHtml(e.tabPosition)+'" class="aui-expander-content issue-field-section-secondary">',i=e.fields,o=i.length,a=0;a<o;a++){var l=i[a];t+=l.editHtml?soy.$$filterNoAutoescape(l.editHtml):""}return t+="</div>"},JIRA.Templates.Issue.createIssueForm=function(e,s){var t='<form name="jiraform" action="#" class="aui"><h2>'+(e.showFieldConfigurationToolBar?JIRA.Templates.Issue.fieldConfigurationToolbar(null):"")+(e.isImportIssueButtonEnabled?'<button class= "aui-button" id="import-issues">'+soy.$$escapeHtml("Import issues")+"</button>":"")+soy.$$escapeHtml(e.title)+'</h2><div class="form-body">';if(e.issueSetupFields){t+='<div class="issue-setup-fields">';for(var i=e.issueSetupFields,o=i.length,a=0;a<o;a++){var l=i[a];t+='<div class="qf-field qf-field-'+soy.$$escapeHtml(l.id)+' qf-required" data-field-id="'+soy.$$escapeHtml(l.id)+'">'+soy.$$filterNoAutoescape(l.editHtml)+"</div>"}t+="</div>"}return t+=(e.parentIssueId?'<input type="hidden" name="parentIssueId" value="'+soy.$$escapeHtml(e.parentIssueId)+'" />':"")+'<input type="hidden" name="atl_token" value="'+soy.$$escapeHtml(e.atlToken)+'" /><input type="hidden" name="formToken" value="'+soy.$$escapeHtml(e.formToken)+'" /><div class="content">'+(e.fieldsHtml?soy.$$filterNoAutoescape(e.fieldsHtml):"")+'<!-- fields inserted here via javascript --></div></div><div class="buttons-container form-footer"><div class="buttons">'+(e.disallowCreateAnother?"":'<label for="qf-create-another" class="qf-create-another"><input id="qf-create-another" type="checkbox" '+(e.multipleMode?'checked="checked"':"")+" />"+soy.$$escapeHtml("Create another")+"</label>")+'<input accesskey="'+soy.$$escapeHtml("s")+'" title="'+soy.$$escapeHtml(AJS.format("Press {1}+{0} to submit this form","s",e.modifierKey))+'" class="aui-button aui-button-primary" id="create-issue-submit" name="Edit" type="submit" value="'+soy.$$escapeHtml("Create")+'" /><a href="#" accesskey="'+soy.$$escapeHtml("`")+'" title="'+soy.$$escapeHtml(AJS.format("Press {1}+{0} to cancel","`",e.modifierKey))+'" class="cancel">'+soy.$$escapeHtml("Cancel")+"</a></div></div></form>"},JIRA.Templates.Issue.checkBoxField=function(e,s){return'<fieldset class="group"><legend><span></span></legend><div class="checkbox"><input class="checkbox" type="checkbox" name="'+soy.$$escapeHtml(e.name)+'" id="'+soy.$$escapeHtml(e.name)+'" value="true" '+(e.checked?"checked":"")+'><label for="'+soy.$$escapeHtml(e.name)+'">'+soy.$$escapeHtml(e.label)+"</label></div></fieldset>"},JIRA.Templates.Issue.createIssueError=function(e,s){return"<h2>"+soy.$$escapeHtml("Create issue")+'</h2><div class="form-footer">'+soy.$$filterNoAutoescape(e.errorHtml)+"</div>"},JIRA.Templates.Issue.undealtErrors=function(e,s){for(var t="<div>"+soy.$$escapeHtml("There were some errors when trying to create this issue")+"</div><ul>",i=e.errors,o=i.length,a=0;a<o;a++){var l=i[a];t+="<li>"+soy.$$escapeHtml(l)+"</li>"}return t+="</ul>"};;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/templates/form.js' */
define("quick-edit/templates/form",function(){return JIRA.Templates.QuickForm});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/templates/issue.js' */
define("quick-edit/templates/issue",function(){return JIRA.Templates.Issue});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/util/extension-mixin.js' */
define("quick-edit/util/extension-mixin",["jquery"],function(e){"use strict";var t=function(t,i,n){return e(this).trigger(t,i),n&&this.globalEventNamespaces&&e.each(this.globalEventNamespaces,function(n,r){e(document).trigger(r+"."+t,i)}),this};return{triggerEvent:t}});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/util/class.js' */
define("quick-edit/util/class",["quick-edit/util/extension-mixin","jira/lib/class"],function(i,e){return e.extend(i)});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/util/control.js' */
define("quick-edit/util/control",["quick-edit/util/extension-mixin","jira/ajs/control"],function(i,n){return n.extend(i)});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/util/dialog.js' */
define("quick-edit/util/dialog",["jira/dialog/dialog","jira/issue","jira/issuenavigator/issue-navigator"],function(e,i,t){"use strict";var u=JIRA.Issues,s=function(i){var t=e.current,u=t.$activeTrigger;if(u)return u.attr(i)},r=function(){var e=s("data-issueKey");return!e&&i.getIssueKey()&&(e=i.getIssueKey()),!e&&t.getSelectedIssueKey()&&(e=t.getSelectedIssueKey()),!e&&u&&(e=u.Api.getSelectedIssueKey()),e},a=function(e){var i=r();return i?e+": "+i:e},g=function(){return u||t.isNavigator()||s("data-issueKey")};return{getActionIssueKey:r,getAttrFromActiveTrigger:s,getIssueActionTitle:a,shouldShowIssueKeyInTitle:g}}),AJS.namespace("JIRA.Dialog.getActionIssueKey",null,require("quick-edit/util/dialog").getActionIssueKey),AJS.namespace("JIRA.Dialog.getAttrFromActiveTrigger",null,require("quick-edit/util/dialog").getAttrFromActiveTrigger),AJS.namespace("JIRA.Dialog.getIssueActionTitle",null,require("quick-edit/util/dialog").getIssueActionTitle),AJS.namespace("JIRA.Dialog.shouldShowIssueKeyInTitle",null,require("quick-edit/util/dialog").shouldShowIssueKeyInTitle);;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/util/jira.js' */
define("quick-edit/util/jira",["quick-edit/templates/issue","jira/util/data/meta","aui/message","jquery"],function(e,r,i,a){"use strict";var t=function(e){var r,i,a,t=e.closest(".tabs-pane");t.length&&(i=t.closest(".aui-tabs"),r=t.attr("id"),a=i.find("a[href='#"+r+"']"),a.click())},s=function(e,r){n("error",e,AJS.escapeHtml(r),!1)},o=function(e,r){n("error",e,r,!1)},u=function(r,i){var s,u=[];a.each(i,function(e,i){var t,o,n=r.find(":input[name='"+e+"']").last();1===n.length?(s||(s=n),o=a("<div class='error' />").attr("data-field",e).text(i),t=n.closest(".field-group, .group"),t.find(".error").remove(),t.append(o)):0===n.length&&u.push(i)}),u.length>0&&o(r,e.undealtErrors({errors:u})),t(r.find(".error:first")),s&&s.focus()},n=function(e,r,t,s){var o=r.find(".aui-message-context");o.length||(o=a("<div class='aui-message-context' />"),o.prependTo(r.find(".form-body"))),o.empty(),i[e](o,{shadowed:!1,closeable:s,body:t})},c=function(e,r){return n("success",e,r,!0)},l=function(e){var r=a(e);return{html:r.not("script"),scripts:r.filter("script")}},p=function(e){return a.isFunction(e)?e:function(){return e}},m=function(){r.get("keyboard-accesskey-modifier")};return{activateTabWithChild:t,applyErrorMessageToForm:s,applyErrorMessageWithHTMLToForm:o,applyErrorsToForm:u,applyMessageToForm:n,applySuccessMessageToForm:c,getModifierKey:m,extractScripts:l,makePropertyFunc:p}}),AJS.namespace("JIRA.activateTabWithChild",null,require("quick-edit/util/jira").activateTabWithChild),AJS.namespace("JIRA.applyErrorMessageWithHTMLToForm",null,require("quick-edit/util/jira").applyErrorMessageWithHTMLToForm),AJS.namespace("JIRA.applyErrorMessageToForm",null,require("quick-edit/util/jira").applyErrorMessageToForm),AJS.namespace("JIRA.applyErrorsToForm",null,require("quick-edit/util/jira").applyErrorsToForm),AJS.namespace("JIRA.applyMessageToForm",null,require("quick-edit/util/jira").applyMessageToForm),AJS.namespace("JIRA.applySuccessMessageToForm",null,require("quick-edit/util/jira").applySuccessMessageToForm),AJS.namespace("JIRA.extractScripts",null,require("quick-edit/util/jira").extractScripts),AJS.namespace("JIRA.makePropertyFunc",null,require("quick-edit/util/jira").makePropertyFunc);;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/field/configurable.js' */
define("quick-edit/form/field/configurable",["quick-edit/util/jira","quick-edit/util/control","quick-edit/templates/form","jira/util/events","jira/util/events/types","jquery"],function(e,t,i,r,n,s){"use strict";return t.extend({init:function(e){this.descriptor=e,this.$element=s("<div />").attr("id","qf-field-"+this.getId())},focus:function(){this.$element.find(":input:first").focus()},highlight:function(){var e=this;this.$element.css("backgroundColor","#fff").animate({backgroundColor:"lightyellow"},function(){e.$element.animate({backgroundColor:"#fff"},function(){e.$element.css("backgroundColor","")})})},getLabel:function(){return this.descriptor.label},getId:function(){return this.descriptor.id},activate:function(e){var t;this.active=!0,this.$element.addClass("qf-field-active").show(),this.$element.find("textarea").trigger("refreshInputHeight"),e||(t=this.render(),this.$element.append(t.scripts),this.focus(),r.trigger(n.NEW_CONTENT_ADDED,[this.$element]),this.$element.scrollIntoView(),this.triggerEvent("activated"))},hasVisibilityFeature:function(){return!!this.descriptor.hasVisibilityFeature},hasRetainFeature:function(){return!!this.descriptor.hasRetainFeature},isActive:function(){return this.active},disable:function(e){this.render(),this.active=!1,this.$element.removeClass("qf-field-active").hide(),e||this.triggerEvent("disabled")},render:function(){var t=i.field(this.descriptor),r=e.extractScripts(t);return this.$element.html(r.html).addClass("qf-field").data("model",this),{element:this.$element,scripts:r.scripts}}})}),AJS.namespace("JIRA.Forms.ConfigurableField",null,require("quick-edit/form/field/configurable"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/model/model.js' */
define("quick-edit/form/model",["quick-edit/util/class","jira/util/data/meta","jira/util/objects","jira/ajs/ajax/smart-ajax","jquery","jira/featureflags/feature-manager"],function(e,i,t,r,s,n){"use strict";return e.extend({init:function(e){this.userFieldsResource=e.userFieldsResource,this.fieldsResource=e.fieldsResource,this.retainedFields=[],this._hasRetainFeature=!1,this._hasVisibilityFeature=!0},getFieldsResource:function(){return this.fieldsResource},getAtlToken:function(){return this.atlToken},getPid:function(){return this.pid},isSimplified:function(){return this.simplified},getFormToken:function(){return this.formToken},getActiveFieldIds:function(){return this.getUserFields()},addFieldToRetainValue:function(e){if(!this._hasRetainFeature)throw new Error("getFieldsWithRetainedValues: cannot be called. Must enable retain feature first by specifiying [_hasRetainFeature=true]");this.removeFieldToRetainValue(e),this.retainedFields.push(e)},serializePreFilledFields:function(e){return s.param(s.extend(e,{preFillFields:!0}))},clearRetainedFields:function(){this.retainedFields=[]},removeFieldToRetainValue:function(e){if(!this._hasRetainFeature)throw new Error("getFieldsWithRetainedValues: cannot be called. Must enable retain feature first by specifiying [_hasRetainFeature=true]");var i=s.inArray(e,this.retainedFields);i!=-1&&this.retainedFields.splice(i,1)},getFieldsWithRetainedValues:function(){if(this._hasRetainFeature)return this.retainedFields;throw new Error("getFieldsWithRetainedValues: cannot be called. Must enable retain feature first by specifiying [_hasRetainFeature=true]")},hasRetainedValue:function(e){if(this._hasRetainFeature)return s.inArray(e.id,this.retainedFields)!==-1;throw new Error("HasRetainedValue: cannot be called. Must enable retain feature first by specifiying [_hasRetainFeature=true]")},refresh:function(e){var i,t=this,a=s.Deferred();e&&(i=e+"&retainValues=true"),!i&&this.preFilledFields&&(i=this.serializePreFilledFields(this.preFilledFields));var u=n.isFeatureEnabled("jira.simplify.issue.create");return u&&(null==i?i="simple="+u:i+="&simple="+u),r.makeRequest({url:this.getFieldsResource(),type:"POST",data:i,success:function(e){t._update(e)},complete:function(e,i,r){r.successful?a.resolveWith(t,arguments):(t.triggerEvent("serverError",[r]),a.rejectWith(t,[r]))}}),a.promise()},_update:function(e){this.atlToken=e.atl_token,this.formToken=e.formToken,this.pid=e.pid,this.simplified=e.simplified,this.fields=e.fields,this.sortedTabs=e.sortedTabs,this.userPreferences=e.userPreferences},setFields:function(e){this.fields=e},getConfigurableFields:function(){return this.getFields()},getFields:function(){var e=this,i=s.Deferred();return this.fields?i.resolve(e.fields):this.refresh().done(function(){i.resolve(e.fields)}),i.promise()},_mungeTabs:function(e){var i=0,r=[];return s.each(e,function(e,s){i++,s.tab&&(r[s.tab.position]||(r[s.tab.position]=t.copyObject(s.tab)),0===s.tab.position&&(r[s.tab.position].isFirst=!0),r[s.tab.position].fields||(r[s.tab.position].fields=[]),r[s.tab.position].fields.push(t.copyObject(s)))}),r},getTabs:function(){var e=this,i=s.Deferred();return this.getFields().done(function(t){var r=e._mungeTabs(t);i.resolve(r)}),i.promise()},getSortedTabs:function(){var e=s.Deferred();return this.sortedTabs?e.resolve(this.sortedTabs):this.refresh().done(function(){e.resolve(this.sortedTabs)}),e.promise()},getUserFields:function(){var e=this,i=s.Deferred();return this.userPreferences?i.resolve(e.userPreferences.fields):this.refresh().done(function(){i.resolve(e.userPreferences.fields)}),i.promise()},setUserFields:function(e){var i={};return i.fields=e,this.updateUserPrefs(i)},hasRetainFeature:function(){return!!this._hasRetainFeature},hasVisibilityFeature:function(){return!!this._hasVisibilityFeature},getUseConfigurableForm:function(){var e=this,i=s.Deferred();return this.userPreferences?i.resolve(e.userPreferences.useQuickForm):this.refresh().done(function(){i.resolve(e.userPreferences.useQuickForm)}).fail(function(){i.reject()}),i.promise()},setUseConfigurableForm:function(e){var i={};return i.useQuickForm=e,this.updateUserPrefs(i)},updateUserPrefs:function(e){var t=s.Deferred(),n=this;return""===i.get("remote-user")?(t.done(),t.promise()):this.userPreferences?(e.fields||(e.fields=this.userPreferences.fields),"undefined"==typeof e.showWelcomeScreen&&(e.showWelcomeScreen=this.userPreferences.showWelcomeScreen),"undefined"==typeof e.useQuickForm&&(e.useQuickForm=this.userPreferences.useQuickForm),r.makeRequest({url:this.userFieldsResource,type:"POST",data:JSON.stringify(e),dataType:"json",contentType:"application/json",complete:function(i,t,r){r.successful?n.userPreferences=e:n.triggerEvent("serverError",[r])}})):(t.reject(),t.promise())}})}),AJS.namespace("JIRA.Forms.Model",null,require("quick-edit/form/model"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/model/create-issue.js' */
define("quick-edit/form/model/create-issue",["quick-edit/form/model","wrm/context-path","underscore","jquery"],function(e,i,t,s){"use strict";return e.extend({DEFAULT_NON_RETAINED_FIELDS:["summary","description","timetracking","timetracking_originalestimate","timetracking_remainingestimate","worklog","worklog_startDate","worklog_timeLogged","worklog_newEstimate","worklog_adjustmentAmount","attachment"],CUSTOMFIELD_PATTERN:/^(customfield_(\d+))(?:|\:(?:\d+))$/,TIMETRACKING_PATTERN:/^timetracking_/,init:function(e){e=e||{},this.userFieldsResource=i()+"/rest/quickedit/1.0/userpreferences/create",this._hasRetainFeature=!0,this._hasVisibilityFeature=!0,this.retainedFields=[],this.dirtyFields=[],this.initIssueType=e.issueType,this.initProjectId=e.projectId,this.parentIssueId=e.parentIssueId,this.preFilledFields=e.fields,this.nonRetainedFields=this.DEFAULT_NON_RETAINED_FIELDS,e.nonRetainedFields&&(this.nonRetainedFields=t.union(e.nonRetainedFields,this.DEFAULT_NON_RETAINED_FIELDS))},getParentIssueId:function(){return this.parentIssueId},isInMultipleMode:function(){return this.multipleMode},setIsMultipleMode:function(e){this.multipleMode=e},getActiveFieldIds:function(){var e=this,i=s.Deferred(),t=[];return this.getUserFields().done(function(n){s.each(n,function(e,i){t.push(i)}),e.getRequiredFields().done(function(e){s.each(e,function(e,i){s.inArray(i.id,t)===-1&&t.push(i.id)}),i.resolve(t)})}),i.promise()},hasVisibilityFeature:function(e){return!e.required},getFieldsResource:function(){var e=i()+"/secure/QuickCreateIssue!default.jspa?decorator=none";return this.parentIssueId?e+"&parentIssueId="+this.parentIssueId:(this.initIssueType&&(e=e+"&issuetype="+this.initIssueType,delete this.initIssueType),this.initProjectId&&(e=e+"&pid="+this.initProjectId,delete this.initProjectId),e)},addFieldToRetainValue:function(e,i){var s=!t.contains(this.nonRetainedFields,e),n=null!==e.match(/^filetoconvert/);(s||n||i)&&this._super(e)},getRequiredFields:function(){var e=s.Deferred(),i=[];return this.getFields().done(function(t){s.each(t,function(e,t){t.required&&i.push(t)}),e.resolve(i)}),e.promise()},getConfigurableFields:function(){var e=s.Deferred(),i=[];return this.getFields().done(function(t){s.each(t,function(e,t){"project"!==t.id&&"issuetype"!==t.id&&i.push(t)}),e.resolve(i)}),e.promise()},getIssueSetupFields:function(){var e=s.Deferred(),i=[];return this.getFields().done(function(t){s.each(t,function(e,t){"project"!==t.id&&"issuetype"!==t.id||i.push(t)}),e.resolve(i)}),e.promise()},markFieldAsDirty:function(e){e=this.normalizeCustomFieldId(e),this.fieldIsDirty(e)||this.dirtyFields.push(e)},fieldIsDirty:function(e){return t.contains(this.dirtyFields,e)},isCustomFieldId:function(e){return e&&!!e.match(this.CUSTOMFIELD_PATTERN)},isTimetrackingFieldId:function(e){return e&&!!e.match(this.TIMETRACKING_PATTERN)},normalizeCustomFieldId:function(e){return this.isCustomFieldId(e)?e.match(this.CUSTOMFIELD_PATTERN)[1]:e},normalizeFieldParam:function(e,i){return"filetoconvert"==e?e+"-"+i:this.isCustomFieldId(e)?this.normalizeCustomFieldId(e):this.isTimetrackingFieldId(e)?"timetracking":e}})}),AJS.namespace("JIRA.Forms.CreateIssueModel",null,require("quick-edit/form/model/create-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/model/edit-issue.js' */
define("quick-edit/form/model/edit-issue",["quick-edit/form/model","underscore","jquery"],function(e,i,r){"use strict";return e.extend({getUnconfigurableTabs:function(){var e=this,i=r.Deferred();return e.getTabs().done(function(e){var n=e.slice(0);n[0].fields=n[0].fields.slice(0),r.each(n[0].fields,function(e,i){if("comment"===i.id)return n[0].fields.splice(e,1),!1}),i.resolve(n)}),i.promise()},getCommentField:function(){var e=r.Deferred();return this.getFields().done(function(i){r.each(i,function(i,r){"comment"===r.id&&e.resolve(r)}),e.reject()}),e.promise()}})}),AJS.namespace("JIRA.Forms.EditIssueModel",null,require("quick-edit/form/model/edit-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/model/factory/edit-issue.js' */
define("quick-edit/form/model/factory/edit-issue",["quick-edit/form/model/edit-issue","wrm/context-path"],function(e,i){"use strict";return function(s){return new e({fieldsResource:i()+"/secure/QuickEditIssue!default.jspa?issueId="+s+"&decorator=none",userFieldsResource:i()+"/rest/quickedit/1.0/userpreferences/edit"})}}),AJS.namespace("JIRA.Forms.Model.createQuickEditIssueModel",null,require("quick-edit/form/model/factory/edit-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/helper/helper.js' */
define("quick-edit/form/helper/helper",["quick-edit/util/jira","quick-edit/form/model","quick-edit/util/class","jira/jquery/plugins/isdirty","jira/util/events","jira/dialog/dialog","jira/featureflags/feature-manager","underscore","jquery"],function(e,i,t,r,s,n,o,a,u){"use strict";var d=AJS.escapeHTML,l=function(e){if(e&&e.fields&&e.fields.issuetype&&e.fields.issuetype.subtask){const i=e.fields.issuetype,t={id:e.id,issueLink:contextPath+"/browse/"+e.key,issueSummary:e.fields.summary,issueTypeIconUrl:i.iconUrl,issueTypeId:i.id},r={type:"SUBTASK_CREATED",payload:{subtask:t}},n=e.fields.parent.key;s.trigger("modify-issue-view-via-external-action",{issueKey:n,externalAction:r})}};return t.extend({init:function(e){this.form=e},handleSubmitSuccess:function(i){function t(e,i,t){var r='<a href="'+t+'">'+e+" - "+d(i)+"</a>";return AJS.format("Issue {0} has been successfully created",r)}var r=this,s=this.form.$element.find("#summary").val();i.summary=s,this.form.triggerEvent("submitted",[i,this]),this.form.triggerEvent("issueCreated",[i,this],!0),r.form.model.isInMultipleMode()?this.form.render().done(function(){var n=t(i.issueKey,s,contextPath+"/browse/"+i.issueKey);e.applySuccessMessageToForm(r.form.getForm(),n)}):this.form.triggerEvent("sessionComplete"),l(i.createdIssueDetails)},getCreateAnotherCheckbox:function(){return this.form.$element.find("#qf-create-another")},isInMultipleMode:function(){return this.getCreateAnotherCheckbox().is(":checked")},getProjectField:function(){return this.form.$element.find(".issue-setup-fields #project")},getIssueTypeField:function(){return this.form.$element.find(".issue-setup-fields #issuetype")},serializeForToggle:function(e){if(!this.form.model.hasRetainFeature())return this.form.getForm().serialize();var i=this.form.model.prevActiveFields||[],t=this.form.getForm().serializeArray(),r=function(e){return this.form.model.normalizeFieldParam(e.name,e.value)}.bind(this),s=this.form.getActiveFieldIds(),n=u.grep(t,function(e){return u.inArray(r(e),s)!==-1}),o=u.grep(i,function(e){return u.inArray(r(e),s)===-1}),a=u.map(o,function(e){return r(e)}),d=u.merge(n,o),l=u.merge(s,a);this.form.model.prevActiveFields=u.extend(!0,[],d),e&&(l=this.executeProjectChangedSecuritySettingAction(l)),l=l.filter(function(e){return!this.form.model.isCustomFieldId(e)||this.form.model.fieldIsDirty(e)}.bind(this));var f=u.merge([{name:"retainValues",value:!0}],d);return u.each(t,function(e,i){"pid"!==i.name&&"issuetype"!==i.name||f.push(i)}),f.push({name:"toggle",value:!0}),u.each(l,function(e,i){f.push({name:"fieldsToRetain",value:i})}),f.push({name:"formToken",value:this.form.model.getFormToken()}),u.param(f)},executeProjectChangedSecuritySettingAction:function(e){return a.reject(e,function(e){return"security"===e})},prepareFieldsToRetain:function(e,i){return u.each(e,function(e,t){i.push({name:"fieldsToRetain",value:t})}),i},setIssueType:function(){var e=this,i=this.serializeForToggle();this.form.invalidateFieldsCache(),this.form.disable(),this.form.render(i).done(function(){e.form.enable()})},setProjectId:function(){var e=this,i=this.serializeForToggle(!0);this.form.invalidateFieldsCache(),this.form.disable(),this.form.render(i).done(function(){e.form.enable()})},saveFormDirtyStatus:function(){this.form.isDirty=this.form.getForm().isDirty()},restoreFormDirtyStatus:function(){this.form.isDirty&&this.form.getForm().addClass(r.ClassNames.BY_DEFAULT)},decorate:function(){var e=this;this.getProjectField().change(function(){e.saveFormDirtyStatus(),s.trigger("dialogBeforeContentChange",["projectId",this.value,n.current.options.id]),e.setProjectId(this.value)}),this.getIssueTypeField().change(function(){e.saveFormDirtyStatus(),s.trigger("dialogBeforeContentChange",["issueType",this.value,n.current.options.id]),e.setIssueType(this.value)}),this.getCreateAnotherCheckbox().change(function(){e.form.model.setIsMultipleMode(this.checked)})},decorateFields:function(){var e=this;this.form.$element.find('*[id^="customfield_"]').off("change.customField").on("change.customField",function(){e.form.model.isCustomFieldId(this.name)&&e.form.model.markFieldAsDirty(this.name)})},sendQuickEditAnalyticsEvent:function(e){var i,t,r=e.instance,s=e.name,n=r.model.fields.map(function(e){return{id:e.id,required:e.required}});e.field&&(t={id:e.field.descriptor.id,required:e.field.descriptor.required}),r.model.getActiveFieldIds().then(function(r){i=n.filter(function(e){return r.some(function(i){return i===e.id})}),AJS.trigger("analyticsEvent",{name:s,data:{allFieldsShown:e.allFieldsShown,field:JSON.stringify(t),allFields:JSON.stringify(n),displayedFields:e.allFieldsShown?JSON.stringify(n):JSON.stringify(i)}})})}})}),AJS.namespace("JIRA.Forms.CreateIssueHelper",null,require("quick-edit/form/helper/helper"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/abstract/abstract.js' */
define("quick-edit/form/abstract",["quick-edit/util/jira","quick-edit/util/control","jira/ajs/ajax/smart-ajax","jira/dialog/form-dialog","jira/dialog/dialog","jira/util/events/types","jira/util/events","jira/util/browser","jquery","underscore"],function(e,t,i,r,n,s,a,o,d,l){"use strict";var u=AJS.extractBodyFromResponse,c=AJS.log;return t.extend({submit:function(){var e=this;return e.getForm().addClass("submitting"),this.triggerEvent("submitting",[],!0),i.makeRequest({url:this.getAction(),type:"POST",beforeSend:function(){e.disable()},data:this.serialize(),complete:function(t,i,n){var s=n.data;if(e.getForm().find(".aui-message-context").remove(),e.enable(),e.getForm().find(".error").remove(),n.successful)if(e.performAnalytics(),s&&s.fields&&(e.invalidateFieldsCache(),e.model.setFields(s.fields)),"string"==typeof s){var a=d(u(s)),o=a.find("#atl_token").val();o&&(e.model.atlToken=o,e.getForm().find('input[name="atl_token"]').val(o));var l=new r({offsetTarget:"body",content:a});l._handleServerSuccess=function(){l.prev&&(l.prev._removeStackState(),l.prev._resetWindowTitle(),l._removeStackState()),l.hide(),e.triggerEvent("sessionComplete",[],!0),e.handleSubmitSuccess()},l._handleServerError=function(t){l.hide(),e.handleSubmitError(t)},l.show()}else e.handleSubmitSuccess(n.data);else e.handleSubmitError(t);e.getForm().removeClass("submitting")}})},disable:function(){this.getForm().find(":input").attr("disabled","disabled").trigger("disable"),this.getForm().find(":submit").attr("disabled","disabled")},enable:function(){this.getForm().find(":input").removeAttr("disabled").trigger("enable"),this.getForm().find(":submit").removeAttr("disabled")},getActiveFieldIds:function(){throw new Error("getActiveFieldIds: Abstract, must be implemented by sub class")},serialize:function(e){var t=this,i=this.getForm().serialize();return this.model.isInMultipleMode&&this.model.isInMultipleMode()&&(i+="&multipleMode=true"),this.model.hasRetainFeature()&&(this.model.clearRetainedFields(),d.each(this.getActiveFieldIds(),function(i,r){t.model.addFieldToRetainValue(r,e)}),d.each(this.model.getFieldsWithRetainedValues(),function(e,t){i=i+"&fieldsToRetain="+t})),i},invalidateFieldsCache:function(){delete this.fields},setInitialFocus:function(){this.getFormContent().find(":input:first").focus()},handleSubmitSuccess:function(){this.triggerEvent("submitted"),o.reloadViaWindowLocation()},performAnalytics:function(){var e=function(e,t){var i="***** Analytics log ["+e+"]";t&&(i+="["+JSON.stringify(t)+"]"),c(i),AJS.EventQueue&&AJS.EventQueue.push({name:e,properties:t||{}})},t=function(e){var t={},i=l.filter(e,function(e){return!l.contains(["isCreateIssue","isEditIssue","atl_token","hasWorkStarted"],e.name)}),r=l.filter(i,function(e){return""!=e.value});return l.each(r,function(e){var i=e.name;l.has(t,i)||(t[i]=[]),t[i].push(e.value)}),t};this.previousAnalytics=function(i,r){var s=t(i),a=l.keys(s),o=l.keys(r.data),d=l.difference(a,o),u=l.difference(o,a),c=l.intersection(o,a),m=l.filter(c,function(e){return l.isEqual(r.data[e],s[e])}),f=l.difference(c,m),h=r.count+1,g="edit-issue-dialog"===n.current.options.id,v={"atlassian.numCreates":h,"edit.form":g};return l.each(d,function(e){v[e]="added"}),l.each(u,function(e){v[e]="removed"}),l.each(m,function(e){v[e]="same"}),l.each(f,function(e){v[e]="changed"}),e("quick.create.fields",v),{data:s,count:h}}(this.getForm().serializeArray(),this.previousAnalytics||{data:{},count:0})},addErrorMessage:function(t){e.applyErrorMessageToForm(this.getForm(),[t])},handleSubmitError:function(t){var r,n=this;if(t.responseText){try{r=JSON.parse(t.responseText)}catch(e){}if(r){r.errorMessages&&r.errorMessages.length&&e.applyErrorMessageToForm(this.getForm(),r.errorMessages[0]),r&&r.errors&&400===t.status&&(this.getFieldById&&d.each(r.errors,function(e){/^timetracking/.test(e)?n.getFieldById("timetracking").done(function(e){a.trigger(s.VALIDATE_TIMETRACKING,[n.$element]),e.activate(!0)}):/^worklog/.test(e)?n.getFieldById("worklog").done(function(e){a.trigger(s.VALIDATE_TIMETRACKING,[n.$element]),e.activate(!0)}):n.getFieldById(e).done(function(e){e.activate(!0)})}),e.applyErrorsToForm(this.getForm(),r.errors),this.triggerEvent("validationError",[this,r.errors],!0));var o=n.$element.find(".error");o.length&&o[0].scrollIntoView(!1)}}else{var l=i.SmartAjaxResult(t,void 0,t.statusText,"",!1,void 0),u=i.buildSimpleErrorContent(l);n.addErrorMessage(u)}},getAction:function(){return this.action},getFormContent:function(){return this.$element.find("div.content")},getForm:function(){return this.$element.find("form")},createField:function(){throw new Error("AbstractForm: You must implement [createField] method in subclass.")},_getActiveAttachments:function(e){var t=[];if(!e)return t;for(var i=e.split("&"),r=0;r<i.length;r++){var n=i[r].split("=");"filetoconvert"==n[0]&&t.push(n[1])}return t},_setActiveAttachments:function(e){var t=this.$element.find("input[name=filetoconvert]");t.each(function(){var t=d(this),i=l.contains(e,t.attr("value"));t.prop("checked",i)})},render:function(e){var t=d.Deferred(),i=this,r=i._getActiveAttachments(e);return e?(this.invalidateFieldsCache(),this.model.refresh(e).done(function(){i._render().done(function(e,r){i.triggerEvent("rendered",[i.$element]),t.resolveWith(i,[i.$element,r])})})):i._render().done(function(e,r){i.triggerEvent("rendered",[i.$element]),t.resolveWith(i,[i.$element,r])}),t.always(function(){i._setActiveAttachments(r)}),t.promise()}})}),AJS.namespace("JIRA.Forms.AbstractForm",null,require("quick-edit/form/abstract"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/abstract/configurable.js' */
define("quick-edit/form/abstract/configurable",["quick-edit/form/abstract","quick-edit/form/field/configurable","quick-edit/form/helper/helper","jquery"],function(e,i,t,n){"use strict";return e.extend({getFields:function(){var e=n.Deferred(),i=this;return this.fields?e.resolveWith(this,[this.fields]):(this.fields=[],this.model.getConfigurableFields().done(function(t){n.each(t,function(e,t){var n=i.createField(t);i.fields.push(n)}),e.resolveWith(i,[i.fields])})),e.promise()},getActiveFieldIds:function(){var e=[],i=this.$element.find(".qf-field.qf-field-active:not(.qf-required), .qf-field.qf-required:not(.qf-field-active)");return n.each(i,function(i,t){var r=n(t),d=r.data("model"),s=r.data("field-id")||d&&d.getId();null!=s&&e.push(s),"attachment"===s&&r.find("input[name=filetoconvert]").each(function(){e.push(this.id)})}),e},createField:function(e){e.hasVisibilityFeature=this.model.hasVisibilityFeature(e),this.model.hasRetainFeature(e)&&(e.hasRetainFeature=!0,e.retainValue=this.model.hasRetainedValue(e));var n=this,r=new i(e),d=new t(n);return e.hasVisibilityFeature&&r.bind("activated",function(){n.model.setUserFields(n.getActiveFieldIds()),r.highlight(),n.triggerEvent("QuickForm.fieldAdded",[r]),d.sendQuickEditAnalyticsEvent({name:"quickeditform.custom.added",field:r,instance:n})}).bind("disabled",function(){n.model.setUserFields(n.getActiveFieldIds()),n.triggerEvent("QuickForm.fieldRemoved",[r]),d.sendQuickEditAnalyticsEvent({name:"quickeditform.custom.removed",field:r,instance:n})}),r},getFieldById:function(e){var i=this,t=n.Deferred();return this.getFields().done(function(r){n.each(r,function(n,r){r.getId()===e&&t.resolveWith(i,[r])}),t.rejectWith(i,[])}),t.promise()},hasNoVisibleFields:function(){var e=n.Deferred();return e.resolve(0===this.getActiveFieldIds().length),e.promise()},renderFormContents:function(){var e=n.Deferred(),i=n(),t=this;return t.getFields().done(function(r){var d=t.reorderFieldsToRender(r);t.model.getActiveFieldIds().done(function(r){n.each(d,function(){var e=this.render();i=i.add(e.scripts),t.getFormContent().append(e.element)}),n.each(r,function(e,i){n.each(d,function(){this.getId()===i&&this.activate(!0)})}),n.each(d,function(){this.isActive()||this.disable(!0)}),t.hasNoVisibleFields().done(function(n){if(n===!0)for(var r=0;r<3;r++)d[r]&&d[r].activate(!0);e.resolveWith(this,[t.$element,i])})})}),e.promise()},reorderFieldsToRender:function(e){return e}})}),AJS.namespace("JIRA.Forms.AbstractConfigurableForm",null,require("quick-edit/form/abstract/configurable"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/abstract/unconfigurable.js' */
define("quick-edit/form/abstract/unconfigurable",["quick-edit/form/abstract","quick-edit/templates/issue","jquery","underscore","jira/featureflags/feature-manager"],function(e,i,t,r,n){"use strict";var s=function(e){return function(i){return"secondary"===e[i.id]}},a=function(e){return function(i){return!s(e)(i)}},u=function(e,i){return{primary:e.filter(a(i)),secondary:e.filter(s(i))}},d=function(e){var i=e.reduce(function(e,i){return e.concat(i.fields)},[]);return i.reduce(function(e,i){return e[i.id]=i.section||"primary",e},{})};return e.extend({getFieldsHtml:function(){var e=this,s=t.Deferred(),a={};return this.model.getTabs().done(function(t){a.simpleCreate=!1;var f=n.isFeatureEnabled("jira.simplify.issue.create");if(f){if(e.model&&e.model.sortedTabs){var o=d(e.model.sortedTabs);1===t.length?t[0].fields&&(a.fields=u(t[0].fields,o)):(a.tabs=t.map(function(e){return e.isFirst===!0?r.extend(e,{fields:u(e.fields,o)}):r.extend(e,{fields:{primary:e.fields,secondary:[]}})}),a.hasTabs=!0),a.simpleCreate=f}}else 1===t.length?a.fields=t[0].fields:(a.tabs=t,a.hasTabs=!0);s.resolveWith(e,[i.issueFields(a)])}),s.promise()},getActiveFieldIds:function(){var e=[];if(this.model.getFields().done(function(i){t.each(i,function(i,t){e.push(t.id)})}),e.indexOf("attachment")){var i=this.$element.find("input[name=filetoconvert]").map(function(e,i){return i.id}).toArray();e.push.apply(e,i)}return e},getFields:function(){var e=t.Deferred(),i=this;return this.fields?e.resolveWith(this,[this.fields]):(this.fields=[],this.model.getFields().done(function(r){t.each(r,function(e,t){var r=i.createField(t);i.fields.push(r)}),e.resolveWith(i,[i.fields])})),e.promise()}})}),AJS.namespace("JIRA.Forms.AbstractUnconfigurableForm",null,require("quick-edit/form/abstract/unconfigurable"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/configurable/create-issue.js' */
define("quick-edit/form/configurable/create-issue",["quick-edit/form/abstract/configurable","quick-edit/form/helper/helper","quick-edit/templates/issue","quick-edit/util/jira","jira/util/users/logged-in-user","wrm/context-path","jquery","jira/featureflags/simplified-ux-feature-manager"],function(e,t,i,s,r,o,n,u){"use strict";return e.extend({init:function(e){this.model=e.model,this.helper=new t(this),this.globalEventNamespaces=e.globalEventNamespaces||[],this.issueId=e.issueId,this.title=e.title,this._serialization={},this.action=o()+"/secure/QuickCreateIssue.jspa?decorator=none",this.$element=n("<div />").addClass("qf-form qf-configurable-form")},handleSubmitSuccess:function(e){return this.helper.handleSubmitSuccess(e)},_render:function(){var e=n.Deferred(),t=this;return t.model.getIssueSetupFields().done(function(o){var n=i.createIssueForm({issueSetupFields:o,atlToken:t.model.getAtlToken(),formToken:t.model.getFormToken(),isImportIssueButtonEnabled:u.isImportIssueButtonEnabled(),isConfigurable:!0,title:t.title,parentIssueId:t.model.getParentIssueId(),multipleMode:t.model.isInMultipleMode(),showFieldConfigurationToolBar:!r.isAnonymous(),modifierKey:s.getModifierKey()});t.$element.html(n),t.helper.decorate(),t.renderFormContents().done(function(i,s){t.helper.decorateFields(),e.resolveWith(t,[t.$element,s])}),t.bind("QuickForm.fieldAdded",function(){t.helper.decorateFields()})}),e.promise()}})}),AJS.namespace("JIRA.Forms.ConfigurableCreateIssueForm",null,require("quick-edit/form/configurable/create-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/configurable/edit-issue.js' */
define("quick-edit/form/configurable/edit-issue",["quick-edit/form/abstract/configurable","quick-edit/util/jira","quick-edit/templates/issue","jira/util/users/logged-in-user","wrm/context-path","jquery"],function(e,t,i,s,n,o){"use strict";return e.extend({init:function(e){this.model=e.model,this.globalEventNamespaces=e.globalEventNamespaces||[],this.issueId=e.issueId,this.title=e.title,this.action=n()+"/secure/QuickEditIssue.jspa?issueId="+e.issueId+"&decorator=none",this.$element=o("<div />").addClass("qf-form qf-configurable-form")},handleSubmitSuccess:function(e){this.triggerEvent("submitted",[e]),this.triggerEvent("issueEdited",[e],!0),this.triggerEvent("sessionComplete")},hasNoVisibleFields:function(){var e=o.Deferred(),t=this.getActiveFieldIds();return this.model.getUserFields().done(function(i){1===i.length&&"comment"===i[0]?e.resolve(!1):0===t.length||1===t.length&&"comment"===t[0]?e.resolve(!0):e.resolve(!1)}),e.promise()},_render:function(){var e=o.Deferred(),n=this,r=i.editIssueForm({issueId:this.issueId,title:this.title,atlToken:n.model.getAtlToken(),formToken:n.model.getFormToken(),pid:n.model.getPid(),isConfigurable:!0,modifierKey:t.getModifierKey(),showFieldConfigurationToolBar:!s.isAnonymous()});return this.$element.html(r),n.renderFormContents().done(function(t,i){n.getFieldById("comment").done(function(e){n.getFormContent().append(e.$element)}),e.resolveWith(n,[n.$element,i])}),e.promise()}})}),AJS.namespace("JIRA.Forms.ConfigurableEditIssueForm",null,require("quick-edit/form/configurable/edit-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/field-picker/button/configurable.js' */
define("quick-edit/form/field-picker/button/configurable",["quick-edit/util/control","quick-edit/templates/form"],function(e,i){"use strict";return e.extend({init:function(e){var i=this;this.field=e.field,this.field.bind("disabled",function(){i.$element.removeClass("qf-active")}).bind("activated",function(){i.$element.addClass("qf-active")})},toggle:function(){this.field.isActive()?this.field.disable():this.field.activate()},getId:function(){return this.field.getId()},render:function(){return this.$element=jQuery(i.configurablePickerButton({required:this.field.descriptor.required,label:this.field.getLabel(),fieldId:this.field.getId(),isActive:this.field.isActive()})),this._assignEvents("button",this.$element),this.$element},_events:{button:{click:function(e){this.toggle(),e.preventDefault()}}}})}),AJS.namespace("JIRA.Forms.FieldPicker.ConfigurableButton",null,require("quick-edit/form/field-picker/button/configurable"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/field-picker/button/unconfigurable.js' */
define("quick-edit/form/field-picker/button/unconfigurable",["quick-edit/util/control","quick-edit/templates/form","jquery"],function(e,i,t){"use strict";return e.extend({init:function(e){this.descriptor=e},render:function(){return this.$element=t(i.unconfigurablePickerButton({required:this.descriptor.required,label:this.descriptor.label,fieldId:this.descriptor.id,isActive:!0})),this.$element}})}),AJS.namespace("JIRA.Forms.FieldPicker.UnconfigurableButton",null,require("quick-edit/form/field-picker/button/unconfigurable"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/field-picker/field-picker.js' */
define("quick-edit/form/field-picker",["quick-edit/form/field-picker/button/configurable","quick-edit/form/field-picker/button/unconfigurable","quick-edit/templates/form","quick-edit/util/control","aui/inline-dialog","jquery"],function(i,e,n,t,o,l){"use strict";return t.extend({INLINE_DIALOG_ID:"field_picker_popup",init:function(){this.buttons=[]},switchToAll:function(i){this.isConfigurable=!1,i!==!0&&(this.hideCallback=function(){this.remove()},this.inlineDialog.hide(),this.triggerEvent("switchedToAll"))},setForm:function(i){this.form=i},switchToCustom:function(i){this.isConfigurable=!0,i!==!0&&(this.hideCallback=function(){this.remove()},this.inlineDialog.hide(),this.triggerEvent("switchedToCustom"))},hideCallback:function(){},bindInlineDialog:function(){function i(i,t,o){e.render().done(function(e){0===i.find(".qf-picker").length&&(i.html(e),i.click(function(i){i.stopPropagation()}));var t=n.offset().top-l(window).scrollTop(),s=l(window).height(),r=s-t-110;i.find(".qf-picker-content").css("maxHeight",r),this.form.model.isSimplified()?i.find("#qf-picker-custom-link").hide():i.find("#qf-picker-custom-link").show(),o()})}var e=this,n=this.getInlineDialogTrigger();return this.inlineDialog&&this.inlineDialog.remove(),this.inlineDialog=o(n,this.INLINE_DIALOG_ID,i,{width:450,upfrontCallback:function(){n.parent().addClass("active")},hideCallback:function(){n.parent().removeClass("active")},nobind:!0}),n.click(function(i){l("#inline-dialog-"+e.INLINE_DIALOG_ID).is(":visible")?e.inlineDialog.hide():e.inlineDialog.show()}),this.inlineDialog},getInlineDialogTrigger:function(){return this.form.$element.find("#qf-field-picker-trigger")},renderButtons:function(n){var t=this,o=l('<ul class="qf-picker-buttons" />').appendTo(this.$content);l.each(n,function(n,s){var r,c;t.isConfigurable?t.form.getFieldById(s.id).done(function(e){if(e&&e.hasVisibilityFeature()){var n=l("<li />").appendTo(o),s=new i({field:e});s.render().appendTo(n),t.buttons.push(s)}}):(c=new e(s),r=l("<li />").appendTo(o),c.render().appendTo(r))}),0===o.children().length&&o.addClass("qf-no-fields").append("<li><em>"+"No fields can be configured for this tab"+"</em></li>")},renderContents:function(){var i=this,e=l.Deferred();return this.form.model.getSortedTabs().done(function(n){1===n.length?i.renderButtons(n[0].fields):l.each(n,function(e,n){n.fields.length>0&&(l("<h4><span></span></h4>").appendTo(i.$content).find("span").text(n.label),i.renderButtons(n.fields))}),e.resolveWith(i,[i.$element])}),e.promise()},show:function(){this.inlineDialog.show()},render:function(){return this.$element=l(n.fieldPicker({isConfigurable:this.isConfigurable})),this.$content=this.$element.find(".qf-picker-content"),this._assignEvents("switchToCustom",this.$element.find(".qf-configurable")),this._assignEvents("switchToAll",this.$element.find(".qf-unconfigurable")),this.renderContents()},_events:{switchToCustom:{click:function(i){this.switchToCustom(),i.preventDefault()}},switchToAll:{click:function(i){this.switchToAll(),i.preventDefault()}}}})}),AJS.namespace("JIRA.Forms.FieldPicker",null,require("quick-edit/form/field-picker"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/container/container.js' */
define("quick-edit/form/container",["quick-edit/form/field-picker","quick-edit/form/import-issues","quick-edit/util/jira","quick-edit/util/control","quick-edit/form/helper/helper","jira/dialog/form-dialog","jira/dialog/dialog","jira/util/navigator","jira/issue","jira/issuenavigator/issue-navigator","jquery","jira/featureflags/feature-manager","wrm/require"],function(e,i,t,n,r,o,s,a,c,l,d,u,m){"use strict";return n.extend({init:function(i){this.$element=d("<div />").addClass("qf-container"),this.options=t.makePropertyFunc(i),this.fieldPicker=new e,this.successData=[],this.helper=new r(this);var n=this;m(["wr!com.atlassian.plugins.browser.metrics.browser-metrics-plugin:api"]).then(function(){n.metrics=require("internal/browser-metrics")})},decorateRenderers:function(){var e=this;this.fieldPicker.decorated||(this.fieldPicker.bind("switchedToAll",function(){e.unconfigurableForm.render(e.currentView.serialize(!0)).done(function(){e.fieldPicker.show()}),e.helper.sendQuickEditAnalyticsEvent({name:"quickeditform.switched.all",allFieldsShown:!0,instance:e})}),this.fieldPicker.bind("switchedToCustom",function(){e.configurableForm.render(e.currentView.serialize(!0)).done(function(){e.fieldPicker.show()}),e.helper.sendQuickEditAnalyticsEvent({name:"quickeditform.switched.custom",allFieldsShown:!1,instance:e})}),this.fieldPicker.decorated=!0),this.configurableForm.decorated||(this.configurableForm.bind("rendered",function(t,n){e.currentView=e.configurableForm,e.fieldPicker.switchToCustom(!0),e.fieldPicker.setForm(e.configurableForm),e.fieldPicker.bindInlineDialog(),i.setForm(e.configurableForm),i.bindImportIssueUrl(),e.applyGlobalDecorator(n),e.model.setUseConfigurableForm(!0),e.triggerEvent("configurableFormRendered")}),this.configurableForm.bind("submitted",function(i,t){e.successData.push(t),e.triggerEvent("configurableFormSubmitted"),e.helper.sendQuickEditAnalyticsEvent({name:"quickeditform.submit.success",allFieldsShown:!1,instance:e})}),this.configurableForm.bind("issueCreated",function(i,t){e.triggerEvent("issueCreated",t),e.metrics&&e.metrics.end({key:"jira.create.issue.dialog.submit"})}),this.configurableForm.decorated=!0),this.unconfigurableForm.decorated||(this.unconfigurableForm.bind("rendered",function(t,n){e.fieldPicker.switchToAll(!0),e.fieldPicker.setForm(e.unconfigurableForm),e.fieldPicker.bindInlineDialog(),i.setForm(e.unconfigurableForm),i.bindImportIssueUrl(),e.currentView=e.unconfigurableForm,e.applyGlobalDecorator(n),e.model.setUseConfigurableForm(!1),e.triggerEvent("unconfigurableFormRendered")}),this.unconfigurableForm.bind("submitted",function(i,t){e.successData.push(t),e.triggerEvent("unconfigurableFormSubmitted"),e.helper.sendQuickEditAnalyticsEvent({name:"quickeditform.submit.success",allFieldsShown:!0,instance:e})}),this.unconfigurableForm.bind("issueCreated",function(i,t){e.triggerEvent("issueCreated",t),e.metrics&&e.metrics.end({key:"jira.create.issue.dialog.submit"})}),this.unconfigurableForm.decorated=!0)},applyGlobalDecorator:function(e){function i(){t.currentView.setInitialFocus&&t.currentView.setInitialFocus()}var t=this;e.detach(),this.$element.html(e),this.triggerEvent("contentRefreshed",[this.$element]),a.isIE()?window.setTimeout(i,0):i()},asDialog:function(e){e=d.extend(!0,{},e);var i,t=this,n=!!e.modeless;return this.dialog=i=new o({id:e.id,trigger:e.trigger,windowTitle:void 0!==e.windowTitle?e.windowTitle:!n,width:n?s.WIDTH_PRESETS.medium:s.WIDTH_PRESETS.large,fixedToTop:u.isFeatureEnabled("jira.simplify.issue.create"),defineResources:function(){this.requireContext("jira.create.issue")},content:function(e){t.render().done(function(){t.triggerEvent("dialogRendered"),e(t.$element)}),t.triggerEvent("dialogShown")},submitHandler:function(e,i){e.preventDefault(),t.metrics&&t.metrics.start({isInitial:!1,key:"jira.create.issue.dialog.submit"}),t.currentView.submit().then(i,i)},stacked:!0,modeless:n}),"edit-issue-dialog"===e.id&&d(this.dialog).on("beforeShow",function(e){c.getIssueKey()||l.isRowSelected()||e.preventDefault()}),this.dialog._focusFirstField=function(){o.prototype._focusFirstField.apply(this,["div.content :input:visible:first"])},this.bind("initialized",function(){this.unconfigurableForm.bind("sessionComplete",function(){i.hide()}),this.configurableForm.bind("sessionComplete",function(){i.hide()})}).bind("contentRefreshed",function(){i.notifyOfNewContent()}),i.bind("Dialog.hide",function(){t.successData.length&&(t.triggerEvent("sessionComplete",[t.successData],!0),t.successData=[])}),t.$element.ajaxStart(function(){i.showFooterLoadingIndicator()}).ajaxStop(function(){i.hideFooterLoadingIndicator()}),i.getQuickForm=function(){return t},i.dirtyFormWarning(),i},lazyInit:function(){var e=this,i=this.options.call(this);this.model=i.model,this.errorHandler=i.errorHandler,this.globalEventNamespaces=i.globalEventNamespaces,this.configurableForm=i.configurableForm,this.unconfigurableForm=i.unconfigurableForm,this.sessionComplete=i.sessionComplete,this.model.clearRetainedFields(),this.configurableForm.invalidateFieldsCache(),this.model.bind("serverError",function(i,t){e.$element.html(e.errorHandler.render(t)),e.triggerEvent("contentRefreshed",[this.$element])}),this.triggerEvent("initialized"),this.decorateRenderers()},render:function(){var e=this,i=d.Deferred();return this.lazyInit(),e.model.getUseConfigurableForm().done(function(t){t===!0?e.configurableForm.render().done(function(t,n){i.resolveWith(e,[e.$element]),e.$element.append(n)}):e.unconfigurableForm.render().done(function(t,n){i.resolveWith(e,[e.$element,n]),e.$element.append(n)})}).fail(function(){i.resolveWith(e,[e.$element])}),i.promise()}})}),AJS.namespace("JIRA.Forms.Container",null,require("quick-edit/form/container"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/error/error.js' */
define("quick-edit/form/error",["quick-edit/util/control","quick-edit/templates/form","jira/ajs/ajax/smart-ajax"],function(r,e,t){"use strict";return r.extend({getErrorMessageFromSmartAjax:function(r){var a,s;if(r.hasData&&401!==r.status)try{s=JSON.parse(r.data),a=s.errorMessages&&s.errorMessages.length>0?e.errorMessage({message:s.errorMessages[0]}):t.buildDialogErrorContent(r,!0).html()}catch(e){a=t.buildDialogErrorContent(r,!0).html()}else a=t.buildDialogErrorContent(r,!0).html();return a},render:function(r){var e=this.getErrorMessageFromSmartAjax(r);return this._render(e)}})}),AJS.namespace("JIRA.Forms.Error",null,require("quick-edit/form/error"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/error/create-issue.js' */
define("quick-edit/form/error/create-issue",["quick-edit/form/error","quick-edit/templates/issue","jquery"],function(e,r,t){"use strict";return e.extend({_render:function(e){return t(r.createIssueError({errorHtml:e}))}})}),AJS.namespace("JIRA.Forms.CreateIssueError",null,require("quick-edit/form/error/create-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/error/edit-issue.js' */
define("quick-edit/form/error/edit-issue",["quick-edit/form/error","quick-edit/templates/issue","jquery"],function(e,r,i){"use strict";return e.extend({_render:function(e){return i(r.editIssueError({errorHtml:e}))}})}),AJS.namespace("JIRA.Forms.EditIssueError",null,require("quick-edit/form/error/edit-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/unconfigurable/create-issue.js' */
define("quick-edit/form/unconfigurable-create-issue",["quick-edit/form/abstract/unconfigurable","quick-edit/form/helper/helper","quick-edit/templates/issue","quick-edit/util/jira","jira/util/users/logged-in-user","wrm/context-path","jquery","jira/featureflags/simplified-ux-feature-manager"],function(e,t,i,s,r,o,n,l){"use strict";return e.extend({init:function(e){this._serialization={},this.globalEventNamespaces=e.globalEventNamespaces||[],this.model=e.model,this.helper=new t(this),this.title=e.title,this.action=o()+"/secure/QuickCreateIssue.jspa?decorator=none",this.$element=n("<div class='qf-unconfigurable-form' />")},handleSubmitSuccess:function(e){this.helper.handleSubmitSuccess(e)},_render:function(){var e=n.Deferred(),t=this;return this.getFieldsHtml().done(function(o){t.model.getIssueSetupFields().done(function(n){var u=i.createIssueForm({issueSetupFields:n,fieldsHtml:o,parentIssueId:t.model.getParentIssueId(),atlToken:t.model.getAtlToken(),formToken:t.model.getFormToken(),isImportIssueButtonEnabled:l.isImportIssueButtonEnabled(),title:t.title,multipleMode:t.model.isInMultipleMode(),showFieldConfigurationToolBar:!r.isAnonymous(),modifierKey:s.getModifierKey()}),a=s.extractScripts(u);t.$element.empty().append(a.html),t.helper.restoreFormDirtyStatus(),t.helper.decorate(),t.helper.decorateFields(),e.resolveWith(t,[t.$element,a.scripts])})}),e.promise()}})}),AJS.namespace("JIRA.Forms.UnconfigurableCreateIssueForm",null,require("quick-edit/form/unconfigurable-create-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/unconfigurable/edit-issue.js' */
define("quick-edit/form/unconfigurable-edit-issue",["quick-edit/form/abstract/unconfigurable","quick-edit/util/jira","quick-edit/templates/issue","jira/util/users/logged-in-user","wrm/context-path","jquery","underscore","jira/featureflags/feature-manager"],function(e,t,i,s,r,n,o,l){"use strict";return e.extend({init:function(e){this.globalEventNamespaces=e.globalEventNamespaces||[],this.model=e.model,this.issueId=e.issueId,this.title=e.title,this.action=r()+"/secure/QuickEditIssue.jspa?issueId="+e.issueId+"&decorator=none",this.$element=n("<div class='qf-unconfigurable-form' />")},getFieldsHtml:function(){var e=this,t=n.Deferred(),s={};return this.model.getUnconfigurableTabs().done(function(r){var n=l.isFeatureEnabled("jira.simplify.issue.create");n?1===r.length?s.fields={primary:r[0].fields,secondary:[]}:(s.tabs=r.map(function(e){return o.extend(e,{fields:{primary:e.fields,secondary:[]}})}),s.hasTabs=!0):1===r.length?s.fields=r[0].fields:(s.tabs=r,s.hasTabs=!0),s.simpleCreate=n||!1,t.resolveWith(e,[i.issueFields(s)])}),t.promise()},handleSubmitSuccess:function(e){this.triggerEvent("submitted",[e]),this.triggerEvent("issueEdited",[e],!0),this.triggerEvent("sessionComplete")},_render:function(){var e=n.Deferred(),r=this;return this.getFieldsHtml().done(function(n){var o={fieldsHtml:n,title:r.title,issueId:r.issueId,atlToken:r.model.getAtlToken(),formToken:r.model.getFormToken(),pid:r.model.getPid(),modifierKey:t.getModifierKey(),showFieldConfigurationToolBar:!s.isAnonymous()};this.model.getCommentField().then(function(s){var n,l;o.commentField=s,n=i.editIssueForm(o),l=t.extractScripts(n),r.$element.html(l.html),e.resolveWith(r,[r.$element,l.scripts])},function(){var s=i.editIssueForm(o),n=t.extractScripts(s);r.$element.html(n.html),e.resolveWith(r,[r.$element,n.scripts])})}),e.promise()}})}),AJS.namespace("JIRA.Forms.UnconfigurableEditIssueForm",null,require("quick-edit/form/unconfigurable-edit-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/factory/create-issue.js' */
define("quick-edit/form/factory/create-issue",["quick-edit/form/container","quick-edit/form/configurable/create-issue","quick-edit/form/unconfigurable-create-issue","quick-edit/form/error/create-issue","quick-edit/form/model/create-issue"],function(e,a,r,s,t){"use strict";return function(i){return i=i||{},new e(function(){i.globalEventNamespaces=i.globalEventNamespaces||["QuickCreateIssue"];var e="Create issue",o=new t({projectId:i.pid,issueType:i.issueType,fields:i.fields}),c=new a({model:o,title:e,globalEventNamespaces:i.globalEventNamespaces}),n=new r({model:o,title:e,globalEventNamespaces:i.globalEventNamespaces});return{globalEventNamespaces:i.globalEventNamespaces,model:o,errorHandler:new s,configurableForm:c,unconfigurableForm:n}})}}),AJS.namespace("JIRA.Forms.createCreateIssueForm",null,require("quick-edit/form/factory/create-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/factory/create-subtask.js' */
define("quick-edit/form/factory/create-subtask",["quick-edit/form/container","quick-edit/form/configurable/create-issue","quick-edit/form/error/create-issue","quick-edit/form/model/create-issue","quick-edit/form/unconfigurable-create-issue","quick-edit/util/dialog","jira/issue","jira/issuenavigator/issue-navigator"],function(e,t,s,a,r,i,u,n){"use strict";function c(e){return e.parentIssueId||u.getIssueId()||n.getSelectedIssueId()}return function(u){return u=u||{},new e(function(){u.globalEventNamespaces=u.globalEventNamespaces||["QuickCreateSubtask"];var e=c(u),n=i.getIssueActionTitle("Create Subtask"),o=new a({parentIssueId:e,projectId:u.pid,issueType:u.issueType,fields:u.fields}),l=new t({model:o,title:n,globalEventNamespaces:u.globalEventNamespaces}),d=new r({model:o,title:n,globalEventNamespaces:u.globalEventNamespaces});return{globalEventNamespaces:u.globalEventNamespaces,model:o,errorHandler:new s,configurableForm:l,unconfigurableForm:d}})}}),AJS.namespace("JIRA.Forms.createSubtaskForm",null,require("quick-edit/form/factory/create-subtask"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/factory/edit-issue.js' */
define("quick-edit/form/factory/edit-issue",["quick-edit/form/container","quick-edit/form/configurable/edit-issue","quick-edit/form/error/edit-issue","quick-edit/util/dialog","quick-edit/form/model/factory/edit-issue","quick-edit/form/unconfigurable-edit-issue","jira/issue","jira/issuenavigator/issue-navigator","jquery"],function(e,i,t,s,u,r,n,o,d){"use strict";function a(e){var i=s.getAttrFromActiveTrigger("data-issueId");return d.isFunction(e.issueId)?e.issueId(e):e.issueId?e.issueId:i?i:n.getIssueId()||o.getSelectedIssueId()}function c(){var e="Edit issue";return s.shouldShowIssueKeyInTitle()?s.getIssueActionTitle(e):e}return function(s){return s=s||{},new e(function(){var e=a(s),n=c(),o=u(e),d=new i({title:n,model:o,issueId:e,globalEventNamespaces:["QuickEdit"]}),l=new r({title:n,model:o,issueId:e,globalEventNamespaces:["QuickEdit"]});return{globalEventNamespaces:["QuickEdit"],model:o,errorHandler:new t,configurableForm:d,unconfigurableForm:l}})}}),AJS.namespace("JIRA.Forms.createEditIssueForm",null,require("quick-edit/form/factory/edit-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue', location = 'js/init/create.js' */
define("quick-edit/init/create",["quick-edit/form/factory/create-issue","quick-edit/form/factory/create-subtask","quick-edit/util/dialog","jira/analytics/web-client","jira/analytics/transformers/issue-type","jira/featureflags/feature-manager","jquery"],function(e,t,a,i,s,r,n){"use strict";var d=function(t){var a=n(t.target),r=a.is("a")?a:a.find("a"),d=parseUri(r.attr("href")).queryKey,u={pid:d.pid,issueType:d.issuetype};u=n.extend(u,{pid:a.attr("data-pid"),issueType:a.attr("data-issue-type")});var c=e(u);n(c).on("dialogRendered",function(){JIRA.trace("create.issue.dialog.rendered"),i.sendPageEvent("createIssueModal")}),n(c).on("issueCreated",function(e,t){JIRA.trace("create.issue.dialog.issue.created");var a=t.createdIssueDetails.fields,r=String(a.project.id),n=a.project.projectTypeKey,d=String(t.createdIssueDetails.id),u=s.map(a.issuetype.name),c=String(a.issuetype.id);i.sendTrackEvent({containerType:"project",containerId:r,source:"createIssueModal",objectType:"issue",objectId:d,actionSubject:"issue",action:"created",attributes:{issueType:u,issueTypeId:c,projectType:n}})}),c.asDialog({trigger:document.createElement("a"),id:"create-issue-dialog",windowTitle:"Create issue"}).show()},u=function(e){var s=n(e.target),r=s.is("a")?s:s.find("a"),d=r.attr("data-issueid");d=d||n("#fallback-subtask-dialog-issueid").data("issueid");var u={parentIssueId:d},c=t(u);n(c).on("dialogRendered",function(){i.sendPageEvent("createSubTaskModal")}),c.asDialog({windowTitle:function(){return a.getIssueActionTitle("Create Subtask")},trigger:document.createElement("a"),id:"create-subtask-dialog"}).show()};return{initIssueDialog:d,initSubtaskDialog:u}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:greenhopper-epics-issue-web-panel-resources', location = 'includes/js/rapid/Namespaces.js' */
"undefined"==typeof GH&&(window.GH={}),"undefined"==typeof GH.view&&(GH.view={}),"undefined"==typeof GH.view.model&&(GH.view.model={}),"undefined"==typeof GH.Global&&(GH.Global={}),"undefined"==typeof GH.Dialog&&(GH.Dialog={}),"undefined"==typeof GH.Dialogs&&(GH.Dialogs={}),"undefined"==typeof GH.State&&(GH.State={}),"undefined"==typeof GH.XBoard&&(GH.XBoard={}),"undefined"==typeof GH.RapidBoard&&(GH.RapidBoard={}),"undefined"==typeof GH.HelpPaths&&(GH.HelpPaths={}),"undefined"==typeof GH.JQLAutoComplete&&(GH.JQLAutoComplete={}),"undefined"==typeof GH.RapidBoard.Util&&(GH.RapidBoard.Util={}),"undefined"==typeof GH.NumberFormat&&(GH.NumberFormat={}),"undefined"==typeof GH.UrlFormat&&(GH.UrlFormat={}),AJS.format=function(e){var t=/'(?!')/g,n=/^\d+$/,r=/^(\d+),number$/,a=/^(\d+),choice,(.+)/,o=/^\s*(-?\d+)([#<])(.*)/,i=function(e,t){var i,f,d="";if(i=e.match(n))d=t.length>++e?t[e]:"";else if(i=e.match(r))f=GH.NumberFormat&&GH.NumberFormat.format||_.identity,d=t.length>++i[1]?f(t[i[1]]):"";else if(i=e.match(a)){var l=t.length>++i[1]?t[i[1]]:null;if(null!==l){for(var u=i[2].split("|"),p=null,G=0;G<u.length;G++){var H=u[G].match(o);if(!H){console.log("Bad formatting of message: "+e);break}var s=parseInt(H[1],10);if(l<s){if(p){d=p;break}d=H[3];break}if(l==s&&"#"==H[2]){d=H[3];break}G==u.length-1&&(d=H[3]),p=H[3]}var m=[d].concat(Array.prototype.slice.call(t,1));d=AJS.format.apply(AJS,m)}}return d},f=function(e){for(var t=!1,n=-1,r=0,a=0;a<e.length;a++){var o=e.charAt(a);if("'"==o&&(t=!t),!t)if("{"===o)0===r&&(n=a),r++;else if("}"===o&&r>0&&(r--,0===r)){var i=[];return i.push(e.substring(0,a+1)),i.push(e.substring(0,n)),i.push(e.substring(n+1,a)),i}}return null},d=function(e){for(var n=arguments,r="",a=f(e);a;)e=e.substring(a[0].length),r+=a[1].replace(t,""),r+=i(a[2],n),a=f(e);return r+=e.replace(t,"")};return d.apply(AJS,arguments)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:greenhopper-epics-issue-web-panel-resources', location = 'includes/js/rapid/ui/notification/Notification.js' */
!function(){AJS.namespace("GH.Notification"),GH.Notification.autoHideEnabled=!0;var e=Object.freeze({INFO:"info",SUCCESS:"success"});GH.Notification.showErrors=function(e,i){var t=GH.Notification.prepareNotificationDiv(),a=GH.tpl.rapid.notification.renderErrorMessages(e);"undefined"==typeof i&&(i=!0),AJS.messages.error(t,{title:"Error",body:a,closeable:i}),GH.Notification._divStyle(t)&&t.css(GH.Notification._divStyle(t)),t.show()},GH.Notification.showError=function(e,i,t){var a=GH.Notification.prepareNotificationDiv();"undefined"==typeof t&&(t=!0),AJS.messages.error(a,{title:e,body:i,closeable:t}),GH.Notification._divStyle(a)&&a.css(GH.Notification._divStyle(a)),a.show()},GH.Notification.showWarnings=function(e,i){var t={autoHide:!0,autoHideDelay:5e3,preRendered:!1,showTitle:!1};i=_.extend({},t,i);var a,o=GH.Notification.prepareNotificationDiv();a=i.preRendered?e:GH.tpl.rapid.notification.renderErrorMessages({errors:e});var s={body:a,closeable:!0};i.showTitle&&(s.title="Warning"),AJS.messages.warning(o,s),GH.Notification._divStyle(o)&&o.css(GH.Notification._divStyle(o)),o.show(),i.autoHide&&GH.Notification.autoHideEnabled&&setTimeout(function(){o.hide()},i.autoHideDelay)},GH.Notification.showWarning=function(e){var i=GH.Notification.prepareNotificationDiv();AJS.messages.warning(i,{body:e,closeable:!0}),GH.Notification._divStyle(i)&&i.css(GH.Notification._divStyle(i)),i.show()},GH.Notification.clear=function(){GH.Notification.prepareNotificationDiv().hide()},GH.Notification.handleDateFormatMismatchError=function(e){var i='<a href="'+GH.Ajax.CONTEXT_PATH+'/secure/admin/AdvancedApplicationProperties.jspa">';i+="Advanced Settings",i+="</a>";var t=AJS.format("It appears your Jira date format settings are misconfigured. Please check the {0} and ensure that \'\'jira.date.time.picker.java.format\'\' and \'\'jira.date.time.picker.javascript.format\'\' have matching output.",i);GH.Notification.showWarnings(t,{autoHide:!1,preRendered:!0})},GH.Notification.auiMessage=function(e){var i=_.extend({type:"generic",icon:!0,messageHtml:!1},e);return GH.tpl.rapid.notification.renderAuiMessage({type:i.type,title:i.title,icon:i.icon,messageHtml:i.messageHtml,message:i.message})},GH.Notification.Handler={_defaultNotificationHandler:function(){var e=AJS.$("<div/>");return AJS.$(".global-msg").remove(),e.addClass("global-msg").appendTo("body"),e},_defaultDivStyleHandler:function(e){return{marginLeft:-e.outerWidth()/2,top:20}},setCustomDivStyleHandler:function(e){this._customDivStyleHandler=e,this._useDefault=!1},_useDefault:!0,setCustomNotificationHandler:function(e){this._customNotificationHandler=e,this._useDefault=!1},removeCustomHandlers:function(){this._useDefault=!0},getNotificationHandler:function(){return this._useDefault||null==this._customNotificationHandler?this._defaultNotificationHandler:this._customNotificationHandler},getDivStyleHandler:function(){return this._useDefault||null==this._customDivStyleHandler?this._defaultDivStyleHandler:this._customDivStyleHandler}},GH.Notification._divStyle=function(e){var i=GH.Notification.Handler.getDivStyleHandler();return i(e)},GH.Notification.prepareNotificationDiv=function(){var e=GH.Notification.Handler.getNotificationHandler();return e()},GH.Notification.showSuccess=function(t,a){i(e.SUCCESS,t,a)},GH.Notification.showInfo=function(t,a){i(e.INFO,t,a)};var i=function(e,i,t){clearTimeout(GH.Notification.current);var a={timeout:5e3,closeable:!0,shadowed:!0};t=_.extend(a,t,{body:i});var o=GH.Notification.prepareNotificationDiv();AJS.messages[e](o,t),GH.Notification._divStyle(o)&&o.css(GH.Notification._divStyle(o)),o.show(),GH.Notification.autoHideEnabled&&(GH.Notification.current=setTimeout(function(){AJS.$(".global-msg").hide()},t.timeout))};GH.Notification.showIssueMessage=function(e){var i=JIRA.SessionStorage,t=null,a=null;e||(e=i.getItem("selectedIssueId")),e&&(a=i.getItem("selectedIssueKey"),t=i.getItem("selectedIssueMsg"),GH.Notification.showIssueMessageImpl(e,t,a)),i.removeItem("selectedIssueId"),i.removeItem("selectedIssueKey"),i.removeItem("selectedIssueMsg")},GH.Notification.showIssueMessageImpl=function(e,i,t){i||(i="thanks_issue_updated");var a=AJS.params[i];a&&t&&(a=AJS.format(a,t),GH.Notification.showSuccess(a))},GH.Notification.addPageLoadMessage=function(e,i){var t=GH.storage.get("gh.pageloadmessages",!0)||[];t.push({message:e,type:i||"success"}),GH.storage.put("gh.pageloadmessages",t,!0)},GH.Notification._displayPageLoadMessages=function(){var e=GH.storage.get("gh.pageloadmessages",!0);if(e){var i=e[0].type,t="";switch(_.each(e,function(e){t.length>0&&(t+="<br>"),t+=e.message}),i){case"warning":GH.Notification.showWarning(t);break;case"success":default:GH.Notification.showSuccess(t)}GH.storage.put("gh.pageloadmessages",null,!0)}};var t=null;GH.Notification.showBoardUpdatedMessage=function(){var e=require("jira/featureflags/simplified-ux-feature-manager"),i=void 0,a=AJS.$.Deferred();if(e.isAdg3StylesEnabled()){if(0===AJS.$(".aui-flag[aria-hidden=false]").length){var o=GH.tpl.rapid.notification.renderGHtvMessage({showIgnore:!1});t=AJS.flag({type:"info",body:o}),i=AJS.$(o)}}else GH.Notification.clearBoardUpdatedMessage(),i=AJS.$(GH.tpl.rapid.notification.renderGHtvMessage({showIgnore:!0})).appendTo("#gh"),i.data("deferred",a);if(e.isAdg3StylesEnabled()){var s=function(e){e.preventDefault(),GH.Notification.clearBoardUpdatedMessage(),a.resolve()};AJS.$(".js-refresh-now").off("click",s).click(s)}else i.find(".js-refresh-now").click(function(e){e.preventDefault(),i.removeData("deferred"),GH.Notification.clearBoardUpdatedMessage(),a.resolve()}),i.find(".js-ignore-refresh").click(function(e){e.preventDefault(),GH.Notification.clearBoardUpdatedMessage()});return a.promise()},GH.Notification.clearBoardUpdatedMessage=function(){var e=require("jira/featureflags/simplified-ux-feature-manager");if(e.isAdg3StylesEnabled())t&&t.close();else{var i=AJS.$("#ghx-update-message");if(i.length){var a=i.data("deferred");a&&a.reject&&a.reject(),i.remove()}}},GH.Notification.isBoardUpdatedMessageVisible=function(){var e=AJS.$("#ghx-update-message");return e.length>0},AJS.$(document).ready(function(){GH.Notification.showIssueMessage(),GH.storage&&GH.Notification._displayPageLoadMessages()})}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:greenhopper-epics-issue-web-panel-resources', location = 'includes/js/rapid/ui/notification/Notification.soy' */
// This file was automatically generated from Notification.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.rapid.notification.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.rapid == 'undefined') { GH.tpl.rapid = {}; }
if (typeof GH.tpl.rapid.notification == 'undefined') { GH.tpl.rapid.notification = {}; }


GH.tpl.rapid.notification.renderErrorMessages = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.errors.length > 1) {
    output += '<ul>';
    var errorList6 = opt_data.errors;
    var errorListLen6 = errorList6.length;
    for (var errorIndex6 = 0; errorIndex6 < errorListLen6; errorIndex6++) {
      var errorData6 = errorList6[errorIndex6];
      output += '<li>' + ((errorData6.noAutoescape) ? soy.$$filterNoAutoescape(errorData6.message) : soy.$$escapeHtml(errorData6.message)) + '</li>';
    }
    output += '</ul>';
  } else {
    var errorList18 = opt_data.errors;
    var errorListLen18 = errorList18.length;
    for (var errorIndex18 = 0; errorIndex18 < errorListLen18; errorIndex18++) {
      var errorData18 = errorList18[errorIndex18];
      output += '<p>' + ((errorData18.noAutoescape) ? soy.$$filterNoAutoescape(errorData18.message) : soy.$$escapeHtml(errorData18.message)) + '</p>';
    }
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderErrorMessages.soyTemplateName = 'GH.tpl.rapid.notification.renderErrorMessages';
}


GH.tpl.rapid.notification.renderContextualErrors = function(opt_data, opt_ignored) {
  var output = '';
  var errorList29 = opt_data.errors;
  var errorListLen29 = errorList29.length;
  for (var errorIndex29 = 0; errorIndex29 < errorListLen29; errorIndex29++) {
    var errorData29 = errorList29[errorIndex29];
    output += '<div class="ghx-error">' + soy.$$escapeHtml(errorData29.message) + '</div>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderContextualErrors.soyTemplateName = 'GH.tpl.rapid.notification.renderContextualErrors';
}


GH.tpl.rapid.notification.renderMessageHolder = function(opt_data, opt_ignored) {
  return '<div class="ghx-body-warning">' + soy.$$escapeHtml(AJS.format('This version of {0} is not a supported browser.',opt_data.browser)) + ' <a href="' + soy.$$escapeHtml(opt_data.docsUrl) + '">' + soy.$$escapeHtml('See our documentation for the list of supported browsers.') + '</a></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderMessageHolder.soyTemplateName = 'GH.tpl.rapid.notification.renderMessageHolder';
}


GH.tpl.rapid.notification.renderAuiMessage = function(opt_data, opt_ignored) {
  return '<div id="ghx-global-message" class="aui-message ' + soy.$$escapeHtml(opt_data.type) + ((opt_data.className) ? ' ' + soy.$$escapeHtml(opt_data.className) : '') + '">' + ((opt_data.title) ? '<p class="title">' + ((opt_data.icon) ? '<span class="aui-icon icon-' + soy.$$escapeHtml(opt_data.type) + '"></span>' : '') + '<strong>' + soy.$$escapeHtml(opt_data.title) + '</strong></p>' : '') + ((opt_data.message) ? '<p>' + ((! opt_data.title && opt_data.icon) ? '<span class="aui-icon icon-' + soy.$$escapeHtml(opt_data.type) + '"></span>' : '') + ((opt_data.messageHtml) ? soy.$$filterNoAutoescape(opt_data.message) : soy.$$escapeHtml(opt_data.message)) + '</p>' : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderAuiMessage.soyTemplateName = 'GH.tpl.rapid.notification.renderAuiMessage';
}


GH.tpl.rapid.notification.renderGHtvMessage = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div id="ghx-update-message" class="ghx-tv-message"><p>' + soy.$$escapeHtml('This board has been updated') + ': <a href="" class="js-refresh-now">' + soy.$$escapeHtml('Refresh') + '</a>' + ((opt_data.showIgnore) ? '<span class="ghx-divider">&bull;</span><a href="" class="js-ignore-refresh">' + soy.$$escapeHtml('Ignore') + '</a>' : '') + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderGHtvMessage.soyTemplateName = 'GH.tpl.rapid.notification.renderGHtvMessage';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:greenhopper-epics-issue-web-panel-resources', location = 'includes/js/rapid/Ajax.js' */
define("jira-agile/rapid/ajax",[],function(){"use strict";var e={};return e.CONTEXT_PATH=AJS.contextPath(),e.REST_URL_BASE="/rest/greenhopper/1.0",e.PUBLIC_REST_URL_BASE="/rest/agile/1.0",e.xhrRegistery={},e.stallTimeout=300,e.get=function(r,t){AJS.$.extend(r,{type:"GET",headers:{"X-Atlassian-GreenHopper-Gadget":!_.isUndefined(GH.gadget)}});var n=e._executeGet(r,t);return n.pipe(function(e,r,t){return AJS.$.Deferred().resolveWith(this,[e.success,r,t])})},e.post=function(r){return r=e._getSettings(r,!0),AJS.$.extend(r,{type:"POST",contentType:"application/json"}),e._executeStore(r)},e.put=function(r){return r=e._getSettings(r,!0),r.type="PUT",e._executeStore(r)},e.del=function(r){return r=e._getSettings(r,!0),r.type="DELETE",e._executeStore(r)},e._getSettings=function(r,t){return!r.bareUrl&&r.url&&(r.bareUrl=e.buildRestUrl(r.url)),r.bareUrl&&(r.url=r.bareUrl),r.dataType||(r.dataType="json"),r.data&&t&&(r.data=JSON.stringify(r.data)),r.contentType="application/json",r},e._getXhrData=function(r){var t={timestamp:0};return r&&(t=e.xhrRegistery[r]?e.xhrRegistery[r]:e.xhrRegistery[r]=t),t},e._executeGet=function(r,t){r=e._getSettings(r);var n=e._getXhrData(t);n.xhr&&(n.xhr.abort(),delete n.xhr,delete n.xhrAbort,delete n.timeoutId);var o=n.timestamp;if(n.timestamp=(new Date).getTime(),n.timestamp-o<e.stallTimeout){var s,a=AJS.$.Deferred(),u=function(){s=e._executeGet(r,t),s.then(a.resolve,a.reject)};n.timeoutId=window.setTimeout(u,e.stallTimeout),n.xhr=a.promise(),n.xhr.abort=function(){s?s.abort.apply(s,arguments):clearTimeout(n.timeoutId)}}else n.xhr=e.makeRequest(r);return n.xhrAbort=n.xhr.abort,n.xhr.abort=function(){var e=n.xhr,r=n.xhrAbort;if(e&&r)return r.apply(e,arguments)},n.xhr.done(function(){n.xhr&&delete n.xhr}).fail(function(){n.xhr&&delete n.xhr}),n.xhr},e._executeStore=function(r){if(r=r||{},r.data&&"string"==typeof r.data&&/\?\?/.test(r.data)){var t="\\u003F\\u003F";r.data=r.data.replace(/\?\?/g,t)}return r.dataType="json",e.makeRequest(r)},e.makeRequest=function(r){var t=AJS.$.Deferred();r=_.extend(r,{success:function(){t.resolveWith(this,arguments)},error:function(){t.rejectWith(this,arguments)}});var n=t.promise(JIRA.SmartAjax.makeRequest(r)),o=n.abort;n.abort=function(e){return n.abortMarker="timeout"!=e,o.apply(n,arguments)};var s=n.pipe(e._generateDoneInterceptor(),e._generateFailInterceptor(r.errorsNoAutoEscape));return r.deferErrorHandling||s.fail(e._generateErrorHandler(r.onGlobalError,r.errorContextMap,r.contextualErrorRenderer,r.globalErrorDismissable)),s},e._generateDoneInterceptor=function(){return function(r,t,n){return r=r||{},r=e._createExtendedResult(r),e.matchesCurrentUser(n)?r.isSuccess()?AJS.$.Deferred().resolveWith(this,[r,t,n]):AJS.$.Deferred().rejectWith(this,[r,n,t,null]):e._handleCurrentUserChanged(n)}},e._generateFailInterceptor=function(r){return function(t,n,o){if(t.abortMarker)return AJS.$.Deferred();if(!e.matchesCurrentUser(t))return e._handleCurrentUserChanged(t);var s={},a=null;if(t.responseText)try{s=JSON.parse(t.responseText)}catch(u){}return s.errors||s.errorMessages?a=e._convertJiraErrors(s,r):s.message&&(a=e._convertFrameworkErrors(s)),a||(a=e._convertGenericErrors(t,o)),AJS.$.Deferred().rejectWith(this,[a,t,n,o])}},e.handleContextualErrors=function(e,r,t){return r=r||{},!!e.hasContextualErrors()&&(AJS.$(e.getContextualErrors()).each(function(n,o){var s=r[o.contextId];if(s)if(AJS.$.isFunction(s))s(o,e);else{s=AJS.$(s),s.siblings(".ghx-error").remove();var a;a=t?t(o):GH.tpl.rapid.notification.renderContextualErrors({errors:o.errors}),s.after(a)}else AJS.$(o.errors).each(function(r,t){e.addGlobalError(t)})}),!0)},e.handleGlobalErrors=function(e,r,t){return!!e.hasGlobalErrors()&&(GH.Notification.showErrors({errors:e.getGlobalErrors()},t),r&&r instanceof Function&&r(e),!0)},e.buildRestUrl=function(r){return 0!==r.indexOf("/")&&(r="/"+r),e.buildBareRestUrl(e.REST_URL_BASE+r)},e.buildPublicRestUrl=function(r){return 0!==r.indexOf("/")&&(r="/"+r),e.buildBareRestUrl(e.PUBLIC_REST_URL_BASE+r)},e.buildBareRestUrl=function(r){return 0!==r.indexOf("/")&&(r="/"+r),e.CONTEXT_PATH+r},e._createExtendedResult=function(r){return r?e._extendResult({success:r}):e._extendResult({success:!0})},e._extendResult=function(e){return AJS.$.extend(e,{getGlobalErrors:function(){return e.error?e.error.errors:null},getContextualErrors:function(){return e.error?e.error.contextualErrors:null},hasGlobalErrors:function(){return e.error&&e.error.errors&&e.error.errors.length>0},hasContextualErrors:function(){return e.error&&e.error.contextualErrors},addGlobalError:function(r){e.error||(e.error={}),e.error.errors||(e.error.errors=[]),e.error.errors[e.error.errors.length]=r},getSuccessObject:function(){return e.success},isSuccess:function(){return!e.error}})},e._generateErrorHandler=function(r,t,n,o){return function(s){e.handleContextualErrors(s,t,n),e.handleGlobalErrors(s,r,o)}},e._convertJiraErrors=function(r,t){var n=r.errorMessages?r.errorMessages:[];n=_.map(n,function(e){return{message:e,noAutoescape:t}});var o=r.errors?r.errors:{};o=_.map(o,function(e,r){return{contextId:r,errors:[{message:e,noAutoescape:t}]}});var s={error:{errors:n,contextualErrors:o}};return e._extendResult(s)},e._convertFrameworkErrors=function(r){var t={error:{errors:[{message:r.message}],contextualErrors:[]}};return e._extendResult(t)},e._convertGenericErrors=function(r,t){var n=e._extendResult({});return 0===r.status&&"abort"===t?n.addGlobalError({message:"Ajax.error.timeout"}):t&&n.addGlobalError({message:t}),n},e._hasUsernameResponseHeader=function(e){return!!e.getResponseHeader("X-AUSERNAME")},e._getUserForResponse=function(e){return e.getResponseHeader("X-AUSERNAME")?decodeURIComponent(e.getResponseHeader("X-AUSERNAME")):"anonymous"},function(){var r=require("jira/util/data/meta");e.getUserFromAJS=function(){var e=r.get("remote-user");return e?e:"anonymous"}}(),e.matchesCurrentUser=function(r){return!r.getResponseHeader||!r.getAllResponseHeaders||!e._hasUsernameResponseHeader(r)||e.getUserFromAJS()===e._getUserForResponse(r)||204===r.status&&!r.getAllResponseHeaders()&&AJS.$.browser.msie},e._handleCurrentUserChanged=function(r){var t=e.getUserFromAJS(),n=e._getUserForResponse(r);return"anonymous"!==t&&"anonymous"===n?location.href=GH.Navigation.getLoginUrl():location.reload(),AJS.$.Deferred()},e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:greenhopper-epics-issue-web-panel-resources', location = 'includes/js/viewissue/QuickCreateIssueInEpic.js' */
!function(){GH.QuickCreateIssueInEpic={},GH.QuickCreateIssueInEpic.epicKey=null,GH.QuickCreateIssueInEpic.epicName=null;var e=require("jira-agile/rapid/ajax");GH.QuickCreateIssueInEpic.init=function(){JIRA.unbind("QuickCreateIssueInEpic.sessionComplete"),JIRA.bind("QuickCreateIssueInEpic.sessionComplete",function(e,i){AJS.$(document).unbind(JIRA.EpicPicker.READY_EVENT),GH.QuickCreateIssueInEpic.handleIssuesCreated(i)})},GH.QuickCreateIssueInEpic.createQuickCreateIssueForEpicDialog=function(){if(GH.QuickCreateIssueInEpic.epicKey=AJS.$("#ghx-epic-key").text(),GH.QuickCreateIssueInEpic.epicName=AJS.$("#ghx-epic-name").text(),"true"==AJS.$("#ghx-hide-table").text()){var e=AJS.$("#ghx-issues-in-epic-table");e.addClass("hidden")}var i=new JIRA.Forms.Container(function(){var e={title:AJS.format("Create issue in epic : {0}",GH.QuickCreateIssueInEpic.epicKey),id:"create-issue-in-epic-form",globalEventNamespaces:["QuickCreateIssueInEpic"]},i=new JIRA.Forms.CreateIssueModel({projectId:e.pid,issueType:e.issueType}),s=new JIRA.Forms.ConfigurableCreateIssueForm({model:i,title:e.title,globalEventNamespaces:e.globalEventNamespaces}),n=new JIRA.Forms.UnconfigurableCreateIssueForm({model:i,title:e.title,globalEventNamespaces:e.globalEventNamespaces});return{globalEventNamespaces:e.globalEventNamespaces,model:i,errorHandler:new JIRA.Forms.CreateIssueError,configurableForm:s,unconfigurableForm:n}});i.bind("contentRefreshed",function(){AJS.$(document).unbind("QuickCreateIssueInEpic.validationError"),AJS.$(document).unbind(JIRA.EpicPicker.READY_EVENT),AJS.$(document).bind(JIRA.EpicPicker.READY_EVENT,function(e,i){i.setSelection(new AJS.ItemDescriptor({value:"key:"+GH.QuickCreateIssueInEpic.epicKey,label:GH.QuickCreateIssueInEpic.epicName})),setTimeout(function(){i.disable()},0),AJS.$(document).bind("QuickCreateIssueInEpic.validationError",function(e){i.disable()})})});var s=i.asDialog({windowTitle:AJS.format("Create issue in epic : {0}",GH.QuickCreateIssueInEpic.epicKey),id:"create-issue-dialog"});return s.bind("Dialog.hide",function(){AJS.$(document).unbind(JIRA.EpicPicker.READY_EVENT),AJS.$(document).unbind("QuickCreateIssueInEpic.validationError")}),s},GH.QuickCreateIssueInEpic.handleIssuesCreated=function(e){var i=_.pluck(e,"issueKey");GH.QuickCreateIssueInEpic.addIssuesToEpic(e).done(function(){GH.QuickCreateIssueInEpic.refreshIssuesInEpicTable(i)})},GH.QuickCreateIssueInEpic.addIssuesToEpic=function(i){var s=_.pluck(i,"issueKey"),n={ignoreEpics:!0,issueKeys:s};return e.put({url:"/epics/"+GH.QuickCreateIssueInEpic.epicKey+"/add",data:n})},GH.QuickCreateIssueInEpic.refreshIssuesInEpicTable=function(e){var i=AJS.$("#greenhopper-epics-issue-web-panel");i.addClass("updating"),AJS.$.ajax({url:contextPath+"/secure/ViewIssuesInEpic.jspa?epicKey="+GH.QuickCreateIssueInEpic.epicKey+"&decorator=none"}).done(function(s){i.find(".mod-content").html(s),JIRA.Dropdowns.bindIssueActionsDds(i),AJS.$.each(e,function(e,s){i.find(".issuerow[data-issuekey='"+s+"']").fadeInBackground()});var n=AJS.$("#ghx-issues-in-epic-table"),t="true"==AJS.$("#ghx-hide-table").text();t?n.addClass("hidden"):(AJS.$("#ghx-issues-in-epic-empty-message").remove(),n.removeClass("hidden"));var c=i.find(".issuerow").length;i.find(".toggle-title").text(AJS.format("{0,choice,0#{0} Issues|1#{0} Issue|1\u003c{0} Issues} in this epic",c)),i.removeClass("updating")})},AJS.$(function(){var e=require("jira/util/events/types");GH.QuickCreateIssueInEpic.init(),JIRA.bind(e.NEW_CONTENT_ADDED,function(e,i,s){s===JIRA.CONTENT_ADDED_REASON.pageLoad&&GH.QuickCreateIssueInEpic.init()}),AJS.$(document).undelegate("#gh-create-issue-in-epic-lnk","click"),AJS.$(document).delegate("#gh-create-issue-in-epic-lnk","click",function(e){var i=GH.QuickCreateIssueInEpic.createQuickCreateIssueForEpicDialog();i.show(),e.preventDefault()})})}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:greenhopper-agile-issue-web-panel-resources', location = 'includes/js/viewissue/agile-panel-analytics.js' */
!function(i){var r={initialise:function(){var r;try{r=require("jira/components/analytics-tracker/tracker")}catch(e){}if("undefined"!=typeof r){var a=i("body");a.on("click",".issueaction-greenhopper-rapidboard-operation.js-rapidboard-operation-issue",function(i){r.trackEvent("viewissue.agile.viewonboard","click")}),a.on("click",".js-select-rapidboard",function(e){var a=i(".js-select-rapidboard").data("board-id"),n=i(".js-select-rapidboard").data("sprint-id");r.trackEvent("viewissue.agile.selectboard","click",{boardId:a,sprintId:n})}),a.on("click",".issueaction-greenhopper-rapidboard-operation.js-rapidboard-activesprints-link",function(e){var a=i(".issueaction-greenhopper-rapidboard-operation.js-rapidboard-activesprints-link").data("sprint-id");r.trackEvent("viewissue.agile.active.sprint","click",{sprintId:a})}),a.on("click",".issueaction-greenhopper-rapidboard-operation.js-rapidboard-completedsprints-link",function(e){var a=i(".issueaction-greenhopper-rapidboard-operation.js-rapidboard-completedsprints-link").data("sprint-id");r.trackEvent("viewissue.agile.completed.sprint","click",{sprintId:a})}),a.on("click",".issueaction-greenhopper-rapidboard-operation.js-rapidboard-futuresprints-link",function(e){var a=i(".issueaction-greenhopper-rapidboard-operation.js-rapidboard-futuresprints-link").data("sprint-id");r.trackEvent("viewissue.agile.future.sprint","click",{sprintId:a})})}}};return i(document).ready(function(){var e=i.Deferred();return e.done(r.initialise()),e}),r}(require("jquery"));;
;
/* module-key = 'com.atlassian.plugin.jslibs:marionette-1.4.1-factory', location = 'factories/marionette/1.4.1/marionette-1.4.1-factory.js' */
(function(e){define("atlassian/libs/factories/marionette-1.4.1",function(){return function(d,k){var g=k.Marionette;e.call({_:d,Backbone:k});var h=k.Marionette;h.VERSION="1.4.1";k.Marionette=g;return h}})})(function(){var e=this.Backbone,d=this._,k=function(a){this._views={};this._indexByModel={};this._indexByCustom={};this._updateLength();d.each(a,this.add,this)};d.extend(k.prototype,{add:function(a,b){var f=a.cid;this._views[f]=a;a.model&&(this._indexByModel[a.model.cid]=f);b&&(this._indexByCustom[b]=
f);this._updateLength()},findByModel:function(a){return this.findByModelCid(a.cid)},findByModelCid:function(a){return this.findByCid(this._indexByModel[a])},findByCustom:function(a){return this.findByCid(this._indexByCustom[a])},findByIndex:function(a){return d.values(this._views)[a]},findByCid:function(a){return this._views[a]},remove:function(a){var b=a.cid;a.model&&delete this._indexByModel[a.model.cid];d.any(this._indexByCustom,function(a,c){if(a===b)return delete this._indexByCustom[c],!0},this);
delete this._views[b];this._updateLength()},call:function(a){this.apply(a,d.tail(arguments))},apply:function(a,b){d.each(this._views,function(f){d.isFunction(f[a])&&f[a].apply(f,b||[])})},_updateLength:function(){this.length=d.size(this._views)}});d.each("forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck".split(" "),function(a){k.prototype[a]=function(){var b=[d.values(this._views)].concat(d.toArray(arguments));
return d[a].apply(d,b)}});var g={},h=function(a){this.options=a;this._wreqrHandlers={};d.isFunction(this.initialize)&&this.initialize(a)};h.extend=e.Model.extend;d.extend(h.prototype,e.Events,{setHandlers:function(a){d.each(a,function(a,f){var c=null;d.isObject(a)&&!d.isFunction(a)&&(c=a.context,a=a.callback);this.setHandler(f,a,c)},this)},setHandler:function(a,b,f){this._wreqrHandlers[a]={callback:b,context:f};this.trigger("handler:add",a,b,f)},hasHandler:function(a){return!!this._wreqrHandlers[a]},
getHandler:function(a){var b=this._wreqrHandlers[a];if(!b)throw Error("Handler not found for '"+a+"'");return function(){var a=Array.prototype.slice.apply(arguments);return b.callback.apply(b.context,a)}},removeHandler:function(a){delete this._wreqrHandlers[a]},removeAllHandlers:function(){this._wreqrHandlers={}}});g.Handlers=h;h=function(a){this.options=a;this._commands={};d.isFunction(this.initialize)&&this.initialize(a)};d.extend(h.prototype,e.Events,{getCommands:function(a){var b=this._commands[a];
b||(b={command:a,instances:[]},this._commands[a]=b);return b},addCommand:function(a,b){this.getCommands(a).instances.push(b)},clearCommands:function(a){this.getCommands(a).instances=[]}});g.CommandStorage=h;h=g.Handlers.extend({storageType:g.CommandStorage,constructor:function(a){this.options=a||{};this._initializeStorage(this.options);this.on("handler:add",this._executeCommands,this);var b=Array.prototype.slice.call(arguments);g.Handlers.prototype.constructor.apply(this,b)},execute:function(a,b){a=
arguments[0];b=Array.prototype.slice.call(arguments,1);this.hasHandler(a)?this.getHandler(a).apply(this,b):this.storage.addCommand(a,b)},_executeCommands:function(a,b,f){var c=this.storage.getCommands(a);d.each(c.instances,function(a){b.apply(f,a)});this.storage.clearCommands(a)},_initializeStorage:function(a){a=a.storageType||this.storageType;this.storage=d.isFunction(a)?new a:a}});g.Commands=h;g.RequestResponse=g.Handlers.extend({request:function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,
1);return this.getHandler(a).apply(this,b)}});h=function(){};h.extend=e.Model.extend;d.extend(h.prototype,e.Events);g.EventAggregator=h;var l=function(a,b){var f=Error(a);f.name=b||"Error";throw f;},c={};e.Marionette=c;c.$=e.$;var i=Array.prototype.slice;c.extend=e.Model.extend;c.getOption=function(a,b){if(a&&b)return a.options&&b in a.options&&void 0!==a.options[b]?a.options[b]:a[b]};var p=function(a,b,f){return f.toUpperCase()},q=/(^|:)(\w)/gi;c.triggerMethod=function(a){var b=this["on"+a.replace(q,
p)];d.isFunction(this.trigger)&&this.trigger.apply(this,arguments);if(d.isFunction(b))return b.apply(this,d.tail(arguments))};var m=function(a){a._isShown&&a._isRendered&&d.isFunction(a.triggerMethod)&&a.triggerMethod("dom:refresh")};c.MonitorDOMRefresh=function(a){a.listenTo(a,"show",function(){a._isShown=!0;m(a)});a.listenTo(a,"render",function(){a._isRendered=!0;m(a)})};var r=function(a,b,f,c){c=c.split(/\s+/);d.each(c,function(c){var d=a[c];d||l("Method '"+c+"' was configured as an event handler, but does not exist.");
a.listenTo(b,f,d,a)})},s=function(a,b,c,d){a.listenTo(b,c,d,a)},t=function(a,b,c,j){j=j.split(/\s+/);d.each(j,function(d){a.stopListening(b,c,a[d],a)})},u=function(a,b,c,d){a.stopListening(b,c,d,a)},n=function(a,b,c,j,e){b&&c&&(d.isFunction(c)&&(c=c.call(a)),d.each(c,function(c,f){d.isFunction(c)?j(a,b,f,c):e(a,b,f,c)}))};c.bindEntityEvents=function(a,b,c){n(a,b,c,s,r)};c.unbindEntityEvents=function(a,b,c){n(a,b,c,u,t)};c.Callbacks=function(){this._deferred=c.$.Deferred();this._callbacks=[]};d.extend(c.Callbacks.prototype,
{add:function(a,b){this._callbacks.push({cb:a,ctx:b});this._deferred.done(function(c,d){b&&(c=b);a.call(c,d)})},run:function(a,b){this._deferred.resolve(b,a)},reset:function(){var a=this._callbacks;this._deferred=c.$.Deferred();this._callbacks=[];d.each(a,function(a){this.add(a.cb,a.ctx)},this)}});c.Controller=function(a){this.triggerMethod=c.triggerMethod;this.options=a||{};d.isFunction(this.initialize)&&this.initialize(this.options)};c.Controller.extend=c.extend;d.extend(c.Controller.prototype,
e.Events,{close:function(){this.stopListening();this.triggerMethod("close");this.unbind()}});c.Region=function(a){this.options=a||{};this.el=c.getOption(this,"el");if(!this.el){var b=Error("An 'el' must be specified for a region.");b.name="NoElError";throw b;}this.initialize&&(b=Array.prototype.slice.apply(arguments),this.initialize.apply(this,b))};d.extend(c.Region,{buildRegion:function(a,b){var c="string"===typeof a,j="string"===typeof a.selector,e="undefined"===typeof a.regionType,g="function"===
typeof a;if(!g&&!c&&!j)throw Error("Region must be specified as a Region type, a selector string or an object with selector property");var h,i;c&&(h=a);a.selector&&(h=a.selector);g&&(i=a);!g&&e&&(i=b);a.regionType&&(i=a.regionType);c=new i({el:h});a.parentEl&&(c.getEl=function(b){var c=a.parentEl;d.isFunction(c)&&(c=c());return c.find(b)});return c}});d.extend(c.Region.prototype,e.Events,{show:function(a){this.ensureEl();var b=a.isClosed||d.isUndefined(a.$el),f=a!==this.currentView;f&&this.close();
a.render();(f||b)&&this.open(a);this.currentView=a;c.triggerMethod.call(this,"show",a);c.triggerMethod.call(a,"show")},ensureEl:function(){if(!this.$el||0===this.$el.length)this.$el=this.getEl(this.el)},getEl:function(a){return c.$(a)},open:function(a){this.$el.empty().append(a.el)},close:function(){var a=this.currentView;a&&!a.isClosed&&(a.close?a.close():a.remove&&a.remove(),c.triggerMethod.call(this,"close"),delete this.currentView)},attachView:function(a){this.currentView=a},reset:function(){this.close();
delete this.$el}});c.Region.extend=c.extend;var o=c.Controller.extend({constructor:function(a){this._regions={};c.Controller.prototype.constructor.call(this,a)},addRegions:function(a,b){var c={};d.each(a,function(a,e){"string"===typeof a&&(a={selector:a});a.selector&&(a=d.defaults({},a,b));var g=this.addRegion(e,a);c[e]=g},this);return c},addRegion:function(a,b){var f;f=d.isObject(b);var j=d.isString(b),e=!!b.selector;f=j||f&&e?c.Region.buildRegion(b,c.Region):d.isFunction(b)?c.Region.buildRegion(b,
c.Region):b;this._store(a,f);this.triggerMethod("region:add",a,f);return f},get:function(a){return this._regions[a]},removeRegion:function(a){this._remove(a,this._regions[a])},removeRegions:function(){d.each(this._regions,function(a,b){this._remove(b,a)},this)},closeRegions:function(){d.each(this._regions,function(a){a.close()},this)},close:function(){this.removeRegions();var a=Array.prototype.slice.call(arguments);c.Controller.prototype.close.apply(this,a)},_store:function(a,b){this._regions[a]=
b;this._setLength()},_remove:function(a,b){b.close();delete this._regions[a];this._setLength();this.triggerMethod("region:remove",a,b)},_setLength:function(){this.length=d.size(this._regions)}});d.each("forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck".split(" "),function(a){o.prototype[a]=function(){var b=[d.values(this._regions)].concat(d.toArray(arguments));return d[a].apply(d,b)}});c.RegionManager=
o;c.TemplateCache=function(a){this.templateId=a};d.extend(c.TemplateCache,{templateCaches:{},get:function(a){var b=this.templateCaches[a];b||(b=new c.TemplateCache(a),this.templateCaches[a]=b);return b.load()},clear:function(){var a,b=i.call(arguments),c=b.length;if(0<c)for(a=0;a<c;a++)delete this.templateCaches[b[a]];else this.templateCaches={}}});d.extend(c.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var a=this.loadTemplate(this.templateId);return this.compiledTemplate=
this.compileTemplate(a)},loadTemplate:function(a){var b=c.$(a).html();(!b||0===b.length)&&l("Could not find template: '"+a+"'","NoTemplateError");return b},compileTemplate:function(a){return d.template(a)}});c.Renderer={render:function(a,b){if(!a){var d=Error("Cannot render the template since it's false, null or undefined.");d.name="TemplateNotFoundError";throw d;}return("function"===typeof a?a:c.TemplateCache.get(a))(b)}};c.View=e.View.extend({constructor:function(a){d.bindAll(this,"render");var b=
Array.prototype.slice.apply(arguments);this.options=d.extend({},this.options,a);this.events=this.normalizeUIKeys(d.result(this,"events"));e.View.prototype.constructor.apply(this,b);c.MonitorDOMRefresh(this);this.listenTo(this,"show",this.onShowCalled,this)},triggerMethod:c.triggerMethod,getTemplate:function(){return c.getOption(this,"template")},mixinTemplateHelpers:function(a){var a=a||{},b=c.getOption(this,"templateHelpers");d.isFunction(b)&&(b=b.call(this));return d.extend(a,b)},normalizeUIKeys:function(a){if("undefined"!==
typeof a)return d.each(d.keys(a),function(b){var c=b.split("@ui.");2===c.length&&(a[c[0]+this.ui[c[1]]]=a[b],delete a[b])},this),a},configureTriggers:function(){if(this.triggers){var a={},b=this.normalizeUIKeys(d.result(this,"triggers"));d.each(b,function(b,c){var e=d.isObject(b),g=e?b.event:b;a[c]=function(a){if(a){var c=a.preventDefault,d=a.stopPropagation,j=e?b.stopPropagation:d;(e?b.preventDefault:c)&&c&&c.apply(a);j&&d&&d.apply(a)}this.triggerMethod(g,{view:this,model:this.model,collection:this.collection})}},
this);return a}},delegateEvents:function(a){this._delegateDOMEvents(a);c.bindEntityEvents(this,this.model,c.getOption(this,"modelEvents"));c.bindEntityEvents(this,this.collection,c.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(a){a=a||this.events;d.isFunction(a)&&(a=a.call(this));var b={},c=this.configureTriggers();d.extend(b,a,c);e.View.prototype.delegateEvents.call(this,b)},undelegateEvents:function(){var a=Array.prototype.slice.call(arguments);e.View.prototype.undelegateEvents.apply(this,
a);c.unbindEntityEvents(this,this.model,c.getOption(this,"modelEvents"));c.unbindEntityEvents(this,this.collection,c.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){!this.isClosed&&!1!==this.triggerMethod("before:close")&&(this.isClosed=!0,this.triggerMethod("close"),this.unbindUIElements(),this.remove())},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var a=d.result(this,"_uiBindings");this.ui={};d.each(d.keys(a),function(b){this.ui[b]=
this.$(a[b])},this)}},unbindUIElements:function(){this.ui&&this._uiBindings&&(d.each(this.ui,function(a,b){delete this.ui[b]},this),this.ui=this._uiBindings,delete this._uiBindings)}});c.ItemView=c.View.extend({constructor:function(){c.View.prototype.constructor.apply(this,i.call(arguments))},serializeData:function(){var a={};this.model?a=this.model.toJSON():this.collection&&(a={items:this.collection.toJSON()});return a},render:function(){this.isClosed=!1;this.triggerMethod("before:render",this);
this.triggerMethod("item:before:render",this);var a=this.serializeData(),a=this.mixinTemplateHelpers(a),b=this.getTemplate(),a=c.Renderer.render(b,a);this.$el.html(a);this.bindUIElements();this.triggerMethod("render",this);this.triggerMethod("item:rendered",this);return this},close:function(){this.isClosed||(this.triggerMethod("item:before:close"),c.View.prototype.close.apply(this,i.call(arguments)),this.triggerMethod("item:closed"))}});c.CollectionView=c.View.extend({itemViewEventPrefix:"itemview",
constructor:function(a){this._initChildViewStorage();c.View.prototype.constructor.apply(this,i.call(arguments));this._initialEvents();this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment()},startBuffering:function(){this.initRenderBuffer();this.isBuffering=!0},endBuffering:function(){this.appendBuffer(this,this.elBuffer);this.initRenderBuffer();this.isBuffering=!1},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,
this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this.render,this))},addChildView:function(a){this.closeEmptyView();var b=this.getItemView(a),c=this.collection.indexOf(a);this.addItemView(a,b,c)},onShowCalled:function(){this.children.each(function(a){c.triggerMethod.call(a,"show")})},triggerBeforeRender:function(){this.triggerMethod("before:render",this);this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",
this);this.triggerMethod("collection:rendered",this)},render:function(){this.isClosed=!1;this.triggerBeforeRender();this._renderChildren();this.triggerRendered();return this},_renderChildren:function(){this.startBuffering();this.closeEmptyView();this.closeChildren();this.collection&&0<this.collection.length?this.showCollection():this.showEmptyView();this.endBuffering()},showCollection:function(){var a;this.collection.each(function(b,c){a=this.getItemView(b);this.addItemView(b,a,c)},this)},showEmptyView:function(){var a=
this.getEmptyView();if(a&&!this._showingEmptyView){this._showingEmptyView=!0;var b=new e.Model;this.addItemView(b,a,0)}},closeEmptyView:function(){this._showingEmptyView&&(this.closeChildren(),delete this._showingEmptyView)},getEmptyView:function(){return c.getOption(this,"emptyView")},getItemView:function(){var a=c.getOption(this,"itemView");a||l("An `itemView` must be specified","NoItemViewError");return a},addItemView:function(a,b,f){var e=c.getOption(this,"itemViewOptions");d.isFunction(e)&&(e=
e.call(this,a,f));a=this.buildItemView(a,b,e);this.addChildViewEventForwarding(a);this.triggerMethod("before:item:added",a);this.children.add(a);this.renderItemView(a,f);this._isShown&&c.triggerMethod.call(a,"show");this.triggerMethod("after:item:added",a)},addChildViewEventForwarding:function(a){var b=c.getOption(this,"itemViewEventPrefix");this.listenTo(a,"all",function(){var d=i.call(arguments);d[0]=b+":"+d[0];d.splice(1,0,a);c.triggerMethod.apply(this,d)},this)},renderItemView:function(a,b){a.render();
this.appendHtml(this,a,b)},buildItemView:function(a,b,c){a=d.extend({model:a},c);return new b(a)},removeItemView:function(a){a=this.children.findByModel(a);this.removeChildView(a);this.checkEmpty()},removeChildView:function(a){a&&(this.stopListening(a),a.close?a.close():a.remove&&a.remove(),this.children.remove(a));this.triggerMethod("item:removed",a)},checkEmpty:function(){(!this.collection||0===this.collection.length)&&this.showEmptyView()},appendBuffer:function(a,b){a.$el.append(b)},appendHtml:function(a,
b){a.isBuffering?a.elBuffer.appendChild(b.el):a.$el.append(b.el)},_initChildViewStorage:function(){this.children=new k},close:function(){this.isClosed||(this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),c.View.prototype.close.apply(this,i.call(arguments)))},closeChildren:function(){this.children.each(function(a){this.removeChildView(a)},this);this.checkEmpty()}});c.CompositeView=c.CollectionView.extend({constructor:function(){c.CollectionView.prototype.constructor.apply(this,
i.call(arguments))},_initialEvents:function(){this.once("render",function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this._renderChildren,this))})},getItemView:function(){var a=c.getOption(this,"itemView")||this.constructor;a||l("An `itemView` must be specified","NoItemViewError");return a},serializeData:function(){var a={};this.model&&(a=this.model.toJSON());
return a},render:function(){this.isRendered=!0;this.isClosed=!1;this.resetItemViewContainer();this.triggerBeforeRender();var a=this.renderModel();this.$el.html(a);this.bindUIElements();this.triggerMethod("composite:model:rendered");this._renderChildren();this.triggerMethod("composite:rendered");this.triggerRendered();return this},_renderChildren:function(){this.isRendered&&(c.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},renderModel:function(){var a=
{},a=this.serializeData(),a=this.mixinTemplateHelpers(a),b=this.getTemplate();return c.Renderer.render(b,a)},appendBuffer:function(a,b){this.getItemViewContainer(a).append(b)},appendHtml:function(a,b){a.isBuffering?a.elBuffer.appendChild(b.el):this.getItemViewContainer(a).append(b.el)},getItemViewContainer:function(a){if("$itemViewContainer"in a)return a.$itemViewContainer;var b;(b=c.getOption(a,"itemViewContainer"))?(b=d.isFunction(b)?b():b,b=a.$(b),0>=b.length&&l("The specified `itemViewContainer` was not found: "+
a.itemViewContainer,"ItemViewContainerMissingError")):b=a.$el;return a.$itemViewContainer=b},resetItemViewContainer:function(){this.$itemViewContainer&&delete this.$itemViewContainer}});c.Layout=c.ItemView.extend({regionType:c.Region,constructor:function(a){a=a||{};this._firstRender=!0;this._initializeRegions(a);c.ItemView.prototype.constructor.call(this,a)},render:function(){this.isClosed&&this._initializeRegions();this._firstRender?this._firstRender=!1:this.isClosed||this._reInitializeRegions();
var a=Array.prototype.slice.apply(arguments);return c.ItemView.prototype.render.apply(this,a)},close:function(){if(!this.isClosed){this.regionManager.close();var a=Array.prototype.slice.apply(arguments);c.ItemView.prototype.close.apply(this,a)}},addRegion:function(a,b){var c={};c[a]=b;return this._buildRegions(c)[a]},addRegions:function(a){this.regions=d.extend({},this.regions,a);return this._buildRegions(a)},removeRegion:function(a){delete this.regions[a];return this.regionManager.removeRegion(a)},
_buildRegions:function(a){var b=this,d={regionType:c.getOption(this,"regionType"),parentEl:function(){return b.$el}};return this.regionManager.addRegions(a,d)},_initializeRegions:function(a){this._initRegionManager();a=d.isFunction(this.regions)?this.regions(a):this.regions||{};this.addRegions(a)},_reInitializeRegions:function(){this.regionManager.closeRegions();this.regionManager.each(function(a){a.reset()})},_initRegionManager:function(){this.regionManager=new c.RegionManager;this.listenTo(this.regionManager,
"region:add",function(a,b){this[a]=b;this.trigger("region:add",a,b)});this.listenTo(this.regionManager,"region:remove",function(a,b){delete this[a];this.trigger("region:remove",a,b)})}});c.AppRouter=e.Router.extend({constructor:function(a){e.Router.prototype.constructor.apply(this,i.call(arguments));this.options=a||{};var b=c.getOption(this,"appRoutes"),d=this._getController();this.processAppRoutes(d,b)},appRoute:function(a,b){var c=this._getController();this._addAppRoute(c,a,b)},processAppRoutes:function(a,
b){if(b){var c=d.keys(b).reverse();d.each(c,function(c){this._addAppRoute(a,c,b[c])},this)}},_getController:function(){return c.getOption(this,"controller")},_addAppRoute:function(a,b,c){var e=a[c];if(!e)throw Error("Method '"+c+"' was not found on the controller");this.route(b,c,d.bind(e,a))}});c.Application=function(a){this._initRegionManager();this._initCallbacks=new c.Callbacks;this.vent=new g.EventAggregator;this.commands=new g.Commands;this.reqres=new g.RequestResponse;this.submodules={};d.extend(this,
a);this.triggerMethod=c.triggerMethod};d.extend(c.Application.prototype,e.Events,{execute:function(){var a=Array.prototype.slice.apply(arguments);this.commands.execute.apply(this.commands,a)},request:function(){var a=Array.prototype.slice.apply(arguments);return this.reqres.request.apply(this.reqres,a)},addInitializer:function(a){this._initCallbacks.add(a)},start:function(a){this.triggerMethod("initialize:before",a);this._initCallbacks.run(a,this);this.triggerMethod("initialize:after",a);this.triggerMethod("start",
a)},addRegions:function(a){return this._regionManager.addRegions(a)},closeRegions:function(){this._regionManager.closeRegions()},removeRegion:function(a){this._regionManager.removeRegion(a)},getRegion:function(a){return this._regionManager.get(a)},module:function(a,b){var d=i.call(arguments);d.unshift(this);return c.Module.create.apply(c.Module,d)},_initRegionManager:function(){this._regionManager=new c.RegionManager;this.listenTo(this._regionManager,"region:add",function(a,b){this[a]=b});this.listenTo(this._regionManager,
"region:remove",function(a){delete this[a]})}});c.Application.extend=c.extend;c.Module=function(a,b){this.moduleName=a;this.submodules={};this._setupInitializersAndFinalizers();this.app=b;this.startWithParent=!0;this.triggerMethod=c.triggerMethod};d.extend(c.Module.prototype,e.Events,{addInitializer:function(a){this._initializerCallbacks.add(a)},addFinalizer:function(a){this._finalizerCallbacks.add(a)},start:function(a){this._isInitialized||(d.each(this.submodules,function(b){b.startWithParent&&b.start(a)}),
this.triggerMethod("before:start",a),this._initializerCallbacks.run(a,this),this._isInitialized=!0,this.triggerMethod("start",a))},stop:function(){this._isInitialized&&(this._isInitialized=!1,c.triggerMethod.call(this,"before:stop"),d.each(this.submodules,function(a){a.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),c.triggerMethod.call(this,"stop"))},addDefinition:function(a,b){this._runModuleDefinition(a,b)},_runModuleDefinition:function(a,
b){if(a){var f=d.flatten([this,this.app,e,c,c.$,d,b]);a.apply(this,f)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new c.Callbacks;this._finalizerCallbacks=new c.Callbacks}});d.extend(c.Module,{create:function(a,b,c){var e=a,g=i.call(arguments);g.splice(0,3);var b=b.split("."),h=[];h[b.length-1]=c;d.each(b,function(b,c){var d=e;e=this._getModule(d,b,a);this._addModuleDefinition(d,e,h[c],g)},this);return e},_getModule:function(a,b,d){var e=a[b];e||(e=new c.Module(b,d),a[b]=
e,a.submodules[b]=e);return e},_addModuleDefinition:function(a,b,c,e){var g;d.isFunction(c)?(g=c,c=!0):d.isObject(c)?(g=c.define,c=c.startWithParent):c=!0;g&&b.addDefinition(g,e);b.startWithParent=b.startWithParent&&c;b.startWithParent&&!b.startWithParentIsConfigured&&(b.startWithParentIsConfigured=!0,a.addInitializer(function(a){b.startWithParent&&b.start(a)}))}});c.Wreqr=g;c.ChildViewContainer=k});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:backbone', location = 'libs/backbone.js' */
define("jira/components/libs/backbone",["require"],function(e){"use strict";var n=e("atlassian/libs/factories/backbone-1.0.0"),r=e("jira/components/libs/underscore"),i=e("jquery");return n(r,i)});
//# sourceMappingURL=backbone-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'libs/marionette-1.4.1.js' */
define("jira/components/libs/marionette-1.4.1",["require"],function(e){"use strict";var i=e("atlassian/libs/factories/marionette-1.4.1"),n=e("jira/components/libs/backbone"),r=e("jira/components/libs/underscore");return i(r,n)});
//# sourceMappingURL=marionette-1.4.1-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'libs/mariontte-1.4.1-mixins/Mixins.js' */
define("jira/components/libs/marionette-1.4.1/mixins",["require"],function(e){"use strict";var t=e("jira/components/libs/underscore");return{listenAndRethrow:function(e,i){i=[].concat(i),t.each(i,function(i){this.listenTo(e,i,function(){this.trigger.apply(this,[i].concat(t.toArray(arguments)))},this)},this)},triggerPreventable:function(e,i){var n=t.defaults({},i||{},{isPrevented:!1,emitter:this,preventDefault:function(){this.isPrevented=!0}});return this.trigger(e,n),n}}}),AJS.namespace("JIRA.Marionette.Mixins",null,require("jira/components/libs/marionette-1.4.1/mixins"));
//# sourceMappingURL=Mixins-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'libs/mariontte-1.4.1-mixins/LinkRegion.js' */
define("jira/components/libs/marionette-1.4.1/linkregion",["require"],function(e){"use strict";var n=e("jira/components/libs/marionette-1.4.1");return n.Region.extend({open:function(e){this.$el.append(e.$el.children()),e.setElement(this.$el)}})}),AJS.namespace("JIRA.Marionette.LinkRegion",null,require("jira/components/libs/marionette-1.4.1/linkregion"));
//# sourceMappingURL=LinkRegion-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'libs/mariontte-1.4.1-mixins/ReplaceRegion.js' */
define("jira/components/libs/marionette-1.4.1/replaceregion",["require"],function(e){"use strict";var n=e("jira/components/libs/marionette-1.4.1");return n.Region.extend({open:function(e){this.$el.replaceWith(e.el)}})}),AJS.namespace("JIRA.Marionette.ReplaceRegion",null,require("jira/components/libs/marionette-1.4.1/replaceregion"));
//# sourceMappingURL=ReplaceRegion-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'libs/mariontte-1.4.1-mixins/Controller.js' */
define("jira/components/libs/marionette-1.4.1/controller",["require"],function(e){"use strict";var n=e("jira/components/libs/underscore"),r=e("jira/components/libs/marionette-1.4.1"),o=e("jira/components/libs/marionette-1.4.1/mixins"),t=r.Controller.extend({});return n.extend(t.prototype,o),t}),AJS.namespace("JIRA.Marionette.Controller",null,require("jira/components/libs/marionette-1.4.1/controller"));
//# sourceMappingURL=Controller-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'libs/mariontte-1.4.1-mixins/ItemView.js' */
define("jira/components/libs/marionette-1.4.1/itemview",["require"],function(e){"use strict";var t=e("jira/components/libs/marionette-1.4.1");return t.ItemView.extend({renderTemplate:function(){var e=this.serializeData();e=this.mixinTemplateHelpers(e);var i=this.getTemplate(),n=t.Renderer.render(i,e);return t.$(n)},applyToDom:function(){this.delegateEvents(),this.bindUIElements(),this.triggerMethod("applyToDom")},unwrapTemplate:function(){if(this.$el.parent().length){var e=this.$el.children();this.$el.replaceWith(e),this.setElement(e)}else this.setElement(this.$el.children())}})}),AJS.namespace("JIRA.Marionette.ItemView",null,require("jira/components/libs/marionette-1.4.1/itemview"));
//# sourceMappingURL=ItemView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'libs/mariontte-1.4.1-mixins/CollectionView.js' */
define("jira/components/libs/marionette-1.4.1/collectionview",["require"],function(e){"use strict";var n=e("jira/components/libs/marionette-1.4.1"),t=e("jira/components/libs/marionette-1.4.1/itemview");return n.CollectionView.extend({_appendHtmlWithIndex:function(e,n,t){var i=e.children(),o=i.length;t<=0?e.prepend(n.$el):!o||t>=o?e.append(n.$el):n.$el.insertBefore(i.eq(t))},appendHtml:function(e,n,t){this._appendHtmlWithIndex(e.$el,n,t)},unwrapTemplate:function(){t.prototype.unwrapTemplate.call(this)}})}),AJS.namespace("JIRA.Marionette.CollectionView",null,require("jira/components/libs/marionette-1.4.1/collectionview"));
//# sourceMappingURL=CollectionView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'libs/mariontte-1.4.1-mixins/CompositeView.js' */
define("jira/components/libs/marionette-1.4.1/compositeview",["require"],function(e){"use strict";var t=e("jira/components/libs/marionette-1.4.1"),i=e("jira/components/libs/marionette-1.4.1/collectionview"),n=e("jira/components/libs/marionette-1.4.1/itemview");return t.CompositeView.extend({appendHtml:function(e,t,n){i.prototype._appendHtmlWithIndex(this.getItemViewContainer(e),t,n)},unwrapTemplate:function(){n.prototype.unwrapTemplate.call(this)}})}),AJS.namespace("JIRA.Marionette.CompositeView",null,require("jira/components/libs/marionette-1.4.1/compositeview"));
//# sourceMappingURL=CompositeView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'libs/mariontte-1.4.1-mixins/Layout.js' */
define("jira/components/libs/marionette-1.4.1/layout",["require"],function(e){"use strict";var t=e("jira/components/libs/underscore"),i=e("jira/components/libs/marionette-1.4.1"),n=e("jira/components/libs/marionette-1.4.1/mixins"),o=i.Layout.extend({applyToDom:function(){this.delegateEvents(),this.bindUIElements(),this._reInitializeRegions(),this.triggerMethod("applyToDom")}});return t.extend(o.prototype,n),o}),AJS.namespace("JIRA.Marionette.Layout",null,require("jira/components/libs/marionette-1.4.1/layout"));
//# sourceMappingURL=Layout-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'libs/mariontte-1.4.1-mixins/Application.js' */
define("jira/components/libs/marionette-1.4.1/application",["require"],function(t){"use strict";var i=t("jira/components/libs/underscore"),n=t("jira/components/libs/marionette-1.4.1");return n.Application.extend({constructor:function(t){n.Application.call(this,t)},start:function(t){t&&t.forceStop===!1||this.stop(),n.Application.prototype.start.call(this,t)},stop:function(){i.invoke(this.submodules,"stop")}})}),AJS.namespace("JIRA.Marionette.Application",null,require("jira/components/libs/marionette-1.4.1/application"));
//# sourceMappingURL=Application-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'libs/mariontte-1.4.1-mixins/AppModule.js' */
define("jira/components/libs/marionette-1.4.1/appmodule",["require"],function(e){"use strict";var n=e("jira/components/libs/underscore"),t=e("jira/components/libs/marionette-1.4.1"),i=e("jira/components/libs/marionette-1.4.1/mixins"),r=function(){this.definition=this.definition.bind(this)};return r.extend=t.extend,n.extend(r.prototype,{create:function(){throw new Error("create() must be implemented by AppModules")},generateMasterRequest:!1,name:"",commands:{},requests:{},events:[],definition:function(e,t){var i=this.name,r=this;if(!i)throw new Error("'name' must be defined by AppModules");e.addInitializer(function(){function e(e){n.isFunction(e)&&(e=e(s));var t={};return n.each(e,function(e,n){e===!0&&(e=s[n].bind(s)),n=n&&i?i+":"+n:i,t[n]=e}),t}function o(e,t){n.isFunction(t)&&(t=t(s)),n.each(t,function(t){var r=i+":"+t;e.listenTo(s,t,function(){this.trigger.apply(this,[r].concat(n.toArray(arguments)))})})}var s=r.create.apply(r,n.toArray(arguments)),a=e(r.commands),u=e(r.requests);r.generateMasterRequest&&n.extend(u,e({"":function(){return s}})),t.commands.setHandlers(a),t.reqres.setHandlers(u),o(t,r.events)})}}),n.extend(r.prototype,i),r}),AJS.namespace("JIRA.Marionette.AppModule",null,require("jira/components/libs/marionette-1.4.1/appmodule"));
//# sourceMappingURL=AppModule-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'libs/mariontte-1.4.1-mixins/DialogView.js' */
define("jira/components/libs/marionette-1.4.1/dialogview",["require"],function(i){"use strict";var e=i("jira/components/libs/underscore"),t=i("jira/components/libs/marionette-1.4.1"),o=i("jira/components/libs/marionette-1.4.1/itemview"),s=i("aui/message"),r=i("jira/dialog/form-dialog"),a=i("jquery"),n=i("jira/ajs/ajax/smart-ajax"),d=i("jira/dialog/dialog"),l=i("jira/components/utils/ajshelper");return o.extend({dialog:null,template:a.noop,_generateDialog:function(){var i=this.serializeData(),o=this.getTemplate(),s={id:this.id,content:function(e){e(o(i))},submitHandler:this._generateSubmissionXHR.bind(this)},a=t.getOption(this,"dialogOptions");return e.isFunction(a)&&(a=a.apply(this)),new r(e.extend(s,a))},render:function(){return this.isClosed=!1,this.triggerMethod("before:render",this),this.dialog=this._generateDialog(),this.dialog.show(),this.$el=this.dialog.get$popup(),a(this.dialog).on("Dialog.hide",function(i,e,t){t!==d.HIDE_REASON.cancel&&t!==d.HIDE_REASON.escape||this.close()}.bind(this)),this.triggerMethod("render",this),this},close:function(){if(!this.isClosed){var i=this.triggerMethod("before:close");i!==!1&&(a(this.dialog).off("Dialog.hide"),this.dialog.hide(!0),this.dialog.destroy(),this.isClosed=!0,this.triggerMethod("close"),this.remove())}},_generateSubmissionXHR:function(i,o){i.preventDefault();var s=this.dialog.$form,r=t.getOption(this,"formToRequestData");e.isFunction(r)&&(r=r.call(this,s));var a=n.makeRequest({type:s.attr("method"),url:s.attr("action"),contentType:"application/json",dataType:"json",processData:!1,data:JSON.stringify(r)}).done(o).done(this._onSubmitSuccess.bind(this)).fail(this._onSubmitError.bind(this));return a},_onSubmitSuccess:function(i){this.triggerMethod("submit:success",i),this.close()},_onSubmitError:function(i){this.dialog.getButtonsContainer().find("input").removeAttr("disabled"),this.dialog.hideFooterLoadingIndicator(),this.dialog.$form.removeClass("submitting"),this._showErrorFromXHR(i),this.triggerMethod("submit:error")},_displayFieldErrors:function(i){var t=this.dialog.$popup;e.each(i,function(i,e){t.find("#"+e).after("<div class='error'>"+l.escapeHtml(i)+"</div>")})},_displayGenericErrors:function(i){var t=this.dialog.$popup.find(".aui-messages");e.each(i,function(i){var e={closeable:!0,timeout:5};e.body=l.escapeHtml(i),e.shadowed=!1,s.error(t,e)})},_displayXHRErrors:function(i){var e=this.dialog.$popup.find(".aui-messages");e.append(n.buildDialogErrorContent(i,!0))},_showErrorFromXHR:function(i){this._removeErrorMessages();var e;try{e=JSON.parse(i.responseText)}catch(t){e=null}e?(this._displayFieldErrors(e.errors),this._displayGenericErrors(e.errorMessages)):this._displayXHRErrors(i)},_removeErrorMessages:function(){this.dialog.$popup.find(".error").remove(),this.dialog.$popup.find(".aui-messages").empty()}})}),AJS.namespace("JIRA.Marionette.DialogView",null,require("jira/components/libs/marionette-1.4.1/dialogview"));
//# sourceMappingURL=DialogView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'libs/mariontte-1.4.1-mixins/InlineDialogView.js' */
define("jira/components/libs/marionette-1.4.1/inlinedialogview",["require"],function(i){"use strict";var e=i("jira/components/libs/underscore"),t=i("jira/components/libs/marionette-1.4.1"),n=i("jira/components/libs/marionette-1.4.1/itemview"),o=i("jquery"),s=i("aui/inline-dialog");return n.extend({dialog:null,template:o.noop,_getDialogOptions:function(){var i={noBind:!0},n=t.getOption(this,"dialogOptions")||{};return e.isFunction(n)&&(n=n.apply(this)),n=e.extend({},i,n),n.hideCallback=function(){this.close()}.bind(this),n},_getTrigger:function(){var i=t.getOption(this,"trigger");return e.isFunction(i)&&(i=i.apply(this)),i},_generateDialog:function(){var i=this.serializeData(),e=this.getTemplate(),t=this._getDialogOptions(),n=this._getTrigger();return new s(n,this.id,function(t,n,o){t.html(e(i)),o()},t)},render:function(){return this.isClosed=!1,this.triggerMethod("before:render",this),this.dialog=this._generateDialog(),this.$el=this.dialog,this.id=this.dialog.id,this.dialog.show(),this.triggerMethod("render",this),this},close:function(){if(!this.isClosed){var i=this.triggerMethod("before:close");i!==!1&&(this.dialog.hide(),this.isClosed=!0,this.triggerMethod("close"),this.remove())}}})}),AJS.namespace("JIRA.Marionette.InlineDialogView",null,require("jira/components/libs/marionette-1.4.1/inlinedialogview"));
//# sourceMappingURL=InlineDialogView-min.js.map
;
;
/* module-key = 'com.atlassian.plugin.jslibs:brace-2014.09.03-factory', location = 'factories/brace/2014.09.03/brace-2104.09.03-factory.js' */
(function(j){define("atlassian/libs/factories/brace-2014.09.03",function(){return function(n,g){var c={_:n,Backbone:g};j.call(c);c=c.Brace.noConflict();c.VERSION="2014.09.03";return c}})})(function(){var j=this,n=j.Brace,g,c=j._,i=j.Backbone,o=function(a){return c.isArray(a)?c.reduce(a,function(b,a){b[a]=null;return b},{}):a},m=function(a,b){if(!a||null==b||a===String&&c.isString(b)||a===Number&&c.isNumber(b)||a===Boolean&&c.isBoolean(b))return b;if("string"===typeof a||a instanceof String){if(typeof b!==
""+a)throw"The typeof "+b+" is "+typeof b+" but expected it to be "+a;return b}if(c.isArray(a)||a===Array){if(!c.has(b,"length")||b instanceof String||c.has({string:1,"function":1},typeof b)||b instanceof i.Collection)throw"Array type expected, but nonnull, non-Array value provided.";return a===Array||!a[0]?b:c.map(b,c.bind(m,null,a[0]))}if("function"!==typeof a)throw"Invalid expected type "+a+". Should be falsy, String, Array, Backbone.Collection constructor, or function.";return b instanceof a?
b:p(a)?new a(m([a.model],b)):new a(b)},p=function(a,b){return a&&(a.__super__ instanceof(b||i.Collection)||a.__super__===(b||i.Collection).prototype||a===(b||i.Collection))},x=function(a,b){var d={};c.each(a,function(a,c){if(!b[c]||q(a,b[c]))d[c]=a;else if(a&&!q(b[c],a))throw c+" has conflicted type descriptors.";});return d},q=function(a,b){return!b||b===a?!0:!a||"string"===typeof a?!1:a instanceof Array?b===Array||b instanceof Array&&q(a[0],b[0]):"function"!==typeof b?!1:p(b)?p(a,b):a.prototype instanceof
b};g=function(a){var b=a.extend(),d=a.extend;b.extend=function w(a,b){var h,g=c.extend({},a),i;a&&a.mixins&&(i=a.mixins,delete g.mixins);h=d.call(this,g,b);this.prototype.namedEvents&&f.Mixins.applyMixin(h,{namedEvents:this.prototype.namedEvents});this.prototype.namedAttributes&&f.Mixins.applyMixin(h,{namedAttributes:this.prototype.namedAttributes});i&&c.each(a.mixins,function(a){f.Mixins.applyMixin(h,a)});h.prototype.namedEvents&&f.Mixins.applyMixin(h,f.EventsMixinCreator.create(h.prototype.namedEvents));
h.prototype.namedAttributes&&(h.prototype.namedAttributes=o(h.prototype.namedAttributes),f.Mixins.applyMixin(h,f.AttributesMixinCreator.create(h.prototype.namedAttributes,h.prototype.idAttribute)));if(h.prototype.toJSON){var j=h.prototype.toJSON;h.prototype.toJSON=function(){var a;a=j.call(this);a=c.isObject(a)?c.reduce(a,function(a,b,d){b&&c.isFunction(b.toJSON)?a[d]=b.toJSON():c.isArray(b)&&(a[d]=c.map(b,function(a){return a&&c.isFunction(a.toJSON)?a.toJSON():a}));return a},a):a;return a}}h.extend=
w;return h};return b};var f={Mixins:{createMethodName:function(a,b){return a+b.charAt(0).toUpperCase()+b.substr(1)},applyMixin:function(a,b){c.forEach(c.keys(b),function(d){var e=a.prototype;if("initialize"===d){var f=e.initialize;e.initialize=function(){f&&f.apply(this,arguments);b.initialize.apply(this,arguments)}}else if("validate"===d){var g=e.validate;e.validate=function(){if(g){var a=g.apply(this,arguments);if(a)return a}return b.validate.apply(this,arguments)}}else if("defaults"===d){var e=
e.defaults||(e.defaults={}),d=b[d],k;for(k in d){if(e.hasOwnProperty(k))throw"Mixin error: class already has default '"+k+"' defined";e[k]=d[k]}}else if("namedAttributes"===d)k=o(e.namedAttributes)||{},d=o(b[d]),e.namedAttributes=c.extend(k,x(d,k));else if("namedEvents"===d){if(!c.isArray(b[d]))throw"Expects events member on mixin to be an array";e.namedEvents||(e.namedEvents=[]);e.namedEvents=c.uniq(e.namedEvents.concat(b[d]))}else{if(e.hasOwnProperty(d))throw"Mixin error: class already has property '"+
d+"' defined";e[d]=b[d]}},this)}}};f.AttributesMixinCreator={create:function(a,b){var d={};a||(a={});c.has(a,"id")||(a.id=null);c.each(a,function(a,b){var c=f.Mixins.createMethodName("set",b);d[c]=function(a,c){return this.set(b,a,c)};c=f.Mixins.createMethodName("get",b);d[c]=function(){return this.get(b)}});if("string"===typeof b&&"undefined"!==typeof a[b]&&"id"!==b){a.id=a[b];var e=f.Mixins.createMethodName("get",b),g=f.Mixins.createMethodName("set",b);d.getId=function(){return this[e]()};d.setId=
function(a,b){return this[g](a,b)}}return d},ensureType:m};f.EventsMixinCreator={create:function(a){var b={};c.each(a,c.bind(function(a){var e=f.Mixins.createMethodName("on",a);b[e]=function(){return this.on.apply(this,[a].concat(c.toArray(arguments)))};e=f.Mixins.createMethodName("trigger",a);b[e]=function(){return this.trigger.apply(this,[a].concat(c.toArray(arguments)))}},this));return b}};var l=f,r=i.Model,s=g(r),t=r.prototype,u=s.prototype,v=t.set;u.set=function(a,b,d){var e,f=this.namedAttributes;
if(!f||null==a)return v.apply(this,arguments);c.isObject(a)?(e=c.clone(a),d=b):(e={},e[a]=b);for(var g in e)if(c.has(e,g)){if(!c.has(f,g))throw"Attribute '"+g+"' does not exist";e[g]=m(f[g],e[g])}return v.call(this,e,d)};var y=t.get;u.get=function(a){if(this.namedAttributes&&!c.has(this.namedAttributes,a))throw"Attribute '"+a+"' does not exist";return y.apply(this,arguments)};var z=r.prototype.parse;s.prototype.parse=function(a,b){return c.pick(z(a,b),c.keys(this.namedAttributes))};l.Model=s;f.Collection=
g(i.Collection);f.View=g(i.View);f.Router=g(i.Router);l=function(){this.initialize.apply(this,arguments)};c.extend(l.prototype,i.Events,{initialize:function(){}});l.extend=i.Model.extend;f.Evented=g(l);g=f;g.noConflict=function(){j.Brace=n;return this};j.Brace=g});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:brace', location = 'libs/brace.js' */
define("jira/components/libs/brace",["require"],function(e){"use strict";var r=e("atlassian/libs/factories/brace-2014.09.03"),s=e("jira/components/libs/backbone"),n=e("jira/components/libs/underscore");return r(n,s)}),AJS.namespace("JIRA.Issues.Brace",null,require("jira/components/libs/brace"));
//# sourceMappingURL=brace-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:tipsy', location = 'lib/jquery.hoverIntent.min.js' */
// jshint ignore: start
/*eslint-disable*/
/**
* hoverIntent r6 // 2011.02.26 // jQuery 1.5.1+
* <http://cherne.net/brian/resources/jquery.hoverIntent.html>
* 
* @param  f  onMouseOver function || An object with configuration options
* @param  g  onMouseOut function  || Nothing (use configuration options object)
* @author    Brian Cherne brian(at)cherne(dot)net
*/
(function ($) {
  $.fn.hoverIntent = function (f, g) {
    var cfg = { sensitivity: 7, interval: 100, timeout: 0 };cfg = $.extend(cfg, g ? { over: f, out: g } : f);var cX, cY, pX, pY;var track = function track(ev) {
      cX = ev.pageX;cY = ev.pageY;
    };var compare = function compare(ev, ob) {
      ob.hoverIntent_t = clearTimeout(ob.hoverIntent_t);if (Math.abs(pX - cX) + Math.abs(pY - cY) < cfg.sensitivity) {
        $(ob).unbind("mousemove", track);ob.hoverIntent_s = 1;return cfg.over.apply(ob, [ev]);
      } else {
        pX = cX;pY = cY;ob.hoverIntent_t = setTimeout(function () {
          compare(ev, ob);
        }, cfg.interval);
      }
    };var delay = function delay(ev, ob) {
      ob.hoverIntent_t = clearTimeout(ob.hoverIntent_t);ob.hoverIntent_s = 0;return cfg.out.apply(ob, [ev]);
    };var handleHover = function handleHover(e) {
      var ev = jQuery.extend({}, e);var ob = this;if (ob.hoverIntent_t) {
        ob.hoverIntent_t = clearTimeout(ob.hoverIntent_t);
      }if (e.type == "mouseenter") {
        pX = ev.pageX;pY = ev.pageY;$(ob).bind("mousemove", track);if (ob.hoverIntent_s != 1) {
          ob.hoverIntent_t = setTimeout(function () {
            compare(ev, ob);
          }, cfg.interval);
        }
      } else {
        $(ob).unbind("mousemove", track);if (ob.hoverIntent_s == 1) {
          ob.hoverIntent_t = setTimeout(function () {
            delay(ev, ob);
          }, cfg.timeout);
        }
      }
    };return this.bind('mouseenter', handleHover).bind('mouseleave', handleHover);
  };
})(jQuery);;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:tipsy', location = 'util/TipsyView.js' */
define("jira/issues/tipsy",["require"],function(t){"use strict";var i=t("jira/components/libs/underscore"),n=t("jira/components/libs/brace"),s=t("jquery");s.fn.tooltip||(s.fn.tooltip=s.noop,s.fn.tipsy=s.noop);var o=n.View.extend({events:{click:"hide"},initialize:function(t){i.isFunction(t.showCondition)?this.shouldShow=t.showCondition:t.showCondition?this.shouldShow=function(){return this.$el.filter(t.showCondition).length>0}.bind(this):this.shouldShow=function(){return!0},this.tipsy=this.$el.tooltip(i.extend({trigger:"manual"},t.tipsy)),this.hoverIntent(t.intents)},hoverIntent:function(t){return this.tipsy&&this.tipsy.hoverIntent(i.extend({interval:200,over:this.show.bind(this),out:this.hide.bind(this)},t)),this},show:function(){this.shouldShow()&&this.tipsy&&this.$el.tipsy("show")},hide:function(){this.tipsy&&this.$el.tipsy("hide")},remove:function(){this.hide(),this.$el.removeData("tipsy")}});return o.revalidate=function(){return s.fn.tipsy.revalidate()},o.autoBounds=function(){return s.fn.tipsy.autoBounds.apply(s.fn.tipsy,arguments)},o});
//# sourceMappingURL=TipsyView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:tipsy', location = 'util/namespace.js' */
AJS.namespace("JIRA.Issues.Tipsy",null,require("jira/issues/tipsy"));
//# sourceMappingURL=namespace-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:jqueryutils', location = 'util/jquery/CatchExceptions.js' */
!function(n){"use strict";var t=function(n){return function(){try{n.apply(this,arguments)}catch(t){}return this}};n.fn.htmlCatchExceptions=t(n.fn.html),n.fn.appendCatchExceptions=t(n.fn.append),n.fn.prependCatchExceptions=t(n.fn.prepend),n.catchExceptions=function(t){return n("<div>").htmlCatchExceptions(t).children()}}(AJS.$);
//# sourceMappingURL=CatchExceptions-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:jqueryutils', location = 'util/jquery/RecurringPromise.js' */
!function(){"use strict";jQuery.RecurringPromise=function(i){return this instanceof jQuery.RecurringPromise?(this._parent=i,this._doneCallbacks=new jQuery.Callbacks,this._failCallbacks=new jQuery.Callbacks,void(this._alwaysCallbacks=new jQuery.Callbacks)):new jQuery.RecurringPromise},jQuery.RecurringPromise.prototype={add:function(i){var n=new jQuery.Deferred;n.original=i;var t=this._getPending();return this._abortIfPending(t),this._setPending(n),i.done(function(){n===this._getPending()&&(n.resolveWith(this,arguments),this._doneCallbacks.fireWith(this,arguments))}.bind(this)),i.fail(function(){n===this._getPending()&&(n.rejectWith(this,arguments),this._failCallbacks.fireWith(this,arguments))}.bind(this)),i.always(function(){n===this._getPending()&&this._alwaysCallbacks.fireWith(this,arguments)}.bind(this)),n.promise()},done:function(i){return this._doneCallbacks.add(i),this},fail:function(i){return this._failCallbacks.add(i),this},always:function(i){return this._alwaysCallbacks.add(i),this},reset:function(){this._abortIfPending(this._getPending()),this._setPending(null)},sub:function(){return new jQuery.RecurringPromise(this)},_getPending:function(){return this._parent?this._parent._getPending():this._pending},_setPending:function(i){this._parent?this._parent._setPending(i):this._pending=i},_abortIfPending:function(i){i&&"pending"===i.state()&&(i.reject("abort"),jQuery.isFunction(i.original.abort)&&i.original.abort())}}}();
//# sourceMappingURL=RecurringPromise-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:jqueryutils', location = 'util/jquery/ConcurrentDeferred.js' */
jQuery.ConcurrentDeferred=function(n){"use strict";var e,r=new jQuery.Deferred,t=function(n){e=n,n.done(function(){e===n&&r.resolve.apply(r,arguments)}).fail(function(){e===n&&r.reject.apply(r,arguments)})};return t(n),jQuery.extend(r,{update:function(n){if(!this.isPending())throw"Cannot update non-pending ConcurrentDeferred";var r=e;return t(n),jQuery.isFunction(r.abort)&&r.abort(),this},isPending:function(){return"pending"===this.state()}}),r};
//# sourceMappingURL=ConcurrentDeferred-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:jqueryutils', location = 'util/jquery/ScrollLock.js' */
!function(e){"use strict";var l=30;e.fn.scrollLock=function(i,n){"string"!=typeof i&&(n=i,i=null),n||(n=l),this.on("DOMMouseScroll mousewheel",i,function(l){l.preventDefault();var i;l.originalEvent.wheelDelta&&(i=l.originalEvent.wheelDelta/120),l.originalEvent.detail&&(i=-l.originalEvent.detail/3),e.isNumeric(i)&&(this.scrollTop-=i*n)})}}(AJS.$);
//# sourceMappingURL=ScrollLock-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:uri', location = 'libs/uri.js' */
define("jira/components/libs/uri",["require"],function(i){"use strict";return i("atlassian/libs/uri-1.14.1")});
//# sourceMappingURL=uri-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:scrollintoview', location = 'lib/scrollintoview-1.8.js' */
!function(t){var e={vertical:{x:!1,y:!0},horizontal:{x:!0,y:!1},both:{x:!0,y:!0},x:{x:!0,y:!1},y:{x:!1,y:!0}},o={duration:0,direction:"y"},r=/^(?:html)$/i,l=function(e,o){o=o||(document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(e,null):e.currentStyle);var r=!(!document.defaultView||!document.defaultView.getComputedStyle),l={top:parseFloat(r?o.borderTopWidth:t.css(e,"borderTopWidth"))||0,left:parseFloat(r?o.borderLeftWidth:t.css(e,"borderLeftWidth"))||0,bottom:parseFloat(r?o.borderBottomWidth:t.css(e,"borderBottomWidth"))||0,right:parseFloat(r?o.borderRightWidth:t.css(e,"borderRightWidth"))||0};return{top:l.top,left:l.left,bottom:l.bottom,right:l.right,vertical:l.top+l.bottom,horizontal:l.left+l.right}},i=function(e){var o=t(window),i=r.test(e[0].nodeName);return{border:i?{top:0,left:0,bottom:0,right:0}:l(e[0]),scroll:{top:(i?o:e).scrollTop(),left:(i?o:e).scrollLeft()},scrollbar:{right:i?0:e.innerWidth()-e[0].clientWidth,bottom:i?0:e.innerHeight()-e[0].clientHeight},rect:function(){var t=e[0].getBoundingClientRect();return{top:i?0:t.top,left:i?0:t.left,bottom:i?e[0].clientHeight:t.bottom,right:i?e[0].clientWidth:t.right}}()}};t.fn.extend({scrollIntoViewForAuto:function(l){l=t.extend({},o,l),l.direction=e["string"==typeof l.direction&&l.direction.toLowerCase()]||e.both;var c="";l.direction.x===!0&&(c="horizontal"),l.direction.y===!0&&(c=c?"both":"vertical");var n=this.eq(0),s=n.closest(":scrollable("+c+")");if(s.length>0){s=s.eq(0);var d={e:i(n),s:i(s)},h={top:d.e.rect.top-(d.s.rect.top+d.s.border.top),bottom:d.s.rect.bottom-d.s.border.bottom-d.s.scrollbar.bottom-d.e.rect.bottom,left:d.e.rect.left-(d.s.rect.left+d.s.border.left),right:d.s.rect.right-d.s.border.right-d.s.scrollbar.right-d.e.rect.right},a={};l.direction.y===!0&&(h.top<0?a.scrollTop=d.s.scroll.top+h.top-30:h.top>0&&h.bottom<0&&(a.scrollTop=d.s.scroll.top+Math.min(h.top,-h.bottom)+30)),l.direction.x===!0&&(h.left<0?a.scrollLeft=d.s.scroll.left+h.left:h.left>0&&h.right<0&&(a.scrollLeft=d.s.scroll.left+Math.min(h.left,-h.right))),t.isEmptyObject(a)?t.isFunction(l.complete)&&l.complete.call(s[0]):(r.test(s[0].nodeName)&&(s=t("html,body")),s.animate(a,l.duration).eq(0).queue(function(e){t.isFunction(l.complete)&&l.complete.call(s[0]),e()}))}return this}});var c={auto:!0,scroll:!0,visible:!1,hidden:!1};t.extend(t.expr[":"],{scrollable:function(t,o,l,i){var n=e["string"==typeof l[3]&&l[3].toLowerCase()]||e.both,s=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(t,null):t.currentStyle,d={x:c[s.overflowX.toLowerCase()]||!1,y:c[s.overflowY.toLowerCase()]||!1,isRoot:r.test(t.nodeName)};if(!d.x&&!d.y&&!d.isRoot)return!1;var h={height:{scroll:t.scrollHeight,client:t.clientHeight},width:{scroll:t.scrollWidth,client:t.clientWidth},scrollableX:function(){return(d.x||d.isRoot)&&this.width.scroll>this.width.client},scrollableY:function(){return(d.y||d.isRoot)&&this.height.scroll>this.height.client}};return n.y&&h.scrollableY()||n.x&&h.scrollableX()}})}(jQuery);
//# sourceMappingURL=scrollintoview-1.8-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:browser', location = 'util/Browser.js' */
define("jira/components/util/browser",function(){"use strict";return{locationReload:function(o){window.location.reload(o)}}});
//# sourceMappingURL=Browser-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/entities/PanelModel.js' */
define("jira/components/issueviewer/entities/panel",["require"],function(t){"use strict";var e=t("jira/components/libs/brace"),i=t("jira/util/events"),n=t("jira/components/issueviewer/eventtypes");return e.Model.extend({namedAttributes:["entity","updateLocked"],initialize:function(){i.bind(n.LOCK_PANEL_REFRESHING,function(t,e){e===this.getEntity().id&&this.set("updateLocked",!0)}.bind(this)),i.bind(n.UNLOCK_PANEL_REFRESHING,function(t,e){e===this.getEntity().id&&this.set("updateLocked",!1)}.bind(this))},update:function(t,e,i){this.getUpdateLocked()||(this.set("entity",t),this.trigger("updated",e,i))}})});
//# sourceMappingURL=PanelModel-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/entities/PanelsCollection.js' */
define("jira/components/issueviewer/entities/panels",["require"],function(e){"use strict";var i=e("jira/components/libs/underscore"),n=e("jira/components/libs/brace"),t=e("jira/components/issueviewer/entities/panel");return n.Collection.extend({model:t,update:function(e,n){this.each(function(n){var t=n.id,s=i.any(e,function(e){return e.id===t});s||this.remove(n)},this),i.each(e,function(e,i){var t=this.get(e.id);t?t.update(e,n.fieldsInProgress,n.fieldsSaved):this.add({id:e.id,entity:e},{at:i})},this)}})});
//# sourceMappingURL=PanelsCollection-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/entities/PanelsGroupModel.js' */
define("jira/components/issueviewer/entities/panelsgroup",["require"],function(e){"use strict";var n=e("jira/components/libs/brace"),t=e("jira/components/issueviewer/entities/panels");return n.Model.extend({namedAttributes:["leftPanels","rightPanels","infoPanels"],defaults:function(){return{leftPanels:new t([]),rightPanels:new t([]),infoPanels:new t([])}},update:function(e,n){this.get("leftPanels").update(e.leftPanels,n),this.get("rightPanels").update(e.rightPanels,n),this.get("infoPanels").update(e.infoPanels,n)}})});
//# sourceMappingURL=PanelsGroupModel-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/entities/IssueModel.js' */
define("jira/components/issueviewer/entities/issue",["require"],function(e){"use strict";var t=e("jira/components/libs/brace"),s=e("jira/components/issueviewer/entities/panelsgroup");return t.Model.extend({namedEvents:["updated"],namedAttributes:["entity","id","key","panels","projectKey","projectType","projectId"],defaults:function(){return{entity:{},panels:new s}},update:function(e,t){var s=!1;e.issue&&(this.updateFromEntity(e.issue),s=!0),e.panels&&(this.getPanels().update(e.panels,t),s=!0),s&&this.trigger("updated",t)},resetToDefault:function(){this.clear(),this.set(this.defaults())},updateFromEntity:function(e){this.set({id:e.id,key:e.key,entity:e,projectKey:e.project?e.project.key:null,projectType:e.project?e.project.projectType:null,projectId:e.project?e.project.id:null})},isCurrentIssue:function(e){return this.get("id")===e},hasIssue:function(){return this.has("id")},updateIssueQuery:function(e){this.hasIssue()&&(this.getEntity().viewIssueQuery=e)},getIssueInfo:function(){return{issueId:this.getId(),issueKey:this.getKey(),projectId:this.getProjectId(),projectKey:this.getProjectKey(),projectType:this.getProjectType()}}})});
//# sourceMappingURL=IssueModel-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/views/issue/IssuePanelView.js' */
define("jira/components/issueviewer/views/issuepanel",["require"],function(e){"use strict";var i=e("jira/components/libs/underscore"),t=e("jira/components/issueviewer/legacy/issuefieldutil"),n=e("jquery"),r=e("jira/components/libs/marionette-1.4.1/itemview"),l=e("jira/components/issueviewer/templates");return r.extend({template:l.Body.issuePanel,modelEvents:{updated:"update"},update:function(e,r){function l(){return i.any(e,function(e){return 1===o.find(t.getFieldSelector(e)).length})}function s(){var e=o.find(document.activeElement).length>0,i=!!n.browser.msie&&n.browser.version<=8;if(i){var t=o[0].nextSibling,r=o[0].parentNode;o.remove(),t?n(t).before(d):n(r).append(d)}else o.replaceWith(d);e&&u.trigger("replacedFocusedPanel"),u.setElement(d)}function a(e){var t=u.model.id,n=u.$el;u.trigger("panelRendered",t,n,o),i.each(e,function(e){u.trigger("individualPanelRendered",e)})}var d=this.renderTemplate(),o=this.$el,u=this;if(0!==o.find("iframe").length||d.text()!==o.text()){if(l()){var c=[];i.each(r,function(e){var i=o.find(t.getFieldSelector(e));if(1===i.length){var n=d.find(t.getFieldSelector(e));1===n.length?(i.replaceWith(n),c.push(n)):i.closest("li, dl").remove()}}),a(c)}else s(),a([u.$el]);this.bindUIElements()}},onRender:function(){this.setElement(this.$el.children());var e=this.model.getEntity().styleClass;e&&this.$el.addClass(e),this.trigger("individualPanelRendered",this.$el)},applyToDom:function(){this.trigger("individualPanelRendered",this.$el)},serializeData:function(){return this.model.getEntity()}})});
//# sourceMappingURL=IssuePanelView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/views/issue/IssuePanelsView.js' */
define("jira/components/issueviewer/views/issuepanels",["require"],function(e){"use strict";var i=e("jira/components/libs/marionette-1.4.1/collectionview"),t=e("jira/components/issueviewer/views/issuepanel"),n=e("jira/components/issueviewer/entities/panel");return i.extend({itemView:t,_updatingFromDom:!1,appendHtml:function(e,i,t){var n=e.$el.children(),o=n.length;t<=0?e.$el.prepend(i.$el):!o||t>=o?e.$el.append(i.$el):i.$el.insertBefore(n.eq(t))},applyToDom:function(){var e=this;this._updatingFromDom=!0,this.$el.children().filter(".module").each(function(){var i=this.id;"addcomment"===i&&(i="addcommentmodule"),e.collection.add(new n({id:i,entity:{id:i}}))}),this._updatingFromDom=!1},renderItemView:function(e){this._updatingFromDom?e.applyToDom():i.prototype.renderItemView.apply(this,arguments)},buildItemView:function(e){var t=i.prototype.buildItemView.apply(this,arguments);return this._updatingFromDom&&t.setElement(document.getElementById(e.id)),t}})});
//# sourceMappingURL=IssuePanelsView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/views/issue/IssueBodyView.js' */
define("jira/components/issueviewer/views/issuebody",["require"],function(e){"use strict";var s=e("jira/components/libs/marionette-1.4.1/layout"),i=e("jira/components/libs/marionette-1.4.1/linkregion"),n=e("jira/components/issueviewer/templates");return s.extend({tagName:"div",className:"issue-body-content",regions:{leftPanels:{selector:".issue-main-column",regionType:i},rightPanels:{selector:".issue-side-column",regionType:i},infoPanels:{selector:".issue-body",regionType:i}},template:n.Body.issueBody})});
//# sourceMappingURL=IssueBodyView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/views/issue/IssueOpsbarView.js' */
define("jira/components/issueviewer/views/issueopsbar",["require"],function(e){"use strict";var i=e("jira/components/libs/marionette-1.4.1/itemview"),t=e("jira/components/issueviewer/templates"),n=e("jira/issues/tipsy"),s=e("jira/components/issueviewer/analytics/issueopsbar");return i.extend({template:t.IssueOpsbar.simpleOpsbar,ui:{shareButton:".viewissue-share",exportButton:"#viewissue-export",loginButton:"#ops-login-lnk",commentButton:"#comment-issue"},serializeData:function(){return{issue:this.model.getEntity()}},onApplyToDom:function(){this.onRender()},onRender:function(){new s(this),this.ui.loginButton.hide(),this.ui.commentButton.addClass("inline-comment"),new n({el:this.ui.shareButton,showCondition:":not(.active)"}),new n({el:this.ui.exportButton,showCondition:":not(.active)",tipsy:{gravity:"ne"}})}})});
//# sourceMappingURL=IssueOpsbarView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/views/issue/IssueHeaderView.js' */
define("jira/components/issueviewer/views/issueheader",["require"],function(e){"use strict";var i=e("jira/components/libs/marionette-1.4.1/layout"),s=e("jira/components/issueviewer/templates"),t=(e("jira/components/issueviewer/services/darkfeatures"),e("jira/components/libs/underscore")),a=e("jira/components/issueviewer/views/issueopsbar"),r=e("jira/util/data/meta"),n=e("jquery");e("jira/featureflags/feature-manager");return i.extend({className:"issue-header js-stalker",id:"stalker",tagName:"header",template:s.Header.issueHeader,modelEvents:{updated:"update"},regions:{opsbar:".command-bar",pager:"#issue-header-pager"},initialize:function(e){this.isGlobalIssueNavigator=e.isGlobalIssueNavigator},serializeData:function(){return{issue:this.model.getEntity(),isNewIssueViewEnabledInGlobalIssueNav:JIRA.Issues.Api.isNewIssueViewEnabled(),isGlobalIssueNavigator:this.isGlobalIssueNavigator}},update:function(e){if(e.initialize)this._updateWindowTitle();else{var i=t.include(e.fieldsInProgress,"summary");i?this.renderOpsBar():this.render()}this.trigger("updated")},onApplyToDom:function(){var e=new a({model:this.model});e.setElement(this.opsbar.el),this.opsbar.attachView(e),this.opsbar.currentView.applyToDom(),this._updateWindowTitle()},onBeforeRender:function(){this.previousElement=this.$el},onRender:function(){this.renderOpsBar(),this._updateWindowTitle(),this.trigger("panelRendered","header",this.$el,this.previousElement||n(""))},renderOpsBar:function(){this.opsbar.show(new a({model:this.model})),this.trigger("individualPanelRendered",this.$el)},_updateWindowTitle:function(){var e=this.model.getEntity(),i=e.key,s=e.summary,t=r.get("app-title");t&&s&&i&&(document.title="["+i+"] "+s+" - "+t)},focus:function(){this.$el.find("a").eq(0).focus()},initialFocus:function(){this.$el.focus()}})});
//# sourceMappingURL=IssueHeaderView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/views/issue/IssueView.js' */
define("jira/components/issueviewer/views/issue",["require"],function(e){"use strict";var i=e("jira/components/libs/marionette-1.4.1/layout"),t=e("jira/components/issueviewer/templates"),s=e("jira/components/libs/marionette-1.4.1/replaceregion"),n=e("jira/components/issueviewer/actions"),o=e("jquery");return i.extend({template:t.layout,className:"issue-container",regions:{header:{selector:".issue-header-container",regionType:s},body:{selector:".issue-body-container",regionType:s}},modelEvents:{updated:"update"},initialize:function(e){this.isGlobalIssueNavigator=e.isGlobalIssueNavigator},showLoading:function(){this.$el.addClass("loading")},hideLoading:function(){this.$el.removeClass("loading")},focusComment:function(e){this.$("#activitymodule .focused").removeClass("focused"),this.$("#comment-"+e).addClass("focused"),this.$(".js-stalker").trigger("refresh")},serializeData:function(){return{isNewIssueViewEnabledInGlobalIssueNav:JIRA.Issues.Api.isNewIssueViewEnabled(),isGlobalIssueNavigator:this.isGlobalIssueNavigator}},update:function(e){this._closeDropdowns(),e.initialize&&this.render(),e.reason&&e.reason.action===n.EDIT_COMMENT&&this.focusComment(e.reason.meta.commentId),this._bringViewIssueElementIntoView()},remove:function(){return this.stopListening(),this.$el.empty(),this},onRender:function(){this.$el.addClass(this.className),this.$el.attr("tabindex","-1"),this._bringViewIssueElementIntoView()},onApplyToDom:function(){this._bringViewIssueElementIntoView(),this.trigger("render")},_bringViewIssueElementIntoView:function(){var e=this.model.get("entity").viewIssueQuery;if(e){var i;e.focusedCommentId?i="#comment-"+e.focusedCommentId:(e.attachmentSortBy||e.attachmentOrder||e.attachmentViewMode)&&(i="#attachmentmodule"),i&&o(i).scrollIntoView({marginBottom:200,marginTop:200})}},_closeDropdowns:function(){this.$el.find(".aui-dropdown2-trigger.active").trigger("aui-button-invoke")}})});
//# sourceMappingURL=IssueView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/views/error/ErrorView.js' */
define("jira/components/issueviewer/views/error",["require"],function(e){"use strict";var s=e("jira/components/libs/marionette-1.4.1/layout");return s.extend({className:"issue-container",regions:{pager:"#issue-header-pager"},remove:function(){return this.stopListening(),this.$el.empty(),this},onRender:function(){this.$el.addClass(this.className),this.$el.attr("tabindex","-1")}})});
//# sourceMappingURL=ErrorView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/views/error/ErrorGenericView.js' */
define("jira/components/issueviewer/views/errorgeneric",["require"],function(e){"use strict";var r=e("jira/components/issueviewer/views/error"),i=e("jira/components/issueviewer/templates"),n=e("jira/components/util/browser");return r.extend({template:i.Error.Generic,events:{"click #issue-error-reload-button":function(){n.locationReload()}}})});
//# sourceMappingURL=ErrorGenericView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/views/error/ErrorNotFoundView.js' */
define("jira/components/issueviewer/views/errornotfound",["require"],function(r){"use strict";var e=r("jira/components/issueviewer/views/error"),i=r("jira/components/issueviewer/templates"),n=r("jira/components/libs/underscore");return e.extend({template:i.Error.DoesNotExist,initialize:function(r){r=r||{},this.showReturnToSearchOnError=r.showReturnToSearchOnError},triggers:{"click #return-to-search":"returnToSearch"},serializeData:function(){var r=this.showReturnToSearchOnError;return n.isFunction(r)&&(r=r()),{hideReturnToSearch:!r}}})});
//# sourceMappingURL=ErrorNotFoundView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/controllers/IssueController.js' */
define("jira/components/issueviewer/controllers/issue",["require"],function(e){"use strict";var i=e("jira/issue"),s=e("jira/components/issueviewer/views/issuebody"),t=e("jira/components/issueviewer/views/issueheader"),n=e("jira/components/issueviewer/views/issuepanels"),o=e("jira/components/issueviewer/views/issue"),r=e("jira/components/libs/marionette-1.4.1/controller"),a=e("jira/components/libs/underscore"),h=e("jquery"),d=e("jira/components/issueviewer/services/breadcrumbs-project-hider"),l=e("jira/featureflags/simplified-ux-feature-manager"),w=i.CommentForm;return r.extend({initialize:function(e){this.model=e.model,this.isGlobalIssueNavigator=e.isGlobalIssueNavigator},_createViews:function(){this.view=this._createMainView(),this.bodyView=this._createBodyView(),this.headerView=this._createHeaderView(),this.leftPanelsView=this._createPanelsView(this.model.getPanels().getLeftPanels()),this.rightPanelsView=this._createPanelsView(this.model.getPanels().getRightPanels()),this.infoPanelsView=this._createPanelsView(this.model.getPanels().getInfoPanels())},_createMainView:function(){var e=new o({model:this.model,isGlobalIssueNavigator:this.isGlobalIssueNavigator,el:this.$el});return this.listenTo(e,{render:function(){this.trigger("renderMainView",e.$el)}}),e},_createBodyView:function(){return new s({model:this.model})},_createHeaderView:function(){var e=new t({model:this.model,isGlobalIssueNavigator:this.isGlobalIssueNavigator});return this.listenAndRethrow(e,"panelRendered"),this.listenTo(e,{updated:function(){this.trigger("render",{pager:this.view.$(this.headerView.pager.el)},this.model.getIssueInfo()),this._replaceBreadcrumbsView()},individualPanelRendered:function(e){this.trigger("individualPanelRendered",e)}}),this._replaceBreadcrumbsView(),e},_replaceBreadcrumbsView:function(){if(l.isAdg3ModeOn()){var e=function(e,i){d.bindToSidebarEvents(e,h(".issue-header-content"),i)};JIRA.API.getSidebar().done(function(i){e(i,!1)}),JIRA.API.getNavigationApi().then(function(i){e(i,!0)})}},_createPanelsView:function(e){var i=new n({collection:e});return this.listenTo(i,{"itemview:replacedFocusedPanel":function(){this.trigger("replacedFocusedPanel")},"itemview:panelRendered":function(e,i,s,t){this.trigger("panelRendered",i,s,t)},"itemview:individualPanelRendered":function(e,i){this.trigger("individualPanelRendered",i)}}),i},createView:function(){this._createViews(),this.listenTo(this.view,"render",function(){var e=JIRA.Issues.Api.isNewIssueViewEnabled();e&&this.isGlobalIssueNavigator?AJS.$("#new-issue-body-container").trigger("new-issue-body-container-for-gin-rendered"):(this.view.header.show(this.headerView),this.view.body.show(this.bodyView),this.bodyView.leftPanels.show(this.leftPanelsView),this.bodyView.rightPanels.show(this.rightPanelsView),this.bodyView.infoPanels.show(this.infoPanelsView),this.trigger("render",{pager:this.view.$(this.headerView.pager.el)},a.extend(this.model.getIssueInfo(),{loadedFromDom:!1})))})},createViewFromDom:function(){this._createViews(),this.listenTo(this.view,"applyToDom",function(){function e(e,i,s){i.setElement(s),i.applyToDom(),e.attachView(i)}e(this.view.body,this.bodyView,this.view.$el.find(".issue-body-content")),e(this.view.body,this.headerView,this.view.$el.find("#stalker")),e(this.bodyView.leftPanels,this.leftPanelsView,this.bodyView.$el.find(this.bodyView.leftPanels.el)),e(this.bodyView.rightPanels,this.rightPanelsView,this.bodyView.$el.find(this.bodyView.rightPanels.el)),e(this.bodyView.infoPanels,this.infoPanelsView,this.bodyView.$el.find(this.bodyView.infoPanels.el)),this.trigger("render",{pager:this.view.$(this.headerView.pager.el)},a.extend(this.model.getIssueInfo(),{loadedFromDom:!0}))})},setElement:function(e){this.$el=e,this.view&&this.view.setElement(e)},applyToDom:function(e){e.id=+e.id,this.model.updateFromEntity(e),this.createViewFromDom(),this.view.applyToDom()},show:function(){this.view?this.trigger("render",{pager:this.view.$(this.headerView.pager.el)},a.extend(this.model.getIssueInfo(),{loadedFromDom:!1})):(this.createView(),this.view.render()),this.view.hideLoading()},close:function(){this.view&&this.view.close(),this.hideLoading(),delete this.view},hideLoading:function(){this.view&&this.view.hideLoading()},showLoading:function(){this.view&&this.view.showLoading()},canDismissComment:function(){var e,i=w;if(!i.getForm().data("dismissed")&&(e=i.handleBrowseAway())){if(!confirm(e))return i.focus(),!1;i.getForm().data("dismissed",!0)}return!0},applyResponsiveDesign:function(){if(this.$el){var e=this.$el.width();this.$el.toggleClass("skinny",e<900),this.$el.toggleClass("very-skinny",e<600)}},focus:function(){this.view&&this.headerView.focus()},initialFocus:function(){this.view&&this.headerView.initialFocus()}})});
//# sourceMappingURL=IssueController-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/controllers/ErrorController.js' */
define("jira/components/issueviewer/controllers/error",["require"],function(e){"use strict";var r=e("jira/components/issueviewer/views/errorgeneric"),i=e("jira/components/issueviewer/views/errornotfound"),t=e("jira/components/libs/marionette-1.4.1/controller"),o=e("jira/components/issueviewer/utils");return t.extend({initialize:function(e){this.contextPath=e.contextPath,this.showReturnToSearchOnError=e.showReturnToSearchOnError},render:function(e,t){switch(e){case"auth":this._renderErrorAuth(t);break;case"forbidden":case"notfound":this._renderErrorView(new i({showReturnToSearchOnError:this.showReturnToSearchOnError}));break;case"generic":default:this._renderErrorView(new r)}},applyToDom:function(e,t){switch(e){case"auth":this._renderErrorAuth(t);break;case"forbidden":case"notfound":this._renderErrorViewFromDom(new i({showReturnToSearchOnError:this.showReturnToSearchOnError}));break;case"generic":default:this._renderErrorViewFromDom(new r)}},close:function(){this.view&&(this.view.close(),delete this.view)},setElement:function(e){this._$el=e,this.view&&this.view.setElement(e)},_renderErrorAuth:function(e){var r=this.contextPath+"/login.jsp?os_destination="+encodeURIComponent("/browse/"+e);window.location.replace(r)},_renderErrorView:function(e){this.trigger("before:render"),o.hideDropdown(),this.view=e,this.view.setElement(this._$el),this.view.render(),this.listenAndRethrow(this.view,"returnToSearch"),this.trigger("render",{pager:this.view.$(this.view.pager.el),isError:!0},{loadedFromDom:!1,issueId:null})},_renderErrorViewFromDom:function(e){this.trigger("before:render"),o.hideDropdown(),this.view=e,this.view.setElement(this._$el),this.view.applyToDom(),this.listenAndRethrow(this.view,"returnToSearch"),this.trigger("render",{pager:this.view.$(this.view.pager.el),isError:!0},{loadedFromDom:!0,issueId:null})},isRendered:function(){return Boolean(this.view)}})});
//# sourceMappingURL=ErrorController-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/services/IssueLoaderService.js' */
define("jira/components/issueviewer/services/issueloader",["require"],function(e){"use strict";var i=e("jira/components/libs/marionette-1.4.1/controller"),t=e("jquery"),n=e("jira/components/issueviewer/legacy/issuefieldutil");return i.extend({initialize:function(){this._promiseManager=new t.RecurringPromise,this._updatingPromise=this._promiseManager.sub(),this._updatingPromise.done(this._onUpdatingDone.bind(this)).fail(this._onUpdatingError.bind(this)),this._loadingPromise=this._promiseManager.sub(),this._loadingPromise.done(this._onLoadingDone.bind(this)).fail(this._onLoadingError.bind(this))},cancel:function(){this._promiseManager.reset()},update:function(e){function i(e){return function(){return{taskKey:e,data:arguments,startIssueLoad:new Date}}}var n,r=e.issueEntity,s=e.mergeIntoCurrent,a=e.viewIssueData,o=!!e.detailView,d=new t.Deferred;return n=this._updatingPromise.add(a.get(r.key,!0,{issueEntity:r,loadingDeferred:d,mergeIntoCurrent:s,startIssueLoad:new Date,detailView:o}).pipe(i("issue"),i("issue"))),n.fail(function(){d.reject.apply(d,arguments)}),d.promise()},load:function(e){var i=e.issueEntity,n=e.viewIssueData,r=!!i.detailView;this._currentlyLoading=!0;var s=new t.Deferred;return this._loadingPromise.add(n.get(i.key,!1,{issueEntity:i,loadFields:!1,loadingDeferred:s,startIssueLoad:new Date,detailView:r})),s.promise()},isLoading:function(){return this._currentlyLoading},_onLoadingDone:function(e,i,t){var r=t.issueEntity;r.id=e.issue.id,r.key=e.issue.key,e.pager||(e.pager=r.pager),n.transformFieldHtml(e),this._currentlyLoading=!1,i.loadDuration=new Date-t.startIssueLoad,this.trigger("issueLoaded",e,i,t),t.loadingDeferred.resolve(e,i,t)},_onUpdatingDone:function(e){var i=e.data[1];i&&(i.isUpdate=!0),this._onLoadingDone.apply(this,e.data)},_onLoadingError:function(e,i,t){var n=t.issueEntity,r={issueId:n.id,issueKey:n.key,response:e};this._currentlyLoading=!1;var s;switch(e.status){case 401:s="auth";break;case 403:s="forbidden";break;case 404:s="notfound";break;default:s="generic"}this.trigger("error",s,r),t.loadingDeferred.reject()},_onUpdatingError:function(e){this._onLoadingError.apply(this,e.data)}})});
//# sourceMappingURL=IssueLoaderService-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/services/MetadataService.js' */
define("jira/components/issueviewer/services/metadataservice",["require"],function(e){"use strict";var t=e("jira/util/data/meta"),a=e("jira/components/libs/underscore");return{removeIssueMetadata:function(e){var s=e.getEntity();s.metadata?a.each(s.metadata,function(e,a){t.set(a,null)}):t.get("issue-key")&&t.set("issue-key",null)},addIssueMetadata:function(e){var s=e.getEntity();a.each(s.metadata,function(e,a){t.set(a,e)})}}});
//# sourceMappingURL=MetadataService-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/services/DarkFeatures.js' */
define("jira/components/issueviewer/services/darkfeatures",["require"],function(e){"use strict";var r=e("jira/ajs/dark-features");return function(){var e=function(e,r){this.featureKey=e,this.featureOffKey=r};return e.prototype.enabled=function(){return this.featureOffKey?r.isEnabled(this.featureKey)&&!r.isEnabled(this.featureOffKey):r.isEnabled(this.featureKey)},{ISSUE_TRANSITIONS_DROPDOWN:new e("ka.ISSUE_TRANSITIONS_DROPDOWN","ka.ISSUE_TRANSITIONS_DROPDOWN_OFF")}}()});
//# sourceMappingURL=DarkFeatures-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/services/LinksCapturer.js' */
define("jira/components/issueviewer/linkscapturer",["require","jira/featureflags/simplified-ux-feature-manager"],function(e,i){"use strict";var t=e("jira/components/libs/underscore"),n=e("jira/util/events"),s=e("jira/ajs/layer/inline-layer"),a=e("jquery"),o=e("jira/components/libs/marionette-1.4.1/controller"),r=e("jira/message"),u=e("jira/ajs/ajax/smart-ajax"),l=e("jira/components/libs/uri");return o.extend({initialize:function(){t.bindAll(this,"_onRefineViewEvents","_offRefineViewEvents","_handleReviewViewEvents")},capture:function(e){e!==this.el&&(this.el=e,this.linksToOtherIssues(),this.linksToReorderSubtasks(),this.viewOptionsForCurrentIssue())},linksToOtherIssues:function(){i.isAdg3ModeOn()&&this._isRapidBoardPage()||a(this.el).on("simpleClick","a.issue-link[data-issue-key]",function(t){t.preventDefault();var n=a(t.target).closest("a").data("issue-key");if(i.isAdg3ModeOn()){var s=n.split("-")[0];JIRA.API.getSidebar().done(function(e){e.updateData({projectKey:s},!0)}),e("jira/navigation").then(function(e){e.setProjectRootView()})}this.trigger("linkToIssue",{issueKey:n})}.bind(this))},linksToReorderSubtasks:function(){a(this.el).on("simpleClick",".subtask-reorder a",function(e){e.target.href&&(e.preventDefault(),a.ajax({type:"GET",data:{disableRedirect:!0},url:e.target.href}).done(function(){this.trigger("reorderSubtasks")}.bind(this)).fail(function(e){r.showErrorMsg(u.buildSimpleErrorContent(e),{closeable:!0})}))}.bind(this))},_handleReviewViewEvents:function(e){var i=e.currentTarget;a(i).parents("ul").find("a.aui-checked").removeClass("aui-checked"),a(i).addClass("aui-checked");var t=new l(i.href).query(!0),n=this.triggerPreventable("refineViewer",{query:t});n.isPrevented&&e.preventDefault()},_onRefineViewEvents:function(e,i){a(i).on("simpleClick",["#attachment-sorting-options a","#attachment-sorting-order-options a","#attachment-view-mode-options a","#subtasks-show-all","#subtasks-show-open"].join(","),this._handleReviewViewEvents)},_offRefineViewEvents:function(e,i){a(i).off("simpleClick",["#attachment-sorting-options a","#attachment-sorting-order-options a","#attachment-view-mode-options a","#subtasks-show-all","#subtasks-show-open"].join(","),this._handleReviewViewEvents)},_location:function(){return window.location},_isRapidBoardPage:function(){return this._location().href.indexOf("RapidBoard.jspa")>=0},viewOptionsForCurrentIssue:function(){n.bind(s.EVENTS.show,this._onRefineViewEvents),n.bind(s.EVENTS.hide,this._offRefineViewEvents)},destroy:function(){n.unbind(s.EVENTS.show,this._onRefineViewEvents),n.unbind(s.EVENTS.hide,this._offRefineViewEvents)}})});
//# sourceMappingURL=LinksCapturer-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/services/BreadcrumbsProjectHider.js' */
define("jira/components/issueviewer/services/breadcrumbs-project-hider",["require"],function(e){function n(e,n){var o=n?e.isCollapsed():e.isCollapsed(!0);o?i():r()}function r(){var e=d.find(t);e.length>0&&(a=e.detach())}function i(){var e=d.find(s);a&&0===e.find(t).length&&a.prependTo(e)}var o=(e("jquery"),{}),t=".breadcrumbs-project-name",s=".aui-nav-breadcrumbs",a=null,d=null;return o.bindToSidebarEvents=function(e,o,t){if(t){if(!e.isInProjectContext())return}else if(!e.isProjectSidebar(!0))return;d=o,n(e,t),t?(e.onCollapseEnd(i),e.onExpandEnd(r)):(e.off(e.events.SIDEBAR_COLLAPSE_END,i,!0),e.on(e.events.SIDEBAR_COLLAPSE_END,i,!0),e.off(e.events.SIDEBAR_EXPAND_END,r,!0),e.on(e.events.SIDEBAR_EXPAND_END,r,!0))},o});
//# sourceMappingURL=BreadcrumbsProjectHider-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/legacy/IssueEventBus.js' */
define("jira/components/issueviewer/legacy/issueeventbus",["require"],function(e){"use strict";var s=e("jira/components/libs/brace");return s.Model.extend({namedAttributes:["issueId"],namedEvents:["save","saveSuccess","savingStarted","saveError","panelRendered","replacedFocusedPanel","fieldSubmitted","dismiss","refreshIssue","issueRefreshed","updateFromDom","updateStatusColor","quickEditKeyPressed","openFocusShifter"]})});
//# sourceMappingURL=IssueEventBus-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/legacy/AsyncData.js' */
define("jira/components/issueviewer/legacy/asyncdata",["require"],function(e){"use strict";var t=e("jira/components/libs/brace"),n=e("jira/components/libs/underscore"),i=e("jquery");return t.Evented.extend({namedEvents:["change"],initialize:function(e){this.data={},this.pendings={},this.accessIndex=0,e&&(this.disableCache=e.disableCache,this.maxCacheSize=e.maxCacheSize)},get:function(e,t,a){var r=new i.Deferred,s=this.disableCache?{}:this.data,h=function(t,i){var h=this._set(s,e,n.defaults(t,{accessIndex:this.accessIndex++}),!0,a),d=n.defaults({changed:h},i,s[e]);a&&a.mergeIntoCurrent&&(d.mergeIntoCurrent=!0),s[e]&&!s[e].error?r.resolve(s[e].value,d,a):r.reject(s[e]&&s[e].value,d,a)}.bind(this),d=function(t){var n=this.fetch(e,a);this.setPending(e,n,function(e){h({value:e,error:!1,updated:new Date},{initialLoad:t})},function(e){var n={error:!0,updated:new Date};void 0!==e&&(n.value=e),h(n,{initialLoad:t,error:!0})})}.bind(this),u=function(){h({},{fromCache:!0})},c=function(){this.pendings[e].always(n.bind(h,this,{},{initialLoad:!0}))}.bind(this);return t||this.disableCache?d(!1):this.hasCached(e)?u():this.hasPending(e)?c():d(!0),r.promise()},setPending:function(e,t,n,a){return this.hasPending(e)?this.pendings[e].update(t):this.pendings[e]=new i.ConcurrentDeferred(t),this.pendings[e].done(function(e){n(e)}).fail(function(e){a(e)})},getIdByValue:function(e){var t;for(t in this.data)if(this.data[t].value===e)return t;return null},getMeta:function(e){return this.data[e]||{}},getAllCached:function(){var e={};return n.each(this.data,function(t,n){e[n]=t.value}),e},hasCached:function(e){var t=this.getMeta(e);return void 0!==t.value||t.error===!0},hasError:function(e){var t=this.getMeta(e);return t.error===!0},hasPending:function(e){var t=this.pendings[e];return!!t&&t.isPending()},set:function(e,t){return this._set(this.data,e,{value:t,updated:new Date},!0)},remove:function(e){return!!this.data[e]&&(delete this.data[e],this.triggerChange(),!0)},setError:function(e,t){var n={error:!0,updated:new Date};return void 0!==t&&(n.value=t),this._set(this.data,e,n,!0)},setMultiple:function(e){var t=new Date,i=!1;return n.each(e,function(e,a){e=n.pick(e,"value","error"),e.updated=t,this._set(this.data,a,e,!1)&&(i=!0)}.bind(this)),i&&this.triggerChange(),i},reset:function(e){this.data={},this.pendings={},this.accessIndex=0,e?this.setMultiple(e):this.triggerChange()},_set:function(e,t,i,a,r){this.disableCache&&e===this.data&&(e={});var s=e[t]?n.clone(e[t]):{},h=this.mergeFetchedAndCached(s,i,r?r:{},e[t]);return!a||e[t]&&!h&&e[t].error===s.error||e!==this.data||this.triggerChange(),!e[t]&&this.maxCacheSize&&n.keys(e).length===this.maxCacheSize?i.accessIndex&&(this._dropItem(e),e[t]=s):e[t]=s,h},_dropItem:function(e){var t=null;for(var n in e){if(!e[n].accessIndex){t=n;break}(null===t||e[n].accessIndex<e[t].accessIndex)&&(t=n)}null!==t&&delete e[t]},fetch:function(e){var t=this.getMeta(e),n=new i.Deferred;return!this.hasCached(e)||t.error?n.reject(t.value):n.resolve(t.value),n.promise()},mergeFetchedAndCached:function(e,t,i,a){return n.extend(e,t),!a||a.value!==e.value||a.error!==e.error}})});
//# sourceMappingURL=AsyncData-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/legacy/ViewIssueData.js' */
define("jira/components/issueviewer/legacy/viewissuedata",["require","jira/featureflags/feature-manager"],function(e,s){"use strict";var i=e("jira/components/libs/underscore"),n=e("jira/components/issueviewer/legacy/asyncdata"),t=e("jira/util/data/meta"),u=e("jquery"),a=window.AJS.contextPath();return n.extend({initialize:function(e){e=e||{},this.isGlobalIssueNavigator=e.isGlobalIssueNavigator,n.prototype.initialize.call(this,i.defaults(e||{},{disableCache:!1,maxCacheSize:t.get("viewissue-max-cache-size")}))},fetch:function(e,n){var t={issueKey:e,decorator:"none",prefetch:!!n.prefetch};if(t.shouldUpdateCurrentProject=!n.detailView,n.mergeIntoCurrent&&this.data&&this.data[e]&&this.data[e].value&&this.data[e].value.issue){t.lastReadTime=this.data[e].value.readTime,t.fields=[],i.each(this.data[e].value.fields,function(e){t.fields.push(e.id+":"+e.contentId)}),t.issue=["summary:"+this.data[e].value.issue.summaryContentId],t.links=[];var r=function g(e){i.each(e.links,function(e){t.links.push(e.id+":"+e.contentId)}),i.each(e.groups,function(e){g(e)})};i.each(this.data[e].value.issue.operations.linkGroups,function(e){r(e)}),t.panels=[];var o=this,d=function(s){i.each(o.data[e].value.panels[s],function(e){t.panels.push(e.completeKey+":"+e.contentId)})};d("leftPanels"),d("rightPanels"),d("infoPanels")}"loadFields"in n&&(t.loadFields=n.loadFields),n.issueEntity&&i.defaults(t,n.issueEntity.viewIssueQuery);var l=s.isFeatureEnabled("issue.details.global-issue-navigator")&&"true"===u('meta[name="ajs-new-jira-issue-view-gin-enabled"]').attr("content"),p=s.isFeatureEnabled("issue.details.global-issue-navigator-improvements");if(this.isGlobalIssueNavigator&&l&&p){var c=u.Deferred();return c.resolve({issue:{id:void 0,key:t.issueKey,status:{name:void 0}}})}var h=u.ajax({url:a+"/secure/AjaxIssueAction!default.jspa",headers:{"X-SITEMESH-OFF":!0},data:t,type:n.mergeIntoCurrent?"POST":"GET"}),c=h.pipe(function(e){return e},function(e){return i.pick(e,"status","responseText","statusText")});return c.abort=function(){h.abort.apply(h,arguments)},c},mergeFetchedAndCached:function(e,s,n){if(this._skipMerging(e,s,n))return i.extend(e,s),null;i.each(i.pairs(s),function(s){"value"!==s[0]&&(e[s[0]]=s[1])});var t=s.value,u=[],a=[],r=[];i.each(t.removedContentIds,function(e,s){var n;"fields"===s?n=u:"panels"===s?n=a:"links"===s&&(n=r),n&&i.each(e,function(e){n.push(e)})});var o=t.fields,d=t.issue.operations.linkGroups,l=t.panels,p=t.issue.summary,c=t.issue.primaryActions,h=t.issue.transitions;if(this._nothingChanged(u,a,r,o,l,d,p))return null;var g={updated:{},added:{},deleted:{}},f=e.value,v=this._comparator;return(u.length>0||o.length>0)&&this._mergeFields(o,f,g,u),(a.length>0||l.leftPanels.length>0||l.rightPanels.length>0||l.infoPanels.length>0)&&this._mergePanels(l,f,g,a,v),(r.length>0||d.length>0)&&this._mergeLinks(d,f,g,r,v),p&&this._mergeSummary(t,f,g),c&&this._mergePrimaryActions(t,f,g),h&&this._mergeTransitions(t,f,g),f.issue.status=t.issue.status,g},_skipMerging:function(e,s,n){return i.isEmpty(e)||!n.mergeIntoCurrent||!e.value||!e.value.issue||s.error===!0},_nothingChanged:function(e,s,i,n,t,u,a){return 0===e.length&&0===s.length&&0===i.length&&0===n.length&&0===u.length&&0===t.leftPanels.length&&0===t.rightPanels.length&&0===t.infoPanels.length&&!a},_mergeFields:function(e,s,n,t){n.added.fields=[],n.updated.fields=[],n.deleted.fields=[],i.each(e,function(e){var t=i.find(s.fields,function(s){return s.id===e.id});t?n.updated.fields.push(e.id):n.added.fields.push(e.id)});var u=e;i.each(s.fields,function(e){i.contains(t,e.id)?n.deleted.fields.push(e.id):i.contains(n.updated.fields,e.id)||u.push(e)}),s.fields=u},_mergeSummary:function(e,s,i){i.updated.issue=["summary"],s.issue.summary=e.issue.summary,s.issue.summaryContentId=e.issue.summaryContentId},_mergePrimaryActions:function(e,s,i){i.updated.issue=["primaryActions"],s.issue.primaryActions=e.issue.primaryActions},_mergeTransitions:function(e,s,i){i.updated.issue=["transitions"],s.issue.transitions=e.issue.transitions},_mergePanels:function(e,s,n,t,u){n.added.panels={},n.updated.panels={},n.deleted.panels={};var a=function(a){n.added.panels[a]=[],n.updated.panels[a]=[],n.deleted.panels[a]=[],i.each(e[a],function(e){var t=i.find(s.panels[a],function(s){return s.id===e.id});t?n.updated.panels[a].push(e.id):n.added.panels[a].push(e.id)});var r=e[a];i.each(s.panels[a],function(e){i.contains(t,e.completeKey)?n.deleted.panels[a].push(e.id):i.contains(n.updated.panels[a],e.id)||r.push(e)}),r.sort(u),s.panels[a]=r};a("leftPanels"),a("rightPanels"),a("infoPanels")},_mergeLinks:function(e,s,i,n,t){i.added.groups={},i.updated.groups={},i.deleted.groups={};var u=[];this._mergeOperationsLinks(e,s,u,i,n,t),this._mergeToolsLinks(e,s,u,i,n,t),s.issue.operations.linkGroups=u},_mergeOperationsLinks:function(e,s,n,t,u,a){t.added.groups["view.issue.opsbar"]=[],t.updated.groups["view.issue.opsbar"]=[],t.deleted.groups["view.issue.opsbar"]=[];var r=i.find(s.issue.operations.linkGroups,function(e){return"view.issue.opsbar"===e.id}),o=i.find(e,function(e){return"view.issue.opsbar"===e.id}),d={},l={};if(o&&i.each(o.groups,function(e){var s=i.find(r.groups,function(s){return e.id===s.id});if(s?t.updated.groups["view.issue.opsbar"].push(e.id):t.added.groups["view.issue.opsbar"].push(e.id),i.each(e.links,function(s){d[s.id]=s,l[s.id]=e.id}),e.groups&&e.groups.length>0){var n=e.groups[0];i.each(n.groups,function(e){i.each(e.links,function(s){d[s.id]=s,l[s.id]=e.id})})}}),r){var p=[];o&&i.each(o.groups,function(e){i.contains(t.added.groups["view.issue.opsbar"],e.id)&&p.push(e)}),i.each(r.groups,function(e){var s=[],n=null;o&&(n=i.find(o.groups,function(s){return e.id===s.id}),n&&i.each(n.links,function(n){var t=i.find(e.links,function(e){return n.id===e.id});t||s.push(n)}));var r=!1,c=function(e,s){i.each(e.links,function(n){var t=l[n.id];t&&t!==e.id?r=!0:d[n.id]?s.push(d[n.id]):i.contains(u,n.id)?r=!0:s.push(n)})};c(e,s),s.sort(a),e.links=s;var h=null;n&&n.groups&&n.groups.length>0&&(h=n.groups[0]);var g=null;if(e.groups&&e.groups.length>0){g=e.groups[0];var f=[];h&&i.each(h.groups,function(e){var s=i.find(g.groups,function(s){return e.id===s.id});s||f.push(e)}),i.each(g.groups,function(e){var s=[];if(h){var n=i.find(h.groups,function(s){return s.id===e.id});n&&i.each(n.links,function(n){var t=i.find(e.links,function(e){return n.id===e.id});t||s.push(n)})}c(e,s),s.length>0&&(s.sort(a),e.links=s,f.push(e))}),f.length>0?(f.sort(a),g.groups=f):(g=null,r=!0)}else h&&(g=n.groups[0]);e.groups=[],g&&(e.groups[0]=g),s.length>0||g?(p.push(e),r&&!i.contains(t.updated.groups["view.issue.opsbar"],e.id)&&t.updated.groups["view.issue.opsbar"].push(e.id)):t.deleted.groups["view.issue.opsbar"].push(e.id)}),p.length>0&&(p.sort(a),r.groups=p,n.push(r))}else o&&n.push(o);t.added.groups["view.issue.opsbar"].sort(),t.deleted.groups["view.issue.opsbar"].sort(),t.updated.groups["view.issue.opsbar"].sort()},_updatedLinks:function(e,s,n,t){function u(e){return!i.contains(n,e.id)}function a(s){return!i.findWhere(e,{id:s.id})}var r=i.chain(s).filter(a).union(e).filter(u).value();return r.sort(t),r},_collectAllLinks:function(e){var s=e.links||[],n=e.groups||[];return i.chain(n).map(this._collectAllLinks.bind(this)).flatten().union(s).value()},_mergeGroupLinks:function(e,s,n,t,u){i.map(e.groups||[],this._mergeGroupLinks.bind(this));var a=[],r=null;s&&s.groups&&s.groups.length>0&&(r=i.find(s.groups,function(s){return e.id===s.id})),r&&i.each(r.links,function(s){var n=i.find(e.links,function(e){return s.id===e.id});n||a.push(s)}),i.each(e.links,function(e){n[e.id]?a.push(n[e.id]):i.contains(t,e.id)||a.push(e)}),a.length>0&&(a.sort(u),e.links=a)},_mergeToolsLinks:function(e,s,n,t,a,r){t.updated.groups["jira.issue.tools"]=!1;var o=i.find(s.issue.operations.linkGroups,function(e){return"jira.issue.tools"===e.id}),d=i.find(e,function(e){return"jira.issue.tools"===e.id}),l={};if(d&&(t.updated.groups["jira.issue.tools"]=!0,l=i.indexBy(this._collectAllLinks(d),"id")),o){var p=d&&d.links||[],c=o.links||[];o.links=this._updatedLinks(p,c,a,r),o.groups&&o.groups.length>0?i.each(o.groups,function(e){this._mergeGroupLinks(e,d,l,a,r)}.bind(this)):d.groups&&d.groups.length>0&&(o.groups=u.extend(!0,{},d.groups)),n.push(o)}else d&&n.push(d)},_comparator:function(e,s){return e.weight&&s.weight?e.weight>s.weight?1:e.weight<s.weight?-1:0:e.weight&&!s.weight?1:!e.weight&&s.weight?-1:0},updateIssue:function(e,s){var i=this.getMeta(e);i&&i.value&&(i.value.fields=s.fields||{})}})});
//# sourceMappingURL=ViewIssueData-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/legacy/IssueFieldUtil.js' */
define("jira/components/issueviewer/legacy/issuefieldutil",["require"],function(e){"use strict";var t=e("jira/components/libs/underscore"),i=e("jquery"),r={getFieldSelector:function(e){return"issuetype"===e?"#type-val":"fixVersions"===e?"#fixfor-val":"summary"===e?"#summary-val":"labels"===e?"#wrap-labels .value":"duedate"===e?"#due-date":"#"+e+"-val"},matchesFieldSelector:function(e){return 1===i(r.getFieldSelector(e)).length},transformFieldHtml:function(e){return e.fields=t.map(e.fields,function(e){var t=i("<div />").htmlCatchExceptions(e.editHtml);return 0!==t.find("input.radio,input.checkbox").length?t.find("legend").eq(0).remove():t.find("label").eq(0).remove(),{id:e.id,label:e.label,editHtml:t.html(),required:e.required,contentId:e.contentId}}),e},getAccessKeyModifier:function(){var e=i("#home_link_drop").attr("title"),t=/\(([\w\+]+)\+\w\)/i;return t.test(e)?t.exec(e)[1]:"Alt"}};return r});
//# sourceMappingURL=IssueFieldUtil-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/Utils.js' */
define("jira/components/issueviewer/utils",["require"],function(e){"use strict";var i=e("aui/inline-dialog"),r=e("jira/ajs/layer/inline-layer"),n=e("jquery");return{hideLightbox:function(){n.fancybox.close()},hideDropdown:function(){if(i.current&&"column-picker-dialog"!==i.current.id&&i.current.hide(),r.current){var e=r.current.options.offsetTarget();e instanceof n&&(e.is(":visible")||r.current.hide())}}}});
//# sourceMappingURL=Utils-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/actions.js' */
define("jira/components/issueviewer/actions",["require"],function(e){"use strict";var n=e("jira/components/libs/underscore");return n.extend(AJS.namespace("JIRA.Issues.Actions"),{EDIT_COMMENT:"editComment"})});
//# sourceMappingURL=actions-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/eventtypes.js' */
define("jira/components/issueviewer/eventtypes",["require"],function(e){"use strict";var s=e("jira/util/events/types");return s.ISSUE_REFRESHED="issueRefreshed",s.PANEL_REFRESHED="panelRefreshed",s});
//# sourceMappingURL=eventtypes-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/analytics/IssueOpsbar.js' */
define("jira/components/issueviewer/analytics/issueopsbar",["require"],function(t){"use strict";var i=t("jira/components/libs/underscore"),e=t("jquery"),n=t("jira/viewissue/analytics-utils"),r=t("jira/components/utils/ajshelper"),s=t("jira/components/analytics-tracker/tracker"),a=function(t){this.issueId=t.model.get("id"),this.$el=t.$el,this.bindEventsToOpsbar()};return a.prototype.triggerEvent=function(t){s.trackEvent("viewissue","opsbar.operation",t),r.trigger("analyticsEvent",{name:"kickass.opsbar.operation",data:t})},a.prototype._getParamsButtonMain=function(t,e,n){return i.extend(this._getParamsCommon(t),{issueId:this.issueId,id:e.attr("id"),idx:n})},a.prototype._getParamsButtonSubmenu=function(t,e,n,r,s){return i.extend(this._getParamsCommon(t),{issueId:this.issueId,id:e.attr("id"),idx:n,parentId:r.attr("id"),parentIdx:s})},a.prototype._getParamsCommon=function(){return{context:n.context()}},a.prototype.bindEventsToOpsbar=function(){var t=this.$el.find(".toolbar-analytics");t.each(function(t,i){var n=e(i),r=n.find("a.toolbar-trigger");r.click(function(i){this.triggerEvent(this._getParamsButtonMain(i,r,t))}.bind(this));var s=n.find("li.aui-list-item a");s.length>=1&&s.each(function(i,n){var s=e(n);s.click(function(e){this.triggerEvent(this._getParamsButtonSubmenu(e,s,i,r,t))}.bind(this))}.bind(this))}.bind(this))},a});
//# sourceMappingURL=IssueOpsbar-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/analytics/IssueUxMetrics.js' */
define("jira/components/issueviewer/analytics/issue-uxmetrics",["jquery","jira/components/analytics-tracker/tracker"],function(t,e){"use strict";return{trackPageMetrics:function(){var n=t("#assignee-val").text().trim().search("Unassigned")===-1,s=0!==t("#reporter-val").text().trim().length,i=t("#opsbar-opsbar-transitions .issueaction-workflow-transition").length,o=t("#description-val"),l=o.text().trim().length,a=o.height(),u=t("#details-module ul#issuedetails>li").length,r=t("#customfield-tabs ul.property-list>li.item").length,c=t("#details-module #wrap-labels ul>li").length,m=c>0?c-1:0,d=t("#details-module ul#issuedetails>li li").length,h=t("#customfield-tabs ul.property-list>li.item li").length,p=t("ol#attachment_thumbnails>li").length,g=t(".issue-body-content .module.toggle-wrap"),C=g.not(":has(.ap-container)").length,b=g.has(".ap-container").length,v=t("#opsbar-operations_more_drop .aui-dropdown2-section .aui-list-item").length,y=t("#peoplemodule ul dl").length,w=t("#datesmodule ul dl").length,_={isAssigned:n,hasReporter:s,transitionsCount:i,descriptionCharacterCount:l,descriptionBlockHeight:a,systemFieldsCount:u,customFieldsCount:r,labelsCount:m,systemFieldChildItemsCount:d,customFieldChildItemsCount:h,attachmentsCount:p,nonConnectWebPanelsCount:C,connectWebPanelsCount:b,moreMenuItemCount:v,peopleModuleFieldsCount:y,datesModuleFieldsCount:w},f=t("#comment-tabpanel.active").length>0;f&&(_.visibleCommentsCount=t("#issue_actions_container .activity-comment").length,_.collapsedCommentsCount=t("#issue_actions_container .show-more-comments").attr("data-collapsed-count")||0),e.trackEvent("viewissue","uxmetrics",_)}}});
//# sourceMappingURL=IssueUxMetrics-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/IssueViewer.js' */
define("jira/components/issueviewer",["require"],function(e){"use strict";var s=e("jira/components/libs/underscore"),i=e("jira/components/issueviewer/actions"),t=e("jira/components/issueviewer/controllers/error"),r=e("jira/util/events"),o=e("jira/components/issueviewer/controllers/issue"),n=e("jira/components/issueviewer/legacy/issueeventbus"),u=e("jira/components/issueviewer/services/issueloader"),a=e("jira/components/issueviewer/entities/issue"),l=e("jquery"),d=e("jira/components/issueviewer/linkscapturer"),h=e("jira/components/libs/marionette-1.4.1/controller"),c=e("jira/util/data/meta"),m=e("jira/components/issueviewer/services/metadataservice"),g=e("jira/util/events/reasons"),p=window.JIRA,I=e("jira/components/issueviewer/eventtypes"),f=e("jira/components/issueviewer/utils"),v=e("jira/components/issueviewer/legacy/viewissuedata"),C=e("wrm/data"),w=e("jira/components/issueviewer/analytics/issue-uxmetrics"),E=window.AJS.contextPath(),y=function(){p.trace.apply(p,arguments)};return h.extend({namedEvents:["loadComplete","loadError","close","replacedFocusedPanel","linkToIssue"],initialize:function(e){var i=this;e=e||{},e.useJIRAEvents=e.useJIRAEvents!==!1,this.isGlobalIssueNavigator=e.isGlobalIssueNavigator||!1,this.model=new a,this.eventBus=new n,this.viewIssueData=new v({isGlobalIssueNavigator:this.isGlobalIssueNavigator}),this._buildIssueLoader(),this._buildLinksCapturer(),this._buildErrorController({showReturnToSearchOnError:e.showReturnToSearchOnError}),this._buildIssueController(),r.bind(I.REFRESH_ISSUE_PAGE,function(e,s,i){this.model.isCurrentIssue(s)&&this.refreshIssue(i)}.bind(this)),this.memoizedUxMetricsTracker=s.memoize(w.trackPageMetrics,function(){return i.model.getId()})},_buildIssueLoader:function(){this.issueLoader=new u,this.listenTo(this.issueLoader,"error",function(e,s){this.trigger("loadError",s),this.errorController.render(e,s.issueKey),this.removeIssueMetadata(),y("jira.issue.refreshed",{id:s.issueId}),this.options.useJIRAEvents&&r.trigger(I.ISSUE_REFRESHED,[s.issueId])}),this.listenTo(this.issueLoader,"issueLoaded",this._onIssueLoaded)},_buildLinksCapturer:function(){this.linksCapturer=new d,this.listenTo(this.linksCapturer,{linkToIssue:function(e){this.trigger("linkToIssue",e)},refineViewer:function(e){this.trigger("refineViewer",e)},reorderSubtasks:function(){this.issueController.showLoading(),this.refreshIssue({reason:i.UPDATE}).always(function(){this.issueController.hideLoading()}.bind(this))}})},_buildErrorController:function(e){e=e||{},this.errorController=new t({contextPath:E,showReturnToSearchOnError:e.showReturnToSearchOnError}),this.listenTo(this.errorController,"before:render",function(){this.issueController.close()}),this.listenTo(this.errorController,"returnToSearch",function(){this.trigger("close")}),this.listenAndRethrow(this.errorController,"render")},_buildIssueController:function(){this.issueController=new o({model:this.model,isGlobalIssueNavigator:this.isGlobalIssueNavigator}),this.listenAndRethrow(this.issueController,"replacedFocusedPanel"),this.listenTo(this.issueController,{render:function(e,s){f.hideDropdown(),this.errorController.close(),this.trigger("render",e,s),y("jira.psycho.issue.refreshed",{id:this.model.getId()}),this.memoizedUxMetricsTracker()},renderMainView:function(e){this.options.useJIRAEvents&&(r.trigger(I.NEW_CONTENT_ADDED,[e,g.pageLoad]),r.trigger(I.REFRESH_TOGGLE_BLOCKS,[this.model.getId()])),this.trigger("renderMainView",e,this.model.getId())},panelRendered:function(e,s,i){this.eventBus.triggerPanelRendered(e,s),this.options.useJIRAEvents&&r.trigger(I.PANEL_REFRESHED,[e,s,i]),this.trigger("panelRendered",e,s,i)},close:function(){f.hideDropdown()},individualPanelRendered:function(e){this.options.useJIRAEvents&&r.trigger(I.NEW_CONTENT_ADDED,[e,g.panelRefreshed]),this.trigger("individualPanelRendered",e)}})},_updateModel:function(e,s){this.model.update(e,s)},_onIssueLoaded:function(e,s,i){var t=i.issueEntity,o=!s.mergeIntoCurrent&&i.initialize!==!1,n=!this.model.isCurrentIssue(t.id),u=!!t.detailView;s.isUpdate&&!o||(this.model.resetToDefault(),this.errorController.close()),this._updateModel(e,{initialize:o,changed:s.changed,mergeIntoCurrent:s.mergeIntoCurrent}),s.isUpdate&&!o||this.issueController.close(),this.issueController.show(),s.fromCache&&this.refreshIssue(t,{fromCache:!0,mergeIntoCurrent:!s.error,detailView:u}),m.addIssueMetadata(this.model),t.bringToFocus&&t.bringToFocus(),this._triggerLoadComplete(n,s,t);var a={id:t.id};s.fromCache?y("jira.issue.loadFromCache",a):y("jira.issue.loadFromServer",a),y("jira.issue.refreshed",a),this.options.useJIRAEvents&&r.trigger(I.ISSUE_REFRESHED,[t.id])},_triggerLoadComplete:function(e,s,i){this.trigger("loadComplete",this.model,{isNewIssue:e,issueId:i.id,issueKey:i.key,duration:s.loadDuration,loadReason:s.fromCache?"issues-cache-refresh":void 0,fromCache:s.fromCache,issueRefreshedEvent:!!this.options.useJIRAEvents})},abortPending:function(){this.issueLoader.cancel()},canDismissComment:function(){return this.issueController.canDismissComment()},beforeHide:function(){f.hideLightbox(),f.hideDropdown(),this.abortPending(),this.removeIssueMetadata()},beforeShow:function(){m.addIssueMetadata(this.model)},getIssueId:function(){return this.model.getEntity().id||null},getIssueKey:function(){return this.model.getEntity().key||null},getProjectKey:function(){return this.model.get("projectKey")||null},getProjectType:function(){return this.model.get("projectType")||null},getProjectId:function(){return this.model.get("projectId")||null},_loadIssueFromDom:function(e){e.id&&e.id!==-1?this.issueController.applyToDom(s.extend({id:-1},e)):(this.errorController.applyToDom("notfound",e.key),this.trigger("loadError")),c.set("serverRenderedViewIssue",null);var i={id:this.getIssueId()};y("jira.issue.refreshed",i)},loadIssue:function(e){var s=c.get("serverRenderedViewIssue");return s?(e.project={id:C.claim("projectId"),key:C.claim("projectKey"),projectType:C.claim("projectType")},this.loadIssueRenderedByTheServer(e)):this.canDismissComment()&&e.key?(this.issueController.showLoading(),this.issueLoader.load({issueEntity:e,viewIssueData:this.viewIssueData})):(new l.Deferred).reject()},loadIssueRenderedByTheServer:function(e){var s=l("#key-val"),i=l("#summary-val");return e.id=s.attr("rel")||-1,e.summary=i.text(),this._loadIssueFromDom(e),this.trigger("loadComplete",this.model,{isNewIssue:!1,issueId:e.id,issueKey:e.key,duration:0,loadReason:void 0,fromCache:!1}),(new l.Deferred).resolve().promise()},refreshIssue:function(e){var i;return e=s.defaults({},e,{mergeIntoCurrent:!0}),this.model.hasIssue()?(i=this.issueLoader.update({viewIssueData:this.viewIssueData,issueEntity:this.model.getEntity(),mergeIntoCurrent:e.mergeIntoCurrent,detailView:e.detailView}),e.complete&&(i=i.done(e.complete).fail(e.complete)),this.issueController.showLoading()):i=(new l.Deferred).resolve().promise(),i},removeIssueMetadata:function(){m.removeIssueMetadata(this.model)},setContainer:function(e){this.linksCapturer.capture(e),this.errorController.setElement(e),this.issueController.setElement(e)},isCurrentlyLoading:function(){return this.issueLoader.isLoading()},updateIssueWithQuery:function(e){this.model.updateIssueQuery(e),this.issueLoader.update({viewIssueData:this.viewIssueData,issueEntity:this.model.getEntity(),mergeIntoCurrent:!0})},dismiss:function(){this.model.resetToDefault(),this.errorController.close(),this.issueController.close(),this.linksCapturer.destroy()},close:function(){this.canDismissComment()&&(this.dismiss(),this.trigger("close"))},applyResponsiveDesign:function(){this.issueController.applyResponsiveDesign()},isShowingError:function(){return this.errorController.isRendered()},focus:function(){this.issueController.focus()},initialFocus:function(){this.issueController.initialFocus()}})});
//# sourceMappingURL=IssueViewer-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/IssueViewerAppModule.js' */
define("jira/components/issueviewer/appmodule",["require"],function(e){"use strict";var r=e("jira/components/libs/underscore"),n=e("jira/components/issueviewer"),s=e("jira/components/libs/marionette-1.4.1/appmodule");return s.extend({name:"issueViewer",generateMasterRequest:!0,create:function(e){return e=r.defaults({},e,{showReturnToSearchOnError:function(){return!1}}),new n({showReturnToSearchOnError:e.showReturnToSearchOnError})},commands:function(){return{abortPending:!0,beforeHide:!0,beforeShow:!0,removeIssueMetadata:!0,updateIssueWithQuery:!0,close:!0,setContainer:!0,dismiss:!0}},requests:function(){return{loadIssue:!0,canDismissComment:!0,getIssueId:!0,getIssueKey:!0,refreshIssue:!0,isCurrentlyLoading:!0}},events:function(){return["loadComplete","loadError","close","render","replacedFocusedPanel","linkToIssue","refineViewer"]}})});
//# sourceMappingURL=IssueViewerAppModule-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/templates/Issue.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Components&&(JIRA.Components={}),"undefined"==typeof JIRA.Components.IssueViewer&&(JIRA.Components.IssueViewer={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates&&(JIRA.Components.IssueViewer.Templates={}),JIRA.Components.IssueViewer.Templates.layout=function(e,s){return'<div id="issue-content" class="issue-edit-form">'+(e.serverRenderedViewIssue?'<header id="stalker" class="issue-header js-stalker" tabindex="-1">'+JIRA.Components.IssueViewer.Templates.Header.issueHeader(e)+'</header><div class="issue-body-content">'+JIRA.Components.IssueViewer.Templates.Body.issueBodyWithPanels(e)+"</div>":'<div class="issue-header-container" />'+(e.isNewIssueViewEnabledInGlobalIssueNav&&e.isGlobalIssueNavigator?'<div id="new-issue-body-container" />':'<div class="issue-body-container" id="legacy-issue-body-container" />'))+"</div>"};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/templates/IssueHeader.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Components&&(JIRA.Components={}),"undefined"==typeof JIRA.Components.IssueViewer&&(JIRA.Components.IssueViewer={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates&&(JIRA.Components.IssueViewer.Templates={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates.Header&&(JIRA.Components.IssueViewer.Templates.Header={}),JIRA.Components.IssueViewer.Templates.Header.legacyIssueHeader=function(e,s){return'<div class="issue-header-content"><div id="issue-header-pager">'+(e.pager?JIRA.Components.IssueViewer.Templates.Header.pager(e.pager):"")+'</div><div id="heading-avatar"><img id="project-avatar" alt="" class="project-avatar-48" height="48" src="'+soy.$$escapeHtml(e.issue.project.avatarUrls["48x48"])+'" width="48"></div><ul class="breadcrumbs"><li><a id="project-name-val" href="'+soy.$$escapeHtml(AJS.contextPath())+"/browse/"+soy.$$escapeHtml(e.issue.project.key)+'">'+soy.$$escapeHtml(e.issue.project.name)+"</a> </li>"+(e.issue.parent&&e.issue.parent.id?'<li><a class="issue-link" data-issue-key="'+soy.$$escapeHtml(e.issue.parent.key)+'" href="'+soy.$$escapeHtml(AJS.contextPath())+"/browse/"+soy.$$escapeHtml(e.issue.parent.key)+'" id="parent_issue_summary" title="'+soy.$$escapeHtml(e.issue.parent.summary)+'">'+soy.$$escapeHtml(e.issue.parent.key)+" "+soy.$$escapeHtml(e.issue.parent.summary)+"</a> </li>":"")+'<li><a class="issue-link" data-issue-key="'+soy.$$escapeHtml(e.issue.key)+'" href="'+soy.$$escapeHtml(AJS.contextPath())+"/browse/"+soy.$$escapeHtml(e.issue.key)+'" id="key-val" rel="'+soy.$$escapeHtml(e.issue.id)+'">'+soy.$$escapeHtml(e.issue.key)+'</a></li></ul><h1 id="summary-val">'+soy.$$escapeHtml(e.issue.summary)+'</h1><div class="command-bar">'+(e.serverRenderedViewIssue?JIRA.Components.IssueViewer.Templates.IssueOpsbar.opsbar(e):"")+"</div></div>"},JIRA.Components.IssueViewer.Templates.Header.issueHeader=function(e,s){return'<div class="issue-header-content">'+aui.page.pageHeader({content:""+(e.issue.project?aui.page.pageHeaderImage({content:""+JIRA.Templates.Headers.projectAvatar({id:""+soy.$$escapeHtml(e.issue.project.id),projectKey:""+soy.$$escapeHtml(e.issue.project.key),projectName:""+soy.$$escapeHtml(e.issue.project.name),avatarUrl:""+soy.$$escapeHtml(e.issue.project.avatarUrls["48x48"]),avatarAlt:""+soy.$$escapeHtml(e.issue.project.name),isSystemAvatar:e.issue.project.systemAvatar})})+(e.isNewIssueViewEnabledInGlobalIssueNav&&e.isGlobalIssueNavigator?"":aui.page.pageHeaderMain({content:'<ol class="aui-nav aui-nav-breadcrumbs"><li class="breadcrumbs-project-name"><a id="project-name-val" href="'+soy.$$escapeHtml(AJS.contextPath())+"/browse/"+soy.$$escapeHtml(e.issue.project.key)+'">'+soy.$$escapeHtml(e.issue.project.name)+"</a></li>"+(e.issue.parent&&e.issue.parent.id?'<li><a class="issue-link" data-issue-key="'+soy.$$escapeHtml(e.issue.parent.key)+'" href="'+soy.$$escapeHtml(AJS.contextPath())+"/browse/"+soy.$$escapeHtml(e.issue.parent.key)+'" id="parent_issue_summary" title="'+soy.$$escapeHtml(e.issue.parent.summary)+'">'+soy.$$escapeHtml(e.issue.parent.key)+" "+soy.$$escapeHtml(e.issue.parent.summary)+"</a></li>":"")+'<li><a class="issue-link" data-issue-key="'+soy.$$escapeHtml(e.issue.key)+'" href="'+soy.$$escapeHtml(AJS.contextPath())+"/browse/"+soy.$$escapeHtml(e.issue.key)+'" id="key-val" rel="'+soy.$$escapeHtml(e.issue.id)+'">'+soy.$$escapeHtml(e.issue.key)+'</a></li></ol><h1 id="summary-val">'+soy.$$escapeHtml(e.issue.summary)+"</h1>"})):"")+aui.page.pageHeaderActions({content:'<div id="issue-header-pager">'+(e.pager?JIRA.Components.IssueViewer.Templates.Header.pager(e.pager):"")+"</div>"})})+(e.isNewIssueViewEnabledInGlobalIssueNav&&e.isGlobalIssueNavigator?"":'<div class="command-bar">'+(e.serverRenderedViewIssue?JIRA.Components.IssueViewer.Templates.IssueOpsbar.simpleOpsbar(e):"")+"</div>")+"</div>"},JIRA.Components.IssueViewer.Templates.Header.titleAttr=function(e,s){return""+(e.title?'title="'+soy.$$escapeHtml(e.title)+'"':e.label&&e.label.length&&e.label.length>25?'title="'+soy.$$escapeHtml(e.label)+'"':"")};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/templates/IssueBody.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Components&&(JIRA.Components={}),"undefined"==typeof JIRA.Components.IssueViewer&&(JIRA.Components.IssueViewer={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates&&(JIRA.Components.IssueViewer.Templates={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates.Body&&(JIRA.Components.IssueViewer.Templates.Body={}),JIRA.Components.IssueViewer.Templates.Body.issueBody=function(e,s){return""+JIRA.Components.IssueViewer.Templates.Body.issueBodyWithPanels({panels:!1,serverRenderedViewIssue:!1})},JIRA.Components.IssueViewer.Templates.Body.issueBodyWithPanels=function(e,s){var i='<div class="aui-group issue-body"><div class="aui-item issue-main-column">';if(e.serverRenderedViewIssue)for(var a=e.panels.leftPanels,l=a.length,o=0;o<l;o++){var n=a[o];i+=JIRA.Components.IssueViewer.Templates.Body.issuePanel(n)}if(i+='</div><div id="viewissuesidebar" class="aui-item issue-side-column">',e.serverRenderedViewIssue)for(var t=e.panels.rightPanels,r=t.length,d=0;d<r;d++){var u=t[d];i+=JIRA.Components.IssueViewer.Templates.Body.issuePanel(u)}return i+="</div></div>"},JIRA.Components.IssueViewer.Templates.Body.issuePanel=function(e,s){var i="";if(e.renderHeader){i+="<div id="+soy.$$escapeHtml(e.id)+' class="module toggle-wrap"><div id="'+soy.$$escapeHtml(e.id)+'_heading" class="mod-header"><ul class="ops">';for(var a=e.headerLinks.links,l=a.length,o=0;o<l;o++){var n=a[o];i+="<li>"+JIRA.Components.IssueViewer.Templates.Body.simpleLink({link:n})+"</li>"}if(e.headerLinks.groups.length>0){i+='<li class="drop"><div class="aui-dd-parent"><a href="#" class="more-menu aui-button aui-button-subtle aui-icon aui-icon-small aui-iconfont-more js-default-dropdown" title="'+soy.$$escapeHtml("Options")+'"><span>'+soy.$$escapeHtml("Options")+'</span></a><div class="aui-dropdown-content aui-list">';for(var t=e.headerLinks.groups,r=t.length,d=0;d<r;d++){var u=t[d];i+=(u.header&&u.header.label?"<h5>"+soy.$$escapeHtml(u.header.label)+"</h5>":"")+"<ul "+(u.header&&u.header.id?'id="'+soy.$$escapeHtml(u.header.id)+'"':"")+'class="aui-list-section'+(u.header&&u.header.styleClass?" "+soy.$$escapeHtml(u.header.styleClass):"")+(0==d?" aui-first":"")+(d==r-1?" aui-last":"")+'">';for(var m=u.links,p=m.length,c=0;c<p;c++){var f=m[c];i+='<li class="aui-list-item">'+JIRA.Components.IssueViewer.Templates.Body.simpleLink({link:f,additionalStyleClass:"aui-list-item-link"})+"</li>"}i+="</ul>"}i+="</div></div></li>"}if(i+="</ul>",e.subpanelHtmls.length>0){i+='<div class="mod-header-panels">';for(var y=e.subpanelHtmls,v=y.length,I=0;I<v;I++){var h=y[I];i+='<div class="mod-header-panel">'+soy.$$filterNoAutoescape(h)+"</div>"}i+="</div>"}i+='<h2 class="toggle-title">'+soy.$$escapeHtml(e.label)+'</h2></div><div class="mod-content">'+soy.$$filterNoAutoescape(e.html)+"</div></div>"}else i+=soy.$$filterNoAutoescape(e.html);return i},JIRA.Components.IssueViewer.Templates.Body.errorsLoading=function(e,s){e=e||{};var i=""+(e.isTimeout?soy.$$escapeHtml("The Jira server could not be contacted. This may be a temporary glitch or the server may be down."):soy.$$escapeHtml("There were errors loading the issue."));if(e.errorMessages){i+="<ul>";for(var a=e.errorMessages,l=a.length,o=0;o<l;o++){var n=a[o];i+="<li>"+soy.$$escapeHtml(n)+"</li>"}i+="</ul>"}return i},JIRA.Components.IssueViewer.Templates.Body.focusShifter=function(e,s){return'<div class="aui-message closeable" id="focus-shifter"><label><span>'+soy.$$escapeHtml("viewissue.focusshifter")+'</span><div id="focus-shifter-content"></div></label><span class="aui-icon icon-close"></span></div>'},JIRA.Components.IssueViewer.Templates.Body.simpleLink=function(e,s){return"<a "+(e.link.id?' id="'+soy.$$escapeHtml(e.link.id)+'"':"")+'href="'+(e.link.href?soy.$$escapeHtml(e.link.href):"#")+'"'+(e.link.styleClass||e.additionalStyleClass?'class="'+soy.$$escapeHtml(e.link.styleClass)+(e.additionalStyleClass?" "+soy.$$escapeHtml(e.additionalStyleClass):"")+'"':"")+(e.link.title?'title="'+soy.$$escapeHtml(e.link.title)+'"':"")+"><span>"+soy.$$escapeHtml(e.link.label)+"</span></a>"};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/templates/IssueError.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Components&&(JIRA.Components={}),"undefined"==typeof JIRA.Components.IssueViewer&&(JIRA.Components.IssueViewer={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates&&(JIRA.Components.IssueViewer.Templates={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates.Error&&(JIRA.Components.IssueViewer.Templates.Error={}),JIRA.Components.IssueViewer.Templates.Error.NoPermission=function(e,s){return""+JIRA.Components.IssueViewer.Templates.Error.Generic(null)},JIRA.Components.IssueViewer.Templates.Error.DoesNotExist=function(e,s){return""+JIRA.Components.IssueViewer.Templates.Error.fancyViewIssueError({title:"This issue can\'t be viewed",body:"The issue you\'re trying to view can\'t be displayed.",bodyAfter:"It may have been deleted or you don\'t have permission to view it right now.",error:"canNotBeViewed",showReloadButton:!1})},JIRA.Components.IssueViewer.Templates.Error.Generic=function(e,s){return""+JIRA.Components.IssueViewer.Templates.Error.fancyViewIssueError({title:"This issue can\'t be displayed right now",body:"It could be for a variety of reasons, like a network or application error.",bodyAfter:"Try reloading the page.",error:"genericError",showReloadButton:!0})},JIRA.Components.IssueViewer.Templates.Error.fancyViewIssueError=function(e,s){return""+JIRA.Components.IssueViewer.Templates.Error.baseViewIssueError({header:'<header class="aui-page-header"><div class="aui-page-header-inner"><div class="aui-page-header-actions"><div id="issue-header-pager"></div></div></div></header>',body:'<div class="issue-error"><span class="error-image error-image-'+soy.$$escapeHtml(e.error)+'"></span><h1>'+soy.$$escapeHtml(e.title)+"</h1><p>"+soy.$$escapeHtml(e.body)+"<br />"+soy.$$escapeHtml(e.bodyAfter)+"</p>"+(e.showReloadButton?'<p><button id="issue-error-reload-button" class="aui-button aui-button-primary">Reload</button></p>':"")+"</div>"})},JIRA.Components.IssueViewer.Templates.Error.viewIssueError=function(e,s){return""+JIRA.Components.IssueViewer.Templates.Error.baseViewIssueError({header:'<header class="aui-page-header"><div class="aui-page-header-inner"><div class="aui-page-header-main"><h1>'+soy.$$escapeHtml(e.title)+'</h1></div><div class="aui-page-header-actions"><div id="issue-header-pager"></div></div></div></header>',body:'<div class="aui-message '+soy.$$escapeHtml(e.error)+'"><span class="aui-icon icon-'+soy.$$escapeHtml(e.error)+'"></span><p>'+soy.$$escapeHtml(e.body)+"</p><p>"+soy.$$escapeHtml("If you think this message is wrong, please contact your")+' <a href="'+soy.$$escapeHtml(AJS.contextPath())+'/secure/ContactAdministrators!default.jspa">'+soy.$$escapeHtml("Jira administrators")+"</a>.</p>"+(e.returnToSearch?'<p><a id="return-to-search" class="push-state" href="'+soy.$$escapeHtml(AJS.contextPath())+'/issues/" title="'+soy.$$escapeHtml("Return to search")+'">'+soy.$$escapeHtml("Return to search")+"</a></p>":"")+"</div>"})},JIRA.Components.IssueViewer.Templates.Error.baseViewIssueError=function(e,s){return'<div id="issue-content"><header class="issue-header issue-error-header"><div class="issue-header-content">'+soy.$$filterNoAutoescape(e.header)+'</div></header><div class="issue-body-content issue-error-content">'+soy.$$filterNoAutoescape(e.body)+"</div></div>"};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/templates/IssueOpsbar.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Components&&(JIRA.Components={}),"undefined"==typeof JIRA.Components.IssueViewer&&(JIRA.Components.IssueViewer={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates&&(JIRA.Components.IssueViewer.Templates={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates.IssueOpsbar&&(JIRA.Components.IssueViewer.Templates.IssueOpsbar={}),JIRA.Components.IssueViewer.Templates.IssueOpsbar.opsbar=function(e,s){var o='<div class="ops-cont"><div class="ops-menus aui-toolbar">';if(e.issue.operations)for(var r=e.issue.operations.linkGroups,a=r.length,l=0;l<a;l++){var t=r[l];if(t.id&&"view.issue.opsbar"==t.id){o+='<div class="toolbar-split toolbar-split-left">';for(var p=t.groups,i=p.length,n=0;n<i;n++){var u=p[n];o+=JIRA.Components.IssueViewer.Templates.IssueOpsbar.linkGroup({group:u,parentGroup:t})}o+="</div>"}else t.id&&"jira.issue.tools"==t.id&&(o+='<div class="toolbar-split toolbar-split-right">'+JIRA.Components.IssueViewer.Templates.IssueOpsbar.linkGroup({group:t})+"</div>")}return o+="</div></div>"},JIRA.Components.IssueViewer.Templates.IssueOpsbar.simpleOpsbar=function(e,s){var o='<div class="ops-cont"><div class="ops-menus aui-toolbar">';if(e.issue.operations)for(var r=e.issue.operations.linkGroups,a=r.length,l=0;l<a;l++){var t=r[l];if(t.id&&"view.issue.opsbar"==t.id){o+='<div class="toolbar-split toolbar-split-left">';for(var p=t.groups,i=p.length,n=0;n<i;n++){var u=p[n];o+=JIRA.Components.IssueViewer.Templates.IssueOpsbar.linkGroup({group:u,parentGroup:t})}o+="</div>"}else t.id&&"jira.issue.tools"==t.id&&(o+='<div class="toolbar-split toolbar-split-right">'+JIRA.Components.IssueViewer.Templates.IssueOpsbar.separatedLinks({group:t})+"</div>")}return o+="</div></div>"},JIRA.Components.IssueViewer.Templates.IssueOpsbar.linkGroup=function(e,s){var o="";if(e.group.header&&(e.group.links.length>0||e.group.groups.length>0))o+=JIRA.Components.IssueViewer.Templates.IssueOpsbar.dropdownLink(e.group);else{o+="<ul "+(e.group.id?'id="opsbar-'+soy.$$escapeHtml(e.group.id)+'" ':"")+'class="toolbar-group pluggable-ops">';for(var r=e.group.links,a=r.length,l=0;l<a;l++){var t=r[l];o+=JIRA.Components.IssueViewer.Templates.IssueOpsbar.toolbarItem({link:t})}if(1==e.group.groups.length&&0==e.group.groups[0].links.length&&1==e.group.groups[0].groups.length&&1==e.group.groups[0].groups[0].links.length)o+=JIRA.Components.IssueViewer.Templates.IssueOpsbar.toolbarItem({link:e.group.groups[0].groups[0].links[0]});else for(var p=e.group.groups,i=p.length,n=0;n<i;n++){var u=p[n];o+=JIRA.Components.IssueViewer.Templates.IssueOpsbar.linkGroup({group:u})}o+="</ul>"}return o},JIRA.Components.IssueViewer.Templates.IssueOpsbar.separatedLinks=function(e,s){for(var o="",r=e.group.links,a=r.length,l=0;l<a;l++){var t=r[l];o+='<ul class="toolbar-group pluggable-ops">'+JIRA.Components.IssueViewer.Templates.IssueOpsbar.toolbarItem({link:t})+"</ul>"}for(var p=e.group.groups,i=p.length,n=0;n<i;n++){var u=p[n];o+=u.groups.length>0||u.links.length>0?'<ul class="toolbar-group pluggable-ops">'+JIRA.Components.IssueViewer.Templates.IssueOpsbar.dropdownLink(soy.$$augmentMap(u,{shouldHideLabel:!0}))+"</ul>":""}return o},JIRA.Components.IssueViewer.Templates.IssueOpsbar.dropdownLink=function(e,s){var o='<li class="toolbar-item toolbar-analytics"><div><a href="#"'+(e.header.id?'id="'+soy.$$escapeHtml(e.header.id)+'"':"")+'aria-owns="'+(e.header.id?soy.$$escapeHtml(e.header.id)+"_drop":"")+'" aria-haspopup="true"'+JIRA.Components.IssueViewer.Templates.Header.titleAttr({title:e.header.title,label:e.header.label})+'class="toolbar-trigger aui-button aui-style-default'+(e.links.length>0||e.groups.length>0?" aui-dropdown2-trigger":"")+(e.header.styleClass?" "+soy.$$escapeHtml(e.header.styleClass):"")+'">'+(e.header.iconClass?'<span class="icon '+soy.$$escapeHtml(e.header.iconClass)+'"></span> ':"")+'<span class="dropdown-text">'+(!e.shouldHideLabel&&e.header.label?soy.$$truncate(soy.$$escapeHtml(e.header.label),25,!0):"")+"</span></a><div "+(e.header.id?'id="'+soy.$$escapeHtml(e.header.id)+'_drop"':"")+' class="aui-style-default aui-dropdown2">';if(e.links.length>0){o+="<ul>";for(var r=e.links,a=r.length,l=0;l<a;l++){var t=r[l];o+=JIRA.Components.IssueViewer.Templates.IssueOpsbar.dropdownItem(t)}o+="</ul>"}for(var p=e.groups,i=p.length,n=0;n<i;n++){var u=p[n];if(u.links.length>0){o+='<div class="aui-dropdown2-section"><ul>';for(var d=u.links,I=d.length,m=0;m<I;m++){var g=d[m];o+=JIRA.Components.IssueViewer.Templates.IssueOpsbar.dropdownItem(g)}o+="</ul></div>"}}return o+="</div></div></li>"},JIRA.Components.IssueViewer.Templates.IssueOpsbar.dropdownItem=function(e,s){return'<li class="aui-list-item"><a  href="'+(e.href?soy.$$escapeHtml(e.href):"#")+'"'+(e.styleClass?'class="'+soy.$$escapeHtml(e.styleClass)+'"':"")+JIRA.Components.IssueViewer.Templates.Header.titleAttr(e)+(e.id?'id="'+soy.$$escapeHtml(e.id)+'"':"")+'><span class="trigger-label">'+soy.$$truncate(soy.$$escapeHtml(e.label),25,!0)+"</span></a></li>"},JIRA.Components.IssueViewer.Templates.IssueOpsbar.toolbarItem=function(e,s){return'<li class="toolbar-item toolbar-analytics"><a id="'+soy.$$escapeHtml(e.link.id)+'"'+JIRA.Components.IssueViewer.Templates.Header.titleAttr({title:e.link.title,label:e.link.label})+'class="toolbar-trigger'+(e.link.styleClass?" "+soy.$$escapeHtml(e.link.styleClass):"")+'" href="'+(e.link.href?soy.$$escapeHtml(e.link.href):"#")+'">'+(e.link.iconClass?'<span class="icon '+soy.$$escapeHtml(e.link.iconClass)+'"></span> <span class="trigger-label">'+soy.$$truncate(soy.$$escapeHtml(e.link.label),25,!0)+"</span>":'<span class="trigger-label">'+soy.$$truncate(soy.$$escapeHtml(e.link.label),25,!0)+"</span>")+"</a></li>"};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/templates/IssueActionsBar.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Components&&(JIRA.Components={}),"undefined"==typeof JIRA.Components.IssueViewer&&(JIRA.Components.IssueViewer={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates&&(JIRA.Components.IssueViewer.Templates={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates.IssueActionsBar&&(JIRA.Components.IssueViewer.Templates.IssueActionsBar={}),JIRA.Components.IssueViewer.Templates.IssueActionsBar.container=function(s,e){for(var t='<div class="actions-bar"><div class="ops-menus">'+(s.issue.transitions.length?JIRA.Components.IssueViewer.Templates.IssueActionsBar.statusDropdown({workflowName:s.issue.workflowName,status:s.issue.status,transitions:s.issue.transitions}):""),n=s.issue.primaryActions,a=n.length,o=0;o<a;o++)for(var i=n[o],r=i.links,l=r.length,u=0;u<l;u++){var p=r[u];t+=JIRA.Components.IssueViewer.Templates.IssueActionsBar.topLevelLink({link:p})}return t+="</div></div>"},JIRA.Components.IssueViewer.Templates.IssueActionsBar.statusDropdown=function(s,e){for(var t='<button class="actions-bar-status-trigger aui-button aui-dropdown2-trigger aui-dropdown2-trigger-arrowless status-lozenge-'+soy.$$escapeHtml(s.status.statusColor)+'" aria-owns="actions-bar-status-dropdown">'+soy.$$escapeHtml(s.status.name)+'<span class="aui-icon aui-icon-small aui-iconfont-expanded"></span></button><div id="actions-bar-status-dropdown" class="aui-style-default aui-dropdown2"><div class="aui-dropdown2-section"><div class="actions-bar-status-list">',n=s.transitions,a=n.length,o=0;o<a;o++){var i=n[o];t+=JIRA.Components.IssueViewer.Templates.IssueActionsBar.statusItem({transitionName:i.transitionName,statusName:i.destinationStatusName,statusColor:i.destinationStatusColor,link:i.url})}return t+='</div></div><div class="aui-dropdown2-section"><ul><li><a href="'+soy.$$escapeHtml(AJS.contextPath())+"/secure/admin/workflows/ViewWorkflowSteps.jspa?workflowMode=live&workflowName="+soy.$$escapeHtml(s.workflowName)+'" class="issueaction-viewworkflow jira-workflow-designer-link new-workflow-designer">'+soy.$$escapeHtml("View workflow")+"</a></li></ul></div></div>"},JIRA.Components.IssueViewer.Templates.IssueActionsBar.statusItem=function(s,e){return'<a href="'+(s.link.href?soy.$$escapeHtml(s.link.href):"#")+'" class="actions-bar-status-item issueaction-workflow-transition"><span>'+soy.$$escapeHtml(s.transitionName)+'</span><span><span class="aui-icon aui-icon-small aui-iconfont-up">→</span></span><span>'+JIRA.Components.IssueViewer.Templates.IssueActionsBar.statusLozenge({name:s.statusName,color:null!=s.statusColor?s.statusColor:"medium-gray"})+"</span></a>"},JIRA.Components.IssueViewer.Templates.IssueActionsBar.statusLozenge=function(s,e){return'<span class="jira-issue-status-lozenge aui-lozenge status-lozenge-'+soy.$$escapeHtml(s.color)+'">'+soy.$$escapeHtml(s.name)+"</span>"},JIRA.Components.IssueViewer.Templates.IssueActionsBar.topLevelLink=function(s,e){return'<a id="'+soy.$$escapeHtml(s.link.id)+'"'+JIRA.Components.IssueViewer.Templates.Header.titleAttr({title:s.link.title,label:s.link.label})+'class="aui-button '+soy.$$escapeHtml(s.link.styleClass)+'" href="'+(s.link.href?soy.$$escapeHtml(s.link.href):"#")+'" ><span class="trigger-label">'+soy.$$truncate(soy.$$escapeHtml(s.link.label),25,!0)+"</span></a>"};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/templates/amd-wrapper.js' */
define("jira/components/issueviewer/templates",function(){"use strict";return JIRA.Components.IssueViewer.Templates}),AJS.namespace("JIRA.Components.IssueViewer.Templates",null,require("jira/components/issueviewer/templates"));
//# sourceMappingURL=amd-wrapper-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'issueviewer/js/namespace.js' */
AJS.namespace("JIRA.Components.IssueViewer",null,require("jira/components/issueviewer")),AJS.namespace("JIRA.Components.IssueViewer.AppModule",null,require("jira/components/issueviewer/appmodule")),AJS.namespace("JIRA.Components.IssueViewer.Utils",null,require("jira/components/issueviewer/utils")),AJS.namespace("JIRA.Components.IssueViewer.Controllers.Error",null,require("jira/components/issueviewer/controllers/error")),AJS.namespace("JIRA.Components.IssueViewer.Controllers.Issue",null,require("jira/components/issueviewer/controllers/issue")),AJS.namespace("JIRA.Components.IssueViewer.Models.Issue",null,require("jira/components/issueviewer/entities/issue")),AJS.namespace("JIRA.Components.IssueViewer.Models.Panel",null,require("jira/components/issueviewer/entities/panel")),AJS.namespace("JIRA.Components.IssueViewer.Collections.Panels",null,require("jira/components/issueviewer/entities/panels")),AJS.namespace("JIRA.Components.IssueViewer.Models.PanelsGroup",null,require("jira/components/issueviewer/entities/panelsgroup")),AJS.namespace("JIRA.Components.IssueViewer.Legacy.AsyncData",null,require("jira/components/issueviewer/legacy/asyncdata")),AJS.namespace("JIRA.Components.IssueViewer.Legacy.IssueEventBus",null,require("jira/components/issueviewer/legacy/issueeventbus")),AJS.namespace("JIRA.Components.IssueViewer.Legacy.IssueFieldUtil",null,require("jira/components/issueviewer/legacy/issuefieldutil")),AJS.namespace("JIRA.Components.IssueViewer.Legacy.ViewIssueData",null,require("jira/components/issueviewer/legacy/viewissuedata")),AJS.namespace("JIRA.Components.IssueViewer.Services.DarkFeatures",null,require("jira/components/issueviewer/services/darkfeatures")),AJS.namespace("JIRA.Components.IssueViewer.Services.IssueLoader",null,require("jira/components/issueviewer/services/issueloader")),AJS.namespace("JIRA.Components.IssueViewer.Services.Metadata",null,require("jira/components/issueviewer/services/metadataservice")),AJS.namespace("JIRA.Components.IssueViewer.Views.ErrorGeneric",null,require("jira/components/issueviewer/views/errorgeneric")),AJS.namespace("JIRA.Components.IssueViewer.Views.ErrorNotFound",null,require("jira/components/issueviewer/views/errornotfound")),AJS.namespace("JIRA.Components.IssueViewer.Views.Error",null,require("jira/components/issueviewer/views/error")),AJS.namespace("JIRA.Components.IssueViewer.Views.IssueBody",null,require("jira/components/issueviewer/views/issuebody")),AJS.namespace("JIRA.Components.IssueViewer.Views.IssueHeader",null,require("jira/components/issueviewer/views/issueheader")),AJS.namespace("JIRA.Components.IssueViewer.Views.IssueOpsbar",null,require("jira/components/issueviewer/views/issueopsbar")),AJS.namespace("JIRA.Components.IssueViewer.Views.IssuePanels",null,require("jira/components/issueviewer/views/issuepanels")),AJS.namespace("JIRA.Components.IssueViewer.Views.IssuePanel",null,require("jira/components/issueviewer/views/issuepanel")),AJS.namespace("JIRA.Components.IssueViewer.Views.Issue",null,require("jira/components/issueviewer/views/issue")),AJS.namespace("JIRA.Components.IssueViewer.Templates",null,require("jira/components/issueviewer/templates"));
//# sourceMappingURL=namespace-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-attachment-plugin:integrate-attachment-upload', location = 'jira-attachments.js' */
!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(1),o=r(i),a=n(77),s=r(a),u=n(78),c=r(u),l=n(83),f=r(l),d=n(85),h=r(d),p=n(86),v=r(p),m=n(89),y=r(m),b=n(4),g=r(b),_=n(90),w=r(_),x=n(9),k=r(x);g.default.areAttachmentsEnabled()&&((0,w.default)(),k.default.install(),h.default.registerAttachmentMenuHandlerFactory(c.default),h.default.registerBrowseLinkHandlerFactory(c.default),h.default.registerAttachmentsZoneCreator(o.default),h.default.registerTemporaryAttachmentCreatorFactory(f.default),h.default.registerTemporaryAttachmentZoneCreator(s.default),h.default.registerTemporaryBinaryUploadHandler(v.default),h.default.registerConnectedTemporaryBinaryUploadHandler(y.default))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=n(16),a=r(o),s=n(10),u=r(s),c=n(20),l=r(c);t.default=function(e){var t="view-issue/drop-zone",n=(0,i.dropzone)(e).then(function(e){return e.on("drop",function(){a.default.triggerAttachRequested("viewIssueDropZone")}),e}),r=!1;return{activate:function(){return n.then(function(e){r||(r=!0,e.activate(),u.default.publish("upload/switch-context",{name:t}))})},deactivate:function(){return n.then(function(e){r&&(e.deactivate(),r=!1)})},drop:function(){return n.catch(function(e){a.default.triggerInitialisationException((0,l.default)(e)),u.default.publish("media/error","jira.attachments.setup.failed.description")})}}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.connectedTemporaryBinary=t.binary=t.dropzone=t.popup=t.browser=t.temporaryAttachmentDropzone=t.temporaryAttachmentPopup=t.temporaryAttachmentBrowser=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(3),a=r(o),s=n(16),u=r(s),c=n(17),l=r(c),f=n(24),d=n(20),h=r(d),p=n(76),v=n(19),m=r(v),y="user_token_fetch_fail",b=3e4,g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.default.getApiUrl,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.default.authProvider,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.default.getUploadParameters,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:p.connectToIssueChanges;return n().then(function(t){m.default.mark("attachments.media.components."+e+".credentials.received");var n=i({},{apiUrl:t},{authProvider:r});return n}).then(function(n){return(0,f.MediaPicker)(e,n,t)}).then(function(t){return m.default.mark("attachments.media.components."+e+".component.created"),t}).then(p.connect).then(s).then(function(e){return o().then(function(t){return e.setUploadParams(t)}),e})}},_=function(e){return new Promise(function(t,n){var r=l.default.schedule(function(){u.default.triggerInitializationTimeout(),n({message:"Initialisation Timeout",logged:!0})},b);e.on("ready",function(){m.default.mark("attachments.media.components.popup.ready"),l.default.cancel(r),u.default.triggerPopupInitialized(),u.default.triggerPopupMetrics(),t(e)}),e.on("upload-error",function(t){var i=t.error;i.logged=!0,i.name===y?(u.default.triggerUserNotLoggedIn(),m.default.mark("attachments.media.components.popup.user.not.logged"),l.default.cancel(r),e.teardown(),n(i)):u.default.triggerPopupError((0,h.default)(i))})})},w=g("browser",{multiple:!0}),x=function(e){return g("popup",{userAuthProvider:e})().then(_)},k=function(e){return g("dropzone",{headless:!0,container:e})()},A=(t.temporaryAttachmentBrowser=function(e){return function(){return w(a.default.getApiUrl,a.default.temporaryAuthProvider,a.default.getTemporaryAttachmentUploadParameters.bind(null,e),p.connectToProjectChanges)}},t.temporaryAttachmentPopup=function(e){return function(t){return g("popup",{userAuthProvider:t})(a.default.getApiUrl,a.default.temporaryAuthProvider,a.default.getTemporaryAttachmentUploadParameters.bind(null,e),p.connectToProjectChanges).then(_)}},t.temporaryAttachmentDropzone=function(e,t){return g("dropzone",{headless:!0,container:t})(a.default.getApiUrl,a.default.temporaryAuthProvider,a.default.getTemporaryAttachmentUploadParameters.bind(null,e),p.connectToProjectChanges)},function(e){return a.default.getApiUrl().then(function(t){var n=i({},{apiUrl:t},{authProvider:function(){return a.default.temporaryAuthProviderGetter(e)}});return n}).then(function(e){return(0,f.MediaPicker)("binary",e)}).then(function(t){return a.default.getTemporaryAttachmentUploadParameters(e).then(function(e){return t.setUploadParams(e),t})})}),S=function(e){return g("binary")(a.default.getApiUrl,a.default.temporaryAuthProvider,a.default.getTemporaryAttachmentUploadParameters.bind(null,e),p.connectToProjectChanges)};t.browser=w,t.popup=x,t.dropzone=k,t.binary=A,t.connectedTemporaryBinary=S},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(4),s=r(a),u=n(8),c=r(u),l=n(9),f=r(l),d=n(11),h=r(d),p=n(16),v=r(p),m=n(20),y=r(m),b=n(22),g=r(b),_=n(7),w=r(_);n(23);var x=(0,c.default)(),k=function(e){return e.ok?e.json():e.text().then(function(t){t=t||"Unexpected error",t="Credentials request failure: "+t+" (http status code: "+e.status+")";var n=new Error(t);throw n.description=t,n})},A=function(e){return[x+"/rest/api/2/attachment/upload/issue/"+e+"/credentials",{credentials:"same-origin"}]},S=function(e){return[x+"/rest/api/2/attachment/upload/project/"+e+"/credentials",{credentials:"same-origin"}]},P=function(e,t){return[x+"/rest/api/2/attachment/upload/issue/"+e,{credentials:"same-origin",method:"POST",body:JSON.stringify({fileId:t}),headers:{"Content-Type":"application/json"}}]},O=function(e,t,n){return[x+"/rest/api/2/attachment/upload/project/"+e,{credentials:"same-origin",method:"POST",body:JSON.stringify({fileId:t,formToken:n}),headers:{"Content-Type":"application/json"}}]},I=function(){return new Request(x+"/rest/internal/latest/media/user/credentials",{credentials:"same-origin"})},E={fetchMetadata:!1,autoFinalize:!0},j=function(e){return Promise.resolve(e).then(F).then(k).then(function(e){var t=e.token,n=e.targetCollection,r=e.tokenDurationInMins;return o({},{token:t,targetCollection:n},isNaN(r)?{}:{tokenDurationInMins:r})})},T=function(e){return Promise.resolve(e).then(fetch).then(k).then(function(e){var t=e.id,n=e.token,r=e.tokenDurationInMins;return o({},{clientId:t,token:n},isNaN(r)?{}:{tokenDurationInMins:r})})},C=function(e){return 60*((e.tokenDurationInMins||10)-1)*1e3},M=(0,g.default)(function(e){return Promise.resolve(e).then(A).then(j)},C),U=(0,g.default)(function(e){return Promise.resolve(e).then(S).then(j)},C),L=(0,g.default)(function(e){return Promise.resolve(e).then(I).then(T)},C),F=function(e){var t=i(e,2),n=t[0],r=t[1];return fetch(n,r)},R=w.default.memoize(function(){return new Promise(function(e){e(s.default.getMediaCredentials())}).then(function(e){if(e&&e.apiClientId)return e.apiClientId;throw new Error("Media clientId is missing or have unexpected format")}).catch(function(e){return Promise.reject({name:"Could not retrieve clientId",description:(0,y.default)(e)})})}),N=function(e){return R().then(function(t){return U.get(e).then(function(e){return{clientId:t,token:e.token}})}).catch(function(e){v.default.triggerTokenFetchFailed((0,y.default)(e))})};t.default={getClientId:R,getApiUrl:w.default.memoize(function(){return new Promise(function(e){e(s.default.getMediaCredentials())}).then(function(e){if(e&&e.apiUrl)return e.apiUrl;throw new Error("Media apiUrl is missing or have unexpected format")}).catch(function(e){return Promise.reject({name:"Could not retrieve apiUrl",description:(0,y.default)(e)})})}),authProvider:function(){return R().then(function(e){return h.default.getIssueId().then(function(e){return M.get(e)}).then(function(t){return{clientId:e,token:t.token}})}).catch(function(e){v.default.triggerTokenFetchFailed((0,y.default)(e))})},userAuthProvider:function(){return Promise.resolve("userAuth").then(L.get).catch(function(e){v.default.triggerUserAuthFetchFailed((0,y.default)(e))})},temporaryAuthProvider:function(){return f.default.getProjectContext().then(function(e){return N(e)}).catch(function(e){v.default.triggerTokenFetchFailed((0,y.default)(e))})},temporaryAuthProviderGetter:N,getUploadParameters:function(){return h.default.getIssueId().then(function(e){return M.get(e)}).then(function(e){return o({},E,{collection:e.targetCollection})}).catch(function(e){return v.default.triggerUploadParametersFetchFailed((0,y.default)(e)),E})},createAttachment:function(e,t){return Promise.resolve(P(e,t)).then(F).then(k)},createTemporaryAttachment:function(e,t,n){return Promise.resolve(O(e,t,n)).then(F).then(k)},getTemporaryAttachmentUploadParameters:function(e){return Promise.resolve(e).then(U.get).then(function(e){return o({},E,{collection:e.targetCollection})}).catch(function(e){return v.default.triggerUploadParametersFetchFailed((0,y.default)(e)),E})},reset:function(){M.clear()}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),o=r(i),a=n(6),s=r(a),u=n(7),c=r(u),l="com.atlassian.jira.jira-attachment-plugin:integrate-attachment-upload.integration-configuration",f=["\\","/",'"',":","?","*","<","|",">"],d=o.default.getWRM("upload-limit")||1/0,h=o.default.getWRM("thumbnail-mime-types"),p=c.default.memoize(function(){return s.default.claim(l)});t.default={getInvalidChars:function(){return f},getMaxFileSize:function(){return d},getThumbnailMimeType:function(){return h},getMediaCredentials:function(){var e=p(),t=e.apiUrl,n=e.apiClientId;return{apiUrl:t,apiClientId:n}},areAttachmentsEnabled:function(){return p().attachmentsEnabled===!0}}},function(e,t){e.exports=require("dndattachment/util/Configuration")},function(e,t){e.exports=require("wrm/data")},function(e,t){e.exports=require("underscore")},function(e,t){e.exports=require("wrm/context-path")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(10),o=r(i),a={uploadContext:null,projectId:null};t.default={getProjectContext:function(){return a.projectId?Promise.resolve(a.projectId):Promise.reject(new Error("Project id wasn't set"))},getUploadContextName:function(){return a.uploadContext&&a.uploadContext.name},getUploadContextSettings:function(){return a.uploadContext&&a.uploadContext.uploadSettings},install:function(){o.default.subscribe("upload/switch-context",function(e){a.uploadContext=e}),o.default.subscribe("project/changed",function(e){a.projectId=e})}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=new Map;t.default={subscribe:function(e,t){n.has(e)||n.set(e,[]),n.get(e).push(t)},publish:function(e,t){n.has(e)&&n.get(e).forEach(function(e){e(t)})},unsubscribe:function(e){n.forEach(function(t){for(var n=0,r=t.length;n<r;n++)t[n]===e&&(t.splice(n,1),n--)})},reset:function(){n=new Map}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(10),o=r(i),a=n(12),s=r(a),u=n(13),c=r(u),l=n(14),f=r(l),d=n(15),h=r(d),p=2e3,v=function(){return new Promise(function(e,t){var n=s.default.getSelectedIssueId(),r=void 0;n?e(n):r=setInterval(function(){n=s.default.getSelectedIssueId(),n&&(clearInterval(r),e(n))},p)})},m=void 0;c.default.bind(f.default.ISSUE_REFRESHED,function(e,t){m=Promise.resolve(t),o.default.publish("issue/changed",t)}),t.default={getIssueId:function(){return m=m||v()},getIssueKey:function(){return s.default.getSelectedIssueKey()},getIssuePermlink:function(){return h.default.get("viewissue-permlink")}}},function(e,t){e.exports=require("jira/issues/api")},function(e,t){e.exports=require("jira/util/events")},function(e,t){e.exports=require("jira/components/issueviewer/eventtypes")},function(e,t){e.exports=require("jira/util/data/meta")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(17),a=r(o),s=n(19),u=r(s),c=n(20),l=r(c),f=n(21),d=r(f),h={stopInitialising:function(e){this.initialising=!1,this.popupInitialised=e},startRequest:function(e){this.requestStartedTime=a.default.current(),this.source=e},getData:function(e){var t=e.error,n=e.fileSize,r=e.uploadId;return{msSinceLastUserAction:a.default.since(this.requestStartedTime),initialising:this.initialising,popupInitialised:this.popupInitialised,source:this.source,error:(0,d.default)(t),fileSize:n,uploadId:r}},reset:function(){this.initialising=!0,this.popupInitialised=!1,this.requestStartedTime=Number.MAX_VALUE}};h.reset();var p=function(e,t){return AJS.trigger("analytics",{name:e,data:t})},v=function(e,t){return p(e,h.getData(t||{}))},m=function(e,t){return p(e,i({},{source:h.source},t))};t.default={triggerPopupInitialized:function(){h.stopInitialising(!0),v("issue.attachment.media-picker.popup-initialized")},triggerUserNotLoggedIn:function(){h.stopInitialising(!1),v("issue.attachment.media-picker.user-not-logged")},triggerPopupError:function(e){v("issue.attachment.media-picker.popup-error",{error:e})},triggerGenericPopupInitialisationError:function(e){v("issue.attachment.media-picker.generic-popup-initialisation-error",{error:e})},triggerAttachRequested:function(e){h.startRequest(e),v("issue.attachment.media-picker.attach-requested")},triggerPopupShown:function(){v("issue.attachment.media-picker.popup-shown")},triggerPopupFailedToShow:function(e){v("issue.attachment.media-picker.popup-failed-to-show",{error:e})},triggerAttachFileBrowserShown:function(){v("issue.attachment.media-picker.browse-shown")},triggerAttachFileBrowserFailedToShow:function(e){v("issue.attachment.media-picker.browse-failed-to-show",{error:e})},triggerInitialisationException:function(e){e=(0,l.default)(e),h.stopInitialising(!1),v("issue.attachment.media-picker.initialisation-exception",{error:e})},triggerFileUploadFinished:function(e){v("issue.attachment.media-picker.file-upload-finished",{uploadId:e})},triggerAttachmentCreatedInJIRA:function(e){v("issue.attachment.media-picker.attachment-created-in-jira",{uploadId:e})},triggerCantCreateAttachmentInJIRA:function(e,t){v("issue.attachment.media-picker.cant-create-attachment-in-jira",{error:e,uploadId:t})},triggerUploadStarted:function(e,t){v("issue.attachment.media-picker.upload-started",{uploadId:e,fileSize:t})},triggerUploadError:function(e,t){v("issue.attachment.media-picker.upload-error",{error:e,uploadId:t})},triggerUploadCancelled:function(e){v("issue.attachment.media-picker.upload-cancelled",{uploadId:e})},triggerUploadValidationFailed:function(e,t){v("issue.attachment.media-picker.upload-validation-failed",{error:e,uploadId:t})},triggerInitializationTimeout:function(){v("issue.attachment.media-picker.initialization-timeout")},triggerTokenFetchFailed:function(e){v("issue.attachment.media-picker.error.token-fetch",{error:e})},triggerUserAuthFetchFailed:function(e){v("issue.attachment.media-picker.popup-error.user-auth-fetch",{error:e})},triggerUploadParametersFetchFailed:function(e){v("issue.attachment.media-picker.error.upload-params-fetch",{error:e})},triggerUploadRequestedWhenNotInitialised:function(){v("issue.attachment.media-picker.upload-request.not-initialised")},triggerBrowserRequestedWhenNotInitialised:function(){v("issue.attachment.media-picker.upload-request.browser.not-initialised")},triggerTemporaryAttachmentCreatedInJIRA:function(e){m("issue.attachment.media-picker.temporary.attachment-created-in-jira",{uploadId:e})},triggerCantCreateTemporaryAttachmentInJIRA:function(e,t){m("issue.attachment.media-picker.temporary.cant-create-attachment-in-jira",{error:e,uploadId:t})},triggerPopupMetrics:function(){var e=i({"dom.loaded":u.default.getDomContentLoadedTiming()},u.default.getMarksForNamespace("attachments.media.components.popup"));AJS.trigger("analytics",{name:"issue.attachment.media-picker.popup-metrics",data:e})},getRequestIdentifier:function(){return h.requestIdentifier},reset:function(){h.reset()}}},function(e,t,n){(function(e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={current:function(){return Math.round(e&&e.performance&&e.performance.now())},since:function(e){return Math.round(this.current()-e)},schedule:function(e,t){return setTimeout(e,t)},cancel:function(e){clearTimeout(e)}}}).call(t,n(18))},function(e,t,n){(function(t){"use strict";e.exports="object"==typeof self&&self.self===self&&self||"object"==typeof t&&t.global===t&&t||this}).call(t,n(18))},function(e,t,n){(function(e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={mark:function(t){return e&&e.performance&&e.performance.mark(t)},getMarksForNamespace:function(t){var n={};if(e&&e.performance){e.performance.getEntriesByType("mark").filter(function(e){return 0===e.name.indexOf(t)}).forEach(function(e){var t=e.name,r=e.startTime;return n[t]=parseInt(r,10)})}return n},getDomContentLoadedTiming:function(){var t=e&&e.performance&&e.performance.timing;return t?parseInt(t.domContentLoadedEventStart-t.navigationStart,10):0}}}).call(t,n(18))},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=function(e){return"undefined"!=typeof e},i=function(e){return r(e.config)&&r(e.config.headers)&&r(e.response)&&r(e.response.config)&&r(e.response.config.headers)};t.default=function(e){if(r(e.name)&&r(e.message))return e.toString();if(r(e.name)&&r(e.description))return e.name+": "+e.description;if(r(e.message))return e.message;if("string"==typeof e)return e;if(i(e)){var t=n({},e);return delete t.config.headers.Authorization,delete t.response.config.headers.Authorization,""+e}return""+e}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return"string"==typeof e&&e.indexOf("Authorization")!==-1?"Error sanitized":e}},function(e,t){"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!1},n=new Map;return{get:function(i){if(!n.has(i)){var o=e(i).then(function(e){var o=t(e);return o&&setTimeout(function(){return r(n,i)},o),e}).catch(function(e){throw r(n,i),e});n.set(i,o)}return n.get(i)},clear:function(){n.clear()}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var r=function(e,t){return e.has(t)&&e.delete(t)}},function(e,t){!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!=typeof e&&(e=String(e)),e}function r(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return y.iterable&&(t[Symbol.iterator]=function(){return t}),t}function i(e){this.map={},e instanceof i?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function o(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function a(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function s(e){var t=new FileReader,n=a(t);return t.readAsArrayBuffer(e),n}function u(e){var t=new FileReader,n=a(t);return t.readAsText(e),n}function c(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}function l(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function f(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(y.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(y.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(y.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(y.arrayBuffer&&y.blob&&g(e))this._bodyArrayBuffer=l(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!y.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!_(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=l(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):y.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},y.blob&&(this.blob=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(c(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},y.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function d(e){var t=e.toUpperCase();return w.indexOf(t)>-1?t:e}function h(e,t){t=t||{};var n=t.body;if(e instanceof h){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new i(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new i(t.headers)),this.method=d(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function p(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}}),t}function v(e){var t=new i;return e.split(/\r?\n/).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}}),t}function m(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new i(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var y={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(y.arrayBuffer)var b=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],g=function(e){return e&&DataView.prototype.isPrototypeOf(e)},_=ArrayBuffer.isView||function(e){return e&&b.indexOf(Object.prototype.toString.call(e))>-1};i.prototype.append=function(e,r){e=t(e),r=n(r);var i=this.map[e];this.map[e]=i?i+","+r:r},i.prototype.delete=function(e){delete this.map[t(e)]},i.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},i.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},i.prototype.set=function(e,r){this.map[t(e)]=n(r)},i.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},i.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),r(e)},i.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),r(e)},i.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),r(e)},y.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];h.prototype.clone=function(){return new h(this,{body:this._bodyInit})},f.call(h.prototype),f.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},m.error=function(){var e=new m(null,{status:0,statusText:""});return e.type="error",e};var x=[301,302,303,307,308];m.redirect=function(e,t){if(x.indexOf(t)===-1)throw new RangeError("Invalid status code");return new m(null,{status:t,headers:{location:e}})},e.Headers=i,e.Request=h,e.Response=m,e.fetch=function(e,t){return new Promise(function(n,r){var i=new h(e,t),o=new XMLHttpRequest;o.onload=function(){var e={status:o.status,statusText:o.statusText,headers:v(o.getAllResponseHeaders()||"")};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var t="response"in o?o.response:o.responseText;n(new m(t,e))},o.onerror=function(){r(new TypeError("Network request failed"))},o.ontimeout=function(){r(new TypeError("Network request failed"))},o.open(i.method,i.url,!0),"include"===i.credentials&&(o.withCredentials=!0),"responseType"in o&&y.blob&&(o.responseType="blob"),i.headers.forEach(function(e,t){o.setRequestHeader(t,e)}),o.send("undefined"==typeof i._bodyInit?null:i._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},function(e,t,n){!function(e,t){for(var n in t)e[n]=t[n]}(t,function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="lib/",t(t.s=149)}([function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(159),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},function(e,t){var n=e.exports={version:"2.5.1"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r=n(61)("wks"),i=n(42),o=n(4).Symbol,a="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=r},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var r=n(4),i=n(2),o=n(14),a=n(15),s=function(e,t,n){var u,c,l,f=e&s.F,d=e&s.G,h=e&s.S,p=e&s.P,v=e&s.B,m=e&s.W,y=d?i:i[t]||(i[t]={}),b=y.prototype,g=d?r:h?r[t]:(r[t]||{}).prototype;d&&(n=t);for(u in n)(c=!f&&g&&void 0!==g[u])&&u in y||(l=c?g[u]:n[u],y[u]=d&&"function"!=typeof g[u]?n[u]:v&&c?o(l,r):m&&g[u]==l?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(l):p&&"function"==typeof l?o(Function.call,l):l,p&&((y.virtual||(y.virtual={}))[u]=l,e&s.R&&b&&!b[u]&&a(b,u,l)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t,n){"use strict";function r(e){return"[object Array]"===k.call(e)}function i(e){return"[object ArrayBuffer]"===k.call(e)}function o(e){return"undefined"!=typeof FormData&&e instanceof FormData}function a(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer}function s(e){return"string"==typeof e}function u(e){return"number"==typeof e}function c(e){return void 0===e}function l(e){return null!==e&&"object"==typeof e}function f(e){return"[object Date]"===k.call(e)}function d(e){return"[object File]"===k.call(e)}function h(e){return"[object Blob]"===k.call(e)}function p(e){return"[object Function]"===k.call(e)}function v(e){return l(e)&&p(e.pipe)}function m(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams}function y(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function b(){return"undefined"!=typeof window&&"undefined"!=typeof document&&"function"==typeof document.createElement}function g(e,t){if(null!==e&&void 0!==e)if("object"==typeof e||r(e)||(e=[e]),r(e))for(var n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}function _(){function e(e,n){"object"==typeof t[n]&&"object"==typeof e?t[n]=_(t[n],e):t[n]=e}for(var t={},n=0,r=arguments.length;n<r;n++)g(arguments[n],e);return t}function w(e,t,n){return g(t,function(t,r){e[r]=n&&"function"==typeof t?x(t,n):t}),e}var x=n(117),k=Object.prototype.toString;e.exports={isArray:r,isArrayBuffer:i,isFormData:o,isArrayBufferView:a,isString:s,isNumber:u,isObject:l,isUndefined:c,isDate:f,isFile:d,isBlob:h,isFunction:p,isStream:v,isURLSearchParams:m,isStandardBrowserEnv:b,forEach:g,merge:_,extend:w,trim:y}},function(e,t,n){(function(t,n){/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
	 * @version   4.1.1
	 */
!function(t,r){e.exports=function(){"use strict";function e(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}function i(e){return"function"==typeof e}function o(e){V=e}function a(e){W=e}function s(){return void 0!==$?function(){$(c)}:u()}function u(){var e=setTimeout;return function(){return e(c,1)}}function c(){for(var e=0;e<q;e+=2)(0,X[e])(X[e+1]),X[e]=void 0,X[e+1]=void 0;q=0}function l(e,t){var n=arguments,r=this,i=new this.constructor(d);void 0===i[ee]&&T(i);var o=r._state;return o?function(){var e=n[o-1];W(function(){return I(o,i,e,r._result)})}():A(r,i,e,t),i}function f(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(d);return _(n,e),n}function d(){}function h(){return new TypeError("You cannot resolve a promise with itself")}function p(){return new TypeError("A promises callback cannot return that same promise.")}function v(e){try{return e.then}catch(e){return ie.error=e,ie}}function m(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}function y(e,t,n){W(function(e){var r=!1,i=m(n,t,function(n){r||(r=!0,t!==n?_(e,n):x(e,n))},function(t){r||(r=!0,k(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&i&&(r=!0,k(e,i))},e)}function b(e,t){t._state===ne?x(e,t._result):t._state===re?k(e,t._result):A(t,void 0,function(t){return _(e,t)},function(t){return k(e,t)})}function g(e,t,n){t.constructor===e.constructor&&n===l&&t.constructor.resolve===f?b(e,t):n===ie?(k(e,ie.error),ie.error=null):void 0===n?x(e,t):i(n)?y(e,t,n):x(e,t)}function _(t,n){t===n?k(t,h()):e(n)?g(t,n,v(n)):x(t,n)}function w(e){e._onerror&&e._onerror(e._result),S(e)}function x(e,t){e._state===te&&(e._result=t,e._state=ne,0!==e._subscribers.length&&W(S,e))}function k(e,t){e._state===te&&(e._state=re,e._result=t,W(w,e))}function A(e,t,n,r){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+ne]=n,i[o+re]=r,0===o&&e._state&&W(S,e)}function S(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,i=void 0,o=e._result,a=0;a<t.length;a+=3)r=t[a],i=t[a+n],r?I(n,r,i,o):i(o);e._subscribers.length=0}}function P(){this.error=null}function O(e,t){try{return e(t)}catch(e){return oe.error=e,oe}}function I(e,t,n,r){var o=i(n),a=void 0,s=void 0,u=void 0,c=void 0;if(o){if(a=O(n,r),a===oe?(c=!0,s=a.error,a.error=null):u=!0,t===a)return void k(t,p())}else a=r,u=!0;t._state!==te||(o&&u?_(t,a):c?k(t,s):e===ne?x(t,a):e===re&&k(t,a))}function E(e,t){try{t(function(t){_(e,t)},function(t){k(e,t)})}catch(t){k(e,t)}}function j(){return ae++}function T(e){e[ee]=ae++,e._state=void 0,e._result=void 0,e._subscribers=[]}function C(e,t){this._instanceConstructor=e,this.promise=new e(d),this.promise[ee]||T(this.promise),H(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?x(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&x(this.promise,this._result))):k(this.promise,M())}function M(){return new Error("Array Methods must be provided an Array")}function U(e){return new C(this,e).promise}function L(e){var t=this;return new t(H(e)?function(n,r){for(var i=e.length,o=0;o<i;o++)t.resolve(e[o]).then(n,r)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function F(e){var t=this,n=new t(d);return k(n,e),n}function R(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function N(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function z(e){this[ee]=j(),this._result=this._state=void 0,this._subscribers=[],d!==e&&("function"!=typeof e&&R(),this instanceof z?E(this,e):N())}function D(){var e=void 0;if(void 0!==n)e=n;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===r&&!t.cast)return}e.Promise=z}var B=void 0;B=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var H=B,q=0,$=void 0,V=void 0,W=function(e,t){X[q]=e,X[q+1]=t,2===(q+=2)&&(V?V(c):Z())},J="undefined"!=typeof window?window:void 0,K=J||{},G=K.MutationObserver||K.WebKitMutationObserver,Y="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),Q="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,X=new Array(1e3),Z=void 0;Z=Y?function(){return function(){return t.nextTick(c)}}():G?function(){var e=0,t=new G(c),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}():Q?function(){var e=new MessageChannel;return e.port1.onmessage=c,function(){return e.port2.postMessage(0)}}():void 0===J?function(){try{var e=r(209);return $=e.runOnLoop||e.runOnContext,s()}catch(e){return u()}}():u();var ee=Math.random().toString(36).substring(16),te=void 0,ne=1,re=2,ie=new P,oe=new P,ae=0;return C.prototype._enumerate=function(e){for(var t=0;this._state===te&&t<e.length;t++)this._eachEntry(e[t],t)},C.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===f){var i=v(e);if(i===l&&e._state!==te)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(n===z){var o=new n(d);g(o,e,i),this._willSettleAt(o,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},C.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===te&&(this._remaining--,e===re?k(r,n):this._result[t]=n),0===this._remaining&&x(r,this._result)},C.prototype._willSettleAt=function(e,t){var n=this;A(e,void 0,function(e){return n._settledAt(ne,t,e)},function(e){return n._settledAt(re,t,e)})},z.all=U,z.race=L,z.resolve=f,z.reject=F,z._setScheduler=o,z._setAsap=a,z._asap=W,z.prototype={constructor:z,then:l,catch:function(e){return this.then(null,e)}},z.polyfill=D,z.Promise=z,z}()}()}).call(t,n(78),n(52))},function(e,t,n){var r=n(140)("wks"),i=n(141),o=n(13).Symbol,a="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=r},function(e,t,n){var r=n(10),i=n(92),o=n(63),a=Object.defineProperty;t.f=n(12)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(11);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){e.exports=!n(18)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var r=n(29);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var r=n(9),i=n(43);e.exports=n(12)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){e.exports={default:n(156),__esModule:!0}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(93),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,i.default)(t))&&"function"!=typeof t?e:t}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(178),o=r(i),a=n(182),s=r(a),u=n(93),c=r(u);t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,c.default)(t)));e.prototype=(0,s.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(o.default?(0,o.default)(e,t):e.__proto__=t)}},function(e,t,n){e.exports={default:n(187),__esModule:!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(110),i=n(25);t.handleError=function(e,t){var n=Error().stack||"",o=t||"",a=e+": "+o+" \n "+n;(new r.UserTracker).track()(new i.ErrorException(e,n,t)),console.error(a)}},function(e,t){e.exports={}},function(e,t,n){var r=n(66),i=n(59);e.exports=function(e){return r(i(e))}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(16),o=r(i),a=n(19),s=r(a),u=n(20),c=r(u),l=n(0),f=r(l),d=n(1),h=r(d);Object.defineProperty(t,"__esModule",{value:!0});var p=function(){function e(t,n){(0,f.default)(this,e),this.prefix="files.mediapicker-web.",this.name=this.prefix+t,this.properties=n}return(0,h.default)(e,[{key:"toJSON",value:function(){return{name:this.name,properties:this.properties}}}]),e}();t.UserEvent=p;var v=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"library.loaded",{}))}return(0,c.default)(t,e),t}(p);t.MediaPickerLoaded=v;var m=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"browser.loaded",{}))}return(0,c.default)(t,e),t}(p);t.MPBrowserLoaded=m;var y=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"dropzone.loaded",{}))}return(0,c.default)(t,e),t}(p);t.MPDropzoneLoaded=y;var b=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"cliboard.loaded",{}))}return(0,c.default)(t,e),t}(p);t.MPClipboardLoaded=b;var g=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"popup.loaded",{}))}return(0,c.default)(t,e),t}(p);t.MPPopupLoaded=g;var _=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"popup.shown",{}))}return(0,c.default)(t,e),t}(p);t.MPPopupShown=_;var w=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"popup.hidden",{}))}return(0,c.default)(t,e),t}(p);t.MPPopupHidden=w;var x=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"file.upload.ended",{}))}return(0,c.default)(t,e),t}(p);t.MPFileUploadEnded=x;var k=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"file.upload.started",{}))}return(0,c.default)(t,e),t}(p);t.MPFileUploadStarted=k;var A=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"file.processing.started",{}))}return(0,c.default)(t,e),t}(p);t.MPFileProcessingStarted=A;var S=function(e){function t(e,n,r){(0,f.default)(this,t);var i={alias:e,description:r,stacktrace:n};return(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"files.mediapicker-web.library.exception.fired",i))}return(0,c.default)(t,e),t}(p);t.ErrorException=S},function(e,t){e.exports=n(25)},function(e,t,n){var r=n(55),i=n(138);e.exports=n(37)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(56);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){"use strict";var r=n(164)(!0);n(65)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(9).f,i=n(17),o=n(3)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){n(169);for(var r=n(4),i=n(15),o=n(23),a=n(3)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<s.length;u++){var c=s[u],l=r[c],f=l&&l.prototype;f&&!f[a]&&i(f,a,c),o[c]=o.Array}},function(e,t,n){var r=n(14),i=n(189),o=n(190),a=n(10),s=n(67),u=n(102),c={},l={},t=e.exports=function(e,t,n,f,d){var h,p,v,m,y=d?function(){return e}:u(e),b=r(n,f,t?2:1),g=0;if("function"!=typeof y)throw TypeError(e+" is not iterable!");if(o(y)){for(h=s(e.length);h>g;g++)if((m=t?b(a(p=e[g])[0],p[1]):b(e[g]))===c||m===l)return m}else for(v=y.call(e);!(p=v.next()).done;)if((m=i(v,b,p.value,t))===c||m===l)return m};t.BREAK=c,t.RETURN=l},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(53),i=n(80),o=n(122),a=n(112),s=function(e,t){return o.checkWebpSupport().then(function(t){return e.accept=t?"image/webp,image/*,*/*;q=0.8":"image/*,*/*;q=0.8",e})},u=function(t,n,i,o){var u=r.__assign({},n,{"Content-Type":"application/json"});return i||(a.isAsapBasedAuth(t)?u["X-Issuer"]=t.asapIssuer:a.isClientBasedAuth(t)&&(u["X-Client-Id"]=t.clientId),u.Authorization="Bearer "+t.token),"image"===o?s(u):e.resolve(u)},c=function(t,n,i,o){var s={};return i&&(s.token=t.token,a.isClientBasedAuth(t)?s.client=t.clientId:a.isAsapBasedAuth(t)&&(s.issuer=t.asapIssuer)),e.resolve(r.__assign({collection:o},n,s))},l=function(e){return e=e||"json",{image:"blob",json:"json"}[e]};t.default=function(t){var n=t.preventPreflight,r=t.collectionName,o=t.config,a=o.authProvider,s=o.serviceHost;return function(t){var o=t.url,f=t.headers,d=t.params,h=t.responseType,p=t.method,v=t.data,m=a({collectionName:r}),y=function(t){return e.all([u(t,f,n,h),c(t,d,n,r)])},b=function(e){var t=e[0],n=e[1];return i.default({method:p||"get",url:o,baseURL:s,headers:t,params:n,data:v,responseType:l(h)})};return m.then(y).then(b).then(function(e){return e.data})}}}).call(t,n(7))},function(e,t){var n=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(e,t,n){e.exports=!n(137)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports={}},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<t.length;i++){var a=t[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(e,t){function n(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=d[r.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](r.parts[o]);for(;o<r.parts.length;o++)i.parts.push(u(r.parts[o],t))}else{for(var a=[],o=0;o<r.parts.length;o++)a.push(u(r.parts[o],t));d[r.id]={id:r.id,refs:1,parts:a}}}}function r(e){for(var t=[],n={},r=0;r<e.length;r++){var i=e[r],o=i[0],a=i[1],s=i[2],u=i[3],c={css:a,media:s,sourceMap:u};n[o]?n[o].parts.push(c):t.push(n[o]={id:o,parts:[c]})}return t}function i(e,t){var n=v(),r=b[b.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),b.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function o(e){e.parentNode.removeChild(e);var t=b.indexOf(e);t>=0&&b.splice(t,1)}function a(e){var t=document.createElement("style");return t.type="text/css",i(e,t),t}function s(e){var t=document.createElement("link");return t.rel="stylesheet",i(e,t),t}function u(e,t){var n,r,i;if(t.singleton){var u=y++;n=m||(m=a(t)),r=c.bind(null,n,u,!1),i=c.bind(null,n,u,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=s(t),r=f.bind(null,n),i=function(){o(n),n.href&&URL.revokeObjectURL(n.href)}):(n=a(t),r=l.bind(null,n),i=function(){o(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}function c(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=g(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function l(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function f(e,t){var n=t.css,r=t.sourceMap;r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var i=new Blob([n],{type:"text/css"}),o=e.href;e.href=URL.createObjectURL(i),o&&URL.revokeObjectURL(o)}var d={},h=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}},p=h(function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())}),v=h(function(){return document.head||document.getElementsByTagName("head")[0]}),m=null,y=0,b=[];e.exports=function(e,t){t=t||{},void 0===t.singleton&&(t.singleton=p()),void 0===t.insertAt&&(t.insertAt="bottom");var i=r(e);return n(i,t),function(e){for(var o=[],a=0;a<i.length;a++){var s=i[a],u=d[s.id];u.refs--,o.push(u)}e&&n(r(e),t);for(var a=0;a<o.length;a++){var u=o[a];if(0===u.refs){for(var c=0;c<u.parts.length;c++)u.parts[c]();delete d[u.id]}}}};var g=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t,n){var r=n(59);e.exports=function(e){return Object(r(e))}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){e.exports=!0},function(e,t,n){var r=n(10),i=n(166),o=n(68),a=n(60)("IE_PROTO"),s=function(){},u=function(){var e,t=n(62)("iframe"),r=o.length;for(t.style.display="none",n(96).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object</script>"),e.close(),u=e.F;r--;)delete u.prototype[o[r]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[a]=e):n=u(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(95),i=n(68);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(16),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u),l=n(19),f=r(l),d=n(20),h=r(d);Object.defineProperty(t,"__esModule",{value:!0});var p=n(185),v=n(132),m=n(271),y=function(e){function t(e,n){var r=n.apiUrl,i=n.authProvider,a=n.uploadParams;(0,s.default)(this,t);var u=(0,f.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return u.onFilesAdded=function(e){var t=e.files;u.emitUploadsStart(t)},u.onFileAdded=function(e){var t=e.file;u.emitUploadStart(t),t.raw&&t.type.match(/^image\//)&&m.default(t.raw).then(function(e){u.emitUploadPreviewUpdate(t,e)})},u.onFileUploading=function(e){var t=e.file,n=e.progress;u.emitUploadProgress(t,n)},u.onFileFinalizeReady=function(e){var t=e.file,n=e.finalize;u.emitUploadFinalizeReady(t,n)},u.onFileConverting=function(e){var t=e.file;u.emitUploadProcessing(t)},u.onFileConverted=function(e){var t=e.file,n=e.progress,r=e.metadata;u.emitUploadProgress(t,n),u.emitUploadEnd(t,r)},u.onUploadError=function(e){var t=e.file,n=e.error;u.emitUploadError(t,n)},u.uploadService=new p.UploadService(r,i,a||{}),u.uploadService.on("files-added",u.onFilesAdded),u.uploadService.on("file-added",u.onFileAdded),u.uploadService.on("file-uploading",u.onFileUploading),u.uploadService.on("file-finalize-ready",u.onFileFinalizeReady),u.uploadService.on("file-converting",u.onFileConverting),u.uploadService.on("file-converted",u.onFileConverted),u.uploadService.on("file-upload-error",u.onUploadError),u}return(0,h.default)(t,e),(0,c.default)(t,[{key:"cancel",value:function(e){this.uploadService.cancel(e)}},{key:"setUploadParams",value:function(e){this.uploadService.setUploadParams(e)}}]),t}(v.MPComponent);t.MediaLocalUpload=y},function(e,t,n){var r=n(31),i=n(3)("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),i))?n:o?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,n){e.exports={default:n(203),__esModule:!0}},function(e,t,n){var r=n(207),i=n(208),o=i;o.v1=r,o.v4=i,e.exports=o},function(e,t,n){"use strict";(function(t){e.exports="object"==typeof self&&self.self===self&&self||"object"==typeof t&&t.global===t&&t||this}).call(t,n(52))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){function r(e,t){function n(){this.constructor=e}b(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function i(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]]);return n}function o(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function a(e,t){return function(n,r){t(n,r,e)}}function s(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(t,n,r,i){return new(r||(r=e))(function(e,o){function a(e){try{u(i.next(e))}catch(e){o(e)}}function s(e){try{u(i.throw(e))}catch(e){o(e)}}function u(t){t.done?e(t.value):new r(function(e){e(t.value)}).then(a,s)}u((i=i.apply(t,n||[])).next())})}function c(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(a=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){u.label=n[1];break}if(6===n[0]&&u.label<a[1]){u.label=a[1],a=n;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(n);break}a[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],o=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,a,s,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s}function l(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function f(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function d(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function h(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(d(arguments[t]));return e}function p(e){return this instanceof p?(this.v=e,this):new p(e)}function v(t,n,r){function i(t){f[t]&&(l[t]=function(n){return new e(function(e,r){d.push([t,n,e,r])>1||o(t,n)})})}function o(e,t){try{a(f[e](t))}catch(e){c(d[0][3],e)}}function a(t){t.value instanceof p?e.resolve(t.value.v).then(s,u):c(d[0][2],t)}function s(e){o("next",e)}function u(e){o("throw",e)}function c(e,t){e(t),d.shift(),d.length&&o(d[0][0],d[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l,f=r.apply(t,n||[]),d=[];return l={},i("next"),i("throw"),i("return"),l[Symbol.asyncIterator]=function(){return this},l}function m(e){function t(t,i){e[t]&&(n[t]=function(n){return(r=!r)?{value:p(e[t](n)),done:"return"===t}:i?i(n):n})}var n,r;return n={},t("next"),t("throw",function(e){throw e}),t("return"),n[Symbol.iterator]=function(){return this},n}function y(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator];return t?t.call(e):"function"==typeof f?f(e):e[Symbol.iterator]()}t.__extends=r,n.d(t,"__assign",function(){return g}),t.__rest=i,t.__decorate=o,t.__param=a,t.__metadata=s,t.__awaiter=u,t.__generator=c,t.__exportStar=l,t.__values=f,t.__read=d,t.__spread=h,t.__await=p,t.__asyncGenerator=v,t.__asyncDelegator=m,t.__asyncValues=y;/*! *****************************************************************************
	Copyright (c) Microsoft Corporation. All rights reserved.
	Licensed under the Apache License, Version 2.0 (the "License"); you may not use
	this file except in compliance with the License. You may obtain a copy of the
	License at http://www.apache.org/licenses/LICENSE-2.0

	THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
	KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
	WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
	MERCHANTABLITY OR NON-INFRINGEMENT.

	See the Apache Version 2.0 License for specific language governing permissions
	and limitations under the License.
	***************************************************************************** */
var b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},g=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}}.call(t,n(7))},function(e,t,n){var r=n(86);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var r=n(28),i=n(276),o=n(277),a=Object.defineProperty;t.f=n(37)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(61)("keys"),i=n(42);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t,n){var r=n(4),i=r["__core-js_shared__"]||(r["__core-js_shared__"]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t,n){var r=n(11),i=n(4).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){var r=n(11);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){"use strict";var r=n(44),i=n(5),o=n(94),a=n(15),s=n(17),u=n(23),c=n(165),l=n(32),f=n(91),d=n(3)("iterator"),h=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,n,v,m,y,b){c(n,t,v);var g,_,w,x=function(e){if(!h&&e in P)return P[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},k=t+" Iterator",A="values"==m,S=!1,P=e.prototype,O=P[d]||P["@@iterator"]||m&&P[m],I=O||x(m),E=m?A?x("entries"):I:void 0,j="Array"==t?P.entries||O:O;if(j&&(w=f(j.call(new e)))!==Object.prototype&&w.next&&(l(w,k,!0),r||s(w,d)||a(w,d,p)),A&&O&&"values"!==O.name&&(S=!0,I=function(){return O.call(this)}),r&&!b||!h&&!S&&P[d]||a(P,d,I),u[t]=I,u[k]=p,m)if(g={values:A?I:x("values"),keys:y?I:x("keys"),entries:E},b)for(_ in g)_ in P||o(P,_,g[_]);else i(i.P+i.F*(h||S),t,g);return g}},function(e,t,n){var r=n(31);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(64),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){t.f=n(3)},function(e,t,n){var r=n(42)("meta"),i=n(11),o=n(17),a=n(9).f,s=0,u=Object.isExtensible||function(){return!0},c=!n(18)(function(){return u(Object.preventExtensions({}))}),l=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},f=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!u(e))return"F";if(!t)return"E";l(e)}return e[r].i},d=function(e,t){if(!o(e,r)){if(!u(e))return!0;if(!t)return!1;l(e)}return e[r].w},h=function(e){return c&&p.NEED&&u(e)&&!o(e,r)&&l(e),e},p=e.exports={KEY:r,NEED:!1,fastKey:f,getWeak:d,onFreeze:h}},function(e,t,n){var r=n(4),i=n(2),o=n(44),a=n(69),s=n(9).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){"use strict";function r(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=i(t),this.reject=i(n)}var i=n(29);e.exports.f=function(e){return new r(e)}},function(e,t,n){var r=n(15);e.exports=function(e,t,n){for(var i in t)n&&e[i]?e[i]=t[i]:r(e,i,t[i]);return e}},function(e,t,n){(function(r,i){var o;!function(a){function s(){this._events={},this._conf&&u.call(this,this._conf)}function u(e){e?(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),this._maxListeners=e.maxListeners!==a?e.maxListeners:p,e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this.newListener=e.newListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),this.wildcard&&(this.listenerTree={})):this._maxListeners=p}function c(e,t){var n="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(n+=" Event name: "+t+"."),void 0!==r&&r.emitWarning){var i=new Error(n);i.name="MaxListenersExceededWarning",i.emitter=this,i.count=e,r.emitWarning(i)}else console.error(n),console.trace&&console.trace()}function l(e){this._events={},this.newListener=!1,this.verboseMemoryLeak=!1,u.call(this,e)}function f(e,t,n,r){if(!n)return[];var i,o,a,s,u,c,l,d=[],h=t.length,p=t[r],v=t[r+1];if(r===h&&n._listeners){if("function"==typeof n._listeners)return e&&e.push(n._listeners),[n];for(i=0,o=n._listeners.length;i<o;i++)e&&e.push(n._listeners[i]);return[n]}if("*"===p||"**"===p||n[p]){if("*"===p){for(a in n)"_listeners"!==a&&n.hasOwnProperty(a)&&(d=d.concat(f(e,t,n[a],r+1)));return d}if("**"===p){(l=r+1===h||r+2===h&&"*"===v)&&n._listeners&&(d=d.concat(f(e,t,n,h)));for(a in n)"_listeners"!==a&&n.hasOwnProperty(a)&&("*"===a||"**"===a?(n[a]._listeners&&!l&&(d=d.concat(f(e,t,n[a],h))),d=d.concat(f(e,t,n[a],r))):d=a===v?d.concat(f(e,t,n[a],r+2)):d.concat(f(e,t,n[a],r)));return d}d=d.concat(f(e,t,n[p],r+1))}if(s=n["*"],s&&f(e,t,s,r+1),u=n["**"])if(r<h){u._listeners&&f(e,t,u,h);for(a in u)"_listeners"!==a&&u.hasOwnProperty(a)&&(a===v?f(e,t,u[a],r+2):a===p?f(e,t,u[a],r+1):(c={},c[a]=u[a],f(e,t,{"**":c},r+1)))}else u._listeners?f(e,t,u,h):u["*"]&&u["*"]._listeners&&f(e,t,u["*"],h);return d}function d(e,t){e="string"==typeof e?e.split(this.delimiter):e.slice();for(var n=0,r=e.length;n+1<r;n++)if("**"===e[n]&&"**"===e[n+1])return;for(var i=this.listenerTree,o=e.shift();o!==a;){if(i[o]||(i[o]={}),i=i[o],0===e.length)return i._listeners?("function"==typeof i._listeners&&(i._listeners=[i._listeners]),i._listeners.push(t),!i._listeners.warned&&this._maxListeners>0&&i._listeners.length>this._maxListeners&&(i._listeners.warned=!0,c.call(this,i._listeners.length,o))):i._listeners=t,!0;o=e.shift()}return!0}var h=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},p=10;l.EventEmitter2=l,l.prototype.delimiter=".",l.prototype.setMaxListeners=function(e){e!==a&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},l.prototype.event="",l.prototype.once=function(e,t){return this._once(e,t,!1)},l.prototype.prependOnceListener=function(e,t){return this._once(e,t,!0)},l.prototype._once=function(e,t,n){return this._many(e,1,t,n),this},l.prototype.many=function(e,t,n){return this._many(e,t,n,!1)},l.prototype.prependMany=function(e,t,n){return this._many(e,t,n,!0)},l.prototype._many=function(e,t,n,r){function i(){return 0==--t&&o.off(e,i),n.apply(this,arguments)}var o=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");return i._origin=n,this._on(e,i,r),o},l.prototype.emit=function(){this._events||s.call(this);var e=arguments[0];if("newListener"===e&&!this.newListener&&!this._events.newListener)return!1;var t,n,r,i,o,a=arguments.length;if(this._all&&this._all.length){if(o=this._all.slice(),a>3)for(t=new Array(a),i=0;i<a;i++)t[i]=arguments[i];for(r=0,n=o.length;r<n;r++)switch(this.event=e,a){case 1:o[r].call(this,e);break;case 2:o[r].call(this,e,arguments[1]);break;case 3:o[r].call(this,e,arguments[1],arguments[2]);break;default:o[r].apply(this,t)}}if(this.wildcard){o=[];var u="string"==typeof e?e.split(this.delimiter):e.slice();f.call(this,o,u,this.listenerTree,0)}else{if("function"==typeof(o=this._events[e])){switch(this.event=e,a){case 1:o.call(this);break;case 2:o.call(this,arguments[1]);break;case 3:o.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(a-1),i=1;i<a;i++)t[i-1]=arguments[i];o.apply(this,t)}return!0}o&&(o=o.slice())}if(o&&o.length){if(a>3)for(t=new Array(a-1),i=1;i<a;i++)t[i-1]=arguments[i];for(r=0,n=o.length;r<n;r++)switch(this.event=e,a){case 1:o[r].call(this);break;case 2:o[r].call(this,arguments[1]);break;case 3:o[r].call(this,arguments[1],arguments[2]);break;default:o[r].apply(this,t)}return!0}if(!this._all&&"error"===e)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},l.prototype.emitAsync=function(){this._events||s.call(this);var e=arguments[0];if("newListener"===e&&!this.newListener&&!this._events.newListener)return i.resolve([!1]);var t,n,r,o,a,u=[],c=arguments.length;if(this._all){if(c>3)for(t=new Array(c),o=1;o<c;o++)t[o]=arguments[o];for(r=0,n=this._all.length;r<n;r++)switch(this.event=e,c){case 1:u.push(this._all[r].call(this,e));break;case 2:u.push(this._all[r].call(this,e,arguments[1]));break;case 3:u.push(this._all[r].call(this,e,arguments[1],arguments[2]));break;default:u.push(this._all[r].apply(this,t))}}if(this.wildcard){a=[];var l="string"==typeof e?e.split(this.delimiter):e.slice();f.call(this,a,l,this.listenerTree,0)}else a=this._events[e];if("function"==typeof a)switch(this.event=e,c){case 1:u.push(a.call(this));break;case 2:u.push(a.call(this,arguments[1]));break;case 3:u.push(a.call(this,arguments[1],arguments[2]));break;default:for(t=new Array(c-1),o=1;o<c;o++)t[o-1]=arguments[o];u.push(a.apply(this,t))}else if(a&&a.length){if(a=a.slice(),c>3)for(t=new Array(c-1),o=1;o<c;o++)t[o-1]=arguments[o];for(r=0,n=a.length;r<n;r++)switch(this.event=e,c){case 1:u.push(a[r].call(this));break;case 2:u.push(a[r].call(this,arguments[1]));break;case 3:u.push(a[r].call(this,arguments[1],arguments[2]));break;default:u.push(a[r].apply(this,t))}}else if(!this._all&&"error"===e)return arguments[1]instanceof Error?i.reject(arguments[1]):i.reject("Uncaught, unspecified 'error' event.");return i.all(u)},l.prototype.on=function(e,t){return this._on(e,t,!1)},l.prototype.prependListener=function(e,t){return this._on(e,t,!0)},l.prototype.onAny=function(e){return this._onAny(e,!1)},l.prototype.prependAny=function(e){return this._onAny(e,!0)},l.prototype.addListener=l.prototype.on,l.prototype._onAny=function(e,t){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},l.prototype._on=function(e,t,n){if("function"==typeof e)return this._onAny(e,t),this;if("function"!=typeof t)throw new Error("on only accepts instances of Function");return this._events||s.call(this),this.emit("newListener",e,t),this.wildcard?(d.call(this,e,t),this):(this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),n?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,c.call(this,this._events[e].length,e))):this._events[e]=t,this)},l.prototype.off=function(e,t){function n(e){if(e!==a){var t=Object.keys(e);for(var r in t){var i=t[r],o=e[i];o instanceof Function||"object"!=typeof o||null===o||(Object.keys(o).length>0&&n(e[i]),0===Object.keys(o).length&&delete e[i])}}}if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");var r,i=[];if(this.wildcard){var o="string"==typeof e?e.split(this.delimiter):e.slice();i=f.call(this,null,o,this.listenerTree,0)}else{if(!this._events[e])return this;r=this._events[e],i.push({_listeners:r})}for(var s=0;s<i.length;s++){var u=i[s];if(r=u._listeners,h(r)){for(var c=-1,l=0,d=r.length;l<d;l++)if(r[l]===t||r[l].listener&&r[l].listener===t||r[l]._origin&&r[l]._origin===t){c=l;break}if(c<0)continue;return this.wildcard?u._listeners.splice(c,1):this._events[e].splice(c,1),0===r.length&&(this.wildcard?delete u._listeners:delete this._events[e]),this.emit("removeListener",e,t),this}(r===t||r.listener&&r.listener===t||r._origin&&r._origin===t)&&(this.wildcard?delete u._listeners:delete this._events[e],this.emit("removeListener",e,t))}return n(this.listenerTree),this},l.prototype.offAny=function(e){var t,n=0,r=0;if(e&&this._all&&this._all.length>0){for(t=this._all,n=0,r=t.length;n<r;n++)if(e===t[n])return t.splice(n,1),this.emit("removeListenerAny",e),this}else{for(t=this._all,n=0,r=t.length;n<r;n++)this.emit("removeListenerAny",t[n]);this._all=[]}return this},l.prototype.removeListener=l.prototype.off,l.prototype.removeAllListeners=function(e){if(0===arguments.length)return!this._events||s.call(this),this;if(this.wildcard)for(var t="string"==typeof e?e.split(this.delimiter):e.slice(),n=f.call(this,null,t,this.listenerTree,0),r=0;r<n.length;r++){var i=n[r];i._listeners=null}else this._events&&(this._events[e]=null);return this},l.prototype.listeners=function(e){if(this.wildcard){var t=[],n="string"==typeof e?e.split(this.delimiter):e.slice();return f.call(this,t,n,this.listenerTree,0),t}return this._events||s.call(this),this._events[e]||(this._events[e]=[]),h(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},l.prototype.eventNames=function(){return Object.keys(this._events)},l.prototype.listenerCount=function(e){return this.listeners(e).length},l.prototype.listenersAny=function(){return this._all?this._all:[]},(o=function(){return l}.call(t,n,t,e))!==a&&(e.exports=o)}()}).call(t,n(78),n(7))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function o(e){if(f===clearTimeout)return clearTimeout(e);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function a(){v&&h&&(v=!1,h.length?p=h.concat(p):m=-1,p.length&&s())}function s(){if(!v){var e=i(a);v=!0;for(var t=p.length;t;){for(h=p,p=[];++m<t;)h&&h[m].run();m=-1,t=p.length}h=null,v=!1,o(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var l,f,d=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(e){f=r}}();var h,p=[],v=!1,m=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new u(e,t)),1!==p.length||v||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.prependListener=c,d.prependOnceListener=c,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t){e.exports=n(39)},function(e,t,n){e.exports=n(220)},function(e,t,n){"use strict";(function(t){function r(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var i=n(6),o=n(222),a=/^\)\]\}',?\n/,s={"Content-Type":"application/x-www-form-urlencoded"},u={adapter:function(){var e;return"undefined"!=typeof XMLHttpRequest?e=n(118):void 0!==t&&(e=n(118)),e}(),transformRequest:[function(e,t){return o(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e)?e:i.isArrayBufferView(e)?e.buffer:i.isURLSearchParams(e)?(r(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):i.isObject(e)?(r(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e){e=e.replace(a,"");try{e=JSON.parse(e)}catch(e){}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};u.headers={common:{Accept:"application/json, text/plain, */*"}},i.forEach(["delete","get","head"],function(e){u.headers[e]={}}),i.forEach(["post","put","patch"],function(e){u.headers[e]=i.merge(s)}),e.exports=u}).call(t,n(78))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.referenceCountById={},this.referencesById={}}return e.prototype.acquire=function(e,t){return this.referenceCountById[e]||(this.referencesById[e]=t(),this.referenceCountById[e]=0),this.referenceCountById[e]=this.referenceCountById[e]+1,this.referencesById[e]},e.prototype.release=function(e){this.referenceCountById[e]>0&&(this.referenceCountById[e]=this.referenceCountById[e]-1),this.referenceCountById[e]||delete this.referencesById[e]},e}();t.Pool=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(21),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u),l=n(50),f=r(l);Object.defineProperty(t,"__esModule",{value:!0});var d=n(80),h=n(111);t.isTokenError=function(e){if(e&&e.error){var t=e.error.code;return"JwtAuthoriser:TokenExpiredError"===t||"JwtAuthoriser:AuthenticationError"===t}return!1},t.addAuthToHeaders=function(e,t){var n=e.headers||{};return(0,f.default)({},e,{headers:(0,f.default)({},n,h.mapAuthToAuthHeaders(t))})},t.addAuthToQueryParameters=function(e,t){return(0,f.default)({},e,{parameters:(0,f.default)({},e.parameters,h.mapAuthToQueryParameters(t))})};var p=function(){function e(t,n,r){(0,s.default)(this,e),this.apiUrl=t,this.authProvider=n,this.collection=r}return(0,c.default)(e,[{key:"refreshAuth",value:function(){var e=this;return this.authProvider({collectionName:this.collection}).then(function(t){return e.auth=t,t})}},{key:"call",value:function(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.addAuthToHeaders;return this.makeCall(e,r).catch(function(i){if(!(i&&i.response&&t.isTokenError(i.response.data)))throw i;return n.makeCall(e,r,!0)})}},{key:"makeCall",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.getAuth(r).then(function(r){return n.makeCallWithToken(e,t,r)})}},{key:"getAuth",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.auth&&!e?o.default.resolve(this.auth):this.refreshAuth()}},{key:"makeCallWithToken",value:function(e,t,n){var r=t(e,n),i=this.getAxiosRequestConfig(r);return d.default.request(i).then(function(e){return e.data})}},{key:"getAxiosRequestConfig",value:function(e){var t=e.httpMethod,n=e.mediaApiMethod,r=e.parameters,i=e.headers,o=e.data;return{url:this.apiUrl+"/"+n,method:t,headers:(0,f.default)({},i,o?{"Content-Type":"application/json; charset=utf-8"}:{}),params:r,data:o}}},{key:"storedAuth",get:function(){return this.auth}}]),e}();t.MediaClient=p},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(56),i=n(13).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){var r=n(284),i=n(85);e.exports=function(e){return r(i(e))}},function(e,t,n){var r=n(140)("keys"),i=n(141);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t,n){var r=n(55).f,i=n(57),o=n(8)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){var r=n(17),i=n(41),o=n(60)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){e.exports=!n(12)&&!n(18)(function(){return 7!=Object.defineProperty(n(62)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(162),o=r(i),a=n(171),s=r(a),u="function"==typeof s.default&&"symbol"==typeof o.default?function(e){return typeof e}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":typeof e};t.default="function"==typeof s.default&&"symbol"===u(o.default)?function(e){return void 0===e?"undefined":u(e)}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":void 0===e?"undefined":u(e)}},function(e,t,n){e.exports=n(15)},function(e,t,n){var r=n(17),i=n(24),o=n(167)(!1),a=n(60)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),u=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;t.length>u;)r(s,n=t[u++])&&(~o(c,n)||c.push(n));return c}},function(e,t,n){var r=n(4).document;e.exports=r&&r.documentElement},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){var r=n(31);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(95),i=n(68).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){var r=n(47),i=n(43),o=n(24),a=n(63),s=n(17),u=n(92),c=Object.getOwnPropertyDescriptor;t.f=n(12)?c:function(e,t){if(e=o(e),t=a(t,!0),u)try{return c(e,t)}catch(e){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t,n){e.exports={default:n(186),__esModule:!0}},function(e,t,n){var r=n(49),i=n(3)("iterator"),o=n(23);e.exports=n(2).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){var r=n(10),i=n(29),o=n(3)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||void 0==(n=r(a)[o])?t:i(n)}},function(e,t,n){var r,i,o,a=n(14),s=n(191),u=n(96),c=n(62),l=n(4),f=l.process,d=l.setImmediate,h=l.clearImmediate,p=l.MessageChannel,v=l.Dispatch,m=0,y={},b=function(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},g=function(e){b.call(e.data)};d&&h||(d=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return y[++m]=function(){s("function"==typeof e?e:Function(e),t)},r(m),m},h=function(e){delete y[e]},"process"==n(31)(f)?r=function(e){f.nextTick(a(b,e,1))}:v&&v.now?r=function(e){v.now(a(b,e,1))}:p?(i=new p,o=i.port2,i.port1.onmessage=g,r=a(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(e){l.postMessage(e+"","*")},l.addEventListener("message",g,!1)):r="onreadystatechange"in c("script")?function(e){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),b.call(e)}}:function(e){setTimeout(a(b,e,1),0)}),e.exports={set:d,clear:h}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){var r=n(10),i=n(11),o=n(75);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){"use strict";var r=n(4),i=n(2),o=n(9),a=n(12),s=n(3)("species");e.exports=function(e){var t="function"==typeof i[e]?i[e]:r[e];a&&t&&!t[s]&&o.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){(function(t){var n,r=t.crypto||t.msCrypto;if(r&&r.getRandomValues){var i=new Uint8Array(16);n=function(){return r.getRandomValues(i),i}}if(!n){var o=new Array(16);n=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}e.exports=n}).call(t,n(52))},function(e,t){function n(e,t){var n=t||0,i=r;return i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]}for(var r=[],i=0;i<256;++i)r[i]=(i+256).toString(16).substr(1);e.exports=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(50),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u);Object.defineProperty(t,"__esModule",{value:!0});var l=n(210),f=function(){function e(){(0,s.default)(this,e),this.defaults={storage_key:"media-picker.herment.storage",product:"media-picker",subproduct:"library",version:"1.0"},this.queue=[],this.queueProcessor=l.default((0,o.default)({},this.defaults,{queue:this.queue})),this.queueProcessor&&this.queueProcessor.start(),this.defaultProperties={}}return(0,c.default)(e,[{key:"track",value:function(){var e=this;return function(t){var n=t.toJSON();n.properties=(0,o.default)({},e.defaultProperties,n.properties),e.queue.push(n)}}}]),e}();t.UserTracker=f},function(e,t,n){"use strict";function r(e){return o.isClientBasedAuth(e)?{"X-Client-Id":e.clientId,Authorization:"Bearer "+e.token}:{"X-Issuer":e.asapIssuer,Authorization:"Bearer "+e.token}}function i(e){return o.isClientBasedAuth(e)?{client:e.clientId,token:e.token}:{issuer:e.asapIssuer,token:e.token}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(212);t.mapAuthToAuthHeaders=r,t.mapAuthToQueryParameters=i},function(e,t,n){"use strict";function r(e){return!!e.clientId}function i(e){return!!e.asapIssuer}Object.defineProperty(t,"__esModule",{value:!0}),t.isClientBasedAuth=r,t.isAsapBasedAuth=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(114);t.RemoteMediaCollectionProvider=r.RemoteMediaCollectionProvider;var i=n(116);t.FileProvider=i.FileProvider;var o=n(123);t.LinkProvider=o.LinkProvider;var a=n(239);t.MediaItemProvider=a.MediaItemProvider;var s=n(240);t.MediaUrlPreviewProvider=s.MediaUrlPreviewProvider;var u=n(126);t.UrlPreviewProvider=u.UrlPreviewProvider},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(115);n(79);var i=function(){function e(e,t,n,i){this.collectionService=e,this.collectionName=t,this.pageSize=n,this.sortDirection=i,this.subject=new r.Subject,this.connectableObservable=this.subject.publishReplay(1),this.items=[],this.nextInclusiveStartKey=void 0,this.isLoading=!1,this.connectableObservable.connect(),this.loadNextPage()}return e.prototype.observable=function(){return this.connectableObservable},e.prototype.loadNextPageUntil=function(e){var t=this;if(!this.items.some(e))var n=this.connectableObservable.subscribe({next:function(r){!t.nextInclusiveStartKey||r.items.some(e)?n.unsubscribe():t.loadNextPage()},complete:function(){return n.unsubscribe()},error:function(e){return n.unsubscribe()}})},e.prototype.loadNextPage=function(){var e=this;this.isLoading||(this.isLoading=!0,this.collectionService.getCollectionItems(this.collectionName,this.pageSize,this.nextInclusiveStartKey,this.sortDirection,"full").then(function(t){e.isLoading=!1,(r=e.items).push.apply(r,t.items);var n={id:e.collectionName,items:e.items};e.nextInclusiveStartKey=t.nextInclusiveStartKey,e.subject.next(n);var r},function(t){e.isLoading=!1,e.subject.error(t)}))},e.prototype.refresh=function(){var e=this;if(!this.isLoading){this.isLoading=!0;var t,n=this.items[0]&&this.items[0].details,r=n&&n.id,i=n&&n.occurrenceKey,o=[],a=function(){e.collectionService.getCollectionItems(e.collectionName,e.pageSize,t,e.sortDirection,"full").then(function(n){for(var s=!1,u=0,c=n.items;u<c.length;u++){var l=c[u],f=l.details,d=f.id,h=f.occurrenceKey;if(d===r&&h===i){s=!0;break}o.push(l)}s?(e.isLoading=!1,e.items=o.concat(e.items),e.subject.next({id:e.collectionName,items:e.items})):n.nextInclusiveStartKey&&(t=n.nextInclusiveStartKey,a())},function(t){e.isLoading=!1,e.subject.error(t)})};a()}},e}();t.RemoteMediaCollectionProvider=i},function(e,t){e.exports=n(42)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(219),i=n(26);n(79),t.FILE_PROVIDER_RETRY_INTERVAL=2e3;var o=function(){function e(){}return e.fromMediaApi=function(t,n,i,o,a){return e.fromFileService(new r.MediaFileService(t,n),i,o,a)},e.fromFileService=function(e,t,n,r){return{observable:function(){var o=new i.Observable(function(i){var o,a=r||1e3,s=function(){e.getFileItem(t,n).then(function(e){"pending"!==e.details.processingStatus?(i.next(e),i.complete()):(i.next(e),o=setTimeout(function(){return s()},a))},function(e){i.error(e)})};return s(),function(){null!==o&&clearTimeout(o)}}).publishReplay(1);return o.connect(),o}}},e}();t.FileProvider=o},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";(function(t){var r=n(6),i=n(223),o=n(225),a=n(226),s=n(227),u=n(119),c="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||n(228);e.exports=function(e){return new t(function(t,l){var f=e.data,d=e.headers;r.isFormData(f)&&delete d["Content-Type"];var h=new XMLHttpRequest,p="onreadystatechange",v=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in h||s(e.url)||(h=new window.XDomainRequest,p="onload",v=!0,h.onprogress=function(){},h.ontimeout=function(){}),e.auth){var m=e.auth.username||"",y=e.auth.password||"";d.Authorization="Basic "+c(m+":"+y)}if(h.open(e.method.toUpperCase(),o(e.url,e.params,e.paramsSerializer),!0),h.timeout=e.timeout,h[p]=function(){if(h&&(4===h.readyState||v)&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in h?a(h.getAllResponseHeaders()):null,r=e.responseType&&"text"!==e.responseType?h.response:h.responseText,o={data:r,status:1223===h.status?204:h.status,statusText:1223===h.status?"No Content":h.statusText,headers:n,config:e,request:h};i(t,l,o),h=null}},h.onerror=function(){l(u("Network Error",e)),h=null},h.ontimeout=function(){l(u("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED")),h=null},r.isStandardBrowserEnv()){var b=n(229),g=(e.withCredentials||s(e.url))&&e.xsrfCookieName?b.read(e.xsrfCookieName):void 0;g&&(d[e.xsrfHeaderName]=g)}if("setRequestHeader"in h&&r.forEach(d,function(e,t){void 0===f&&"content-type"===t.toLowerCase()?delete d[t]:h.setRequestHeader(t,e)}),e.withCredentials&&(h.withCredentials=!0),e.responseType)try{h.responseType=e.responseType}catch(e){if("json"!==h.responseType)throw e}"function"==typeof e.onDownloadProgress&&h.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){h&&(h.abort(),l(e),h=null)}),void 0===f&&(f=null),h.send(f)})}}).call(t,n(7))},function(e,t,n){"use strict";var r=n(224);e.exports=function(e,t,n,i){var o=new Error(e);return r(o,t,n,i)}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(237)),r(n(238))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(124),i=n(26);n(79);var o=function(){function e(){}return e.fromMediaApi=function(t,n,i){return e.fromLinkService(new r.MediaLinkService(t),n,i)},e.fromLinkService=function(e,t,n){return{observable:function(){
var r=new i.Observable(function(r){return e.getLinkItem(t,n).then(function(e){r.next(e),r.complete()},function(e){r.error(e)}),function(){}}).publishReplay(1);return r.connect(),r}}},e}();t.LinkProvider=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(35),i=function(){function e(e){this.config=e}return e.prototype.getLinkItem=function(e,t){return r.default({config:this.config,collectionName:t,preventPreflight:!0})({url:"/link/"+e}).then(function(e){return e.data}).then(function(e){return{type:"link",details:{id:e.id,url:e.url,type:e.metadata.type,title:e.metadata.title,description:e.metadata.description,site:e.metadata.site,author:e.metadata.author,date:e.metadata.date,resources:e.metadata.resources}}})},e.prototype.addLinkItem=function(e,t,n){return r.default({config:this.config,collectionName:t})({method:"post",url:"/link",data:{url:e,metadata:n}}).then(function(e){return e.data.id})},e}();t.MediaLinkService=i},function(e,t,n){"use strict";function r(e,t,n){return new i.Observable(function(r){var i=e.acquire(t,n),o=i.subscribe(r);return function(){o.unsubscribe(),e.release(t)}})}Object.defineProperty(t,"__esModule",{value:!0});var i=n(26);t.observableFromObservablePool=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(241),i=n(26),o=function(){function e(){}return e.fromMediaApi=function(t,n){return e.fromUrlPreviewService(new r.MediaUrlPreviewService(t),n)},e.fromUrlPreviewService=function(e,t){return{observable:function(){return new i.Observable(function(n){return e.getUrlPreview(t).then(function(e){n.next(e),n.complete()},function(e){n.error(e)}),function(){}})}}},e}();t.UrlPreviewProvider=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(53),i=n(35);t.DEFAULT_COLLECTION_PAGE_SIZE=10;var o=function(){function e(e){this.config=e}return e.prototype.mapToMediaCollectionItem=function(e){var t=e.id,n=e.type,i=e.occurrenceKey,o=e.details;if("file"===n){var a=o;return{type:"file",details:r.__assign({id:t,occurrenceKey:i},a)}}var s=o;return{type:"link",details:r.__assign({id:t,type:"link",occurrenceKey:i,title:s.title||""},s)}},e.prototype.getCollectionItems=function(e,n,r,o,a){var s=this;return void 0===n&&(n=t.DEFAULT_COLLECTION_PAGE_SIZE),i.default({config:this.config,preventPreflight:!0,collectionName:e})({url:"/collection/"+e+"/items",params:{limit:n,inclusiveStartKey:r,sortDirection:o,details:a}}).then(function(e){return{items:e.data.contents.map(s.mapToMediaCollectionItem),nextInclusiveStartKey:e.data.nextInclusiveStartKey}})},e}();t.MediaCollectionService=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(0),o=r(i),a=n(1),s=r(a);Object.defineProperty(t,"__esModule",{value:!0}),t.ERROR_NAMES={OBJ_CREATE_FAIL:"object_create_fail",METADATA_FETCH_FAIL:"metadata_fetch_fail",TOKEN_FETCH_FAIL:"token_fetch_fail",TOKEN_UPDATE_FAIL:"token_update_fail",TOKEN_SOURCE_EMPTY:"token_source_empty",UPLOAD_FAIL:"upload_fail",USER_TOKEN_FETCH_FAIL:"user_token_fetch_fail"};var u=function(){function e(t,n,r){(0,o.default)(this,e),this.fileId=t,this.name=n,this.description=r}return(0,s.default)(e,[{key:"toJSON",value:function(){return{fileId:this.fileId,name:this.name,description:this.description}}}]),e}();t.MediaError=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(246),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u);Object.defineProperty(t,"__esModule",{value:!0});var l=n(22),f=function(){function e(t,n,r,i,o,a,u){(0,s.default)(this,e),e.isValidFileId(t)||l.handleError("wrong_file_id","Passed fileId is incorrect."),e.isValidName(n)||l.handleError("wrong_file_name","Passed file name is incorrect."),e.isValidSize(r)||l.handleError("wrong_file_size","Passed file size is incorrect."),e.isValidCreationDate(i)||l.handleError("wrong_file_date","Passed file creation date is incorrect."),e.isValidType(o)||l.handleError("wrong_file_type","Passed file type is incorrect."),this.id=t,this.name=n,this.size=r,this.creationDate=i,this.type=o,this.publicId=a,this.resumableFile=u}return(0,c.default)(e,[{key:"toJSON",value:function(){return{id:this.id,name:this.name,size:this.size,creationDate:this.creationDate,type:this.type,publicId:this.publicId,chunks:this.chunks,toPureJSON:this.toPureJSON.bind(this)}}},{key:"toPureJSON",value:function(){return{id:this.id,name:this.name,size:this.size,creationDate:this.creationDate,type:this.type,publicId:this.publicId}}},{key:"_isImage",value:function(){return new o.default(["image/png","image/jpeg","image/jpg","image/gif"]).has(this.type)}},{key:"chunks",get:function(){return this.resumableFile?this.resumableFile.chunks:void 0}},{key:"raw",get:function(){return this.resumableFile?this.resumableFile.file:void 0}},{key:"preview",get:function(){return this._isImage()?this.raw:void 0}}],[{key:"isValidFileId",value:function(e){return"string"==typeof e&&e.length>0}},{key:"isValidName",value:function(e){return"string"==typeof e}},{key:"isValidType",value:function(e){return"string"==typeof e}},{key:"isValidSize",value:function(e){return"number"==typeof e&&e>=0}},{key:"isValidCreationDate",value:function(e){return"number"==typeof e&&e>0}}]),e}();t.MediaFile=f},function(e,t,n){var r=n(11);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultUploadParams={collection:void 0,fetchMetadata:!0,autoFinalize:!0}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(0),o=r(i),a=n(1),s=r(a);Object.defineProperty(t,"__esModule",{value:!0});var u=n(270),c=n(77),l=n(22),f=n(25),d=function(){function e(t){(0,o.default)(this,e),this.context=t,this.emitter=new c.EventEmitter2({wildcard:!0})}return(0,s.default)(e,[{key:"once",value:function(e,t){this.emitter.once(e,t)}},{key:"on",value:function(e,t){this.emitter.on(e,t)}},{key:"onAny",value:function(e){this.emitter.onAny(e)}},{key:"addListener",value:function(e,t){this.emitter.addListener(e,t)}},{key:"off",value:function(e,t){this.emitter.off(e,t)}},{key:"removeListener",value:function(e,t){this.emitter.removeListener(e,t)}},{key:"removeAllListeners",value:function(e){this.emitter.removeAllListeners(e)}},{key:"emit",value:function(e,t){return this.emitter.emit(e,t)}},{key:"emitUploadsStart",value:function(e){this.emit("uploads-start",{files:e.map(function(e){return e.toJSON()})})}},{key:"emitUploadStart",value:function(e){this.emit("upload-start",{file:e.toJSON()}),this.context.trackEvent(new f.MPFileUploadStarted)}},{key:"emitUploadProgress",value:function(e,t){this.emit("upload-status-update",{file:e.toJSON(),progress:t})}},{key:"emitUploadFinalizeReady",value:function(e,t){this.emit("upload-finalize-ready",{file:e.toJSON(),finalize:t})}},{key:"emitUploadPreviewUpdate",value:function(e,t){this.emit("upload-preview-update",{file:e.toJSON(),preview:t})}},{key:"emitUploadProcessing",value:function(e){this.emit("upload-processing",{file:e.toJSON()}),this.context.trackEvent(new f.MPFileProcessingStarted)}},{key:"emitUploadEnd",value:function(e,t){this.emit("upload-end",{file:e.toJSON(),public:t}),this.context.trackEvent(new f.MPFileUploadEnded)}},{key:"emitUploadError",value:function(e,t){this.emit("upload-error",{file:e.toJSON(),error:t.toJSON()})}},{key:"getStaticAssetUrl",value:function(e){return void 0===u.html[e]&&l.handleError("wrong_static_asset","The passet static asset does not exist"),!0===u.usingVersions?u.baseUrl+"/"+u.version+"/"+u.html[e]:u.baseUrl+"/"+u.html[e]}}]),e}();t.MPComponent=d},function(e,t,n){e.exports={default:n(272),__esModule:!0}},function(e,t,n){"use strict";var r=n(135),i=n(136),o=n(278),a=n(27),s=n(57),u=n(38),c=n(279),l=n(90),f=n(287),d=n(8)("iterator"),h=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,n,v,m,y,b){c(n,t,v);var g,_,w,x=function(e){if(!h&&e in P)return P[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},k=t+" Iterator",A="values"==m,S=!1,P=e.prototype,O=P[d]||P["@@iterator"]||m&&P[m],I=O||x(m),E=m?A?x("entries"):I:void 0,j="Array"==t?P.entries||O:O;if(j&&(w=f(j.call(new e)))!==Object.prototype&&(l(w,k,!0),r||s(w,d)||a(w,d,p)),A&&O&&"values"!==O.name&&(S=!0,I=function(){return O.call(this)}),r&&!b||!h&&!S&&P[d]||a(P,d,I),u[t]=I,u[k]=p,m)if(g={values:A?I:x("values"),keys:y?I:x("keys"),entries:E},b)for(_ in g)_ in P||o(P,_,g[_]);else i(i.P+i.F*(h||S),t,g);return g}},function(e,t){e.exports=!0},function(e,t,n){var r=n(13),i=n(36),o=n(54),a=n(27),s=function(e,t,n){var u,c,l,f=e&s.F,d=e&s.G,h=e&s.S,p=e&s.P,v=e&s.B,m=e&s.W,y=d?i:i[t]||(i[t]={}),b=y.prototype,g=d?r:h?r[t]:(r[t]||{}).prototype;d&&(n=t);for(u in n)(c=!f&&g&&void 0!==g[u])&&u in y||(l=c?g[u]:n[u],y[u]=d&&"function"!=typeof g[u]?n[u]:v&&c?o(l,r):m&&g[u]==l?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(l):p&&"function"==typeof l?o(Function.call,l):l,p&&((y.virtual||(y.virtual={}))[u]=l,e&s.R&&b&&!b[u]&&a(b,u,l)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(84),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){var r=n(13),i=r["__core-js_shared__"]||(r["__core-js_shared__"]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){e.exports=n(13).document&&document.documentElement},function(e,t,n){var r=n(58),i=n(8)("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),i))?n:o?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,n){var r,i,o,a=n(54),s=n(300),u=n(143),c=n(87),l=n(13),f=l.process,d=l.setImmediate,h=l.clearImmediate,p=l.MessageChannel,v=0,m={},y=function(){var e=+this;if(m.hasOwnProperty(e)){var t=m[e];delete m[e],t()}},b=function(e){y.call(e.data)};d&&h||(d=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return m[++v]=function(){s("function"==typeof e?e:Function(e),t)},r(v),v},h=function(e){delete m[e]},"process"==n(58)(f)?r=function(e){f.nextTick(a(y,e,1))}:p?(i=new p,o=i.port2,i.port1.onmessage=b,r=a(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(e){l.postMessage(e+"","*")},l.addEventListener("message",b,!1)):r="onreadystatechange"in c("script")?function(e){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),y.call(e)}}:function(e){setTimeout(a(y,e,1),0)}),e.exports={set:d,clear:h}},function(e,t,n){var r=n(307);"string"==typeof r&&(r=[[e.i,r,""]]),n(40)(r,{}),r.locals&&(e.exports=r.locals)},function(e,t,n){/*!
	  * domready (c) Dustin Diaz 2014 - License MIT
	  */
!function(t,n){e.exports=function(){var e,t=[],n=document,r=n.documentElement.doScroll,i=(r?/^loaded|^c/:/^loaded|^i|^c/).test(n.readyState);return i||n.addEventListener("DOMContentLoaded",e=function(){for(n.removeEventListener("DOMContentLoaded",e),i=1;e=t.shift();)e()}),function(e){i?setTimeout(e,0):t.push(e)}}()}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseHTML=function(e){var t=document.createElement("div");return t.innerHTML=e,t.childNodes[0]}},function(e,t,n){e.exports=n(150)},function(e,t,n){"use strict";function r(e,t,n){if(!t)return{binary:i.BinaryUploader,browser:o.Browser,clipboard:a.Clipboard,dropzone:s.Dropzone,popup:u.Popup}[e];var r={trackEvent:f};switch(e){case"binary":return new i.BinaryUploader(r,t);case"browser":return new o.Browser(r,t,n);case"clipboard":return new a.Clipboard(r,t);case"dropzone":return new s.Dropzone(r,t,n);case"popup":return new u.Popup(r,t,n);default:var c="The component "+e+" does not exist";throw l.handleError("wrong_component",c),new Error(c)}}Object.defineProperty(t,"__esModule",{value:!0}),n(151),n(153);var i=n(155);t.BinaryUploader=i.BinaryUploader;var o=n(306);t.Browser=o.Browser;var a=n(308);t.Clipboard=a.Clipboard;var s=n(309);t.Dropzone=s.Dropzone;var u=n(313);t.Popup=u.Popup;var c=n(110),l=n(22),f=(new c.UserTracker).track();t.MediaPicker=r},function(e,t,n){var r=n(152);"string"==typeof r&&(r=[[e.i,r,""]]),n(40)(r,{}),r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(39)(),t.push([e.i,'.mpAUI{color:#333;font-family:Arial,sans-serif;font-size:14px;line-height:1.42857143}.mpAUI h2{color:#333;font-size:24px;font-weight:400;line-height:1.25;text-transform:none;margin:30px 0 0}.mpAUI .aui-dialog2-header-close img{width:16px!important;height:16px!important;position:relative;top:2px;opacity:.5}.mpAUI .aui-dialog2-header-close:hover img{opacity:1}.mpAUI .aui-dialog2{box-sizing:border-box;position:relative;left:0;right:0;visibility:hidden}.mpAUI .aui-dialog2-xlarge{width:980px;min-height:431px}.mpAUI .aui-dialog2-small .aui-dialog2-content{min-height:80px}.mpAUI .aui-dialog2-medium .aui-dialog2-content{min-height:180px}.mpAUI .aui-dialog2-large .aui-dialog2-content,.mpAUI .aui-dialog2-xlarge .aui-dialog2-content{min-height:380px}@media (max-height:700px){.mpAUI .aui-dialog2-large .aui-dialog2-content,.mpAUI .aui-dialog2-xlarge .aui-dialog2-content{min-height:180px}.mpAUI .aui-dialog2-large,.mpAUI .aui-dialog2-xlarge{min-height:131px;height:-120%}}@media (max-height:500px){.mpAUI .aui-dialog2-large .aui-dialog2-content,.mpAUI .aui-dialog2-medium .aui-dialog2-content,.mpAUI .aui-dialog2-xlarge .aui-dialog2-content{min-height:80px}.mpAUI .aui-dialog2-medium{min-height:131px;height:-120%}}@media (max-width:1000px){.mpAUI .aui-dialog2-xlarge{width:100%;height:-20%}.mpAUI .aui-dialog2-xlarge.aui-layer{top:69px}.mpAUI .aui-dialog2-xlarge .aui-dialog2-content{height:100%}}@media (max-width:820px){.mpAUI .aui-dialog2-large{width:100%;height:-20%}.mpAUI .aui-dialog2-large.aui-layer{top:69px}.mpAUI .aui-dialog2-large .aui-dialog2-content{height:100%}}@media (max-width:620px){.mpAUI .aui-dialog2-medium{width:100%;height:-20%}.mpAUI .aui-dialog2-medium.aui-layer{top:69px}.mpAUI .aui-dialog2-medium .aui-dialog2-content{height:100%}}@media (max-width:420px){.mpAUI .aui-dialog2-small{width:100%;height:-20%}.mpAUI .aui-dialog2-small.aui-layer{top:69px}.mpAUI .aui-dialog2-small .aui-dialog2-content{height:100%}}.mpAUI .aui-dialog2-footer,.mpAUI .aui-dialog2-header{background:#f5f5f5;visibility:visible}.mpAUI .aui-dialog2.aui-layer[aria-hidden=true] .aui-dialog2-content,.mpAUI .aui-dialog2.aui-layer[aria-hidden=true] .aui-dialog2-footer,.mpAUI .aui-dialog2.aui-layer[aria-hidden=true] .aui-dialog2-header{opacity:0;transition:opacity .2s,visibility .2s;transition-delay:0s;visibility:hidden}.mpAUI .aui-dialog2.aui-layer[aria-hidden=false] .aui-dialog2-content,.mpAUI .aui-dialog2.aui-layer[aria-hidden=false] .aui-dialog2-footer,.mpAUI .aui-dialog2.aui-layer[aria-hidden=false] .aui-dialog2-header{opacity:1;transition:opacity .2s;transition-delay:0s;visibility:visible}.mpAUI .aui-dialog2 .aui-dialog2-content{max-height:100%}.mpAUI .aui-dialog2-content{border-radius:3px;background-color:#fff;box-sizing:border-box;overflow:auto;padding:20px;visibility:visible}.mpAUI .aui-dialog2 .aui-dialog2-header{margin-top:-69px}.mpAUI .aui-dialog2-header{border-bottom:1px solid #ccc;border-radius:5px 5px 0 0;box-sizing:border-box;color:#333;font-weight:400;height:69px;padding:0 20px;width:100%;display:table}.mpAUI .aui-dialog2-header-actions{width:100%}.mpAUI .aui-dialog2-header-actions,.mpAUI .aui-dialog2-header-close,.mpAUI .aui-dialog2-header-main,.mpAUI .aui-dialog2-header-secondary{display:table-cell;vertical-align:middle}.mpAUI .aui-dialog2[data-aui-modal=true] .aui-dialog2-header-close{display:none}.mpAUI .aui-dialog2-footer-hint{color:#707070;line-height:31px}.mpAUI .aui-dialog2-footer-hint,.mpAUI .aui-dialog2-header-main{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding-right:10px}.mpAUI .aui-dialog2-header-main{max-width:400px}.mpAUI .aui-dialog2-footer-actions,.mpAUI .aui-dialog2-header-close,.mpAUI .aui-dialog2-header-secondary{text-align:right}.mpAUI .aui-dialog2-footer-actions{float:right}.mpAUI .aui-dialog2-header-close{width:20px;height:20px;padding-left:5px;text-align:right;vertical-align:middle;line-height:100%;cursor:pointer;color:#707070}.mpAUI .aui-iconfont-close-dialog:before{content:"\\F11B"}.mpAUI .aui-dialog2-warning .aui-dialog2-header{background-color:#d04437;border-bottom-color:#d04437;color:#fff}.mpAUI .aui-dialog2-warning .aui-dialog2-header .aui-dialog2-header-actions a,.mpAUI .aui-dialog2-warning .aui-dialog2-header .aui-dialog2-header-close,.mpAUI .aui-dialog2-warning .aui-dialog2-header .aui-dialog2-header-main,.mpAUI .aui-dialog2-warning .aui-dialog2-header .aui-dialog2-header-secondary a{color:inherit}.mpAUI .aui-dialog2-header-close .aui-icon{vertical-align:middle}.mpAUI .aui-dialog2-footer{border-top:1px solid #ccc;box-sizing:border-box;height:51px;overflow:hidden;padding:10px 20px;width:100%;border-radius:0 0 5px 5px}.mpAUI .aui-dialog2-footer:empty{height:5px;padding:0}.mpAUI .aui-button,.mpAUI .aui-button:visited,.mpAUI a.aui-button{box-sizing:border-box;background:#f5f5f5;border:1px solid #ccc;border-radius:3.01px;color:#333;cursor:pointer;display:inline-block;font-family:inherit;font-size:14px;font-variant:normal;font-weight:400;height:2.14285714em;line-height:1.42857143;margin:0;padding:4px 10px;text-decoration:none;vertical-align:baseline;white-space:nowrap}.mpAUI .aui-button.aui-button-light,.mpAUI .aui-button:visited.aui-button-light,.mpAUI a.aui-button.aui-button-light{background:#fff}.mpAUI .aui-button~.aui-button{margin-left:10px}.mpAUI a.aui-button:active,.mpAUI a.aui-button:focus,.mpAUI a.aui-button:hover{text-decoration:none}.mpAUI .aui-button:focus,.mpAUI form.aui .button:focus,.mpAUI form.aui .cancel:focus{outline:1px dotted #333;outline:5px auto -webkit-focus-ring-color;outline-offset:1px}.mpAUI .aui-button::-moz-focus-inner{border:0;padding:0}.mpAUI .aui-button-subtle.aui-button:focus,.mpAUI .aui-button-subtle.aui-button:hover,.mpAUI .aui-button:focus,.mpAUI .aui-button:hover{background:#e9e9e9;border-color:#999;color:#000;text-decoration:none}.mpAUI .aui-button.aui-button-subtle.active,.mpAUI .aui-button.aui-button-subtle:active{border-color:#999}.mpAUI .aui-button-subtle.aui-button.active,.mpAUI .aui-button-subtle.aui-button:active,.mpAUI .aui-button.active,.mpAUI .aui-button:active,.mpAUI .aui-header .aui-button-split-more.active{box-shadow:inset 0 3px 6px 0 rgba(0,0,0,.1);background-image:none;background:#f5f5f5;text-decoration:none}.mpAUI .aui-buttons .aui-button.aui-button-split-main:not(:active){border-right-color:transparent}.mpAUI .aui-buttons .aui-button.aui-button-split-main:not(.aui-button-primary)+.aui-button-split-more:active:before,.mpAUI .aui-buttons .aui-button.aui-button-split-main:not(.aui-button-primary)+.aui-button-split-more:focus:before,.mpAUI .aui-buttons .aui-button.aui-button-split-main:not(.aui-button-primary)+.aui-button-split-more:hover:before,.mpAUI .aui-buttons .aui-button.aui-button-split-main:not(.aui-button-primary):active+.aui-button-split-more:before,.mpAUI .aui-buttons .aui-button.aui-button-split-main:not(.aui-button-primary):focus+.aui-button-split-more:before,.mpAUI .aui-buttons .aui-button.aui-button-split-main:not(.aui-button-primary):hover+.aui-button-split-more:before{visibility:hidden}.mpAUI .aui-buttons .aui-button.aui-button-split-main:not(.aui-button-primary):hover+.aui-button-split-more{border-left:1px solid #999;margin-left:-2px}.mpAUI .aui-buttons .aui-button.aui-button-split-main+.aui-button-split-more{margin-left:-1px}.mpAUI .aui-buttons .aui-button.aui-button-split-main+.aui-button-split-more:focus,.mpAUI .aui-buttons .aui-button.aui-button-split-main+.aui-button-split-more:hover{margin-left:-2px}.mpAUI .aui-buttons .aui-button.aui-button-split-main+.aui-button-split-more.aui-dropdown2-trigger:before{content:"";border-left:1px solid #ccc;bottom:4px;display:block;left:-1px;position:absolute;top:4px}.mpAUI .aui-buttons .aui-button.aui-button-split-main+.aui-button-split-more.aui-dropdown2-trigger.aui-button-primary:before{border-color:#fff}.mpAUI .aui-button.aui-button-primary,.mpAUI .aui-button.aui-button-primary:visited{background:#3572b0;border-color:transparent;color:#fff;font-weight:700;-webkit-font-smoothing:antialiased}.mpAUI .aui-button.aui-button-primary:focus,.mpAUI .aui-button.aui-button-primary:hover{background:#2a67a5;border-color:transparent;color:#fff}.mpAUI .aui-button.aui-button-primary:active{box-shadow:inset 0 3px 6px 0 rgba(0,0,0,.1);background-image:none;background:#3572b0;text-decoration:none}.mpAUI .aui-button.aui-button-link,.mpAUI .aui-button.aui-button-link:visited,.mpAUI .aui-button.aui-button-text,.mpAUI .aui-button.aui-button-text:visited{background:transparent;border-color:transparent;color:#3572b0;padding:4px 0;text-decoration:none;box-shadow:none}.mpAUI .aui-button.aui-button-link:active,.mpAUI .aui-button.aui-button-link:focus,.mpAUI .aui-button.aui-button-link:hover,.mpAUI .aui-button.aui-button-text:active,.mpAUI .aui-button.aui-button-text:focus,.mpAUI .aui-button.aui-button-text:hover,.mpAUI .aui-buttons .aui-button.aui-button-link:active,.mpAUI .aui-buttons .aui-button.aui-button-link:focus,.mpAUI .aui-buttons .aui-button.aui-button-link:hover,.mpAUI .aui-buttons .aui-button.aui-button-link[aria-pressed=true],.mpAUI .aui-buttons .aui-button.aui-button-text:active,.mpAUI .aui-buttons .aui-button.aui-button-text:focus,.mpAUI .aui-buttons .aui-button.aui-button-text:hover,.mpAUI .aui-buttons .aui-button.aui-button-text[aria-pressed=true]{background:transparent;border-color:transparent;box-shadow:none;text-decoration:underline}.mpAUI .aui-button.aui-button-text,.mpAUI .aui-button.aui-button-text:visited{border:none;font-size:inherit;height:inherit;line-height:normal;padding:0}.mpAUI .aui-button.aui-button-subtle{background:transparent;border-color:transparent;color:#707070}.mpAUI .aui-buttons .aui-button.aui-button-subtle{border-radius:3.01px}.mpAUI .aui-button.aui-button-subtle .aui-icon{margin-right:1px}.mpAUI .aui-button>.aui-icon+.aui-button-label{margin-left:4px}',""])},function(e,t,n){var r=n(154);"string"==typeof r&&(r=[[e.i,r,""]]),n(40)(r,{}),r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(39)(),t.push([e.i,".mediaPickerPopup .aui-dialog2-large{width:845px;height:530px;position:fixed;left:calc(50% - 845px/2);top:calc(50% - 530px/2);margin:0;overflow:visible}",""])},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(16),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u),l=n(19),f=r(l),d=n(20),h=r(d);Object.defineProperty(t,"__esModule",{value:!0});var p=n(48),v=function(e){function t(e,n){return(0,s.default)(this,t),(0,f.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n))}return(0,h.default)(t,e),(0,c.default)(t,[{key:"upload",value:function(e,t){var n=t||"file",r=this._urltoFile(e,n);this.uploadService.addFile(r)}},{key:"_urltoFile",value:function(e,t){var n=e.split(","),r=n[0].match(/:(.*?);/);if(!r||r.length<2)throw new Error("Failed to retrieve file from data URL");for(var i=r[1],o=atob(n[1]),a=o.length,s=new Uint8Array(a);a--;)s[a]=o.charCodeAt(a);var u=new Blob([s],{type:i});return u.name=t,u}}]),t}(p.MediaLocalUpload);t.BinaryUploader=v},function(e,t,n){n(157),e.exports=n(2).Object.getPrototypeOf},function(e,t,n){var r=n(41),i=n(91);n(158)("getPrototypeOf",function(){return function(e){return i(r(e))}})},function(e,t,n){var r=n(5),i=n(2),o=n(18);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*o(function(){n(1)}),"Object",a)}},function(e,t,n){e.exports={default:n(160),__esModule:!0}},function(e,t,n){n(161);var r=n(2).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},function(e,t,n){var r=n(5);r(r.S+r.F*!n(12),"Object",{defineProperty:n(9).f})},function(e,t,n){e.exports={default:n(163),__esModule:!0}},function(e,t,n){n(30),n(33),e.exports=n(69).f("iterator")},function(e,t,n){var r=n(64),i=n(59);e.exports=function(e){return function(t,n){var o,a,s=String(i(t)),u=r(n),c=s.length;return u<0||u>=c?e?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):o:e?s.slice(u,u+2):a-56320+(o-55296<<10)+65536)}}},function(e,t,n){"use strict";var r=n(45),i=n(43),o=n(32),a={};n(15)(a,n(3)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var r=n(9),i=n(10),o=n(46);e.exports=n(12)?Object.defineProperties:function(e,t){i(e);for(var n,a=o(t),s=a.length,u=0;s>u;)r.f(e,n=a[u++],t[n]);return e}},function(e,t,n){var r=n(24),i=n(67),o=n(168);e.exports=function(e){return function(t,n,a){var s,u=r(t),c=i(u.length),l=o(a,c);if(e&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}}},function(e,t,n){var r=n(64),i=Math.max,o=Math.min;e.exports=function(e,t){return e=r(e),e<0?i(e+t,0):o(e,t)}},function(e,t,n){"use strict";var r=n(170),i=n(97),o=n(23),a=n(24);e.exports=n(65)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):"keys"==t?i(0,n):"values"==t?i(0,e[n]):i(0,[n,e[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(){}},function(e,t,n){e.exports={default:n(172),__esModule:!0}},function(e,t,n){n(173),n(73),n(176),n(177),e.exports=n(2).Symbol},function(e,t,n){"use strict";var r=n(4),i=n(17),o=n(12),a=n(5),s=n(94),u=n(70).KEY,c=n(18),l=n(61),f=n(32),d=n(42),h=n(3),p=n(69),v=n(71),m=n(174),y=n(98),b=n(10),g=n(24),_=n(63),w=n(43),x=n(45),k=n(175),A=n(100),S=n(9),P=n(46),O=A.f,I=S.f,E=k.f,j=r.Symbol,T=r.JSON,C=T&&T.stringify,M=h("_hidden"),U=h("toPrimitive"),L={}.propertyIsEnumerable,F=l("symbol-registry"),R=l("symbols"),N=l("op-symbols"),z=Object.prototype,D="function"==typeof j,B=r.QObject,H=!B||!B.prototype||!B.prototype.findChild,q=o&&c(function(){return 7!=x(I({},"a",{get:function(){return I(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=O(z,t);r&&delete z[t],I(e,t,n),r&&e!==z&&I(z,t,r)}:I,$=function(e){var t=R[e]=x(j.prototype);return t._k=e,t},V=D&&"symbol"==typeof j.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof j},W=function(e,t,n){return e===z&&W(N,t,n),b(e),t=_(t,!0),b(n),i(R,t)?(n.enumerable?(i(e,M)&&e[M][t]&&(e[M][t]=!1),n=x(n,{enumerable:w(0,!1)})):(i(e,M)||I(e,M,w(1,{})),e[M][t]=!0),q(e,t,n)):I(e,t,n)},J=function(e,t){b(e);for(var n,r=m(t=g(t)),i=0,o=r.length;o>i;)W(e,n=r[i++],t[n]);return e},K=function(e,t){return void 0===t?x(e):J(x(e),t)},G=function(e){var t=L.call(this,e=_(e,!0));return!(this===z&&i(R,e)&&!i(N,e))&&(!(t||!i(this,e)||!i(R,e)||i(this,M)&&this[M][e])||t)},Y=function(e,t){if(e=g(e),t=_(t,!0),e!==z||!i(R,t)||i(N,t)){var n=O(e,t);return!n||!i(R,t)||i(e,M)&&e[M][t]||(n.enumerable=!0),n}},Q=function(e){for(var t,n=E(g(e)),r=[],o=0;n.length>o;)i(R,t=n[o++])||t==M||t==u||r.push(t);return r},X=function(e){for(var t,n=e===z,r=E(n?N:g(e)),o=[],a=0;r.length>a;)!i(R,t=r[a++])||n&&!i(z,t)||o.push(R[t]);return o};D||(j=function(){if(this instanceof j)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(n){this===z&&t.call(N,n),i(this,M)&&i(this[M],e)&&(this[M][e]=!1),q(this,e,w(1,n))};return o&&H&&q(z,e,{configurable:!0,set:t}),$(e)},s(j.prototype,"toString",function(){return this._k}),A.f=Y,S.f=W,n(99).f=k.f=Q,n(47).f=G,n(72).f=X,o&&!n(44)&&s(z,"propertyIsEnumerable",G,!0),p.f=function(e){return $(h(e))}),a(a.G+a.W+a.F*!D,{Symbol:j});for(var Z="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ee=0;Z.length>ee;)h(Z[ee++]);for(var te=P(h.store),ne=0;te.length>ne;)v(te[ne++]);a(a.S+a.F*!D,"Symbol",{for:function(e){return i(F,e+="")?F[e]:F[e]=j(e)},keyFor:function(e){if(!V(e))throw TypeError(e+" is not a symbol!");for(var t in F)if(F[t]===e)return t},useSetter:function(){H=!0},useSimple:function(){H=!1}}),a(a.S+a.F*!D,"Object",{create:K,defineProperty:W,defineProperties:J,getOwnPropertyDescriptor:Y,getOwnPropertyNames:Q,getOwnPropertySymbols:X}),T&&a(a.S+a.F*(!D||c(function(){var e=j();return"[null]"!=C([e])||"{}"!=C({a:e})||"{}"!=C(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!V(e)){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);return t=r[1],"function"==typeof t&&(n=t),!n&&y(t)||(t=function(e,t){if(n&&(t=n.call(this,e,t)),!V(t))return t}),r[1]=t,C.apply(T,r)}}}),j.prototype[U]||n(15)(j.prototype,U,j.prototype.valueOf),f(j,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},function(e,t,n){var r=n(46),i=n(72),o=n(47);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var a,s=n(e),u=o.f,c=0;s.length>c;)u.call(e,a=s[c++])&&t.push(a);return t}},function(e,t,n){var r=n(24),i=n(99).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return i(e)}catch(e){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?s(e):i(r(e))}},function(e,t,n){n(71)("asyncIterator")},function(e,t,n){n(71)("observable")},function(e,t,n){e.exports={default:n(179),__esModule:!0}},function(e,t,n){n(180),e.exports=n(2).Object.setPrototypeOf},function(e,t,n){var r=n(5);r(r.S,"Object",{setPrototypeOf:n(181).set})},function(e,t,n){var r=n(11),i=n(10),o=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=n(14)(Function.call,n(100).f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:o}},function(e,t,n){e.exports={default:n(183),__esModule:!0}},function(e,t,n){n(184);var r=n(2).Object;e.exports=function(e,t){return r.create(e,t)}},function(e,t,n){var r=n(5);r(r.S,"Object",{create:n(45)})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(101),o=r(i),a=n(21),s=r(a),u=n(196),c=r(u),l=n(50),f=r(l),d=n(0),h=r(d),p=n(1),v=r(p);Object.defineProperty(t,"__esModule",{value:!0});var m=n(206),y=n(51),b=n(77),g=n(22),_=n(211),w=n(111),x=n(128),k=n(129),A=n(261),S=n(131),P=n(262),O=n(83),I=n(267),E=n(268),j=function(){function e(t,n,r){var i=this;(0,h.default)(this,e),this.uploads={},this.retry=0,this.emit=function(e,t){i.emitter.emit(e,t)},this.getQueryParameters=function(e,t){var n=i.getMediaClient(e),r=n.storedAuth;if(r)return(0,f.default)({hash:t.hash},w.mapAuthToQueryParameters(r));throw new Error("auth required")},this.generateTarget=function(e){var t=e.map(function(e){return e.split("=")}).reduce(function(e,t){var n=(0,c.default)(t,2),r=n[0],i=n[1];return e[r]=i,e},{}),n=t.hash,r=t.resumableCurrentChunkSize,o=t.client,a=t.issuer,s=t.token,u=void 0;return u=a?"issuer="+a+"&token="+s:"client="+o+"&token="+s,i.uploadChunkUrl+"/"+n+"-"+r+"?"+u},this.onFilesAdded=function(e){if(0!==e.length){var t=i.uploadParams;e.forEach(function(e){i.uploads[e.uniqueIdentifier]={creationDate:Date.now(),uploadParams:t}});var n=t.collection;i.mediaClientPool.getMediaClient(n).refreshAuth().then(function(){i.retry=0;var t=e.map(function(e){return i.mapResumableFileToMediaFile(e)});i.emit("files-added",{files:t}),t.forEach(function(e){return i.emit("file-added",{file:e})}),i.resumable.upload()},function(){e.forEach(function(e){return i.onError(e,x.ERROR_NAMES.TOKEN_FETCH_FAIL)}),e.forEach(function(e){return e.cancel()}),e.forEach(i.cleanupResumableFile)})}},this.onChunkingComplete=function(e){e.chunks.forEach(function(t){var n=t.callback;t.callback=function(t,r){return"error"===t?(i.retry++,e.abort(),e.pause(!0),void i.resumable.fire("fileError",e,r||"")):("success"===t&&(i.retry=0),void n(t,r))}})},this.onFileProgress=function(e){var t=e.progress(),n=i.mapResumableFileToMediaFile(e);if(t>0&&t<1){var r=new A.MediaProgress(n.size,n.size*t,n.creationDate,Date.now());i.emit("file-uploading",{file:n,progress:r})}},this.onFileSuccess=function(e){return i.getResumableFileUploadParams(e).autoFinalize?void i.finalizeFile(e):void i.emit("file-finalize-ready",{file:i.mapResumableFileToMediaFile(e),finalize:function(){i.finalizeFile(e)}})},this.onFileError=function(e,t){var n=i.getMediaClient(e);i.onUploadError(e,x.ERROR_NAMES.UPLOAD_FAIL,t,n).then(function(){e._prevProgress=0,e.pause(!1),e.chunks.forEach(function(e){"error"===e.status()&&(e.preprocessState=0,e.send()),"pending"===e.status()&&2===e.preprocessState&&(e.preprocessState=0)})}).catch(function(){e.cancel()})},this.onDrop=function(e){e.preventDefault(),e.stopPropagation(),i.emit("file-dropped",e)},this.mapResumableFileToMediaFile=function(e,t){return new k.MediaFile(e.uniqueIdentifier,e.file.name,e.file.size,i.getResumableFileCreationDate(e),e.file.type,t,e)},this.getResumableFileCreationDate=function(e){return i.uploads[e.uniqueIdentifier].creationDate},this.getResumableFileUploadParams=function(e){return i.uploads[e.uniqueIdentifier].uploadParams},this.cleanupResumableFile=function(e){delete i.uploads[e.uniqueIdentifier]},this.emitter=new b.EventEmitter2,this.uploadChunkUrl=t+"/chunk",this.mediaClientPool=new I.MediaClientPool(t,n),this.api=new E.MediaApi,this.setUploadParams(r),this.resumable=new m({target:this.generateTarget,uploadMethod:"PUT",testMethod:"HEAD",chunkSize:4194304,chunkRetryInterval:2500,maxChunkRetries:5,simultaneousUploads:3,forceChunkSize:!0,permanentErrors:[400,403,404,415,500,501],method:"octet",minFileSize:0,query:this.getQueryParameters,preprocess:function(t){return e.hasher.hash(t)},generateUniqueIdentifier:function(){return y.v4()}}),this.resumable.on("filesAdded",this.onFilesAdded),this.resumable.on("chunkingComplete",this.onChunkingComplete),this.resumable.on("fileProgress",this.onFileProgress),this.resumable.on("fileSuccess",this.onFileSuccess),this.resumable.on("fileError",this.onFileError)}return(0,v.default)(e,[{key:"setUploadParams",value:function(e){this.uploadParams=(0,f.default)({},S.defaultUploadParams,e)}},{key:"getUploadParams",value:function(){return this.uploadParams}},{key:"addBrowse",value:function(e){this.resumable.assignBrowse(e)}},{key:"addDropzone",value:function(e){this.dropzoneElement||(this.dropzoneElement=e,this.dropzoneElement.addEventListener("drop",this.onDrop),this.resumable.assignDrop(this.dropzoneElement))}},{key:"removeDropzone",value:function(){this.dropzoneElement&&(this.dropzoneElement.removeEventListener("drop",this.onDrop),this.resumable.unAssignDrop(this.dropzoneElement),this.dropzoneElement=void 0)}},{key:"addFile",value:function(e){this.resumable.addFile(e)}},{key:"cancel",value:function(e){if(e){var t=this.resumable.getFromUniqueIdentifier(e);t&&t.cancel()}else this.resumable.cancel()}},{key:"on",value:function(e,t){this.emitter.on(e,t)}},{key:"off",value:function(e,t){this.emitter.off(e,t)}},{key:"getMediaClient",value:function(e){var t=this.getResumableFileUploadParams(e),n=t.collection;return this.mediaClientPool.getMediaClient(n)}},{key:"finalizeFile",value:function(e){var t=this,n=e.fileName,r=e.file,i=this.getResumableFileUploadParams(e),o=i.collection,a=e.chunks.map(function(e){return e.hash+"-"+(e.endByte-e.startByte)}),s=this.getMediaClient(e);this.api.createUpload(s).then(function(e){return t.appendChunksToUpload(s,e,a,1e3)}).then(function(e){return t.api.createFileFromUpload(s,n,r.type,e,o)}).then(function(n){return t.processFile(s,n,e)}).catch(function(n){t.onError(e,x.ERROR_NAMES.OBJ_CREATE_FAIL,n)})}},{key:"appendChunksToUpload",value:function(e,t,n,r){var i=this;return _.sliceByChunks(n,r).map(function(n,o){var a=o*r;return function(){return i.api.appendChunksToUpload(e,t,n,a)}}).reduce(function(e,t){return e.then(t)},s.default.resolve()).then(function(){return t})}},{key:"processFile",value:function(e,t,n){var r=this;return this.fetchFileMetadata(e,t,n).then(function(e){var t=r.mapResumableFileToMediaFile(n,e.id),i=new A.MediaProgress(t.size,t.size,t.creationDate,Date.now());r.emit("file-converted",{file:t,progress:i,metadata:e})}).catch(function(e){r.onError(n,x.ERROR_NAMES.METADATA_FETCH_FAIL,e)})}},{key:"fetchFileMetadata",value:function(e,t,n){var r=this.getResumableFileUploadParams(n),i=r.collection;return r.fetchMetadata?(this.emit("file-converting",{file:this.mapResumableFileToMediaFile(n,t)}),this.api.pollForFileMetadata(e,t,i)):s.default.resolve({id:t})}},{key:"onUploadError",value:function(e,t,n,r){var i=this;return new s.default(function(o,a){var s=e.uniqueIdentifier,u=void 0;try{u=JSON.parse(n)}catch(e){}return O.isTokenError(u)&&i.retry<=1?void r.refreshAuth().then(function(){return o()}).catch(function(){i.emit("file-upload-error",{file:i.mapResumableFileToMediaFile(e),error:new x.MediaError(s,x.ERROR_NAMES.TOKEN_UPDATE_FAIL,n)}),g.handleError(t,n),a()}):(u&&u.error&&u.error.title&&(n=u.error.title),i.emit("file-upload-error",{file:i.mapResumableFileToMediaFile(e),error:new x.MediaError(s,t,n)}),g.handleError(t,n),a(),void 0)})}},{key:"onError",value:function(e,t,n){var r=void 0;r=n&&n.error&&n.error.title?n.error.title:(0,o.default)(n||{}),this.emit("file-upload-error",{file:this.mapResumableFileToMediaFile(e),error:new x.MediaError(e.uniqueIdentifier,t,r)}),g.handleError(t,r)}}]),e}();j.hasher=P.createHasher(),t.UploadService=j},function(e,t,n){var r=n(2),i=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},function(e,t,n){n(73),n(30),n(33),n(188),n(194),n(195),e.exports=n(2).Promise},function(e,t,n){"use strict";var r,i,o,a,s=n(44),u=n(4),c=n(14),l=n(49),f=n(5),d=n(11),h=n(29),p=n(74),v=n(34),m=n(103),y=n(104).set,b=n(192)(),g=n(75),_=n(105),w=n(106),x=u.TypeError,k=u.process,A=u.Promise,S="process"==l(k),P=function(){},O=i=g.f,I=!!function(){try{var e=A.resolve(1),t=(e.constructor={})[n(3)("species")]=function(e){e(P,P)};return(S||"function"==typeof PromiseRejectionEvent)&&e.then(P)instanceof t}catch(e){}}(),E=function(e){var t;return!(!d(e)||"function"!=typeof(t=e.then))&&t},j=function(e,t){if(!e._n){e._n=!0;var n=e._c;b(function(){for(var r=e._v,i=1==e._s,o=0;n.length>o;)!function(t){var n,o,a=i?t.ok:t.fail,s=t.resolve,u=t.reject,c=t.domain;try{a?(i||(2==e._h&&M(e),e._h=1),!0===a?n=r:(c&&c.enter(),n=a(r),c&&c.exit()),n===t.promise?u(x("Promise-chain cycle")):(o=E(n))?o.call(n,s,u):s(n)):u(r)}catch(e){u(e)}}(n[o++]);e._c=[],e._n=!1,t&&!e._h&&T(e)})}},T=function(e){y.call(u,function(){var t,n,r,i=e._v,o=C(e);if(o&&(t=_(function(){S?k.emit("unhandledRejection",i,e):(n=u.onunhandledrejection)?n({promise:e,reason:i}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",i)}),e._h=S||C(e)?2:1),e._a=void 0,o&&t.e)throw t.v})},C=function(e){if(1==e._h)return!1;for(var t,n=e._a||e._c,r=0;n.length>r;)if(t=n[r++],t.fail||!C(t.promise))return!1;return!0},M=function(e){y.call(u,function(){var t;S?k.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})})},U=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),j(t,!0))},L=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw x("Promise can't be resolved itself");(t=E(e))?b(function(){var r={_w:n,_d:!1};try{t.call(e,c(L,r,1),c(U,r,1))}catch(e){U.call(r,e)}}):(n._v=e,n._s=1,j(n,!1))}catch(e){U.call({_w:n,_d:!1},e)}}};I||(A=function(e){p(this,A,"Promise","_h"),h(e),r.call(this);try{e(c(L,this,1),c(U,this,1))}catch(e){U.call(this,e)}},r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(76)(A.prototype,{then:function(e,t){var n=O(m(this,A));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=S?k.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&j(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r;this.promise=e,this.resolve=c(L,e,1),this.reject=c(U,e,1)},g.f=O=function(e){return e===A||e===a?new o(e):i(e)}),f(f.G+f.W+f.F*!I,{Promise:A}),n(32)(A,"Promise"),n(107)("Promise"),a=n(2).Promise,f(f.S+f.F*!I,"Promise",{reject:function(e){var t=O(this);return(0,t.reject)(e),t.promise}}),f(f.S+f.F*(s||!I),"Promise",{resolve:function(e){return w(s&&this===a?A:this,e)}}),f(f.S+f.F*!(I&&n(193)(function(e){A.all(e).catch(P)})),"Promise",{all:function(e){var t=this,n=O(t),r=n.resolve,i=n.reject,o=_(function(){var n=[],o=0,a=1;v(e,!1,function(e){var s=o++,u=!1;n.push(void 0),a++,t.resolve(e).then(function(e){u||(u=!0,n[s]=e,--a||r(n))},i)}),--a||r(n)});return o.e&&i(o.v),n.promise},race:function(e){var t=this,n=O(t),r=n.reject,i=_(function(){v(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}})},function(e,t,n){var r=n(10);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&r(o.call(e)),t}}},function(e,t,n){var r=n(23),i=n(3)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(4),i=n(104).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,u="process"==n(31)(a);e.exports=function(){var e,t,n,c=function(){var r,i;for(u&&(r=a.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(u)n=function(){a.nextTick(c)};else if(o){var l=!0,f=document.createTextNode("");new o(c).observe(f,{characterData:!0}),n=function(){f.data=l=!l}}else if(s&&s.resolve){var d=s.resolve();n=function(){d.then(c)}}else n=function(){i.call(r,c)};return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},function(e,t,n){var r=n(3)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},e(o)}catch(e){}return n}},function(e,t,n){"use strict";var r=n(5),i=n(2),o=n(4),a=n(103),s=n(106);r(r.P+r.R,"Promise",{finally:function(e){var t=a(this,i.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then(function(){return n})}:e,n?function(n){return s(t,e()).then(function(){throw n})}:e)}})},function(e,t,n){"use strict";var r=n(5),i=n(75),o=n(105);r(r.S,"Promise",{try:function(e){var t=i.f(this),n=o(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;
var i=n(197),o=r(i),a=n(200),s=r(a);t.default=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=(0,s.default)(e);!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if((0,o.default)(Object(t)))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(e,t,n){e.exports={default:n(198),__esModule:!0}},function(e,t,n){n(33),n(30),e.exports=n(199)},function(e,t,n){var r=n(49),i=n(3)("iterator"),o=n(23);e.exports=n(2).isIterable=function(e){var t=Object(e);return void 0!==t[i]||"@@iterator"in t||o.hasOwnProperty(r(t))}},function(e,t,n){e.exports={default:n(201),__esModule:!0}},function(e,t,n){n(33),n(30),e.exports=n(202)},function(e,t,n){var r=n(10),i=n(102);e.exports=n(2).getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}},function(e,t,n){n(204),e.exports=n(2).Object.assign},function(e,t,n){var r=n(5);r(r.S+r.F,"Object",{assign:n(205)})},function(e,t,n){"use strict";var r=n(46),i=n(72),o=n(47),a=n(41),s=n(66),u=Object.assign;e.exports=!u||n(18)(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=u({},e)[n]||Object.keys(u({},t)).join("")!=r})?function(e,t){for(var n=a(e),u=arguments.length,c=1,l=i.f,f=o.f;u>c;)for(var d,h=s(arguments[c++]),p=l?r(h).concat(l(h)):r(h),v=p.length,m=0;v>m;)f.call(h,d=p[m++])&&(n[d]=h[d]);return n}:u},function(e,t,n){!function(){"use strict";var t=function(e){function n(e,t,n){var i=this;i.opts={},i.getOpt=e.getOpt,i._prevProgress=0,i.resumableObj=e,i.file=t,i.fileName=t.fileName||t.name,i.size=t.size,i.relativePath=t.webkitRelativePath||t.relativePath||i.fileName,i.uniqueIdentifier=n,i._pause=!1,i.container="";var a=void 0!==n,s=function(e,t){switch(e){case"progress":i.resumableObj.fire("fileProgress",i);break;case"error":i.abort(),a=!0,i.chunks=[],i.resumableObj.fire("fileError",i,t);break;case"success":if(a)return;i.resumableObj.fire("fileProgress",i),i.isComplete()&&i.resumableObj.fire("fileSuccess",i,t);break;case"retry":i.resumableObj.fire("fileRetry",i)}};return i.chunks=[],i.abort=function(){var e=0;o.each(i.chunks,function(t){"uploading"==t.status()&&(t.abort(),e++)}),e>0&&i.resumableObj.fire("fileProgress",i)},i.cancel=function(){var e=i.chunks;i.chunks=[],o.each(e,function(e){"uploading"==e.status()&&(e.abort(),i.resumableObj.uploadNextChunk())}),i.resumableObj.removeFile(i),i.resumableObj.fire("fileProgress",i)},i.retry=function(){i.bootstrap();var e=!1;i.resumableObj.on("chunkingComplete",function(){e||i.resumableObj.upload(),e=!0})},i.bootstrap=function(){i.abort(),a=!1,i.chunks=[],i._prevProgress=0;for(var e=i.getOpt("forceChunkSize")?Math.ceil:Math.floor,t=Math.max(e(i.file.size/i.getOpt("chunkSize")),1),n=0;n<t;n++)!function(e){window.setTimeout(function(){i.chunks.push(new r(i.resumableObj,i,e,s)),i.resumableObj.fire("chunkingProgress",i,e/t)},0)}(n);window.setTimeout(function(){i.resumableObj.fire("chunkingComplete",i)},0)},i.progress=function(){if(a)return 1;var e=0,t=!1;return o.each(i.chunks,function(n){"error"==n.status()&&(t=!0),e+=n.progress(!0)}),e=t?1:e>.99999?1:e,e=Math.max(i._prevProgress,e),i._prevProgress=e,e},i.isUploading=function(){var e=!1;return o.each(i.chunks,function(t){if("uploading"==t.status())return e=!0,!1}),e},i.isComplete=function(){var e=!1;return o.each(i.chunks,function(t){var n=t.status();if("pending"==n||"uploading"==n||1===t.preprocessState)return e=!0,!1}),!e},i.pause=function(e){i._pause=void 0===e?!i._pause:e},i.isPaused=function(){return i._pause},i.resumableObj.fire("chunkingStart",i),i.bootstrap(),this}function r(e,t,n,r){var i=this;i.opts={},i.getOpt=e.getOpt,i.resumableObj=e,i.fileObj=t,i.fileObjSize=t.size,i.fileObjType=t.file.type,i.offset=n,i.callback=r,i.lastProgressCallback=new Date,i.tested=!1,i.retries=0,i.pendingRetry=!1,i.preprocessState=0;var a=i.getOpt("chunkSize");return i.loaded=0,i.startByte=i.offset*a,i.endByte=Math.min(i.fileObjSize,(i.offset+1)*a),i.fileObjSize-i.endByte<a&&!i.getOpt("forceChunkSize")&&(i.endByte=i.fileObjSize),i.xhr=null,i.test=function(){i.xhr=new XMLHttpRequest;var e=function(e){i.tested=!0;var t=i.status();"success"==t?(i.callback(t,i.message()),i.resumableObj.uploadNextChunk()):i.send()};i.xhr.addEventListener("load",e,!1),i.xhr.addEventListener("error",e,!1),i.xhr.addEventListener("timeout",e,!1);var t=[],n=i.getOpt("parameterNamespace"),r=i.getOpt("query");"function"==typeof r&&(r=r(i.fileObj,i)),o.each(r,function(e,r){t.push([encodeURIComponent(n+e),encodeURIComponent(r)].join("="))}),t.push([n+"resumableChunkNumber",encodeURIComponent(i.offset+1)].join("=")),t.push([n+"resumableChunkSize",encodeURIComponent(i.getOpt("chunkSize"))].join("=")),t.push([n+"resumableCurrentChunkSize",encodeURIComponent(i.endByte-i.startByte)].join("=")),t.push([n+"resumableTotalSize",encodeURIComponent(i.fileObjSize)].join("=")),t.push([n+"resumableType",encodeURIComponent(i.fileObjType)].join("=")),t.push([n+"resumableIdentifier",encodeURIComponent(i.fileObj.uniqueIdentifier)].join("=")),t.push([n+"resumableFilename",encodeURIComponent(i.fileObj.fileName)].join("=")),t.push([n+"resumableRelativePath",encodeURIComponent(i.fileObj.relativePath)].join("=")),t.push([n+"resumableTotalChunks",encodeURIComponent(i.fileObj.chunks.length)].join("=")),i.xhr.open(i.getOpt("testMethod"),o.getTarget(t)),i.xhr.timeout=i.getOpt("xhrTimeout"),i.xhr.withCredentials=i.getOpt("withCredentials");var a=i.getOpt("headers");"function"==typeof a&&(a=a(i.fileObj,i)),o.each(a,function(e,t){i.xhr.setRequestHeader(e,t)}),i.xhr.send(null)},i.preprocessFinished=function(){i.preprocessState=2,i.send()},i.send=function(){var e=i.getOpt("preprocess");if("function"==typeof e)switch(i.preprocessState){case 0:return i.preprocessState=1,void e(i);case 1:return}if(i.getOpt("testChunks")&&!i.tested)return void i.test();i.xhr=new XMLHttpRequest,i.xhr.upload.addEventListener("progress",function(e){new Date-i.lastProgressCallback>1e3*i.getOpt("throttleProgressCallbacks")&&(i.callback("progress"),i.lastProgressCallback=new Date),i.loaded=e.loaded||0},!1),i.loaded=0,i.pendingRetry=!1,i.callback("progress");var t=function(e){var t=i.status();if("success"==t||"error"==t)i.callback(t,i.message()),i.resumableObj.uploadNextChunk();else{i.callback("retry",i.message()),i.abort(),i.retries++;var n=i.getOpt("chunkRetryInterval");void 0!==n?(i.pendingRetry=!0,setTimeout(i.send,n)):i.send()}};i.xhr.addEventListener("load",t,!1),i.xhr.addEventListener("error",t,!1),i.xhr.addEventListener("timeout",t,!1);var n={resumableChunkNumber:i.offset+1,resumableChunkSize:i.getOpt("chunkSize"),resumableCurrentChunkSize:i.endByte-i.startByte,resumableTotalSize:i.fileObjSize,resumableType:i.fileObjType,resumableIdentifier:i.fileObj.uniqueIdentifier,resumableFilename:i.fileObj.fileName,resumableRelativePath:i.fileObj.relativePath,resumableTotalChunks:i.fileObj.chunks.length},r=i.getOpt("query");"function"==typeof r&&(r=r(i.fileObj,i)),o.each(r,function(e,t){n[e]=t});var a=i.fileObj.file.slice?"slice":i.fileObj.file.mozSlice?"mozSlice":i.fileObj.file.webkitSlice?"webkitSlice":"slice",s=i.fileObj.file[a](i.startByte,i.endByte),u=null,c=i.getOpt("target"),l=i.getOpt("parameterNamespace");if("octet"===i.getOpt("method")){u=s;var f=[];o.each(n,function(e,t){f.push([encodeURIComponent(l+e),encodeURIComponent(t)].join("="))}),c=o.getTarget(f)}else u=new FormData,o.each(n,function(e,t){u.append(l+e,t)}),u.append(l+i.getOpt("fileParameterName"),s);var d=i.getOpt("uploadMethod");i.xhr.open(d,c),"octet"===i.getOpt("method")&&i.xhr.setRequestHeader("Content-Type","binary/octet-stream"),i.xhr.timeout=i.getOpt("xhrTimeout"),i.xhr.withCredentials=i.getOpt("withCredentials");var h=i.getOpt("headers");"function"==typeof h&&(h=h(i.fileObj,i)),o.each(h,function(e,t){i.xhr.setRequestHeader(e,t)}),i.xhr.send(u)},i.abort=function(){i.xhr&&i.xhr.abort(),i.xhr=null},i.status=function(){return i.pendingRetry?"uploading":i.xhr?i.xhr.readyState<4?"uploading":200==i.xhr.status||201==i.xhr.status?"success":o.contains(i.getOpt("permanentErrors"),i.xhr.status)||i.retries>=i.getOpt("maxChunkRetries")?"error":(i.abort(),"pending"):"pending"},i.message=function(){return i.xhr?i.xhr.responseText:""},i.progress=function(e){void 0===e&&(e=!1);var t=e?(i.endByte-i.startByte)/i.fileObjSize:1;if(i.pendingRetry)return 0;switch(i.status()){case"success":case"error":return 1*t;case"pending":return 0*t;default:return i.loaded/(i.endByte-i.startByte)*t}},this}if(!(this instanceof t))return new t(e);if(this.version=1,this.support=!("undefined"==typeof File||"undefined"==typeof Blob||"undefined"==typeof FileList||!Blob.prototype.webkitSlice&&!Blob.prototype.mozSlice&&!Blob.prototype.slice),!this.support)return!1;var i=this;i.files=[],i.defaults={chunkSize:1048576,forceChunkSize:!1,simultaneousUploads:3,fileParameterName:"file",throttleProgressCallbacks:.5,query:{},headers:{},preprocess:null,method:"multipart",uploadMethod:"POST",testMethod:"GET",prioritizeFirstAndLastChunk:!1,target:"/",parameterNamespace:"",testChunks:!0,generateUniqueIdentifier:null,getTarget:null,maxChunkRetries:void 0,chunkRetryInterval:void 0,permanentErrors:[400,404,415,500,501],maxFiles:void 0,withCredentials:!1,xhrTimeout:0,maxFilesErrorCallback:function(e,t){var n=i.getOpt("maxFiles");alert("Please upload no more than "+n+" file"+(1===n?"":"s")+" at a time.")},minFileSize:1,minFileSizeErrorCallback:function(e,t){alert(e.fileName||e.name+" is too small, please upload files larger than "+o.formatSize(i.getOpt("minFileSize"))+".")},maxFileSize:void 0,maxFileSizeErrorCallback:function(e,t){alert(e.fileName||e.name+" is too large, please upload files less than "+o.formatSize(i.getOpt("maxFileSize"))+".")},fileType:[],fileTypeErrorCallback:function(e,t){alert(e.fileName||e.name+" has type not allowed, please upload files of type "+i.getOpt("fileType")+".")}},i.opts=e||{},i.getOpt=function(e){var i=this;if(e instanceof Array){var a={};return o.each(e,function(e){a[e]=i.getOpt(e)}),a}if(i instanceof r){if(void 0!==i.opts[e])return i.opts[e];i=i.fileObj}if(i instanceof n){if(void 0!==i.opts[e])return i.opts[e];i=i.resumableObj}if(i instanceof t)return void 0!==i.opts[e]?i.opts[e]:i.defaults[e]},i.events=[],i.on=function(e,t){i.events.push(e.toLowerCase(),t)},i.fire=function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);for(var n=e[0].toLowerCase(),t=0;t<=i.events.length;t+=2)i.events[t]==n&&i.events[t+1].apply(i,e.slice(1)),"catchall"==i.events[t]&&i.events[t+1].apply(null,e);"fileerror"==n&&i.fire("error",e[2],e[1]),"fileprogress"==n&&i.fire("progress")};var o={stopEvent:function(e){e.stopPropagation(),e.preventDefault()},each:function(e,t){if(void 0!==e.length){for(var n=0;n<e.length;n++)if(!1===t(e[n]))return}else for(n in e)if(!1===t(n,e[n]))return},generateUniqueIdentifier:function(e){var t=i.getOpt("generateUniqueIdentifier");if("function"==typeof t)return t(e);var n=e.webkitRelativePath||e.fileName||e.name;return e.size+"-"+n.replace(/[^0-9a-zA-Z_-]/gim,"")},contains:function(e,t){var n=!1;return o.each(e,function(e){return e!=t||(n=!0,!1)}),n},formatSize:function(e){return e<1024?e+" bytes":e<1048576?(e/1024).toFixed(0)+" KB":e<1073741824?(e/1024/1024).toFixed(1)+" MB":(e/1024/1024/1024).toFixed(1)+" GB"},getTarget:function(e){var t=i.getOpt("target");return"function"==typeof t?t(e):(t+=t.indexOf("?")<0?"?":"&",t+e.join("&"))}},a=function(e){o.stopEvent(e),e.dataTransfer&&e.dataTransfer.items?u(e.dataTransfer.items,e):e.dataTransfer&&e.dataTransfer.files&&u(e.dataTransfer.files,e)},s=function(e){e.preventDefault()},u=function(e,t,n,r){n||(n={total:0,files:[],event:t}),c(e.length,n);for(var i=0;i<e.length;i++){var o,a,s=e[i];if(s.isFile||s.isDirectory)o=s;else if(s.getAsEntry)o=s.getAsEntry();else{if(!s.webkitGetAsEntry){if("function"==typeof s.getAsFile){l(s.getAsFile(),n,r);continue}if(File&&s instanceof File){l(s,n,r);continue}c(-1,n);continue}o=s.webkitGetAsEntry()}if(o){if(o.isFile)o.file(function(e){l(e,n,r)},function(e){console.warn(e)});else if(o.isDirectory){a=o.createReader();var f=[],d=function(e){a.readEntries(function(r){if(r.length>0){for(var i=0;i<r.length;i++)f.push(r[i]);d(o.fullPath)}else u(f,t,n,e),c(-1,n)},function(e){c(-1,n),console.warn(e)})};d(o.fullPath)}}else c(-1,n)}},c=function(e,t){t.total+=e,t.files.length===t.total&&f(t.files,t.event)},l=function(e,t,n){n&&(e.relativePath=n+"/"+e.name),t.files.push(e),t.files.length===t.total&&f(t.files,t.event)},f=function(e,t){var r=0,a=i.getOpt(["maxFiles","minFileSize","maxFileSize","maxFilesErrorCallback","minFileSizeErrorCallback","maxFileSizeErrorCallback","fileType","fileTypeErrorCallback"]);if(void 0!==a.maxFiles&&a.maxFiles<e.length+i.files.length){if(1!==a.maxFiles||1!==i.files.length||1!==e.length)return a.maxFilesErrorCallback(e,r++),!1;i.removeFile(i.files[0])}var s=[];o.each(e,function(e){function u(r){i.getFromUniqueIdentifier(r)||function(){e.uniqueIdentifier=r;var o=new n(i,e,r);i.files.push(o),s.push(o),o.container=void 0!==t?t.srcElement:null,window.setTimeout(function(){i.fire("fileAdded",o,t)},0)}()}var c=e.name;if(a.fileType.length>0){var l=!1;for(var f in a.fileType){var d="."+a.fileType[f];if(-1!==c.indexOf(d,c.length-d.length)){l=!0;break}}if(!l)return a.fileTypeErrorCallback(e,r++),!1}if(void 0!==a.minFileSize&&e.size<a.minFileSize)return a.minFileSizeErrorCallback(e,r++),!1;if(void 0!==a.maxFileSize&&e.size>a.maxFileSize)return a.maxFileSizeErrorCallback(e,r++),!1;var h=o.generateUniqueIdentifier(e);h&&"function"==typeof h.done&&"function"==typeof h.fail?h.done(function(e){u(e)}).fail(function(){u()}):u(h)}),window.setTimeout(function(){i.fire("filesAdded",s)},0)};return i.uploadNextChunk=function(){var e=!1;if(i.getOpt("prioritizeFirstAndLastChunk")&&(o.each(i.files,function(t){return t.chunks.length&&"pending"==t.chunks[0].status()&&0===t.chunks[0].preprocessState?(t.chunks[0].send(),e=!0,!1):t.chunks.length>1&&"pending"==t.chunks[t.chunks.length-1].status()&&0===t.chunks[t.chunks.length-1].preprocessState?(t.chunks[t.chunks.length-1].send(),e=!0,!1):void 0}),e))return!0;if(o.each(i.files,function(t){if(!1===t.isPaused()&&o.each(t.chunks,function(t){if("pending"==t.status()&&0===t.preprocessState)return t.send(),e=!0,!1}),e)return!1}),e)return!0;var t=!1;return o.each(i.files,function(e){if(!e.isComplete())return t=!0,!1}),t||i.fire("complete"),!1},i.assignBrowse=function(e,t){void 0===e.length&&(e=[e]),o.each(e,function(e){var n;"INPUT"===e.tagName&&"file"===e.type?n=e:(n=document.createElement("input"),n.setAttribute("type","file"),n.style.display="none",e.addEventListener("click",function(){n.style.opacity=0,n.style.display="block",n.focus(),n.click(),n.style.display="none"},!1),e.appendChild(n));var r=i.getOpt("maxFiles");void 0===r||1!=r?n.setAttribute("multiple","multiple"):n.removeAttribute("multiple"),t?n.setAttribute("webkitdirectory","webkitdirectory"):n.removeAttribute("webkitdirectory"),n.addEventListener("change",function(e){f(e.target.files,e),e.target.value=""},!1)})},i.assignDrop=function(e){void 0===e.length&&(e=[e]),o.each(e,function(e){e.addEventListener("dragover",s,!1),e.addEventListener("dragenter",s,!1),e.addEventListener("drop",a,!1)})},i.unAssignDrop=function(e){void 0===e.length&&(e=[e]),o.each(e,function(e){e.removeEventListener("dragover",s),e.removeEventListener("dragenter",s),e.removeEventListener("drop",a)})},i.isUploading=function(){var e=!1;return o.each(i.files,function(t){if(t.isUploading())return e=!0,!1}),e},i.upload=function(){if(!i.isUploading()){i.fire("uploadStart");for(var e=1;e<=i.getOpt("simultaneousUploads");e++)i.uploadNextChunk()}},i.pause=function(){o.each(i.files,function(e){e.abort()}),i.fire("pause")},i.cancel=function(){for(var e=i.files.length-1;e>=0;e--)i.files[e].cancel();i.fire("cancel")},i.progress=function(){var e=0,t=0;return o.each(i.files,function(n){e+=n.progress()*n.size,t+=n.size}),t>0?e/t:0},i.addFile=function(e,t){f([e],t)},i.removeFile=function(e){for(var t=i.files.length-1;t>=0;t--)i.files[t]===e&&i.files.splice(t,1)},i.getFromUniqueIdentifier=function(e){var t=!1;return o.each(i.files,function(n){n.uniqueIdentifier==e&&(t=n)}),t},i.getSize=function(){var e=0;return o.each(i.files,function(t){e+=t.size}),e},this};e.exports=t}()},function(e,t,n){function r(e,t,n){var r=t&&n||0,i=t||[];e=e||{};var a=void 0!==e.clockseq?e.clockseq:u,f=void 0!==e.msecs?e.msecs:(new Date).getTime(),d=void 0!==e.nsecs?e.nsecs:l+1,h=f-c+(d-l)/1e4;if(h<0&&void 0===e.clockseq&&(a=a+1&16383),(h<0||f>c)&&void 0===e.nsecs&&(d=0),d>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=f,l=d,u=a,f+=122192928e5;var p=(1e4*(268435455&f)+d)%4294967296;i[r++]=p>>>24&255,i[r++]=p>>>16&255,i[r++]=p>>>8&255,i[r++]=255&p;var v=f/4294967296*1e4&268435455;i[r++]=v>>>8&255,i[r++]=255&v,i[r++]=v>>>24&15|16,i[r++]=v>>>16&255,i[r++]=a>>>8|128,i[r++]=255&a;for(var m=e.node||s,y=0;y<6;++y)i[r+y]=m[y];return t||o(i)}var i=n(108),o=n(109),a=i(),s=[1|a[0],a[1],a[2],a[3],a[4],a[5]],u=16383&(a[6]<<8|a[7]),c=0,l=0;e.exports=r},function(e,t,n){function r(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null),e=e||{};var a=e.random||(e.rng||i)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[r+s]=a[s];return t||o(a)}var i=n(108),o=n(109);e.exports=r},function(e,t){},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(101),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u);Object.defineProperty(t,"__esModule",{value:!0});var l={internalStorage:{storage:{},getItem:function(e){return this.storage[e]},setItem:function(e,t){this.storage[e]=t},clear:function(){this.storage={}}},getLocalStorage:function(){return window.localStorage},getSessionStorage:function(){return window.sessionStorage},getInternalStorage:function(){return this.internalStorage},getStorage:function(){try{var e=this.getLocalStorage();if(e)return e;var t=this.getSessionStorage();if(t)return t}catch(e){return this.getInternalStorage()}},isCORSRequest:function(e){var t=document.createElement("a");return t.href=e,t.host!==window.location.host},getCookieValue:function(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return null}},f=function(){function e(t){var n=this;(0,s.default)(this,e),this.STORAGE_KEY_PREAMBLE="herment",this.MAXEVENTS=100,this.PUBLISH_INTERVAL=5e3,this.SAVE_INTERVAL=1e3,this.isStarted=!1,this.config=this.parseConfig(t),this.storage=l.getStorage(),window.addEventListener("unload",function(){return n.moveQueueToStorage()})}return(0,c.default)(e,[{key:"getAtlPath",value:function(){return l.getCookieValue("__atl_path")}},{key:"getServerName",value:function(){return document.location.hostname}},{key:"getProductNameFromServerName",value:function(e){return void 0!==e?e.replace(".com","").replace(".net","").replace(".org","").replace(".au","").replace(".io",""):"-"}},{key:"getSubdomain",value:function(e){if(e.match(/^([a-z0-9\.]*)[\-\.]{1}([a-z0-9]+)+\.([a-z]{2,6})$/i)){var t=e.split(".");if(t=2===t[t.length-1].length?t.slice(0,t.length-3):t.slice(0,t.length-2),0!==t.length)return t.join(".")}return"-"}},{key:"generateRandomStorageKey",value:function(){var e=(Math.random()+"").slice(2,12),t=(Math.random()+"").slice(2,12);return e.concat(t)}},{key:"ajaxPost",value:function(e,t){var n=new XMLHttpRequest;n.open("POST",e,!0),n.setRequestHeader("Content-Type","application/json"),n.setRequestHeader("Accept","application/json, text/javascript, */*;"),n.send(t)}},{key:"parseConfig",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=window,n=t.AJS?t.AJS.EventQueue:[],r=e.queue||n,i=e.analyticsscheme||"https",o=e.analyticsserver||"analytics.atlassian.com",a=e.analyticsurl||"/analytics/events",s=e.server||this.getServerName();return{queue:r,gasScheme:i,gasServer:o,gasUrl:a,serverName:s,productName:e.product||this.getProductNameFromServerName(s),subProductName:e.subproduct||this.getSubdomain(s)||"-",version:e.version,session:e.session,sen:e.sen,sourceIP:e.sourceIP,atlPath:e.atlpath||this.getAtlPath(),post:e.ajax||this.ajaxPost,maxevents:e.maxevents||this.MAXEVENTS,storageKey:e.storage_key||this.STORAGE_KEY_PREAMBLE+this.generateRandomStorageKey()+this.generateRandomStorageKey(),user:e.user||"default",publishInterval:e.publish_interval||this.PUBLISH_INTERVAL,saveInterval:e.save_interval||this.SAVE_INTERVAL}}},{key:"pushToServer",value:function(e,t){var n=this.config,r=n.gasScheme,i=n.gasServer,a=n.gasUrl;(t||this.config.post)(r+"://"+i+a,(0,o.default)({events:e}))}},{key:"addEventsToArray",value:function(e,t,n){if(n&&n.server&&n.product&&n.subproduct&&n.user)for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];if(t.length>=this.config.maxevents)return;if(i.name&&i.properties){var o={name:i.name,properties:i.properties,serverTime:i.time||(new Date).getTime(),server:n.server,user:n.user,product:n.product,subproduct:n.subproduct,version:n.version,session:n.session,sen:n.sen,sourceIP:n.sourceIP,atlPath:n.atlPath};t.push(o)}}}},{key:"publishFromQueueAndStorage",value:function(e){try{var t=e||this.pushToServer.bind(this),n=[];if(this.config.queue.length<1&&(void 0===this.storage||this.storage.length<1))return;var r={server:this.config.serverName,user:this.config.user,product:this.config.productName,subproduct:this.config.subProductName,version:this.config.version,session:this.config.session,sen:this.config.sen,sourceIP:this.config.sourceIP,atlPath:this.config.atlPath};this.addEventsToArray(this.config.queue,n,r);var i=this.popEventsFromStorage();this.addEventsToArray(i,n,r),this.config.queue.length=0,n&&n.length&&t(n)}catch(e){}}},{key:"serialiseEventsToString",value:function(e){return(0,o.default)(e)}},{key:"deserialiseEvents",value:function(e){return JSON.parse(e)}},{key:"storeEvents",value:function(e){if(this.storage)try{if(this.storage[this.config.storageKey]){var t=this.deserialiseEvents(this.storage[this.config.storageKey])||[];t.length<this.config.maxevents&&t.push.apply(t,e),e=t}this.storage.setItem(this.config.storageKey,this.serialiseEventsToString(e))}catch(e){}}},{key:"popEventsFromStorage",value:function(){if(!this.storage)return[];try{if(this.storage[this.config.storageKey]){var e=this.deserialiseEvents(this.storage[this.config.storageKey]);return this.storage[this.config.storageKey]=this.serialiseEventsToString([]),e}}catch(e){}return[]}},{key:"moveQueueToStorage",value:function(){0!==this.config.queue.length&&this.storage&&(this.storeEvents(this.config.queue),this.config.queue.length=0)}},{key:"start",value:function(){var e=this;this.isStarted=!0;var t=Array.prototype.push;this.config.queue.push=function(n){n.time=(new Date).getTime(),t.call(e.config.queue,n)},this.initialSaveTimeout=setTimeout(this.publishFromQueueAndStorage.bind(this),this.config.saveInterval),this.publishInterval=setInterval(this.publishFromQueueAndStorage.bind(this),this.config.publishInterval),this.saveInterval=setInterval(this.moveQueueToStorage.bind(this),this.config.saveInterval)}},{key:"stop",value:function(){this.isStarted=!1,this.publishFromQueueAndStorage(),clearTimeout(this.initialSaveTimeout),clearInterval(this.saveInterval),clearInterval(this.publishInterval)}},{key:"destroy",value:function(){this.stop()}}]),e}(),d=void 0,h=function(){return function(e){return d?(d.stop(),void(d.config=d.parseConfig(e))):d=new f(e)}}();t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sliceByChunks=function(e,t){for(var n=[],r=0;r<e.length;r+=t)n.push(e.slice(r,r+t));return n}},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(213)),r(n(112)),r(n(214)),r(n(216)),r(n(113)),r(n(122))},function(e,t,n){"use strict";function r(e,t){return{type:"FETCHING_COLLECTION_SUCCEEDED",collection:e,hasNextPage:t}}function i(e){return{type:"FETCHING_COLLECTION_FAILED",error:e}}Object.defineProperty(t,"__esModule",{value:!0});var o;!function(e){e[e.click=0]="click",e[e.delete=1]="delete",e[e.download=2]="download",e[e.retry=3]="retry",e[e.custom=4]="custom"}(o=t.CardActionType||(t.CardActionType={})),t.CardClick=function(e){return{type:o.click,handler:e}},t.CardDelete=function(e){return{label:"Delete",type:o.delete,handler:e}},t.ListCardClick=function(e){return{type:o.click,handler:e}},t.ListCardDelete=function(e){return{label:"Delete",type:o.delete,handler:e}},t.CollectionCardClick=function(e){return{type:o.click,handler:e}},t.fetchingCollectionSucceeded=r,t.fetchingCollectionFailed=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(215);t.DefaultMediaStateManager=r.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(53),i=function(){function e(){this.subscribers={},this.state=new Map}return e.prototype.getState=function(e){return this.state.get(e)},e.prototype.updateState=function(e,t){var n=this.subscribers[e],i=r.__assign({},this.state.get(e)||{},t);this.state.set(e,i),void 0!==n&&Array.from(n).forEach(function(e){return e.call(e,i)})},e.prototype.subscribe=function(e,t){var n=this.subscribers,r=n[e];void 0===r&&(r=[],n[e]=r),r.indexOf(t)>-1||r.push(t)},e.prototype.unsubscribe=function(e,t){var n=this.subscribers[e];if(void 0!==n){var r=n.indexOf(t);r>-1&&n.splice(r,1)}},e.prototype.destroy=function(){this.subscribers={}},e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(26);n(217),n(218);var i=n(113),o=n(242),a=n(244),s=n(124),u=n(245),c=n(127),l=200,f=function(){function e(){}return e.create=function(e){return new d(e)},e}();t.ContextFactory=f;var d=function(){function e(e){this.config=e,this.collectionPool=o.RemoteMediaCollectionProviderFactory.createPool(),this.itemPool=i.MediaItemProvider.createPool(),this.urlPreviewPool=i.MediaUrlPreviewProvider.createPool(),this.fileItemCache=new u.LRUCache(e.cacheSize||l)}return e.prototype.getMediaItemProvider=function(e,t,n,o){var a=o&&"link"===o.type,s=o&&"file"===o.type&&"pending"!==o.details.processingStatus;if(o&&(a||s))return{observable:function(){return r.Observable.of(o)}};var u=i.MediaItemProvider.fromPool(this.itemPool,this.apiConfig,this.fileItemCache,t,e,n);return o?{observable:function(){return u.observable().startWith(o)}}:u},e.prototype.getMediaCollectionProvider=function(e,t){return void 0===t&&(t=c.DEFAULT_COLLECTION_PAGE_SIZE),o.RemoteMediaCollectionProviderFactory.fromPool(this.collectionPool,this.apiConfig,e,t)},e.prototype.getDataUriService=function(e){return new a.MediaDataUriService(this.config.authProvider,this.config.serviceHost,e)},e.prototype.getUrlPreviewProvider=function(e){return i.MediaUrlPreviewProvider.fromPool(this.urlPreviewPool,this.apiConfig,e)},e.prototype.addLinkItem=function(e,t,n){return new s.MediaLinkService(this.apiConfig).addLinkItem(e,t,n)},e.prototype.refreshCollection=function(e,t){this.getMediaCollectionProvider(e,t).refresh()},Object.defineProperty(e.prototype,"apiConfig",{get:function(){return{serviceHost:this.config.serviceHost,authProvider:this.config.authProvider}},enumerable:!0,configurable:!0}),e}()},function(e,t){e.exports=n(56)},function(e,t){e.exports=n(62)},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(35),i=function(){function t(e,t){this.config=e,this.fileItemCache=t}return t.prototype.getFileItem=function(t,n){var i=this,o=[t,"file"].join("-"),a=this.fileItemCache.get(o);return a?e.resolve(a):r.default({config:this.config,collectionName:n,preventPreflight:!0})({url:"/file/"+t}).then(function(e){return e.data}).then(function(e){var t={type:"file",details:{id:e.id,mediaType:e.mediaType,mimeType:e.mimeType,name:e.name,processingStatus:e.processingStatus,size:e.size,artifacts:e.artifacts}};return"succeeded"===e.processingStatus&&i.fileItemCache.set(o,t),t})},t}();t.MediaFileService=i}).call(t,n(7))},function(e,t,n){"use strict";(function(t){function r(e){var t=new a(e),n=o(a.prototype.request,t);return i.extend(n,a.prototype,t),i.extend(n,t),n}var i=n(6),o=n(117),a=n(221),s=n(81),u=r(s);u.Axios=a,u.create=function(e){return r(i.merge(s,e))},u.Cancel=n(121),u.CancelToken=n(235),u.isCancel=n(120),u.all=function(e){return t.all(e)},u.spread=n(236),e.exports=u,e.exports.default=u}).call(t,n(7))},function(e,t,n){"use strict";(function(t){function r(e){this.defaults=e,this.interceptors={request:new a,response:new a}}var i=n(81),o=n(6),a=n(230),s=n(231),u=n(233),c=n(234);r.prototype.request=function(e){"string"==typeof e&&(e=o.merge({url:arguments[0]},arguments[1])),e=o.merge(i,this.defaults,{method:"get"},e),e.baseURL&&!u(e.url)&&(e.url=c(e.baseURL,e.url));var n=[s,void 0],r=t.resolve(e);for(this.interceptors.request.forEach(function(e){n.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){n.push(e.fulfilled,e.rejected)});n.length;)r=r.then(n.shift(),n.shift());return r},o.forEach(["delete","get","head"],function(e){r.prototype[e]=function(t,n){return this.request(o.merge(n||{},{method:e,url:t}))}}),o.forEach(["post","put","patch"],function(e){r.prototype[e]=function(t,n,r){return this.request(o.merge(r||{},{method:e,url:t,data:n}))}}),e.exports=r}).call(t,n(7))},function(e,t,n){"use strict";var r=n(6);e.exports=function(e,t){r.forEach(e,function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])})}},function(e,t,n){"use strict";var r=n(119);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n)):e(n)}},function(e,t,n){"use strict";e.exports=function(e,t,n,r){return e.config=t,n&&(e.code=n),e.response=r,e}},function(e,t,n){"use strict";function r(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var i=n(6);e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(i.isURLSearchParams(t))o=t.toString();else{var a=[];i.forEach(t,function(e,t){null!==e&&void 0!==e&&(i.isArray(e)&&(t+="[]"),i.isArray(e)||(e=[e]),i.forEach(e,function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),a.push(r(t)+"="+r(e))}))}),o=a.join("&")}return o&&(e+=(-1===e.indexOf("?")?"?":"&")+o),e}},function(e,t,n){"use strict";var r=n(6);e.exports=function(e){var t,n,i,o={};return e?(r.forEach(e.split("\n"),function(e){i=e.indexOf(":"),t=r.trim(e.substr(0,i)).toLowerCase(),n=r.trim(e.substr(i+1)),t&&(o[t]=o[t]?o[t]+", "+n:n)}),o):o}},function(e,t,n){"use strict";var r=n(6);e.exports=r.isStandardBrowserEnv()?function(){function e(e){var t=e;return n&&(i.setAttribute("href",t),t=i.href),i.setAttribute("href",t),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}var t,n=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");return t=e(window.location.href),function(n){var i=r.isString(n)?e(n):n;return i.protocol===t.protocol&&i.host===t.host}}():function(){return function(){return!0}}()},function(e,t,n){"use strict";function r(){this.message="String contains an invalid character"}function i(e){for(var t,n,i=String(e),a="",s=0,u=o;i.charAt(0|s)||(u="=",s%1);a+=u.charAt(63&t>>8-s%1*8)){if((n=i.charCodeAt(s+=.75))>255)throw new r;t=t<<8|n}return a}var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.prototype=new Error,r.prototype.code=5,r.prototype.name="InvalidCharacterError",e.exports=i},function(e,t,n){"use strict";var r=n(6);e.exports=r.isStandardBrowserEnv()?function(){return{write:function(e,t,n,i,o,a){
var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(e,t,n){"use strict";function r(){this.handlers=[]}var i=n(6);r.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){i.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=r},function(e,t,n){"use strict";(function(t){function r(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var i=n(6),o=n(232),a=n(120),s=n(81);e.exports=function(e){return r(e),e.headers=e.headers||{},e.data=o(e.data,e.headers,e.transformRequest),e.headers=i.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),i.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||s.adapter)(e).then(function(t){return r(e),t.data=o(t.data,t.headers,e.transformResponse),t},function(n){return a(n)||(r(e),n&&n.response&&(n.response.data=o(n.response.data,n.response.headers,e.transformResponse))),t.reject(n)})}}).call(t,n(7))},function(e,t,n){"use strict";var r=n(6);e.exports=function(e,t,n){return r.forEach(n,function(n){e=n(e,t)}),e}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,"")}},function(e,t,n){"use strict";(function(t){function r(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var n;this.promise=new t(function(e){n=e});var r=this;e(function(e){r.reason||(r.reason=new i(e),n(r.reason))})}var i=n(121);r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var e;return{token:new r(function(t){e=t}),cancel:e}},e.exports=r}).call(t,n(7))},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isImageRemote=function(e,t){if(void 0===t&&(t=window.location.origin),URL&&URL.prototype){var n=new URL(e);return!!n.host&&n.origin!==t}return!0}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n;t.checkWebpSupport=function(){return void 0!==n?e.resolve(n):new e(function(e){var t=new Image;t.src="data:image/webp;base64,UklGRi4AAABXRUJQVlA4TCEAAAAvAUAAEB8wAiMwAgSSNtse/cXjxyCCmrYNWPwmHRH9jwMA",t.onload=t.onerror=function(){n=2===t.height,e(n)}})}}).call(t,n(7))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(116),i=n(123),o=n(82),a=n(125),s=function(){function e(){}return e.fromMediaApi=function(e,t,n,o,a){switch(n){case"file":return r.FileProvider.fromMediaApi(e,t,o,a,r.FILE_PROVIDER_RETRY_INTERVAL);case"link":return i.LinkProvider.fromMediaApi(e,o,a);default:throw new Error("invalid media type "+n)}},e.fromPool=function(t,n,r,i,o,s){return{observable:function(){var u=[i,o,s].join("-");return a.observableFromObservablePool(t,u,function(){return e.fromMediaApi(n,r,i,o,s).observable()})}}},e.createPool=function(){return new o.Pool},e}();t.MediaItemProvider=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(53),i=n(126),o=n(82),a=n(125),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.fromMediaApi=function(e,t){return i.UrlPreviewProvider.fromMediaApi(e,t)},t.fromPool=function(e,n,r){return{observable:function(){return a.observableFromObservablePool(e,r,function(){return t.fromMediaApi(n,r).observable()})}}},t.createPool=function(){return new o.Pool},t}(i.UrlPreviewProvider);t.MediaUrlPreviewProvider=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(35),i=function(){function e(e){this.config=e}return e.prototype.getUrlPreview=function(e){return r.default({config:this.config})({url:"/link/preview",params:{url:e}}).then(function(e){var t=e.data,n=t.preview,r=t.previewError;if(r)throw new Error(r.code+": "+r.name);return n})},e}();t.MediaUrlPreviewService=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(114),i=n(127),o=n(243),a=n(82),s=function(){function e(){}return e.fromCollectionService=function(e,t,n,i){return void 0===i&&(i="desc"),new r.RemoteMediaCollectionProvider(e,t,n,i)},e.fromMediaAPI=function(t,n,r,o){return void 0===o&&(o="desc"),e.fromCollectionService(new i.MediaCollectionService(t),n,r,o)},e.fromPool=function(e,t,n,a,s){void 0===s&&(s="desc");var u=[n,a,s].join("-"),c=function(){var e=new i.MediaCollectionService(t);return new r.RemoteMediaCollectionProvider(e,n,a,s)};return o.mediaCollectionProviderFromPool(e,u,c)},e.createPool=function(){return new a.Pool},e}();t.RemoteMediaCollectionProviderFactory=s},function(e,t,n){"use strict";function r(e,t,n){return e.acquire(t,function(){var r=n(),o=r.observable;return r.observable=function(){return new i.Observable(function(n){var i=o.bind(r)(),a=i.subscribe(n);return function(){a.unsubscribe(),e.release(t)}})},r})}Object.defineProperty(t,"__esModule",{value:!0});var i=n(26);t.mediaCollectionProviderFromPool=r},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(35),i=function(){function t(e,t,n){this.authProvider=e,this.serviceHost=t,this.collectionName=n,this.request=r.default({config:{serviceHost:this.serviceHost,authProvider:this.authProvider},collectionName:this.collectionName})}return t.prototype.fetchOriginalDataUri=function(e){return this.fetchSomeDataUri("/file/"+e.details.id+"/binary",{"max-age":3600,collection:this.collectionName})},t.prototype.fetchImageDataUri=function(e,t,n,r){return void 0===r&&(r="crop"),this.fetchSomeDataUri("/file/"+e.details.id+"/image",{width:t,height:n,mode:r,"max-age":3600,collection:this.collectionName})},t.prototype.fetchSomeDataUri=function(e,t){return this.request({url:e,params:t,responseType:"image"}).then(this.readBlob)},t.prototype.readBlob=function(t){return new e(function(e,n){var r=new FileReader;r.addEventListener("load",function(){return e(r.result)}),r.addEventListener("error",function(){return n(r.error)}),r.readAsDataURL(t)})},t}();t.MediaDataUriService=i}).call(t,n(7))},function(e,t){function n(e){this.size=0,this.limit=e,this.oldest=this.newest=void 0,this._keymap={}}n.prototype._markEntryAsUsed=function(e){e!==this.newest&&(e.newer&&(e===this.oldest&&(this.oldest=e.newer),e.newer.older=e.older),e.older&&(e.older.newer=e.newer),e.newer=void 0,e.older=this.newest,this.newest&&(this.newest.newer=e),this.newest=e)},n.prototype.put=function(e,t){var n=this._keymap[e];return n?(n.value=t,void this._markEntryAsUsed(n)):(this._keymap[e]=n={key:e,value:t,older:void 0,newer:void 0},this.newest?(this.newest.newer=n,n.older=this.newest):this.oldest=n,this.newest=n,this.size++,this.size>this.limit?this.shift():void 0)},n.prototype.shift=function(){var e=this.oldest;return e&&(this.oldest.newer?(this.oldest=this.oldest.newer,this.oldest.older=void 0):(this.oldest=void 0,this.newest=void 0),e.newer=e.older=void 0,delete this._keymap[e.key],this.size--),e},n.prototype.get=function(e,t){var n=this._keymap[e];if(void 0!==n)return this._markEntryAsUsed(n),t?n:n.value},n.prototype.find=function(e){return this._keymap[e]},n.prototype.set=function(e,t){var n,r=this.get(e,!0);return r?(n=r.value,r.value=t):(n=this.put(e,t))&&(n=n.value),n},n.prototype.remove=function(e){var t=this._keymap[e];if(t)return delete this._keymap[t.key],t.newer&&t.older?(t.older.newer=t.newer,t.newer.older=t.older):t.newer?(t.newer.older=void 0,this.oldest=t.newer):t.older?(t.older.newer=void 0,this.newest=t.older):this.oldest=this.newest=void 0,this.size--,t.value},n.prototype.removeAll=function(){this.oldest=this.newest=void 0,this.size=0,this._keymap={}},"function"==typeof Object.keys?n.prototype.keys=function(){return Object.keys(this._keymap)}:n.prototype.keys=function(){var e=[];for(var t in this._keymap)e.push(t);return e},n.prototype.forEach=function(e,t,n){var r;if(!0===t?(n=!0,t=void 0):"object"!=typeof t&&(t=this),n)for(r=this.newest;r;)e.call(t,r.key,r.value,this),r=r.older;else for(r=this.oldest;r;)e.call(t,r.key,r.value,this),r=r.newer},n.prototype.toJSON=function(){for(var e=new Array(this.size),t=0,n=this.oldest;n;)e[t++]={key:n.key,value:n.value},n=n.newer;return e},n.prototype.toString=function(){for(var e="",t=this.oldest;t;)e+=String(t.key)+":"+t.value,(t=t.newer)&&(e+=" < ");return e},"object"==typeof this&&(this.LRUCache=n)},function(e,t,n){e.exports={default:n(247),__esModule:!0}},function(e,t,n){n(73),n(30),n(33),n(248),n(254),n(257),n(259),e.exports=n(2).Set},function(e,t,n){"use strict";var r=n(249),i=n(130);e.exports=n(250)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(i(this,"Set"),e=0===e?0:e,e)}},r)},function(e,t,n){"use strict";var r=n(9).f,i=n(45),o=n(76),a=n(14),s=n(74),u=n(34),c=n(65),l=n(97),f=n(107),d=n(12),h=n(70).fastKey,p=n(130),v=d?"_s":"size",m=function(e,t){var n,r=h(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,c){var l=e(function(e,r){s(e,l,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[v]=0,void 0!=r&&u(r,n,e[c],e)});return o(l.prototype,{clear:function(){for(var e=p(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[v]=0},delete:function(e){var n=p(this,t),r=m(n,e);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[v]--}return!!r},forEach:function(e){p(this,t);for(var n,r=a(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!m(p(this,t),e)}}),d&&r(l.prototype,"size",{get:function(){return p(this,t)[v]}}),l},def:function(e,t,n){var r,i,o=m(e,t);return o?o.v=n:(e._l=o={i:i=h(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=o),r&&(r.n=o),e[v]++,"F"!==i&&(e._i[i]=o)),e},getEntry:m,setStrong:function(e,t,n){c(e,t,function(e,n){this._t=p(e,t),this._k=n,this._l=void 0},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?"keys"==t?l(0,n.k):"values"==t?l(0,n.v):l(0,[n.k,n.v]):(e._t=void 0,l(1))},n?"entries":"values",!n,!0),f(t)}}},function(e,t,n){"use strict";var r=n(4),i=n(5),o=n(70),a=n(18),s=n(15),u=n(76),c=n(34),l=n(74),f=n(11),d=n(32),h=n(9).f,p=n(251)(0),v=n(12);e.exports=function(e,t,n,m,y,b){var g=r[e],_=g,w=y?"set":"add",x=_&&_.prototype,k={};return v&&"function"==typeof _&&(b||x.forEach&&!a(function(){(new _).entries().next()}))?(_=t(function(t,n){l(t,_,e,"_c"),t._c=new g,void 0!=n&&c(n,y,t[w],t)}),p("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in x&&(!b||"clear"!=e)&&s(_.prototype,e,function(n,r){if(l(this,_,e),!t&&b&&!f(n))return"get"==e&&void 0;var i=this._c[e](0===n?0:n,r);return t?this:i})}),b||h(_.prototype,"size",{get:function(){return this._c.size}})):(_=m.getConstructor(t,e,y,w),u(_.prototype,n),o.NEED=!0),d(_,e),k[e]=_,i(i.G+i.W+i.F,k),b||m.setStrong(_,e,y),_}},function(e,t,n){var r=n(14),i=n(66),o=n(41),a=n(67),s=n(252);e.exports=function(e,t){var n=1==e,u=2==e,c=3==e,l=4==e,f=6==e,d=5==e||f,h=t||s;return function(t,s,p){for(var v,m,y=o(t),b=i(y),g=r(s,p,3),_=a(b.length),w=0,x=n?h(t,_):u?h(t,0):void 0;_>w;w++)if((d||w in b)&&(v=b[w],m=g(v,w,y),e))if(n)x[w]=m;else if(m)switch(e){case 3:return!0;case 5:return v;case 6:return w;case 2:x.push(v)}else if(l)return!1;return f?-1:c||l?l:x}}},function(e,t,n){var r=n(253);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){var r=n(11),i=n(98),o=n(3)("species");e.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){var r=n(5);r(r.P+r.R,"Set",{toJSON:n(255)("Set")})},function(e,t,n){var r=n(49),i=n(256);e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},function(e,t,n){var r=n(34);e.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},function(e,t,n){n(258)("Set")},function(e,t,n){"use strict";var r=n(5);e.exports=function(e){r(r.S,e,{of:function(){for(var e=arguments.length,t=Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,n){n(260)("Set")},function(e,t,n){"use strict";var r=n(5),i=n(29),o=n(14),a=n(34);e.exports=function(e){r(r.S,e,{from:function(e){var t,n,r,s,u=arguments[1];return i(this),t=void 0!==u,t&&i(u),void 0==e?new this:(n=[],t?(r=0,s=o(u,arguments[2],2),a(e,!1,function(e){n.push(s(e,r++))})):a(e,!1,n.push,n),new this(n))}})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(0),o=r(i),a=n(1),s=r(a);Object.defineProperty(t,"__esModule",{value:!0});var u=n(22),c=function(){function e(t,n,r,i){return(0,o.default)(this,e),this.size=t,this.progress=n,this.startTime=r,this.measureTime=i,e.isValidSize(t)?e.isValidProgress(t,n)?e.isValidStartTime(r)?e.isValidMeasureTime(r,i)?(this.size=t,this.progress=n,this.startTime=r,void(this.measureTime=i)):void u.handleError("wrong_measure_time","The progress measure time has incorrect format."):void u.handleError("wrong_start_time","The progress start time has incorrect format."):void u.handleError("wrong_progress","The progress format is incorrect."):void u.handleError("wrong_file_size","Passed file size is incorrect.")}return(0,s.default)(e,[{key:"toJSON",value:function(){return{absolute:this.absolute,portion:this.portion,max:this.max,overallTime:this.overallTime,expectedFinishTime:this.expectedFinishTime,timeLeft:this.timeLeft}}},{key:"absolute",get:function(){return this.progress}},{key:"portion",get:function(){return this.progress/this.size}},{key:"max",get:function(){return this.size}},{key:"overallTime",get:function(){return(this.measureTime-this.startTime)/this.portion}},{key:"expectedFinishTime",get:function(){return this.startTime+this.overallTime}},{key:"timeLeft",get:function(){return this.expectedFinishTime-this.measureTime}}],[{key:"isValidSize",value:function(e){return"number"==typeof e&&e>0}},{key:"isValidProgress",value:function(t,n){return e.isValidSize(t)&&"number"==typeof n&&n>=0&&n<=t}},{key:"isValidStartTime",value:function(e){return"number"==typeof e&&e>0}},{key:"isValidMeasureTime",value:function(t,n){return e.isValidStartTime(t)&&"number"==typeof n&&n>=t}}]),e}();t.MediaProgress=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(263),i=n(265);t.createHasher=function(){var e=void 0;try{e=new i.WorkerHasher(3)}catch(t){e=new r.SimpleHasher}return e}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(0),o=r(i),a=n(1),s=r(a);Object.defineProperty(t,"__esModule",{value:!0});var u=n(264),c=function(){function e(){(0,o.default)(this,e)}return(0,s.default)(e,[{key:"hash",value:function(e){var t=e.fileObj.file,n=t.slice(e.startByte,e.endByte),r=new FileReader;r.onload=function(t){var n=t.target.result;e.hash=new u(4194304).digestFromArrayBuffer(n),e.preprocessFinished()},r.readAsArrayBuffer(n)}}]),e}();t.SimpleHasher=c},function(e,t,n){(function(t){!function(){function n(e){"use strict";for(var t={fill:0},o=function(e){for(e+=9;e%64>0;e+=1);return e},a=function(e,t){var n=new Uint8Array(e.buffer),r=t%4,i=t-r;switch(r){case 0:n[i+3]=0;case 1:n[i+2]=0;case 2:n[i+1]=0;case 3:n[i+0]=0}for(var o=1+(t>>2);o<e.length;o++)e[o]=0},s=function(e,t,n){e[t>>2]|=128<<24-(t%4<<3),e[14+(2+(t>>2)&-16)]=n/(1<<29)|0,e[15+(2+(t>>2)&-16)]=n<<3},u=function(e,t,n,r,i){var o,a=this,s=i%4,u=(r+s)%4,c=r-u;switch(s){case 0:e[i]=a.charCodeAt(n+3);case 1:e[i+1-(s<<1)|0]=a.charCodeAt(n+2);case 2:e[i+2-(s<<1)|0]=a.charCodeAt(n+1);case 3:e[i+3-(s<<1)|0]=a.charCodeAt(n)}if(!(r<u+s)){for(o=4-s;o<c;o=o+4|0)t[i+o>>2]=a.charCodeAt(n+o)<<24|a.charCodeAt(n+o+1)<<16|a.charCodeAt(n+o+2)<<8|a.charCodeAt(n+o+3);switch(u){case 3:e[i+c+1|0]=a.charCodeAt(n+c+2);case 2:e[i+c+2|0]=a.charCodeAt(n+c+1);case 1:e[i+c+3|0]=a.charCodeAt(n+c)}}},c=function(e,t,n,r,i){var o,a=this,s=i%4,u=(r+s)%4,c=r-u;switch(s){case 0:e[i]=a[n+3];case 1:e[i+1-(s<<1)|0]=a[n+2];case 2:e[i+2-(s<<1)|0]=a[n+1];case 3:e[i+3-(s<<1)|0]=a[n]}if(!(r<u+s)){for(o=4-s;o<c;o=o+4|0)t[i+o>>2|0]=a[n+o]<<24|a[n+o+1]<<16|a[n+o+2]<<8|a[n+o+3];switch(u){case 3:e[i+c+1|0]=a[n+c+2];case 2:e[i+c+2|0]=a[n+c+1];case 1:e[i+c+3|0]=a[n+c]}}},l=function(e,t,n,r,o){var a,s=this,u=o%4,c=(r+u)%4,l=r-c,f=new Uint8Array(i.readAsArrayBuffer(s.slice(n,n+r)));switch(u){case 0:e[o]=f[3];case 1:e[o+1-(u<<1)|0]=f[2];case 2:e[o+2-(u<<1)|0]=f[1];case 3:e[o+3-(u<<1)|0]=f[0]}if(!(r<c+u)){for(a=4-u;a<l;a=a+4|0)t[o+a>>2|0]=f[a]<<24|f[a+1]<<16|f[a+2]<<8|f[a+3];switch(c){case 3:e[o+l+1|0]=f[l+2];case 2:e[o+l+2|0]=f[l+1];case 1:e[o+l+3|0]=f[l]}}},f=function(e){switch(r.getDataType(e)){case"string":return u.bind(e);case"array":case"buffer":return c.bind(e);case"arraybuffer":return c.bind(new Uint8Array(e));case"view":return c.bind(new Uint8Array(e.buffer,e.byteOffset,e.byteLength));case"blob":return l.bind(e)}},d=new Array(256),h=0;h<256;h++)d[h]=(h<16?"0":"")+h.toString(16);var p=function(e){for(var t=new Uint8Array(e),n=new Array(e.byteLength),r=0;r<n.length;r++)n[r]=d[t[r]];return n.join("")},v=function(e){var t;if(e<=65536)return 65536;if(e<16777216)for(t=1;t<e;t<<=1);else for(t=16777216;t<e;t+=16777216);return t};!function(e){if(e%64>0)throw new Error("Chunk size must be a multiple of 128 bit");t.offset=0,t.maxChunkLen=e,t.padMaxChunkLen=o(e),t.heap=new ArrayBuffer(v(t.padMaxChunkLen+320+20)),t.h32=new Int32Array(t.heap),t.h8=new Int8Array(t.heap),t.core=new n._core({Int32Array:Int32Array,DataView:DataView},{},t.heap),t.buffer=null}(e||65536);var m=function(e,n){t.offset=0;var r=new Int32Array(e,n+320,5);r[0]=1732584193,r[1]=-271733879,r[2]=-1732584194,r[3]=271733878,r[4]=-1009589776},y=function(e,n){var r=o(e),i=new Int32Array(t.heap,0,r>>2);return a(i,e),s(i,e,n),r},b=function(e,n,r,i){f(e)(t.h8,t.h32,n,r,i||0)},g=function(e,n,r,i,o){var a=r;b(e,n,r),o&&(a=y(r,i)),t.core.hash(a,t.padMaxChunkLen)},_=function(e,t){var n=new Int32Array(e,t+320,5),r=new Int32Array(5),i=new DataView(r.buffer);return i.setInt32(0,n[0],!1),i.setInt32(4,n[1],!1),i.setInt32(8,n[2],!1),i.setInt32(12,n[3],!1),i.setInt32(16,n[4],!1),r},w=this.rawDigest=function(e){var n=e.byteLength||e.length||e.size||0;m(t.heap,t.padMaxChunkLen);var r=0,i=t.maxChunkLen;for(r=0;n>r+i;r+=i)g(e,r,i,n,!1);return g(e,r,n-r,n,!0),_(t.heap,t.padMaxChunkLen)};this.digest=this.digestFromString=this.digestFromBuffer=this.digestFromArrayBuffer=function(e){return p(w(e).buffer)},this.resetState=function(){return m(t.heap,t.padMaxChunkLen),this},this.append=function(e){var n,r=0,i=e.byteLength||e.length||e.size||0,o=t.offset%t.maxChunkLen;for(t.offset+=i;r<i;)n=Math.min(i-r,t.maxChunkLen-o),b(e,r,n,o),o+=n,r+=n,o===t.maxChunkLen&&(t.core.hash(t.maxChunkLen,t.padMaxChunkLen),o=0);return this},this.getState=function(){var e;if(t.offset%t.maxChunkLen)e=t.heap.slice(0);else{var n=new Int32Array(t.heap,t.padMaxChunkLen+320,5);e=n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength)}return{offset:t.offset,heap:e}},this.setState=function(e){return t.offset=e.offset,20===e.heap.byteLength?new Int32Array(t.heap,t.padMaxChunkLen+320,5).set(new Int32Array(e.heap)):t.h32.set(new Int32Array(e.heap)),this};var x=this.rawEnd=function(){var e=t.offset,n=e%t.maxChunkLen,r=y(n,e);t.core.hash(r,t.padMaxChunkLen);var i=_(t.heap,t.padMaxChunkLen);return m(t.heap,t.padMaxChunkLen),i};this.end=function(){return p(x().buffer)}}var r={getDataType:function(e){if("string"==typeof e)return"string";if(e instanceof Array)return"array";if(void 0!==t&&t.Buffer&&t.Buffer.isBuffer(e))return"buffer";if(e instanceof ArrayBuffer)return"arraybuffer";if(e.buffer instanceof ArrayBuffer)return"view";if(e instanceof Blob)return"blob";throw new Error("Unsupported data type.")}};if(n._core=function(e,t,n){"use asm";var r=new e.Int32Array(n);function i(e,t){e=e|0;t=t|0;var n=0,i=0,o=0,a=0,s=0,u=0,c=0,l=0,f=0,d=0,h=0,p=0,v=0,m=0;o=r[t+320>>2]|0;s=r[t+324>>2]|0;c=r[t+328>>2]|0;f=r[t+332>>2]|0;h=r[t+336>>2]|0;for(n=0;(n|0)<(e|0);n=n+64|0){a=o;u=s;l=c;d=f;p=h;for(i=0;(i|0)<64;i=i+4|0){m=r[n+i>>2]|0;v=((o<<5|o>>>27)+(s&c|~s&f)|0)+((m+h|0)+1518500249|0)|0;h=f;f=c;c=s<<30|s>>>2;s=o;o=v;r[e+i>>2]=m}for(i=e+64|0;(i|0)<(e+80|0);i=i+4|0){m=(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])<<1|(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])>>>31;v=((o<<5|o>>>27)+(s&c|~s&f)|0)+((m+h|0)+1518500249|0)|0;h=f;f=c;c=s<<30|s>>>2;s=o;o=v;r[i>>2]=m}for(i=e+80|0;(i|0)<(e+160|0);i=i+4|0){m=(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])<<1|(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])>>>31;v=((o<<5|o>>>27)+(s^c^f)|0)+((m+h|0)+1859775393|0)|0;h=f;f=c;c=s<<30|s>>>2;s=o;o=v;r[i>>2]=m}for(i=e+160|0;(i|0)<(e+240|0);i=i+4|0){m=(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])<<1|(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])>>>31;v=((o<<5|o>>>27)+(s&c|s&f|c&f)|0)+((m+h|0)-1894007588|0)|0;h=f;f=c;c=s<<30|s>>>2;s=o;o=v;r[i>>2]=m}for(i=e+240|0;(i|0)<(e+320|0);i=i+4|0){m=(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])<<1|(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])>>>31;v=((o<<5|o>>>27)+(s^c^f)|0)+((m+h|0)-899497514|0)|0;h=f;f=c;c=s<<30|s>>>2;s=o;o=v;r[i>>2]=m}o=o+a|0;s=s+u|0;c=c+l|0;f=f+d|0;h=h+p|0}r[t+320>>2]=o;r[t+324>>2]=s;r[t+328>>2]=c;r[t+332>>2]=f;r[t+336>>2]=h}return{hash:i}},e.exports=n,"undefined"!=typeof FileReaderSync){var i=new FileReaderSync,o=function(e,t,n){try{return n(null,e.digest(t))}catch(e){return n(e)}},a=function(e,t,n,r,i){var o=new self.FileReader;o.onloadend=function(){var s=o.result;t+=o.result.byteLength;try{e.append(s)}catch(e){return void i(e)}t<r.size?a(e,t,n,r,i):i(null,e.end())},o.readAsArrayBuffer(r.slice(t,t+n))};self.onmessage=function(e){var t=e.data.data,r=e.data.file,i=e.data.id;if(void 0!==i&&(r||t)){var s=e.data.blockSize||4194304,u=new n(s);u.resetState();var c=function(e,t){e?self.postMessage({id:i,error:e.name}):self.postMessage({id:i,hash:t})};t&&o(u,t,c),r&&a(u,0,s,r,c)}}}}()}).call(t,n(52))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(0),o=r(i),a=n(1),s=r(a);Object.defineProperty(t,"__esModule",{value:!0});var u=n(266),c=function(){function e(t){(0,o.default)(this,e),this.workers=[],this.jobs={};for(var n=0;n<t;++n)this.workers.push(this.createWorker())}return(0,s.default)(e,[{key:"hash",value:function(e){this.calculateHashInWorker(e)}},{key:"createWorker",value:function(){var e=this,t=new Blob([u]),n=URL.createObjectURL(t),r=new Worker(n),i={worker:r,activeJobs:0};return r.addEventListener("message",function(t){e.handleWorkerMessage(t,i)}),i}},{key:"handleWorkerMessage",value:function(e,t){var n=e.data.id,r=this.jobs[n];r&&(delete this.jobs[n],t.activeJobs--,e.data.error?this.calculateHashInWorker(r):(r.hash=e.data.hash,r.preprocessFinished()))}},{key:"calculateHashInWorker",value:function(e){var t=e.fileObj.file,n=t.slice(e.startByte,e.endByte),r=e.fileObj.fileName+e.fileObjSize+e.startByte;this.jobs[r]=e;var i=this.getWorker();this.dispatch(r,i,n)}},{key:"dispatch",value:function(e,t,n){t.activeJobs++;var r=t.worker;if(navigator.userAgent.indexOf("Safari")>-1&&-1===navigator.userAgent.indexOf("Chrome")){var i=new FileReader;return i.onload=function(){r.postMessage({id:e,data:i.result})},void i.readAsBinaryString(n)}r.postMessage({id:e,data:n})}},{key:"getWorker",value:function(){return this.workers.reduce(function(e,t){return t.activeJobs<e.activeJobs?t:e},this.workers[0])}}]),e}();t.WorkerHasher=c},function(e,t){e.exports="(function () {\n    var /*\n * Rusha, a JavaScript implementation of the Secure Hash Algorithm, SHA-1,\n * as defined in FIPS PUB 180-1, tuned for high performance with large inputs.\n * (http://github.com/srijs/rusha)\n *\n * Inspired by Paul Johnstons implementation (http://pajhome.org.uk/crypt/md5).\n *\n * Copyright (c) 2013 Sam Rijs (http://awesam.de).\n * Released under the terms of the MIT license as follows:\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\n * IN THE SOFTWARE.\n */\n    util = {\n        getDataType: function (data) {\n            if (typeof data === 'string') {\n                return 'string';\n            }\n            if (data instanceof Array) {\n                return 'array';\n            }\n            if (typeof global !== 'undefined' && global.Buffer && global.Buffer.isBuffer(data)) {\n                return 'buffer';\n            }\n            if (data instanceof ArrayBuffer) {\n                return 'arraybuffer';\n            }\n            if (data.buffer instanceof ArrayBuffer) {\n                return 'view';\n            }\n            if (data instanceof Blob) {\n                return 'blob';\n            }\n            throw new Error('Unsupported data type.');\n        }\n    };\n    function Rusha(chunkSize) {\n        'use strict';\n        var // Private object structure.\n        self$2 = { fill: 0 };\n        var // Calculate the length of buffer that the sha1 routine uses\n        // including the padding.\n        padlen = function (len) {\n            for (len += 9; len % 64 > 0; len += 1);\n            return len;\n        };\n        var padZeroes = function (bin, len) {\n            var h8 = new Uint8Array(bin.buffer);\n            var om = len % 4, align = len - om;\n            switch (om) {\n            case 0:\n                h8[align + 3] = 0;\n            case 1:\n                h8[align + 2] = 0;\n            case 2:\n                h8[align + 1] = 0;\n            case 3:\n                h8[align + 0] = 0;\n            }\n            for (var i$2 = (len >> 2) + 1; i$2 < bin.length; i$2++)\n                bin[i$2] = 0;\n        };\n        var padData = function (bin, chunkLen, msgLen) {\n            bin[chunkLen >> 2] |= 128 << 24 - (chunkLen % 4 << 3);\n            // To support msgLen >= 2 GiB, use a float division when computing the\n            // high 32-bits of the big-endian message length in bits.\n            bin[((chunkLen >> 2) + 2 & ~15) + 14] = msgLen / (1 << 29) | 0;\n            bin[((chunkLen >> 2) + 2 & ~15) + 15] = msgLen << 3;\n        };\n        var // Convert a binary string and write it to the heap.\n        // A binary string is expected to only contain char codes < 256.\n        convStr = function (H8, H32, start, len, off) {\n            var str = this, i$2, om = off % 4, lm = (len + om) % 4, j = len - lm;\n            switch (om) {\n            case 0:\n                H8[off] = str.charCodeAt(start + 3);\n            case 1:\n                H8[off + 1 - (om << 1) | 0] = str.charCodeAt(start + 2);\n            case 2:\n                H8[off + 2 - (om << 1) | 0] = str.charCodeAt(start + 1);\n            case 3:\n                H8[off + 3 - (om << 1) | 0] = str.charCodeAt(start);\n            }\n            if (len < lm + om) {\n                return;\n            }\n            for (i$2 = 4 - om; i$2 < j; i$2 = i$2 + 4 | 0) {\n                H32[off + i$2 >> 2] = str.charCodeAt(start + i$2) << 24 | str.charCodeAt(start + i$2 + 1) << 16 | str.charCodeAt(start + i$2 + 2) << 8 | str.charCodeAt(start + i$2 + 3);\n            }\n            switch (lm) {\n            case 3:\n                H8[off + j + 1 | 0] = str.charCodeAt(start + j + 2);\n            case 2:\n                H8[off + j + 2 | 0] = str.charCodeAt(start + j + 1);\n            case 1:\n                H8[off + j + 3 | 0] = str.charCodeAt(start + j);\n            }\n        };\n        var // Convert a buffer or array and write it to the heap.\n        // The buffer or array is expected to only contain elements < 256.\n        convBuf = function (H8, H32, start, len, off) {\n            var buf = this, i$2, om = off % 4, lm = (len + om) % 4, j = len - lm;\n            switch (om) {\n            case 0:\n                H8[off] = buf[start + 3];\n            case 1:\n                H8[off + 1 - (om << 1) | 0] = buf[start + 2];\n            case 2:\n                H8[off + 2 - (om << 1) | 0] = buf[start + 1];\n            case 3:\n                H8[off + 3 - (om << 1) | 0] = buf[start];\n            }\n            if (len < lm + om) {\n                return;\n            }\n            for (i$2 = 4 - om; i$2 < j; i$2 = i$2 + 4 | 0) {\n                H32[off + i$2 >> 2 | 0] = buf[start + i$2] << 24 | buf[start + i$2 + 1] << 16 | buf[start + i$2 + 2] << 8 | buf[start + i$2 + 3];\n            }\n            switch (lm) {\n            case 3:\n                H8[off + j + 1 | 0] = buf[start + j + 2];\n            case 2:\n                H8[off + j + 2 | 0] = buf[start + j + 1];\n            case 1:\n                H8[off + j + 3 | 0] = buf[start + j];\n            }\n        };\n        var convBlob = function (H8, H32, start, len, off) {\n            var blob = this, i$2, om = off % 4, lm = (len + om) % 4, j = len - lm;\n            var buf = new Uint8Array(reader.readAsArrayBuffer(blob.slice(start, start + len)));\n            switch (om) {\n            case 0:\n                H8[off] = buf[3];\n            case 1:\n                H8[off + 1 - (om << 1) | 0] = buf[2];\n            case 2:\n                H8[off + 2 - (om << 1) | 0] = buf[1];\n            case 3:\n                H8[off + 3 - (om << 1) | 0] = buf[0];\n            }\n            if (len < lm + om) {\n                return;\n            }\n            for (i$2 = 4 - om; i$2 < j; i$2 = i$2 + 4 | 0) {\n                H32[off + i$2 >> 2 | 0] = buf[i$2] << 24 | buf[i$2 + 1] << 16 | buf[i$2 + 2] << 8 | buf[i$2 + 3];\n            }\n            switch (lm) {\n            case 3:\n                H8[off + j + 1 | 0] = buf[j + 2];\n            case 2:\n                H8[off + j + 2 | 0] = buf[j + 1];\n            case 1:\n                H8[off + j + 3 | 0] = buf[j];\n            }\n        };\n        var convFn = function (data) {\n            switch (util.getDataType(data)) {\n            case 'string':\n                return convStr.bind(data);\n            case 'array':\n                return convBuf.bind(data);\n            case 'buffer':\n                return convBuf.bind(data);\n            case 'arraybuffer':\n                return convBuf.bind(new Uint8Array(data));\n            case 'view':\n                return convBuf.bind(new Uint8Array(data.buffer, data.byteOffset, data.byteLength));\n            case 'blob':\n                return convBlob.bind(data);\n            }\n        };\n        var slice = function (data, offset) {\n            switch (util.getDataType(data)) {\n            case 'string':\n                return data.slice(offset);\n            case 'array':\n                return data.slice(offset);\n            case 'buffer':\n                return data.slice(offset);\n            case 'arraybuffer':\n                return data.slice(offset);\n            case 'view':\n                return data.buffer.slice(offset);\n            }\n        };\n        var // Precompute 00 - ff strings\n        precomputedHex = new Array(256);\n        for (var i = 0; i < 256; i++) {\n            precomputedHex[i] = (i < 16 ? '0' : '') + i.toString(16);\n        }\n        var // Convert an ArrayBuffer into its hexadecimal string representation.\n        hex = function (arrayBuffer) {\n            var binarray = new Uint8Array(arrayBuffer);\n            var res = new Array(arrayBuffer.byteLength);\n            for (var i$2 = 0; i$2 < res.length; i$2++) {\n                res[i$2] = precomputedHex[binarray[i$2]];\n            }\n            return res.join('');\n        };\n        var ceilHeapSize = function (v) {\n            // The asm.js spec says:\n            // The heap object's byteLength must be either\n            // 2^n for n in [12, 24) or 2^24 * n for n ≥ 1.\n            // Also, byteLengths smaller than 2^16 are deprecated.\n            var p;\n            if (// If v is smaller than 2^16, the smallest possible solution\n                // is 2^16.\n                v <= 65536)\n                return 65536;\n            if (// If v < 2^24, we round up to 2^n,\n                // otherwise we round up to 2^24 * n.\n                v < 16777216) {\n                for (p = 1; p < v; p = p << 1);\n            } else {\n                for (p = 16777216; p < v; p += 16777216);\n            }\n            return p;\n        };\n        var // Initialize the internal data structures to a new capacity.\n        init = function (size) {\n            if (size % 64 > 0) {\n                throw new Error('Chunk size must be a multiple of 128 bit');\n            }\n            self$2.offset = 0;\n            self$2.maxChunkLen = size;\n            self$2.padMaxChunkLen = padlen(size);\n            // The size of the heap is the sum of:\n            // 1. The padded input message size\n            // 2. The extended space the algorithm needs (320 byte)\n            // 3. The 160 bit state the algoritm uses\n            self$2.heap = new ArrayBuffer(ceilHeapSize(self$2.padMaxChunkLen + 320 + 20));\n            self$2.h32 = new Int32Array(self$2.heap);\n            self$2.h8 = new Int8Array(self$2.heap);\n            self$2.core = new Rusha._core({\n                Int32Array: Int32Array,\n                DataView: DataView\n            }, {}, self$2.heap);\n            self$2.buffer = null;\n        };\n        // Iinitializethe datastructures according\n        // to a chunk siyze.\n        init(chunkSize || 64 * 1024);\n        var initState = function (heap, padMsgLen) {\n            self$2.offset = 0;\n            var io = new Int32Array(heap, padMsgLen + 320, 5);\n            io[0] = 1732584193;\n            io[1] = -271733879;\n            io[2] = -1732584194;\n            io[3] = 271733878;\n            io[4] = -1009589776;\n        };\n        var padChunk = function (chunkLen, msgLen) {\n            var padChunkLen = padlen(chunkLen);\n            var view = new Int32Array(self$2.heap, 0, padChunkLen >> 2);\n            padZeroes(view, chunkLen);\n            padData(view, chunkLen, msgLen);\n            return padChunkLen;\n        };\n        var // Write data to the heap.\n        write = function (data, chunkOffset, chunkLen, off) {\n            convFn(data)(self$2.h8, self$2.h32, chunkOffset, chunkLen, off || 0);\n        };\n        var // Initialize and call the RushaCore,\n        // assuming an input buffer of length len * 4.\n        coreCall = function (data, chunkOffset, chunkLen, msgLen, finalize) {\n            var padChunkLen = chunkLen;\n            write(data, chunkOffset, chunkLen);\n            if (finalize) {\n                padChunkLen = padChunk(chunkLen, msgLen);\n            }\n            self$2.core.hash(padChunkLen, self$2.padMaxChunkLen);\n        };\n        var getRawDigest = function (heap, padMaxChunkLen) {\n            var io = new Int32Array(heap, padMaxChunkLen + 320, 5);\n            var out = new Int32Array(5);\n            var arr = new DataView(out.buffer);\n            arr.setInt32(0, io[0], false);\n            arr.setInt32(4, io[1], false);\n            arr.setInt32(8, io[2], false);\n            arr.setInt32(12, io[3], false);\n            arr.setInt32(16, io[4], false);\n            return out;\n        };\n        var // Calculate the hash digest as an array of 5 32bit integers.\n        rawDigest = this.rawDigest = function (str) {\n            var msgLen = str.byteLength || str.length || str.size || 0;\n            initState(self$2.heap, self$2.padMaxChunkLen);\n            var chunkOffset = 0, chunkLen = self$2.maxChunkLen;\n            for (chunkOffset = 0; msgLen > chunkOffset + chunkLen; chunkOffset += chunkLen) {\n                coreCall(str, chunkOffset, chunkLen, msgLen, false);\n            }\n            coreCall(str, chunkOffset, msgLen - chunkOffset, msgLen, true);\n            return getRawDigest(self$2.heap, self$2.padMaxChunkLen);\n        };\n        // The digest and digestFrom* interface returns the hash digest\n        // as a hex string.\n        this.digest = this.digestFromString = this.digestFromBuffer = this.digestFromArrayBuffer = function (str) {\n            return hex(rawDigest(str).buffer);\n        };\n        this.resetState = function () {\n            initState(self$2.heap, self$2.padMaxChunkLen);\n            return this;\n        };\n        this.append = function (chunk) {\n            var chunkOffset = 0;\n            var chunkLen = chunk.byteLength || chunk.length || chunk.size || 0;\n            var turnOffset = self$2.offset % self$2.maxChunkLen;\n            var inputLen;\n            self$2.offset += chunkLen;\n            while (chunkOffset < chunkLen) {\n                inputLen = Math.min(chunkLen - chunkOffset, self$2.maxChunkLen - turnOffset);\n                write(chunk, chunkOffset, inputLen, turnOffset);\n                turnOffset += inputLen;\n                chunkOffset += inputLen;\n                if (turnOffset === self$2.maxChunkLen) {\n                    self$2.core.hash(self$2.maxChunkLen, self$2.padMaxChunkLen);\n                    turnOffset = 0;\n                }\n            }\n            return this;\n        };\n        this.getState = function () {\n            var turnOffset = self$2.offset % self$2.maxChunkLen;\n            var heap;\n            if (!turnOffset) {\n                var io = new Int32Array(self$2.heap, self$2.padMaxChunkLen + 320, 5);\n                heap = io.buffer.slice(io.byteOffset, io.byteOffset + io.byteLength);\n            } else {\n                heap = self$2.heap.slice(0);\n            }\n            return {\n                offset: self$2.offset,\n                heap: heap\n            };\n        };\n        this.setState = function (state) {\n            self$2.offset = state.offset;\n            if (state.heap.byteLength === 20) {\n                var io = new Int32Array(self$2.heap, self$2.padMaxChunkLen + 320, 5);\n                io.set(new Int32Array(state.heap));\n            } else {\n                self$2.h32.set(new Int32Array(state.heap));\n            }\n            return this;\n        };\n        var rawEnd = this.rawEnd = function () {\n            var msgLen = self$2.offset;\n            var chunkLen = msgLen % self$2.maxChunkLen;\n            var padChunkLen = padChunk(chunkLen, msgLen);\n            self$2.core.hash(padChunkLen, self$2.padMaxChunkLen);\n            var result = getRawDigest(self$2.heap, self$2.padMaxChunkLen);\n            initState(self$2.heap, self$2.padMaxChunkLen);\n            return result;\n        };\n        this.end = function () {\n            return hex(rawEnd().buffer);\n        };\n    }\n    ;\n    // The low-level RushCore module provides the heart of Rusha,\n    // a high-speed sha1 implementation working on an Int32Array heap.\n    // At first glance, the implementation seems complicated, however\n    // with the SHA1 spec at hand, it is obvious this almost a textbook\n    // implementation that has a few functions hand-inlined and a few loops\n    // hand-unrolled.\n    Rusha._core = function RushaCore(stdlib, foreign, heap) {\n        'use asm';\n        var H = new stdlib.Int32Array(heap);\n        function hash(k, x) {\n            // k in bytes\n            k = k | 0;\n            x = x | 0;\n            var i = 0, j = 0, y0 = 0, z0 = 0, y1 = 0, z1 = 0, y2 = 0, z2 = 0, y3 = 0, z3 = 0, y4 = 0, z4 = 0, t0 = 0, t1 = 0;\n            y0 = H[x + 320 >> 2] | 0;\n            y1 = H[x + 324 >> 2] | 0;\n            y2 = H[x + 328 >> 2] | 0;\n            y3 = H[x + 332 >> 2] | 0;\n            y4 = H[x + 336 >> 2] | 0;\n            for (i = 0; (i | 0) < (k | 0); i = i + 64 | 0) {\n                z0 = y0;\n                z1 = y1;\n                z2 = y2;\n                z3 = y3;\n                z4 = y4;\n                for (j = 0; (j | 0) < 64; j = j + 4 | 0) {\n                    t1 = H[i + j >> 2] | 0;\n                    t0 = ((y0 << 5 | y0 >>> 27) + (y1 & y2 | ~y1 & y3) | 0) + ((t1 + y4 | 0) + 1518500249 | 0) | 0;\n                    y4 = y3;\n                    y3 = y2;\n                    y2 = y1 << 30 | y1 >>> 2;\n                    y1 = y0;\n                    y0 = t0;\n                    H[k + j >> 2] = t1;\n                }\n                for (j = k + 64 | 0; (j | 0) < (k + 80 | 0); j = j + 4 | 0) {\n                    t1 = (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) << 1 | (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) >>> 31;\n                    t0 = ((y0 << 5 | y0 >>> 27) + (y1 & y2 | ~y1 & y3) | 0) + ((t1 + y4 | 0) + 1518500249 | 0) | 0;\n                    y4 = y3;\n                    y3 = y2;\n                    y2 = y1 << 30 | y1 >>> 2;\n                    y1 = y0;\n                    y0 = t0;\n                    H[j >> 2] = t1;\n                }\n                for (j = k + 80 | 0; (j | 0) < (k + 160 | 0); j = j + 4 | 0) {\n                    t1 = (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) << 1 | (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) >>> 31;\n                    t0 = ((y0 << 5 | y0 >>> 27) + (y1 ^ y2 ^ y3) | 0) + ((t1 + y4 | 0) + 1859775393 | 0) | 0;\n                    y4 = y3;\n                    y3 = y2;\n                    y2 = y1 << 30 | y1 >>> 2;\n                    y1 = y0;\n                    y0 = t0;\n                    H[j >> 2] = t1;\n                }\n                for (j = k + 160 | 0; (j | 0) < (k + 240 | 0); j = j + 4 | 0) {\n                    t1 = (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) << 1 | (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) >>> 31;\n                    t0 = ((y0 << 5 | y0 >>> 27) + (y1 & y2 | y1 & y3 | y2 & y3) | 0) + ((t1 + y4 | 0) - 1894007588 | 0) | 0;\n                    y4 = y3;\n                    y3 = y2;\n                    y2 = y1 << 30 | y1 >>> 2;\n                    y1 = y0;\n                    y0 = t0;\n                    H[j >> 2] = t1;\n                }\n                for (j = k + 240 | 0; (j | 0) < (k + 320 | 0); j = j + 4 | 0) {\n                    t1 = (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) << 1 | (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) >>> 31;\n                    t0 = ((y0 << 5 | y0 >>> 27) + (y1 ^ y2 ^ y3) | 0) + ((t1 + y4 | 0) - 899497514 | 0) | 0;\n                    y4 = y3;\n                    y3 = y2;\n                    y2 = y1 << 30 | y1 >>> 2;\n                    y1 = y0;\n                    y0 = t0;\n                    H[j >> 2] = t1;\n                }\n                y0 = y0 + z0 | 0;\n                y1 = y1 + z1 | 0;\n                y2 = y2 + z2 | 0;\n                y3 = y3 + z3 | 0;\n                y4 = y4 + z4 | 0;\n            }\n            H[x + 320 >> 2] = y0;\n            H[x + 324 >> 2] = y1;\n            H[x + 328 >> 2] = y2;\n            H[x + 332 >> 2] = y3;\n            H[x + 336 >> 2] = y4;\n        }\n        return { hash: hash };\n    };\n    if (// If we'e running in Node.JS, export a module.\n        typeof module !== 'undefined') {\n        module.exports = Rusha;\n    } else if (// If we're running in a DOM context, export\n        // the Rusha object to toplevel.\n        typeof window !== 'undefined') {\n        window.Rusha = Rusha;\n    }\n    if (// If we're running in a webworker, accept\n        // messages containing a jobid and a buffer\n        // or blob object, and return the hash result.\n        typeof FileReaderSync !== 'undefined') {\n        var reader = new FileReaderSync();\n        var hashData = function hash(hasher, data, cb) {\n            try {\n                return cb(null, hasher.digest(data));\n            } catch (e) {\n                return cb(e);\n            }\n        };\n        var hashFile = function hashArrayBuffer(hasher, readTotal, blockSize, file, cb) {\n            var reader$2 = new self.FileReader();\n            reader$2.onloadend = function onloadend() {\n                var buffer = reader$2.result;\n                readTotal += reader$2.result.byteLength;\n                try {\n                    hasher.append(buffer);\n                } catch (e) {\n                    cb(e);\n                    return;\n                }\n                if (readTotal < file.size) {\n                    hashFile(hasher, readTotal, blockSize, file, cb);\n                } else {\n                    cb(null, hasher.end());\n                }\n            };\n            reader$2.readAsArrayBuffer(file.slice(readTotal, readTotal + blockSize));\n        };\n        self.onmessage = function onMessage(event) {\n            var data = event.data.data, file = event.data.file, id = event.data.id;\n            if (typeof id === 'undefined')\n                return;\n            if (!file && !data)\n                return;\n            var blockSize = event.data.blockSize || 4 * 1024 * 1024;\n            var hasher = new Rusha(blockSize);\n            hasher.resetState();\n            var done = function done$2(err, hash) {\n                if (!err) {\n                    self.postMessage({\n                        id: id,\n                        hash: hash\n                    });\n                } else {\n                    self.postMessage({\n                        id: id,\n                        error: err.name\n                    });\n                }\n            };\n            if (data)\n                hashData(hasher, data, done);\n            if (file)\n                hashFile(hasher, 0, blockSize, file, done);\n        };\n    }\n}());";
},function(e,t,n){"use strict";var r=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(r);Object.defineProperty(t,"__esModule",{value:!0});var o=n(83),a=function e(t,n){var r=this;(0,i.default)(this,e),this.apiUrl=t,this.authProvider=n,this.clients={},this.getMediaClient=function(e){return r.getStoredClient(e)||r.createNewClient(e)},this.createNewClient=function(e){var t=new o.MediaClient(r.apiUrl,r.authProvider,e);return r.setClient(t,e),t},this.getStoredClient=function(e){return void 0===e?r.clientForAbsentCollection:r.clients[e]},this.setClient=function(e,t){return void 0===t?void(r.clientForAbsentCollection=e):void(r.clients[t]=e)}};t.MediaClientPool=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(0),o=r(i),a=n(1),s=r(a);Object.defineProperty(t,"__esModule",{value:!0});var u=n(51),c=n(83),l=n(269),f=function(){function e(){(0,o.default)(this,e)}return(0,s.default)(e,[{key:"createUpload",value:function(e){var t={httpMethod:"POST",mediaApiMethod:"upload",parameters:{createUpTo:1,safariCacheBuster:u.v4()}};return l.retryTask(function(){return e.call(t,c.addAuthToQueryParameters).then(function(e){var t=e.data;if(0===t.length)throw new Error("No uploads were created");return t[0].id})},5,1e3,2)}},{key:"appendChunksToUpload",value:function(e,t,n,r){var i={httpMethod:"PUT",mediaApiMethod:"upload/"+t+"/chunks",data:{chunks:n,offset:r}};return e.call(i)}},{key:"createFileFromUpload",value:function(e,t,n,r,i){var o={httpMethod:"POST",mediaApiMethod:"file/upload",parameters:i?{collection:i}:{},data:{name:t,mimeType:n,uploadId:r}};return e.call(o).then(function(e){return e.data.id})}},{key:"pollForFileMetadata",value:function(e,t,n){var r={httpMethod:"GET",mediaApiMethod:"file/"+t,parameters:n?{collection:n}:{}};return l.retryTask(function(){return e.call(r,c.addAuthToQueryParameters).then(function(e){var t=e.data;if("succeeded"===t.processingStatus||"failed"===t.processingStatus)return t;throw new Error("Processing not finished")})},10,1e3,2)}}]),e}();t.MediaApi=f},function(e,t,n){"use strict";function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return new o.default(function(i,o){!function t(n,a){n>0?e().then(i).catch(function(e){setTimeout(function(){t(n-1,a*r)},a)}):e().then(i).catch(o)}(t,n)})}var i=n(21),o=function(e){return e&&e.__esModule?e:{default:e}}(i);Object.defineProperty(t,"__esModule",{value:!0}),t.retryTask=r},function(e,t){e.exports={baseUrl:"https://d2lmxj1uc02uys.cloudfront.net",usingVersions:!0,html:{popup:"./html/popup.html",popupInject:"./html/popup/popup.html",dropzone:"./html/dropzone.html",redirectUrl:"./html/link-account-handler/handler.html",userMethodsHelperUrl:"./html/user-methods-helper/helper.html"},version:"11.1.11"}},function(e,t,n){"use strict";var r=n(133),i=function(e){return e&&e.__esModule?e:{default:e}}(r);Object.defineProperty(t,"__esModule",{value:!0});var o=n(305);t.default=function(e){return new i.default(function(t,n){o.fileToBase64(e).then(function(e){var r=new Image;r.src=e,r.onload=function(){return t({src:r.src,width:r.width,height:r.height})},r.onerror=n})})}},function(e,t,n){n(273),n(274),n(289),n(293),e.exports=n(36).Promise},function(e,t){},function(e,t,n){"use strict";var r=n(275)(!0);n(134)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){var r=n(84),i=n(85);e.exports=function(e){return function(t,n){var o,a,s=String(i(t)),u=r(n),c=s.length;return u<0||u>=c?e?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):o:e?s.slice(u,u+2):a-56320+(o-55296<<10)+65536)}}},function(e,t,n){e.exports=!n(37)&&!n(137)(function(){return 7!=Object.defineProperty(n(87)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(56);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){e.exports=n(27)},function(e,t,n){"use strict";var r=n(280),i=n(138),o=n(90),a={};n(27)(a,n(8)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var r=n(28),i=n(281),o=n(142),a=n(89)("IE_PROTO"),s=function(){},u=function(){var e,t=n(87)("iframe"),r=o.length;for(t.style.display="none",n(143).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object</script>"),e.close(),u=e.F;r--;)delete u.prototype[o[r]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[a]=e):n=u(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(55),i=n(28),o=n(282);e.exports=n(37)?Object.defineProperties:function(e,t){i(e);for(var n,a=o(t),s=a.length,u=0;s>u;)r.f(e,n=a[u++],t[n]);return e}},function(e,t,n){var r=n(283),i=n(142);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){var r=n(57),i=n(88),o=n(285)(!1),a=n(89)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),u=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;t.length>u;)r(s,n=t[u++])&&(~o(c,n)||c.push(n));return c}},function(e,t,n){var r=n(58);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(88),i=n(139),o=n(286);e.exports=function(e){return function(t,n,a){var s,u=r(t),c=i(u.length),l=o(a,c);if(e&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}}},function(e,t,n){var r=n(84),i=Math.max,o=Math.min;e.exports=function(e,t){return e=r(e),e<0?i(e+t,0):o(e,t)}},function(e,t,n){var r=n(57),i=n(288),o=n(89)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){var r=n(85);e.exports=function(e){return Object(r(e))}},function(e,t,n){n(290);for(var r=n(13),i=n(27),o=n(38),a=n(8)("toStringTag"),s=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],u=0;u<5;u++){var c=s[u],l=r[c],f=l&&l.prototype;f&&!f[a]&&i(f,a,c),o[c]=o.Array}},function(e,t,n){"use strict";var r=n(291),i=n(292),o=n(38),a=n(88);e.exports=n(134)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):"keys"==t?i(0,n):"values"==t?i(0,e[n]):i(0,[n,e[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){"use strict";var r,i,o,a=n(135),s=n(13),u=n(54),c=n(144),l=n(136),f=n(56),d=n(86),h=n(294),p=n(295),v=n(299),m=n(145).set,y=n(301)(),b=s.TypeError,g=s.process,_=s.Promise,g=s.process,w="process"==c(g),x=function(){},k=!!function(){try{var e=_.resolve(1),t=(e.constructor={})[n(8)("species")]=function(e){e(x,x)};return(w||"function"==typeof PromiseRejectionEvent)&&e.then(x)instanceof t}catch(e){}}(),A=function(e,t){return e===t||e===_&&t===o},S=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},P=function(e){return A(_,e)?new O(e):new i(e)},O=i=function(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw b("Bad Promise constructor");t=e,n=r}),this.resolve=d(t),this.reject=d(n)},I=function(e){try{e()}catch(e){return{error:e}}},E=function(e,t){if(!e._n){e._n=!0;var n=e._c;y(function(){for(var r=e._v,i=1==e._s,o=0;n.length>o;)!function(t){var n,o,a=i?t.ok:t.fail,s=t.resolve,u=t.reject,c=t.domain;try{a?(i||(2==e._h&&C(e),e._h=1),!0===a?n=r:(c&&c.enter(),n=a(r),c&&c.exit()),n===t.promise?u(b("Promise-chain cycle")):(o=S(n))?o.call(n,s,u):s(n)):u(r)}catch(e){u(e)}}(n[o++]);e._c=[],e._n=!1,t&&!e._h&&j(e)})}},j=function(e){m.call(s,function(){var t,n,r,i=e._v;if(T(e)&&(t=I(function(){w?g.emit("unhandledRejection",i,e):(n=s.onunhandledrejection)?n({promise:e,reason:i}):(r=s.console)&&r.error&&r.error("Unhandled promise rejection",i)}),e._h=w||T(e)?2:1),e._a=void 0,t)throw t.error})},T=function(e){if(1==e._h)return!1;for(var t,n=e._a||e._c,r=0;n.length>r;)if(t=n[r++],t.fail||!T(t.promise))return!1;return!0},C=function(e){m.call(s,function(){var t;w?g.emit("rejectionHandled",e):(t=s.onrejectionhandled)&&t({promise:e,reason:e._v})})},M=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),E(t,!0))},U=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw b("Promise can't be resolved itself");(t=S(e))?y(function(){var r={_w:n,_d:!1};try{t.call(e,u(U,r,1),u(M,r,1))}catch(e){M.call(r,e)}}):(n._v=e,n._s=1,E(n,!1))}catch(e){M.call({_w:n,_d:!1},e)}}};k||(_=function(e){h(this,_,"Promise","_h"),d(e),r.call(this);try{e(u(U,this,1),u(M,this,1))}catch(e){M.call(this,e)}},r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(302)(_.prototype,{then:function(e,t){var n=P(v(this,_));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=w?g.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&E(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),O=function(){var e=new r;this.promise=e,this.resolve=u(U,e,1),this.reject=u(M,e,1)}),l(l.G+l.W+l.F*!k,{Promise:_}),n(90)(_,"Promise"),n(303)("Promise"),o=n(36).Promise,l(l.S+l.F*!k,"Promise",{reject:function(e){var t=P(this);return(0,t.reject)(e),t.promise}}),l(l.S+l.F*(a||!k),"Promise",{resolve:function(e){if(e instanceof _&&A(e.constructor,this))return e;var t=P(this);return(0,t.resolve)(e),t.promise}}),l(l.S+l.F*!(k&&n(304)(function(e){_.all(e).catch(x)})),"Promise",{all:function(e){var t=this,n=P(t),r=n.resolve,i=n.reject,o=I(function(){var n=[],o=0,a=1;p(e,!1,function(e){var s=o++,u=!1;n.push(void 0),a++,t.resolve(e).then(function(e){u||(u=!0,n[s]=e,--a||r(n))},i)}),--a||r(n)});return o&&i(o.error),n.promise},race:function(e){var t=this,n=P(t),r=n.reject,i=I(function(){p(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return i&&r(i.error),n.promise}})},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(54),i=n(296),o=n(297),a=n(28),s=n(139),u=n(298),c={},l={},t=e.exports=function(e,t,n,f,d){var h,p,v,m,y=d?function(){return e}:u(e),b=r(n,f,t?2:1),g=0;if("function"!=typeof y)throw TypeError(e+" is not iterable!");if(o(y)){for(h=s(e.length);h>g;g++)if((m=t?b(a(p=e[g])[0],p[1]):b(e[g]))===c||m===l)return m}else for(v=y.call(e);!(p=v.next()).done;)if((m=i(v,b,p.value,t))===c||m===l)return m};t.BREAK=c,t.RETURN=l},function(e,t,n){var r=n(28);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&r(o.call(e)),t}}},function(e,t,n){var r=n(38),i=n(8)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},function(e,t,n){var r=n(144),i=n(8)("iterator"),o=n(38);e.exports=n(36).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){var r=n(28),i=n(86),o=n(8)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||void 0==(n=r(a)[o])?t:i(n)}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(13),i=n(145).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,u="process"==n(58)(a);e.exports=function(){var e,t,n,c=function(){var r,i;for(u&&(r=a.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(u)n=function(){a.nextTick(c)};else if(o){var l=!0,f=document.createTextNode("");new o(c).observe(f,{characterData:!0}),n=function(){f.data=l=!l}}else if(s&&s.resolve){var d=s.resolve();n=function(){d.then(c)}}else n=function(){i.call(r,c)};return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},function(e,t,n){var r=n(27);e.exports=function(e,t,n){for(var i in t)n&&e[i]?e[i]=t[i]:r(e,i,t[i]);return e}},function(e,t,n){"use strict";var r=n(13),i=n(36),o=n(55),a=n(37),s=n(8)("species");e.exports=function(e){var t="function"==typeof i[e]?i[e]:r[e];a&&t&&!t[s]&&o.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){var r=n(8)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},e(o)}catch(e){}return n}},function(e,t,n){"use strict";var r=n(133),i=function(e){return e&&e.__esModule?e:{default:e}}(r);Object.defineProperty(t,"__esModule",{value:!0}),t.fileToBase64=function(e){return new i.default(function(t,n){var r=new FileReader;r.onloadend=function(){return t(r.result)},r.onabort=function(){return n("abort")},r.onerror=n,r.readAsDataURL(e)})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(16),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u),l=n(19),f=r(l),d=n(20),h=r(d);Object.defineProperty(t,"__esModule",{value:!0}),n(146);var p=n(48),v=n(25),m=function(e){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,s.default)(this,t);var i=(0,f.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return i.browseElem=document.createElement("INPUT"),i.browseElem.setAttribute("type","file"),i.browseElem.style.display="none",r.multiple&&i.browseElem.setAttribute("multiple",""),r.fileExtensions&&i.browseElem.setAttribute("accept",r.fileExtensions.join(",")),document.body.appendChild(i.browseElem),i.uploadService.addBrowse(i.browseElem),i.context.trackEvent(new v.MPBrowserLoaded),i}return(0,h.default)(t,e),(0,c.default)(t,[{key:"browse",value:function(){this.browseElem.click()}},{key:"teardown",value:function(){var e=this.browseElem.parentNode;e&&e.removeChild(this.browseElem)}}]),t}(p.MediaLocalUpload);t.Browser=m},function(e,t,n){t=e.exports=n(39)(),t.push([e.i,".mediaPickerPopup{display:none;position:fixed;z-index:2147483647;left:0;top:0;width:100%;height:100%;background-color:rgba(9,30,66,.44);transition:opacity .2s;transition-delay:.1s}.mediaPickerPopup .aui-dialog2-header{height:50px!important}.mediaPickerPopup .aui-dialog2-content{padding:0!important;height:100%;position:relative!important;overflow:hidden!important}.mediaPickerPopup .aui-dialog2-content iframe{width:100%;height:100%;border-width:0;position:absolute}",""])},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(16),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u),l=n(19),f=r(l),d=n(20),h=r(d);Object.defineProperty(t,"__esModule",{value:!0});var p=n(48),v=n(25),m=n(147),y=function(e){function t(e,n){(0,s.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return r.pasteHandler=function(e){for(var t=e.clipboardData.files,n=0;n<t.length;++n){var i=t[n];r.uploadService.addFile(i)}},r.context.trackEvent(new v.MPClipboardLoaded),r}return(0,h.default)(t,e),(0,c.default)(t,[{key:"activate",value:function(){var e=this;m(function(){e.deactivate(),document.addEventListener("paste",e.pasteHandler,!1)})}},{key:"deactivate",value:function(){document.removeEventListener("paste",this.pasteHandler)}}]),t}(p.MediaLocalUpload);t.Clipboard=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(21),o=r(i),a=n(16),s=r(a),u=n(0),c=r(u),l=n(1),f=r(l),d=n(19),h=r(d),p=n(20),v=r(p);Object.defineProperty(t,"__esModule",{value:!0}),n(310);var m=n(80),y=n(48),b=n(22),g=n(25),_=n(148),w=n(312),x=function(e){return[].slice.call(e,0)},k=function(e){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,c.default)(this,t);var i=(0,h.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e,n));i.onDragOver=function(e){if(e.preventDefault(),i.instance&&t.dragContainsFiles(e)){var n=e.dataTransfer,r=void 0;try{r=n.effectAllowed}catch(e){}n.dropEffect="move"===r||"linkMove"===r?"move":"copy",i.instance.classList.add("active");var o=i.getDraggedItemsLength(n);i.emitDragOver({length:o})}},i.onDragLeave=function(e){i.instance&&(e.preventDefault(),i.instance.classList.remove("active"),i.emitDragLeave())},i.onDrop=function(e){var n=i.instance;n&&t.dragContainsFiles(e)&&(n.classList.remove("active"),i.emit("drop",void 0),i.emitDragLeave())};var o=r;return i.container=o.container||document.body,i.headless=o.headless||!1,i.uiActive=!1,i.context.trackEvent(new g.MPDropzoneLoaded),i}return(0,v.default)(t,e),(0,f.default)(t,[{key:"activate",value:function(){var e=this;return w.whenDomReady.then(function(){if(e.container=e.container||document.body,!e.instance)return e.createInstance()}).then(function(){e.deactivate(),e.container.addEventListener("dragover",e.onDragOver,!1),e.container.addEventListener("dragleave",e.onDragLeave,!1),e.uploadService.addDropzone(e.container)})}},{key:"deactivate",value:function(){this.container.removeEventListener("dragover",this.onDragOver,!1),this.container.removeEventListener("dragleave",this.onDragLeave,!1),this.uploadService.removeDropzone()}},{key:"getDraggedItemsLength",value:function(e){return e.items?x(e.items).filter(function(e){return"file"===e.kind}).length:e.files.length}},{key:"createInstance",value:function(){var e=this;return this.getDropzoneUI().then(function(t){e.instance=t,e.container.appendChild(e.instance),e.uploadService.on("file-dropped",e.onDrop)})}},{key:"getDropzoneUI",value:function(){var e=this;return this.headless?o.default.resolve(document.createElement("DIV")):new o.default(function(t,n){return m.default.get(e.getStaticAssetUrl("dropzone")).then(function(e){t(_.parseHTML(e.data))},function(e){b.handleError("dropzone_load_fail",e),n(e)})})}},{key:"emitDragOver",value:function(e){this.uiActive||(this.uiActive=!0,this.emit("drag-enter",e))}},{key:"emitDragLeave",value:function(){var e=this;this.uiActive&&(this.uiActive=!1,window.setTimeout(function(){e.uiActive||e.emit("drag-leave",void 0)},50))}}],[{key:"dragContainsFiles",value:function(e){var t=e.dataTransfer.types;return x(t).indexOf("Files")>-1}}]),t}(y.MediaLocalUpload);t.Dropzone=k},function(e,t,n){var r=n(311);"string"==typeof r&&(r=[[e.i,r,""]]),n(40)(r,{}),r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(39)(),t.push([e.i,".mediaPickerDropzone{position:fixed;left:0;top:0;width:100%;height:0;overflow:hidden;margin:auto;font-family:Source Sans Pro,Helvetica Neue,Helvetica,Arial,sans-serif;pointer-events:none}@keyframes atlassian-doc{0%{transform:rotate(0deg)}to{transform:rotate(-18deg)}}@keyframes spreadsheet{0%{transform:rotate(0deg)}to{transform:rotate(20deg)}}.mediaPickerDropzone .mp-content{width:100vw;height:100vh}.mediaPickerDropzone .mp-content .mp-circle{transition:width .2s ease,height .2s ease,top .2s ease,left .2s ease;width:0;height:0;transform:scale(1);background-color:#0052cc;border-radius:50%;margin:auto;position:absolute;overflow:hidden;color:#fff;top:50%;left:50%}.mediaPickerDropzone .mp-content .mp-circle .mp-title{font-weight:500;font-size:40px;margin-bottom:20px}.mediaPickerDropzone .mp-content .mp-circle .mp-description{font-size:16px;font-weight:500}.mediaPickerDropzone .mp-content .mp-circle .mp-text{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;left:0;right:0;top:130px;position:absolute;text-align:center}.mediaPickerDropzone .mp-content .mp-circle .mp-text span{display:block}.mediaPickerDropzone .mp-content .mp-circle .mp-fileIcon{width:auto;height:200px;position:absolute;bottom:0;margin:auto;transform-origin:bottom;left:150px}.mediaPickerDropzone.active{height:100%;background-color:hsla(0,0%,100%,.7);position:fixed;z-index:500}.mediaPickerDropzone.active .mp-circle{width:500px;height:500px;top:calc(50% - 250px);left:calc(50% - 250px)}.mediaPickerDropzone.active .mp-circle .mp-iconAtlassianDoc{left:100px;width:183px;height:212px;bottom:-15px;animation:atlassian-doc .75s .2s forwards}.mediaPickerDropzone.active .mp-circle .mp-iconOtherDoc{left:170px;z-index:1;width:173px;height:224px}.mediaPickerDropzone.active .mp-circle .mp-iconPageSpreadsheet{left:250px;animation:spreadsheet .75s .2s forwards}",""])},function(e,t,n){"use strict";var r=n(21),i=function(e){return e&&e.__esModule?e:{default:e}}(r);Object.defineProperty(t,"__esModule",{value:!0}),t.whenDomReady=function(){return"complete"===document.readyState?i.default.resolve():new i.default(function(e){window.addEventListener("load",e)})}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.id,n=e.name,r=e.size,i=e.creationDate,o=e.type,a=e.publicId;return new S.MediaFile(t,n,r,i,o,a)}var o=n(21),a=r(o),s=n(50),u=r(s),c=n(16),l=r(c),f=n(0),d=r(f),h=n(1),p=r(h),v=n(19),m=r(v),y=n(20),b=r(y);Object.defineProperty(t,"__esModule",{value:!0}),n(146);var g=n(51),_=n(132),w=n(314),x=n(22),k=n(315),A=n(25),S=n(129),P=n(128),O=n(131),I=n(147),E=n(148),j=n(316);t.USER_RECENTS_COLLECTION="recents";var T=function(e){function t(e,n,r){var i=r.userAuthProvider,o=r.container;(0,d.default)(this,t);var a=(0,m.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return a.config=n,a.context.trackEvent(new A.MPPopupLoaded),a.uploadParams=(0,u.default)({},O.defaultUploadParams,n.uploadParams),a.userAuthProvider=i,a.container=o||document.body,I(function(){a.init()}),a}return(0,b.default)(t,e),(0,p.default)(t,[{key:"init",value:function(){this.popupReady=!1;var e=g.v4(),t={channelName:e,apiUrl:this.config.apiUrl,redirectUrl:this.getStaticAssetUrl("redirectUrl")};this.instance=this._createInstance(t),this.container.appendChild(this.instance),this.popupIframe=this._createInteractionLayer(e)}},{key:"show",value:function(){var e=this;return this.instance||this.init(),this.config.authProvider({collectionName:this.uploadParams.collection}).then(function(t){return e.popupIframe.setTenant({auth:t,uploadParams:e.uploadParams}),e.popupIframe.resetView(),e._show(),a.default.resolve()})}},{key:"cancel",value:function(e){this.popupIframe.cancelUpload(e)}},{key:"teardown",value:function(){this.instance&&(this.instance.parentNode&&this.instance.parentNode.removeChild(this.instance),delete this.instance),this.localFileBrowser&&this.localFileBrowser.teardown()}},{key:"hide",value:function(){this.instance&&(this.instance.style.display="none"),this.emit("closed",void 0),this.context.trackEvent(new A.MPPopupHidden)}},{key:"setUploadParams",value:function(e){this.uploadParams=(0,u.default)({},O.defaultUploadParams,e)}},{key:"_show",value:function(){this.popupReady&&(this.instance.style.display="block",this.context.trackEvent(new A.MPPopupShown))}},{key:"_createInstance",value:function(e){var t=e.apiUrl,n=e.channelName,r=e.redirectUrl,i="?channelName="+encodeURIComponent(n)+"&apiUrl="+encodeURIComponent(t)+"&redirectUrl="+encodeURIComponent(r);return E.parseHTML('<div class="mediaPickerPopup mpAUI">\n        <section role="dialog" id="demo-dialog" class="aui-layer aui-dialog2 aui-dialog2-large" aria-hidden="false">\n            <div class="aui-dialog2-content">\n                <iframe class="mpApp" src="'+this.getStaticAssetUrl("popupInject")+i+'"></iframe>\n            </div>\n        </section>\n      </div>')}},{key:"_createInteractionLayer",value:function(e){var t=this,n=this.instance.querySelector(".mpApp"),r=n.contentWindow,o=w({window:r,scope:e});this.messageService=new j.PostisMessageService(o),this.messageService.handle("uploadFinalizeReady",function(e){return new a.default(function(n){t.emitUploadFinalizeReady(i(e),function(){return n()})})}),this.messageService.handle("getUserAuth",function(e){return t.userAuthProvider(e)});var s=new k.InteractionLayer(this,o);return s.on("uploadEvent",function(e){switch(e.name){case"upload-start":t.emitUploadStart(i(e.data.file));break;case"upload-status-update":t.emitUploadProgress(i(e.data.file),e.data.progress);break;case"upload-preview-update":var n=e.data,r=n.file,o=n.preview;t.emitUploadPreviewUpdate(i(r),o);break;case"upload-processing":t.emitUploadProcessing(i(e.data.file));break;case"upload-end":t.emitUploadEnd(i(e.data.file),e.data.public);break;case"upload-error":var a=e.data,s=a.file,u=a.error;t.emitUploadError(i(s),new P.MediaError(u.fileId,u.name,u.description)),x.handleError(u.name,u.description)}}),s.on("ready",function(){t.emit("ready",void 0),t.popupReady=!0}),s.initProtocol(),s}}]),t}(_.MPComponent);t.Popup=T},function(e,t){function n(e){var t,n=e.scope,r=e.window,i=e.windowForEventListening||window,o={},a=[],s={},u=!1,c=function(e){var t;try{t=JSON.parse(e.data)}catch(e){return}if(t.postis&&t.scope===n){var r=o[t.method];if(r)for(var i=0;i<r.length;i++)r[i].call(null,t.params);else s[t.method]=s[t.method]||[],s[t.method].push(t.params)}};i.addEventListener("message",c,!1);var l={listen:function(e,t){o[e]=o[e]||[],o[e].push(t);var n=s[e];if(n)for(var r=o[e],i=0;i<r.length;i++)for(var a=0;a<n.length;a++)r[i].call(null,n[a]);delete s[e]},send:function(e){var t=e.method;(u||"__ready__"===e.method)&&r&&"function"==typeof r.postMessage?r.postMessage(JSON.stringify({postis:!0,scope:n,method:t,params:e.params}),"*"):a.push(e)},ready:function(e){u?e():setTimeout(function(){l.ready(e)},50)},destroy:function(e){clearInterval(t),u=!1,i&&"function"==typeof i.removeEventListener&&i.removeEventListener("message",c),e&&e()}},f=+new Date+Math.random()+"";return t=setInterval(function(){l.send({method:"__ready__",params:f})},50),l.listen("__ready__",function(e){if(e===f){clearInterval(t),u=!0;for(var n=0;n<a.length;n++)l.send(a[n]);a=[]}else l.send({method:"__ready__",params:e})}),l}e.exports=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(0),o=r(i),a=n(1),s=r(a);Object.defineProperty(t,"__esModule",{value:!0});var u=n(77),c=function(){function e(t,n){(0,o.default)(this,e),this.popup=t,this.channel=n,this.sanitizeUploadParams=function(e){return{collection:e.collection,fetchMetadata:e.fetchMetadata,autoFinalize:e.autoFinalize}},this.emitter=new u.EventEmitter2}return(0,s.default)(e,[{key:"initProtocol",value:function(){var e=this;this.channel.ready(function(){e.channel.listen("hidePopup",function(){e.popup.hide()}),e.channel.listen("showPopup",function(){e.popup.show()}),e.channel.listen("ready",function(){e.emit("ready",void 0)}),e.channel.listen("uploadEvent",function(t){e.emit("uploadEvent",t.event)})})}},{key:"resetView",value:function(){this.channel.send({method:"resetView"})}},{key:"cancelUpload",value:function(e){this.channel.send({method:"cancelUpload",params:{uploadId:e}})}},{key:"setTenant",value:function(e){var t=e.auth,n=e.uploadParams;this.channel.send({method:"setTenant",params:{auth:t,uploadParams:this.sanitizeUploadParams(n)}})}},{key:"on",value:function(e,t){this.emitter.on(e,t)}},{key:"emit",value:function(e,t){this.emitter.emit(e,t)}}]),e}();t.InteractionLayer=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(21),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u);Object.defineProperty(t,"__esModule",{value:!0});var l=n(115);n(317),n(318);var f=n(51),d=function(){function e(t){(0,s.default)(this,e),this.channel=t,this.requests=this.observeChannelRequests(t),this.responses=this.observeChannelResponses(t)}return(0,c.default)(e,[{key:"post",value:function(e){var t=this;return new o.default(function(n,r){var i=f.v4(),o=t.responses.filter(function(e){return e.traceId===i}).subscribe({next:function(e){var t=e.response,i=e.error;i?r(i):n(t),o.unsubscribe()}});t.channel.send({method:"REQUEST",params:{traceId:i,message:e}})})}},{key:"handle",value:function(e,t){var n=this;this.requests.filter(function(t){return t.message.type===e}).subscribe({next:function(e){var r=e.traceId,i=e.message;t(i.payload).then(function(e){n.channel.send({method:"RESPONSE",params:{traceId:r,response:e}})}).catch(function(e){n.channel.send({method:"RESPONSE",params:{traceId:r,error:e}})})}})}},{key:"observeChannelRequests",value:function(e){var t=new l.Subject;return e.ready(function(){e.listen("REQUEST",function(e){t.next(e)})}),t}},{key:"observeChannelResponses",value:function(e){var t=new l.Subject;return e.ready(function(){e.listen("RESPONSE",function(e){t.next(e)})}),t}}]),e}();t.PostisMessageService=d},function(e,t){e.exports=n(72)},function(e,t){e.exports=n(74)}]))},function(e,t,n){"use strict";var r=n(26),i=n(27),o=n(38),a=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator,o=i.toSubscriber(e,t,n);if(r?r.call(o,this.source):o.add(this.source?this._subscribe(o):this._trySubscribe(o)),o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.syncErrorThrown=!0,e.syncErrorValue=t,e.error(t)}},e.prototype.forEach=function(e,t){var n=this;if(t||(r.root.Rx&&r.root.Rx.config&&r.root.Rx.config.Promise?t=r.root.Rx.config.Promise:r.root.Promise&&(t=r.root.Promise)),!t)throw new Error("no Promise impl found");return new t(function(t,r){var i;i=n.subscribe(function(t){if(i)try{e(t)}catch(e){r(e),i.unsubscribe()}else e(t)},r,t)})},e.prototype._subscribe=function(e){return this.source.subscribe(e)},e.prototype[o.observable]=function(){return this},e.create=function(t){return new e(t)},e}();t.Observable=a},function(e,t,n){(function(e){"use strict";var n="undefined"!=typeof window&&window,r="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,i="undefined"!=typeof e&&e,o=n||i||r;t.root=o,function(){if(!o)throw new Error("RxJS could not find any global context (window, self, global)")}()}).call(t,n(18))},function(e,t,n){"use strict";function r(e,t,n){if(e){if(e instanceof i.Subscriber)return e;if(e[o.rxSubscriber])return e[o.rxSubscriber]()}return e||t||n?new i.Subscriber(e,t,n):new i.Subscriber(a.empty)}var i=n(28),o=n(37),a=n(36);t.toSubscriber=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(29),o=n(30),a=n(36),s=n(37),u=function(e){function t(n,r,i){switch(e.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a.empty;break;case 1:if(!n){this.destination=a.empty;break}if("object"==typeof n){n instanceof t?(this.destination=n,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new c(this,n));break}default:this.syncErrorThrowable=!0,this.destination=new c(this,n,r,i)}}return r(t,e),t.prototype[s.rxSubscriber]=function(){return this},t.create=function(e,n,r){var i=new t(e,n,r);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},
t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this,t=e._parent,n=e._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=n,this},t}(o.Subscription);t.Subscriber=u;var c=function(e){function t(t,n,r,o){e.call(this),this._parentSubscriber=t;var s,u=this;i.isFunction(n)?s=n:n&&(s=n.next,r=n.error,o=n.complete,n!==a.empty&&(u=Object.create(n),i.isFunction(u.unsubscribe)&&this.add(u.unsubscribe.bind(u)),u.unsubscribe=this.unsubscribe.bind(this))),this._context=u,this._next=s,this._error=r,this._complete=o}return r(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber;if(this._error)t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else{if(!t.syncErrorThrowable)throw this.unsubscribe(),e;t.syncErrorValue=e,t.syncErrorThrown=!0,this.unsubscribe()}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){throw this.unsubscribe(),e}},t.prototype.__tryOrSetError=function(e,t,n){try{t.call(this._context,n)}catch(t){return e.syncErrorValue=t,e.syncErrorThrown=!0,!0}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(u)},function(e,t){"use strict";function n(e){return"function"==typeof e}t.isFunction=n},function(e,t,n){"use strict";function r(e){return e.reduce(function(e,t){return e.concat(t instanceof c.UnsubscriptionError?t.errors:t)},[])}var i=n(31),o=n(32),a=n(29),s=n(33),u=n(34),c=n(35),l=function(){function e(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var e,t=!1;if(!this.closed){var n=this,l=n._parent,f=n._parents,d=n._unsubscribe,h=n._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var p=-1,v=f?f.length:0;l;)l.remove(this),l=++p<v&&f[p]||null;if(a.isFunction(d)){var m=s.tryCatch(d).call(this);m===u.errorObject&&(t=!0,e=e||(u.errorObject.e instanceof c.UnsubscriptionError?r(u.errorObject.e.errors):[u.errorObject.e]))}if(i.isArray(h))for(p=-1,v=h.length;++p<v;){var y=h[p];if(o.isObject(y)){var m=s.tryCatch(y.unsubscribe).call(y);if(m===u.errorObject){t=!0,e=e||[];var b=u.errorObject.e;b instanceof c.UnsubscriptionError?e=e.concat(r(b.errors)):e.push(b)}}}if(t)throw new c.UnsubscriptionError(e)}},e.prototype.add=function(t){if(!t||t===e.EMPTY)return e.EMPTY;if(t===this)return this;var n=t;switch(typeof t){case"function":n=new e(t);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var r=n;n=new e,n._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=this._subscriptions||(this._subscriptions=[]);return i.push(n),n._addParent(this),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);n!==-1&&t.splice(n,1)}},e.prototype._addParent=function(e){var t=this,n=t._parent,r=t._parents;n&&n!==e?r?r.indexOf(e)===-1&&r.push(e):this._parents=[e]:this._parent=e},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();t.Subscription=l},function(e,t){"use strict";t.isArray=Array.isArray||function(e){return e&&"number"==typeof e.length}},function(e,t){"use strict";function n(e){return null!=e&&"object"==typeof e}t.isObject=n},function(e,t,n){"use strict";function r(){try{return o.apply(this,arguments)}catch(e){return a.errorObject.e=e,a.errorObject}}function i(e){return o=e,r}var o,a=n(34);t.tryCatch=i},function(e,t){"use strict";t.errorObject={e:{}}},function(e,t){"use strict";var n=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=function(e){function t(t){e.call(this),this.errors=t;var n=Error.call(this,t?t.length+" errors occurred during unsubscription:\n  "+t.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"");this.name=n.name="UnsubscriptionError",this.stack=n.stack,this.message=n.message}return n(t,e),t}(Error);t.UnsubscriptionError=r},function(e,t){"use strict";t.empty={closed:!0,next:function(e){},error:function(e){throw e},complete:function(){}}},function(e,t,n){"use strict";var r=n(26),i=r.root.Symbol;t.rxSubscriber="function"==typeof i&&"function"==typeof i.for?i.for("rxSubscriber"):"@@rxSubscriber",t.$$rxSubscriber=t.rxSubscriber},function(e,t,n){"use strict";function r(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}var i=n(26);t.getSymbolObservable=r,t.observable=r(i.root),t.$$observable=t.observable},function(e,t,n){"use strict";var r=n(25),i=n(40);r.Observable.prototype.publishReplay=i.publishReplay},function(e,t,n){"use strict";function r(e,t,n){return void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===t&&(t=Number.POSITIVE_INFINITY),o.multicast.call(this,new i.ReplaySubject(e,t,n))}var i=n(41),o=n(54);t.publishReplay=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(42),o=n(45),a=n(30),s=n(52),u=n(43),c=n(44),l=function(e){function t(t,n,r){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY),e.call(this),this.scheduler=r,this._events=[],this._bufferSize=t<1?1:t,this._windowTime=n<1?1:n}return r(t,e),t.prototype.next=function(t){var n=this._getNow();this._events.push(new f(n,t)),this._trimBufferThenGetEvents(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t,n=this._trimBufferThenGetEvents(),r=this.scheduler;if(this.closed)throw new u.ObjectUnsubscribedError;this.hasError?t=a.Subscription.EMPTY:this.isStopped?t=a.Subscription.EMPTY:(this.observers.push(e),t=new c.SubjectSubscription(this,e)),r&&e.add(e=new s.ObserveOnSubscriber(e,r));for(var i=n.length,o=0;o<i&&!e.closed;o++)e.next(n[o].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},t.prototype._getNow=function(){return(this.scheduler||o.queue).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(e-r[o].time<n);)o++;return i>t&&(o=Math.max(o,i-t)),o>0&&r.splice(0,o),r},t}(i.Subject);t.ReplaySubject=l;var f=function(){function e(e,t){this.time=e,this.value=t}return e}()},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(25),o=n(28),a=n(30),s=n(43),u=n(44),c=n(37),l=function(e){function t(t){e.call(this,t),this.destination=t}return r(t,e),t}(o.Subscriber);t.SubjectSubscriber=l;var f=function(e){function t(){e.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return r(t,e),t.prototype[c.rxSubscriber]=function(){return new l(this)},t.prototype.lift=function(e){var t=new d(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)},t.prototype.error=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new s.ObjectUnsubscribedError;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new s.ObjectUnsubscribedError;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;return this.hasError?(e.error(this.thrownError),a.Subscription.EMPTY):this.isStopped?(e.complete(),a.Subscription.EMPTY):(this.observers.push(e),new u.SubjectSubscription(this,e))},t.prototype.asObservable=function(){var e=new i.Observable;return e.source=this,e},t.create=function(e,t){return new d(e,t)},t}(i.Observable);t.Subject=f;var d=function(e){function t(t,n){e.call(this),this.destination=t,this.source=n}return r(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){var t=this.source;return t?this.source.subscribe(e):a.Subscription.EMPTY},t}(f);t.AnonymousSubject=d},function(e,t){"use strict";var n=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=function(e){function t(){var t=e.call(this,"object unsubscribed");this.name=t.name="ObjectUnsubscribedError",this.stack=t.stack,this.message=t.message}return n(t,e),t}(Error);t.ObjectUnsubscribedError=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(30),o=function(e){function t(t,n){e.call(this),this.subject=t,this.subscriber=n,this.closed=!1}return r(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);n!==-1&&t.splice(n,1)}}},t}(i.Subscription);t.SubjectSubscription=o},function(e,t,n){"use strict";var r=n(46),i=n(49);t.queue=new i.QueueScheduler(r.QueueAction)},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(47),o=function(e){function t(t,n){e.call(this,t,n),this.scheduler=t,this.work=n}return r(t,e),t.prototype.schedule=function(t,n){return void 0===n&&(n=0),n>0?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,n){return n>0||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?e.prototype.requestAsyncId.call(this,t,n,r):t.flush(this)},t}(i.AsyncAction);t.QueueAction=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(26),o=n(48),a=function(e){function t(t,n){e.call(this,t,n),this.scheduler=t,this.work=n,this.pending=!1}return r(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e,this.pending=!0;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),i.root.setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){return void 0===n&&(n=0),null!==n&&this.delay===n&&this.pending===!1?t:i.root.clearInterval(t)&&void 0||void 0},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);return n?n:void(this.pending===!1&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null)))},t.prototype._execute=function(e,t){var n=!1,r=void 0;try{this.work(e)}catch(e){n=!0,r=!!e&&e||new Error(e)}if(n)return this.unsubscribe(),r},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,r!==-1&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(o.Action);t.AsyncAction=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(30),o=function(e){function t(t,n){e.call(this)}return r(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(i.Subscription);t.Action=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(50),o=function(e){function t(){e.apply(this,arguments)}return r(t,e),t}(i.AsyncScheduler);t.QueueScheduler=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(51),o=function(e){function t(){e.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return r(t,e),t.prototype.flush=function(e){var t=this.actions;if(this.active)return void t.push(e);var n;this.active=!0;do if(n=e.execute(e.state,e.delay))break;while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}},t}(i.Scheduler);t.AsyncScheduler=o},function(e,t){"use strict";var n=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=Date.now?Date.now:function(){return+new Date},e}();t.Scheduler=n},function(e,t,n){"use strict";function r(e,t){return void 0===t&&(t=0),this.lift(new s(e,t))}var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(28),a=n(53);t.observeOn=r;var s=function(){function e(e,t){void 0===t&&(t=0),this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.scheduler,this.delay))},e}();t.ObserveOnOperator=s;var u=function(e){function t(t,n,r){void 0===r&&(r=0),e.call(this,t),this.scheduler=n,this.delay=r}return i(t,e),t.dispatch=function(e){var t=e.notification,n=e.destination;t.observe(n),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.add(this.scheduler.schedule(t.dispatch,this.delay,new c(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(a.Notification.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(a.Notification.createError(e))},t.prototype._complete=function(){this.scheduleMessage(a.Notification.createComplete())},t}(o.Subscriber);t.ObserveOnSubscriber=u;var c=function(){function e(e,t){this.notification=e,this.destination=t}return e}();t.ObserveOnMessage=c},function(e,t,n){"use strict";var r=n(25),i=function(){function e(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,n){var r=this.kind;switch(r){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}},e.prototype.accept=function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)},e.prototype.toObservable=function(){var e=this.kind;switch(e){case"N":return r.Observable.of(this.value);case"E":return r.Observable.throw(this.error);case"C":return r.Observable.empty()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return"undefined"!=typeof t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",(void 0),t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",(void 0)),e}();t.Notification=i},function(e,t,n){"use strict";function r(e,t){var n;if(n="function"==typeof e?e:function(){return e},"function"==typeof t)return this.lift(new o(n,t));var r=Object.create(this,i.connectableObservableDescriptor);return r.source=this,r.subjectFactory=n,r}var i=n(55);t.multicast=r;var o=function(){function e(e,t){this.subjectFactory=e,this.selector=t}return e.prototype.call=function(e,t){var n=this.selector,r=this.subjectFactory(),i=n(r).subscribe(e);return i.add(t.subscribe(r)),i},e}();t.MulticastOperator=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(42),o=n(25),a=n(28),s=n(30),u=function(e){function t(t,n){e.call(this),this.source=t,this.subjectFactory=n,this._refCount=0,this._isComplete=!1}return r(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,e=this._connection=new s.Subscription,e.add(this.source.subscribe(new l(this.getSubject(),this))),e.closed?(this._connection=null,e=s.Subscription.EMPTY):this._connection=e),e},t.prototype.refCount=function(){return this.lift(new f(this))},t}(o.Observable);t.ConnectableObservable=u;var c=u.prototype;t.connectableObservableDescriptor={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:c._subscribe},_isComplete:{value:c._isComplete,writable:!0},getSubject:{value:c.getSubject},connect:{value:c.connect},refCount:{value:c.refCount}};var l=function(e){function t(t,n){e.call(this,t),this.connectable=n}return r(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(i.SubjectSubscriber),f=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var n=this.connectable;n._refCount++;var r=new d(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i},e}(),d=function(e){function t(t,n){e.call(this,t),this.connectable=n}return r(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(!e)return void(this.connection=null);this.connectable=null;var t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);var n=this.connection,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()},t}(a.Subscriber)},function(e,t,n){"use strict";var r=n(25),i=n(57);r.Observable.of=i.of},function(e,t,n){"use strict";var r=n(58);t.of=r.ArrayObservable.of},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(25),o=n(59),a=n(60),s=n(61),u=function(e){function t(t,n){e.call(this),this.array=t,this.scheduler=n,n||1!==t.length||(this._isScalar=!0,this.value=t[0])}return r(t,e),t.create=function(e,n){return new t(e,n)},t.of=function(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];var r=e[e.length-1];s.isScheduler(r)?e.pop():r=null;var i=e.length;return i>1?new t(e,r):1===i?new o.ScalarObservable(e[0],r):new a.EmptyObservable(r)},t.dispatch=function(e){var t=e.array,n=e.index,r=e.count,i=e.subscriber;return n>=r?void i.complete():(i.next(t[n]),void(i.closed||(e.index=n+1,this.schedule(e))))},t.prototype._subscribe=function(e){var n=0,r=this.array,i=r.length,o=this.scheduler;if(o)return o.schedule(t.dispatch,0,{array:r,index:n,count:i,subscriber:e});for(var a=0;a<i&&!e.closed;a++)e.next(r[a]);e.complete()},t}(i.Observable);t.ArrayObservable=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(25),o=function(e){function t(t,n){e.call(this),this.value=t,this.scheduler=n,this._isScalar=!0,n&&(this._isScalar=!1)}return r(t,e),t.create=function(e,n){return new t(e,n)},t.dispatch=function(e){var t=e.done,n=e.value,r=e.subscriber;return t?void r.complete():(r.next(n),void(r.closed||(e.done=!0,this.schedule(e))))},t.prototype._subscribe=function(e){var n=this.value,r=this.scheduler;return r?r.schedule(t.dispatch,0,{done:!1,value:n,subscriber:e}):(e.next(n),void(e.closed||e.complete()))},t}(i.Observable);t.ScalarObservable=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(25),o=function(e){function t(t){e.call(this),this.scheduler=t}return r(t,e),t.create=function(e){return new t(e)},t.dispatch=function(e){var t=e.subscriber;t.complete()},t.prototype._subscribe=function(e){var n=this.scheduler;return n?n.schedule(t.dispatch,0,{subscriber:e}):void e.complete()},t}(i.Observable);t.EmptyObservable=o},function(e,t){"use strict";function n(e){return e&&"function"==typeof e.schedule}t.isScheduler=n},function(e,t,n){"use strict";var r=n(25),i=n(63);r.Observable.prototype.startWith=i.startWith},function(e,t,n){"use strict";function r(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=e[e.length-1];u.isScheduler(n)?e.pop():n=null;var r=e.length;return 1===r?s.concatStatic(new o.ScalarObservable(e[0],n),this):r>1?s.concatStatic(new i.ArrayObservable(e,n),this):s.concatStatic(new a.EmptyObservable(n),this)}var i=n(58),o=n(59),a=n(60),s=n(64),u=n(61);t.startWith=r},function(e,t,n){"use strict";function r(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return this.lift.call(i.apply(void 0,[this].concat(e)))}function i(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=null,r=e;return a.isScheduler(r[e.length-1])&&(n=r.pop()),null===n&&1===e.length&&e[0]instanceof o.Observable?e[0]:new s.ArrayObservable(e,n).lift(new u.MergeAllOperator(1))}var o=n(25),a=n(61),s=n(58),u=n(65);t.concat=r,t.concatStatic=i},function(e,t,n){"use strict";function r(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),this.lift(new s(e))}var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(66),a=n(67);t.mergeAll=r;var s=function(){function e(e){this.concurrent=e}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.concurrent))},e}();t.MergeAllOperator=s;var u=function(e){function t(t,n){e.call(this,t),this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0}return i(t,e),t.prototype._next=function(e){this.active<this.concurrent?(this.active++,this.add(a.subscribeToResult(this,e))):this.buffer.push(e)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(o.OuterSubscriber);t.MergeAllSubscriber=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(28),o=function(e){function t(){e.apply(this,arguments)}return r(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(i.Subscriber);t.OuterSubscriber=o},function(e,t,n){"use strict";function r(e,t,n,r){var d=new l.InnerSubscriber(e,n,r);if(d.closed)return null;if(t instanceof u.Observable)return t._isScalar?(d.next(t.value),d.complete(),null):t.subscribe(d);if(o.isArrayLike(t)){for(var h=0,p=t.length;h<p&&!d.closed;h++)d.next(t[h]);d.closed||d.complete()}else{if(a.isPromise(t))return t.then(function(e){d.closed||(d.next(e),d.complete())},function(e){return d.error(e)}).then(null,function(e){i.root.setTimeout(function(){throw e})}),d;if(t&&"function"==typeof t[c.iterator])for(var v=t[c.iterator]();;){var m=v.next();if(m.done){d.complete();break}if(d.next(m.value),d.closed)break}else if(t&&"function"==typeof t[f.observable]){var y=t[f.observable]();if("function"==typeof y.subscribe)return y.subscribe(new l.InnerSubscriber(e,n,r));d.error(new TypeError("Provided object does not correctly implement Symbol.observable"))}else{var b=s.isObject(t)?"an invalid object":"'"+t+"'",g="You provided "+b+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";d.error(new TypeError(g))}}return null}var i=n(26),o=n(68),a=n(69),s=n(32),u=n(25),c=n(70),l=n(71),f=n(38);t.subscribeToResult=r},function(e,t){"use strict";t.isArrayLike=function(e){return e&&"number"==typeof e.length}},function(e,t){"use strict";function n(e){return e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}t.isPromise=n},function(e,t,n){"use strict";function r(e){var t=e.Symbol;if("function"==typeof t)return t.iterator||(t.iterator=t("iterator polyfill")),t.iterator;var n=e.Set;if(n&&"function"==typeof(new n)["@@iterator"])return"@@iterator";var r=e.Map;if(r)for(var i=Object.getOwnPropertyNames(r.prototype),o=0;o<i.length;++o){var a=i[o];if("entries"!==a&&"size"!==a&&r.prototype[a]===r.prototype.entries)return a}return"@@iterator"}var i=n(26);t.symbolIteratorPonyfill=r,t.iterator=r(i.root),t.$$iterator=t.iterator},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(28),o=function(e){function t(t,n,r){e.call(this),this.parent=t,this.outerValue=n,this.outerIndex=r,this.index=0}return r(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(i.Subscriber);t.InnerSubscriber=o},function(e,t,n){"use strict";var r=n(25),i=n(73);r.Observable.prototype.filter=i.filter},function(e,t,n){"use strict";function r(e,t){return this.lift(new a(e,t))}var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(28);t.filter=r;var a=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.predicate,this.thisArg))},e}(),s=function(e){function t(t,n,r){e.call(this,t),this.predicate=n,this.thisArg=r,this.count=0}return i(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},t}(o.Subscriber)},function(e,t,n){"use strict";var r=n(25),i=n(75);r.Observable.prototype.map=i.map},function(e,t,n){"use strict";function r(e,t){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return this.lift(new a(e,t))}var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(28);t.map=r;var a=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.project,this.thisArg))},e}();t.MapOperator=a;var s=function(e){function t(t,n,r){e.call(this,t),this.project=n,this.count=0,this.thisArg=r||this}return i(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(o.Subscriber)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return e.on("upload-start",function(e){return u.default.publish(f+"new",e)}),e.on("upload-preview-update",function(e){return u.default.publish(f+"preview",e)}),e.on("upload-status-update",function(e){return u.default.publish(f+"progress",e)}),e.on("upload-error",function(e){return u.default.publish(f+"error",e)}),e.on("upload-processing",function(e){return u.default.publish(f+"done",e)}),e.on("upload-end",function(e){return u.default.publish(f+"done",e)}),u.default.subscribe(f+"cancel",function(t){e.cancel&&e.cancel(t)}),e}function o(e){return u.default.subscribe("issue/changed",function(t){l.default.getUploadParameters().then(e.setUploadParams.bind(e))}),e}function a(e){return u.default.subscribe("project/changed",function(t){l.default.getTemporaryAttachmentUploadParameters(t).then(e.setUploadParams.bind(e))}),e}Object.defineProperty(t,"__esModule",{value:!0}),t.connect=i,t.connectToIssueChanges=o,t.connectToProjectChanges=a;var s=n(10),u=r(s),c=n(3),l=r(c),f="upload/"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(2),a=n(16),s=r(a),u=n(10),c=r(u),l=n(20),f=r(l);t.default=function(e,t,n,r,a){var u="create-issue/drop-zone",l=(0,o.temporaryAttachmentDropzone)(e,r).then(function(e){return e.on("drop",function(){s.default.triggerAttachRequested(u)}),e}),d=!1;return{activate:function(){return l.then(function(r){d||(d=!0,r.activate(),c.default.publish("upload/switch-context",{name:u,uploadSettings:i({},{projectId:e,formToken:t,panelNode:n},a)}),c.default.publish("project/changed",e))})},deactivate:function(){return l.then(function(e){d&&(e.deactivate(),d=!1)})},drop:function(){return l.catch(function(e){s.default.triggerInitialisationException((0,f.default)(e)),c.default.publish("media/error","jira.attachments.setup.failed.description")})}}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(79),o=r(i),a=n(20),s=r(a),u=n(16),c=r(u),l=n(10),f=r(l),d=n(82),h=r(d),p="jira.issue.media-picker.show",v={
blockWikiEditorMarkupInsert:!1},m=void 0,y=function(e){var t="view-issue/"+e;return(0,o.default)().then(function(e){m=e}).catch(function(e){c.default.triggerInitialisationException((0,s.default)(e))}),function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v;n&&n.preventDefault(),h.default.start({key:p,isInitial:!1,threshold:250}),c.default.triggerAttachRequested(e),m?m.show().then(function(){return h.default.end({key:p})}).then(function(){return f.default.publish("upload/switch-context",{name:t,uploadSettings:r})}).catch(function(){f.default.publish("media/error","jira.attachments.setup.failed.description")}):c.default.triggerUploadRequestedWhenNotInitialised()}};t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=n(80),a=r(o),s=n(81),u=r(s),c=n(7),l=r(c),f=function(){return u.default.then(function(){return new a.default(i.popup,i.browser)})};t.default=l.default.memoize(f)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(16),u=r(s),c=n(20),l=r(c),f=n(3),d=r(f),h=function(){function e(t,n){var r=this;i(this,e);var o=d.default.userAuthProvider;o().then(function(e){e?r.componentPromise=t(o).then(function(e){return[e,"popup"]}).catch(function(e){return e.logged||u.default.triggerGenericPopupInitialisationError((0,l.default)(e)),n().then(function(e){return[e,"browser"]})}).then(r.handleComponentInitSuccess.bind(r)).catch(r.handleComponentInitFailure.bind(r)):r.componentPromise=r.initializeBrowser.call(r,n)})}return a(e,[{key:"initializeBrowser",value:function(e){return e().then(function(e){return[e,"browser"]}).then(this.handleComponentInitSuccess.bind(this)).catch(this.handleComponentInitFailure.bind(this))}},{key:"handleComponentInitSuccess",value:function(e){var t=o(e,2),n=t[0],r=t[1];return this.mediaComponent=n,this.componentType=r,[n,r]}},{key:"handleComponentInitFailure",value:function(e){u.default.triggerInitialisationException((0,l.default)(e)),this.componentType="none"}},{key:"show",value:function(){var e=this;switch(this.componentType){case"browser":return this.showBrowser();case"popup":return this.showPopup();case"none":return Promise.reject("Component initialisation error");default:return d.default.userAuthProvider().then(function(){return e.componentPromise}).then(function(){return"popup"===e.componentType?e.showPopup():(u.default.triggerBrowserRequestedWhenNotInitialised(),Promise.resolve())})}}},{key:"showPopup",value:function(){return this.mediaComponent.show().then(function(){return u.default.triggerPopupShown()}).catch(function(e){return u.default.triggerPopupFailedToShow((0,l.default)(e)),Promise.reject(e)})}},{key:"showBrowser",value:function(){var e=this;return new Promise(function(t,n){try{e.mediaComponent.browse(),u.default.triggerAttachFileBrowserShown(),t()}catch(e){u.default.triggerAttachFileBrowserFailedToShow((0,l.default)(e)),n(e)}})}}]),e}();t.default=h},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=new Promise(function(e,t){"undefined"==typeof document?t("Document is not available"):/^loaded|^interactive|^complete/.test(document.readyState)?e():document.addEventListener("DOMContentLoaded",function(t){return e()})})},function(e,t){e.exports=require("internal/browser-metrics")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return _||(0,u.default)(e).then(function(e){_=e}).catch(function(e){d.default.triggerInitialisationException((0,l.default)(e))}),p.default.publish("project/changed",e),function(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g;return r&&r.preventDefault(),m.default.start({key:y,isInitial:!1,threshold:250}),d.default.triggerAttachRequested(b),_?(i=a({},i,{projectId:e,formToken:t,panelNode:n}),p.default.publish("project/changed",e),_.show().then(function(){return m.default.end({key:y})}).then(function(){return p.default.publish("upload/switch-context",{name:b,uploadSettings:i})}).catch(function(){p.default.publish("media/error","jira.attachments.setup.failed.description")})):void d.default.triggerUploadRequestedWhenNotInitialised()}}function o(){_=null}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=i,t.resetMediaComponent=o;var s=n(84),u=r(s),c=n(20),l=r(c),f=n(16),d=r(f),h=n(10),p=r(h),v=n(82),m=r(v),y="jira.create.issue.media-picker.show",b="create-issue/link",g={blockWikiEditorMarkupInsert:!1},_=void 0},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=n(80),a=r(o),s=n(81),u=r(s),c=n(7),l=r(c),f=function(e){var t=(0,i.temporaryAttachmentPopup)(e),n=(0,i.temporaryAttachmentBrowser)(e);return u.default.then(function(){return new a.default(t,n)})};t.default=l.default.memoize(f)},function(e,t){e.exports=require("dndattachment/integration-register")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=n(3),a=r(o),s=n(87),u=r(s),c=n(16),l=r(c),f=n(20),d=r(f),h=n(88),p=r(h);t.default=function(e,t,n,r){var o="view-issue/attach-screenshot",s=p.default.Deferred();(0,i.binary)(e).then(function(t){return t.on("upload-start",function(e){s.notify("init"),l.default.triggerUploadStarted(e.file.id,e.file.size)}),t.on("upload-status-update",function(e){s.notify({loaded:e.progress.absolute,total:e.progress.max})}),t.on("upload-end",function(t){return a.default.createTemporaryAttachment(e,t.file.publicId,r).then(function(e){s.resolve({id:e.attachmentId})})}),t.on("upload-processing",function(e){s.notify({loaded:e.absolute,total:e.max})}),t.on("upload-error",function(e){s.reject(null,e.name,e.description,{}),l.default.triggerUploadError(e.name,e.fileId)}),t}).then(function(e){return l.default.triggerAttachRequested(o),(0,u.default)(t).then(function(t){e.upload(t,n)})}).catch(function(e){return l.default.triggerInitialisationException((0,d.default)(e))});return s}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return new Promise(function(t,n){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(){n(this)},r.readAsDataURL(e)})}},function(e,t){e.exports=require("jquery")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(2),a=n(87),s=r(a),u=n(10),c=r(u),l=n(16),f=r(l),d=n(20),h=r(d),p={blockWikiEditorMarkupInsert:!0},v=function(e,t,n){var r="create-issue/attach-screenshot",a=(0,o.connectedTemporaryBinary)(e).catch(function(e){f.default.triggerInitialisationException((0,h.default)(e))});return function(o){return a.then(function(a){return(0,s.default)(o).then(function(s){f.default.triggerAttachRequested(r),c.default.publish("project/changed",e),c.default.publish("upload/switch-context",{name:r,uploadSettings:i({},{projectId:e,formToken:t,panelNode:n},p)}),a.upload(s,o.name)})}).catch(function(){c.default.publish("media/error","jira.attachments.setup.failed.description")})}};t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(10),a=r(o),s=n(91),u=r(s),c=n(108),l=r(c);n(23),t.default=function(){a.default.subscribe("upload/new",function(e){var t=e.file;u.default.startUpload(t)}),a.default.subscribe("upload/preview",function(e){var t=e.file,n=e.preview,r=l.default.decodeBase64DataUri(n.src),i=new Blob([r],{type:t.type});i.name=t.name,u.default.updatePreview(t,i)}),a.default.subscribe("upload/progress",function(e){var t=e.file,n=e.progress;u.default.progress(t,n)}),a.default.subscribe("upload/error",function(e){var t=e.error;t.isMediaError=!0,u.default.error(t)}),a.default.subscribe("upload/done",function(e){var t=e.file.publicId?e.file:i({},e.file,{publicId:e.public.id});u.default.done(t)}),a.default.subscribe("media/error",u.default.globalError)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=n(92),s=r(a),u=n(98),c=r(u),l=n(100),f=r(l),d=n(101),h=r(d),p=n(11),v=r(p),m=n(9),y=r(m),b=n(3),g=r(b),_=n(103),w=r(_),x=n(10),k=r(x),A=n(104),S=r(A),P=n(16),O=r(P),I=n(106),E=r(I),j=n(107),T=r(j),C=new Map,M=function(e){return e&&0===e.indexOf("create-issue")};t.default={startUpload:function(e){var t=y.default.getUploadContextSettings()||{blockWikiEditorMarkupInsert:!1};O.default.triggerUploadStarted(e.id,e.size);var n=this._createUpload(e);C.set(e.id,n),t.onFileUploadStarted&&t.onFileUploadStarted.call(e,e),n.then(function(e){var t=e.view,n=e.uploadContext,r=e.uploadSettings;M(n)?f.default.insertUpload(r.panelNode,t.$node):c.default.insertUpload(t.$node)}),this._validate(e)},updatePreview:function(e,t){t&&C.get(e.id)&&C.get(e.id).then(function(e){e.preview=t,e.view.loadThumbnail(t)})},progress:function(e,t){C.get(e.id)&&C.get(e.id).then(function(e){var n=e.view;return n.progress(t.portion)})},error:function(e){e.fileId&&C.get(e.fileId)&&C.get(e.fileId).then(function(t){var n=t.view,r=t.file,i=t.uploadContext,o=t.uploadSettings;e.logged||O.default.triggerUploadError(e.description,e.fileId),e.isMediaError&&(e.description="jira.attachments.not.uploaded.description"),n.fail(e),M(i)||c.default.uploadError(r.name,e.description,function(){n.destroy(),C.delete(r.id)}),o.onFileUploadFinished&&o.onFileUploadFinished.call(r,r)})},globalError:function(e){c.default.globalError(e)},done:function(e){var t=this;O.default.triggerFileUploadFinished(e.id),C.get(e.id).then(function(n){var r=n.view,i=n.uploadContext,o=n.uploadSettings;return r.done(),M(i)?t.createTemporaryAttachment(e,o):t.createAttachment(o.issueId,e)})},createTemporaryAttachment:function(e,t){var n=this;Promise.all([t.projectId,t.formToken]).then(function(t){var n=o(t,2),r=n[0],i=n[1];if(!r||!i)throw new Error("Missing form data associated with upload");return g.default.createTemporaryAttachment(r,e.publicId,i)}).then(this.temporaryAttachmentCreated.bind(this,e)).catch(function(t){var r=t.message;O.default.triggerCantCreateTemporaryAttachmentInJIRA(r,e.id),n.error({fileId:e.id,description:r||"Couldn't create attachment"})})},createAttachment:function(e,t){var n=this;g.default.createAttachment(e,t.publicId).then(this.attachmentCreated.bind(this,t)).catch(function(e){var r=e.message;O.default.triggerCantCreateAttachmentInJIRA(r,t.id),n.error({fileId:t.id,description:r||"Couldn't create attachment"})})},attachmentCreated:function(e,t){var n=this;C.get(e.id).then(function(r){var i=r.view,o=r.wikiFieldsContext,a=r.issueLinkHTML,s=r.uploadSettings;O.default.triggerAttachmentCreatedInJIRA(e.id),n.updateViewWithCreatedAttachment(e,t,i,s.issueId,o),c.default.notifyUserOfCreatedAttachment(e,a),C.delete(e.id)})},temporaryAttachmentCreated:function(e,t){var n=this;C.get(e.id).then(function(e){var r=e.view,i=e.wikiFieldsContext,o=e.uploadSettings,a=e.preview,s=e.file;O.default.triggerTemporaryAttachmentCreatedInJIRA(s.id),n.addAttachmentToDndStore(t.attachmentId,s,a),r.attachmentCreated(t.attachmentId),i.isWikiFieldFocused&&S.default.insertWikiMarkup(i.focusedField,s.name),o.onFileUploadFinished&&o.onFileUploadFinished.call(s,s),C.delete(s.id)})},addAttachmentToDndStore:function(e,t,n){return T.default.putAttachment(e,n?n:t)},updateViewWithCreatedAttachment:function(e,t,n,r,i){var o=h.default.create(e,t,{viewType:c.default.getViewType(),issueId:r});n.$node.replaceWith(o),i.isWikiFieldFocused&&S.default.insertWikiMarkup(i.focusedField,e.name)},cancel:function(e){C.has(e.id)&&C.get(e.id).then(function(t){var n=t.uploadSettings;O.default.triggerUploadCancelled(e.id),k.default.publish("upload/cancel",e.id),C.delete(e.id),n.onFileUploadFinished&&onFileUploadFinished.call(e,e)})},_createUpload:function(e){var t=this,n=y.default.getUploadContextName(),r=y.default.getUploadContextSettings()||{blockWikiEditorMarkupInsert:!1},o=void 0;return o=M(n)?Promise.resolve(r):v.default.getIssueId().then(function(e){return i({},r,{issueId:e})}),o.then(function(r){var i=S.default.getWikiFieldsContextInformation(),o=void 0;i&&i.isWikiFieldFocused&&r.blockWikiEditorMarkupInsert&&(i.isWikiFieldFocused=!1),o=M(n)?s.default.createIssue(e,{},function(){t.cancel(e)}):s.default.viewIssue(e,{viewType:c.default.getViewType()},function(){t.cancel(e)});var a=v.default.getIssuePermlink(),u=v.default.getIssueKey(),l=E.default.getHtml(u,a);return{view:o,file:e,wikiFieldsContext:i,issueLinkHTML:l,uploadContext:n,uploadSettings:r}})},_validate:function(e){var t=w.default.validateFile(e),n=t.valid,r=t.message;n||(O.default.triggerUploadValidationFailed(r,e.id),this.error({fileId:e.id,description:r,logged:!0}),k.default.publish("upload/cancel",e.id))}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(93),o=r(i),a=n(97),s=r(a);t.default={viewIssue:function(e,t,n){return new o.default(e,t,n)},createIssue:function(e,t,n){return new s.default(e,t,n)}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(94),s=r(a),u=n(95),c=r(u),l=n(96),f=r(l),d=n(88),h=r(d),p=function(){function e(t,n,r){i(this,e),this.file=t,this.context=n,this.onCancel=r,this.$node=(0,h.default)('<div class="attachments-upload-progress-bar"/>'),this.$node.data("viewMode",this.context.viewType),this.render()}return o(e,[{key:"render",value:function(){var e=s.default.AttachmentsUploadProgressBar({isImageType:"gallery"===this.context.viewType});"list"===this.context.viewType&&this.$node.addClass("attachment-content"),this.$node.html(e),this.renderFileProperties()}},{key:"renderFileProperties",value:function(){var e=this;"gallery"==this.context.viewType?(0,h.default)(c.default.renderThumbnailIcon({mimetype:this.file.type})).appendTo(this.thumbnailNode):(0,h.default)(c.default.renderAttachmentIcon({mimetype:this.file.type})).appendTo(this.thumbnailNode),this.$node.find(".upload-progress-bar__file-name").text(this.file.name),this.$node.find(".upload-progress-bar__upload-control span").on("click",function(){e.onCancel(),e.destroy()}),this.file.size>=0&&this.$node.find(".upload-progress-bar__file-size").html((0,f.default)(this.file.size))}},{key:"loadThumbnail",value:function(e){if("gallery"===this.context.viewType){var t=URL.createObjectURL(e);this.thumbnailNode.addClass("upload-progress-bar__thumbnail_image"),this.thumbnailNode.find(".attachment-thumbnail-icon").detach(),(0,h.default)("<img/>").attr("src",t).appendTo(this.thumbnailNode)}}},{key:"progress",value:function(e){this.progressPortion=e,this.progressNode.toggleClass("UploadProgressBar_progressUnknown",this.progressPortion===!1),this.progressPortion>=0&&this.progressNode.find(".upload-progress-bar__bar").css("width",100*this.progressPortion+"%")}},{key:"done",value:function(){this.$node.find(".upload-progress-bar__upload-control").hide(),this.$node.addClass("upload-progress-bar__upload-finished")}},{key:"fail",value:function(e){this.$node.addClass("upload-progress-bar__upload-error"),this.$node.removeClass("upload-progress-bar__upload-finished"),this.progressNode.find(".upload-progress-bar__bar").css("width","100%")}},{key:"destroy",value:function(){this.$node.remove()}},{key:"thumbnailNode",get:function(){return this.$node.find(".upload-progress-bar__thumbnail")}},{key:"progressNode",get:function(){return this.$node.find(".upload-progress-bar__progress-bar")}}]),e}();t.default=p},function(e,t){e.exports=JIRA.Templates.DnDAttachmentPlugin},function(e,t){e.exports=JIRA.Templates.ViewIssue},function(e,t){"use strict";function n(e){var t=e/a;return t.toFixed(2)+u}function r(e){var t=Math.round(e/o);return t+s}function i(e){var t=e/o;return t.toFixed(1)+s}Object.defineProperty(t,"__esModule",{value:!0});var o=1024,a=o*o,s=" kB",u=" MB";t.default=function(e){return e>a?n(e):e>o?r(e):i(e)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(94),s=r(a),u=n(95),c=r(u),l=n(96),f=r(l),d=n(88),h=r(d),p=["aui-iconfont-close-dialog","aui-iconfont-success","aui-iconfont-error"],v=function(){function e(t,n,r){i(this,e),this.file=t,this.context=n,this.onCancel=r,this.$node=(0,h.default)('<div class="upload-progress-bar"/>'),this.render()}return o(e,[{key:"render",value:function(){var e=this,t=s.default.UploadProgressBar({isImageType:!0});this.$node.html(t),this.$node.find(".upload-progress-bar__file-name").text(this.file.name),this.$node.find(".upload-progress-bar__control button").on("click",function(){e.onCancel(),e.destroy()}),this.file.size>=0&&this.$node.find(".upload-progress-bar__file-size").html((0,f.default)(this.file.size)),(0,h.default)(c.default.renderThumbnailIcon({mimetype:this.file.type})).appendTo(this.thumbnailNode),this.thumbnailNode.removeClass("upload-progress-bar__thumbnail_image").addClass("upload-progress-bar__thumbnail_icon").addClass("upload-progress-bar__thumbnail_icon_aui")}},{key:"loadThumbnail",value:function(e){var t=URL.createObjectURL(e);this.thumbnailNode.addClass("upload-progress-bar__thumbnail_image"),this.thumbnailNode.find(".attachment-thumbnail-icon").detach(),(0,h.default)("<img/>").attr("src",t).appendTo(this.thumbnailNode)}},{key:"progress",value:function(e){this.progressPortion=e,this.progressNode.toggleClass("UploadProgressBar_progressUnknown",this.progressPortion===!1),this.progressPortion>=0&&this.progressNode.find(".upload-progress-bar__bar").css("width",100*this.progressPortion+"%")}},{key:"done",value:function(){this.setIcon("aui-iconfont-success"),this.progress(1)}},{key:"attachmentCreated",value:function(e){this.$checkbox=(0,h.default)('<input type="checkbox" name="filetoconvert"/>').addClass("upload-progress-bar__checkbox").attr("value",e).attr("id","filetoconvert-"+e).prop("checked",!0).insertBefore(this.$node),this.$node.addClass("upload-progress-bar__upload-ready").addClass("upload-progress-bar__upload-finished"),this.setIcon("aui-iconfont-close-dialog")}},{key:"fail",value:function(e){this.$node.addClass("upload-progress-bar__upload-error"),this.$node.removeClass("upload-progress-bar__upload-finished"),this.progressNode.find(".upload-progress-bar__bar").css("width","100%"),this.$node.find(".upload-progress-bar__error-message").text(e.description)}},{key:"destroy",value:function(){this.$checkbox&&this.$checkbox.prop("checked",!1).prop("value",null),this.$node.remove()}},{key:"setIcon",value:function(e){var t=this.$node.find(".upload-progress-bar__control button .aui-icon");p.forEach(function(n){t.toggleClass(n,n===e)})}},{key:"thumbnailNode",get:function(){return this.$node.find(".upload-progress-bar__thumbnail")}},{key:"progressNode",get:function(){return this.$node.find(".upload-progress-bar__progress-bar")}}]),e}();t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(88),o=r(i),a=n(99),s=r(a),u="#file_attachments, #attachment_thumbnails",c=function(){return(0,o.default)(u)};t.default={getViewType:function(){return"file_attachments"===c().attr("id")?"list":"gallery"},insertUpload:function(e){if(0===c().length)throw new Error("Attachment List is not present");c().prepend(e)},uploadError:function(e,t,n){var r=s.default.showErrorMsg(AJS.format("jira.attachments.not.uploaded.title",e),t);(0,o.default)(r).on("aui-flag-close",n)},globalError:function(e){return s.default.showErrorMsg("jira.attachments.setup.failed.title",e)},notifyUserOfCreatedAttachment:function(e,t){s.default.showSuccessMsg("",AJS.format("{0} was attached successfully to {1}.",e.name,t))}}},function(e,t){e.exports=require("jira/flag")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(88),o=r(i);t.default={insertUpload:function(e,t){var n=(0,o.default)(e);if(0===n.length)throw new Error("Cannot find temp attachment dropzone");n.after((0,o.default)(t))}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(95),o=r(i),a=n(8),s=r(a),u=n(96),c=r(u),l=n(102),f=n(88),d=r(f),h=function(){return"undefined"==typeof window?"":window&&window.location&&window.location.origin}(),p=(0,s.default)(),v=""+h+p,m=function(e){return encodeURIComponent(e)},y=function(e,t){var n=m(e.name);return"secure/attachment/"+t.attachmentId+"/"+n},b=function(e,t){var n=m(e.name);return(0,l.isImageType)(e)?v+"/secure/thumbnail/"+t.attachmentId+"/"+n+"?default=false":null},g=function(e,t){var n=m(e.name);return t.expandable?null:v+"/secure/thumbnail/"+t.attachmentId+"/"+n};t.default={create:function(e,t,n){var r=[{id:t.attachmentId,attachmentUrl:y(e,t),thumbnailUrl:b(e,t),jiraThumbnailUrl:g(e,t),fileName:e.name,mimeType:e.type,expandable:t.expandable,deletable:t.deletable,fileSize:(0,c.default)(e.size),createdIso8601:e.creationDate,createdDateTime:e.creationDate}];return(0,d.default)(o.default.renderAttachments({baseurl:p,fullBaseUrl:v,issue:{id:n.issueId},attachments:r,viewMode:n.viewType})).find(".attachment-content")}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=u.default.getThumbnailMimeType().split(",");return e&&e.type&&a.default.contains(t,e.type)}Object.defineProperty(t,"__esModule",{value:!0}),t.isImageType=void 0;var o=n(7),a=r(o),s=n(4),u=r(s);t.isImageType=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(96),o=r(i),a=n(4),s=r(a);t.default={validateFile:function(e){var t=this.fileNameContainsInvalidCharacter(e.name),n=void 0;return""!==t&&(n=AJS.format("{0} contains the invalid character \'\'{1}\'\'. Please rename the file and try again.",e.name,t)),this.sizeExceedsMaximum(e.size)&&(n="File exceeds maximum size limit set by the administrator ({0}).".replace("{0}",(0,o.default)(s.default.getMaxFileSize()))),n?{valid:!1,message:n}:{valid:!0}},fileNameContainsInvalidCharacter:function(e){return s.default.getInvalidChars().reduce(function(t,n){return e.indexOf(n)!==-1?n:t},"")},sizeExceedsMaximum:function(e){return e>s.default.getMaxFileSize()}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(88),o=r(i),a=n(105),s=r(a);t.default={getWikiFieldsContextInformation:function(){var e=(0,o.default)("textarea.wiki-textfield:visible:focus");return e?{isWikiFieldFocused:e.length>0,focusedField:e[0]}:void 0},insertWikiMarkup:function(e,t){var n=(0,o.default)(e);s.default.insertWikiMarkup(t,e,e.selectionStart,e.selectionStart),n.is(":focus")||n.focus()}}},function(e,t){e.exports=require("dndattachment/ctrlv/utility")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(88),o=r(i),a=n(94),s=r(a);t.default={getHtml:function(e,t){var n=(0,o.default)("#summary-val input"),r=(0,o.default)("#summary-val"),i=n&&n.attr("value")||r&&r.text();return s.default.SuccessMessageLink({issueLink:t,issueKey:e,issueSummary:i})}}},function(e,t){e.exports=require("dndattachment/TemporaryAttachments")},function(e,t){e.exports=require("dndattachment/ctrlv/base64decode")}]);;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:underscore', location = 'js/lib/underscore-adapter.js' */
define("workflow-designer/underscore",["underscore"],function(e){return e});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer-loader', location = 'js/require.js' */
define("workflow-designer/application-loader",["wrm/require","require"],function(r,e){return{load:function(i){return r(["wrc!com.atlassian.jira.plugins.jira-workflow-designer.workflow-designer"],function(){i&&i(e("workflow-designer/application"))})}}}),AJS.namespace("JIRA.WorkflowDesigner.require",null,require("workflow-designer/application-loader").load);;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer-templates', location = 'js/templates-amd.js' */
define("workflow-designer/templates",[],function(){return AJS.namespace("JIRA.WorkflowDesigner.Templates"),JIRA.WorkflowDesigner.Templates});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:dialog', location = 'js/util/DialogSizeCalculator.js' */
define("workflow-designer/dialog-size-calculator",["workflow-designer/underscore","jquery"],function(i,t){return{DISTANCE_FROM_EDGE:100,calculateDialogSize:function(t,e){return this.dialog=t,e=i.defaults(e||{},{windowHeight:this._getWindowHeight(),windowWidth:this._getWindowWidth(),dialogHeaderHeight:this._getDialogHeaderHeight(),dialogFooterHeight:this._getDialogFooterHeight()}),{height:this._calculateDialogHeight(e.windowHeight,e.dialogHeaderHeight,e.dialogFooterHeight),width:this._calculateDialogWidth(e.windowWidth)}},_calculateDialogHeight:function(i,t,e){return i-t-e-2*this.DISTANCE_FROM_EDGE},_calculateDialogWidth:function(i){return i-2*this.DISTANCE_FROM_EDGE},_getWindowHeight:function(){return t(window).height()},_getWindowWidth:function(){return t(window).width()},_getDialogHeaderHeight:function(){return this.dialog.$popupHeading.outerHeight()},_getDialogFooterHeight:function(){return this.dialog.$buttonContainer.outerHeight()}}}),AJS.namespace("JIRA.WorkflowDesigner.DialogSizeCalculator",null,require("workflow-designer/dialog-size-calculator"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:dialog', location = 'js/views/dialogs/Dialog.js' */
define("workflow-designer/dialog",["workflow-designer/dialog-size-calculator","jira/dialog/form-dialog","workflow-designer/application-loader","workflow-designer/templates","jira/dialog/dialog","workflow-designer/underscore","jquery"],function(i,o,t,e,n,s,r){return o.extend({init:function(i){s.bindAll(this,"_sizeAndPositionDialog"),i=s.defaults({},i,{content:this.createDialogContent,isDraft:!1,onContentRefresh:this._showWorkflowDesigner,widthClass:"large"}),this.options=i,this.sizeAndPositionDialog=s.throttle(this._sizeAndPositionDialog,100),this._super(i),this.onContentReady(this._addLabelHint)},createDialogContent:function(i){i(e.Dialog.workflowDialog({title:s.result(this.options,"workflowId")}))},show:function(){this._super.apply(this,arguments),r(window).on("resize",this.sizeAndPositionDialog)},hide:function(){this._designer&&this._designer.destroy(),this._super.apply(this,arguments),r(window).off("resize",this.sizeAndPositionDialog)},_sizeAndPositionDialog:function(){var o,t;n.current===this&&(t=i.calculateDialogSize(this),this.options.width=t.width,o=this.$popup.find(".form-body"),o.css({height:t.height,maxHeight:""}),this._positionInCenter())},_showWorkflowDesigner:function(){var i=this;this._sizeAndPositionDialog(),t.load(function(o){i.isCurrent()&&(i._designer=new o({actions:!1,element:i.get$popup().find(".form-body"),immutable:!0,draft:s.result(i.options,"isDraft"),layoutData:s.result(i.options,"layoutData"),workflowId:s.result(i.options,"workflowId"),currentStepId:s.result(i.options,"currentStepId")}))})},_addLabelHint:function(){this.getButtonsContainer().prepend(e.Dialog.labelMouseOverHint())}})}),AJS.namespace("JIRA.WorkflowDesigner.Dialog",null,require("workflow-designer/dialog"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:dialog', location = 'soy/Dialog.soy' */
// This file was automatically generated from Dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.WorkflowDesigner.Templates.Dialog.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.WorkflowDesigner == 'undefined') { JIRA.WorkflowDesigner = {}; }
if (typeof JIRA.WorkflowDesigner.Templates == 'undefined') { JIRA.WorkflowDesigner.Templates = {}; }
if (typeof JIRA.WorkflowDesigner.Templates.Dialog == 'undefined') { JIRA.WorkflowDesigner.Templates.Dialog = {}; }


JIRA.WorkflowDesigner.Templates.Dialog.workflowDialog = function(opt_data, opt_ignored) {
  return '<div class="aui-dialog-content"><h2 class="dialog-title">' + soy.$$escapeHtml(opt_data.title) + '</h2><div class="form-body"></div></div>';
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.Dialog.workflowDialog.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.Dialog.workflowDialog';
}


JIRA.WorkflowDesigner.Templates.Dialog.labelMouseOverHint = function(opt_data, opt_ignored) {
  return '<div class="buttons-container-left"><small>' + soy.$$escapeHtml('Mouse over objects to see transition names.') + '</small></div>';
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.Dialog.labelMouseOverHint.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.Dialog.labelMouseOverHint';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer-browser-is-supported', location = 'js/browserIsSupported.js' */
define("workflow-designer/browser-support",["jira/util/navigator"],function(r){return{browserIsSupported:function(){return!(r.isIE()&&parseInt(r.majorVersion(),10)<10)}}}),AJS.namespace("JIRA.WorkflowDesigner.browserIsSupported",null,require("workflow-designer/browser-support").browserIsSupported);;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:view-issue-page-workflow-designer', location = 'js/views/ViewIssue.js' */
!function(){function e(){n=require("workflow-designer/io/workflow-data-reader"),i=require("workflow-designer/io/ajax/workflow-ajax-manager"),t=require("workflow-designer/messages")}function r(e,r){var o=parseUri(e).queryKey[r]||"";return decodeURIComponent(o.replace(/\+/g,"%20"))}function o(){var e;return s?c.Deferred().resolve(s).promise():(e=i.load(u),e.done(function(e,r){s=r}),e)}var n,i,t,a,s,l,u,f=require("workflow-designer/application-loader"),w=require("workflow-designer/dialog"),c=require("jquery"),d=require("jira/skate");l=new w({content:function(r){var n=this;f.load().pipe(e).pipe(o).done(function(){n.createDialogContent(r)}).fail(function(e){e=e||"The Jira server could not be contacted. This may be a temporary glitch or the server may be down.",t.showErrorMessage(e),l.hide(!0)})},id:"view-workflow-dialog",workflowId:function(){return u},currentStepId:function(){return a},layoutData:function(){return n.read(s)}});var p=d.type?d.type.CLASSNAME:d.types.CLASS;d("jira-workflow-designer-link",{type:p,created:function(e){var r=this instanceof Element?this:e;r.classList.add("new-workflow-designer")},attached:function(e){var o=this instanceof Element?this:e,n=o.getAttribute("href");u=r(n,"workflowName"),a=parseInt(r(n,"stepId"),10),s=null},events:{click:function(e,r){l&&l.show(),r.preventDefault()}}})}(),AJS.namespace("JIRA.WorkflowDesigner.ViewIssue.replaceViewWorkflowLink",null,jQuery.noop),AJS.namespace("JIRA.WorkflowDesigner.Templates.ViewIssue.viewWorkflowLink",null,jQuery.noop);;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:events', location = 'util/Events.js' */
define("jira/components/util/events",["require"],function(e){"use strict";var n=e("jira/util/events/types"),t=e("jira/components/libs/underscore");return t.extend({},n,{LAYOUT_RENDERED:"layoutRendered"})}),AJS.namespace("JIRA.Events",null,require("jira/util/events/types"));
//# sourceMappingURL=Events-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/IssueEditor.js' */
define("jira/components/issueeditor",["require"],function(e){"use strict";var s=e("jira/components/libs/underscore"),i=e("jira/components/issueeditor/controllers/editissue"),t=e("jira/util/events"),r=e("jira/components/issueeditor/eventtypes"),o=e("jira/components/issueeditor/controllers/fields"),n=e("jira/components/issueeditor/services/fieldsloader"),d=e("jira/components/issueeditor/services/issuesaver"),l=e("jira/components/issueviewer"),u=e("jira/util/data/meta"),a=e("jira/components/issueeditor/views/modalfield"),h=e("jira/components/issueeditor/views/saveerror"),v=e("jira/components/issueeditor/services/saveinprogressmanager"),c=window.JIRA,f=e("jira/components/issueeditor/services/unloadinterceptor"),I=window.AJS.contextPath(),g=function(){c.trace.apply(c,arguments)};return l.extend({namedEvents:["loadComplete","loadError","returnToSearch","saveSuccess","saveError","editField","editFieldCancel","fieldSubmitted","replacedFocusedPanel","fieldsLoaded"],initialize:function(e){l.prototype.initialize.call(this,e),this._buildFieldsLoader(),this._buildIssueSaver(),this._buildEditIssueController(),this._buildFieldsController(),this._handleUnload(),this.listenAndRethrow(this.eventBus,"fieldSubmitted")},_buildFieldsLoader:function(){this.fieldsLoader=new n({contextPath:I}),this.listenTo(this.fieldsLoader,"fieldsLoaded",function(e){this.viewIssueData.updateIssue(e.issueKey,e),e.issueId=Number(e.issueId);var s=e.fields&&e.fields.length;s?this.editIssueController.update(e):this.editIssueController.reset(),this.trigger("fieldsLoaded"),g("jira.issue.fields.loaded",{id:e.issueId})}),this.listenTo(this.fieldsLoader,"fieldsError",function(e){this.fieldsController.showError(e.errorCollection,e.isTimeout),g("jira.issue.fields.loaded",{id:e.issueId})})},_buildIssueSaver:function(){this.saveInProgressManager=new v,this.issueSaver=new d({saveInProgressManager:this.saveInProgressManager,model:this.model}),this.listenTo(this.issueSaver,"error",function(e){var s=e.issueId,i=e.attemptedSavedIds,t=e.response,r=e.duration;if(!this.model.isCurrentIssue(s))return void this._showSaveError({issueId:s,issueKey:e.issueKey,response:t});this.eventBus.triggerSaveError(s,i,t);var o=t&&t.fields&&t.fields.length;!o&&t&&(this.editIssueController.reset(),this.model.update(t,{fieldsSaved:[],fieldsInProgress:[]})),this.trigger("saveError",{issueId:s,duration:r,deferred:!1}),g("jira.issue.refreshed",{id:s})}),this.listenTo(this.issueSaver,"saveStarted",function(e,s){this.eventBus.triggerSavingStarted(s)}),this.listenTo(this.issueSaver,"save",function(e){var s=e.issueId,i=e.issueKey,t=e.savedFieldIds,r=e.savedFieldTypes,o=e.response,n=e.shouldSkipSaveIssueSuccessHandler,d=e.duration;if(this.model.isCurrentIssue(s)&&!n){this.eventBus.triggerSaveSuccess(s,i,t,o),this.viewIssueData.set(i,o),this.model.update(o,{fieldsSaved:t,fieldsInProgress:this.editIssueController.getEditsInProgress()}),g("jira.psycho.issue.refreshed",{id:s});var l=o.fields&&o.fields.length;l&&this.editIssueController.update({fields:o.fields,issueId:s,issueKey:i},{editable:!0,editIssueController:this.editIssueController,issueModel:this.model,issueId:s,fieldsSaved:t,initialize:!1,fieldsInProgress:this.editIssueController.getEditsInProgress()}),g("jira.issue.refreshed",{id:s})}this.trigger("saveSuccess",{issueId:s,issueKey:i,savedFieldIds:t,savedFieldTypes:r,duration:d})})},_buildEditIssueController:function(){this.editIssueController=new i({issueEventBus:this.eventBus}),this.listenTo(this.editIssueController,"save",function(e,s,i,t,r,o){this.issueSaver.setSkipSaveIssueSuccessHandler(!1),this.issueSaver.save(e,s,i,t,r,o)}),this.listenAndRethrow(this.editIssueController,"editField"),this.listenAndRethrow(this.editIssueController,"editFieldCancel")},_buildFieldsController:function(){this.fieldsController=new o},_onIssueLoaded:function(e,s,i){e.issue.isEditable&&(s.error||s.fromCache||this.fieldsLoader.load({viewIssueData:this.viewIssueData,issueEntity:i.issueEntity}));var t=!s.mergeIntoCurrent&&i.initialize!==!1;s.isUpdate&&!t||this.editIssueController.reset(),l.prototype._onIssueLoaded.call(this,e,s,i),e.fields&&(this.editIssueController.update({fields:e.fields,issueId:e.issue.id,issueKey:e.issue.key}),g("jira.issue.fields.loaded",{id:e.issue.id}))},_handleUnload:function(){var e=function(){var e;return this.editIssueController.getDirtyEditsInProgress().length>0&&(e="You are still editing this page. Are you sure you want to leave?"),e}.bind(this);this.unloadInterceptor=new f,this.unloadInterceptor.addAfterEvent(e),this.on("destroy",function(){this.unloadInterceptor.removeAfterEvent(e)})},_updateModel:function(e,i){var t=e.fields&&e.fields.length;t&&this.editIssueController.update(e.fields,{fieldsInProgress:this.editIssueController.getEditsInProgress(),changed:i.changed}),i=s.extend({},i,{fieldsInProgress:this.editIssueController.getEditsInProgress()}),l.prototype._updateModel.call(this,e,i)},_loadIssueFromDom:function(e){u.get("server-view-issue-is-editable")&&(this.editIssueController.setIssueId(e.id),this.editIssueController.setIssueKey(e.key),this.fieldsLoader.load({viewIssueData:this.viewIssueData,issueEntity:e}),u.set("server-view-issue-is-editable",null)),l.prototype._loadIssueFromDom.call(this,e)},editField:function(e){if(e.isEditable()){var s=this.model.getEntity(),i=function(){e.matchesFieldSelector()?e.edit():new a({issueEventBus:this.eventBus,model:e,issue:s}).show()}.bind(this);e.getSaving()?t.one(r.ISSUE_REFRESHED,function(){i()}):i()}},abortPending:function(){this.fieldsLoader.cancel(),l.prototype.abortPending.call(this)},beforeHide:function(){this.issueSaver.setSkipSaveIssueSuccessHandler(!0),l.prototype.beforeHide.call(this)},setContainer:function(e){this.editIssueController.setIssueViewContext(e),l.prototype.setContainer.call(this,e)},dismiss:function(){this.editIssueController.reset(),l.prototype.dismiss.call(this)},getFields:function(){return this.editIssueController.getFields()},hasSavesInProgress:function(){return this.saveInProgressManager.hasSavesInProgress()},_showSaveError:function(e){var i,t;i=new h(e).render(),t=s.partial(this.stopListening,i),this.listenTo(i,{close:t,issueLinkClick:function(e){var s={isPrevented:!1,preventDefault:function(){this.isPrevented=!0},isDefaultPrevented:function(){return this.isPrevented===!0},issueData:e};this.trigger("linkInErrorMessage",s),s.isDefaultPrevented()||this.loadIssue(e)}})}})});
//# sourceMappingURL=IssueEditor-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/IssueEditorAppModule.js' */
define("jira/components/issueeditor/appmodule",["require"],function(e){"use strict";var r=e("jira/components/libs/underscore"),t=e("jira/components/issueeditor"),n=e("jira/components/issueviewer/appmodule");return n.extend({name:"issueEditor",generateMasterRequest:!0,create:function(e){return e=r.defaults({},e,{showReturnToSearchOnError:function(){return!1}}),new t({showReturnToSearchOnError:e.showReturnToSearchOnError,isGlobalIssueNavigator:e.isGlobalIssueNavigator})},commands:function(e){var t=n.prototype.commands.call(this,e);return r.extend(t,{editField:!0})},requests:function(e){var t=n.prototype.requests.call(this,e);return r.extend(t,{fields:function(){return e.getFields()},hasSavesInProgress:!0})},events:function(e){var r=n.prototype.events.call(this,e);return r.concat(["saveSuccess","saveError","editField","editFieldCancel","fieldSubmitted","fieldsLoaded"])}})});
//# sourceMappingURL=IssueEditorAppModule-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/NoInlineAppModule.js' */
define("jira/components/issueeditor/noinlineappmodule",["require"],function(e){"use strict";var n=e("jira/components/libs/underscore"),r=e("jira/components/issueviewer/appmodule");return r.extend({name:"issueEditor",requests:function(e){var s=r.prototype.requests.call(this,e);return n.extend(s,{fields:function(){return[]},hasSavesInProgress:function(){return!1}})}})});
//# sourceMappingURL=NoInlineAppModule-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/templates/Fields.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.IssueEditor&&(JIRA.Templates.IssueEditor={}),"undefined"==typeof JIRA.Templates.IssueEditor.Fields&&(JIRA.Templates.IssueEditor.Fields={}),JIRA.Templates.IssueEditor.Fields.saveErrorMessage=function(e,s){var t="",o='<a class="issue" href="'+soy.$$escapeHtml(AJS.contextPath())+"/browse/"+soy.$$escapeHtml(e.issueKey)+'">'+soy.$$escapeHtml(e.issueKey)+"</a>";if(t+=soy.$$filterNoAutoescape(AJS.format("Saving of \u003cstrong\u003e{0}\u003c/strong\u003e failed!",o)),e.errors.length>0){t+="<ul>";for(var a=e.errors,i=a.length,l=0;l<i;l++){var n=a[l];t+="<li>"+soy.$$escapeHtml(n)+"</li>"}t+="</ul>"}return t},JIRA.Templates.IssueEditor.Fields.field=function(e,s){return'<form id="'+soy.$$escapeHtml(e.issue.id)+'-form" class="ajs-dirty-warning-exempt aui" action= "#"><div class="inline-edit-fields">'+soy.$$filterNoAutoescape(e.issue.editHtml)+'</div><span class="overlay-icon throbber" /><div class="save-options"><button type="submit" class="aui-button submit" accessKey="'+soy.$$escapeHtml("s")+'" title="'+soy.$$escapeHtml(AJS.format("Press {1}+{0} to submit this form","s",e.accessKey))+'"><span class="aui-icon aui-icon-small aui-iconfont-success">'+soy.$$escapeHtml("Save")+'</span></button><button type="cancel" class="aui-button cancel" accessKey="'+soy.$$escapeHtml("`")+'" title="'+soy.$$escapeHtml(AJS.format("Press {1}+{0} to cancel","`",e.accessKey))+'"><span class="aui-icon aui-icon-small aui-iconfont-close-dialog">'+soy.$$escapeHtml("Cancel")+"</span></button></div></form>"},JIRA.Templates.IssueEditor.Fields.modalField=function(e,s){return'<div class="aui-dialog-content"><h2 class="dialog-title">'+soy.$$escapeHtml(AJS.format("Edit {0} for {1}",e.field.label,e.issue.key))+'</h2><form action="" class="aui" method="post"><div class="form-body">'+soy.$$filterNoAutoescape(e.field.editHtml)+'</div><div class="buttons-container form-footer"><div class="buttons"><input class="button" type="submit" value="'+soy.$$escapeHtml("Submit")+'"/><a class="cancel" href="#">'+soy.$$escapeHtml("Cancel")+"</a></div></div></form></div>"},JIRA.Templates.IssueEditor.Fields.modalFieldGeneralErrors=function(e,s){var t='<div class="error">';if(1==e.messages.length)t+=soy.$$escapeHtml(e.messages[0]);else if(e.messages.length>0){t+="<ul>";for(var o=e.messages,a=o.length,i=0;i<a;i++){var l=o[i];t+="<li>"+soy.$$escapeHtml(l)+"</li>"}t+="</ul>"}return t+="</div>"},JIRA.Templates.IssueEditor.Fields.errorsLoading=function(e,s){var t=""+(e.isTimeout?soy.$$escapeHtml("The Jira server could not be contacted. This may be a temporary glitch or the server may be down."):soy.$$escapeHtml("There were errors loading the issue."));if(e.errorMessages){t+="<ul>";for(var o=e.errorMessages,a=o.length,i=0;i<a;i++){var l=o[i];t+="<li>"+soy.$$escapeHtml(l)+"</li>"}t+="</ul>"}return t};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/templates/amd-wrapper.js' */
define("jira/components/issueeditor/templates",function(){"use strict";return JIRA.Templates.IssueEditor.Fields}),AJS.namespace("JIRA.Templates.IssueEditor.Fields",null,require("jira/components/issueeditor/templates"));
//# sourceMappingURL=amd-wrapper-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/entities/FieldModel.js' */
define("jira/components/issueeditor/entities/field",["require"],function(t){"use strict";var i=t("jira/components/libs/underscore"),e=t("jira/components/libs/brace"),s=t("jira/util/events"),r=t("jira/components/issueviewer/legacy/issuefieldutil"),n=t("jquery"),a=t("jira/skate"),h=t("jira/components/issueeditor/templates"),o=t("jira/components/issueeditor/eventtypes");return e.Model.extend({namedEvents:["editingStarted","focusRequested","editingCancelled","save","saveError","savingStarted","saveComplete","saveSuccess","updateRequired","validationError","modelDestroyed"],namedAttributes:["id","initParams","params","editHtml","viewHtml","required","fieldType","editing","saving","error","label","contentId"],initialize:function(){if(this.collection){var t=this;this.collection.on("reset",function(){t.triggerModelDestroyed()})}this.on("change:viewHtml",function(){var t=this.previous("viewHtml");t&&n.cleanData(t)}),this.onModelDestroyed(function(){var t=this.getViewHtml();t&&n.cleanData(t)})},blurEdit:function(){this.getEditing()&&(this.isDirty()||this.hasValidationError()?this.save():this.cancelEdit())},setValidationError:function(t,i,e){this.setSaving(!1),this.setError(i),this.edit({ignoreBlur:!0}),this.triggerSaveError(),this.triggerValidationError(t,e)},handleSaveError:function(){this.setSaving(!1),this.triggerSaveError()},cancelEdit:function(t){if(!this.cancelLocked){var i=new n.Event(o.BEFORE_INLINE_EDIT_CANCEL);s.trigger(i,[this.getId(),this.getFieldType(),t]),i.isDefaultPrevented()||(this.cancelLocked=!0,(this.getEditing()||this.getSaving())&&(this.setEditing(!1),this.setSaving(!1),this.unset("params"),this.unset("initParams"),this.triggerEditingCancelled(),this.unset("viewHtml")),delete this.cancelLocked)}},edit:function(t){this.getEditing()?t&&t.ignoreBlur||this.triggerFocusRequested(this,t):(this.setEditing(!0),this.triggerEditingStarted(this,t))},getCurrentParams:function(){this.triggerUpdateRequired();var t={};if(this.getParams())t=this.getParams();else if(this.getInitParams())t=this.getInitParams();else{var e=n("<div />").html(this.getEditHtml());this.setInitParams(this._serializeObject(e)),t=this.getInitParams()}var s={};return i.each(t,function(t,i){s[i]=t}),s},isEditable:function(){return!!this.getEditHtml()&&0!==n(this.getEditHtml()).find("textarea, :text,:radio,:checkbox, select").length},hasValidationError:function(){return!!this.getError()},switchElToEdit:function(t){this.getViewHtml()||this.setViewHtml(t.contents()),t.contents().detach(),t.html(h.field({issue:this.toJSON(),accessKey:r.getAccessKeyModifier()})),t.each(function(){a.init(this)}),this.getInitParams()||this.setInitParams(this._serializeObject(t)),this.setEditing(!0)},update:function(t){this.getEditing()&&this.setParams(this._serializeObject(t))},handleSaveSuccess:function(){this.setSaving(!1),this.setEditing(!1),this.unset("viewHtml"),this.unset("initParams"),this.setError(null),this.triggerSaveSuccess()},handleSaveStarted:function(){this.setSaving(!0),this.triggerSavingStarted()},save:function(){this.getSaving()||(this.triggerUpdateRequired(),this.triggerSave(this))},isDirty:function(){return this.triggerUpdateRequired(),this._isDirty(this.getCurrentParams())},_isDirty:function(t){return JSON.stringify(t)!==JSON.stringify(this.getInitParams())},matchesFieldSelector:function(){return r.matchesFieldSelector(this.id)},_serializeObject:function(t){var i={},e=n(t).find(":input").serializeArray();return n.each(e,function(){i[this.name]?(i[this.name].push||(i[this.name]=[i[this.name]]),i[this.name].push(this.value||"")):i[this.name]=this.value||""}),i}},{IS_EDITABLE:function(t){return t.isEditable()}})});
//# sourceMappingURL=FieldModel-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/entities/FieldCollection.js' */
define("jira/components/issueeditor/entities/fields",["require"],function(i){"use strict";var t=i("jira/components/libs/underscore"),e=i("jira/components/libs/brace"),n=i("jira/components/issueeditor/entities/field");return e.Collection.extend({model:n,initialize:function(){this.on("editingStarted",this._handleEditingStarted,this)},_handleEditingStarted:function(i,t){t=t||{},t.ignoreBlur||this.each(function(t){i!==t&&t.getEditing()&&t.blurEdit()})},update:function(i,e){var n=this;if(e&&e.changed){var d=e.changed,r=d.updated?d.updated.fields:[],a=d.added?d.added.fields:[];t.each(i,function(i){if(t.contains(r,i.id)){var e=n.get(i.id);e?(e.hasValidationError()&&delete i.editHtml,e.set(i,{silent:!0}),n.trigger("updated",e)):n.add(i)}else t.contains(a,i.id)&&n.add(i)})}else t.each(i,function(i){var t=n.get(i.id);t?(t.hasValidationError()&&delete i.editHtml,t.set(i,{silent:!0}),n.trigger("updated",t)):n.add(i)})},cancelEdit:function(){this.each(function(i){i.cancelEdit()})},isDirty:function(){return this.any(function(i){return i.isDirty()})},getDirtyFields:function(){return this.filter(function(i){return i.isDirty()})}})});
//# sourceMappingURL=FieldCollection-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/views/FieldView.js' */
define("jira/components/issueeditor/views/field",["require"],function(e){"use strict";var t=e("jira/components/issueeditor/cancelreasons"),i=e("jira/util/events"),s=e("jira/components/issueviewer/legacy/issuefieldutil"),n=e("jquery"),l=e("jira/components/libs/marionette-1.4.1/itemview"),o=e("jira/util/events/reasons"),d=e("jira/components/issueeditor/templates"),a=e("jira/components/issueeditor/eventtypes"),r=e("jira/components/issueeditor/analytics/viewissue");return l.extend({events:{"click .cancel":"onClickCancel",keyup:"onKeyCancel","click .submit":"onSubmit",click:"onEdit",mousedown:"saveSelectedText","submit form":"onSubmit",'keydown select[multiple="multiple"]':"_enterToSubmitMultiSelect","keypress select":"_enterToSubmitSelect","keypress textarea.no-line-break":"_enterToSubmitSelect","beforeBlurInput *":"_preventBlurByEsc"},initialize:function(e){this.model.on("validationError",this.handleValidationError,this),this.model.on("editingStarted",this.switchToEdit,this),this.model.on("focusRequested",this.focus,this),this.model.on("editingCancelled",this.switchToRead,this),this.model.on("saveError",this.handleSaveError,this),this.model.on("updateRequired",this.updateModel,this),this.model.on("savingStarted",this.handleSavingStarted,this),this.model.on("modelDestroyed",this.destroy,this),this.decorate(),this.issueEventBus=e.issueEventBus,this.issueEventBus.on("panelRendered",this.handlePanelRendered,this),this.model.setFieldType(this.$el.data("fieldtypecompletekey")),this._editDelay=0;var t=this.$el.children("shorten");t.length&&t.shorten();var s=this;i.bind(a.INLINE_EDIT_BLURRED,function(e,t){t===s.model.getId()&&s._onPossibleBlur()}),i.bind(a.INLINE_EDIT_REQUESTED,function(e,t){t!==s.model.getId()&&0!==s._editDelay&&(clearTimeout(s._editDelay),s._editDelay=0)})},destroy:function(){this.issueEventBus.off("panelRendered",this.handlePanelRendered)},decorate:function(){this.model.isEditable()&&!this.model.getEditing()&&(this.$el.addClass("editable-field inactive"),this.$el.append('<span class="overlay-icon aui-icon aui-icon-small aui-iconfont-edit" />'),this._addToolTip())},getEditElements:function(){return this.$el.find(".inline-edit-fields")},_addToolTip:function(){this.$el.attr("title","Click to edit"),n("a:not([title]):not([original-title])",this.$el).attr("title","Follow link")},_removeToolTip:function(){this.$el.removeAttr("title")},_stealAccessKeys:function(){n("[accessKey='"+"s"+"']").attr("accessKey","_s"),n("[accessKey='"+"`"+"']").attr("accessKey","_x")},_returnAccessKeys:function(){n("[accessKey=_s]").attr("accessKey","s"),n("[accessKey=_x]").attr("accessKey","`")},_handleEditingStarted:function(e){var t=this.$el.find(".field-tools");i.trigger(a.NEW_CONTENT_ADDED,[this.$el,o.inlineEditStarted]),i.trigger(a.INLINE_EDIT_STARTED,[this.model.getId(),this.model.getFieldType(),this.getEditElements(),this.$el]),this.$el.find(".textarea").css("height",Math.max(this._originalHeight,60)).expandOnInput(window.innerHeight-n("#stalker").height()-100),this.$el.find("textarea.initial-height").css("height",this._originalHeight).expandOnInput(window.innerHeight-n("#stalker").height()-100),e&&this.$el.find(":input:visible:first").focus(),this.$el.find(".error").size()||this.$el.find("select.aui-ss-select").each(function(){var e=n(this);e.data("static-suggestions")&&e.trigger("showSuggestions")}),this.$el.find(".save-options").attr("tabindex",1).prepend(t)},handleValidationError:function(e,t){this.$el.html(d.field({issue:{id:this.model.id,editHtml:e},accessKey:s.getAccessKeyModifier()})),this.$el.find(".error").addClass("inline-edit-error").attr("data-field",this.model.id),this._handleEditingStarted(t)},handlePanelRendered:function(e,t){var i=n(s.getFieldSelector(this.model.id),t);1===i.length&&(this.$el=i,this.el=this.$el[0],this.decorate(),this.delegateEvents())},handleSaveError:function(){this.$el.find(":input").removeAttr("disabled").trigger("enable"),this.$el.removeClass("saving saving-"+this.model.id)},handleSavingStarted:function(){this.$el.find(":input").attr("disabled","disabled").trigger("disable"),this.$el.find(".overlay-icon.throbber").spin(),this.$el.addClass("saving saving-"+this.model.id)},updateModel:function(){this.model.update(this.$el)},reveal:function(){var e=40;this.$el.scrollIntoView({direction:"y",marginBottom:e,marginTop:n("#stalker").outerHeight(!0)+e}),this.$el.trigger("reveal")},focus:function(){if(this.reveal(),this.$el.find(":input").removeAttr("disabled"),0===n(".aui-blanket[aria-hidden='false']").length){var e=this.$el.find(":input:visible:first");e.focus(),this.$el.hasClass("field-ignore-highlight")||e.select()}},switchToEdit:function(){this.trigger("editField",{fieldId:this.model.getId()}),this._stealAccessKeys(),this._removeToolTip(),this.$el.removeClass("inactive saving").addClass("active"),this._originalHeight=this.$el.height(),this.model.switchElToEdit(this.$el),this._handleEditingStarted(),this.focus()},switchToRead:function(){this.trigger("editFieldCancel",{fieldId:this.model.getId()}),this._addToolTip(),this.$el.addClass("inactive").removeClass("active"),this.$el.html(this.model.getViewHtml()),this.$el.closest("form").unbind("submit",this.onSubmit),this._returnAccessKeys()},onKeyCancel:function(e){27===e.keyCode&&(this.model.cancelEdit(t.escPressed),e.preventDefault())},onClickCancel:function(e){this.model.cancelEdit(),e.preventDefault(),e.stopPropagation()},onSubmit:function(e){var t=new n.Event("before-submit");this.$el.find("form").trigger(t),t.isDefaultPrevented()||(this.$el.find(":focus").blur(),this.issueEventBus.triggerFieldSubmitted(),this.model.save(),this._returnAccessKeys()),e.preventDefault()},onEdit:function(e){var t=n(e.target).is(".overlay-icon.aui-iconfont-edit"),s=0===n(e.target).closest("a, .uneditable").length&&this.$el.hasClass("inactive"),l=""===this._getCurrentlySelectedText()&&!this._previouslySelectedText,o=s&&(t||l),d=this.model.getId(),c=this.model.getFieldType();if(0!==this._editDelay)r.triggerEditableFieldDoubleClick(d,c),clearTimeout(this._editDelay),this._editDelay=0;else if(o){i.trigger(a.INLINE_EDIT_REQUESTED,[d]);var h=this;t?(r.triggerEditableFieldClickPencilIcon(d,c),n(document).one("click",function(e){e.isDefaultPrevented()||h.model.edit()})):this._editDelay=setTimeout(function(){!e.isDefaultPrevented()&&h.$el.hasClass("inactive")&&""===h._getCurrentlySelectedText()&&(r.triggerEditableFieldSingleClick(d,c),h.model.edit()),h._editDelay=0},250)}},_onPossibleBlur:function(){this.model.getSaving()||n(".aui-blanket[aria-hidden='false']").length>0||this.model.blurEdit()},_preventBlurByEsc:function(e){e.preventDefault()},_getCurrentlySelectedText:function(){return n(document.activeElement).is(":input")?"":document.selection&&document.selection.createRange?document.selection.createRange().text||"":window.getSelection?window.getSelection().toString():""},_enterToSubmitSelect:function(e){e.isDefaultPrevented()||13===e.which&&(e.preventDefault(),n(e.target).closest("form").submit())},_enterToSubmitMultiSelect:function(e){e.isDefaultPrevented()||13===e.which&&n(e.target).blur()},saveSelectedText:function(){this._previouslySelectedText=this._getCurrentlySelectedText()}})});
//# sourceMappingURL=FieldView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/views/ModalFieldView.js' */
define("jira/components/issueeditor/views/modalfield",["require"],function(e){"use strict";var i=e("jira/components/libs/underscore"),o=e("jira/util/events"),t=e("jira/dialog/form-dialog"),s=e("jira/components/libs/marionette-1.4.1/itemview"),r=e("jira/components/issueeditor/templates");return s.extend({errorsTemplate:r.modalFieldGeneralErrors,template:r.modalField,initialize:function(e){i.bindAll(this,"_onHide","_onSubmit","_remove","_showGeneralError","_showValidationError","_updateModel"),o.bind("Dialog.hide",this._onHide),this.issueEventBus=e.issueEventBus,this.issueEventBus.on("saveError",this._showGeneralError),this.model.onSaveSuccess(this._remove),this.model.onUpdateRequired(this._updateModel),this.model.onValidationError(this._showValidationError)},_enable:function(){var e=this._getDialog();e.hideFooterLoadingIndicator();var i=e.$popup;i.find(":input").removeAttr("disabled").trigger("enable"),i.find(":input:first").focus().select(),i.find(":submit").removeAttr("disabled")},_getDialog:function(){return this._dialog||(this._dialog=new t({id:"modal-field-view",submitHandler:this._onSubmit,content:function(e){e(this.template({field:this.model.toJSON(),issue:this.options.issue}))}.bind(this)}),this._dialog.get$popup().data("field-id",this.model.getId())),this._dialog},_onHide:function(e,i){i===this._getDialog().get$popup()&&this._remove()},_onSubmit:function(e,i){e.preventDefault(),this.model.save(),i();var o=this._getDialog();o.showFooterLoadingIndicator(),o.$popup.find(":input").attr("disabled","disabled").trigger("disable")},close:function(){this._remove()},_remove:function(){var e=this._getDialog();e.get$popup().is(":visible")&&e.hide(),e.destroy(),this.model.cancelEdit(),o.unbind("Dialog.hide",this._onHide),this.issueEventBus.off("saveError",this._showGeneralError),this.model.off("saveSuccess",this._remove),this.model.off("updateRequired",this._updateModel),this.model.off("validationError",this._showValidationError)},show:function(){this.model.edit(),this._getDialog().show()},_showGeneralError:function(e,o,t){this._enable();var s=this._getDialog().$popup,r=t&&t.errorCollection;if(r){var n=!i.isEmpty(r.errors),d=!i.isEmpty(r.errorMessages);!n&&d&&s.find(".form-body").append(this.errorsTemplate({messages:r.errorMessages}))}},_showValidationError:function(e){this._enable(),this._getDialog().$popup.find(".form-body").html(e)},_updateModel:function(){this.model.update(this._getDialog().$popup)}})});
//# sourceMappingURL=ModalFieldView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/views/LoadingError.js' */
define("jira/components/issueeditor/views/loadingerror",["require"],function(e){"use strict";var i=e("jira/components/libs/marionette-1.4.1/itemview"),s=e("jira/message"),t=e("jira/components/issueeditor/templates");return i.extend({template:t.errorsLoading,initialize:function(e,i){this.errorMessages=e,this.isTimeout=i},serializeData:function(){return{errorMessages:this.errorMessages,isTimeout:this.isTimeout}},onRender:function(){this.setElement(s.showErrorMsg(this.$el.html(),{closeable:!0,timeout:0}))}})});
//# sourceMappingURL=LoadingError-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/views/SaveError.js' */
define("jira/components/issueeditor/views/saveerror",["require"],function(e){"use strict";var s=e("jira/components/libs/underscore"),i=e("jira/components/libs/marionette-1.4.1/itemview"),r=e("jira/message"),t=e("jira/components/issueeditor/templates");return i.extend({events:{"simpleClick .issue":"onIssueLinkClick"},template:t.saveErrorMessage,getErrorMessages:function(){var e,i=[];return e=this.options.response.errorCollection,e&&(i=e.errorMessages.concat(s.values(e.errors))),i},onIssueLinkClick:function(e){var s;s={id:this.options.issueId,key:this.options.issueKey},e.preventDefault(),this.trigger("issueLinkClick",s),this.close()},onRender:function(){this.setElement(r.showErrorMsg(this.$el.html(),{closeable:!0,timeout:0}))},serializeData:function(){return{errors:this.getErrorMessages(),issueKey:this.options.issueKey}}})});
//# sourceMappingURL=SaveError-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/controllers/EditIssueController.js' */
define("jira/components/issueeditor/controllers/editissue",["require"],function(e){"use strict";var i=e("jira/components/libs/underscore"),t=e("jira/components/libs/brace"),s=e("jira/components/issueeditor/entities/fields"),n=e("jira/components/issueeditor/views/field"),r=e("jira/components/issueviewer/legacy/issuefieldutil"),d=e("jquery"),a=e("jira/message"),l=e("jira/components/issueeditor/templates");return t.Model.extend({namedAttributes:["issueId","issueKey","issueViewContext","fields","issueEventBus"],namedEvents:["save","editField","editFieldCancel"],initialize:function(){i.bindAll(this,"_handleSaveError","_handleSaveSuccess","_handleSavingStarted","cancelUneditedFields","createFieldView","handleFieldUpdate","save"),this.set({fields:new s},{silent:!0}),this.getFields().bind("add",this.createFieldView).bind("updated",this.handleFieldUpdate).bind("save",this.save),this.getIssueEventBus().onSavingStarted(this._handleSavingStarted),this.getIssueEventBus().onSaveSuccess(this._handleSaveSuccess),this.getIssueEventBus().onSaveError(this._handleSaveError),this.getIssueEventBus().onSave(this.save),this.getIssueEventBus().onSave(this.cancelUneditedFields)},_saveById:function(e){var i=this.getFields().get(e);i&&i.blurEdit()},_handleSaveError:function(e,t,s){var n=this;s?this.applyErrors(s):i.each(t,function(e){var i=n.getFields().get(e);i&&i.handleSaveError()})},_handleSavingStarted:function(e){this.getFields().each(function(t){i.include(e,t.id)&&t.handleSaveStarted()})},handleFieldUpdate:function(e){var i=d(r.getFieldSelector(e.id));i.hasClass("editable-field")||this.createFieldView(e)},applyErrors:function(e,t){var s=e.errorCollection;if(s&&s.errors&&this.getFields().each(function(n){if(s.errors[n.id]){var r=i.find(e.fields,function(e){return e.id===n.id});r&&(n.setValidationError(r.editHtml,s.errors[n.id],t),t=!1)}}),s.errorMessages&&s.errorMessages.length){var n=l.saveErrorMessage({errors:s.errorMessages,issueKey:this.getIssueKey()});a.showErrorMsg(n,{closeable:!0})}},reset:function(){this.getFields().reset()},cancelEdit:function(){this.getFields().each(function(e){e.cancelEdit()})},_handleSaveSuccess:function(e,t,s){var n=this.getFields().filter(function(e){return i.indexOf(s,e.id)>=0});i.each(n,function(e){e.handleSaveSuccess()})},getDirtyEditsInProgress:function(){return i.pluck(this.getFields().filter(function(e){return e.getEditing()&&e.isDirty()}),"id")},getEditsInProgress:function(){return i.pluck(this.getFields().filter(function(e){return e.getEditing()}),"id")},save:function(e,t){var s={},n=[],r=[],d=[e];if(e){if(!e.getEditing()||e.getSaving())return}else d=this.getFields().filter(function(e){return!e.getSaving()&&e.getEditing()&&e.isDirty()});i.each(d,function(e){n.push(e.getId()),r.push(e.getFieldType()||""),i.extend(s,e.getCurrentParams())}),n.length>0&&this.triggerSave(this.getIssueId(),this.getIssueKey(),n,s,t,r)},cancelUneditedFields:function(){this.getFields().each(function(e){!e.getEditing()||e.isDirty()||e.hasValidationError()||e.cancelEdit()})},update:function(e,t){e.fields&&(t&&t.fieldsInProgress&&i.each(e.fields,function(e){i.contains(t.fieldsInProgress,e.id)&&(e.editing=!0)}),this.getFields().update(e.fields,t)),e.issueId&&this.setIssueId(e.issueId),e.issueKey&&this.setIssueKey(e.issueKey)},createFieldView:function(e){var t=d(r.getFieldSelector(e.id),this.getIssueViewContext());if(1===t.length){var s=new n({model:e,el:t,issueEventBus:this.getIssueEventBus()}),a=function(t){var s={issueId:this.getIssueId(),issueKey:this.getIssueKey(),fieldId:e.getId(),fieldType:e.attributes.fieldType};return t=i.extend(s,t)}.bind(this);s.on("editField",function(e){this.trigger("editField",a(e))}.bind(this)),s.on("editFieldCancel",function(e){this.trigger("editFieldCancel",a(e))}.bind(this))}}})});
//# sourceMappingURL=EditIssueController-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/controllers/FieldsController.js' */
define("jira/components/issueeditor/controllers/fields",["require"],function(e){"use strict";var i=e("jira/components/issueeditor/views/loadingerror"),t=e("jira/components/libs/marionette-1.4.1/controller");return t.extend({showError:function(e,t){(e||t)&&(this.close(),this.triggerMethod("before:render"),this.view=new i(e,t),this.view.render(),this.listenTo(this.view,"close",this.close),this.triggerMethod("render"))},close:function(){this.view&&(this.view.close(),this.stopListening(this.view),delete this.view)}})});
//# sourceMappingURL=FieldsController-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/services/FieldsLoaderService.js' */
define("jira/components/issueeditor/services/fieldsloader",["require"],function(e){"use strict";var i=e("jira/components/issueviewer/legacy/issuefieldutil"),t=e("jquery"),r=e("jira/components/libs/marionette-1.4.1/controller");return r.extend({initialize:function(e){this.recurringPromise=(new t.RecurringPromise).sub(),this.recurringPromise.done(function(e){this.trigger("fieldsLoaded",e)}.bind(this)).fail(function(e){this.trigger("fieldsError",e)}.bind(this)),this.contextPath=e.contextPath},load:function(e){var i=this._buildUpdateTask(e);this.recurringPromise.add(i)},cancel:function(){this.recurringPromise.reset()},_getFieldsData:function(e,r){var s=t.ajax({url:this.contextPath+"/secure/AjaxIssueEditAction!default.jspa?decorator=none",headers:{"X-SITEMESH-OFF":!0},data:{issueId:e}}),n=s.pipe(function(t){var s=i.transformFieldHtml(t);return{issueId:e,issueKey:r,fields:s.fields}},function(i){var t,r={};switch(i.status){case 400:t=!1;try{var s=JSON.parse(i.responseText)||{};r=s.errorCollection}catch(n){}break;case 401:t=!1,r=null;break;default:t=!0,r={}}return{issueId:e,fields:null,errorCollection:r,isTimeout:"timeout"===i.statusText,fatalError:t}});return n.abort=function(){s.abort.apply(s,arguments)},n},_buildUpdateTask:function(e){var i=e.viewIssueData,r=e.issueEntity,s=new t.Deferred;return i.setPending(r.id,this._getFieldsData(r.id,r.key),function(e){s.resolve(e)},function(e){e.fatalError?s.reject(e):s.resolve(e)}),s.promise()}})});
//# sourceMappingURL=FieldsLoaderService-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/services/IssueSaverService.js' */
define("jira/components/issueeditor/services/issuesaver",["require"],function(e){"use strict";var s=e("jira/components/issueviewer/legacy/issuefieldutil"),i=e("jira/components/libs/marionette-1.4.1/controller");return i.extend({initialize:function(e){this.saveInProgressManager=e.saveInProgressManager,this.model=e.model,this._saveStarted=[],this.saveInProgressManager.onSavingStarted(function(e,s){this._saveStarted.push((new Date).getTime()),this.trigger("saveStarted",e,s)}.bind(this)),this.saveInProgressManager.onSaveSuccess(function(e,i,t,r,a){r&&r.fields&&s.transformFieldHtml(r),this.trigger("save",{issueId:e,issueKey:i,savedFieldIds:t,savedFieldTypes:a,response:r,shouldSkipSaveIssueSuccessHandler:this._shouldSkipSaveIssueSuccessHandler,duration:(new Date).getTime()-this._saveStarted.shift()})}.bind(this)),this.saveInProgressManager.onSaveError(function(e,i,t,r){r&&r.fields&&s.transformFieldHtml(r),this.trigger("error",{issueId:e,issueKey:i,attemptedSavedIds:t,response:r,duration:(new Date).getTime()-this._saveStarted.shift()})}.bind(this))},setSkipSaveIssueSuccessHandler:function(e){this._shouldSkipSaveIssueSuccessHandler=e},save:function(e,s,i,t,r,a){this.saveInProgressManager.saveIssue(e,s,i,t,r,a)}})});
//# sourceMappingURL=IssueSaverService-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/services/SaveInProgressManager.js' */
define("jira/components/issueeditor/services/saveinprogressmanager",["require"],function(e){"use strict";var r=e("jira/components/libs/underscore"),s=e("jira/components/libs/brace"),t=window.AJS.contextPath(),a=e("jira/util/events"),n=e("jira/components/issueviewer/legacy/issuefieldutil"),o=e("jira/dialog/form-dialog"),i=e("jquery"),g=e("jira/message"),c=e("jira/ajs/ajax/smart-ajax"),v=e("jira/components/issueeditor/eventtypes"),l=e("jira/components/utils/ajshelper");return s.Model.extend({namedAttributes:["savesInProgress"],namedEvents:["beforeSaving","savingStarted","saveSuccess","saveError"],initialize:function(){this.setSavesInProgress([])},saveIssue:function(e,s,o,i,g,l){this.triggerBeforeSaving();var d,u,S=this;u=r.extend(i,{issueId:e,atl_token:atl_token(),singleFieldEdit:!0,fieldsToForcePresent:o});var h=r.extend({type:"POST",url:t+"/secure/AjaxIssueAction.jspa?decorator=none",headers:{"X-SITEMESH-OFF":!0},error:function(r){S._handleSaveError(e,s,o,r)},success:function(r,t,a,i){var g=i.data;"string"==typeof g?S._handleHtmlResponse(e,s,o,g,l):(n.transformFieldHtml(g),S.triggerSaveSuccess(e,s,o,g,l))},complete:function(){S.removeSaveInProgress(d),a.trigger(v.INLINE_EDIT_SAVE_COMPLETE)},data:u},g);d=c.makeRequest(h),this.addSaveInProgress(d),this.triggerSavingStarted(e,o,i)},hasSavesInProgress:function(){return this.getSavesInProgress().length>0},removeSaveInProgress:function(e){this.setSavesInProgress(r.without(this.getSavesInProgress(),e))},addSaveInProgress:function(e){var r=this.getSavesInProgress();r.push(e),this.setSavesInProgress(r)},_handleHtmlResponse:function(e,r,s,t,a){var g=this,c=i(l.extractBodyFromResponse(t)),v=c.find("#atl_token").val();v&&i("#atlassian-token").attr("content",v);var d=new o({offsetTarget:"body",content:c});this.triggerSaveError(e,r,s),d._handleServerSuccess=function(t){d.hide();var o=g._parseResponse(t);o&&(n.transformFieldHtml(o),g.triggerSaveSuccess(e,r,s,o,a))},d._handleServerError=function(t){d.hide();var a=g._parseResponse(t.responseText);a&&(n.transformFieldHtml(a),g.triggerSaveError(e,r,s,a))},d.show()},_handleSaveError:function(e,r,s,t){var a=this._parseResponse(t.responseText);a&&(n.transformFieldHtml(a),this.triggerSaveError(e,r,s,a))},_parseResponse:function(e){try{return JSON.parse(e)}catch(r){return this._showFatalErrorMessage(),null}},_showFatalErrorMessage:function(){var e="<p>"+"Communications Breakdown"+"</p><p>"+"Close this dialog and press refresh in your browser"+"</p>";g.showErrorMsg(e,{closeable:!0})}})});
//# sourceMappingURL=SaveInProgressManager-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/services/UnloadInterceptor.js' */
define("jira/components/issueeditor/services/unloadinterceptor",["require"],function(e){"use strict";var n=e("jira/components/libs/underscore"),t=e("jira/components/libs/marionette-1.4.1/controller");return t.extend({initialize:function(){this._afterEventHandlers=[],this.originalBeforeUnload=window.onbeforeunload,window.onbeforeunload=this.onBeforeUnload.bind(this)},addAfterEvent:function(e){this._afterEventHandlers.push(e)},removeAfterEvent:function(e){this._afterEventHandlers=n.without(this._afterEventHandlers,e)},onBeforeUnload:function(){var e,t=arguments;return n.isFunction(this.originalBeforeUnload)&&(e=this.originalBeforeUnload.apply(window,t)),e||(e=n.reduce(this._afterEventHandlers,function(e,n){return e?e:n.apply(window,t)},e)),e}})});
//# sourceMappingURL=UnloadInterceptor-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/InlineEditUtils.js' */
define("jira/components/issueeditor/inlineeditutils",["require"],function(e){"use strict";function s(e){var s=document.activeElement;return e.find(s).length>0||e.filter(s).length>0||r()}function r(){var e=i(".mediaPickerPopup");return e.length>0&&"block"===e.css("display")}var i=e("jquery"),t=e("jira/util/events"),l=e("jira/components/issueeditor/eventtypes"),u={};return u.BLUR_FOCUS_TIMEOUT=50,u.BlurTriggers={Default:function(e,r){function i(){s(r)||(n=!1,t.trigger(l.INLINE_EDIT_BLURRED,[e]))}r=r.nextAll(".save-options").andSelf();var a,g=":input, a[href], [tabindex]",n=s(r),o={focus:function(){n||(n=!0,t.trigger(l.INLINE_EDIT_FOCUSED,[e]))},blur:function(){a&&clearTimeout(a),a=setTimeout(i,u.BLUR_FOCUS_TIMEOUT)}};r.attr("tabindex",1).bind(o).delegate(g,o)}},u.BlurTriggerMapping={system:{summary:u.BlurTriggers.Default,priority:u.BlurTriggers.Default,issuetype:u.BlurTriggers.Default,components:u.BlurTriggers.Default,versions:u.BlurTriggers.Default,fixVersions:u.BlurTriggers.Default,assignee:u.BlurTriggers.Default,reporter:u.BlurTriggers.Default,environment:u.BlurTriggers.Default,description:u.BlurTriggers.Default,labels:u.BlurTriggers.Default,duedate:u.BlurTriggers.Default},custom:{"com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:datepicker":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:datetime":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:float":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:grouppicker":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:labels":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:multigrouppicker":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:multiselect":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:multiversion":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:project":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:select":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:textarea":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:textfield":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:url":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:userpicker":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:version":u.BlurTriggers.Default}},t.bind(l.INLINE_EDIT_STARTED,function(e,s,r,i){var t;if(r){if(t=u.BlurTriggerMapping.custom[r],!t){var l=r.replace(/.+:(.+)/,"$1");t=u.BlurTriggerMapping.custom[l]}}else t=u.BlurTriggerMapping.system[s];t&&t(s,i)}),u});
//# sourceMappingURL=InlineEditUtils-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/eventtypes.js' */
define("jira/components/issueeditor/eventtypes",["require"],function(e){"use strict";var E=e("jira/components/issueviewer/eventtypes");return E.INLINE_EDIT_SAVE_COMPLETE="inlineEditSaveComplete",E.INLINE_EDIT_STARTED="inlineEditStarted",E.BEFORE_INLINE_EDIT_CANCEL="inlineEditCancelled",E.INLINE_EDIT_BLURRED="inlineEditBlurred",E.INLINE_EDIT_FOCUSED="inlineEditFocused",E.INLINE_EDIT_REQUESTED="inlineEditRequested",E.LOCK_PANEL_REFRESHING="lockPanelRefreshing",E.UNLOCK_PANEL_REFRESHING="unlockPanelRefreshing",E});
//# sourceMappingURL=eventtypes-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/cancelreasons.js' */
define("jira/components/issueeditor/cancelreasons",function(){"use strict";return{escPressed:"escPressed"}});
//# sourceMappingURL=cancelreasons-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/analytics/ViewIssue.js' */
define("jira/components/issueeditor/analytics/viewissue",["require"],function(e){"use strict";function i(e,i){l.trigger("analyticsEvent",{name:e,data:{fieldId:i}})}var l=e("jira/components/utils/ajshelper"),t=e("jira/components/analytics-tracker/tracker");return{triggerEditableFieldDoubleClick:function(e,l){i("jira.viewissue.editable-field.double-click",e),t.trackEvent("viewissue.editable-field","double-click",{fieldId:e,fieldType:l})},triggerEditableFieldSingleClick:function(e,l){i("jira.viewissue.editable-field.single-click",e),t.trackEvent("viewissue.editable-field","single-click",{fieldId:e,fieldType:l})},triggerEditableFieldClickPencilIcon:function(e,l){i("jira.viewissue.editable-field.click.pencil-icon",e),t.trackEvent("viewissue.editable-field","click.pencil-icon",{fieldId:e,fieldType:l})}}});
//# sourceMappingURL=ViewIssue-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'issueeditor/js/namespace.js' */
AJS.namespace("JIRA.Components.IssueEditor",null,require("jira/components/issueeditor")),AJS.namespace("JIRA.Components.IssueEditor.AppModule",null,require("jira/components/issueeditor/appmodule")),AJS.namespace("JIRA.Components.IssueEditor.NoInlineAppModule",null,require("jira/components/issueeditor/noinlineappmodule")),AJS.namespace("JIRA.Components.IssueEditor.Controllers.EditIssue",null,require("jira/components/issueeditor/controllers/editissue")),AJS.namespace("JIRA.Components.IssueEditor.Controllers.Fields",null,require("jira/components/issueeditor/controllers/fields")),AJS.namespace("JIRA.Components.IssueEditor.Collections.Fields",null,require("jira/components/issueeditor/entities/fields")),AJS.namespace("JIRA.Components.IssueEditor.Models.Field",null,require("jira/components/issueeditor/entities/field")),AJS.namespace("JIRA.Components.IssueEditor.Services.FieldsLoader",null,require("jira/components/issueeditor/services/fieldsloader")),AJS.namespace("JIRA.Components.IssueEditor.Services.IssueSaver",null,require("jira/components/issueeditor/services/issuesaver")),AJS.namespace("JIRA.Components.IssueEditor.Services.SaveInProgressManager",null,require("jira/components/issueeditor/services/saveinprogressmanager")),AJS.namespace("JIRA.Components.IssueEditor.Services.UnloadInterceptor",null,require("jira/components/issueeditor/services/unloadinterceptor")),AJS.namespace("JIRA.Components.IssueEditor.Views.FieldView",null,require("jira/components/issueeditor/views/field")),AJS.namespace("JIRA.Components.IssueEditor.Views.LoadingError",null,require("jira/components/issueeditor/views/loadingerror")),AJS.namespace("JIRA.Components.IssueEditor.Views.ModalFieldView",null,require("jira/components/issueeditor/views/modalfield")),AJS.namespace("JIRA.Components.IssueEditor.Views.SaveError",null,require("jira/components/issueeditor/views/saveerror")),AJS.namespace("JIRA.Components.IssueEditor.InlineEditUtils",null,require("jira/components/issueeditor/inlineeditutils")),AJS.namespace("JIRA.Issues.InlineEdit.BlurTriggers",null,require("jira/components/issueeditor/inlineeditutils").BlurTriggers),AJS.namespace("JIRA.Issues.InlineEdit.BlurTriggerMapping",null,require("jira/components/issueeditor/inlineeditutils").BlurTriggerMapping),AJS.namespace("JIRA.Issues.CANCEL_REASON",null,require("jira/components/issueeditor/cancelreasons"));
//# sourceMappingURL=namespace-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:inline-edit-feature', location = 'util/InlineEditFeature.js' */
define("jira/components/util/inline-edit-feature",["require"],function(n){"use strict";function e(){var n=i.claim("com.atlassian.jira.jira-issue-nav-components:inline-edit-feature.enabled");a=void 0===n||Boolean(n)}var i=n("wrm/data"),a=null;return{isEnabled:function(){return null===a&&e(),a}}});
//# sourceMappingURL=InlineEditFeature-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issuecomponentresolver', location = 'issuecomponentresolver/IssueComponentResolver.js' */
define("jira/components/issuecomponentresolver",["require"],function(e){"use strict";var n=e("jira/components/util/inline-edit-feature"),i=e("jira/components/issueviewer"),r=e("jira/components/issueeditor");return{resolve:function(){return n.isEnabled()?r:i}}});
//# sourceMappingURL=IssueComponentResolver-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-2.1.0', location = 'libs/marionette-2.1.0.js' */
define("jira/components/libs/marionette-2.1.0",["require"],function(e){"use strict";function t(e,t){var i=s.defaults({},t||{},{isPrevented:!1,emitter:this,preventDefault:function(){this.isPrevented=!0}});return this.trigger(e,i),i}function i(e,t){var i=this.triggerPreventable(e,t);i.isPrevented&&t.preventDefault()}var n=e("atlassian/libs/factories/marionette-2.1.0"),r=e("jira/components/libs/backbone"),s=e("jira/components/libs/underscore"),o=n(s,r);return s.extend(o.View.prototype,{unwrapTemplate:function(e){if(!e||this.$el.hasClass(e))if(this.$el.parent().length){var t=this.$el.children();this.$el.replaceWith(t),this.setElement(t)}else this.setElement(this.$el.children())},triggerPreventable:t,retriggerPreventable:i}),s.extend(o.Controller.prototype,{triggerPreventable:t,retriggerPreventable:i}),o.ViewManager=o.Object.extend({constructor:function(){this.views={},o.Controller.apply(this,arguments)},hideView:function(e){var t=this.views[e];t&&(this.stopListening(t),t.isDestroyed||t.destroy(),delete this.views[e])},showView:function(e,t){var i=this.buildView(e,t);i.render()},buildView:function(e,t){var i=this.views[e];return i||(i=t.call(this),this.listenTo(i,"destroy",function(){this.hideView(e)}),this.views[e]=i),i},getView:function(e){return this.views[e]},onDestroy:function(){s.each(this.views,function(e,t){this.hideView(t)},this)}}),o}),define("jira/components/lib/marionette-2.1.0",["require"],function(e){"use strict";return e("jira/components/libs/marionette-2.1.0")});
//# sourceMappingURL=marionette-2.1.0-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:functional-utils', location = 'util/FunctionalUtils.js' */
define("jira/components/util/functionalutils",["require"],function(n){"use strict";var i=n("jira/components/libs/underscore");return{lambda:function(n){return function(){return n}},isNotBlank:function(n){return!!n},bindObjectTo:function(n,t){i.map(n,function(u,r){i.isFunction(u)&&(n[r]=u.bind(t))})}}});
//# sourceMappingURL=FunctionalUtils-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:issue-utils', location = 'content/js/util/actions.js' */
!function(){"use strict";AJS.namespace("JIRA.Issues.Actions"),JIRA.Issues.Actions.DELETE="delete",JIRA.Issues.Actions.UPDATE="update",JIRA.Issues.Actions.INLINE_EDIT="inlineEdit",JIRA.Issues.Actions.ROW_UPDATE="rowUpdate"}();
//# sourceMappingURL=actions-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:issue-utils', location = 'content/js/util/Utils.js' */
define("jira/issue/utils",["require"],function(e){"use strict";var i=e("jira/dialog/dialog-register"),t=e("underscore");return{isIssueDialog:function(e){return!!e.issueId||t.include(i,e)},isDeleteDialog:function(e){return"delete-issue-dialog"===e.options.id},isEditCommentDialog:function(e){return"edit-comment"===e.options.id},getEffectiveIssueKeyForDialog:function(e){var i=e&&e.$activeTrigger&&e.$activeTrigger.data("issuekey");return i?i:JIRA.Issues.Api.getSelectedIssue().getKey()},getEffectiveIssueIdForDialog:function(e){return e.issueId?e.issueId:JIRA.Issues.Api.getSelectedIssue().getId()},getAction:function(e){return this.isDeleteDialog(e)?JIRA.Issues.Actions.DELETE:this.isEditCommentDialog(e)?JIRA.Issues.Actions.EDIT_COMMENT:JIRA.Issues.Actions.UPDATE},getMessage:function(e){if(!this.isEditCommentDialog(e))return e.options.issueMsg||"thanks_issue_updated"},getMeta:function(e){return this.isEditCommentDialog(e)?{commentId:e.$activeTrigger.attr("id").replace("edit_comment_","")}:{}},getUpdateCommandForDialog:function(e){var i=this;if(this.isIssueDialog(e))return{key:i.getEffectiveIssueKeyForDialog(e),id:i.getEffectiveIssueIdForDialog(e),action:i.getAction(e),message:i.getMessage(e),meta:i.getMeta(e)}},debounce:function(e,i){var s=Array.prototype.slice.call(arguments,2);e||console.error("JIRA.Issues.Utils.debounce: ctx must be defined"),clearTimeout(e[i+"DebounceTimeout"]),e[i].apply(e,s),e[i+"DebounceTimeout"]||(e[i+"Original"]=e[i],e[i]=t.debounce(function(){return e[i+"Original"].apply(e,arguments)},300)),e[i+"DebounceTimeout"]=setTimeout(function(){e[i]=e[i+"Original"],e[i+"DebounceTimeout"]=null},500)},waitForDeferreds:function(e,i,s){s=s||window;var n=[],o=new jQuery.Deferred;return t.each(e,function(){var e=i.apply(s,arguments);e&&e.promise&&n.push(e)}),n.length?jQuery.when.apply(jQuery,n).then(function(){o.resolveWith(s)}):o.resolveWith(s),o.promise()},resolvedPromise:function(){return(new jQuery.Deferred).resolve().promise()},patch:function(e,i,t){var s=e.hasOwnProperty(i),n=e[i];return e[i]=t,function(){s?e[i]=n:delete e[i]}}}});
//# sourceMappingURL=Utils-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:issue-utils', location = 'content/js/util/xsrf-token-header.js' */
define("jira/issue/utils/xsrf-token-header",[],function(){"use strict";return{"X-Atlassian-Token":"no-check"}});
//# sourceMappingURL=xsrf-token-header-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:issue-utils', location = 'content/js/util/namespace.js' */
AJS.namespace("JIRA.Issues.XsrfTokenHeader",null,require("jira/issue/utils/xsrf-token-header")),AJS.namespace("JIRA.Issues.Utils",null,require("jira/issue/utils"));
//# sourceMappingURL=namespace-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:backbone-ext', location = 'content/js/base/AttributesMixinCreator.js' */
define("jira/issues/attributesmixincreator",["require"],function(e){"use strict";var t=e("underscore"),r=e("jira/issues/mixins");return{create:function(e){var i={};return t.indexOf(e,"id")===-1&&e.unshift("id"),t.each(e,function(e){var t=r.createMethodName("set",e);i[t]=function(t,r){var i={};return i[e]=t,this.set(i,r),this};var n=r.createMethodName("get",e);i[n]=function(){return this.get(e)}}),i}}});
//# sourceMappingURL=AttributesMixinCreator-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:backbone-ext', location = 'content/js/base/EventsMixinCreator.js' */
define("jira/issues/eventsmixincreator",["require"],function(t){"use strict";var r=t("underscore"),n=t("jira/issues/mixins");return{create:function(t){var e={},i=function(t){var i=n.createMethodName("bind",t);e[i]=function(){return this.bind.apply(this,[t].concat(r.toArray(arguments)))};var a=n.createMethodName("unbind",t);e[a]=function(){return this.unbind.apply(this,[t].concat(r.toArray(arguments)))};var c=n.createMethodName("trigger",t);e[c]=function(){return this.trigger.apply(this,[t].concat(r.toArray(arguments)))};var o=n.createMethodName("one",t);e[o]=function(){var n=this,e=arguments[0],i=function c(){n.unbind(t,c),e(arguments)},a=r.toArray(arguments).slice(1);return this.bind.apply(this,[t,i].concat(a))}};return r.each(t,i.bind(this)),e}}});
//# sourceMappingURL=EventsMixinCreator-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:backbone-ext', location = 'content/js/base/Extensions.js' */
define("jira/issue/extensions",["require"],function(e){"use strict";function t(e,t){f.forEach(f.keys(t),function(r){var i=e.prototype;if("initialize"===r){var n=i.initialize;return void(i.initialize=function(){t.initialize.apply(this,arguments),n&&n.apply(this,arguments)})}if("validate"===r){var o=i.validate;return void(i.validate=function(){var e=t.validate.apply(this,arguments);return e?e:o?o.apply(this,arguments):void 0})}if("defaults"!==r){if("properties"===r){if(!f.isArray(t[r]))throw"Expects properties member on mixin to be an array";return i.properties||(i.properties=[]),void(i.properties=i.properties.concat(t[r]))}if("namedEvents"===r){if(!f.isArray(t[r]))throw"Expects events member on mixin to be an array";return i.namedEvents||(i.namedEvents=[]),void(i.namedEvents=i.namedEvents.concat(t[r]))}if(i.hasOwnProperty(r))throw"Mixin error: object "+e+" already has property "+r+" for mixin "+t;i[r]=t[r]}else{var s=i.defaults||(i.defaults={}),a=t[r];for(var p in a){if(s.hasOwnProperty(p))throw"Mixin error: object "+e+" already has default "+p+" defined for mixin "+t;s[p]=a[p]}}},this)}function r(e){return function r(i,n){var o,s,a=f.extend({},i);return i&&i.mixins&&(s=i.mixins,delete a.mixins),o=e.call(this,a,n),s&&f.each(i.mixins,function(e){t(o,e)}),o.prototype.namedEvents&&t(o,c.create(o.prototype.namedEvents)),o.prototype.properties&&t(o,u.create(o.prototype.properties)),o.extend=r,o}}function i(e,t){var r=e.prototype,i=t.prototype;i.set=function(e,t){var i,n=this.properties;if(n){f.isObject(e)||null==e?i=e:(i={},i[e]=t);for(var o in i)if(f.indexOf(n,o)<0)throw"Property '"+o+"' does not exist"}return r.set.apply(this,arguments)},i.get=function(e){if(this.properties&&f.indexOf(this.properties,e)<0)throw"Property '"+e+"' does not exist";return r.get.apply(this,arguments)}}function n(e,t){var r=t.prototype;r.addListener=function(e,t,r,i){if(arguments.length<3)throw"The 'other', 'event', and 'callback' arguments are mandatory";var n,o,s=t.charAt(0).toUpperCase()+t.slice(1),a="on"+s,p="off"+s,f="bind"+s,c="unbind"+s;if(e[a]){if(n=a,o=p||c,"function"!=typeof e[n])throw"object does not have method "+a+"'";if("function"!=typeof e[o])throw"object does not have method "+p+"'"}else if(n=f,o=c,"function"!=typeof e[n])throw"object does not have event ["+t+"] registered'";e[n](r,i),this._cleanerUppers=this._cleanerUppers||[],this._cleanerUppers.push(function(){e[o](r,i)})},r.removeListeners=function(){this._cleanerUppers&&f.each(this._cleanerUppers,function(e){e()})}}function o(e,t){var r=t.prototype,i=e.prototype.remove;r.remove=function(){return this.removeListeners(),i.apply(this,arguments)},r.deactivate=function(){this.undelegateEvents(),this.removeListeners()}}function s(e){var t=e.extend(),i=e.extend;return t.extend=r(i),t}function a(e){var t=s(e);return i(e,t),t}function p(e){var t=s(e);return n(e,t),o(e,t),t}var f=e("underscore"),c=e("jira/issues/eventsmixincreator"),u=e("jira/issues/attributesmixincreator");return{applyModelExtensions:a,applyExtensions:s,applyViewExtensions:p}});
//# sourceMappingURL=Extensions-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:backbone-ext', location = 'content/js/base/BaseCollection.js' */
define("jira/issues/basecollection",["require"],function(e){"use strict";var i=e("backbone"),s=e("jira/issue/extensions");return s.applyExtensions(i.Collection)});
//# sourceMappingURL=BaseCollection-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:backbone-ext', location = 'content/js/base/BaseEvented.js' */
define("jira/issues/baseevented",["require"],function(e){"use strict";var i=e("backbone"),n=e("underscore"),t=e("jira/issue/extensions"),s=function(){this.initialize.apply(this,arguments)};return n.extend(s.prototype,i.Events,{initialize:function(){}}),s.extend=i.Model.extend,t.applyExtensions(s)});
//# sourceMappingURL=BaseEvented-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:backbone-ext', location = 'content/js/base/BaseModel.js' */
define("jira/issues/basemodel",["require"],function(e){"use strict";var s=e("backbone"),i=e("jira/issue/extensions");return i.applyModelExtensions(s.Model)});
//# sourceMappingURL=BaseModel-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:backbone-ext', location = 'content/js/base/BaseRouter.js' */
define("jira/issues/baserouter",["require"],function(e){"use strict";var s=e("backbone"),r=e("jira/issue/extensions");return r.applyExtensions(s.Router)});
//# sourceMappingURL=BaseRouter-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:backbone-ext', location = 'content/js/base/BaseView.js' */
define("jira/issues/baseview",["require"],function(e){"use strict";var i=e("backbone"),s=e("jira/issue/extensions");return s.applyViewExtensions(i.View)});
//# sourceMappingURL=BaseView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:backbone-ext', location = 'content/js/base/Mixins.js' */
define("jira/issues/mixins",function(){"use strict";return{createMethodName:function(e,t){return e+t.charAt(0).toUpperCase()+t.substr(1)}}});
//# sourceMappingURL=Mixins-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:backbone-ext', location = 'content/js/base/ModelUtils.js' */
define("jira/issues/modelutils",["require"],function(t){"use strict";function n(){this.modelEvents={}}function e(t){var n=this;"change"===t||0===t.indexOf("change:")?i.log.captureEvent(n,r.toArray(arguments)):o.Events.trigger.apply(n,arguments)}var i,r=t("underscore"),o=t("backbone"),c=t("jira/issue/utils");n.prototype.captureEvent=function(t,n){var e=n[0];this.modelEvents[t.cid]||(this.modelEvents[t.cid]={model:t,events:{}}),this.modelEvents[t.cid].events[e]=n},n.prototype.replayEvents=function(){r.each(this.modelEvents,function(t){r.each(t.events,function(n){o.Events.trigger.apply(t.model,n)})})};var a=function(){if(i)return{commit:function(){}};i={log:new n};var t=c.patch(o.Model.prototype,"trigger",e);return{commit:function(){t(),i.log.replayEvents(),i=null}}},s={transaction:function(t,n){var e=a();try{return t.apply(n)}finally{e.commit()}},makeTransactional:function(t){var n=function(t){return function(){var n=arguments;return s.transaction(function(){return t.apply(this,n)},this)}},e=Array.prototype.slice.call(arguments,1);0===e.length&&(e=r.functions(t)),r.each(e,function(e){0!==e.indexOf("_")&&(t[e]=n(t[e]))})}};return s});
//# sourceMappingURL=ModelUtils-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:backbone-ext', location = 'content/js/base/namespace.js' */
AJS.namespace("JIRA.Issues.AttributesMixinCreator",null,require("jira/issues/attributesmixincreator")),AJS.namespace("JIRA.Issues.BaseCollection",null,require("jira/issues/basecollection")),AJS.namespace("JIRA.Issues.BaseEvented",null,require("jira/issues/baseevented")),AJS.namespace("JIRA.Issues.BaseModel",null,require("jira/issues/basemodel")),AJS.namespace("JIRA.Issues.BaseRouter",null,require("jira/issues/baserouter")),AJS.namespace("JIRA.Issues.BaseView",null,require("jira/issues/baseview")),AJS.namespace("JIRA.Issues.EventsMixinCreator",null,require("jira/issues/eventsmixincreator")),AJS.namespace("JIRA.Issues.Mixins",null,require("jira/issues/mixins")),AJS.namespace("JIRA.Issues.ModelUtils",null,require("jira/issues/modelutils"));
//# sourceMappingURL=namespace-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:backbone-ext', location = 'content/js/base/init.js' */
!function(){"use strict";var i=require("jira/components/util/functionalutils"),n=require("underscore");n.mixin({lambda:i.lambda,isNotBlank:i.isNotBlank,bindObjectTo:i.bindObjectTo})}();
//# sourceMappingURL=init-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:orderby', location = 'orderby/orderby.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.OrderBy&&(JIRA.Templates.OrderBy={}),JIRA.Templates.OrderBy.orderBy=function(e,s){return(e.sortBy&&e.sortBy.fieldId?'<a class="order-by '+("ASC"==e.sortBy.order?"ascending":"descending")+'" data-field-id="'+soy.$$escapeHtml(e.sortBy.fieldId)+'" data-direction="'+soy.$$escapeHtml(e.sortBy.order)+'" href="#" title="'+soy.$$escapeHtml(AJS.format("Order by {0}",e.sortBy.fieldName))+'"><span>'+soy.$$escapeHtml(AJS.format("Order by {0}",e.sortBy.fieldName))+'</span><span class="aui-icon aui-icon-small aui-iconfont-'+("ASC"==e.sortBy.order?"up":"down")+'"></span></a>':'<a class="order-by" title="'+soy.$$escapeHtml("Order by")+'"><span>'+soy.$$escapeHtml("Order by")+"</span></a>")+'<a class="order-options" title="'+soy.$$escapeHtml("Select the field that issues are ordered by.")+'">'+soy.$$escapeHtml("Select the field that issues are ordered by.")+"</a>"},JIRA.Templates.OrderBy.orderByOptions=function(e,s){for(var t='<select id="order-by-options" multiple="multiple" class="hidden"><optgroup data-footer-text="'+soy.$$escapeHtml(e.footer)+'">',o=e.options,n=o.length,r=0;r<n;r++){var a=o[r];t+='<option title="'+soy.$$escapeHtml(a.fieldName)+'" value="'+soy.$$escapeHtml(a.fieldId)+'" data-meta="'+soy.$$escapeHtml(a.meta)+'">'+soy.$$escapeHtml(a.fieldName)+"</option>"}return t+="</optgroup></select>"};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:orderby', location = 'orderby/OrderByModel.js' */
define("jira/components/orderby/orderbymodel",["require"],function(t){"use strict";var e=t("jira/components/libs/brace"),i=t("jquery"),r=t("wrm/context-path");return e.Model.extend({namedEvents:["sort"],namedAttributes:["sortBy","jql"],initialize:function(){this.on("change:jql",this.updateSelectedSort,this)},updateSelectedSort:function(){i.ajax({type:"POST",url:r()+"/rest/orderbycomponent/latest/orderByOptions/primary",data:JSON.stringify({jql:this.getJql()}),contentType:"application/json",success:function(t){this.setSortBy(t)}.bind(this)})},toggleSort:function(){this.setJql(this.getSortBy().toggleJql),this.triggerSort(this.getJql())},doSort:function(t){this.setJql(t),this.triggerSort(this.getJql())}})});
//# sourceMappingURL=OrderByModel-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:orderby', location = 'orderby/OrderByView.js' */
define("jira/components/orderby/orderbyview",["require"],function(e){"use strict";var r=e("jira/components/libs/brace"),t=e("jquery"),o=e("jira/util/events"),n=e("jira/components/orderby/eventtypes"),i=e("jira/components/orderby/templates"),d=e("jira/components/orderby/orderbydropdownview");return r.View.extend({template:i.orderBy,events:{"click a.order-by":"_onClickOrderBy","click a.order-options":"_toggleShowDropDown"},initialize:function(){this.model.on("change:sortBy",this.render,this)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},deactivate:function(){this.orderByDropDown&&this.orderByDropDown.deactivate(),this.undelegateEvents()},_onClickOrderBy:function(e){var r=new t.Event(n.ISSUE_TABLE_REORDER);if(o.trigger(r),!r.isDefaultPrevented()){var i=t(e.currentTarget).data("field-id");i&&this.model.toggleSort()}e.preventDefault()},_toggleShowDropDown:function(e){this.orderByDropDown||(this.orderByDropDown=new d({model:this.model,offsetTarget:this.$("a.order-by"),onHideCallback:function(){this.orderByDropDown=null}.bind(this)})),this.orderByDropDown.toggle(),e.preventDefault()}})});
//# sourceMappingURL=OrderByView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:orderby', location = 'orderby/OrderByDropDownView.js' */
define("jira/components/orderby/orderbydropdownview",["require"],function(e){"use strict";var t=e("jira/components/libs/underscore"),i=e("jira/components/libs/brace"),n=e("jquery"),r=e("jira/util/events"),o=e("jira/components/orderby/eventtypes"),s=e("jira/components/orderby/templates"),a=e("jira/ajs/layer/inline-layer"),d=e("jira/ajs/select/checkbox-multi-select"),l=e("jira/ajs/select/suggestions/select-suggest-handler"),u=e("jira/ajs/list/group-descriptor"),h=e("jira/ajs/list/item-descriptor"),c=e("jira/issues/baseview"),f=e("jira/issues/tipsy"),p=e("wrm/context-path");return i.View.extend({initialize:function(e){t.bindAll(this,"_onDropdownHidden","_onDropdownShown"),this.offsetTarget=e.offsetTarget,this._onHideCallback=e.onHideCallback,this._pending=null,this._inlineLayer=null},deactivate:function(){this._inlineLayer&&this._inlineLayer.hide(),c.prototype.deactivate.apply(this,arguments)},toggle:function(){this._inlineLayer?this._inlineLayer.hide():(this._pending=n.ajax(this._ajaxDefaults()),this._inlineLayer=this._createInlineLayer(this._pending),this._inlineLayer.bind(a.EVENTS.show,this._onDropdownShown),this._inlineLayer.bind(a.EVENTS.hide,this._onDropdownHidden),this._inlineLayer.show())},_createInlineLayer:function(e){var t=function(e){return this._deferredAddTipsyToFooter(e),this._renderInitialContent(e)}.bind(this),i=new a({offsetTarget:this.offsetTarget,content:function(){return e.pipe(t)},width:218});return this._onHideCallback&&i.bind(a.EVENTS.hide,this._onHideCallback),i},_initSingleSelect:function(e){var i=e.find("select");i.bind("selected",this._onFieldSelected.bind(this)),this.selectControl=new d({element:i,itemAttrDisplayed:"label",suggestionsHandler:l,ajaxOptions:this._ajaxDefaults({data:function(e){return JSON.stringify(this._ajaxOptionsData(e))}.bind(this),query:!0,minQueryLength:0,formatResponse:function(e){this._removeTipsy();var i=new u;t.each(e.fields,function(e){i.addItem(new h({title:e.fieldName,value:e.fieldId,label:e.fieldName,meta:{sortJql:e.sortJql}}))});var n=this._getFooterText(e);return n&&(i.footerText(n),this._deferredAddTipsyToFooter(e)),[i]}.bind(this)})});var n=e.find("#order-by-options-input");n.focus()},_ajaxDefaults:function(e){var i={url:p()+"/rest/orderbycomponent/latest/orderByOptions",type:"POST",contentType:"application/json",data:JSON.stringify(this._ajaxOptionsData())};return t.extend(i,e)},_ajaxOptionsData:function(e){var t=this.model.getJql(),i=this.model.getSortBy();return{query:e,jql:t?t:void 0,sortBy:i?i.fieldId:void 0}},_renderInitialContent:function(e){var i=t.map(e.fields,function(e){return t.extend({},e,{meta:JSON.stringify({sortJql:e.sortJql})})});return n("<div></div>").addClass("order-dropdown").html(s.orderByOptions({options:i,footer:this._getFooterText(e)}))},_onDropdownShown:function(e,t){this._initSingleSelect(t)},_onDropdownHidden:function(){this._removeTipsy(),n("div.order-dropdown").remove(),this._inlineLayer=null},_onFieldSelected:function(e,i){var s=new n.Event(o.ISSUE_TABLE_REORDER);r.trigger(s),s.isDefaultPrevented()||t.defer(function(){this.selectControl.outstandingRequest&&this.selectControl.outstandingRequest.reject(),a.current.hide();var e=i.meta();this.model.doSort(e.sortJql)}.bind(this))},_getFooterText:function(e){if("number"==typeof e.matchesCount&&"number"==typeof e.maxResults){var t=e.matchesCount-e.maxResults;if(t>0)return AJS.format("{0} more fields...",t)}return""},_deferredAddTipsyToFooter:function(e){if(this._inlineLayer){var i=e.matchesCount,n=Math.min(e.matchesCount,e.maxResults),r=AJS.format("Showing {0} of {1} matching fields. Find more fields by typing in the search box.",n,i),o=this;t.defer(function(){o._tipsyTrigger=new f({el:o._inlineLayer.$layer.find(".aui-list-section-footer"),tipsy:{title:function(){return r},className:"tipsy-front"}})})}},_removeTipsy:function(){this._tipsyTrigger&&(this._tipsyTrigger.hide(),this._tipsyTrigger=null)}})});
//# sourceMappingURL=OrderByDropDownView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:orderby', location = 'orderby/OrderBy.js' */
define("jira/components/orderby",["require"],function(r){"use strict";var t=r("jira/components/orderby/orderbyview"),e=r("jira/components/orderby/orderbymodel");return{create:function(r){var n,o;return r=r||{},n=new e({sortBy:r.sortBy,jql:r.jql}),o=new t({model:n}),{onSort:function(){return n.onSort.apply(n,arguments),this},offSort:function(r){return n.off("sort",r),this},render:function(){return o.render(),this},setElement:function(r){return o.setElement(r),this},setJql:function(r){return n.setJql(r),this},setSortBy:function(r){return n.setSortBy(r),this}}}}});
//# sourceMappingURL=OrderBy-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:orderby', location = 'orderby/eventtypes.js' */
define("jira/components/orderby/eventtypes",[],function(){"use strict";return{ISSUE_TABLE_REORDER:"issueTableReorder"}});
//# sourceMappingURL=eventtypes-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:orderby', location = 'orderby/amd-wrapper.js' */
define("jira/components/orderby/templates",function(){"use strict";return JIRA.Templates.OrderBy}),AJS.namespace("JIRA.Templates.OrderBy",null,require("jira/components/orderby/templates"));
//# sourceMappingURL=amd-wrapper-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:orderby', location = 'orderby/namespace.js' */
AJS.namespace("JIRA.Components.OrderBy",null,require("jira/components/orderby")),AJS.namespace("JIRA.Issues.OrderByDropDownView",null,require("jira/components/orderby/orderbydropdownview")),AJS.namespace("JIRA.Issues.OrderByView",null,require("jira/components/orderby/orderbyview")),AJS.namespace("JIRA.Issues.OrderByModel",null,require("jira/components/orderby/orderbymodel"));
//# sourceMappingURL=namespace-min.js.map
;
;
/* module-key = 'com.atlassian.plugin.jslibs:backbone.paginator-2.0.2-factory', location = 'factories/backbone.paginator/2.0.2/backbone.paginator-2.0.2-factory.js' */
(function(m){define("atlassian/libs/factories/backbone.paginator-2.0.2",function(){return function(v,i){m.call({_:v,Backbone:i});var l=i.PageableCollection.noConflict();l.VERSION="2.0.2";return l}})})(function(){var m=this.Backbone,v=m.PageableCollection,i=this._,l=function(a,b){if(!i.isNumber(a)||i.isNaN(a)||!i.isFinite(a)||~~a!==a)throw new TypeError("`"+b+"` must be a finite integer");return a},D=function(a,b,d){if((a=a._events[b])&&a.length){var c=a[a.length-1],e=c.callback;c.callback=function(){try{e.apply(this,
arguments),d()}catch(a){throw a;}finally{c.callback=e}}}else d()},n=i.extend,o=i.omit,t=i.clone,p=i.each,H=i.pick,I=i.contains,E=i.isEmpty,F=i.pairs,N=i.invert,z=i.isArray,A=i.isFunction,J=i.isObject,x=i.keys,y=i.isUndefined,u=Math.ceil,K=Math.floor,G=Math.max,B=m.Collection.prototype,L=/[\s'"]/g,O=/[<>\s'"]/g,M=m.PageableCollection=m.Collection.extend({state:{firstPage:1,lastPage:null,currentPage:null,pageSize:25,totalPages:null,totalRecords:null,sortKey:null,order:-1},mode:"server",queryParams:{currentPage:"page",
pageSize:"per_page",totalPages:"total_pages",totalRecords:"total_entries",sortKey:"sort_by",order:"order",directions:{"-1":"asc",1:"desc"}},constructor:function(a,b){B.constructor.apply(this,arguments);var b=b||{},d=this.mode=b.mode||this.mode||w.mode,c=n({},w.queryParams,this.queryParams,b.queryParams||{});c.directions=n({},w.queryParams.directions,this.queryParams.directions,c.directions||{});this.queryParams=c;c=this.state=n({},w.state,this.state,b.state||{});c.currentPage=null==c.currentPage?
c.firstPage:c.currentPage;z(a)||(a=a?[a]:[]);a=a.slice();"server"!=d&&(null==c.totalRecords&&!E(a))&&(c.totalRecords=a.length);this.switchMode(d,n({fetch:!1,resetState:!1,models:a},b));var e=b.comparator;c.sortKey&&!e&&this.setSorting(c.sortKey,c.order,b);if("server"!=d&&(d=this.fullCollection,e&&b.full&&(this.comparator=null,d.comparator=e),b.full&&d.sort(),a&&!E(a)))this.reset(a,n({silent:!0},b)),this.getPage(c.currentPage),a.splice.apply(a,[0,a.length].concat(this.models));this._initState=t(this.state)},
_makeFullCollection:function(a,b){var d=["url","model","sync","comparator"],c=this.constructor.prototype,e,f,h,g={};e=0;for(f=d.length;e<f;e++)h=d[e],y(c[h])||(g[h]=c[h]);g=new (m.Collection.extend(g))(a,b);e=0;for(f=d.length;e<f;e++)h=d[e],this[h]!==c[h]&&(g[h]=this[h]);return g},_makeCollectionEventHandler:function(a,b){return function(d,c,e,f){var h=a._handlers;p(x(h),function(d){var c=h[d];a.off(d,c);b.off(d,c)});var g=t(a.state),r=g.firstPage,j=g.pageSize,k=(0===r?g.currentPage:g.currentPage-
1)*j,q=k+j;if("add"==d){var i,m,l,s,f=f||{};e==b?(m=b.indexOf(c),m>=k&&m<q&&(s=a,i=l=m-k)):(i=a.indexOf(c),s=b,l=!y(f.at)?f.at+k:k+i);f.onRemove||(++g.totalRecords,delete f.onRemove);a.state=a._checkState(g);if(s){s.add(c,n({},f||{},{at:l}));var o=i>=j?c:!y(f.at)&&l<q&&a.length>j?a.at(j):null;o&&D(e,d,function(){a.remove(o,{onAdd:true})})}}if("remove"==d)if(f.onAdd)delete f.onAdd;else{--g.totalRecords?(i=g.totalPages=u(g.totalRecords/j),g.lastPage=0===r?i-1:i||r,g.currentPage>i&&(g.currentPage=g.lastPage)):
(g.totalRecords=null,g.totalPages=null);a.state=a._checkState(g);var C,r=f.index;e==a?((C=b.at(q))?D(a,d,function(){a.push(C,{onRemove:true})}):!a.length&&g.totalRecords&&a.reset(b.models.slice(k-j,q-j),n({},f,{parse:!1})),b.remove(c)):r>=k&&r<q&&((C=b.at(q-1))&&D(a,d,function(){a.push(C,{onRemove:true})}),a.remove(c),!a.length&&g.totalRecords&&a.reset(b.models.slice(k-j,q-j),n({},f,{parse:!1})))}if("reset"==d)if(f=e,e=c,e==a&&null==f.from&&null==f.to)g=b.models.slice(0,k),j=b.models.slice(k+a.models.length),
b.reset(g.concat(a.models).concat(j),f);else if(e==b){if(!(g.totalRecords=b.models.length))g.totalRecords=null,g.totalPages=null;"client"==a.mode&&(g.lastPage=g.currentPage=g.firstPage);a.state=a._checkState(g);a.reset(b.models.slice(k,q),n({},f,{parse:!1}))}"sort"==d&&(f=e,c===b&&a.reset(b.models.slice(k,q),n({},f,{parse:!1})));p(x(h),function(d){var c=h[d];p([a,b],function(a){a.on(d,c);a=a._events[d]||[];a.unshift(a.pop())})})}},_checkState:function(a){var b=this.mode,d=this.links,c=a.totalRecords,
e=a.pageSize,f=a.currentPage,h=a.firstPage,g=a.totalPages;if(null!=c&&null!=e&&null!=f&&null!=h&&("infinite"==b?d:1)){c=l(c,"totalRecords");e=l(e,"pageSize");f=l(f,"currentPage");h=l(h,"firstPage");if(1>e)throw new RangeError("`pageSize` must be >= 1");g=a.totalPages=u(c/e);if(0>h||1<h)throw new RangeError("`firstPage must be 0 or 1`");a.lastPage=0===h?G(0,g-1):g||h;if("infinite"==b){if(!d[f+""])throw new RangeError("No link found for page "+f);}else if(f<h||0<g&&(h?f>g:f>=g))throw new RangeError("`currentPage` must be firstPage <= currentPage "+
(h?">":">=")+" totalPages if "+h+"-based. Got "+f+".");}return a},setPageSize:function(a,b){var a=l(a,"pageSize"),b=b||{first:!1},d=this.state,c=u(d.totalRecords/a),e=c?G(d.firstPage,K(c*d.currentPage/d.totalPages)):d.firstPage,d=this.state=this._checkState(n({},d,{pageSize:a,currentPage:b.first?d.firstPage:e,totalPages:c}));return this.getPage(d.currentPage,o(b,["first"]))},switchMode:function(a,b){if(!I(["server","client","infinite"],a))throw new TypeError('`mode` must be one of "server", "client" or "infinite"');
var b=b||{fetch:!0,resetState:!0},d=this.state=b.resetState?t(this._initState):this._checkState(n({},this.state));this.mode=a;var c=this,e=this.fullCollection,f=this._handlers=this._handlers||{},h;if("server"!=a&&!e){e=this._makeFullCollection(b.models||[],b);e.pageableCollection=this;this.fullCollection=e;var g=this._makeCollectionEventHandler(this,e);p(["add","remove","reset","sort"],function(a){f[a]=h=i.bind(g,{},a);c.on(a,h);e.on(a,h)});e.comparator=this._fullComparator}else"server"==a&&e&&(p(x(f),
function(a){h=f[a];c.off(a,h);e.off(a,h)}),delete this._handlers,this._fullComparator=e.comparator,delete this.fullCollection);if("infinite"==a)for(var r=this.links={},j=d.firstPage,k=u(d.totalRecords/d.pageSize),j=0===j?G(0,k-1):k||j,d=d.firstPage;d<=j;d++)r[d]=this.url;else this.links&&delete this.links;return b.fetch?this.fetch(o(b,"fetch","resetState")):this},hasPreviousPage:function(){var a=this.state,b=a.currentPage;return"infinite"!=this.mode?b>a.firstPage:!!this.links[b-1]},hasNextPage:function(){var a=
this.state,b=this.state.currentPage;return"infinite"!=this.mode?b<a.lastPage:!!this.links[b+1]},getFirstPage:function(a){return this.getPage("first",a)},getPreviousPage:function(a){return this.getPage("prev",a)},getNextPage:function(a){return this.getPage("next",a)},getLastPage:function(a){return this.getPage("last",a)},getPage:function(a,b){var d=this.mode,c=this.fullCollection,b=b||{fetch:!1},e=this.state,f=e.firstPage,h=e.currentPage,g=e.lastPage,i=e.pageSize,j=a;switch(a){case "first":j=f;break;
case "prev":j=h-1;break;case "next":j=h+1;break;case "last":j=g;break;default:j=l(a,"index")}this.state=this._checkState(n({},e,{currentPage:j}));b.from=h;b.to=j;e=(0===f?j:j-1)*i;c=c&&c.length?c.models.slice(e,e+i):[];if(("client"==d||"infinite"==d&&!E(c))&&!b.fetch)return this.reset(c,o(b,"fetch")),this;"infinite"==d&&(b.url=this.links[j]);return this.fetch(o(b,"fetch"))},getPageByOffset:function(a,b){if(0>a)throw new RangeError("`offset must be > 0`");var a=l(a),d=K(a/this.state.pageSize);0!==
this.state.firstPage&&d++;d>this.state.lastPage&&(d=this.state.lastPage);return this.getPage(d,b)},sync:function(a,b,d){var c=this;if("infinite"==c.mode){var e=d.success,f=c.state.currentPage;d.success=function(a,b,i){var j=c.links,k=c.parseLinks(a,n({xhr:i},d));k.first&&(j[c.state.firstPage]=k.first);k.prev&&(j[f-1]=k.prev);k.next&&(j[f+1]=k.next);e&&e(a,b,i)}}return(B.sync||m.sync).call(c,a,b,d)},parseLinks:function(a,b){var d={},c=b.xhr.getResponseHeader("Link");if(c){var e=["first","prev","next"];
p(c.split(","),function(a){var a=a.split(";"),b=a[0].replace(O,""),a=a.slice(1);p(a,function(a){var c=a.split("="),a=c[0].replace(L,""),c=c[1].replace(L,"");"rel"==a&&I(e,c)&&(d[c]=b)})})}return d},parse:function(a,b){var d=this.parseState(a,t(this.queryParams),t(this.state),b);d&&(this.state=this._checkState(n({},this.state,d)));return this.parseRecords(a,b)},parseState:function(a,b,d){if(a&&2===a.length&&J(a[0])&&z(a[1])){var c=t(d),e=a[0];p(F(o(b,"directions")),function(a){var b=a[0],a=a[1],d=
e[a];!y(d)&&!i.isNull(d)&&(c[b]=e[a])});e.order&&(c.order=1*N(b.directions)[e.order]);return c}},parseRecords:function(a){return a&&2===a.length&&J(a[0])&&z(a[1])?a[1]:a},fetch:function(a){var a=a||{},b=this._checkState(this.state),d=this.mode;"infinite"==d&&!a.url&&(a.url=this.links[b.currentPage]);var c=a.data||{},e=a.url||this.url||"";A(e)&&(e=e.call(this));var f=e.indexOf("?");if(-1!=f){for(var h=e.slice(f+1),g,i,j={},k=decodeURIComponent,m=h.split("&"),l=0,p=m.length;l<p;l++)g=m[l].split("="),
h=g[0],g=g[1]||!0,h=k(h),g=k(g),i=j[h],z(i)?i.push(g):j[h]=i?[i,g]:g;n(c,j);e=e.slice(0,f)}a.url=e;a.data=c;h="client"==this.mode?H(this.queryParams,"sortKey","order"):o(H(this.queryParams,x(w.queryParams)),"directions");l=F(h);e=t(this);for(f=0;f<l.length;f++)j=l[f],m=j[0],k=j[1],k=A(k)?k.call(e):k,null!=b[m]&&null!=k&&(c[k]=b[m]);b.sortKey&&b.order?(f=A(h.order)?h.order.call(e):h.order,c[f]=this.queryParams.directions[b.order+""]):b.sortKey||delete c[h.order];b=F(o(this.queryParams,x(w.queryParams)));
for(f=0;f<b.length;f++)j=b[f],k=j[1],k=A(k)?k.call(e):k,null!=k&&(c[j[0]]=k);if("server"!=d){var u=this,s=this.fullCollection,v=a.success;a.success=function(b,c,e){e=e||{};y(a.silent)?delete e.silent:e.silent=a.silent;var f=b.models;if(d=="client")s.reset(f,e);else{s.add(f,n({at:s.length},n(e,{parse:false})));u.trigger("reset",u,e)}v&&v(b,c,e)};return B.fetch.call(this,n({},a,{silent:!0}))}return B.fetch.call(this,a)},_makeComparator:function(a,b,d){var c=this.state,a=a||c.sortKey,b=b||c.order;if(a&&
b)return d||(d=function(a,b){return a.get(b)}),function(c,f){var h=d(c,a),g=d(f,a),i;1===b&&(i=h,h=g,g=i);return h===g?0:h<g?-1:1}},setSorting:function(a,b,d){var c=this.state;c.sortKey=a;c.order=b=b||c.order;var c=this.fullCollection,e=!1,f=!1;a||(e=f=!0);var h=this.mode,d=n({side:"client"==h?h:"server",full:!0},d),a=this._makeComparator(a,b,d.sortValue),b=d.full,d=d.side;"client"==d?b?(c&&(c.comparator=a),e=!0):(this.comparator=a,f=!0):"server"==d&&!b&&(this.comparator=a);e&&(this.comparator=null);
f&&c&&(c.comparator=null);return this}}),w=M.prototype;m.PageableCollection.noConflict=function(){m.PageableCollection=v;return M}});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:backbone.paginator', location = 'libs/backbone.paginator.js' */
define("jira/components/libs/backbone.paginator",["require"],function(n){"use strict";var a=n("atlassian/libs/factories/backbone.paginator-2.0.2"),e=n("jira/components/libs/backbone"),i=n("jira/components/libs/underscore");return a(i,e)});
//# sourceMappingURL=backbone.paginator-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:search', location = 'search/Search.js' */
define("jira/components/search",["require"],function(e){"use strict";var s=e("wrm/context-path"),t=e("jira/components/libs/backbone"),r=e("jira/components/libs/underscore"),a=e("jquery"),n=e("jira/components/search/results");return t.Collection.extend({url:function(){return s()+"/rest/issueNav/1/issueTable"},searchParams:{jql:"",filterId:null,columnConfig:"explicit",columns:[],layoutKey:"split-view",startIndex:0},sync:function(){var e=r.toArray(arguments),s=e[2];return s.type="POST",s.headers={"X-Atlassian-Token":"no-check"},s.data={},r.each(r.keys(this.searchParams),function(e){null!==this.searchParams[e]&&(s.data[e]=this.searchParams[e])},this),t.Collection.prototype.sync.apply(this,e)},parse:function(e){var s=e&&e.issueTable;return s&&s.issueIds?r.map(s.issueIds,function(e,t){return{id:e,key:s.issueKeys[t]}}):[]},update:function(e){this.set(this.parse(e))},setPreloadedData:function(e){return this.preloadedData=e,this.reset(e.response,{parse:!0}),this.parseResults(e.jql,e.response)},parseResults:function(e,s){return new n([],{issues:this.toJSON(),pageSize:s.issueTable.pageSize,totalRecordsInDB:s.issueTable.total,totalRecordsInSearch:this.length,jql:e})},search:function(e){this.searchParams.jql=e;var s=new a.Deferred;return this.preloadedData&&this.preloadedData.jql===e?(this.reset(this.preloadedData.response,{parse:!0}),s.resolve(this.parseResults(e,this.preloadedData.response)),delete this.preloadedData):this.fetch({reset:!0,success:function(e,t){s.resolve(this.parseResults(e.searchParams.jql,t))}.bind(this),error:function(e,t){s.reject(t)}}),s.promise()}})});
//# sourceMappingURL=Search-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:search', location = 'search/SearchResult.js' */
define("jira/components/search/result",["require"],function(e){"use strict";var s=e("wrm/context-path"),i=e("jira/components/libs/backbone");return i.Model.extend({initialize:function(){this.url=function(){return s()+"/rest/api/2/issue/"+this.id+"?fields=summary,status,issuetype"}},parse:function(e){var s={};return e.inaccessible?(s.id=parseInt(e.id,10),s.key=e.key,s.inaccessible=!0):(s.id=parseInt(e.id,10),s.key=e.key,e.fields?(s.summary=e.fields.summary,s.status=e.fields.status.name,s.type={description:e.fields.issuetype.description,iconUrl:e.fields.issuetype.iconUrl,name:e.fields.issuetype.name}):(s.status=e.status,s.summary=e.summary,s.type=e.type)),s}})});
//# sourceMappingURL=SearchResult-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:search', location = 'search/SearchResults.js' */
define("jira/components/search/results",["require"],function(e){"use strict";var t=e("wrm/context-path"),s=e("jira/components/libs/backbone.paginator"),i=e("jira/components/libs/underscore"),n=e("jquery"),r=e("jira/components/search/result"),a=e("jira/legacy/deprecator"),o=s.extend({initialize:function(e,t){t=t||{},this.allIssues=t.issues,this.state.pageSize=t.pageSize,this.state.totalRecords=t.totalRecordsInSearch,this.totalRecordsInDB=t.totalRecordsInDB,this.allowNoSelection=t.allowNoSelection,this.jql=t.jql,this.hasLoadedTotalCountFromServer=void 0===t.hasLoadedTotalCountFromServer||t.hasLoadedTotalCountFromServer},model:r,url:function(){return t()+"/rest/issueNav/1/issueTable/stable"},state:{firstPage:0,currentPage:0},queryParams:{currentPage:null,pageSize:null,totalPages:null,totalRecords:null,sortKey:null,directions:null},sync:function(){var e=i.toArray(arguments),t=e[2];return t.type="POST",t.headers={"X-Atlassian-Token":"no-check"},t.data.layoutKey="split-view",t.data.id=this._getStableKeys(),s.prototype.sync.apply(this,e)},isAtTheEndOfStableSearch:function(){var e=this.state.currentPage===this.state.lastPage,t=this.totalRecordsInDB>this.state.totalRecords;return e&&t},setPreloadedData:function(e){this.preloadedData=e,this.reset(e.response,{parse:!0})},_getStableKeys:function(e){var t="undefined"==typeof e?this._getStartIndex():e;return i.pluck(this.allIssues,"id").slice(t,t+this.state.pageSize)},_getStartIndex:function(){return this.state.pageSize*this.state.currentPage},_loadPageAndSelect:function(e,t){var s=new n.Deferred,i={fetch:!0,reset:!0};return this.trigger("before:loadpage",{pageToLoad:e}),this.getPage(e,i).done(function(){this.select(t),s.resolve(this.length)}.bind(this)).fail(function(e){s.reject(e),this.trigger("error:loadpage",e)}.bind(this)),s.promise()},fetch:function(e){var t;return this.preloadedData&&i.isEqual(this.preloadedData.ids,this._getStableKeys(this.state.pageSize*e.to))?(this.reset(this.preloadedData.response,{parse:!0}),t=(new n.Deferred).resolve().promise(),delete this.preloadedData):t=s.prototype.fetch.call(this,e),t},jumpToPage:function(e){var t=new n.Deferred;return this._loadPageAndSelect(e,"first").done(t.resolve).fail(t.reject),t.promise()},jumpToPageForIssue:function(e){for(var t,s,i=new n.Deferred,a="number"==typeof e,o="string"==typeof e,l=0,u=this.allIssues.length;l<u&&!s;l++)(a&&this.allIssues[l].id===e||o&&this.allIssues[l].key===e)&&(s=this.allIssues[l],t=Math.floor(l/this.state.pageSize));return"number"==typeof t&&isFinite(t)?this._loadPageAndSelect(t,s.id).done(i.resolve):this.allowNoSelection?this._loadPageAndSelect("first",null).done(function(){this.trigger("selectIssueNotInList",new r({id:a?e:void 0,key:o?e:void 0}))}.bind(this)).done(i.resolve):this._loadPageAndSelect("first","first").done(i.resolve),i.promise()},parse:function(e,t){var n=t.data,r=e&&e.issueTable,a=this.allIssues;return i.each(r.table,function(e,t){if(null===e){var s=n.id[t],o=i.findWhere(a,{id:s});o&&(r.table[t]={id:o.id,key:o.key,inaccessible:!0})}}),s.prototype.parse.call(this,r)},parseState:function(){return{}},parseRecords:function(e){return e.table?e.table:[]},select:function(e){if("string"==typeof e)switch(e){case"first":e=this.at(0);break;case"last":e=this.at(this.length-1);break;default:e=this.findWhere({key:e})}else"number"==typeof e&&(e=this.get(e));this.selected!==e&&this.unselect(),e&&(this.selected=e,this.selected.trigger("select",this.selected))},unselect:function(){this.selected&&this.selected.trigger("unselect",this.selected),this.selected=null},navigate:function(e){var t=this.indexOf(this.selected),s=t+e,i=this.at(s);return i?this.select(i):e>0&&this.hasNextPage()?this._loadPageAndSelect("next","first"):e<0&&this.hasPreviousPage()&&this._loadPageAndSelect("prev","last"),{current:s,total:this.length}},selectNext:function(){return this.navigate(1)},selectPrev:function(){return this.navigate(-1)},_getIssueByNavigation:function(e){var t=this.indexOf(this.selected),s=t+e,i=this.at(s),r=new n.Deferred;return i?(this.select(i),r.resolve(i)):e>0&&this.hasNextPage()?this._loadPageAndSelect("next","first").done(function(){r.resolve(this.selected)}.bind(this)):e<0&&this.hasPreviousPage()?this._loadPageAndSelect("prev","last").done(function(){r.resolve(this.selected)}.bind(this)):r.reject(),r.promise()},getNextIssue:function(){return this._getIssueByNavigation(1)},getPreviousIssue:function(){return this._getIssueByNavigation(-1)},updateSelectedIssue:function(){this.selected&&this.selected.fetch()},updateIssue:function(e){var t=this.get(e);t&&t.fetch()},hasIssueInSearch:function(e){return!!i.where(this.allIssues,{key:e}).length},isEmptySearch:function(){return!this.allIssues.length},removeAndUpdateSelectionIfNeeded:function(e){var t,s=e.get("key"),r=i.chain(this.allIssues).map(function(e){return e.key}).value(),a=i.indexOf(r,s),o=a+1<r.length,l=a-1>=0;t=o?r[a+1]:l?r[a-1]:null;for(var u=0;u<this.allIssues.length;u++){var h=this.allIssues[u];if(h.key===s){this.allIssues.splice(u,1);break}}return this.state.totalRecords=this.state.totalRecords-1,this.totalRecordsInDB=this.totalRecordsInDB-1,this.unselect(),this.remove(e),t?this.jumpToPageForIssue(t).done(function(){this.trigger("issueDeleted")}.bind(this)):(new n.Deferred).resolve(0).promise().done(function(){this.trigger("issueDeleted")}.bind(this))},getIssueKeyForIndex:function(e){var t=this.allIssues[e];if(t)return t.key},getIssueAtGlobalIndex:function(e){return this.allIssues[e]},getPositionOfIssueInSearchResults:function(e){var t=i.indexOf(i.pluck(this.allIssues,"id"),e);return t>-1?t:null},getPositionOfIssueInPage:function(e){var t=this.get(e),s=this.indexOf(t);return s>-1?s:null},getTotalIssues:function(){return this.getTotalIssuesInSearch()},getTotalIssuesInSearch:function(){return this.allIssues.length},getTotalIssuesInDb:function(){return this.totalRecordsInDB},hasLoadedTotalCount:function(){return this.hasLoadedTotalCountFromServer}});return a.prop(o.prototype,"getTotalIssues",{removeInVersion:"8.0",alternativeName:"jira/components/search/results#getTotalIssuesInSearch()",sinceVersion:"7.1",displayName:"Method jira/components/search/results#getTotalIssues()"}),o});
//# sourceMappingURL=SearchResults-min.js.map
;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:brace', location = '/inline-issue-create/lib/backbone.brace/backbone.brace-amd.js' */
define("jira/inline-issue-create/lib/backbone",["atlassian/libs/factories/backbone-1.0.0","atlassian/libs/underscore-1.5.2","jquery"],function(a,b,c){return a(b,c)});define("jira/inline-issue-create/lib/brace",["jira/inline-issue-create/lib/backbone","atlassian/libs/underscore-1.5.2","atlassian/libs/factories/brace-2014.09.03"],function(b,a,c){return c(a,Backbone)});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:marionette', location = '/inline-issue-create/lib/backbone.marionette/backbone.marionette-amd.js' */
define("jira/inline-issue-create/lib/marionette",["jquery","jira/inline-issue-create/lib/backbone","atlassian/libs/underscore-1.5.2","atlassian/libs/factories/marionette-2.1.0"],function(e,g,b,d){var f=d(b,g);var c={unwrapTemplate:function a(){var h=this.$el.children();if(h.length>1){AJS.warn("[IIC] Unwrapping template with more than one child - some content will be lost")}var i=e(h.get(0));if(this.$el.parent().length){this.$el.replaceWith(i);this.setElement(i)}else{this.setElement(i)}}};b.extend(f.ItemView.prototype,c);b.extend(f.CompositeView.prototype,c);b.extend(f.CollectionView.prototype,c);b.extend(f.LayoutView.prototype,c);return f});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:placeholder', location = '/inline-issue-create/lib/jquery-placeholder.js' */
/*! MIT License - https://github.com/mathiasbynens/jquery-placeholder/blob/master/LICENSE-MIT.txt */
/*! http://mths.be/placeholder v2.0.8 by @mathias */
(function(i,k,f){var b=Object.prototype.toString.call(i.operamini)=="[object OperaMini]";var a="placeholder" in k.createElement("input")&&!b;var g="placeholder" in k.createElement("textarea")&&!b;var l=f.fn;var e=f.valHooks;var c=f.propHooks;var n;var m;if(a&&g){m=l.placeholder=function(){return this};m.input=m.textarea=true}else{m=l.placeholder=function(){var p=this;p.filter((a?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":d,"blur.placeholder":h}).data("placeholder-enabled",true).trigger("blur.placeholder");return p};m.input=a;m.textarea=g;n={get:function(q){var p=f(q);var r=p.data("placeholder-password");if(r){return r[0].value}return p.data("placeholder-enabled")&&p.hasClass("placeholder")?"":q.value},set:function(q,s){var p=f(q);var r=p.data("placeholder-password");if(r){return r[0].value=s}if(!p.data("placeholder-enabled")){return q.value=s}if(s==""){q.value=s;if(q!=o()){h.call(q)}}else{if(p.hasClass("placeholder")){d.call(q,true,s)||(q.value=s)}else{q.value=s}}return p}};if(!a){e.input=n;c.value=n}if(!g){e.textarea=n;c.value=n}f(function(){f(k).delegate("form","submit.placeholder",function(){var p=f(".placeholder",this).each(d);setTimeout(function(){p.each(h)},10)})});f(i).bind("beforeunload.placeholder",function(){f(".placeholder").each(function(){this.value=""})})}function j(q){var p={};var r=/^jQuery\d+$/;f.each(q.attributes,function(t,s){if(s.specified&&!r.test(s.name)){p[s.name]=s.value}});return p}function d(q,r){var p=this;var s=f(p);if(p.value==s.attr("placeholder")&&s.hasClass("placeholder")){if(s.data("placeholder-password")){s=s.hide().next().show().attr("id",s.removeAttr("id").data("placeholder-id"));if(q===true){return s[0].value=r}s.focus()}else{p.value="";s.removeClass("placeholder");p==o()&&p.select()}}}function h(){var t;var p=this;var s=f(p);var r=this.id;if(p.value==""){if(p.type=="password"){if(!s.data("placeholder-textinput")){try{t=s.clone().attr({type:"text"})}catch(q){t=f("<input>").attr(f.extend(j(this),{type:"text"}))}t.removeAttr("name").data({"placeholder-password":s,"placeholder-id":r}).bind("focus.placeholder",d);s.data({"placeholder-textinput":t,"placeholder-id":r}).before(t)}s=s.removeAttr("id").hide().prev().attr("id",r).show()}s.addClass("placeholder");s[0].value=s.attr("placeholder")}else{s.removeClass("placeholder")}}function o(){try{return k.activeElement}catch(p){}}}(this,document,jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:util', location = '/inline-issue-create/util/util.js' */
define("jira/inline-issue-create/util",["jquery"],function(g){var j=(document.body||document.documentElement).style;var d=["oAnimationEnd","MSAnimationEnd","mozAnimationEnd","webkitAnimationEnd","animationend"];var k;return{cssAnimationsSupport:j.transition!==undefined||j.WebkitTransition!==undefined||j.MozTransition!==undefined||j.MsTransition!==undefined||j.OTransition!==undefined,addClassAndRemoveOnAnimationEnd:function c(o,n,l){var m;o=g(o);function p(){for(m=0;m<d.length;m++){o.off(d[m],p)}o.removeClass(n)}if(this.cssAnimationsSupport){for(m=0;m<d.length;m++){o.on(d[m],p)}}else{setTimeout(function(){o.removeClass(n)},l||1000)}o.addClass(n)},scrollElementToView:function h(q,l){var m=q[0].getBoundingClientRect();var p=l[0].getBoundingClientRect();var o=q.scrollTop();var n=0;if(p.top<m.top){n=p.top-m.top}else{if(m.bottom<p.bottom){n=p.bottom-m.bottom}}if(n!==0){q.scrollTop(o+n)}},keyCode:{ENTER:13,ESC:27},after:function b(m,o,l){if(!_.isFunction(l)){throw"Body is not a function"}m[o]=_.wrap(m[o],function n(q){var r=Array.prototype.slice.call(arguments,1);var p=q.apply(m,r);l.apply(this,_.union([p],r));return p})},error:function i(m){if(console&&console.error){var l=Array.prototype.slice.call(arguments,1);if(_.isString(l[0])){l[0]="[IIC]"+l[0]}console.error.apply(console,l)}},debug:function a(m){if(this.shouldDisplay(m)){if(console&&console.debug){var l=Array.prototype.slice.call(arguments,1);if(_.isString(l[0])){l[0]="[IIC]"+l[0]}console.debug.apply(console,l)}}},trace:function f(m){if(this.shouldDisplay(m)){if(console&&console.debug){var l=Array.prototype.slice.call(arguments,1);if(_.isString(l[0])){l[0]="[IIC]"+l[0]}console.debug.apply(console,l)}}},shouldDisplay:function(l){if(k==="all"||l===k){return true}return false},showLogsFor:function e(l){k=l}}});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-preffilable-create-issue-dialog', location = '/inline-issue-create/components/prefillable-create-issue-dialog/custom-form-container-factory.js' */
define("jira/inline-issue-create/prefillable-create-issue-dialog/custom-form-container-factory",["jquery","underscore"],function(b,a){var c=function(){var f=JIRA.Forms.Container;return f.extend({lazyInit:function e(){var g=this.options.call(this);this.prefilledValues=g.prefilledValues;this.prefilledValues.fieldsToRetain=a.keys(g.prefilledValues);this.prefilledValues=b.param(g.prefilledValues);this.options=function h(){return g};return this._super()},render:function d(){var g=this,h=b.Deferred();this.lazyInit();if(a.isFunction(g.model.markFieldAsDirty)){Object.keys(this.options().prefilledValues).forEach(function(k){g.model.markFieldAsDirty(k)})}g.model.getUseConfigurableForm().done(function j(k){if(k===true){g.configurableForm.render(g.prefilledValues).done(function l(n,m){h.resolveWith(g,[g.$element]);g.$element.append(m)})}else{g.unconfigurableForm.render(g.prefilledValues).done(function l(n,m){h.resolveWith(g,[g.$element,m]);g.$element.append(m)})}}).fail(function i(){h.resolveWith(g,[g.$element])});return h.promise()}})};return{build:c}});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-preffilable-create-issue-dialog', location = '/inline-issue-create/components/prefillable-create-issue-dialog/prefillable-create-issue-dialog-init-form.js' */
define("jira/inline-issue-create/prefillable-create-issue-dialog/init-form",["underscore","jira/inline-issue-create/prefillable-create-issue-dialog/custom-form-container-factory"],function(b,a){return function(t,m){if(!b.isObject(m)){throw new Error("You must provide promise that will resolve with fieldValues to create this form. Use standard create issue form if you have none.")}var k=JIRA.Forms.CreateIssueModel;var p=JIRA.Forms.ConfigurableCreateIssueForm;var l=JIRA.Forms.UnconfigurableCreateIssueForm;var e=JIRA.Forms.CreateIssueError;var d=JIRA.applyErrorsToForm;var i=JIRA.applyErrorMessageToForm;var s;m.done(function n(u){s=u;s.prefilledFields=s.prefilledFields||{};s.errors=s.errors||{};s.errorMessages=s.errorMessages||{}}).fail(function j(){s={prefilledFields:{},errors:{},errorMessages:{}}});var f=a.build();var c=new f(function q(){var x={title:"Create issue",id:"prefillable-create-issue-dialog",globalEventNamespaces:["PrefillableCreateIssueDialog"],issueType:undefined};var u=new k({projectId:undefined,issueType:undefined});var w=new p({model:u,title:x.title,globalEventNamespaces:x.globalEventNamespaces});var v=new l({model:u,title:x.title,globalEventNamespaces:x.globalEventNamespaces});return{globalEventNamespaces:x.globalEventNamespaces,model:u,errorHandler:new e(),configurableForm:w,unconfigurableForm:v,prefilledValues:s.prefilledFields}});var o=c.asDialog({windowTitle:"Create issue",id:"prefillable-create-issue-dialog"});o.options.delayShowUntil=function h(){return m};c.asDialog=function g(){return c.dialog};o.onContentReady(function r(){if(b.keys(s.errors).length){s.errorMessages.unshift("Please fix the fields marked below.");d(c.$element,s.errors)}if(s.errorMessages.length){i(c.$element,s.errorMessages.join("<br/>"))}});t.resolve(c)}});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-preffilable-create-issue-dialog', location = '/inline-issue-create/components/prefillable-create-issue-dialog/prefillable-create-issue-dialog.js' */
define("jira/inline-issue-create/prefillable-create-issue-dialog",["wrm/require","jquery","underscore","jira/inline-issue-create/lib/marionette","jira/loading/loading","jira/flag","jira/inline-issue-create/prefillable-create-issue-dialog/init-form"],function(e,d,j,g,h,l,f){var a=AJS.dim;var i=AJS.undim;var c=function(){a();h.showLoadingIndicator()};var b=function(){i();h.hideLoadingIndicator()};var k=function k(n,o){var m=new d.Deferred();if(o){c()}e(["wr!com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue"],f.bind(undefined,m,n)).fail(function(){if(o){b()}l.showErrorMsg(null,"The Jira server could not be contacted. This may be a temporary glitch or the server may be down.")});return m.promise()};return{createPrefillableCreateIssueForm:k}});define("jira/inline-issue-create/prefillable-create-issue-dialog/custom-form-container-factory",["jquery","underscore"],function(b,a){var d=JIRA.Forms.Container;var c=function(){return d.extend({lazyInit:function f(){var g=this.options.call(this);this.prefilledValues=g.prefilledValues;this.prefilledValues.fieldsToRetain=a.keys(g.prefilledValues);this.prefilledValues=b.param(g.prefilledValues);this.options=function h(){return g};return this._super()},render:function e(){var g=this,h=b.Deferred();this.lazyInit();if(a.isFunction(g.model.markFieldAsDirty)){Object.keys(this.options().prefilledValues).forEach(function(k){g.model.markFieldAsDirty(k)})}g.model.getUseConfigurableForm().done(function j(k){if(k===true){g.configurableForm.render(g.prefilledValues).done(function l(n,m){h.resolveWith(g,[g.$element]);g.$element.append(m)})}else{g.unconfigurableForm.render(g.prefilledValues).done(function l(n,m){h.resolveWith(g,[g.$element,m]);g.$element.append(m)})}}).fail(function i(){h.resolveWith(g,[g.$element])});return h.promise()}})};return{build:c}});define("jira/inline-issue-create/prefillable-create-issue-dialog/ondone",["underscore","jira/inline-issue-create/prefillable-create-issue-dialog/custom-form-container-factory"],function(d,c){var g=JIRA.Forms.CreateIssueModel;var h=JIRA.Forms.ConfigurableCreateIssueForm;var a=JIRA.Forms.UnconfigurableCreateIssueForm;var f=JIRA.Forms.CreateIssueError;var b=JIRA.applyErrorsToForm;var e=JIRA.applyErrorMessageToForm;return function(s,k){if(!d.isObject(k)){throw new Error("You must provide promise that will resolve with fieldValues to create this form. Use standard create issue form if you have none.")}var m;k.done(function p(u){m=u;m.prefilledFields=m.prefilledFields||{};m.errors=m.errors||{};m.errorMessages=m.errorMessages||{}}).fail(function j(){m={prefilledFields:{},errors:{},errorMessages:{}}});var n=c.build();var i=new n(function r(){var x={title:"Create issue",id:"prefillable-create-issue-dialog",globalEventNamespaces:["PrefillableCreateIssueDialog"],issueType:undefined};var u=new g({projectId:undefined,issueType:undefined});var w=new h({model:u,title:x.title,globalEventNamespaces:x.globalEventNamespaces});var v=new a({model:u,title:x.title,globalEventNamespaces:x.globalEventNamespaces});return{globalEventNamespaces:x.globalEventNamespaces,model:u,errorHandler:new f(),configurableForm:w,unconfigurableForm:v,prefilledValues:m.prefilledFields}});var o=i.asDialog({windowTitle:"Create issue",id:"prefillable-create-issue-dialog"});o.options.delayShowUntil=function l(){return k};i.asDialog=function q(){return i.dialog};o.onContentReady(function t(){if(d.keys(m.errors).length){m.errorMessages.unshift("Please fix the fields marked below.");b(i.$element,m.errors)}if(m.errorMessages.length){e(i.$element,m.errorMessages.join("<br/>"))}});s.resolve(i)}});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/inline-issue-create-widget.soy' */
// This file was automatically generated from inline-issue-create-widget.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.InlineIssueCreate.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.InlineIssueCreate == 'undefined') { JIRA.Templates.InlineIssueCreate = {}; }


JIRA.Templates.InlineIssueCreate.trigger = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="iic' + ((opt_data.cssClass) ? ' ' + soy.$$escapeHtml(opt_data.cssClass) : '') + ((opt_data.isAgility) ? ' agility-backlog-iic' : '') + '"><div class="iic-trigger"><button type="button">' + soy.$$escapeHtml('Create issue') + '</button></div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.InlineIssueCreate.trigger.soyTemplateName = 'JIRA.Templates.InlineIssueCreate.trigger';
}


JIRA.Templates.InlineIssueCreate.widget = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="iic-widget' + ((opt_data.cssClass) ? ' ' + soy.$$escapeHtml(opt_data.cssClass) : '') + '"><form action="#" method="POST" class="iic-widget__form aui"><div class="iic-widget__issue-type-selector-container"></div><div class=' + ((opt_data.isAgility) ? '"iic-widget__summary-container"' : '') + '><textarea name="summary" rows="1" cols="50" maxlength="255" class="iic-widget__summary" placeholder="' + soy.$$escapeHtml('What needs to be done?') + '">' + ((opt_data.summary) ? soy.$$escapeHtml(opt_data.summary) : '') + '</textarea>' + ((opt_data.isAgility) ? '<div class="iic-widget__create-container"><button type="button" class="aui-button aui-button-primary iic-widget__create" type="button">' + soy.$$escapeHtml('Create') + '</button></div><div class="iic-widget__description-container iic-widget__more iic-widget__cancel" style="display:none;"></div>' : '<div class="iic-widget__footer"><div class="iic-widget__description-container"></div><button type="button" class="aui-button aui-button-subtle iic-widget__more" title="' + soy.$$escapeHtml('Open create dialog') + '"><span class="aui-icon aui-icon-small aui-iconfont-more">' + soy.$$escapeHtml('More') + '</span></button><button type="button" class="aui-button aui-button-link iic-widget__cancel">' + soy.$$escapeHtml('Cancel') + '</button><div class="iic-widget__create" style="display:none;"></div></div>') + '</div></form></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.InlineIssueCreate.widget.soyTemplateName = 'JIRA.Templates.InlineIssueCreate.widget';
}


JIRA.Templates.InlineIssueCreate.issueTypeSelector = function(opt_data, opt_ignored) {
  return '<div class="iic-widget__issue-type-selector">' + ((opt_data.isAgility) ? '<div class="iic-widget__issue-type-container">' + ((! opt_data.isLocked) ? '<img src="' + soy.$$escapeHtml(opt_data.issueTypeIconUrl) + '"/>' : '<img src="data:image/gif;base64,R0lGODlhEAAQAMQAAP///+7u7t3d3bu7u6qqqpmZmYiIiHd3d2ZmZlVVVURERDMzMyIiIhEREQARAAAAAP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFBwAQACwAAAAAEAAQAAAFdyAkQgGJJOWoQgIjBM8jkKsoPEzgyMGsCjPDw7ADpkQBxRDmSCRetpRA6Rj4kFBkgLC4IlUGhbNQIwXOYYWCXDufzYPDMaoKGBoKb886OjAKdgZAAgQkfCwzAgsDBAUCgl8jAQkHEAVkAoA1AgczlyIDczUDA2UhACH5BAUHABAALAAAAAAPABAAAAVjICSO0IGIATkqIiMKDaGKC8Q49jPMYsE0hQdrlABCGgvT45FKiRKQhWA0mPKGPAgBcTjsspBCAoH4gl+FmXNEUEBVAYHToJAVZK/XWoQQDAgBZioHaX8igigFKYYQVlkCjiMhACH5BAUHABAALAAAAAAQAA8AAAVgICSOUGGQqIiIChMESyo6CdQGdRqUENESI8FAdFgAFwqDISYwPB4CVSMnEhSej+FogNhtHyfRQFmIol5owmEta/fcKITB6y4choMBmk7yGgSAEAJ8JAVDgQFmKUCCZnwhACH5BAUHABAALAAAAAAQABAAAAViICSOYkGe4hFAiSImAwotB+si6Co2QxvjAYHIgBAqDoWCK2Bq6A40iA4yYMggNZKwGFgVCAQZotFwwJIF4QnxaC9IsZNgLtAJDKbraJCGzPVSIgEDXVNXA0JdgH6ChoCKKCEAIfkEBQcAEAAsAAAAABAADgAABUkgJI7QcZComIjPw6bs2kINLB5uW9Bo0gyQx8LkKgVHiccKVdyRlqjFSAApOKOtR810StVeU9RAmLqOxi0qRG3LptikAVQEh4UAACH5BAUHABAALAAAAAAQABAAAAVxICSO0DCQKBQQonGIh5AGB2sYkMHIqYAIN0EDRxoQZIaC6bAoMRSiwMAwCIwCggRkwRMJWKSAomBVCc5lUiGRUBjO6FSBwWggwijBooDCdiFfIlBRAlYBZQ0PWRANaSkED1oQYHgjDA8nM3kPfCmejiEAIfkEBQcAEAAsAAAAABAAEAAABWAgJI6QIJCoOIhFwabsSbiFAotGMEMKgZoB3cBUQIgURpFgmEI0EqjACYXwiYJBGAGBgGIDWsVicbiNEgSsGbKCIMCwA4IBCRgXt8bDACkvYQF6U1OADg8mDlaACQtwJCEAIfkEBQcAEAAsAAABABAADwAABV4gJEKCOAwiMa4Q2qIDwq4wiriBmItCCREHUsIwCgh2q8MiyEKODK7ZbHCoqqSjWGKI1d2kRp+RAWGyHg+DQUEmKliGx4HBKECIMwG61AgssAQPKA19EAxRKz4QCVIhACH5BAUHABAALAAAAAAQABAAAAVjICSOUBCQqHhCgiAOKyqcLVvEZOC2geGiK5NpQBAZCilgAYFMogo/J0lgqEpHgoO2+GIMUL6p4vFojhQNg8rxWLgYBQJCASkwEKLC17hYFJtRIwwBfRAJDk4ObwsidEkrWkkhACH5BAUHABAALAAAAQAQAA8AAAVcICSOUGAGAqmKpjis6vmuqSrUxQyPhDEEtpUOgmgYETCCcrB4OBWwQsGHEhQatVFhB/mNAojFVsQgBhgKpSHRTRxEhGwhoRg0CCXYAkKHHPZCZRAKUERZMAYGMCEAIfkEBQcAEAAsAAABABAADwAABV0gJI4kFJToGAilwKLCST6PUcrB8A70844CXenwILRkIoYyBRk4BQlHo3FIOQmvAEGBMpYSop/IgPBCFpCqIuEsIESHgkgoJxwQAjSzwb1DClwwgQhgAVVMIgVyKCEAIfkECQcAEAAsAAAAABAAEAAABWQgJI5kSQ6NYK7Dw6xr8hCw+ELC85hCIAq3Am0U6JUKjkHJNzIsFAqDqShQHRhY6bKqgvgGCZOSFDhAUiWCYQwJSxGHKqGAE/5EqIHBjOgyRQELCBB7EAQHfySDhGYQdDWGQyUhADs="/>') + '</div><div class="iic-widget__issue-type-selector__trigger iic-widget__issue-type-selector__dropdown aui-list-truncate" style="display:none;"></div>' : '<button type="button" class="iic-widget__issue-type-selector__trigger aui-dropdown2-trigger" aria-owns="iic-issue-type-dropdown-' + soy.$$escapeHtml(opt_data.widgetId) + '" aria-haspopup="true">' + ((! opt_data.isLocked) ? '<img src="' + soy.$$escapeHtml(opt_data.issueTypeIconUrl) + '" width="16" height="16"/>' : '<img src="data:image/gif;base64,R0lGODlhEAAQAMQAAP///+7u7t3d3bu7u6qqqpmZmYiIiHd3d2ZmZlVVVURERDMzMyIiIhEREQARAAAAAP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFBwAQACwAAAAAEAAQAAAFdyAkQgGJJOWoQgIjBM8jkKsoPEzgyMGsCjPDw7ADpkQBxRDmSCRetpRA6Rj4kFBkgLC4IlUGhbNQIwXOYYWCXDufzYPDMaoKGBoKb886OjAKdgZAAgQkfCwzAgsDBAUCgl8jAQkHEAVkAoA1AgczlyIDczUDA2UhACH5BAUHABAALAAAAAAPABAAAAVjICSO0IGIATkqIiMKDaGKC8Q49jPMYsE0hQdrlABCGgvT45FKiRKQhWA0mPKGPAgBcTjsspBCAoH4gl+FmXNEUEBVAYHToJAVZK/XWoQQDAgBZioHaX8igigFKYYQVlkCjiMhACH5BAUHABAALAAAAAAQAA8AAAVgICSOUGGQqIiIChMESyo6CdQGdRqUENESI8FAdFgAFwqDISYwPB4CVSMnEhSej+FogNhtHyfRQFmIol5owmEta/fcKITB6y4choMBmk7yGgSAEAJ8JAVDgQFmKUCCZnwhACH5BAUHABAALAAAAAAQABAAAAViICSOYkGe4hFAiSImAwotB+si6Co2QxvjAYHIgBAqDoWCK2Bq6A40iA4yYMggNZKwGFgVCAQZotFwwJIF4QnxaC9IsZNgLtAJDKbraJCGzPVSIgEDXVNXA0JdgH6ChoCKKCEAIfkEBQcAEAAsAAAAABAADgAABUkgJI7QcZComIjPw6bs2kINLB5uW9Bo0gyQx8LkKgVHiccKVdyRlqjFSAApOKOtR810StVeU9RAmLqOxi0qRG3LptikAVQEh4UAACH5BAUHABAALAAAAAAQABAAAAVxICSO0DCQKBQQonGIh5AGB2sYkMHIqYAIN0EDRxoQZIaC6bAoMRSiwMAwCIwCggRkwRMJWKSAomBVCc5lUiGRUBjO6FSBwWggwijBooDCdiFfIlBRAlYBZQ0PWRANaSkED1oQYHgjDA8nM3kPfCmejiEAIfkEBQcAEAAsAAAAABAAEAAABWAgJI6QIJCoOIhFwabsSbiFAotGMEMKgZoB3cBUQIgURpFgmEI0EqjACYXwiYJBGAGBgGIDWsVicbiNEgSsGbKCIMCwA4IBCRgXt8bDACkvYQF6U1OADg8mDlaACQtwJCEAIfkEBQcAEAAsAAABABAADwAABV4gJEKCOAwiMa4Q2qIDwq4wiriBmItCCREHUsIwCgh2q8MiyEKODK7ZbHCoqqSjWGKI1d2kRp+RAWGyHg+DQUEmKliGx4HBKECIMwG61AgssAQPKA19EAxRKz4QCVIhACH5BAUHABAALAAAAAAQABAAAAVjICSOUBCQqHhCgiAOKyqcLVvEZOC2geGiK5NpQBAZCilgAYFMogo/J0lgqEpHgoO2+GIMUL6p4vFojhQNg8rxWLgYBQJCASkwEKLC17hYFJtRIwwBfRAJDk4ObwsidEkrWkkhACH5BAUHABAALAAAAQAQAA8AAAVcICSOUGAGAqmKpjis6vmuqSrUxQyPhDEEtpUOgmgYETCCcrB4OBWwQsGHEhQatVFhB/mNAojFVsQgBhgKpSHRTRxEhGwhoRg0CCXYAkKHHPZCZRAKUERZMAYGMCEAIfkEBQcAEAAsAAABABAADwAABV0gJI4kFJToGAilwKLCST6PUcrB8A70844CXenwILRkIoYyBRk4BQlHo3FIOQmvAEGBMpYSop/IgPBCFpCqIuEsIESHgkgoJxwQAjSzwb1DClwwgQhgAVVMIgVyKCEAIfkECQcAEAAsAAAAABAAEAAABWQgJI5kSQ6NYK7Dw6xr8hCw+ELC85hCIAq3Am0U6JUKjkHJNzIsFAqDqShQHRhY6bKqgvgGCZOSFDhAUiWCYQwJSxGHKqGAE/5EqIHBjOgyRQELCBB7EAQHfySDhGYQdDWGQyUhADs=" width="16" height="16"/>') + '</button><div id="iic-issue-type-dropdown-' + soy.$$escapeHtml(opt_data.widgetId) + '" data-aui-alignment="top left" class="aui-dropdown2 aui-style-default iic-widget__issue-type-selector__dropdown"><div class="aui-dropdown2-section"><ul class="aui-list-truncate"></ul></div></div>') + '</div>';
};
if (goog.DEBUG) {
  JIRA.Templates.InlineIssueCreate.issueTypeSelector.soyTemplateName = 'JIRA.Templates.InlineIssueCreate.issueTypeSelector';
}


JIRA.Templates.InlineIssueCreate.issueTypeSelectorItem = function(opt_data, opt_ignored) {
  return '<li><a href="#" class="aui-icon-container" data-id="' + soy.$$escapeHtml(opt_data.id) + '" style="background-image: url(\'' + soy.$$escapeHtml(opt_data.iconUrl) + '\');">' + soy.$$escapeHtml(opt_data.name) + '</a></li>';
};
if (goog.DEBUG) {
  JIRA.Templates.InlineIssueCreate.issueTypeSelectorItem.soyTemplateName = 'JIRA.Templates.InlineIssueCreate.issueTypeSelectorItem';
}


JIRA.Templates.InlineIssueCreate.description = function(opt_data, opt_ignored) {
  return '<div class="iic-widget__description' + ((! opt_data.issueTypeName) ? ' iic-widget__description_invisible' : '') + '">' + soy.$$escapeHtml('New') + ' <span class="iic-widget__description__selected-issue-type-name">' + ((opt_data.issueTypeName) ? soy.$$escapeHtml(opt_data.issueTypeName) : '') + '</span></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.InlineIssueCreate.description.soyTemplateName = 'JIRA.Templates.InlineIssueCreate.description';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/possibleValues.js' */
define("jira/inline-issue-create/entities/possible-values",["backbone","jira/inline-issue-create/lib/brace"],function(j,g){return g.Collection.extend({url:function b(){var l=_.map(this.jqls,function(m){return"query="+encodeURIComponent(m)+"&"});return AJS.contextPath()+"/rest/inline-create/1.0/context/possibleValues/"+this.getEntityName()+"?".concat.apply("?",l)},getEntityName:undefined,initialize:function d(l,m){this._initializeState(l,m)},_initializeState:function i(l,m){if(m&&m.jqls){this.jqls=m.jqls}else{this.jqls=undefined}this.fetching=false;this.initialized=false},parse:function c(l){return l.values},setJQLs:function e(l){if(_.isEqual(this.jqls,l)){return}this.jqls=l;this.fetch({reset:true})},reset:function f(){this.fetching=false;this.initialized=true;return j.Collection.prototype.reset.apply(this,arguments)},fetch:function a(m){var o=this;function l(){o.fetching=false;o.initialized=true;o.trigger("fetch:finished")}m=m||{};if(m.success){m.success=_.wrap(m.success,function n(p){l();return p.apply(o,Array.prototype.slice.call(arguments,1))})}else{m.success=l}this.trigger("fetch:started");this.fetching=true;return j.Collection.prototype.fetch.call(this,m)},isInitialized:function h(){return this.initialized},isFetching:function k(){return this.fetching}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/issueType.js' */
define("jira/inline-issue-create/entities/issue-type",["jira/inline-issue-create/lib/brace"],function(a){var b=a.Model.extend({namedAttributes:{id:"string",name:"string",description:"string",iconUrl:"string",subtask:"boolean"}});return b});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/issueTypes.js' */
define("jira/inline-issue-create/entities/issue-types",["jira/inline-issue-create/entities/possible-values","jira/inline-issue-create/entities/issue-type"],function(a,b){return a.extend({model:b,getEntityName:function(){return"issuetype"}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/project.js' */
define("jira/inline-issue-create/entities/project",["jira/inline-issue-create/lib/brace"],function(a){return a.Model.extend({namedAttributes:{id:"number",type:"string"}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/projects.js' */
define("jira/inline-issue-create/entities/projects",["jira/inline-issue-create/entities/possible-values","jira/inline-issue-create/entities/project"],function(b,c){return b.extend({model:c,comparator:function a(d){return d.getId()},getEntityName:function(){return"project"}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/inlineIssue.js' */
define("jira/inline-issue-create/entities/inline-issue",["jquery","underscore","jira/inline-issue-create/lib/brace"],function(f,b,c){return c.Model.extend({initialize:function a(){this._isSaving=false},save:function e(){var g=this;var h=f.ajax(AJS.contextPath()+"/rest/inline-create/1.0/issue",{data:JSON.stringify(this.toJSON()),contentType:"application/json",type:"POST"});this._isSaving=true;return h.always(function i(){g._isSaving=false})},isSaving:function d(){return this._isSaving}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/inlineBootstrap.js' */
define("jira/inline-issue-create/entities/inline-bootstrap",["backbone","jira/inline-issue-create/lib/brace","jira/inline-issue-create/entities/projects","jira/inline-issue-create/entities/issue-types"],function(l,i,h,e){return i.Model.extend({issueTypesCollectionType:e,projectsCollectionType:h,namedAttributes:{hasCreateIssuePermission:"boolean",hasScheduleIssuePermission:"boolean"},initialize:function f(){this.issueTypes=new this.issueTypesCollectionType();this.projects=new this.projectsCollectionType()},url:function c(){var n=_.map(this.jqls,function(o){return"query="+encodeURIComponent(o)+"&"});return AJS.contextPath()+"/rest/inline-create/1.0/context/bootstrap"+"?".concat.apply("?",n)},_initializeState:function k(n,o){if(o&&o.jqls){this.jqls=o.jqls}else{this.jqls=undefined}this.fetching=false;this.initialized=false},setJQLs:function b(n){if(_.isEqual(this.jqls,n)){return}this.jqls=n;this.fetch({reset:true})},parse:function d(o){var n=this;var q=_.map(o.issueTypes.values,function(r){return _.pick(r,_.keys(n.issueTypes.model.prototype.namedAttributes))});this.issueTypes.reset(q);var p=_.map(o.projects.values,function(r){return _.pick(r,_.keys(n.projects.model.prototype.namedAttributes))});this.projects.reset(p);return _.pick(o,"hasCreateIssuePermission","hasScheduleIssuePermission")},fetch:function a(p){var o=this;function n(){o.fetching=false;o.initialized=true;JIRA.trace("inline.create.bootstrap.fetched")}p=p||{};if(p.success){p.success=_.wrap(p.success,function q(r){n();return r.apply(o,Array.prototype.slice.call(arguments,1))})}else{p.success=n}this.fetching=true;JIRA.trace("inline.create.bootstrap.fetching");return l.Model.prototype.fetch.call(this,p)},isInitialized:function j(){return this.initialized},isFetching:function m(){return this.fetching},fireWhenInitialized:function g(n){if(this.isInitialized()&&(!this.isFetching())){n()}else{this.listenToOnce(this,"sync",n)}}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/views/description.js' */
define("jira/inline-issue-create/views/description",["jquery","jira/inline-issue-create/lib/marionette"],function(d,f){var a=f.ItemView.extend({template:JIRA.Templates.InlineIssueCreate.description,ui:{selectedIssueTypeName:".iic-widget__description__selected-issue-type-name"},modelEvents:{"change:selectedIssueType":function c(){var g=(this.model.getSelectedIssueType()&&this.model.getSelectedIssueType().getName())||"";if(g){this.$el.removeClass("iic-widget__description_invisible");this.ui.selectedIssueTypeName.text(g)}else{this.$el.addClass("iic-widget__description_invisible")}}},serializeData:function b(){var g={};if(this.model.getSelectedIssueType()){g=this.model.getSelectedIssueType().toJSON()}return{issueTypeName:g.name}},onRender:function e(){this.unwrapTemplate()}});return a});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/views/issueTypeDropdown.js' */
define("jira/inline-issue-create/views/issue-type-dropdown",["jquery","jira/inline-issue-create/lib/marionette","jira/inline-issue-create/views/issue-type-dropdown-item"],function(b,j,g){var a=j.CompositeView.extend({childView:g,childViewOptions:function k(n,m){return{model:n,dropdownModel:this.model}},template:JIRA.Templates.InlineIssueCreate.issueTypeSelector,childViewContainer:".aui-list-truncate",ui:{trigger:".iic-widget__issue-type-selector__trigger",issueTypeIcon:".iic-widget__issue-type-selector__trigger img",issueTypeDropdown:".iic-widget__issue-type-selector__dropdown"},modelEvents:{"change:selectedIssueType":function c(){if(this.model.getSelectedIssueType()){this.ui.issueTypeIcon.attr("src",this.model.getSelectedIssueType().getIconUrl())}},"change:lockState":function f(n,o){this.render();if(o===this.model.constants.STATE_LOCK_SENDING){this.ui.trigger.attr("aria-disabled",true)}else{this.ui.trigger.attr("aria-disabled",false)}}},initialize:function d(){this.isDropdownShown=false;_.bindAll(this,"onDropdownShow")},serializeData:function i(){var m={};if(this.model.getSelectedIssueType()){m=this.model.getSelectedIssueType().toJSON()}return{widgetId:this.options.widgetId,isLocked:this.model.getLockState()!==this.model.constants.STATE_LOCK_UNLOCKED,issueTypeIconUrl:m.iconUrl,isAgility:this.options.isAgility}},onRender:function l(){this.unwrapTemplate();this.ui.issueTypeDropdown.on("aui-dropdown2-show",this.onDropdownShow)},onDropdownShow:function e(){var s=this.ui.issueTypeDropdown;s.appendTo(this.$el);var m=this.ui.issueTypeIcon.offset();var r=this.ui.issueTypeIcon.position();var n=this.ui.issueTypeIcon.outerHeight();var o=s.height();var q=b("body").outerHeight(true)<m.top+n+o;s.css({left:r.left,top:(q?r.top-o:r.top+n)+"px"});var p=s.find("li a");this.trigger("dropdownOpened",{numIssueTypes:p.length})},onChildviewSelected:function h(m){this.trigger("issueTypeSelected",m.model)}});return a});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/views/issueTypeDropdownItem.js' */
define("jira/inline-issue-create/views/issue-type-dropdown-item",["jquery","jira/inline-issue-create/lib/marionette"],function(c,f){var b=f.ItemView.extend({template:JIRA.Templates.InlineIssueCreate.issueTypeSelectorItem,initialize:function a(g){this.dropdownModel=g.dropdownModel},events:{"click a":function e(g){this.trigger("selected")}},onRender:function d(){this.unwrapTemplate()}});return b});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/views/defaultTrigger.js' */
define("jira/inline-issue-create/views/default-trigger",["jquery","jira/inline-issue-create/lib/marionette"],function(e,h){var d=h.ItemView.extend({template:JIRA.Templates.InlineIssueCreate.trigger,ui:{trigger:" .iic-trigger"},events:{"click @ui.trigger":function g(i){i.preventDefault();this.trigger("selected")}},initialize:function a(i){this.widget=i.widget;this.listenTo(this.widget,"activated",this.hide);this.listenTo(this.widget,"deactivated",this.show)},onRender:function f(){this.unwrapTemplate();if(this.widget.model.getState()===this.widget.model.constants.STATE_ACTIVE){this.hide()}},hide:function c(){this.ui.trigger.addClass("iic-trigger_hidden")},show:function b(){this.ui.trigger.removeClass("iic-trigger_hidden")}});return d});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/widget.js' */
define("jira/inline-issue-create/entities/widget-constants",[],function(){var a={STATE_CLOSED:"STATE_CLOSED",STATE_ACTIVE:"STATE_ACTIVE",STATE_LOCK_TEMP_INACTIVE:"STATE_LOCK_TEMP_INACTIVE",STATE_LOCK_SENDING:"STATE_LOCK_SENDING",STATE_LOCK_PERM_INACTIVE:"STATE_LOCK_PERM_INACTIVE",STATE_LOCK_UNLOCKED:"STATE_LOCK_UNLOCKED"};Object.freeze(a);return a});define("jira/inline-issue-create/entities/widget",["jira/inline-issue-create/lib/brace","jira/inline-issue-create/entities/issue-types","jira/inline-issue-create/entities/issue-type","jira/inline-issue-create/entities/widget-constants"],function(f,c,j,e){var a="iic.slectedIssueType";var k=e;var h=f.Model.extend({constants:k,defaults:{state:k.STATE_CLOSED,lockState:k.STATE_LOCK_UNLOCKED},namedAttributes:{summary:"",selectedIssueType:j,issueTypes:c,state:"",lastState:"",lockState:""},initialize:function d(m){var q;var o;if(!m||!m.selectedIssueType){if(localStorage){q=JSON.parse(localStorage.getItem(a))||{};q=q||{};o=this.getIssueTypes()&&this.getIssueTypes().find(function l(r){return r.getId()===q.id})}if(o){this.setSelectedIssueType(o)}else{if(this.getIssueTypes()){this.setSelectedIssueType(this.getIssueTypes().at(0))}}}this.on("change:selectedIssueType",function p(s){var r=this.getSelectedIssueType();if(r){localStorage.setItem(a,JSON.stringify(r.toJSON()))}});this.listenTo(this.getIssueTypes(),"reset",function n(){var r=this.getSelectedIssueType()&&this.getSelectedIssueType().getId();var s;if(!r){r=q.id}if(r!==undefined){s=this.getIssueTypes().get(r);if(s){this.setSelectedIssueType(s)}else{this.setSelectedIssueType(this.getIssueTypes().at(0))}}else{this.setSelectedIssueType(this.getIssueTypes().at(0))}})},changeState:function g(l){if(l===this.getState()){return}this.setLastState(this.getState());this.setState(l)},setSelectedIssueTypeIfAvailable:function i(m){if(m){var l=this.getIssueTypes().get(m.getId());if(l){this.setSelectedIssueType(l)}}},toIssueData:function b(){return{summary:this.getSummary(),issueTypeId:this.getSelectedIssueType()&&this.getSelectedIssueType().getId()}}});return h});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/views/widget.js' */
define("jira/inline-issue-create/views/widget",["jquery","underscore","jira/inline-issue-create/lib/marionette","jira/inline-issue-create/util"],function(j,A,n,a){var i=500;var b=n.LayoutView.extend({template:JIRA.Templates.InlineIssueCreate.widget,regions:{issueTypeSelector:".iic-widget__issue-type-selector-container",description:".iic-widget__description-container"},ui:{summary:".iic-widget__summary",more:".iic-widget__more",cancel:".iic-widget__cancel",create:".iic-widget__create",form:".iic-widget__form",withTitle:"[title]"},events:{"input @ui.summary":"onSummaryChange","change @ui.summary":"onSummaryChange","keyup @ui.summary":function(D){var C=this.ui.summary.val();if(C.length>255){this.ui.summary.val(C.substr(0,255))}this.onSummaryChange(D)},"keydown @ui.summary":function r(C){if(C.keyCode===a.keyCode.ENTER){C.preventDefault();this.onSubmit(C)}else{if(C.keyCode===a.keyCode.ESC){this.trigger("deactivate",{reason:"keypress"})}}},"click @ui.cancel":function B(C){C.preventDefault();if(this.model.getLockState()!==this.model.constants.STATE_LOCK_SENDING){this.trigger("deactivate",{reason:"cancel"})}},"click @ui.more":function v(C){C.preventDefault();if(this.model.getLockState()!==this.model.constants.STATE_LOCK_SENDING){this.trigger("openFullIssueDialog")}},"click @ui.create":function l(C){this.onSubmit(C)}},modelEvents:{"change:summary":function t(){this.ui.summary.val(this.model.getSummary());this.adjustSummarySize()},"change:state":function u(C,D){if(D===this.model.constants.STATE_ACTIVE){this.activate()}else{if(D===this.model.constants.STATE_CLOSED){this.deactivate()}}},"change:lockState":function h(C,D){if(this.ui.summary.prop){if(D===this.model.constants.STATE_LOCK_SENDING){this.ui.summary.prop("disabled",true)}else{this.ui.summary.prop("disabled",false)}}}},initialize:function c(C){this.cssClass=C.cssClass||"";this.listenTo(this.issueTypeSelector,"show",function(){this.listenTo(this.issueTypeSelector.currentView,"issueTypeSelected",function(){this.focusSummary()})});A.bindAll(this,"adjustSummarySize","onBodyClick")},onSubmit:function w(D){var C=this.ui.summary.val();if(C!==""&&C.length<=255){if(this.model.getLockState()===this.model.constants.STATE_LOCK_UNLOCKED){this.ui.summary.blur();this.disableCreate();this.trigger("createIssue")}else{a.addClassAndRemoveOnAnimationEnd(this.$(".issue-type-selector"),"iic-error",i)}}else{a.addClassAndRemoveOnAnimationEnd(this.ui.summary,"iic-error",i)}},onClose:function g(){j(document).off("click.iic",this.onBodyClick)},onBodyClick:function m(C){if(!this.$el.is(C.target)&&this.$el.has(C.target).length===0){if(this.ui.summary.val()===""){this.trigger("deactivate",{reason:"cancel"})}else{if(this.ui.summary.is(":focus")){this.ui.summary.blur()}}}},serializeData:function o(){return{summary:this.model.getSummary(),cssClass:this.cssClass,isAgility:this.options.isAgility}},onRender:function k(){this.unwrapTemplate();this.ui.withTitle.tooltip({aria:true});var D=this;this.ui.summary.on("change cut paste drop keydown input",function C(){A.defer(D.adjustSummarySize)});A.defer(D.adjustSummarySize);this.ui.summary.placeholder();if(this.model.getState()===this.model.constants.STATE_ACTIVE){this.activate()}else{this.deactivate()}},adjustSummarySize:function d(){this.ui.summary.css("height","auto");var D=this.ui.summary.outerHeight();var C=Math.max(D+this.ui.summary.prop("scrollHeight")-this.ui.summary.prop("clientHeight"),D);if(C){this.ui.summary.height(C+"px")}},reset:function y(){this.ui.summary.attr("style","")},hide:function q(){this.$el.addClass("iic-widget_hidden");j(document).off("click.iic",this.onBodyClick)},show:function x(){this.$el.removeClass("iic-widget_hidden");this.adjustSummarySize();var C=this;A.defer(function(){j(document).off("click.iic",C.onBodyClick);j(document).on("click.iic",C.onBodyClick)})},focusSummary:function z(){this.ui.summary.focus()},activate:function f(){this.show();this.trigger("activated")},focus:function s(){this.focusSummary();this.trigger("focused")},deactivate:function e(){this.hide();this.trigger("deactivated")},onSummaryChange:function t(C){this.trigger("summaryChanged",this.ui.summary.val())},enableCreate:function p(){this.ui.create.attr("aria-disabled",false)},disableCreate:function p(){this.ui.create.attr("aria-disabled",true)}});return b});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/inline-issue-create-widget.js' */
define("jira/inline-issue-create/widget",["jquery","underscore","jira/inline-issue-create/lib/marionette","jira/inline-issue-create/util","jira/inline-issue-create/entities/widget","jira/inline-issue-create/entities/issue-types","jira/inline-issue-create/entities/projects","jira/inline-issue-create/entities/inline-issue","jira/inline-issue-create/views/widget","jira/inline-issue-create/views/issue-type-dropdown","jira/inline-issue-create/views/description","jira/inline-issue-create/prefillable-create-issue-dialog","jira/inline-issue-create/analytics","jira/analytics/web-client"],function(w,J,C,b,r,H,h,a,y,q,I,m,d,f){function G(K){if(J.isFunction(K.parameter)){K.context[K.fieldName]=new K.parameter(K.defaultOptions)}else{if(J.isObject(K.parameter)){K.context[K.fieldName]=K.parameter}else{if(undefined===K.parameter){K.context[K.fieldName]=new K.defaultConstructor(K.defaultOptions)}}}}var z=C.Controller.extend({initialize:function e(K){this._initializeComponents(K);if(K.jqls){this.setCurrentJQLs(K.jqls)}if(K.container){this.attach(K.container)}this._initializeEvents(K)},_initializeComponents:function E(K){if(J.isFunction(K.issueTypes)){this.issueTypes=new K.issueTypes(undefined,{jqls:K.jqls})}else{if(J.isObject(K.issueTypes)){this.issueTypes=K.issueTypes}else{this.issueTypes=new H(undefined,{jqls:K.jqls})}}if(J.isFunction(K.projects)){this.projects=new K.projects(undefined,{jqls:K.jqls})}else{if(J.isObject(K.projects)){this.projects=K.projects}else{this.projects=new h(undefined,{jqls:K.jqls})}}G({context:this,fieldName:"model",defaultOptions:{issueTypes:this.issueTypes},parameter:K.model,defaultConstructor:r});G({context:this,fieldName:"dropdownView",defaultOptions:{model:this.model,collection:this.issueTypes,widgetId:this.model.cid},parameter:K.dropdownView,defaultConstructor:q});G({context:this,fieldName:"descriptionView",defaultOptions:{model:this.model,widgetId:this.model.cid},parameter:K.descriptionView,defaultConstructor:I});this.view=new y({model:this.model,cssClass:K.cssClass,isAgility:K.isAgility&&K.isAgility()||false});this.analytics=new d({widget:this});this._currentInlineIssue=undefined},_initializeEvents:function F(K){this.listenTo(this.view,"summaryChanged",function M(O){this.model.setSummary(O)});this.listenTo(this.view,"createIssue",this.createIssue);this.listenTo(this.view,"deactivate",this.deactivate);this.listenTo(this.view,"openFullIssueDialog",function N(){this.trigger("openCreateIssueDialog",{reason:"manual"});this.openCreateIssueDialog()});this.listenTo(this.model,"change:state",this.onStateChange);this.listenTo(this.model,"change:lockState",this.onLockStateChange);this.listenTo(this.issueTypes,"reset",this.checkWidgetLocked);this.listenTo(this.projects,"reset",this.checkWidgetLocked);this.on("issueCreated",function L(){this.model.setSummary("")});this.checkWidgetLocked()},render:function u(){this.view.issueTypeSelector.attachView(undefined);this.view.description.attachView(undefined);this.view.render();this.view.issueTypeSelector.show(this.dropdownView);this.view.description.show(this.descriptionView);this.listenTo(this.dropdownView,"issueTypeSelected",function(K){this.model.setSelectedIssueType(K)})},onStateChange:function(K,L){if(L===this.model.constants.STATE_ACTIVE){this.trigger("activated")}else{if(L===this.model.constants.STATE_CLOSED){this.trigger("deactivated")}}},onLockStateChange:function g(K,L){if(L===this.model.constants.STATE_LOCK_PERM_INACTIVE){if(this.model.getState()===this.model.constants.STATE_ACTIVE){this.deactivate()}}},activate:function k(){if(this.model.getLockState()!==this.model.constants.STATE_LOCK_PERM_INACTIVE){this.model.changeState(this.model.constants.STATE_ACTIVE);return true}else{return false}},deactivate:function c(){this.model.changeState(this.model.constants.STATE_CLOSED)},checkWidgetLocked:function x(){if(this.issueTypes.isFetching()||!this.issueTypes.isInitialized()){return this.model.setLockState(this.model.constants.STATE_LOCK_TEMP_INACTIVE)}if(this.projects.isFetching()||!this.projects.isInitialized()){return this.model.setLockState(this.model.constants.STATE_LOCK_TEMP_INACTIVE)}if(this._currentInlineIssue&&this._currentInlineIssue.isSaving()){return this.model.setLockState(this.model.constants.STATE_LOCK_SENDING)}if(!this.issueTypes.length){return this.model.setLockState(this.model.constants.STATE_LOCK_PERM_INACTIVE)}if(this.projects.length!==1){return this.model.setLockState(this.model.constants.STATE_LOCK_PERM_INACTIVE)}this.model.setLockState(this.model.constants.STATE_LOCK_UNLOCKED)},focus:function D(){this.view.focus()},reset:function A(){this.model.setSummary("");this.view.reset()},attach:function p(K){var L=w(K);L.append(this.view.el)},setCurrentJQLs:function s(K){this.jqls=K},setSummary:function B(K){this.model.setSummary(K)},getSummary:function n(){return this.model.getSummary()},setSelectedIssueTypeIfAvailable:function j(K){this.model.setSelectedIssueTypeIfAvailable(K)},getSelectedIssueType:function t(){return this.model.getSelectedIssueType()},setOverrides:function o(K){this.overrides=K},createIssue:function v(){var K=this;var O={summary:this.model.getSummary(),contexts:this.jqls,issueTypeId:this.model.getSelectedIssueType().getId(),overrides:J.clone(this.overrides)};this.trigger("beforeIssueCreated",K,O);this._currentInlineIssue=new a(O);this._currentInlineIssue.save().done(function N(P){K.trigger("issueCreated",P.issue,P.prefilledFields,K,{source:"inline"});JIRA.trace("inline.create.issue.created");K.fireIssueCreatedTrackEvent(K,P)}).fail(function L(P){var T=new jQuery.Deferred();K.openCreateIssueDialog(T);try{var S=JSON.parse(P.responseText);T.resolve({errors:S.errors,errorMessages:S.generalErrors,prefilledFields:S.prefilledFields})}catch(R){b.error(K,"Could not parse response: "+R,P);var Q="Unfortunately, there is an internal communication error, so you must use the full dialog to create the issue. Please contact your administrator if this error keeps appearing.";T.resolve({errors:{},errorMessages:[Q],prefilledFields:{}})}K.trigger("openCreateIssueDialog",{reason:"createFailed"});K.view.enableCreate()}).always(function M(){K.checkWidgetLocked()});this.checkWidgetLocked()},fireIssueCreatedTrackEvent:function l(K,N){if(f&&typeof GH!=="undefined"&&GH.RapidBoard&&GH.RapidBoard.State){var M=N.issue.issueType;var O=N.issue.issueId;var L={objectType:"issue",objectId:O,containerType:GH.RapidViewConfig.currentData.data.locationType,attributes:{issueTypeId:M,boardId:GH.RapidBoard.State.getRapidViewId(),boardType:GH.RapidBoard.State.getBoardTypeForAnalytics(),projectType:"software"},action:"created",actionSubject:"issue",actionSubjectId:O,source:"backlogScreen"};if(L.containerType==="project"&&(JIRA.API&&JIRA.API.Projects)){L.containerId=JIRA.API.Projects.getCurrentProjectId()}f.sendTrackEvent(L)}},openCreateIssueDialog:function i(O){var K=this;var L=this.model.toIssueData();if(this.projects.size()===1){L.project=this.projects.at(0).toJSON()}var M={summary:L.summary,contexts:this.jqls,issueTypeId:this.model.getSelectedIssueType()?this.model.getSelectedIssueType().getId():undefined,overrides:J.clone(this.overrides)};this.trigger("beforeIssueCreated",K,M);if(!O){O=this._resolveInlineContext(M,K)}var N=m.createPrefillableCreateIssueForm(O.promise(),true);return N.pipe(function(R){var Q=R.asDialog();function P(T,S){K.trigger("issueCreated",S,S.fields,K,{source:"dialog"});JIRA.trace("inline.create.issue.created")}R.bind("initialized",function(){this.unconfigurableForm.bind("issueCreated",P);this.configurableForm.bind("issueCreated",P)});Q.show();return Q})},_resolveInlineContext:function(N,K){var O=new jQuery.Deferred();var P=w.ajax(AJS.contextPath()+"/rest/inline-create/1.0/context/resolve",{data:JSON.stringify(N),contentType:"application/json",type:"POST"});P.done(function L(Q){O.resolve({prefilledFields:Q.createIssueInput})}).fail(function M(){O.resolve({prefilledFields:{summary:N.summary?N.summary:"",issuetype:K.model.getSelectedIssueType()?K.model.getSelectedIssueType().getId():undefined}})});return O}});return z});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/inline-issue-create-analytics.js' */
define("jira/inline-issue-create/analytics",["jira/inline-issue-create/lib/marionette"],function(f){return f.Controller.extend({initialize:function e(j){this.loadTimestamp=new Date().getTime();var k=j.widget;this.widgetId=k.model.cid.substring(1);this.projects=k.projects;this.listenTo(k,"issueCreated",this.onIssueCreated);this.listenTo(k,"openCreateIssueDialog",this.onOpenCreateIssueDialog);this.listenTo(k,"activated",this.onActivated);this.listenTo(k,"deactivated",this.onDeactivated);this.listenTo(k,"dropdownOpened",this.onDropdownOpened);this.listenTo(k,"issueTypeSelected",this.onIssueTypeSelected)},triggerAnalytics:function d(l,n){var j="";var m="";if(this.projects&&this.projects.size()>0){var o=this.projects.first();j=o.get("id");m=o.get("type")}var k=_.defaults({},n,{instance:this.widgetId,timestarted:this.loadTimestamp,projectId:j,projectType:m});AJS.trigger("analyticsEvent",{name:"jira.inlinecreate."+l,data:k})},onOpenCreateIssueDialog:function i(j){this.triggerAnalytics("openDialog",{reason:j.reason})},onIssueCreated:function a(j,l,m,k){if(k.source==="inline"){this.triggerAnalytics("issueCreatedInline")}else{this.triggerAnalytics("issueCreatedDialog")}},onDeactivated:function g(){this.triggerAnalytics("deactivated")},onActivated:function h(){this.triggerAnalytics("activated")},onDropdownOpened:function c(j){this.triggerAnalytics("dropdown.opened",{numIssueTypes:j.numIssueTypes})},onIssueTypeSelected:function b(){this.triggerAnalytics("dropdown.issueTypeSelected")}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/inline-issue-create-widget-group.js' */
define("jira/inline-issue-create/widget-group",["jquery","jira/inline-issue-create/lib/marionette","jira/inline-issue-create/widget","jira/inline-issue-create/entities/inline-bootstrap"],function WidgetGroup(e,h,j,c){var d=h.Controller.extend({initialize:function f(k){this.TriggerView=k.TriggerView;this.Widget=j;this.widgets={};this.currentJQLs=undefined;this.createdCallback=k.createdCallback;this.activeWidget=undefined;this.inlineBootstrap=k.inlineBootstrap||new c();this.widgetOptions=_.defaults(k.widgetOptions||{},{issueTypes:this.inlineBootstrap.issueTypes,projects:this.inlineBootstrap.projects,isAgility:function(){return false}})},getWidget:function a(k){if(!this.widgets[k]){this.widgets[k]=this._createNewWidget(k)}return this.widgets[k]},setCurrentJqls:function i(k){this.currentJQLs=k;_.each(this.widgets,function l(m){m.widget.setCurrentJQLs(k)});this.inlineBootstrap.setJQLs(k)},activateWidget:function b(m){if(this.activeWidget===m){m.focus();return}var n=this.activeWidget;this.activeWidget=undefined;_.each(this.widgets,function l(o){if(o!==m){o.widget.deactivate()}});var k=m.activate();if(k){m.focus();this.activeWidget=m;this.trigger("widget:activated",m,n);if(n){m.setSummary(n.getSummary());m.setSelectedIssueTypeIfAvailable(n.getSelectedIssueType());n.reset()}}return k},_createNewWidget:function g(p){var m=this;var o=new this.Widget(this.widgetOptions);o.on("deactivated",function k(){if(m.activeWidget===o){m.activeWidget=undefined;o.reset()}});if(this.createdCallback){this.createdCallback(o,p)}if(this.currentJQLs){o.setCurrentJQLs(this.currentJQLs)}var l=new m.TriggerView({widget:o});l.on("selected",function(){m.activateWidget(o)});return{widget:o,trigger:l,render:function n(q){l.render();q.append(l.$el);o.attach(l.$el);o.render();m.trigger("widget:rendered",o,l,q)}}}});return d});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:inline-issue-create', location = 'inline-issue-create/InlineIssueCreate.js' */
define("jira/components/inline-issue-create",["require"],function(t){"use strict";var i=t("jira/components/libs/marionette-2.1.0"),e=t("jira/inline-issue-create/widget"),s=t("jira/inline-issue-create/views/default-trigger"),n=t("jira/inline-issue-create/entities/inline-bootstrap");return i.Object.extend({_buildBootstrap:function(){this.bootstrap=new n,this.listenTo(this.bootstrap,{sync:function(){this.widget.setCurrentJQLs(this.bootstrap.jqls)}})},_buildWidget:function(){this.widget=new e({issueTypes:this.bootstrap.issueTypes,projects:this.bootstrap.projects}),this.listenTo(this.widget,{issueCreated:function(t,i){this.trigger("issueCreated",{issue:t,fields:i})},activated:function(){this.trigger("activated")},deactivated:function(){this.trigger("deactivated")}})},_buildTrigger:function(){this.widgetTrigger=new s({widget:this.widget}),this.listenTo(this.widgetTrigger,{selected:function(){this.activate(),this.trigger("inlineIssueCreateOpened")}})},initialize:function(){this._buildBootstrap(),this._buildWidget(),this._buildTrigger(),this.render()},setJQL:function(t){this.bootstrap.setJQLs([t])},render:function(){this.widgetTrigger.render(),this.widget.render()},show:function(t){this.render(),t.append(this.widgetTrigger.$el),this.widget.attach(t)},activate:function(){if(this.bootstrap.projects.length){var t=this.widget.activate();t&&this.widget.focus()}else this.widget.openCreateIssueDialog()},activateWithJQL:function(t){this.bootstrap.jqls=[t],this.bootstrap.fetch({reset:!0}).done(function(){if(this.bootstrap.projects.length){var t=this.widget.activate();t&&this.widget.focus()}}.bind(this))}})});
//# sourceMappingURL=InlineIssueCreate-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/SimpleIssueList.js' */
define("jira/components/simpleissuelist",["require"],function(e){"use strict";var s=e("jira/components/simpleissuelist/controllers/list"),t=e("jira/components/simpleissuelist/services/api"),i=e("jira/components/simpleissuelist/services/inline-issue-create"),n=e("jira/components/libs/marionette-2.1.0"),r=e("jira/components/libs/underscore"),u=e("jquery");return n.Object.extend({initialize:function(){this.options.displayInlineIssueCreate&&(this.inlineIssueCreate=new i,this.listenTo(this.inlineIssueCreate,{issueCreated:function(e){this.trigger("issueCreated",e)},"activated deactivated":function(){r.defer(function(){this.list.adjustSize()}.bind(this))}})),this.list=new s({baseURL:this.options.baseURL,inlineIssueCreate:this.inlineIssueCreate}),this.listenTo(this.list,{goToPreviousPage:function(){this.trigger("list:pagination"),this.searchResults.jumpToPage("prev")},goToNextPage:function(){this.trigger("list:pagination"),this.searchResults.jumpToPage("next")},goToPage:function(e){this.trigger("list:pagination"),this.searchResults.jumpToPage(e)},refresh:function(){this.trigger("refresh")},selectIssue:function(e){this.trigger("list:select",{id:e.id,key:e.key,absolutePosition:this.searchResults.getPositionOfIssueInSearchResults(e.id),relativePosition:this.searchResults.getPositionOfIssueInPage(e.id)}),this.searchResults.select(e.id)},sort:function(e){this.trigger("sort",e)},update:function(){this.trigger("update")}});var e=r.extend({},AJS.namespace("JIRA.API.Issues"),t.init(this));AJS.namespace("JIRA.API.Issues",null,e)},load:function(e,s,t){this.searchResults&&(this.stopListening(this.searchResults),delete this.searchResults),this.searchResults=e,this.options.displayInlineIssueCreate&&this.inlineIssueCreate.setJQL(this.searchResults.jql),this.listenTo(this.searchResults,{"before:loadpage":function(){this.trigger("before:loadpage")},"error:loadpage":function(e){this.trigger("error:loadpage",e)},reset:function(){this.list.update(this.searchResults)},unselect:function(e){this.list.unselectIssue(e.get("id"))},select:function(e){var s=e.get("id")||null;s&&this.list.selectIssue(e.get("id"));var i={id:s,key:e.get("key")};t&&(i.updateActiveView=!0),this.trigger("select",i)},change:function(e){this.list.updateIssue(e)}}),s?e.jumpToPageForIssue(s):e.jumpToPage("first")},show:function(e){this.list.render({el:e})},selectNext:function(){if(this.searchResults)return this.searchResults.selectNext()},selectPrevious:function(){if(this.searchResults)return this.searchResults.selectPrev()},selectIssue:function(e){this.searchResults.select(e)},_getIssueById:function(e){if(this.searchResults)return this.searchResults.get(e)},refreshIssue:function(e){var s=this._getIssueById(e);s&&s.fetch()},updateIssue:function(e,s){var t=this._getIssueById(e);t&&t.set(s)},adjustSize:function(){this.list.adjustSize()},disableIssue:function(e){var s=this._getIssueById(e);s&&s.set("inaccessible",!0)},removeIssue:function(e){var s=this._getIssueById(e);return s?this.searchResults.removeAndUpdateSelectionIfNeeded(s):(new u.Deferred).reject().promise()},onDestroy:function(){this.list.destroy()},focus:function(){this.list.focus()}})});
//# sourceMappingURL=SimpleIssueList-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/controllers/List.js' */
define("jira/components/simpleissuelist/controllers/list",["require"],function(e){"use strict";var i=e("jira/components/simpleissuelist/views/pagination"),t=e("jira/components/simpleissuelist/views/issuelist"),s=e("jira/components/simpleissuelist/views/endstablesearch"),n=e("jira/components/simpleissuelist/views/layout"),r=e("jira/components/simpleissuelist/views/loading"),o=e("jira/components/simpleissuelist/views/refresh"),u=e("jira/components/libs/marionette-2.1.0"),l=e("jira/components/orderby");return u.ViewManager.extend({_buildPagination:function(){return this.buildView("pagination",function(){var e=new i({baseURL:this.baseURL});return this.listenTo(e,{prev:function(){this.trigger("goToPreviousPage")},next:function(){this.trigger("goToNextPage")},"goto":function(e){this.trigger("goToPage",e)}}),e})},_buildList:function(){return this.buildView("list",function(){var e=new t;return this.listenTo(e,{"childview:select":function(e){var i=e.model;this.trigger("selectIssue",{id:i.get("id"),key:i.get("key")})},update:function(){this.trigger("update")}}),e})},_buildEndStableSearch:function(){return this.buildView("endOfStableSearch",function(){return new s})},_buildRefresh:function(){return this.buildView("refresh",function(){var e=new o;return this.listenTo(e,{refresh:function(){this.trigger("refresh")}}),e})},_buildLayout:function(){return this.buildView("layout",function(){var e=new n;return this.listenTo(e,{render:function(){this.getView("layout").getRegion("pagination").show(this.getView("pagination")),this.getView("layout").getRegion("searchResults").show(this.getView("list")),this.getView("layout").getRegion("refresh").show(this.getView("refresh")),this.getView("layout").getRegion("orderBy")._ensureElement(),this.orderBy.setElement(this.getView("layout").getRegion("orderBy").$el),this.orderBy.render(),this.inlineIssueCreate&&(this.getView("layout").inlineIssueCreateContainer._ensureElement(),this.inlineIssueCreate.show(this.getView("layout").inlineIssueCreateContainer.$el))}}),e})},_buildOrderBy:function(){return this.orderBy=l.create(),this.orderBy.onSort(function(e){this.trigger("sort",e)},this),this.orderBy},_buildViews:function(){this._buildLayout(),this._buildPagination(),this._buildList(),this._buildRefresh(),this._buildEndStableSearch(),this.getView("layout").render()},initialize:function(e){this._buildOrderBy(),this.baseURL=e.baseURL,this.inlineIssueCreate=e.inlineIssueCreate,this._buildViews()},render:function(e){e=e||{};var i=e.el;i.append(this.getView("layout").$el),this.getView("layout").setElement(i)},onDestroy:function(){this.hideView("layout")},update:function(e){e.isAtTheEndOfStableSearch()?this.getView("layout").getRegion("endOfStableMessageContainer").show(this.getView("endOfStableSearch")):this.getView("layout").getRegion("endOfStableMessageContainer").empty(),this.getView("list").update(e),this.getView("refresh").render(),this.getView("pagination").update(e),this.orderBy.setElement(this.getView("layout").getRegion("orderBy").$el),this.orderBy.render(),this.orderBy.setJql(e.jql),this.inlineIssueCreate&&this.inlineIssueCreate.render(),this.adjustSize()},hideLoading:function(){this.hideView("loading")},showLoading:function(){this.showView("loading",function(){var e=new r;return this.listenTo(e,{render:function(){this.getView("layout").$el.prepend(e.$el)}}),e})},updateIssue:function(e){this.getView("list").updateIssue(e)},unselectIssue:function(e){this.getView("list").unselectIssue(e)},selectIssue:function(e){this.getView("list").selectIssue(e)},adjustSize:function(){if(this.getView("layout")&&this.getView("list")){var e=this.getView("layout").ui.listPanel,i=this.getView("list").$el,t=this.getView("layout").getRegion("pagination").$el,s=i.offset().top+e.scrollTop(),n=t?t.outerHeight():0,r=window.innerHeight,o=this.getView("endOfStableSearch")?this.getView("endOfStableSearch").$el.outerHeight():0,u=this.getView("layout").inlineIssueCreateContainer.$el.outerHeight()||0;e.css("height",r-s-o-n-u),this.getView("list").scrollSelectedIssueIntoView()}},focus:function(){this.getView("list")&&this.getView("list").focus()}})});
//# sourceMappingURL=List-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/services/API.js' */
define("jira/components/simpleissuelist/services/api",function(){"use strict";return{init:function(e){return{nextIssue:function(){e.selectNext()},previousIssue:function(){e.selectPrevious()}}}}});
//# sourceMappingURL=API-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/services/InlineIssueCreate.js' */
define("jira/components/simpleissuelist/services/inline-issue-create",["require"],function(e){"use strict";return e("jira/components/inline-issue-create")});
//# sourceMappingURL=InlineIssueCreate-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/templates/endofstablesearch.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Components&&(JIRA.Components={}),"undefined"==typeof JIRA.Components.SimpleIssueList&&(JIRA.Components.SimpleIssueList={}),"undefined"==typeof JIRA.Components.SimpleIssueList.Templates&&(JIRA.Components.SimpleIssueList.Templates={}),JIRA.Components.SimpleIssueList.Templates.endStableSearch=function(e,s){return'<div class="end-of-stable-message"><p>'+soy.$$escapeHtml("Too many search results to display. Refine your search criteria and try again.")+"</p></div>"};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/templates/issue.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Components&&(JIRA.Components={}),"undefined"==typeof JIRA.Components.SimpleIssueList&&(JIRA.Components.SimpleIssueList={}),"undefined"==typeof JIRA.Components.SimpleIssueList.Templates&&(JIRA.Components.SimpleIssueList.Templates={}),JIRA.Components.SimpleIssueList.Templates.issue=function(e,s){return'<li title="'+soy.$$escapeHtml(e.summary)+'" data-key="'+soy.$$escapeHtml(e.key)+'"><a class="splitview-issue-link" href="'+soy.$$escapeHtml(AJS.contextPath())+"/browse/"+soy.$$escapeHtml(e.key)+'"><span class="issue-link-key"><img height="16" width="16" alt="'+soy.$$escapeHtml(e.typeName)+'" title="'+soy.$$escapeHtml(e.typeName)+" - "+soy.$$escapeHtml(e.typeDescription)+'" src="'+soy.$$escapeHtml(e.typeIcon)+'" />&nbsp;'+soy.$$escapeHtml(e.key)+'</span><span class="issue-link-summary">'+soy.$$escapeHtml(e.summary)+"</span></a></li>"},JIRA.Components.SimpleIssueList.Templates.inaccessibleIssue=function(e,s){return'<li class="inaccessible-issue" data-key="'+soy.$$escapeHtml(e.key)+'">'+soy.$$escapeHtml("This issue can no longer be opened")+"</li>"};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/templates/issuelist.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Components&&(JIRA.Components={}),"undefined"==typeof JIRA.Components.SimpleIssueList&&(JIRA.Components.SimpleIssueList={}),"undefined"==typeof JIRA.Components.SimpleIssueList.Templates&&(JIRA.Components.SimpleIssueList.Templates={}),JIRA.Components.SimpleIssueList.Templates.issueList=function(e,s){return'<div class="list-content"><ol class="issue-list"></ol></div>'};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/templates/layout.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Components&&(JIRA.Components={}),"undefined"==typeof JIRA.Components.SimpleIssueList&&(JIRA.Components.SimpleIssueList={}),"undefined"==typeof JIRA.Components.SimpleIssueList.Templates&&(JIRA.Components.SimpleIssueList.Templates={}),JIRA.Components.SimpleIssueList.Templates.layout=function(i,e){return'<div class="simple-issue-list"><div class="list-panel"><div class="list-ordering"></div><div class="search-results"></div></div><div class="end-of-stable-message-container"></div><div class="inline-issue-create-container"></div><div class="aui-group pagination-view count-pagination"><div class="refresh-container aui-item"></div><div class="pagination-container aui-item"></div></div></div>'},JIRA.Components.SimpleIssueList.Templates.loading=function(i,e){return'<div class="loading"></div>'};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/templates/pagination.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Components&&(JIRA.Components={}),"undefined"==typeof JIRA.Components.SimpleIssueList&&(JIRA.Components.SimpleIssueList={}),"undefined"==typeof JIRA.Components.SimpleIssueList.Templates&&(JIRA.Components.SimpleIssueList.Templates={}),JIRA.Components.SimpleIssueList.Templates.pagination=function(e,a){var t='<div class="pagination" data-displayable-total="'+soy.$$escapeHtml(e.displayableTotal)+'">',s=5,n=Math.floor((e.displayableTotal-1)/e.pageSize),o=Math.floor(e.startIndex/e.pageSize),p=""+(e.hasQueryString?soy.$$filterNoAutoescape(e.searchQuery)+"&startIndex=":soy.$$filterNoAutoescape(e.searchQuery)+"?startIndex="),l=e.startIndex-e.pageSize;t+=(l>=0?'<a href="'+soy.$$escapeHtml(p)+soy.$$escapeHtml(l)+'" data-start-index="'+soy.$$escapeHtml(l)+'" class="icon icon-previous" title="'+soy.$$escapeHtml(AJS.format("Go to page {0} of {1}",o,n+1))+'"><span>&lt;&lt; '+soy.$$escapeHtml("Previous")+"</span></a>":"")+JIRA.Components.SimpleIssueList.Templates.numberLinksLogicBranch({startPage:o-Math.floor(s/2),endPage:o+Math.floor(s/2),lastPage:n,urlFragment:p,currentPage:o+1,maxPagesDisplayed:s,pageSize:e.pageSize,displayableTotal:e.displayableTotal});var i=Math.min(e.startIndex+e.pageSize,e.displayableTotal);return t+=(i<e.displayableTotal?'<a href="'+soy.$$escapeHtml(p)+soy.$$escapeHtml(i)+'" data-start-index="'+soy.$$escapeHtml(i)+'" class="icon icon-next" title="'+soy.$$escapeHtml(AJS.format("Go to page {0} of {1}",o+2,n+1))+'"><span>'+soy.$$escapeHtml("Next")+" &gt;&gt;</span></a>":"")+"</div>"},JIRA.Components.SimpleIssueList.Templates.numberLinksLogicBranch=function(e,a){return""+(e.lastPage<e.maxPagesDisplayed?JIRA.Components.SimpleIssueList.Templates.numberLinks(soy.$$augmentMap(e,{startPage:0,endPage:e.lastPage})):e.startPage<0?JIRA.Components.SimpleIssueList.Templates.numberLinks(soy.$$augmentMap(e,{startPage:0,endPage:e.endPage-e.startPage})):e.endPage>e.lastPage?JIRA.Components.SimpleIssueList.Templates.numberLinks(soy.$$augmentMap(e,{startPage:e.startPage-(e.endPage-e.lastPage),endPage:e.lastPage})):JIRA.Components.SimpleIssueList.Templates.numberLinks(e))},JIRA.Components.SimpleIssueList.Templates.numberLinks=function(e,a){var t="",s=e.endPage-e.startPage+1;if(s>1)for(var n=Math.round(s),o=0;o<n;o++){var p=o+e.startPage,l=p+1,i=p*e.pageSize,m=Math.min(i+e.pageSize,e.displayableTotal),r=""+soy.$$escapeHtml(AJS.format("Issues {0} - {1}",i+1,m));t+=" "+(l==e.currentPage?'<strong title="'+soy.$$escapeHtml(r)+'">'+soy.$$escapeHtml(l)+"</strong>":'<a href="'+soy.$$escapeHtml(e.urlFragment)+soy.$$escapeHtml(i)+'" data-page="'+soy.$$escapeHtml(l)+'" data-start-index="'+soy.$$escapeHtml(i)+'" title="'+soy.$$escapeHtml(r)+'">'+soy.$$escapeHtml(l)+"</a>")}return t};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/templates/refresh.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Components&&(JIRA.Components={}),"undefined"==typeof JIRA.Components.SimpleIssueList&&(JIRA.Components.SimpleIssueList={}),"undefined"==typeof JIRA.Components.SimpleIssueList.Templates&&(JIRA.Components.SimpleIssueList.Templates={}),JIRA.Components.SimpleIssueList.Templates.refresh=function(e,s){return'<a href="#" class="refresh-table" title="'+soy.$$escapeHtml("Refresh results")+'"><span class="aui-icon aui-icon-small aui-iconfont-refresh-small">'+soy.$$escapeHtml("Refresh results")+"</span></a>"};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/templates/amd-wrapper.js' */
define("jira/components/simpleissuelist/templates",function(){"use strict";return JIRA.Components.SimpleIssueList.Templates}),AJS.namespace("JIRA.Components.SimpleIssueList.Templates",null,require("jira/components/simpleissuelist/templates"));
//# sourceMappingURL=amd-wrapper-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/views/EndStableSearch.js' */
define("jira/components/simpleissuelist/views/endstablesearch",["require"],function(e){"use strict";var t=e("jira/components/libs/marionette-2.1.0"),s=e("jira/components/simpleissuelist/templates");return t.ItemView.extend({template:s.endStableSearch})});
//# sourceMappingURL=EndStableSearch-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/views/Issue.js' */
define("jira/components/simpleissuelist/views/issue",["require"],function(e){"use strict";var t=e("jira/components/libs/marionette-2.1.0"),i=e("jira/components/simpleissuelist/templates");return t.ItemView.extend({template:i.issue,ui:{link:"a"},events:{simpleClick:function(e){e.preventDefault(),this.trigger("select")}},serializeData:function(){var e=this.model;return{id:e.get("id"),key:e.get("key"),summary:e.get("summary"),typeName:e.get("type").name,typeDescription:e.get("type").description,typeIcon:e.get("type").iconUrl}},onRender:function(){this.unwrapTemplate()},highlight:function(){this.$el.addClass("focused"),this.focus(),this.scrollIntoView()},unhighlight:function(){this.$el.removeClass("focused")},scrollIntoView:function(){this.$el.scrollIntoViewForAuto()},focus:function(){this.ui.link.focus()}})});
//# sourceMappingURL=Issue-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/views/InaccessibleIssue.js' */
define("jira/components/simpleissuelist/views/inaccessibleissue",["require"],function(e){"use strict";var s=e("jira/components/simpleissuelist/views/issue"),i=e("jira/components/simpleissuelist/templates");return s.extend({template:i.inaccessibleIssue,triggers:{click:"select"},serializeData:function(){var e=this.model;return{key:e.get("key")}}})});
//# sourceMappingURL=InaccessibleIssue-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/views/IssueList.js' */
define("jira/components/simpleissuelist/views/issuelist",["require"],function(i){"use strict";var e=i("jira/components/libs/marionette-2.1.0"),t=i("jira/components/simpleissuelist/views/inaccessibleissue"),s=i("jira/components/simpleissuelist/views/issue"),n=i("jira/components/simpleissuelist/templates");return e.CompositeView.extend({template:n.issueList,childViewContainer:"ol",getChildView:function(i){return i.get("inaccessible")?t:s},_initialEvents:function(){},onUpdate:function(){if(this.collection.selected){var i=this.children.findByModel(this.collection.selected);i&&i.highlight()}},onRender:function(){this.unwrapTemplate()},update:function(i){this.collection=i,this.render(),this.triggerMethod("update")},updateIssue:function(i){var e=this.children.findByModel(i);if(e){this.removeChildView(e);var t=this.getChildView(i),s=this.collection.indexOf(i);this.addChild(i,t,s),this.triggerMethod("update")}},unselectIssue:function(i){if(this.collection){var e=this.collection.get(i);if(e){var t=this.children.findByModel(e);t&&t.unhighlight()}}},selectIssue:function(i){if(this.collection){var e=this.collection.get(i);if(e){var t=this.children.findByModel(e);t&&t.highlight()}}},scrollSelectedIssueIntoView:function(){if(this.collection){var i=this.collection.selected;if(i){var e=this.children.findByModel(i);e&&e.scrollIntoView()}}},focus:function(){!this.children||this.children.length<1||this.children.findByIndex(0).focus()}})});
//# sourceMappingURL=IssueList-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/views/Layout.js' */
define("jira/components/simpleissuelist/views/layout",["require"],function(e){"use strict";var i=e("jira/components/libs/marionette-2.1.0"),n=e("jira/components/simpleissuelist/templates");return i.LayoutView.extend({template:n.layout,regions:{pagination:".pagination-container",refresh:".refresh-container",searchResults:".search-results",orderBy:".list-ordering",endOfStableMessageContainer:".end-of-stable-message-container",inlineIssueCreateContainer:".inline-issue-create-container"},ui:{listPanel:".list-panel"},showLoading:function(){this.ui.listPanel.addClass("loading")},hideLoading:function(){this.ui.listPanel.removeClass("loading")}})});
//# sourceMappingURL=Layout-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/views/Loading.js' */
define("jira/components/simpleissuelist/views/loading",["require"],function(e){"use strict";var i=e("jira/components/libs/marionette-2.1.0"),t=e("jira/components/simpleissuelist/templates");return i.ItemView.extend({template:t.loading,onRender:function(){this.unwrapTemplate()}})});
//# sourceMappingURL=Loading-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/views/Pagination.js' */
define("jira/components/simpleissuelist/views/pagination",["require"],function(e){"use strict";var t=e("jira/components/libs/marionette-2.1.0"),i=e("jira/components/libs/uri"),n=e("jira/components/simpleissuelist/templates");return t.ItemView.extend({template:n.pagination,ui:{prev:".icon-previous",next:".icon-next",page:"a[data-page]"},triggers:{"click @ui.prev":"prev","click @ui.next":"next"},onRender:function(){this.unwrapTemplate()},events:{"click @ui.page":function(e){var t=e.target.getAttribute("data-page");e.preventDefault(),this.trigger("goto",parseInt(t,10)-1)}},update:function(e){this.collection=e,this.render()},serializeData:function(){if(this.collection){var e=new i(this.options.baseURL),t=e.query().length>0;return{startIndex:this.collection.state.pageSize*this.collection.state.currentPage,pageSize:this.collection.state.pageSize,searchQuery:e.toString(),hasQueryString:t,displayableTotal:this.collection.state.totalRecords}}}})});
//# sourceMappingURL=Pagination-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'simpleissuelist/views/Refresh.js' */
define("jira/components/simpleissuelist/views/refresh",["require"],function(e){"use strict";var i=e("jira/components/libs/marionette-2.1.0"),s=e("jira/components/simpleissuelist/templates");return i.ItemView.extend({template:s.refresh,triggers:{click:"refresh"},onRender:function(){this.unwrapTemplate()}})});
//# sourceMappingURL=Refresh-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:pager', location = 'pager/templates/pager.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Components&&(JIRA.Components={}),"undefined"==typeof JIRA.Components.Pager&&(JIRA.Components.Pager={}),"undefined"==typeof JIRA.Components.Pager.Templates&&(JIRA.Components.Pager.Templates={}),JIRA.Components.Pager.Templates.Pager=function(e,s){return'<ul class="pager"><li class="previous">'+(e.previousIssue&&1!=e.position?'<a data-id="'+soy.$$escapeHtml(e.previousIssue.id)+'" data-key="'+soy.$$escapeHtml(e.previousIssue.key)+'" href="'+soy.$$escapeHtml(AJS.contextPath())+"/browse/"+soy.$$escapeHtml(e.previousIssue.key)+'" rel="'+soy.$$escapeHtml(e.previousIssue.key)+'" title="'+soy.$$escapeHtml("Previous Issue")+" '"+soy.$$escapeHtml(e.previousIssue.key)+'\'"><span class="icon icon-page-prev"><span>'+soy.$$escapeHtml("Previous Issue")+" '"+soy.$$escapeHtml(e.previousIssue.key)+"'</span></span></a>":e.position&&e.resultCount?'<span class="icon icon-page-prev-deactivated" title="'+soy.$$escapeHtml("Not available - this is the first issue")+'"></span>':"")+'</li><li class="showing">'+(e.position&&e.resultCount?e.hasLoadedTotalCountFromServer?soy.$$escapeHtml(AJS.format("{0} of {1}",e.position,e.resultCount)):soy.$$escapeHtml(AJS.format("{0} of more than {1}",e.position,e.resultCount)):"")+'</li><li class="next">'+(e.nextIssue&&e.position!=e.resultCount?'<a data-id="'+soy.$$escapeHtml(e.nextIssue.id)+'" data-key="'+soy.$$escapeHtml(e.nextIssue.key)+'" href="'+soy.$$escapeHtml(AJS.contextPath())+"/browse/"+soy.$$escapeHtml(e.nextIssue.key)+'" id="next-issue" rel="'+soy.$$escapeHtml(e.nextIssue.key)+'" title="'+soy.$$escapeHtml("Next Issue")+" '"+soy.$$escapeHtml(e.nextIssue.key)+'\'"><span class="icon icon-page-next"><span>'+soy.$$escapeHtml("Next Issue")+" '"+soy.$$escapeHtml(e.nextIssue.key)+"'</span></span></a>":e.position&&e.resultCount?e.isAtTheEndOfStableSearch?'<span class="icon icon-page-next-deactivated" title="'+soy.$$escapeHtml(AJS.format("Whoa, you\'\'ve got quite a few issues there. We can show you the first {0}, but you should refine your search to return fewer issues.",e.stableSearchCount))+'"></span>':'<span class="icon icon-page-next-deactivated" title="'+soy.$$escapeHtml("Not available - this is the last issue")+'"></span>':"")+"</li></ul>"};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:pager', location = 'pager/templates/amd-wrapper.js' */
define("jira/components/pager/templates",function(){"use strict";return JIRA.Components.Pager.Templates}),AJS.namespace("JIRA.Components.Pager.Templates",null,require("jira/components/pager/templates"));
//# sourceMappingURL=amd-wrapper-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:pager', location = 'pager/views/PagerView.js' */
define("jira/components/pager/views/pager",["require"],function(e){"use strict";var s=e("jira/components/libs/marionette-2.1.0"),t=e("jira/components/pager/templates"),i=e("jira/components/utils/ajshelper");return s.ItemView.extend({getTemplate:function(){return!(!this.searchResults||!this.searchResults.selected)&&t.Pager},ui:{next:".next a",previous:".previous a",nextIcon:".next span.icon"},triggers:{"simpleClick @ui.next":"next","simpleClick @ui.previous":"previous"},update:function(e){this.searchResults=e,this.undelegateEvents(),this.render(),this.delegateEvents()},onRender:function(){if(this.searchResults&&this.searchResults.selected){var e=this.searchResults.getIssueAtGlobalIndex(this.searchResults.allIssues.length-1);e.id===this.searchResults.selected.id&&this.searchResults.isAtTheEndOfStableSearch()&&this.ui.nextIcon.tooltip({gravity:"ne"})}var s=i.activeShortcuts();s&&(s.j&&this.ui.next.length&&s.j._addShortcutTitle(this.ui.next),s.k&&this.ui.previous.length&&s.k._addShortcutTitle(this.ui.previous))},serializeData:function(){var e=this.searchResults,s=e.selected;if(s){var t=this.searchResults.getPositionOfIssueInSearchResults(this.searchResults.selected.id),i={position:t+1,resultCount:this.searchResults.getTotalIssuesInDb(),hasLoadedTotalCountFromServer:this.searchResults.hasLoadedTotalCount()},a=this.searchResults.getIssueAtGlobalIndex(t+1);a?i.nextIssue={id:a.id,key:a.key}:this.searchResults.isAtTheEndOfStableSearch()&&(i.isAtTheEndOfStableSearch=!0,i.stableSearchCount=this.searchResults.allIssues.length);var r=this.searchResults.getIssueAtGlobalIndex(t-1);return r&&(i.previousIssue={id:r.id,key:r.key}),i}}})});
//# sourceMappingURL=PagerView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:pager', location = 'pager/Pager.js' */
define("jira/components/pager",["require"],function(e){"use strict";var t=e("jira/components/pager/views/pager"),i=e("jira/components/libs/marionette-2.1.0");return i.ViewManager.extend({_buildSearchResults:function(e){this._destroySearchResults(),this.searchResults=e,this.listenTo(this.searchResults,{"select reset":function(){this.getView("view").update(this.searchResults)}})},_destroySearchResults:function(){this.searchResults&&(this.stopListening(this.searchResults),delete this.searchResults)},_buildView:function(){this.buildView("view",function(){var e=new t({el:this.el});return this.listenTo(e,{next:function(){this.trigger("next")},previous:function(){this.trigger("previous")}}),e})},initialize:function(e){this.el=e.el,this._buildView()},onDestroy:function(){i.ViewManager.prototype.onDestroy.call(this),this._destroySearchResults()},load:function(e){this._buildSearchResults(e)},update:function(e){this.load(e),this.getView("view").update(e)},show:function(e){this.hideView("view"),this.showView("view",function(){var i=new t({el:e});return this.listenTo(i,{next:function(){this.trigger("next")},previous:function(){this.trigger("previous")}}),i})}})});
//# sourceMappingURL=Pager-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:detailslayout', location = 'lib/jquery.ui.sidebar.js' */
!function(t){t.widget("ui.sidebar",{version:"0.1",options:{minWidth:function(t){return 50},maxWidth:function(t){return window.innerWidth},resize:t.noop,easeOff:0},_create:function(){_.bindAll(this,"_handleDrag","_persist","_setContainment","_setHandlePosition","updatePosition"),this.options.easeOff&&(this.updatePosition=_.debounce(this.updatePosition,this.options.easeOff)),this.options.id||console.error("ui.sidebar: You must specify an id"),this._addHandle(),this._restore(),t(window).resize(_.debounce(this.updatePosition,30))},_restore:function(){if(window.localStorage){var t=localStorage.getItem("ui.sidebar."+this.options.id);t&&this._setWidth(t)}},_persist:function(){window.localStorage&&localStorage.setItem("ui.sidebar."+this.options.id,this.element.outerWidth())},_setContainment:function(){var t=window.innerHeight;this._elementLeft=this.element.offset().left,this._minLeft=this._elementLeft+this.options.minWidth(this),this._maxLeft=Math.max(this._minLeft,this._elementLeft+this.options.maxWidth(this)),this.handle.draggable({containment:[this._minLeft,t,this._maxLeft,t]})},_handleDrag:function(t,e){var i=e.position.left-this._elementLeft;this._setWidth(i,!0)},_setWidth:function(t,e){if(!e){var i=this.options.maxWidth(this),s=this.options.minWidth(this);t>i?t=i:t<s&&(t=s)}t-=this.element.outerWidth()-this.element.width(),this.element.width(t),this.options.resize(t)},_addHandle:function(){var e=document.createElement("div");e.setAttribute("class","ui-sidebar"),this.handle=t(e).appendTo(this.element),this.handle.draggable({axis:"x",drag:this._handleDrag,stop:this._persist}),this.handle.mousedown(this._setContainment),_.defer(this._setHandlePosition)},_setHandlePosition:function(){if(this._setContainment(),this._minLeft===this._maxLeft)this.handle.hide();else{var t=this.element.offset(),e=t.left+this.element.outerWidth();this.handle.css({top:t.top,left:e,height:this.element.outerHeight()}).show()}},updatePosition:function(){this._setHandlePosition(),this._setWidth(this.handle.offset().left-this._elementLeft),this._persist()}})}(jQuery);
//# sourceMappingURL=jquery.ui.sidebar-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:detailslayout', location = 'detailslayout/templates/detailslayout.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Components&&(JIRA.Components={}),"undefined"==typeof JIRA.Components.DetailsLayout&&(JIRA.Components.DetailsLayout={}),"undefined"==typeof JIRA.Components.DetailsLayout.Templates&&(JIRA.Components.DetailsLayout.Templates={}),JIRA.Components.DetailsLayout.Templates.container=function(e,s){return'<div class="details-layout"></div>'},JIRA.Components.DetailsLayout.Templates.layout=function(e,s){return'<div class="aui-group split-view"><div class="aui-item list-results-panel"></div><div class="aui-item detail-panel"><div class="issue-container"></div><div class="tools-container"></div></div></div>'},JIRA.Components.DetailsLayout.Templates.empty=function(e,s){return'<div><div class="navigator-content empty-results"><div class="jira-adbox jira-adbox-medium no-results no-results-message"><h3>'+soy.$$escapeHtml("No issues were found to match your search")+'</h3><p class="no-results-hint">'+soy.$$filterNoAutoescape(AJS.format("Try modifying your search criteria or {0}creating a new issue{1}",'<a class="create-issue" href="'+AJS.contextPath()+'/secure/CreateIssue!default.jspa">',"</a>"))+"</p></div></div></div>"},JIRA.Components.DetailsLayout.Templates.loading=function(e,s){return'<div class="loading"></div>'},JIRA.Components.DetailsLayout.Templates.tools=function(e,s){return'<div class="issue-tools"><div class="pager-container"></div>'+(e.showExpand?'<button title="'+soy.$$escapeHtml(AJS.format("Expand issue ( {0} )",e.expandShortcutKey))+'" class="aui-button aui-button-subtle expand"><span class="aui-icon aui-icon-small aui-iconfont-focus">'+soy.$$escapeHtml(AJS.format("Expand issue ( {0} )",e.expandShortcutKey))+"</span></button>":"")+"</div>"};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:detailslayout', location = 'detailslayout/templates/amd-wrapper.js' */
define("jira/components/detailslayout/templates",function(){"use strict";return JIRA.Components.DetailsLayout.Templates}),AJS.namespace("JIRA.Components.DetailsLayout.Templates",null,require("jira/components/detailslayout/templates"));
//# sourceMappingURL=amd-wrapper-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:detailslayout', location = 'detailslayout/controllers/Tools.js' */
define("jira/components/detailslayout/controllers/tools",["require"],function(t){"use strict";var e=t("jira/components/libs/marionette-2.1.0"),i=t("jira/components/pager"),o=t("jira/components/detailslayout/views/tools");return e.ViewManager.extend({initialize:function(t){this.showExpand=t.showExpand,this._buildTools(),this._buildPager()},show:function(t){this.toolsView.setElement(t),this.toolsView.render()},load:function(t){this.pager.update(t)},onDestroy:function(){this.pager.destroy(),e.ViewManager.prototype.onDestroy.call(this)},shiftTools:function(){this.toolsView.shiftTools()},_buildTools:function(){this.toolsView=this.buildView("toolsView",function(){var t=new o({showExpand:this.showExpand});return this.listenTo(t,{render:function(){t.pager._ensureElement(),this.pager.show(t.pager.$el)},expand:function(){this.trigger("expand")}}),t})},_buildPager:function(){this.pager=new i,this.listenTo(this.pager,{next:function(){this.trigger("pager:next")},previous:function(){this.trigger("pager:previous")}})}})});
//# sourceMappingURL=Tools-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:detailslayout', location = 'detailslayout/views/Container.js' */
define("jira/components/detailslayout/views/container",["require"],function(e){"use strict";var n=e("jira/components/libs/marionette-2.1.0"),t=e("jira/components/detailslayout/templates");return n.ItemView.extend({template:t.container,onRender:function(){this.unwrapTemplate()},showView:function(e){this.$el.append(e.$el)},showLoading:function(e){this.$el.prepend(e.$el)},hideLoading:function(e){e.$el.detach()}})});
//# sourceMappingURL=Container-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:detailslayout', location = 'detailslayout/views/Empty.js' */
define("jira/components/detailslayout/views/empty",["require"],function(e){"use strict";var t=e("jira/components/libs/marionette-2.1.0"),n=e("jira/components/detailslayout/templates");return t.ItemView.extend({template:n.empty,onRender:function(){this.unwrapTemplate()}})});
//# sourceMappingURL=Empty-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:detailslayout', location = 'detailslayout/views/Tools.js' */
define("jira/components/detailslayout/views/tools",["require"],function(t){"use strict";var e=t("jira/components/libs/marionette-2.1.0"),i=t("jira/components/detailslayout/templates"),o=t("jira/ajs/keyboardshortcut/keyboard-shortcut");return e.LayoutView.extend({initialize:function(t){this.showExpand=t.showExpand},template:i.tools,regions:{pager:".pager-container"},ui:{issueTools:".issue-tools",expand:".expand"},triggers:{"click @ui.expand":"expand"},serializeData:function(){return{showExpand:this.showExpand||!1,expandShortcutKey:o.getKeyboardShortcutKeys("fullscreen.issue")}},onRender:function(){this.showExpand&&this.ui.expand.tooltip({gravity:"e"})},shiftTools:function(){this.ui.issueTools.css("margin","8px 24px 0px 0px")},onDestroy:function(){this.showExpand&&this.ui.expand.tooltip&&this.ui.expand.tooltip("hide")}})});
//# sourceMappingURL=Tools-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:detailslayout', location = 'detailslayout/views/Layout.js' */
define("jira/components/detailslayout/views/layout",["require"],function(i){"use strict";var e=i("jira/components/libs/marionette-2.1.0"),t=i("jira/components/detailslayout/templates");return e.LayoutView.extend({template:t.layout,regions:{issuesList:".list-results-panel",issueComponent:".issue-container",tools:".tools-container"},ui:{detailPanel:".detail-panel"},onRender:function(){this.issuesList._ensureElement()},maximizeDetailPanelContents:function(){this.issueComponent.$el.css("maxWidth","none"),this.ui.detailPanel.css("margin","0")},maximizeDetailPanelHeight:function(){var i=this.ui.detailPanel.offset().top;this.ui.detailPanel.css("height",window.innerHeight-i)},showDraggable:function(){var i=0;this.issuesList.$el.sidebar({id:"layoutview-draggable",minWidth:function(){return 250},maxWidth:function(){return this.$el.width()-500}.bind(this),resize:function(e){e!==i&&(i=e,this.trigger("resize"))}.bind(this)})},updateDraggable:function(){this.issuesList.$el.sidebar("updatePosition")}})});
//# sourceMappingURL=Layout-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:detailslayout', location = 'detailslayout/views/Loading.js' */
define("jira/components/detailslayout/views/loading",["require"],function(e){"use strict";var t=e("jira/components/libs/marionette-2.1.0"),n=e("jira/components/detailslayout/templates");return t.ItemView.extend({template:n.loading,onRender:function(){this.unwrapTemplate()}})});
//# sourceMappingURL=Loading-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:detailslayout', location = 'detailslayout/DetailsLayout.js' */
define("jira/components/detailslayout",["require"],function(e){"use strict";function i(e,i,s){var t,n=i;return function(){var o=arguments;clearTimeout(t),t=setTimeout(function(){e.apply(this,o),n=i},n),n=s}}var s=e("jira/components/libs/underscore"),t=e("jira/components/issuecomponentresolver"),n=e("jira/components/libs/marionette-2.1.0"),o=e("jira/components/simpleissuelist"),u=e("jira/components/detailslayout/views/container"),r=e("jira/components/detailslayout/views/empty"),a=e("jira/components/detailslayout/views/layout"),l=e("jira/components/detailslayout/views/loading"),h=e("jira/components/detailslayout/controllers/tools"),d=e("jquery"),c=e("jira/featureflags/feature-manager");return n.ViewManager.extend({_buildIssueComponent:function(){var e=t.resolve(),s=this.issueComponent=new e({isGlobalIssueNavigator:this.isGlobalIssueNavigator}),n=this.options;this._loadIssueInViewerComponent=i(function(e){s.loadIssue({id:e.id,key:e.key,detailView:!n.shouldUpdateCurrentProject}).always(function(){this.hideLoading()}.bind(this))}.bind(this),100,500),this.listenTo(s,{loadError:function(e){this.simpleIssueList.disableIssue(e.issueId),this.trigger("editorError")},loadComplete:function(e,i){this.adjustSize(),this.simpleIssueList.updateIssue(e.id,{key:e.get("entity").key,summary:e.get("entity").summary,status:e.get("entity").status.name});var s={issueKey:e.get("entity").key,issueId:e.id,issueEditorOptions:i,projectId:e.get("projectId"),projectKey:e.get("projectKey"),projectType:e.get("projectType")};i&&"issues-cache-refresh"===i.loadReason?this.trigger("editorLoadedFromCache",s):this.trigger("editorLoaded",s)},fieldsLoaded:function(){this.trigger("editorFieldsLoaded")},saveSuccess:function(e){this.simpleIssueList.refreshIssue(e.issueId),this.trigger("editor:saveSuccess",{event:e.issueId,savedFieldIds:e.savedFieldIds,savedFieldTypes:e.savedFieldTypes,duration:e.duration})},editField:function(e){this.trigger("editor:editField",e)},editFieldCancel:function(e){this.trigger("editor:editFieldCancel",e)},linkToIssue:function(e){this.trigger("linkToIssue",e)},refineViewer:function(e){e.preventDefault(),this.updateIssueComponent(e.query)},linkInErrorMessage:function(e){e.preventDefault(),this.simpleIssueList.selectIssue(e.issueData.id)},individualPanelRendered:function(e){this.trigger("individualPanelRendered",e)}})},_buildSimpleIssueList:function(){this.simpleIssueList=new o({baseURL:this.baseURL,displayInlineIssueCreate:this.options.displayInlineIssueCreate}),this.listenTo(this.simpleIssueList,{select:function(e){this.trigger("select",e)},update:function(){this.trigger("list:update")},refresh:function(){this.trigger("list:refresh")},sort:function(e){this.trigger("list:sort",e)},"list:select":function(e){this.trigger("list:select",{id:e.id,key:e.key,absolutePosition:e.absolutePosition,relativePosition:e.relativePosition})},"list:pagination":function(){this.trigger("list:pagination")},"before:loadpage":function(){this.showLoading()},"error:loadpage":function(e){this.hideLoading(),this.trigger("error:loadpage",e)},issueCreated:function(e){this.trigger("issueCreated",e)}})},_buildContainerView:function(){this.containerView=this.buildView("containerView",function(){var e=new u;return this.listenTo(e,{render:function(){this.getView("layoutView").render(),this.getView("emptyView").render(),this.getView("loadingView").render(),e.$el.prepend(this.getView("layoutView").$el)}}),e})},_buildEmptyView:function(){this.emptyView=this.buildView("emptyView",function(){var e;return e="function"==typeof this.options.emptyViewFactory?this.options.emptyViewFactory():new r,this.listenTo(e,{render:function(){this.containerView.$el.append(e.$el),this.adjustSize(),this.trigger("empty")}}),e})},_showEmptyView:function(e){this.layoutView.$el.detach(),this.containerView.$el.empty(),this.containerView.showView(this.emptyView),this.adjustSize();var i=e?{updateActiveView:!0}:void 0;this.trigger("empty",i),d("body").removeClass("page-type-split")},_buildTools:function(){this.tools=new h({showExpand:this.useExpand}),this.listenTo(this.tools,{expand:function(){this.trigger("expand")},"pager:next":function(){var e=this.selectNext();this.trigger("pager:next",e)},"pager:previous":function(){var e=this.selectPrevious();this.trigger("pager:previous",e)}})},_buildLayoutView:function(){this.layoutView=this.buildView("layoutView",function(){var e=new a;return this.listenTo(e,{render:function(){e.issueComponent._ensureElement(),this.issueComponent.setContainer(e.issueComponent.$el),e.issuesList._ensureElement(),this.simpleIssueList.show(e.issuesList.$el),e.tools._ensureElement(),this.tools.show(e.tools.$el)},resize:function(){this.adjustSize()}}),e})},_buildLoadingView:function(){this.loadingView=this.buildView("loadingView",function(){return new l})},_buildComponents:function(){this._buildIssueComponent(),this._buildSimpleIssueList(),this._buildTools()},_buildViews:function(){this._buildLayoutView(),this._buildEmptyView(),this._buildLoadingView(),this._buildContainerView(),this.containerView.render()},initialize:function(e){this.baseURL=e.baseURL,this.useExpand=e.useExpand||!1,this.isGlobalIssueNavigator=e.isGlobalIssueNavigator,this.isNewIssueViewEnabledInGlobalIssueNav=c.isFeatureEnabled("issue.details.global-issue-navigator"),this.isIssueDeleteModalAllLocationsEnabled=c.isFeatureEnabled("issue.actions.delete-confirmation-modal.all-locations"),this._buildComponents(),this._buildViews(),this.listenToFrontendGlobalIssueNavIssueRemoval()},_showLoadingView:function(){this.containerView.showLoading(this.loadingView)},_hideLoadingView:function(){this.containerView.hideLoading(this.loadingView)},_showLayoutView:function(){this.emptyView.$el.detach(),this.containerView.showView(this.layoutView),this.layoutView.showDraggable(),this.adjustSize(),window.scrollTo(0,0),d("body").addClass("page-type-split")},show:function(e){return e.replaceWith(this.containerView.$el),this.containerView.$el},onDestroy:function(){this.tools.destroy(),this.issueComponent.close(),this.simpleIssueList.destroy(),n.ViewManager.prototype.onDestroy.call(this)},showLoading:function(){this._showLoadingView()},hideLoading:function(){this._hideLoadingView()},load:function(e,i,s){this.searchResults&&(this.stopListening(this.searchResults),delete this.searchResults),this.searchResults=e,this.listenTo(this.searchResults,{issueDeleted:function(){this.searchResults.length||this._showEmptyView()},"select selectIssueNotInList":function(e){this.showLoading(),this._loadIssueInViewerComponent({id:e.id,key:e.get("key")})}}),this.searchResults.isEmptySearch()?this._showEmptyView(!!s):(this.simpleIssueList.load(this.searchResults,i,!!s),this.tools.load(this.searchResults),this._showLayoutView()),this.trigger("list:render")},listenToFrontendGlobalIssueNavIssueRemoval:function(){if(this.isNewIssueViewEnabledInGlobalIssueNav&&this.isIssueDeleteModalAllLocationsEnabled){var e=this.simpleIssueList;AJS.$("#global-issue-navigator-container").on("remove-issue-from-search-list",function(i,s){e.removeIssue(s.issueId)})}},adjustSize:function(){s.defer(function(){var e=this.getView("layoutView");e&&(this.simpleIssueList.adjustSize(),e.maximizeDetailPanelHeight(),this.issueComponent.applyResponsiveDesign(),e.updateDraggable(),this.isGlobalIssueNavigator&&this.isNewIssueViewEnabledInGlobalIssueNav&&e.maximizeDetailPanelContents());var i=this.tools.getView("toolsView");if(i&&this.isGlobalIssueNavigator&&this.isNewIssueViewEnabledInGlobalIssueNav&&i.shiftTools(),this.getView("emptyView")){var s=this.getView("emptyView").$el,t=s.length&&s.offset().top;s.css("height",window.innerHeight-t)}}.bind(this))},refreshIssue:function(e){return this.simpleIssueList.refreshIssue(e),this.issueComponent.refreshIssue()},removeIssue:function(e){return this.showLoading(),this.simpleIssueList.removeIssue(e).always(function(){this.hideLoading()}.bind(this)).done(function(e){0===e&&this._showEmptyView()}.bind(this))},getActiveIssueId:function(){return this.issueComponent.getIssueId()},getActiveIssueKey:function(){return this.issueComponent.getIssueKey()},getActiveProjectId:function(){return this.issueComponent.getProjectId()},getActiveProjectKey:function(){return this.issueComponent.getProjectKey()},getActiveProjectType:function(){return this.issueComponent.getProjectType()},selectNext:function(){return this.simpleIssueList.selectNext()},selectPrevious:function(){return this.simpleIssueList.selectPrevious()},updateIssueComponent:function(e){this.showLoading(),this.listenToOnce(this.issueComponent,"loadComplete",function(){this.hideLoading()}),this.issueComponent.updateIssueWithQuery(e)},isLoading:function(){return this.issueComponent.isCurrentlyLoading()},hasSavesInProgress:function(){return"hasSavesInProgress"in this.issueComponent&&this.issueComponent.hasSavesInProgress()},canDismissComment:function(){return this.issueComponent.canDismissComment()},getEditorFields:function(){return"getFields"in this.issueComponent?this.issueComponent.getFields():void 0},abortPending:function(){return this.issueComponent.abortPending()},beforeHide:function(){return this.issueComponent.beforeHide()},beforeShow:function(){return this.issueComponent.beforeShow()},removeIssueMetadata:function(){return this.issueComponent.removeIssueMetadata()},editField:function(e){if("editField"in this.issueComponent)return this.issueComponent.editField(e)},focusList:function(){this.simpleIssueList.focus()},focusEditor:function(){this.issueComponent.focus()}})});
//# sourceMappingURL=DetailsLayout-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:browser-metrics', location = 'browser-metrics/reporters/performance-mark.js' */
define("jira/components/browser-metrics/reporters/performance-mark",function(){"use strict";return function(r){return function(e){var t={};if(!window.performance.mark)return t;if(!e.isInitial)return t;var n=window.performance.getEntriesByName(r);if(!(n.length>0))return t;var i=n[0];if(i.startTime<e.start||i.startTime>e.end)return t;var a,s=i.startTime-e.start,o=e.threshold,f=4*e.threshold;return a=s<=o?1:s<=f?.5:0,{readyForUser:s,apdex:a}}}});
//# sourceMappingURL=performance-mark-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = '/static/components/subnavigator/Subnavigator.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Subnavigator");var e=require("jira/featureflags/simplified-ux-feature-manager");JIRA.Projects.Subnavigator=JIRA.Projects.Libs.Marionette.Controller.extend({_shouldShow:function(){return!this.model.isEmpty()},_shouldShowTriggerView:function(){if(this.triggerView&&this.triggerView.isHidden)return!1;if(this.options.changeViewText){var e=this.model.getAllItems().length;return e>1}return!0},_sanitizeItems:function(){var e=this.options.itemGroups;return e&&e[0]&&!_.isArray(e[0])?[e]:e},_buildModel:function(){this.model=new JIRA.Projects.Subnavigator.Entities.Items({itemGroups:this._sanitizeItems()}),this.model.selectItem(this.options.selectedItem),this.listenTo(this.model,"change:selectedItem",this.show)},_buildTitleView:function(){"summary-options"===this.options.id?this.titleView=new JIRA.Projects.Subnavigator.Views.Title({model:this.model,fixedTitle:"Summary"}):this.titleView=new JIRA.Projects.Subnavigator.Views.Title({model:this.model}),this.titleView.setElement(AJS.$(this.options.titlePlaceholder))},_buildTriggerView:function(){"summary-options"===this.options.id&&e.isAdg3ModeOn()?this.triggerView=new JIRA.Projects.Subnavigator.Views.SummaryTrigger({model:this.model,id:this.options.id,itemGroups:this.options.itemGroups,label:this.options.changeViewText}):this.options.changeViewText?(this.triggerView=new JIRA.Projects.Subnavigator.Views.StaticTrigger({model:this.model,id:this.options.id,label:this.options.changeViewText}),this.triggerView.isHidden="report"===this.options.id&&e.isAdg3ModeOn()):this.triggerView=new JIRA.Projects.Subnavigator.Views.Trigger({model:this.model,id:this.options.id}),this.triggerView.setElement(AJS.$(this.options.triggerPlaceholder))},_buildContentView:function(){this.contentView=new JIRA.Projects.Subnavigator.Views.Content({model:this.model,id:this.options.id,hideSelectedItem:this.options.hideSelectedItem}),this.contentView.setElement(AJS.$(this.options.contentPlaceholder)),this.listenTo(this.contentView,"click",function(e){setTimeout(function(){this.model.selectItem(e);var i=this.model.get("selectedItem"),t=this.triggerPreventable("itemSelected",{item:i});t.isPrevented||i.link&&require("jira/util/browser").reloadViaWindowLocation(i.link)}.bind(this),0)}.bind(this))},initialize:function(){this._buildModel(),this._shouldShow()&&(this._buildTriggerView(),this._buildContentView(),this.options.titlePlaceholder&&this._buildTitleView())},show:function(){this._shouldShow()&&(this._shouldShowTriggerView()&&(this.triggerView.render(),this.contentView.render()),this.titleView&&this.titleView.render())},selectItem:function(e){this._shouldShow()&&this.model.selectItem(e)}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = '/static/components/subnavigator/templates/templates.soy' */
// This file was automatically generated from templates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Projects.Subnavigator.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Projects == 'undefined') { JIRA.Projects = {}; }
if (typeof JIRA.Projects.Subnavigator == 'undefined') { JIRA.Projects.Subnavigator = {}; }
if (typeof JIRA.Projects.Subnavigator.Templates == 'undefined') { JIRA.Projects.Subnavigator.Templates = {}; }


JIRA.Projects.Subnavigator.Templates.content = function(opt_data, opt_ignored) {
  var output = '<div id="subnav-opts' + ((opt_data.idSuffix) ? '-' + soy.$$escapeHtml(opt_data.idSuffix) : '') + '" class="subnav-opts subnavigator-content aui-dropdown2 aui-style-default">';
  var itemGroupList9 = opt_data.itemGroups;
  var itemGroupListLen9 = itemGroupList9.length;
  for (var itemGroupIndex9 = 0; itemGroupIndex9 < itemGroupListLen9; itemGroupIndex9++) {
    var itemGroupData9 = itemGroupList9[itemGroupIndex9];
    output += JIRA.Projects.Subnavigator.Templates.itemSection({items: itemGroupData9});
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Projects.Subnavigator.Templates.content.soyTemplateName = 'JIRA.Projects.Subnavigator.Templates.content';
}


JIRA.Projects.Subnavigator.Templates.itemSection = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.items.length > 0) {
    output += '<div class="aui-dropdown2-section"><ul class="aui-list-truncate">';
    var itemList18 = opt_data.items;
    var itemListLen18 = itemList18.length;
    for (var itemIndex18 = 0; itemIndex18 < itemListLen18; itemIndex18++) {
      var itemData18 = itemList18[itemIndex18];
      output += JIRA.Projects.Subnavigator.Templates.item({item: itemData18});
    }
    output += '</ul></div>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Projects.Subnavigator.Templates.itemSection.soyTemplateName = 'JIRA.Projects.Subnavigator.Templates.itemSection';
}


JIRA.Projects.Subnavigator.Templates.item = function(opt_data, opt_ignored) {
  return '<li' + ((opt_data.item.description) ? ' title="' + soy.$$escapeHtml(opt_data.item.description) + '"' : '') + '>' + ((opt_data.item.link) ? '<a data-item-id="' + soy.$$escapeHtml(opt_data.item.id) + '" href="' + soy.$$escapeHtml(opt_data.item.link) + '">' + soy.$$escapeHtml(opt_data.item.label) + '</a>' : '<a class="aui-dropdown2-radio' + ((opt_data.item.selected) ? ' checked' : '') + '" data-item-id="' + soy.$$escapeHtml(opt_data.item.id) + '">' + soy.$$escapeHtml(opt_data.item.label) + '</a>') + '</li>';
};
if (goog.DEBUG) {
  JIRA.Projects.Subnavigator.Templates.item.soyTemplateName = 'JIRA.Projects.Subnavigator.Templates.item';
}


JIRA.Projects.Subnavigator.Templates.tabbedTrigger = function(opt_data, opt_ignored) {
  var output = '<div class="aui-tabs horizontal-tabs aui-tabs-disabled"><ul class="tabs-menu summary-trigger">';
  var groupList53 = opt_data.itemGroups;
  var groupListLen53 = groupList53.length;
  for (var groupIndex53 = 0; groupIndex53 < groupListLen53; groupIndex53++) {
    var groupData53 = groupList53[groupIndex53];
    output += '<li class="menu-item subnav-trigger subnavigator-trigger ' + ((opt_data.selectedItem == groupData53.id) ? ' active-tab ' : '') + '"><a href="summary/' + soy.$$escapeHtml(groupData53.id) + '">' + soy.$$escapeHtml(groupData53.label) + '</a></li>';
  }
  output += '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Projects.Subnavigator.Templates.tabbedTrigger.soyTemplateName = 'JIRA.Projects.Subnavigator.Templates.tabbedTrigger';
}


JIRA.Projects.Subnavigator.Templates.trigger = function(opt_data, opt_ignored) {
  return '' + ((opt_data.renderAsButton) ? '<button id="subnav-trigger' + ((opt_data.idSuffix) ? '-' + soy.$$escapeHtml(opt_data.idSuffix) : '') + '" class="subnav-trigger subnavigator-trigger aui-button ' + ((opt_data.useLinkStyle) ? 'aui-button-link' : '') + ' aui-dropdown2-trigger" aria-owns="subnav-opts' + ((opt_data.idSuffix) ? '-' + soy.$$escapeHtml(opt_data.idSuffix) : '') + '" role="menu" aria-haspopup="true" >' + soy.$$escapeHtml(opt_data.label) + '</button>' : '<span id="subnav-trigger' + ((opt_data.idSuffix) ? '-' + soy.$$escapeHtml(opt_data.idSuffix) : '') + '" class="subnav-trigger subnavigator-trigger">' + soy.$$escapeHtml(opt_data.label) + '</button>');
};
if (goog.DEBUG) {
  JIRA.Projects.Subnavigator.Templates.trigger.soyTemplateName = 'JIRA.Projects.Subnavigator.Templates.trigger';
}


JIRA.Projects.Subnavigator.Templates.title = function(opt_data, opt_ignored) {
  return '<span class="subnavigator-title" title="' + soy.$$escapeHtml(opt_data.title) + '">' + soy.$$escapeHtml(opt_data.title) + '</span>';
};
if (goog.DEBUG) {
  JIRA.Projects.Subnavigator.Templates.title.soyTemplateName = 'JIRA.Projects.Subnavigator.Templates.title';
}
;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = '/static/components/subnavigator/views/Content.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Subnavigator.Views.Content"),JIRA.Projects.Subnavigator.Views.Content=JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Projects.Subnavigator.Templates.content,tooltipTimer:null,ui:{item:"li"},initialize:function(){this.tooltipTimeout=this.options.tooltipTimeout||600,this.hideSelectedItem=this.options.hideSelectedItem===!1},_hideTooltips:function(){clearTimeout(this.tooltipTimer),AJS.$(".tipsy").remove()},events:{"aui-dropdown2-item-check":function(t){this._hideTooltips();var i=AJS.$(t.target).attr("data-item-id");this.trigger("click",i)},"mouseenter @ui.item":function(t){this._hideTooltips(),this.tooltipTimer=setTimeout(function(){AJS.$(t.currentTarget).tipsy("show")},this.tooltipTimeout)},"mouseleave @ui.item":"_hideTooltips","aui-dropdown2-hide":"_hideTooltips"},serializeData:function(){var t=this.model.get("selectedItem"),i=this.model.get("itemGroups"),e=this.hideSelectedItem;return t&&(i=_.map(i,function(i){return e?_.map(i,function(i){var e=_.clone(i);return e.id===t.id&&(e.selected=!0),e}):_.reject(i,function(i){return i.id===t.id})})),{itemGroups:i,idSuffix:this.options.id||""}},onRender:function(){this.unwrapTemplate(),this._hideTooltips(),AJS.$(this.ui.item).tooltip({gravity:"w",trigger:"manual"})}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = '/static/components/subnavigator/views/Trigger.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Subnavigator.Views.Trigger");var e=require("jira/featureflags/simplified-ux-feature-manager");JIRA.Projects.Subnavigator.Views.Trigger=JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Projects.Subnavigator.Templates.trigger,serializeData:function(){return{label:this.model.get("selectedItem").label,renderAsButton:this.model.getAllItems().length>1,idSuffix:this.options.id||"",useLinkStyle:!e.isAdg3StylesEnabled()}},onRender:function(){this.unwrapTemplate()}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = '/static/components/subnavigator/views/StaticTrigger.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Subnavigator.Views.StaticTrigger");var e=require("jira/featureflags/simplified-ux-feature-manager");JIRA.Projects.Subnavigator.Views.StaticTrigger=JIRA.Projects.Subnavigator.Views.Trigger.extend({serializeData:function(){return{label:this.options.label,renderAsButton:!0,idSuffix:this.options.id||"",useLinkStyle:!e.isAdg3StylesEnabled()}},onRender:function(){this.unwrapTemplate(),this.$el.removeClass("subnav-trigger")}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = '/static/components/subnavigator/views/SummaryTrigger.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Subnavigator.Views.SummaryTrigger"),JIRA.Projects.Subnavigator.Views.SummaryTrigger=JIRA.Projects.Subnavigator.Views.Trigger.extend({template:JIRA.Projects.Subnavigator.Templates.tabbedTrigger,serializeData:function(){return{selectedItem:this.options.model.attributes.selectedItem.id,itemGroups:this.options.itemGroups}},onRender:function(){this.unwrapTemplate(),this.$el.removeClass("subnav-trigger")}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = '/static/components/subnavigator/views/Title.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Subnavigator.Views.Title"),JIRA.Projects.Subnavigator.Views.Title=JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Projects.Subnavigator.Templates.title,serializeData:function(){var e=this.model.get("selectedItem");return{title:this.options.fixedTitle||e.label}}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = '/static/components/subnavigator/entities/Items.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Subnavigator.Entities.Items"),JIRA.Projects.Subnavigator.Entities.Items=Backbone.Model.extend({defaults:{itemGroups:[],selectedItem:null},isEmpty:function(){return _.isEmpty(this.getAllItems())},selectItem:function(t){var e=this.getAllItems();this.set("selectedItem",_.find(e,function(e){return e.id===t})||_.first(e))},getAllItems:function(){return _.flatten(this.get("itemGroups"))}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:libs-uri', location = 'js/libs/uri.js' */
define("jira/projectissuenavigator/libs/uri",["require"],function(i){"use strict";return i("atlassian/libs/uri-1.14.1")});
//# sourceMappingURL=uri-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:libs-underscore', location = 'js/libs/underscore.js' */
define("jira/projectissuenavigator/libs/underscore",["require"],function(e){"use strict";return e("underscore")});
//# sourceMappingURL=underscore-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:libs-backbone', location = 'js/libs/backbone.js' */
define("jira/projectissuenavigator/libs/backbone",["require"],function(e){"use strict";var r=e("backbone");return r});
//# sourceMappingURL=backbone-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:libs-marionette', location = 'js/libs/marionette.js' */
define("jira/projectissuenavigator/libs/marionette",["require"],function(e){"use strict";return e("jira/components/libs/marionette-2.1.0")});
//# sourceMappingURL=marionette-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:libs-ajshelper', location = 'js/libs/ajshelper.js' */
define("jira/projectissuenavigator/libs/ajshelper",[],function(){"use strict";var r=window.AJS;return{format:r.format.bind(r),trigger:r.trigger.bind(r),Meta:r.Meta}});
//# sourceMappingURL=ajshelper-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:apis', location = 'js/apis/projects.js' */
define("jira/projectissuenavigator/apis/projects",[],function(){"use strict";return window.JIRA.API.Projects});
//# sourceMappingURL=projects-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:metrics', location = 'content/js/util/metrics.js' */
define("jira/issues/navigator/metrics",["internal/browser-metrics","jira/components/browser-metrics/reporters/performance-mark"],function(e,r){"use strict";function s(e,r){for(var s=document.querySelectorAll(e),t=0;t<s.length;t++)s[t].classList.add(r)}return{notifyIssueView:function(t){if(t)e.start({key:"jira.issue.view",isInitial:!0,reporters:r("issue-container-rendered")}),e.end({key:"jira.issue.view"});else{var i="#key-val",a=".issue-body-content:not(.browser-metrics-stale)";s(a,"browser-metrics-stale"),e.start({key:"jira.issue.view",isInitial:!1,ready:[{selector:i,requireUpdate:!1},{selector:a,requireUpdate:!1}]})}},notifyIssueNavList:function(){var r=".navigator-content",t="#issuetable:not(.browser-metrics-stale), .error:not(.browser-metrics-stale), .no-results-hint:not(.browser-metrics-stale), #errorPageContainer:not(.browser-metrics-stale)";s(t,"browser-metrics-stale"),e.start({key:"jira.issue.nav-list",ready:[{selector:r,requireUpdate:!1},{selector:t,requireUpdate:!1}]})}}});
//# sourceMappingURL=metrics-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'templates/issuesearch.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Issues&&(JIRA.Issues={}),"undefined"==typeof JIRA.Issues.Projects&&(JIRA.Issues.Projects={}),"undefined"==typeof JIRA.Issues.Projects.IssueSearch&&(JIRA.Issues.Projects.IssueSearch={}),"undefined"==typeof JIRA.Issues.Projects.IssueSearch.Templates&&(JIRA.Issues.Projects.IssueSearch.Templates={}),JIRA.Issues.Projects.IssueSearch.Templates.defaultEmptyState=function(s,e){return'<div class="jira-adbox jira-adbox-medium no-results no-results-message"><h3>'+soy.$$escapeHtml("No issues were found to match your search")+'</h3><p class="no-results-hint">'+soy.$$escapeHtml("Try modifying your filter or creating a new issue below")+"</p></div>"},JIRA.Issues.Projects.IssueSearch.Templates.emptyState=function(s,e){return'<div><div class="navigator-content empty-results">'+soy.$$filterNoAutoescape(s.content)+'<div class="inline-issue-create-container"></div></div></div>'},JIRA.Issues.Projects.IssueSearch.Templates.issueCreatedFlag=function(s,e){var a="",t='<a class="issue-created-key issue-link" data-issue-key="'+s.issueKey+'" href="'+AJS.contextPath()+"/projects/"+s.projectKey+"/issues/"+s.issueKey+'">'+s.issueKey+" - "+s.summary+"</a>";return a+=AJS.format("{0} {1} has been successfully created.","Issue",t)},JIRA.Issues.Projects.IssueSearch.Templates.issueSearch=function(s,e){return s=s||{},'<div class="issue-search"><header class="'+soy.$$escapeHtml("aui-page-header"+(s.shouldShowBreadcrumbs?"contains-breadcrumbs":""))+'">'+(s.shouldShowBreadcrumbs?JIRA.Templates.Headers.breadcrumbs(null):"")+'<div class="aui-page-header-inner"><div class="aui-group aui-group-split"><div class="aui-item subnavigation"><h1><span id="issues-subnavigation-title" class="subnavigator-title"></span><span id="issues-subnavigation-trigger"></span></h1><span id="issues-subnavigation-content"></span></div><div class="aui-item"><div id="full-issue-navigator"><a href="'+soy.$$escapeHtml(AJS.contextPath())+'/issues/">'+soy.$$escapeHtml("Advanced search")+'</a></div></div></div></div></header><div class="details-layout"></div></div>'};;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'templates/issueview.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Issues&&(JIRA.Issues={}),"undefined"==typeof JIRA.Issues.Projects&&(JIRA.Issues.Projects={}),"undefined"==typeof JIRA.Issues.Projects.IssueView&&(JIRA.Issues.Projects.IssueView={}),"undefined"==typeof JIRA.Issues.Projects.IssueView.Templates&&(JIRA.Issues.Projects.IssueView.Templates={}),JIRA.Issues.Projects.IssueView.Templates.issueView=function(s,e){return s=s||{},'<div class="issue-view"><div class="navigation-tools"><div class="pager-container"></div>'+(s.showCollapse?'<button title="'+soy.$$escapeHtml(AJS.format("Collapse issue ( {0} )",s.collapseShortcutKey))+'" class="aui-button aui-button-subtle collapse"><span class="aui-icon aui-icon-small aui-iconfont-unfocus">'+soy.$$escapeHtml(AJS.format("Collapse issue ( {0} )",s.collapseShortcutKey))+"</span></button>":"")+'</div><div class="issue-container">'+(!s.showFrontendIssue&&s.serverRenderedViewIssue?JIRA.Components.IssueViewer.Templates.layout(s)+"<script data-defer-skip>\n                    if (window.performance && window.performance.mark) {\n                        window.performance.mark('issue-container-rendered');\n                    }\n                    </script>":"")+(s.showFrontendIssue?soy.$$filterNoAutoescape(s.boardFragmentHtml):"")+"</div></div>"},JIRA.Issues.Projects.IssueView.Templates.newIssueView=function(s,e){return s=s||{},'<div class="new-issue-view"><div class="navigation-tools"><div class="pager-container"></div>'+(s.showCollapse?'<button title="'+soy.$$escapeHtml(AJS.format("Collapse issue ( {0} )",s.collapseShortcutKey))+'" class="aui-button aui-button-subtle collapse"><span class="aui-icon aui-icon-small aui-iconfont-unfocus">'+soy.$$escapeHtml(AJS.format("Collapse issue ( {0} )",s.collapseShortcutKey))+"</span></button>":"")+'</div><div class="new-issue-container">'+soy.$$filterNoAutoescape(s.boardFragmentHtml)+"</div></div>"},JIRA.Issues.Projects.IssueView.Templates.simpleIssueView=function(s,e){return s=s||{},""+aui.page.document({windowTitle:s.windowTitle,content:'<div class="new-issue-view"><div class="navigation-tools"><div class="pager-container"></div></div><div class="new-issue-container">'+soy.$$filterNoAutoescape(s.fragmentHtml)+"</div></div>"})};;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/pages/issueview/FrontendBridge.js' */
!function(){var e=require("jquery"),r=new e.Deferred;define("jira/projectissuenavigator/pages/issueview/bridge",function(){return function(e){r.resolve(e)}}),define("jira/projectissuenavigator/pages/issueview/frontend",function(){return r.promise()})}();
//# sourceMappingURL=FrontendBridge-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/Analytics.js' */
define("jira/projectissuenavigator/services/analytics",["jira/analytics/web-client"],function(e){"use strict";var i=require("jira/projectissuenavigator/libs/ajshelper"),a=require("jira/featureflags/simplified-ux-feature-manager");return{filterSelect:function(e){i.trigger("analyticsEvent",{name:"jira.project.sidebar.issue.filter.select",data:{filterId:e.filterId,source:e.source}})},goToFullIssueNavigator:function(){i.trigger("analyticsEvent",{name:"jira.project.sidebar.issue.load.full.issue.nav"})},pinToGinFromAgility:function(){i.trigger("analyticsEvent",{name:"jira.frontend.fe.software.board.pin.to.gin"})},expandIssue:function(e){i.trigger("analyticsEvent",{name:"jira.project.sidebar.issue.expand",data:{source:e.source}})},collapseIssue:function(e){i.trigger("analyticsEvent",{name:"jira.project.sidebar.issue.collapse",data:{source:e.source}})},issueSelectedInList:function(e){i.trigger("analyticsEvent",{name:"jira.project.sidebar.issue.select.issue",data:{issueKey:e.key,source:"list",sameProject:!0}})},triggerProjectNavViewIssue:function(s){i.trigger("analyticsEvent",{name:"jira.project.sidebar.issue.view.issue",data:a.addAttributes({issueId:s.issueId,projectId:s.projectId,projectType:s.projectType,issueMatchesProjectContext:null!=s.issueKey&&0===s.issueKey.indexOf(s.projectKey+"-"),analyticsSource:s.analyticsSource})}),e.sendPageEvent("viewIssueScreen")},manageFilters:function(){i.trigger("analyticsEvent",{name:"jira.project.sidebar.issue.filter.manage"})},pager:function(e,a){i.trigger("analyticsEvent",{name:"jira.project.sidebar.issue.pager",data:{current:a.current,total:a.total,direction:e}})},editorFieldSaved:function(e){i.trigger("analyticsEvent",{name:"kickass.inlineEdit",data:{issueId:e.issueId,savedFieldIds:e.savedFieldIds,savedFieldTypes:e.savedFieldTypes,source:"jira.projectissuenav.global"}})},editFieldStarted:function(e){i.trigger("analyticsEvent",{name:"kickass.inlineEdit.start",data:{issueId:e.issueId,fieldId:e.fieldId,fieldType:e.fieldType,source:"jira.projectissuenav.global"}})},editFieldCancelled:function(e){i.trigger("analyticsEvent",{name:"kickass.inlineEdit.cancel",data:{issueId:e.issueId,fieldId:e.fieldId,fieldType:e.fieldType,source:"jira.projectissuenav.global"}})}}});
//# sourceMappingURL=Analytics-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/API.js' */
define("jira/projectissuenavigator/services/api",["require"],function(e){"use strict";function s(e){var s={};return e.forEach(function(e){s[e]=function(){return o[e].apply(o,arguments)}}),s}function u(){var e=s(["nextIssue","previousIssue","getActiveIssueId","getActiveIssueKey","refreshActiveIssue","refreshIssue","editField","getFields","isSaving","isLoading","hasAccessibleIssue","showLoadError","waitForSavesToComplete","viewSelectedIssue","returnToSearch","focusSearch","toggleFilterPanel","isQueryValid","isFullScreenIssueVisible","switchLayouts","openFocusShifter","toggleFullscreenIssue"],o);return e}function t(e){var s={viewSelectedIssue:function(){e.viewSelectedIssue()},nextIssue:function(){e.nextIssue()},returnToSearch:function(){e.returnToSearch()},focusSearch:function(){e.focusSearch()},toggleFilterPanel:function(){e.toggleFilterPanel()},isQueryValid:function(){return e.isQueryValid()},isFullScreenIssueVisible:function(){return e.isFullScreenIssueVisible()},switchLayouts:function(){e.switchLayouts()},openFocusShifter:function(){e.openFocusShifter()},waitForSavesToComplete:function(){e.waitForSavesToComplete()},prevIssue:function(){e.previousIssue()},getSelectedIssueId:function(){return e.getActiveIssueId()},getSelectedIssueKey:function(){return e.getActiveIssueKey()},refreshSelectedIssue:function(){return e.refreshActiveIssue()},editFieldOnSelectedIssue:function(s){return e.editField(s)},getFieldsOnSelectedIssue:function(){return e.getFields()},hasSavesInProgress:function(){return e.isSaving()},isCurrentlyLoadingIssue:function(){return e.isLoading()},isSelectedIssueAccessible:function(){return e.hasAccessibleIssue()},issueIsVisible:function(){return e.hasAccessibleIssue()},showInlineIssueLoadError:function(){return e.showLoadError()},updateIssue:function(s){return s=s||{},e.refreshIssue(s.id)},toggleFullscreenIssue:function(){e.toggleFullscreenIssue()}};JIRA&&JIRA.Issues&&JIRA.Issues.Api?i.extend(JIRA.Issues.Api,s):AJS.namespace("JIRA.Issues.Api",null,s)}var i=e("jira/projectissuenavigator/libs/underscore"),n=function(){},r={nextIssue:n,previousIssue:n,getActiveIssueId:n,getActiveIssueKey:n,refreshActiveIssue:n,refreshIssue:n,editField:n,getFields:n,isSaving:n,isLoading:n,hasAccessibleIssue:n,showLoadError:n,waitForSavesToComplete:n,viewSelectedIssue:n,returnToSearch:n,focusSearch:n,toggleFilterPanel:n,isQueryValid:n,isFullScreenIssueVisible:n,switchLayouts:n,openFocusShifter:n,toggleFullscreenIssue:n},o=r;return{getDefaultImplementation:function(){return i.clone(r)},init:function(){var e=u();t(e),AJS.namespace("JIRA.API.IssueSearch",null,e)},useImplementation:function(e){o=e}}});
//# sourceMappingURL=API-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/Browser.js' */
define("jira/projectissuenavigator/services/browser",function(){"use strict";return{getCurrentUrl:function(){return document.location.href},getReferrerUrl:function(){return document.referrer},hasPushState:function(){return!(!window.history||!window.history.pushState)},locationReplace:function(n){return window.location.replace(n)},locationAssign:function(n){return window.location.assign(n)},getDocument:function(){return document},scrollIntoView:function(n){var t=document.getElementById(n);t&&t.scrollIntoView()}}});
//# sourceMappingURL=Browser-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/Filters.js' */
define("jira/projectissuenavigator/services/filters",["require"],function(e){"use strict";function t(e){return o.indexBy(o.flatten(e),"id")}var i,r,a,s,n,l=e("wrm/context-path")(),o=e("jira/projectissuenavigator/libs/underscore"),c=e("wrm/data"),u=e("jira/projectissuenavigator/libs/ajshelper"),f=e("jira/projectissuenavigator/apis/projects");return{initialize:function(){var e=this;return new Promise(function(t,o){i=c.claim("com.atlassian.jira.jira-projects-issue-navigator:generic-filters"),r=c.claim("com.atlassian.jira.jira-projects-issue-navigator:project-filters"),a=c.claim("com.atlassian.jira.jira-projects-issue-navigator:can-manage-filters"),n=c.claim("com.atlassian.jira.jira-projects-issue-navigator:default-filter-priority"),s=f.getCurrentProjectId(),i?t():jQuery.get(l+"/rest/filters/1.0/filters?projectKey="+f.getCurrentProjectKey()).done(function(s){i=s["com.atlassian.jira.jira-projects-issue-navigator:generic-filters"]||[],r=s["com.atlassian.jira.jira-projects-issue-navigator:project-filters"]||[],a=s["com.atlassian.jira.jira-projects-issue-navigator:can-manage-filters"]||!1,n=s["com.atlassian.jira.jira-projects-issue-navigator:default-filter-priority"]||[e.getAllIssuesFilterId()],t()}).fail(function(e,t){return o(t)})})},getExtraLinks:function(){return[{id:"manage",label:"Filters",link:l+"/secure/ManageFilters.jspa?searchShareType=project&projectShare="+s+"&Search=Search&filterView=search"}]},getAvailableFilters:function(e){var t=[];return i&&i.length&&t.push(i),r&&r.length&&(t.push(r),e&&a&&t.push(this.getExtraLinks())),t},getDefaultFilterId:function(){return o.find(n,function(e){return!!o.findWhere(o.flatten(this.getAvailableFilters()),{id:e})}.bind(this))},getJQL:function(e,t,i){var r=o.findWhere(o.flatten(this.getAvailableFilters()),{id:e});if(r)return u.format(r.jql,t,i||r.defaultOrderby)},getAllIssuesFilterId:function(){return"allissues"},sanitiseFilter:function(e){return o.some(o.flatten(this.getAvailableFilters()),function(t){return t.id===e})?e:this.getDefaultFilterId()},filterSupportsInlineIssueCreate:function(e){var i=t(this.getAvailableFilters(!1)),r=i[e];return Boolean(r&&r.supportsInlineIssueCreate)}}});
//# sourceMappingURL=Filters-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/DialogsOverrider.js' */
define("jira/projectissuenavigator/services/dialogsoverrider",["require"],function(e){"use strict";function i(e){return function(){var i=n.current;e.trigger("quickEdit",{issueId:i.issueId,issueKey:i.issueKey,message:i.options.issueMsg||"thanks_issue_updated"})}}function s(e){return function(){var i=n.current;e.trigger("quickCreateSubtask",{issueId:i.issueId,issueKey:i.issueKey,message:i.options.issueMsg||"thanks_issue_updated"})}}function t(e,i,s){return function(t,o,n){if(n){if(n.issueId=i(n),n.issueKey=s(n),"undefined"==typeof n.isIssueDialog)return;n.isIssueDialog()&&"clone-issue-dialog"!==n.options.id&&(n._performRedirect=function(){this.redirected=!1},n.options.onDialogFinished=function(){n.hide();var i;i="delete-issue-dialog"===n.options.id?"issueDelete":"issueUpdate",e.trigger(i,{issueId:n.issueId,issueKey:n.issueKey,message:n.options.issueMsg||"thanks_issue_updated"})})}}}function o(){return function(){r("body").css("overflow","")}}var n=e("jira/dialog/dialog"),u=e("jira/util/events"),a=e("jira/dialog/form-dialog"),r=e("jquery"),d=e("jira/dialog/labels-dialog"),l=e("jira/projectissuenavigator/libs/marionette");return l.Object.extend({_overrideLabelsDialogSubmitResponse:function(){this.oldLabelsDialogSubmitReponse=d.prototype._handleSubmitResponse,d.prototype._handleSubmitResponse=function(){return a.prototype._handleSubmitResponse.apply(this,arguments)},this.currentLabelsDialogSubmitResponse=d.prototype._handleSubmitResponse},_restoreLabelsDialogSubmitResponse:function(){d.prototype._handleSubmitResponse===this.currentLabelsDialogSubmitResponse&&(d.prototype._handleSubmitResponse=this.oldLabelsDialogSubmitReponse)},initialize:function(e){this._overrideLabelsDialogSubmitResponse(),this.handlerDialogShow=t(this,e.getIssueId,e.getIssueKey),this.handlerDialogHide=o(this,e.getIssueId,e.getIssueKey),u.bind("Dialog.show",this.handlerDialogShow),u.bind("Dialog.hide",this.handlerDialogHide),this.handlerQuickEditSuccess=i(this),u.bind("QuickEdit.sessionComplete",this.handlerQuickEditSuccess),this.handlerQuickCreateSubtaskSuccess=s(this),u.bind("QuickCreateSubtask.sessionComplete",this.handlerQuickCreateSubtaskSuccess)},destroy:function(){this._restoreLabelsDialogSubmitResponse(),u.unbind("Dialog.show",this.handlerDialogShow),u.unbind("Dialog.hide",this.handlerDialogHide),u.unbind("QuickEdit.sessionComplete",this.handlerQuickEditSuccess),u.unbind("QuickCreateSubtask.sessionComplete",this.handlerQuickCreateSubtaskSuccess)}})});
//# sourceMappingURL=DialogsOverrider-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/DialogsCleaner.js' */
define("jira/projectissuenavigator/services/dialogscleaner",["require"],function(e){"use strict";var r=e("jira/dialog/dialog");return{clean:function(){r.current&&r.current.hide()}}});
//# sourceMappingURL=DialogsCleaner-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/FocusShifter.js' */
define("jira/projectissuenavigator/services/focusshifter",["require"],function(e){"use strict";function i(e){return s.chain(e.models).filter(function(e){return"comment"!==e.id&&e.isEditable()}).map(function(e){return{label:e.getLabel(),value:e.id}}).value()}function t(e){return function(){var t=e.getFields(),r=t?i(t):[];return{id:"edit-fields",name:"Edit Fields",context:e.getIssueKey(),weight:100,getSuggestions:function(){return(new n.Deferred).resolve(r)},onSelection:function(i){var t=e.getFields().get(i);e.editField(t)}}}}var r=e("jira/projectissuenavigator/libs/marionette"),n=e("jquery"),s=e("jira/projectissuenavigator/libs/underscore"),o=e("jira/shifter");return r.Object.extend({initialize:function(e){this.provider=t(e),o.register(this.provider)},onDestroy:function(){o.unregister(this.provider)},show:function(){o.show()}})});
//# sourceMappingURL=FocusShifter-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/InlineIssueCreate.js' */
define("jira/projectissuenavigator/services/inline-issue-create",["require"],function(e){"use strict";var i=e("jira/components/inline-issue-create");return i});
//# sourceMappingURL=InlineIssueCreate-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/JiraEvents.js' */
define("jira/projectissuenavigator/services/jiraevents",["require"],function(e){"use strict";var i=e("jira/util/events"),t=e("jira/util/events/types"),r=e("jira/components/issueviewer/eventtypes"),n=e("jira/util/events/reasons"),s=e("jquery"),g=e("jira/projectissuenavigator/libs/marionette");return g.Object.extend({initialize:function(){this.deferredEvents=[],this.isDeferring=!0,s(function(){setTimeout(this._drainDeferredEvents.bind(this),0)}.bind(this))},triggerNewContentAddedFromPanelRefreshed:function(e){this.trigger(t.NEW_CONTENT_ADDED,[s(e),n.panelRefreshed])},triggerRefreshIssuePage:function(e){this.trigger(r.ISSUE_REFRESHED,[e])},triggerNewContentAddedFromPageLoad:function(e){this.trigger(t.NEW_CONTENT_ADDED,[s(e),n.pageLoad])},triggerRefreshToggleBlocks:function(e){this.trigger(t.REFRESH_TOGGLE_BLOCKS,[e])},triggerPanelRefreshed:function(e,i,t){this.trigger(r.PANEL_REFRESHED,[e,i,t])},_drainDeferredEvents:function(){this.isDeferring=!1,this.deferredEvents.forEach(function(e){this.trigger(e[0],e[1])}.bind(this)),this.deferredEvents.length=0},trigger:function(e,t){this.isDeferring?this.deferredEvents.push([e,t]):i.trigger(e,t)}})});
//# sourceMappingURL=JiraEvents-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/KeyboardShortcuts.js' */
define("jira/projectissuenavigator/services/keyboardshortcuts",["require"],function(e){"use strict";function i(){return u(n.getDocument()).find("div.aui-blanket").length>0}function t(e){return e.which===u.ui.keyCode.LEFT||e.which===u.ui.keyCode.RIGHT}function r(){return!s.areKeyboardShortcutsDisabled()}function o(e){if(r()&&!i()&&t(e)){var o=u(e.target),n=o.is(":not(:input)");(null==o||n)&&(e.which===u.ui.keyCode.LEFT?this.trigger("focusIssueList"):e.which===u.ui.keyCode.RIGHT&&this.trigger("focusIssueEditor"))}}var n=e("jira/projectissuenavigator/services/browser"),u=e("jquery"),s=e("jira/ajs/keyboardshortcut/keyboard-shortcut-toggle"),c=e("jira/projectissuenavigator/libs/marionette");return c.Object.extend({initialize:function(){u(n.getDocument()).on("keydown",o.bind(this))}})});
//# sourceMappingURL=KeyboardShortcuts-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/LinksCapturer.js' */
define("jira/projectissuenavigator/services/linkscapturer",["require"],function(i){"use strict";var e=i("jquery"),t=i("jira/projectissuenavigator/libs/marionette");return t.Object.extend({initialize:function(i){i=i||{},this.el=e(i.el),this.linkHandler=function(){this.trigger("linkToFullIssueNavigator")}.bind(this),this.linkToFullIssueNavigator()},linkToFullIssueNavigator:function(){this.el.on("click","#full-issue-navigator",this.linkHandler)},destroy:function(){this.el.off("click","#full-issue-navigator",this.linkHandler)}})});
//# sourceMappingURL=LinksCapturer-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/Metrics.js' */
define("jira/projectissuenavigator/services/metrics",["require"],function(e){"use strict";var s=e("internal/browser-metrics"),r=e("jira/components/browser-metrics/reporters/performance-mark");return{startIssueView:function(){s.start({key:"jira.project.issue.view-issue"})},startIssueSearch:function(){s.start({key:"jira.project.issue.nav-detail"})},markIssueViewFromPageLoad:function(){s.start({key:"jira.project.issue.view-issue",isInitial:!0,reporters:r("issue-container-rendered")}),s.end({key:"jira.project.issue.view-issue"})},startIssueSearchFromPageLoad:function(){s.start({key:"jira.project.issue.nav-detail",isInitial:!0})},endIssueView:function(){s.end({key:"jira.project.issue.view-issue"})},endIssueSearch:function(){s.end({key:"jira.project.issue.nav-detail"})}}});
//# sourceMappingURL=Metrics-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/Notifications.js' */
define("jira/projectissuenavigator/services/notifications",["require"],function(t){"use strict";var e=t("jira/message"),s=t("jira/projectissuenavigator/libs/ajshelper"),a={thanks_issue_updated:"{0} has been updated.",thanks_issue_transitioned:"{0} has been updated.",thanks_issue_assigned:"{0} has been assigned.",thanks_issue_commented:"{0} has been updated with your comment.",thanks_issue_worklogged:"Work has been logged on {0}.",thanks_issue_voted:"Your vote on {0} has been updated.",thanks_issue_watched:"Your watcher status on {0} has been updated.",thanks_issue_moved:"{0} has been moved.",thanks_issue_linked:"The links on {0} have been updated.",thanks_issue_cloned:"{0} has been cloned.",thanks_issue_labelled:"The labels on {0} have been updated.",thanks_issue_deleted:"{0} has been deleted.",thanks_issue_attached:"The file(s) have been attached to {0}."};return{show:function(t,n){var i=a[t||"thanks_issue_updated"];i&&n&&(i=s.format(i,n)),e.showSuccessMsg(i||t,{closeable:!0})}}});
//# sourceMappingURL=Notifications-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/Router.js' */
define("jira/projectissuenavigator/services/router",["require"],function(e){"use strict";var r=e("jira/projectissuenavigator/libs/backbone"),t=e("jira/projectissuenavigator/services/urlhelper"),i=e("jira/projectissuenavigator/services/browser"),s=e("jira/util/data/meta"),a=e("wrm/context-path")(),o=e("jira/projectissuenavigator/libs/uri"),n=e("jira/projectissuenavigator/libs/underscore");return r.Router.extend({initialize:function(){this._isFirstLoad=!0,this.route(/.*/,function(){var e=t.extractStateFromCurrentUrl(),r={issue:e.issue,filter:e.filter,orderby:e.orderby,startIndex:e.startIndex,project:e.project,referrer:e.referrer},i=function(e,t){this._isFirstLoad?(this._isFirstLoad=!1,this.trigger(t,r)):this.trigger(e,r)}.bind(this);t.isBrowseUrl()?i("route:browse","route:browse:initial"):i("route:issues","route:issues:initial")})},updateURL:function(e){e=e||{},this._updatePermalinkState(e);var r={issue:e.issue,project:e.project,filter:e.filter,orderby:e.orderby},s=e.isIssueView?t.generateBrowseUrl(r):t.generateUrl(r),a=new o(s),u=new o(i.getCurrentUrl()),l=new o({path:u.path(),query:u.query(),fragment:u.fragment()});a.equals(l)||(e.keepParameters&&(a.search(n.extend(l.search(!0),a.search(!0))),a.hash(l.hash()),s=a.toString()),this.navigate(s,{trigger:!1,replace:!!e.replaceHistory}))},goTo:function(e){e=e||{},i.locationAssign(t.generateUrl({project:e.project,issue:e.issue,filter:e.filter,orderby:e.orderby}))},_getBaseurl:function(){return o.build(n.extend(n.pick(o.parse(i.getCurrentUrl()),"protocol","hostname","port","username","password"),{path:a}))},_getServerBaseurl:function(){var e=s.get("jira-base-url");return e?e:this._getBaseurl()},_updatePermalinkState:function(e){e.issue&&s.set("viewissue-permlink",new o(this._getServerBaseurl()+"/browse/"+e.issue).normalize().toString())},start:function(){var e=t.generateRootUrl(),s=i.hasPushState(),a=t.getApplicationUrl(),o=a&&!t.isHashUrl();return!s&&o?void i.locationReplace(e+a.replace(/^\//,"#")):void r.history.start({root:"",pushState:!0})}})});
//# sourceMappingURL=Router-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/Traces.js' */
define("jira/projectissuenavigator/services/traces",function(){"use strict";return{traceListLoaded:function(){JIRA.trace("sidebarissuenavigator.list.loaded"),JIRA.trace("jira.search.finished")},traceEditorLoaded:function(){JIRA.trace("sidebarissuenavigator.editor.loaded")},traceEditorFieldsLoaded:function(){JIRA.trace("sidebarissuenavigator.editorfields.loaded")},traceEditorError:function(){JIRA.trace("sidebarissuenavigator.editor.error")},traceIssueViewRender:function(){JIRA.trace("jira.project.issueview.render")},traceIssueUpdated:function(){JIRA.trace("jira.issue.update")}}});
//# sourceMappingURL=Traces-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/URLHelper.js' */
define("jira/projectissuenavigator/services/urlhelper",["require"],function(r){"use strict";function e(r,e){var t=r.search(!0).filter;e.filter=t||null}function t(r,e){var t=r.search(!0).orderby;e.orderby=t||null}function n(r,e){var t=r.filename();t&&(e.issue=t)}function i(r,e){var t=r.search(!0).startIndex;e.startIndex=t||null}function a(r,e){var t=r.search(!0).referrer;e.referrer=t||null}function s(r){var e=new l("");return r.issue&&e.filename(r.issue),r.filter?e.setSearch("filter",r.filter):e.removeSearch("filter"),r.orderby?e.setSearch("orderby",r.orderby):e.removeSearch("orderby"),e.toString()}function o(r){var e=new l("");return r&&e.path(u+"/projects/"+r+"/issues"),e.toString()}var u=r("wrm/context-path")(),c=r("jira/projectissuenavigator/services/browser"),l=r("jira/projectissuenavigator/libs/uri");return{extractProjectKeyFromCurrentUrl:function(){var r,e=new l(c.getCurrentUrl()).pathname();return r=this.isBrowseUrl(e)?e.match(/\/([A-Z0-9]+)\-[0-9]+$/):e.match(/\/projects\/([^\/]+?)\/issues/),r?r[1]:null},extractIssueKeyFromCurrentUrl:function(){var r=new l(c.getCurrentUrl()).pathname(),e=r.match(/\/([A-Z0-9]+\-[0-9]+)$/);return e?e[1]:null},generateUrl:function(r){var e=o(r.project),t=s(r),n=c.hasPushState()?"/":"#";return e+n+t},generateBrowseUrl:function(r){var e=new l("");e.path(u+"/browse/");var t=s(r);return e.toString()+t},extractStateFromCurrentUrl:function(){var r=new l(this.getApplicationUrl());this.isHashUrl()&&(r=new l(r.fragment()));var s={};return e(r,s),t(r,s),n(r,s),i(r,s),a(r,s),s.project=this.extractProjectKeyFromCurrentUrl(),s},generateRootUrl:function(r){return r=r||this.extractProjectKeyFromCurrentUrl(),o(r)},getApplicationUrl:function(){var r=c.getCurrentUrl(),e=new RegExp(this.isBrowseUrl(r)?"^.*/browse/":"^.*"+this.generateRootUrl());return r.replace(e,"")},isBrowseUrl:function(r){return r=r||c.getCurrentUrl(),r.indexOf("/browse/")>-1},isHashUrl:function(){var r=this.getApplicationUrl(),e=r.match(/^#/);return!!e},getAnchor:function(){return new l(c.getCurrentUrl()).fragment()},isReferrerUrl:function(r){return r.test(c.getReferrerUrl())},isRapidBoardReferred:function(){return this.isReferrerUrl(/\/secure\/rapidboard\.jspa/i)}}});
//# sourceMappingURL=URLHelper-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/pages/issueview/views/IssueView.js' */
define("jira/projectissuenavigator/pages/issueview/views/issue",["require"],function(e){"use strict";var i=e("jira/projectissuenavigator/libs/marionette"),t=e("jira/projectissuenavigator/pages/issueview/templates");return i.LayoutView.extend({template:t.issueView,className:"wrapper",rendered:!1,ui:{collapse:".collapse"},regions:{issueContainer:".issue-container",pager:".pager-container"},triggers:{"click @ui.collapse":{event:"collapse",preventDefault:!1,stopPropagation:!1}},maximizeHeight:function(){this.$el.css("height",window.innerHeight-this.$el.offset().top)},onRender:function(){this.ui.collapse.tooltip({gravity:"e"}),this.unwrapTemplate(this.className),this.rendered=!0},onDestroy:function(){this.ui.collapse.tooltip&&this.ui.collapse.tooltip("hide")},attach:function(e){this.setElement(e),this.bindUIElements(),this.triggerMethod("render")},templateHelpers:function(){return this.options}})});
//# sourceMappingURL=IssueView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/pages/issueview/IssueView.js' */
define("jira/projectissuenavigator/pages/issueview",["require"],function(e){"use strict";var s=e("jira/projectissuenavigator/libs/underscore"),t=e("jira/projectissuenavigator/services/dialogsoverrider"),i=e("jira/projectissuenavigator/services/focusshifter"),n=e("jira/components/issuecomponentresolver"),r=e("jira/projectissuenavigator/pages/issueview/views/issue"),o=e("jira/components/issueviewer/templates"),u=e("jira/flag"),a=e("jquery"),c=e("jira/ajs/keyboardshortcut/keyboard-shortcut"),h=e("jira/projectissuenavigator/libs/marionette"),d=e("jira/projectissuenavigator/services/metrics"),l=e("jira/projectissuenavigator/services/notifications"),g=e("jira/components/pager"),p=e("jira/projectissuenavigator/services/traces"),f=e("wrm/data"),I=e("jira/components/analytics-tracker/tracker");return h.Object.extend({initialize:function(e){this.showCollapse=e.showCollapse||!1,this.state=e.state,this._buildIssueView(),this._buildIssueComponent(),this._buildDialogsOverrider(),this._buildFocusShifter(),this._buildPager()},onDestroy:function(){this.issueComponent.close(),this.issueView.destroy(),this.dialogsOverrider.destroy(),this.focusShifter.destroy(),this._destroyPager(),this.el&&this.el.remove()},_destroyPager:function(){this.pager&&(this.pager.destroy(),this.stopListening(this.pager),delete this.pager)},render:function(){this.issueView.render(),this.el=this.issueView.$el},attach:function(e){this.issueView.attach(e),this.el=this.issueView.$el},loadFromPage:function(e){return this._updateState(e),this._updateURL(e),this._updatePager(),this.issueComponent.loadIssueRenderedByTheServer({key:e,project:{id:f.claim("projectId"),key:f.claim("projectKey"),projectType:f.claim("projectType")},detailView:!1})},load:function(e){return this._updateState(e),this._updateURL(e),this._updatePager(),this.issueComponent.loadIssue({key:e,detailView:!1})},_updateURL:function(e){this.trigger("updateUrl",{issueKey:e})},_updatePager:function(){var e=this.state.get("searchResults"),s=this.state.get("issue");e&&e.hasIssueInSearch(s)?(e.selected&&e.selected.get("key")===s||e.select(s),this.pager.update(e)):this._destroyPager()},_updateState:function(e){this.state.set("issue",e)},adjustSize:function(){this.issueView.maximizeHeight(),this.issueComponent.applyResponsiveDesign()},_buildIssueView:function(){this.issueView=new r({showCollapse:this.showCollapse,collapseShortcutKey:c.getKeyboardShortcutKeys("fullscreen.issue")}),this.listenTo(this.issueView,{render:function(){this.issueView.issueContainer._ensureElement(),this.issueComponent.setContainer(this.issueView.issueContainer.$el),this.pager&&(this.issueView.pager._ensureElement(),this.pager.show(this.issueView.pager.$el))},collapse:function(){this.trigger("collapse","ui-button")}})},_buildIssueComponent:function(){var e=n.resolve();this.issueComponent=new e({useJIRAEvents:!1}),this.listenTo(this.issueComponent,{fieldsLoaded:function(){this.trigger("editorFieldsLoaded")},loadError:function(e){this.trigger("loadError",e)},loadComplete:function(e,s){this.trigger("editorLoaded",s),I.initialize(e.getProjectId(),e.getProjectType(),e.getId())},linkToIssue:function(e){this.trigger("linkToIssue",e),this.state.unset("searchResults"),this.state.unset("filter"),this.load(e.issueKey)},individualPanelRendered:function(e){this.trigger("individualPanelRendered",e)},renderMainView:function(e,s){this.trigger("viewRendered",e,s)},panelRendered:function(e,s,t){this.trigger("panelRendered",e,s,t)}})},_buildDialogsOverrider:function(){function e(e,s,t){return t&&t.$activeTrigger&&t.$activeTrigger.data(e)||"function"==typeof s&&s()}this.dialogsOverrider=new t({getIssueId:s.partial(e,"issueid",this.issueComponent.getIssueId.bind(this.issueComponent)),getIssueKey:s.partial(e,"issuekey",this.issueComponent.getIssueKey.bind(this.issueComponent))}),this.listenTo(this.dialogsOverrider,{"quickEdit quickCreateSubtask issueUpdate":function(e){this.issueComponent.refreshIssue().done(function(){l.show(e.message,e.issueKey),p.traceIssueUpdated()})},issueDelete:function(e){l.show(e.message,e.issueKey),e.issueKey===this.state.get("issue")?this.trigger("issueDelete",e):this.issueComponent.refreshIssue()}})},_buildFocusShifter:function(){this.focusShifter=new i(this.issueComponent)},getIssueId:function(){return this.issueComponent.getIssueId()},getIssueKey:function(){return this.issueComponent.getIssueKey()},getProjectId:function(){return this.issueComponent.getProjectId()},getProjectKey:function(){return this.issueComponent.getProjectKey()},getProjectType:function(){return this.issueComponent.getProjectType()},_buildPager:function(){this.pager=new g,this.listenTo(this.pager,{next:function(){this._loadNextIssue()},previous:function(){this._loadPreviousIssue()}})},_loadNextIssue:function(){var e=this.state.get("searchResults");e&&e.getNextIssue().done(function(e){this._loadIssueFromPager(e,"pager:next")}.bind(this))},_loadPreviousIssue:function(){var e=this.state.get("searchResults");e&&e.getPreviousIssue().done(function(e){this._loadIssueFromPager(e,"pager:previous")}.bind(this))},_loadIssueFromPager:function(e,s){var t=this.state.get("searchResults");this.trigger(s,{current:t.getPositionOfIssueInSearchResults(e.id),total:t.length}),this.load(e.get("key"))},getAPIImplementation:function(){var e=this;return{nextIssue:function(){var s=e.state.get("searchResults");if(s)return d.startIssueSearch(),e._loadNextIssue()},previousIssue:function(){var s=e.state.get("searchResults");if(s)return d.startIssueSearch(),e._loadPreviousIssue()},getActiveIssueId:function(){return e.issueComponent.getIssueId()},getActiveIssueKey:function(){return e.issueComponent.getIssueKey()},refreshActiveIssue:function(){return d.startIssueSearch(),e.issueComponent.refreshIssue()},refreshIssue:function(){return d.startIssueSearch(),e.issueComponent.refreshIssue()},editField:function(s){if(!("getFields"in e.issueComponent))return!1;var t=e.issueComponent.getFields(),i=t&&t.get(s),n=i&&i.isEditable();return n&&e.issueComponent.editField(i),n},getFields:function(){if("getFields"in e.issueComponent){var s=e.issueComponent.getFields();return s.length?s:void 0}},isSaving:function(){return"hasSavesInProgress"in e.issueComponent&&e.issueComponent.hasSavesInProgress()},isLoading:function(){return e.issueComponent.isCurrentlyLoading()},hasAccessibleIssue:function(){return!e.issueComponent.isShowingError()},showLoadError:function(){return u.showErrorMsg("",o.Body.errorsLoading(),{persistent:!1})},waitForSavesToComplete:function(){if(!("hasSavesInProgress"in e.issueComponent))return(new a.Deferred).resolve().promise();var t=new a.Deferred;if(e.issueComponent.hasSavesInProgress()){var i=function(){s.defer(function(){e.issueComponent.hasSavesInProgress()||t.resolve()})};e.issueComponent.once("saveSuccess",i)}else t.resolve();return t.promise()},openFocusShifter:function(){e.focusShifter.show()},toggleFullscreenIssue:function(){e.showCollapse&&e.trigger("collapse","kb-shortcut")}}},focusIssueEditor:function(){this.issueComponent.focus()},initialFocusIssueEditor:function(){this.issueComponent.initialFocus()}})});
//# sourceMappingURL=IssueView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/pages/issuesearch/IssueSearch.js' */
define("jira/projectissuenavigator/pages/issuesearch",["require"],function(e){"use strict";var t=e("jira/projectissuenavigator/libs/underscore"),s=e("jira/components/detailslayout"),i=e("jira/projectissuenavigator/services/dialogsoverrider"),r=e("jira/projectissuenavigator/pages/issuesearch/views/empty"),a=e("jira/projectissuenavigator/services/filters"),n=e("jira/projectissuenavigator/services/focusshifter"),u=e("jira/projectissuenavigator/services/inline-issue-create"),o=e("jira/util/events"),l=e("jira/flag"),d=e("jquery"),c=e("jira/projectissuenavigator/services/linkscapturer"),h=e("jira/projectissuenavigator/libs/marionette"),g=e("jira/message"),f=e("jira/util/data/meta"),v=e("jira/projectissuenavigator/services/metrics"),I=e("jira/projectissuenavigator/services/notifications"),p=e("jira/ajs/ajax/smart-ajax"),y=e("jira/projectissuenavigator/pages/issuesearch/templates"),m=e("jira/components/util/events"),b=e("jira/projectissuenavigator/libs/uri"),L=e("jira/projectissuenavigator/services/urlhelper"),j=e("jira/components/analytics-tracker/tracker"),S=e("jira/featureflags/simplified-ux-feature-manager"),w=JIRA.Projects.Subnavigator;return h.Object.extend({initialize:function(e){var t={shouldShowBreadcrumbs:S.isAdg3ModeOn()};this.el=d(y.issueSearch(t)),this._buildState(e.state),this._buildSearch(e.search),this._buildSubnavigation(),e.canCreateIssues&&this._buildInlineIssueCreate(),this._buildDetailsLayout(),this._buildLinksCapturer(),this._buildDialogsOverrider(),this._buildFocusShifter()},_buildState:function(e){this.state=e},_setTitleText:function(e){var s=a.getAvailableFilters(!0),i=t.chain(s).flatten().findWhere({id:e}).value(),r=this.el.find("#issues-subnavigation-title");r.text(i&&i.label||"")},_buildSubnavigation:function(){var e=this.state.get("filter")||a.getDefaultFilterId();this._setTitleText(e),this.subnavigation=new w({triggerPlaceholder:this.el.find("#issues-subnavigation-trigger"),contentPlaceholder:this.el.find("#issues-subnavigation-content"),itemGroups:a.getAvailableFilters(!0),selectedItem:e,hideSelectedItem:!1,changeViewText:"Switch filter"}),this.listenTo(this.subnavigation,{itemSelected:function(e){"manage"===e.item.id?this.trigger("manageFilters"):e.item.jql&&(v.startIssueSearch(),e.preventDefault(),this._setTitleText(e.item.id),this.search({filter:e.item.id,issue:null,orderby:null}),this.trigger("filterSelected",{filterId:e.item.id,source:"subnavigator"}))}})},_buildInlineIssueCreate:function(){this.inlineIssueCreate=new u,this.listenTo(this.inlineIssueCreate,{issueCreated:function(e){v.startIssueSearch(),this.search({issue:e.issue.issueKey})}})},_buildDetailsLayout:function(){var e={baseURL:L.generateRootUrl(this.state.get("project")),useExpand:!0};this.options.canCreateIssues&&(e.displayInlineIssueCreate=!0,e.emptyViewFactory=function(){return this.emptyView=new r({emptyViewContent:this.options.emptyViewContent}),this.emptyView}.bind(this)),this.detailsLayout=new s(e),this.listenTo(this.detailsLayout,{select:function(e){this.state.set("issue",e.key);var t={issue:e.key};e&&e.updateActiveView&&(t.updateActiveView=!0),this.trigger("issue:select",t)},empty:function(e){this.state.unset("issue"),this.options.canCreateIssues&&(this.emptyView.inlineIssueCreateContainer._ensureElement(),this.inlineIssueCreate.show(this.emptyView.inlineIssueCreateContainer.$el),this.inlineIssueCreate.activateWithJQL(this.state.get("searchResults").jql));var t=e&&e.updateActiveView?{updateActiveView:e.updateActiveView}:void 0;this.trigger("issue:empty",t)},"list:update":function(){this.trigger("list:update")},"list:sort":function(e){v.startIssueSearch();var t=e.match(/ORDER +BY +(.*)$/i);t&&this.search({orderby:t[1]})},"list:refresh":function(){v.startIssueSearch(),this.search({issue:null})},"list:select":function(e){v.startIssueSearch(),this.trigger("issueSelectedInList",e)},render:function(){o.trigger(m.LAYOUT_RENDERED)},"editorLoadedFromCache editorLoaded":function(e){v.endIssueSearch(),f.set("viewissue-permlink",this._getFullScreenURL(e.issueKey)),this.trigger("editorLoaded",{issueRefreshedEvent:(e.issueEditorOptions||{}).issueRefreshedEvent||!1}),j.initialize(e.projectId,e.projectType,e.issueId)},linkToIssue:function(e){this.trigger("linkToIssue",e)},"list:pagination":function(){v.startIssueSearch()},"error:loadpage":function(e){this.showErrorFlagFromResponse(e)},"editor:saveSuccess":function(e){this.trigger("editor:saveSuccess",{issueId:e.event,savedFieldIds:e.savedFieldIds,savedFieldTypes:e.savedFieldTypes,duration:e.duration})},"editor:editField":function(e){this.trigger("editor:editField",e)},"editor:editFieldCancel":function(e){this.trigger("editor:editFieldCancel",e)},"pager:next":function(e){v.startIssueSearch(),this.trigger("pager:next",e)},"pager:previous":function(e){v.startIssueSearch(),this.trigger("pager:previous",e)},expand:function(){this.trigger("expand","ui-button")},editorError:function(){this.trigger("editorError")},editorFieldsLoaded:function(){this.trigger("editorFieldsLoaded")},individualPanelRendered:function(e){this.trigger("individualPanelRendered",e)}}),this.options.canCreateIssues&&this.listenTo(this.detailsLayout,{issueCreated:function(e){a.filterSupportsInlineIssueCreate(this.state.get("filter"))?(v.startIssueSearch(),this.search({issue:e.issue.issueKey})):g.showSuccessMsg(y.issueCreatedFlag({issueKey:e.issue.issueKey,projectKey:this.state.get("project"),summary:e.fields.summary}),{closeable:!0})}})},_buildSearch:function(e){this.searchService=e},_buildLinksCapturer:function(){this.linksCapturer=new c({el:this.el}),this.listenTo(this.linksCapturer,{linkToFullIssueNavigator:function(){this.trigger("goToFullIssueNavigator")}})},_buildDialogsOverrider:function(){function e(e,t,s){return s&&s.$activeTrigger&&s.$activeTrigger.data(e)||"function"==typeof t&&t()}this.dialogsOverrider=new i({getIssueId:t.partial(e,"issueid",this.detailsLayout.getActiveIssueId.bind(this.detailsLayout)),getIssueKey:t.partial(e,"issuekey",this.detailsLayout.getActiveIssueKey.bind(this.detailsLayout))}),this.listenTo(this.dialogsOverrider,{"quickEdit quickCreateSubtask issueUpdate":function(e){this.detailsLayout.refreshIssue(e.issueId).done(function(){I.show(e.message,e.issueKey)}.bind(this))},issueDelete:function(e){this.removeIssue(e.issueId).done(function(){I.show(e.message,e.issueKey)}.bind(this))}})},_buildFocusShifter:function(){this.focusShifter=new n(this.detailsLayout.issueComponent)},_getFullScreenURL:function(e){var t=f.get("jira-base-url");return new b(t+"/browse/"+e).normalize().toString()},load:function(e){var t=this.state.get("searchResults"),s=this.state.get("filter"),i=a.getAllIssuesFilterId()===s,r=this.state.get("issue"),n=t.hasIssueInSearch(r);return this._setTitleText(s),this.subnavigation.selectItem(s),r?n?void this.detailsLayout.load(t,r,!!e):i?void this.detailsLayout.load(t,void 0,!!e):(this.search({filter:a.getAllIssuesFilterId()}),void this.trigger("filterSelected",{filterId:a.getAllIssuesFilterId(),source:"issueFilterMismatch"})):void this.detailsLayout.load(t,void 0,!!e)},search:function(e,t){e=e||{},this.state.update({issue:e.issue,filter:e.filter,orderby:e.orderby}),this.detailsLayout.showLoading();var s=a.getJQL(this.state.get("filter"),this.state.get("project"),this.state.get("orderby"));this.searchService.search(s).done(function(s){this.state.update({searchResults:s}),!this.state.has("issue")&&e.startIndex&&this.state.update({issue:s.getIssueKeyForIndex(e.startIndex)}),this.load(!!t)}.bind(this)).fail(function(e){this.detailsLayout.hideLoading(),this.showErrorFlagFromResponse(e)}.bind(this))},show:function(){this.subnavigation.show(),this.detailsLayout.show(d(this.el).find(".details-layout")),S.isAdg3ModeOn()&&this.showBreadcrumbs()},selectFilterViaSidebar:function(e,t){v.startIssueSearch(),this._setTitleText(e),this.search({filter:e,issue:null,orderby:null},!!t),this.trigger("filterSelected",{filterId:e,source:"sidebar"})},onDestroy:function(){this.subnavigation.destroy(),this.inlineIssueCreate&&this.inlineIssueCreate.destroy(),this.detailsLayout.destroy(),this.linksCapturer.destroy(),this.dialogsOverrider.destroy(),this.focusShifter.destroy()},adjustSize:function(){this.detailsLayout.adjustSize()},showErrorFlagFromResponse:function(e){if("undefined"==typeof e||e.statusText===p.SmartAjaxResult.TIMEOUT||401===e.status||e.hasData)return this.showErrorFlag(p.buildSimpleErrorContent(e));var s=JSON.parse(e.responseText);return 400===e.status&&s.errorMessages.length>0?this.showErrorFlag(t.escape(s.errorMessages[0])):this.showErrorFlag(p.buildSimpleErrorContent(e))},showErrorFlag:function(e){return l.showErrorMsg("",e,{persistent:!1})},showBreadcrumbs:function(){var t=document.getElementById("breadcrumbs-container");e("jira/globalnavigator/breadcrumbs").done(function(e){e.render(t)})},removeIssue:function(e){return this.detailsLayout.removeIssue(e)},getIssueId:function(){return this.detailsLayout.getActiveIssueId()},getIssueKey:function(){return this.detailsLayout.getActiveIssueKey()},getProjectId:function(){return this.detailsLayout.getActiveProjectId()},getProjectKey:function(){return this.detailsLayout.getActiveProjectKey()},getProjectType:function(){return this.detailsLayout.getActiveProjectType()},getAPIImplementation:function(){var e=this;return{nextIssue:function(){return v.startIssueSearch(),e.detailsLayout.selectNext()},previousIssue:function(){return v.startIssueSearch(),e.detailsLayout.selectPrevious()},getActiveIssueId:function(){return e.getIssueId()},getActiveIssueKey:function(){return e.getIssueKey()},refreshActiveIssue:function(){v.startIssueSearch();var t=e.detailsLayout.getActiveIssueId();return e.detailsLayout.refreshIssue(t)},refreshIssue:function(t){return v.startIssueSearch(),e.detailsLayout.refreshIssue(t)},editField:function(t){var s=e.detailsLayout.issueComponent.getFields(),i=s&&s.get(t),r=i&&i.isEditable();return r&&e.detailsLayout.issueComponent.editField(i),r},getFields:function(){var t=e.detailsLayout.issueComponent.getFields();return t.length?t:void 0},isSaving:function(){return e.detailsLayout.issueComponent.hasSavesInProgress()},isLoading:function(){return e.detailsLayout.isLoading()},hasAccessibleIssue:function(){return Boolean(e.detailsLayout.searchResults&&e.detailsLayout.searchResults.length&&e.detailsLayout.searchResults.selected&&!e.detailsLayout.searchResults.selected.get("inaccessible"))},showLoadError:function(){return e.showErrorFlag(JIRA.Components.IssueViewer.Templates.Body.errorsLoading())},waitForSavesToComplete:function(){var s=new d.Deferred;if(e.detailsLayout.issueComponent.hasSavesInProgress()){var i=function(){t.defer(function(){e.detailsLayout.issueComponent.hasSavesInProgress()||s.resolve()})};e.once("editor:saveSuccess",i)}else s.resolve();return s.promise()},openFocusShifter:function(){e.focusShifter.show()},toggleFullscreenIssue:function(){e.trigger("expand","kb-shortcut")}}},focusIssueList:function(){this.detailsLayout.focusList()},focusIssueEditor:function(){this.detailsLayout.focusEditor()}})});
//# sourceMappingURL=IssueSearch-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/pages/issuesearch/views/Empty.js' */
define("jira/projectissuenavigator/pages/issuesearch/views/empty",["require"],function(e){"use strict";var t=e("jira/projectissuenavigator/libs/marionette"),i=e("jira/projectissuenavigator/pages/issuesearch/templates");return t.LayoutView.extend({initialize:function(){this.content=this.options.emptyViewContent||i.defaultEmptyState()},template:i.emptyState,regions:{inlineIssueCreateContainer:".inline-issue-create-container"},serializeData:function(){return{content:this.content}},onRender:function(){this.unwrapTemplate()}})});
//# sourceMappingURL=Empty-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/entities/NavigatorState.js' */
define("jira/projectissuenavigator/entities/navigatorstate",["require"],function(e){"use strict";var i=e("jira/projectissuenavigator/libs/underscore"),t=e("jira/projectissuenavigator/libs/backbone");return t.Model.extend({defaults:{project:void 0,issue:void 0,filter:void 0,orderby:void 0,searchResults:void 0,startIndex:void 0,referrer:void 0},update:function(e){i.each(e,function(e,i){null===e?this.unset(i):void 0!==e&&this.set(i,e)}.bind(this))}})});
//# sourceMappingURL=NavigatorState-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/templates/issuesearch.js' */
define("jira/projectissuenavigator/pages/issuesearch/templates",function(){"use strict";return JIRA.Issues.Projects.IssueSearch.Templates});
//# sourceMappingURL=issuesearch-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/templates/issueview.js' */
define("jira/projectissuenavigator/pages/issueview/templates",function(){"use strict";return JIRA.Issues.Projects.IssueView.Templates});
//# sourceMappingURL=issueview-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/templates/templates.js' */
define("jira/projectissuenavigator/templates",function(){"use strict";return JIRA.Issues.Projects.Templates});
//# sourceMappingURL=templates-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:old-project-issue-navigator', location = 'js/ProjectIssueNavigator.js' */
define("jira/projectissuenavigator",["require"],function(e){"use strict";var s=e("jira/projectissuenavigator/libs/underscore"),t=e("jira/projectissuenavigator/services/analytics"),i=e("jira/projectissuenavigator/services/api"),r=e("jira/projectissuenavigator/services/filters"),a=e("jira/projectissuenavigator/services/dialogscleaner"),n=e("jira/projectissuenavigator/pages/issuesearch"),u=e("jira/projectissuenavigator/pages/issueview"),o=e("jquery"),d=e("jira/projectissuenavigator/libs/marionette"),c=e("jira/util/data/meta"),h=e("jira/projectissuenavigator/services/metrics"),l=e("jira/projectissuenavigator/services/router"),I=e("jira/projectissuenavigator/entities/navigatorstate"),f=e("jira/projectissuenavigator/services/traces"),g=e("jira/projectissuenavigator/services/jiraevents"),S=e("wrm/data"),p=e("jira/components/search"),_=e("jira/projectissuenavigator/services/keyboardshortcuts"),w=e("jira/projectissuenavigator/services/urlhelper"),v=e("jira/projectissuenavigator/services/browser"),E=e("jira/featureflags/simplified-ux-feature-manager"),j=e("jira/projectissuenavigator/pages/issueview/frontend"),m=JIRA.API.getNavigationApi||AJS.$.Deferred;return d.Object.extend({_initializedFromPageLoad:!0,initialize:function(e){e=s.defaults({},e,{el:o("<div></div>"),canCreateIssues:!1,emptyViewContent:""}),this.el=e.el,this.canCreateIssues=e.canCreateIssues,this.emptyViewContent=e.emptyViewContent,E.isGlobalSidebarEnabled()&&this._initializeSidebarListener()},initAsync:function(){return r.initialize()},_initializeSidebarListener:function(){var e=function(e){return function(){if(this.issueSearch){var s=!0;return void this.issueSearch.selectFilterViaSidebar(e,s)}h.startIssueSearch(),this.state.unset("searchResults"),this.state.unset("filter"),this._stateBeforeExpand&&delete this._stateBeforeExpand,this._showIssueSearch({filter:e}),t.filterSelect({filterId:e,source:"sidebar"})}.bind(this)}.bind(this);JIRA.API.getSidebar().done(function(s){s.on(s.events.BEFORE_NAVIGATE,function(s){var i=s.target.getId();if("jira-project-issue-manage-filters"===i)return void t.manageFilters();var r="pin-filter_";if(i.substr(0,r.length)===r){s.preventDefault();var a=i.split("_")[1],n=e(a);n()}},!0)}),m().then(function(s){var t=s.viewIds.SOFTWARE_ISSUES;[{itemId:s.itemIds.PROJECT_ISSUE_NAVIGATOR_MY_OPEN_ISSUES,filterId:"myopenissues"},{itemId:s.itemIds.PROJECT_ISSUE_NAVIGATOR_REPORTED_BY_ME_ISSUES,filterId:"reportedbyme"},{itemId:s.itemIds.PROJECT_ISSUE_NAVIGATOR_ALL_ISSUES,filterId:"allissues"},{itemId:s.itemIds.PROJECT_ISSUE_NAVIGATOR_ALL_OPEN_ISSUES,filterId:"allopenissues"},{itemId:s.itemIds.PROJECT_ISSUE_NAVIGATOR_DONE_ISSUES,filterId:"doneissues"},{itemId:s.itemIds.PROJECT_ISSUE_NAVIGATOR_RECENTLY_VIEWED_ISSUES,filterId:"recentlyviewed"},{itemId:s.itemIds.PROJECT_ISSUE_NAVIGATOR_ADDED_RECENTLY_ISSUES,filterId:"addedrecently"},{itemId:s.itemIds.PROJECT_ISSUE_NAVIGATOR_RESOLVED_RECENTLY_ISSUES,filterId:"resolvedrecently"},{itemId:s.itemIds.PROJECT_ISSUE_NAVIGATOR_UPDATED_RECENTLY_ISSUES,filterId:"updatedrecently"}].forEach(function(i){var r=e(i.filterId);s.onItemClick(t,i.itemId,r)})})},_buildSearch:function(){this.searchService=new p;var e=S.claim("com.atlassian.jira.jira-issue-navigator-components:search-data");if(e){var s=this.searchService.setPreloadedData(e),t=S.claim("com.atlassian.jira.jira-issue-navigator-components:search-results");t&&s.setPreloadedData(t),this.state.set("searchResults",s)}},_buildIssueView:function(){this.issueView=new u({state:this.state,search:this.searchService,showCollapse:this.state.has("filter")}),this.listenTo(this.issueView,{collapse:function(e){h.startIssueSearch(),t.collapseIssue({source:e}),this._showIssueSearch()},linkToIssue:function(){h.startIssueView()},issueDelete:function(e){h.startIssueSearch();var s=this.state.get("searchResults");if(s){var t=s.get(e.issueId);s.removeAndUpdateSelectionIfNeeded(t).done(function(){s.selected&&this.state.set("issue",s.selected.get("key")),this._destroyIssueView(),this._showIssueSearch()}.bind(this))}else this._destroyIssueView(),this._showIssueSearch()},updateUrl:function(e){this.router.updateURL({project:this.state.get("project"),issue:e.issueKey,filter:this.state.get("filter"),orderby:this.state.get("orderby"),replaceHistory:this._initializedFromPageLoad,keepParameters:this._initializedFromPageLoad,isIssueView:!0}),this._initializedFromPageLoad=!1},editorFieldsLoaded:this._notifyIssueViewEditorFieldsLoaded.bind(this),loadError:function(e){e=e||[],this.jiraEvents.triggerRefreshIssuePage(e.issueId)},individualPanelRendered:function(e){this.jiraEvents.triggerNewContentAddedFromPanelRefreshed(e)},viewRendered:function(e,s){this.jiraEvents.triggerNewContentAddedFromPageLoad(e),this.jiraEvents.triggerRefreshToggleBlocks(s)},panelRendered:function(e,s,t){this.jiraEvents.triggerPanelRefreshed(e,s,t)}})},_buildKeyboardShortuts:function(){var e=new _;this.listenTo(e,{focusIssueList:function(){this.issueSearch&&this.issueSearch.focusIssueList()},focusIssueEditor:function(){this.issueSearch?this.issueSearch.focusIssueEditor():this.issueView&&this.issueView.focusIssueEditor()}})},_notifyIssueViewEditorLoadedAndInThePage:function(e){e=e||{},this.jiraEvents.triggerNewContentAddedFromPanelRefreshed(this.issueView.el),e.existingMarkup||this.jiraEvents.triggerRefreshIssuePage(this.issueView.getIssueId()),f.traceEditorLoaded(),t.triggerProjectNavViewIssue({issueId:this.issueView.getIssueId(),issueKey:this.issueView.getIssueKey(),projectId:this.issueView.getProjectId(),projectKey:this.issueView.getProjectKey(),projectType:this.issueView.getProjectType(),analyticsSource:this.issueView.showCollapse?"projectIssueNavigatorFullScreen":"fullPageIssue"}),h.endIssueView()},_notifyIssueViewEditorFieldsLoaded:function(){f.traceEditorFieldsLoaded()},_notifyIssueSearchEditorLoadedAndInThePage:function(e){e=e||{},this.jiraEvents.triggerNewContentAddedFromPanelRefreshed(this.issueSearch.el),e.issueRefreshedEvent||this.jiraEvents.triggerRefreshIssuePage(this.issueSearch.getIssueId()),t.triggerProjectNavViewIssue({issueId:this.issueSearch.getIssueId(),issueKey:this.issueSearch.getIssueKey(),projectId:this.issueSearch.getProjectId(),projectKey:this.issueSearch.getProjectKey(),projectType:this.issueSearch.getProjectType(),analyticsSource:"projectIssueNavigator"}),f.traceEditorLoaded()},_showIssueView:function(e){function t(e){this.listenTo(this.issueView,{editorLoaded:this._notifyIssueViewEditorLoadedAndInThePage.bind(this)}),e=s.defaults({},e,{existingMarkup:!1}),this._notifyIssueViewEditorLoadedAndInThePage(e),this.issueView.adjustSize(),this.issueView.initialFocusIssueEditor()}if(c.get("showFrontendIssue")){var r=this.el.find(".issue-view");r.css("height","calc(100vh - "+r[0].getBoundingClientRect().top+"px)"),j.done(function(s){this.frontendBridgeApi=s,s.show(c.get("issueConfigType"),e.issueKey)}.bind(this))}else this._buildIssueView(),i.useImplementation(this._getAPIImplementation(this.issueView)),e.existingMarkup===!0?(this.issueView.attach(this.el.find(".issue-view")),this.issueView.loadFromPage(e.issueKey).always(function(){t.call(this,{existingMarkup:!0})}.bind(this))):(this.issueView.render(),this.issueView.load(e.issueKey).always(function(){this._activateIssueViewPage(),t.call(this,{existingMarkup:!1})}.bind(this)))},_destroyIssueView:function(){this.frontendBridgeApi&&(this.frontendBridgeApi.close(),delete this.frontendBridgeApi),this.issueView&&(this.issueView.destroy(),this.stopListening(this.issueView),delete this.issueView)},_hasAgilityReferrer:function(){return"agility"===this.state.get("referrer")},_buildIssueSearch:function(){this.issueSearch=new n({canCreateIssues:this.canCreateIssues,emptyViewContent:this.emptyViewContent,state:this.state,search:this.searchService}),this.listenTo(this.issueSearch,{linkToIssue:function(e){h.startIssueView(),this.state.unset("searchResults"),this.state.unset("filter"),this._showIssueView({issueKey:e.issueKey})},expand:function(e){h.startIssueView(),t.expandIssue({source:e}),this._stateBeforeExpand=new I({filter:this.state.get("filter"),searchResults:this.state.get("searchResults"),issue:this.state.get("issue")}),this._showIssueView({issueKey:this.issueSearch.getIssueKey()})},filterSelected:function(e){this._selectFilterInSidebar(e.filterId),t.filterSelect(e)},goToFullIssueNavigator:function(){t.goToFullIssueNavigator(),w.isRapidBoardReferred()&&this._hasAgilityReferrer()&&t.pinToGinFromAgility()},issueSelectedInList:function(e){t.issueSelectedInList(e)},manageFilters:function(){t.manageFilters()},"list:update":function(){f.traceListLoaded()},editorLoaded:function(e){this._notifyIssueSearchEditorLoadedAndInThePage(e)},editorFieldsLoaded:function(){this._notifyIssueViewEditorFieldsLoaded()},editorError:function(){f.traceEditorError()},"pager:next":function(e){t.pager("next",e)},"pager:previous":function(e){t.pager("previous",e)},"issue:select issue:empty":function(e){this.router.updateURL({project:this.state.get("project"),issue:this.state.get("issue"),filter:this.state.get("filter"),orderby:this.state.get("orderby"),replaceHistory:this._initializedFromPageLoad}),e&&e.updateActiveView&&m().then(function(e){e.updateActiveView()}),this._initializedFromPageLoad=!1},"editor:saveSuccess":function(e){t.editorFieldSaved(e)},"editor:editField":function(e){t.editFieldStarted(e)},"editor:editFieldCancel":function(e){t.editFieldCancelled(e)}})},_activateIssueSearchPage:function(){this._destroyIssueView(),this._activatePage(this.issueSearch)},_activateIssueViewPage:function(){this._destroyIssueSearch(),this._activatePage(this.issueView)},_showIssueSearch:function(e){e=e||{},this.issueSearch||(this._buildIssueSearch(),this._activateIssueSearchPage(),i.useImplementation(this._getAPIImplementation(this.issueSearch)),this.issueSearch.show()),this.state.has("searchResults")?this.issueSearch.load():this._stateBeforeExpand?(this.state.set({searchResults:this._stateBeforeExpand.get("searchResults"),issue:this._stateBeforeExpand.get("issue"),filter:this._stateBeforeExpand.get("filter")}),delete this._stateBeforeExpand,this.issueSearch.load()):this.issueSearch.search({filter:e.filter||r.getDefaultFilterId(),issue:e.issue||null,orderby:e.orderby||null,startIndex:e.startIndex||null})},_destroyIssueSearch:function(){this.issueSearch&&(this.issueSearch.destroy(),this.stopListening(this.issueSearch),delete this.issueSearch)},_activatePage:function(e){this.el.find(".content").empty().append(e.el)},_scrollToAnchor:function(){var e=w.getAnchor();v.scrollIntoView(e)},_buildRouter:function(){this.router=new l,this.listenTo(this.router,{"route:browse:initial":function(e){h.markIssueViewFromPageLoad(),e.filter||this.state.unset("searchResults"),this.state.update(e),this._showIssueView({existingMarkup:S.claim("com.atlassian.jira.jira-projects-issue-navigator:server-rendered"),issueKey:e.issue}),this._scrollToAnchor()},"route:browse":function(e){h.startIssueView(),e.filter||this.state.unset("searchResults"),this.state.update(e),this._showIssueView({existingMarkup:!1,issueKey:e.issue}),a.clean(),this._scrollToAnchor()},"route:issues:initial":function(e){h.startIssueSearchFromPageLoad(),this.state.unset("searchResults"),e.filter=r.sanitiseFilter(e.filter),this.state.update(e),this._selectFilterInSidebar(e.filter),this._showIssueSearch(e),t.filterSelect({filterId:e.filter,source:"url"})},"route:issues":function(e){h.startIssueSearch(),this.state.unset("searchResults"),e.filter=r.sanitiseFilter(e.filter),this.state.update(e),this._selectFilterInSidebar(e.filter),this._showIssueSearch(e),t.filterSelect({filterId:e.filter,source:"url"}),a.clean()}})},_selectFilterInSidebar:function(e){E.isGlobalSidebarEnabled()&&(JIRA.API.getSidebar().done(function(s){var t=s.getGroup("com.atlassian.jira.jira-projects-issue-navigator:sidebar-issue-navigator",!0);t&&s.setPath([t.getId()],!0);var i=s.getItem("pin-filter_"+e,!0);i&&i.select()}),m().then(function(e){e.setView(e.viewIds.SOFTWARE_ISSUES)}))},_getAPIImplementation:function(e){var t=this,r={viewSelectedIssue:function(){t.issueView||(h.startIssueView(),t.state.unset("searchResults"),t.state.unset("filter"),t._showIssueView({issueKey:t.issueSearch.getIssueKey()}))},returnToSearch:function(){t.issueSearch||(h.startIssueSearch(),t._showIssueSearch({issue:t.state.get("issue")}))},isFullScreenIssueVisible:function(){return Boolean(t.issueView)},isQueryValid:function(){return!0}};return s.extend({},i.getDefaultImplementation(),e.getAPIImplementation(),r)},start:function(){var e=this;this.initAsync().then(function(){o(document.body).addClass("page-type-split page-issue-navigator"),e._buildRouter(),e.state=new I,e.jiraEvents=new g,e._buildSearch(),e._buildKeyboardShortuts(),i.init(),e.router.start();var s;o(window).on("scroll resize",function(){s||(s=requestAnimationFrame(function(){this.adjustSize(),s=null}.bind(this)))}.bind(e)),e.adjustSize()})},adjustSize:function(){this.issueView&&this.issueView.adjustSize(),this.issueSearch&&this.issueSearch.adjustSize()}})});
//# sourceMappingURL=ProjectIssueNavigator-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-edit-issue', location = 'js/init/edit.js' */
define("quick-edit/init/edit",["quick-edit/form/factory/edit-issue","quick-edit/util/dialog","aui/tabs","jquery"],function(i,t,e,n){"use strict";var u=function(){var u=i().asDialog({windowTitle:function(){return t.getIssueActionTitle("Edit issue")},id:"edit-issue-dialog"});return n(document).bind("dialogContentReady",function(){e.setup()}),u};return{initDialog:u}});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:global-analytics', location = 'analytics-tracker/global/global-analytics.js' */
define("jira/components/analytics-tracker/global/global-analytics",["require"],function(e){"use strict";var i=e("jira/components/analytics-tracker/tracker"),c=e("jquery");return{initialize:function(){var e=c(document);e.on("click","#create_link",function(){i.trackEvent("viewissue.createissue","click")})}}});
//# sourceMappingURL=global-analytics-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application-init', location = 'js/init.js' */
define("jira/projectissuenavigator/init",["require"],function(e){"use strict";function a(e){var a=new i({el:n(e),canCreateIssues:r.claim("com.atlassian.jira.jira-projects-issue-navigator:can-create-issues"),emptyViewContent:r.claim("com.atlassian.jira.jira-projects-issue-navigator:empty-state-panel-html")});a.start(),s.initialize(),JIRA.API.getSidebar().done(function(e){e.on("collapse-end",function(){a.adjustSize()},!0),e.on("expand-end",function(){a.adjustSize()},!0)})}var i=e("jira/projectissuenavigator"),t=e("jira/util/data/meta"),r=e("wrm/data"),n=e("jquery"),s=e("jira/components/analytics-tracker/global/global-analytics");return n(function(){n("fieldset.parameters input[title=loggedInUser]").val(t.get("remote-user"))}),a}),require(["jira/projectissuenavigator/init","jira/skate","wrm/require","jquery"],function(e,a,i,t){"use strict";a("issue-navigator-init",{type:a.type.CLASSNAME,attached:function(){e(t(".issue-navigator").get(0))}}),i("wrc!jira.view.issue.deferred")});
//# sourceMappingURL=init-min.js.map
;