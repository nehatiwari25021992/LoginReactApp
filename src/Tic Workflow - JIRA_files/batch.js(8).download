;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:backbone.marionette', location = 'js/lib/backbone-1.0.0.js' */
(function(){var t,e=this,i=e.Backbone,s=[],n=s.push,r=s.slice,a=s.splice;t="undefined"!=typeof exports?exports:e.Backbone={},t.VERSION="1.0.0";var o=e._;o||"undefined"==typeof require||(o=require("underscore")),t.$=e.jQuery||e.Zepto||e.ender||e.$,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var h=t.Events={on:function(t,e,i){if(!c(this,"on",t,[e,i])||!e)return this;this._events||(this._events={});var s=this._events[t]||(this._events[t]=[]);return s.push({callback:e,context:i,ctx:i||this}),this},once:function(t,e,i){if(!c(this,"once",t,[e,i])||!e)return this;var s=this,n=o.once(function(){s.off(t,n),e.apply(this,arguments)});return n._callback=e,this.on(t,n,i)},off:function(t,e,i){var s,n,r,a,h,u,l,d;if(!this._events||!c(this,"off",t,[e,i]))return this;if(!t&&!e&&!i)return this._events={},this;for(a=t?[t]:o.keys(this._events),h=0,u=a.length;h<u;h++)if(t=a[h],r=this._events[t]){if(this._events[t]=s=[],e||i)for(l=0,d=r.length;l<d;l++)n=r[l],(e&&e!==n.callback&&e!==n.callback._callback||i&&i!==n.context)&&s.push(n);s.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=r.call(arguments,1);if(!c(this,"trigger",t,e))return this;var i=this._events[t],s=this._events.all;return i&&l(i,e),s&&l(s,arguments),this},stopListening:function(t,e,i){var s=this._listeners;if(!s)return this;var n=!e&&!i;"object"==typeof e&&(i=this),t&&((s={})[t._listenerId]=t);for(var r in s)s[r].off(e,i,this),n&&delete this._listeners[r];return this}},u=/\s+/,c=function(t,e,i,s){if(!i)return!0;if("object"==typeof i){for(var n in i)t[e].apply(t,[n,i[n]].concat(s));return!1}if(u.test(i)){for(var r=i.split(u),a=0,o=r.length;a<o;a++)t[e].apply(t,[r[a]].concat(s));return!1}return!0},l=function(t,e){var i,s=-1,n=t.length,r=e[0],a=e[1],o=e[2];switch(e.length){case 0:for(;++s<n;)(i=t[s]).callback.call(i.ctx);return;case 1:for(;++s<n;)(i=t[s]).callback.call(i.ctx,r);return;case 2:for(;++s<n;)(i=t[s]).callback.call(i.ctx,r,a);return;case 3:for(;++s<n;)(i=t[s]).callback.call(i.ctx,r,a,o);return;default:for(;++s<n;)(i=t[s]).callback.apply(i.ctx,e)}},d={listenTo:"on",listenToOnce:"once"};o.each(d,function(t,e){h[e]=function(e,i,s){var n=this._listeners||(this._listeners={}),r=e._listenerId||(e._listenerId=o.uniqueId("l"));return n[r]=e,"object"==typeof i&&(s=this),e[t](i,s,this),this}}),h.bind=h.on,h.unbind=h.off,o.extend(t,h);var f=t.Model=function(t,e){var i,s=t||{};e||(e={}),this.cid=o.uniqueId("c"),this.attributes={},o.extend(this,o.pick(e,p)),e.parse&&(s=this.parse(s,e)||{}),(i=o.result(this,"defaults"))&&(s=o.defaults({},s,i)),this.set(s,e),this.changed={},this.initialize.apply(this,arguments)},p=["url","urlRoot","collection"];o.extend(f.prototype,h,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return o.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return o.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,i){var s,n,r,a,h,u,c,l;if(null==t)return this;if("object"==typeof t?(n=t,i=e):(n={})[t]=e,i||(i={}),!this._validate(n,i))return!1;r=i.unset,h=i.silent,a=[],u=this._changing,this._changing=!0,u||(this._previousAttributes=o.clone(this.attributes),this.changed={}),l=this.attributes,c=this._previousAttributes,this.idAttribute in n&&(this.id=n[this.idAttribute]);for(s in n)e=n[s],o.isEqual(l[s],e)||a.push(s),o.isEqual(c[s],e)?delete this.changed[s]:this.changed[s]=e,r?delete l[s]:l[s]=e;if(!h){a.length&&(this._pending=!0);for(var d=0,f=a.length;d<f;d++)this.trigger("change:"+a[d],this,l[a[d]],i)}if(u)return this;if(!h)for(;this._pending;)this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,o.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var i in this.attributes)e[i]=void 0;return this.set(e,o.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!o.isEmpty(this.changed):o.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&o.clone(this.changed);var e,i=!1,s=this._changing?this._previousAttributes:this.attributes;for(var n in t)o.isEqual(s[n],e=t[n])||((i||(i={}))[n]=e);return i},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return o.clone(this._previousAttributes)},fetch:function(t){t=t?o.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,i=t.success;return t.success=function(s){return!!e.set(e.parse(s,t),t)&&(i&&i(e,s,t),void e.trigger("sync",e,s,t))},R(this,t),this.sync("read",this,t)},save:function(t,e,i){var s,n,r,a=this.attributes;if(null==t||"object"==typeof t?(s=t,i=e):(s={})[t]=e,s&&(!i||!i.wait)&&!this.set(s,i))return!1;if(i=o.extend({validate:!0},i),!this._validate(s,i))return!1;s&&i.wait&&(this.attributes=o.extend({},a,s)),void 0===i.parse&&(i.parse=!0);var h=this,u=i.success;return i.success=function(t){h.attributes=a;var e=h.parse(t,i);return i.wait&&(e=o.extend(s||{},e)),!(o.isObject(e)&&!h.set(e,i))&&(u&&u(h,t,i),void h.trigger("sync",h,t,i))},R(this,i),n=this.isNew()?"create":i.patch?"patch":"update","patch"===n&&(i.attrs=s),r=this.sync(n,this,i),s&&i.wait&&(this.attributes=a),r},destroy:function(t){t=t?o.clone(t):{};var e=this,i=t.success,s=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(n){(t.wait||e.isNew())&&s(),i&&i(e,n,t),e.isNew()||e.trigger("sync",e,n,t)},this.isNew())return t.success(),!1;R(this,t);var n=this.sync("delete",this,t);return t.wait||s(),n},url:function(){var t=o.result(this,"urlRoot")||o.result(this.collection,"url")||U();return this.isNew()?t:t+("/"===t.charAt(t.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(t){return this._validate({},o.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=o.extend({},this.attributes,t);var i=this.validationError=this.validate(t,e)||null;return!i||(this.trigger("invalid",this,i,o.extend(e||{},{validationError:i})),!1)}});var g=["keys","values","pairs","invert","pick","omit"];o.each(g,function(t){f.prototype[t]=function(){var e=r.call(arguments);return e.unshift(this.attributes),o[t].apply(o,e)}});var v=t.Collection=function(t,e){e||(e={}),e.url&&(this.url=e.url),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,o.extend({silent:!0},e))},m={add:!0,remove:!0,merge:!0},y={add:!0,merge:!1,remove:!1};o.extend(v.prototype,h,{model:f,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return t.sync.apply(this,arguments)},add:function(t,e){return this.set(t,o.defaults(e||{},y))},remove:function(t,e){t=o.isArray(t)?t.slice():[t],e||(e={});var i,s,n,r;for(i=0,s=t.length;i<s;i++)r=this.get(t[i]),r&&(delete this._byId[r.id],delete this._byId[r.cid],n=this.indexOf(r),this.models.splice(n,1),this.length--,e.silent||(e.index=n,r.trigger("remove",r,this,e)),this._removeReference(r));return this},set:function(t,e){e=o.defaults(e||{},m),e.parse&&(t=this.parse(t,e)),o.isArray(t)||(t=t?[t]:[]);var i,s,r,h,u,c=e.at,l=this.comparator&&null==c&&e.sort!==!1,d=o.isString(this.comparator)?this.comparator:null,f=[],p=[],g={};for(i=0,s=t.length;i<s;i++)(r=this._prepareModel(t[i],e))&&((h=this.get(r))?(e.remove&&(g[h.cid]=!0),e.merge&&(h.set(r.attributes,e),l&&!u&&h.hasChanged(d)&&(u=!0))):e.add&&(f.push(r),r.on("all",this._onModelEvent,this),this._byId[r.cid]=r,null!=r.id&&(this._byId[r.id]=r)));if(e.remove){for(i=0,s=this.length;i<s;++i)g[(r=this.models[i]).cid]||p.push(r);p.length&&this.remove(p,e)}if(f.length&&(l&&(u=!0),this.length+=f.length,null!=c?a.apply(this.models,[c,0].concat(f)):n.apply(this.models,f)),u&&this.sort({silent:!0}),e.silent)return this;for(i=0,s=f.length;i<s;i++)(r=f[i]).trigger("add",r,this,e);return u&&this.trigger("sort",this,e),this},reset:function(t,e){e||(e={});for(var i=0,s=this.models.length;i<s;i++)this._removeReference(this.models[i]);return e.previousModels=this.models,this._reset(),this.add(t,o.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),this},push:function(t,e){return t=this._prepareModel(t,e),this.add(t,o.extend({at:this.length},e)),t},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return t=this._prepareModel(t,e),this.add(t,o.extend({at:0},e)),t},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(t,e){return this.models.slice(t,e)},get:function(t){if(null!=t)return this._byId[null!=t.id?t.id:t.cid||t]},at:function(t){return this.models[t]},where:function(t,e){return o.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var i in t)if(t[i]!==e.get(i))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),o.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(o.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},sortedIndex:function(t,e,i){e||(e=this.comparator);var s=o.isFunction(e)?e:function(t){return t.get(e)};return o.sortedIndex(this.models,t,s,i)},pluck:function(t){return o.invoke(this.models,"get",t)},fetch:function(t){t=t?o.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,i=this;return t.success=function(s){var n=t.reset?"reset":"set";i[n](s,t),e&&e(i,s,t),i.trigger("sync",i,s,t)},R(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?o.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var i=this,s=e.success;return e.success=function(n){e.wait&&i.add(t,e),s&&s(t,n,e)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof f)return t.collection||(t.collection=this),t;e||(e={}),e.collection=this;var i=new this.model(t,e);return i._validate(t,e)?i:(this.trigger("invalid",this,t,e),!1)},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,s){("add"!==t&&"remove"!==t||i===this)&&("destroy"===t&&this.remove(e,s),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var _=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];o.each(_,function(t){v.prototype[t]=function(){var e=r.call(arguments);return e.unshift(this.models),o[t].apply(o,e)}});var b=["groupBy","countBy","sortBy"];o.each(b,function(t){v.prototype[t]=function(e,i){var s=o.isFunction(e)?e:function(t){return t.get(e)};return o[t](this.models,s,i)}});var w=t.View=function(t){this.cid=o.uniqueId("view"),this._configure(t||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},x=/^(\S+)\s*(.*)$/,E=["model","collection","el","id","attributes","className","tagName","events"];o.extend(w.prototype,h,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,i){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],i!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=o.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var i=t[e];if(o.isFunction(i)||(i=this[t[e]]),i){var s=e.match(x),n=s[1],r=s[2];i=o.bind(i,this),n+=".delegateEvents"+this.cid,""===r?this.$el.on(n,i):this.$el.on(n,r,i)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(t){this.options&&(t=o.extend({},o.result(this,"options"),t)),o.extend(this,o.pick(t,E)),this.options=t},_ensureElement:function(){if(this.el)this.setElement(o.result(this,"el"),!1);else{var e=o.extend({},o.result(this,"attributes"));this.id&&(e.id=o.result(this,"id")),this.className&&(e.class=o.result(this,"className"));var i=t.$("<"+o.result(this,"tagName")+">").attr(e);this.setElement(i,!1)}}}),t.sync=function(e,i,s){var n=k[e];o.defaults(s||(s={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var r={type:n,dataType:"json"};if(s.url||(r.url=o.result(i,"url")||U()),null!=s.data||!i||"create"!==e&&"update"!==e&&"patch"!==e||(r.contentType="application/json",r.data=JSON.stringify(s.attrs||i.toJSON(s))),s.emulateJSON&&(r.contentType="application/x-www-form-urlencoded",r.data=r.data?{model:r.data}:{}),s.emulateHTTP&&("PUT"===n||"DELETE"===n||"PATCH"===n)){r.type="POST",s.emulateJSON&&(r.data._method=n);var a=s.beforeSend;s.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",n),a)return a.apply(this,arguments)}}"GET"===r.type||s.emulateJSON||(r.processData=!1),"PATCH"!==r.type||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(r.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var h=s.xhr=t.ajax(o.extend(r,s));return i.trigger("request",i,h,s),h};var k={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var S=t.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},$=/\((.*?)\)/g,T=/(\(\?)?:\w+/g,H=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;o.extend(S.prototype,h,{initialize:function(){},route:function(e,i,s){o.isRegExp(e)||(e=this._routeToRegExp(e)),o.isFunction(i)&&(s=i,i=""),s||(s=this[i]);var n=this;return t.history.route(e,function(r){var a=n._extractParameters(e,r);s&&s.apply(n,a),n.trigger.apply(n,["route:"+i].concat(a)),n.trigger("route",i,a),t.history.trigger("route",n,i,a)}),this},navigate:function(e,i){return t.history.navigate(e,i),this},_bindRoutes:function(){if(this.routes){this.routes=o.result(this,"routes");for(var t,e=o.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(A,"\\$&").replace($,"(?:$1)?").replace(T,function(t,e){return e?t:"([^/]+)"}).replace(H,"(.*?)"),new RegExp("^"+t+"$")},_extractParameters:function(t,e){var i=t.exec(e).slice(1);return o.map(i,function(t){return t?decodeURIComponent(t):null})}});var I=t.History=function(){this.handlers=[],o.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},N=/^[#\/]|\s+$/g,P=/^\/+|\/+$/g,O=/msie [\w.]+/,C=/\/$/;I.started=!1,o.extend(I.prototype,h,{interval:50,getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=this.location.pathname;var i=this.root.replace(C,"");t.indexOf(i)||(t=t.substr(i.length))}else t=this.getHash();return t.replace(N,"")},start:function(e){if(I.started)throw new Error("Backbone.history has already been started");I.started=!0,this.options=o.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var i=this.getFragment(),s=document.documentMode,n=O.exec(navigator.userAgent.toLowerCase())&&(!s||s<=7);this.root=("/"+this.root+"/").replace(P,"/"),n&&this._wantsHashChange&&(this.iframe=t.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(i)),this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!n?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=i;var r=this.location,a=r.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!a?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&a&&r.hash&&(this.fragment=this.getHash().replace(N,""),this.history.replaceState({},document.title,this.root+this.fragment+r.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),I.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e!==this.fragment&&(this.iframe&&this.navigate(e),void(this.loadUrl()||this.loadUrl(this.getHash())))},loadUrl:function(t){var e=this.fragment=this.getFragment(t),i=o.any(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0});return i},navigate:function(t,e){if(!I.started)return!1;if(e&&e!==!0||(e={trigger:e}),t=this.getFragment(t||""),this.fragment!==t){this.fragment=t;var i=this.root+t;if(this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}e.trigger&&this.loadUrl(t)}},_updateHash:function(t,e,i){if(i){var s=t.href.replace(/(javascript:|#).*$/,"");t.replace(s+"#"+e)}else t.hash="#"+e}}),t.history=new I;var j=function(t,e){var i,s=this;i=t&&o.has(t,"constructor")?t.constructor:function(){return s.apply(this,arguments)},o.extend(i,s,e);var n=function(){this.constructor=i};return n.prototype=s.prototype,i.prototype=new n,t&&o.extend(i.prototype,t),i.__super__=s.prototype,i};f.extend=v.extend=S.extend=w.extend=I.extend=j;var U=function(){throw new Error('A "url" property or function must be specified')},R=function(t,e){var i=e.error;e.error=function(s){i&&i(t,s,e),t.trigger("error",t,s,e)}}}).call(this);;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:backbone.marionette', location = 'js/lib/backbone.marionette-1.1.0.js' */
/*!
 * Includes BabySitter
 * https://github.com/marionettejs/backbone.babysitter/
 *
 * Includes Wreqr
 * https://github.com/marionettejs/backbone.wreqr/
 */
Backbone.ChildViewContainer=function(e,t){var i=function(e){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),t.each(e,this.add,this)};t.extend(i.prototype,{add:function(e,t){var i=e.cid;this._views[i]=e,e.model&&(this._indexByModel[e.model.cid]=i),t&&(this._indexByCustom[t]=i),this._updateLength()},findByModel:function(e){return this.findByModelCid(e.cid)},findByModelCid:function(e){var t=this._indexByModel[e];return this.findByCid(t)},findByCustom:function(e){var t=this._indexByCustom[e];return this.findByCid(t)},findByIndex:function(e){return t.values(this._views)[e]},findByCid:function(e){return this._views[e]},remove:function(e){var i=e.cid;e.model&&delete this._indexByModel[e.model.cid],t.any(this._indexByCustom,function(e,t){if(e===i)return delete this._indexByCustom[t],!0},this),delete this._views[i],this._updateLength()},call:function(e){this.apply(e,t.tail(arguments))},apply:function(e,i){t.each(this._views,function(n){t.isFunction(n[e])&&n[e].apply(n,i||[])})},_updateLength:function(){this.length=t.size(this._views)}});var n=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return t.each(n,function(e){i.prototype[e]=function(){var i=t.values(this._views),n=[i].concat(t.toArray(arguments));return t[e].apply(t,n)}}),i}(Backbone,_),Backbone.Wreqr=function(e,t,i){"use strict";var n={};return n.Handlers=function(e,t){var i=function(e){this.options=e,this._wreqrHandlers={},t.isFunction(this.initialize)&&this.initialize(e)};return i.extend=e.Model.extend,t.extend(i.prototype,e.Events,{setHandlers:function(e){t.each(e,function(e,i){var n=null;t.isObject(e)&&!t.isFunction(e)&&(n=e.context,e=e.callback),this.setHandler(i,e,n)},this)},setHandler:function(e,t,i){var n={callback:t,context:i};this._wreqrHandlers[e]=n,this.trigger("handler:add",e,t,i)},hasHandler:function(e){return!!this._wreqrHandlers[e]},getHandler:function(e){var t=this._wreqrHandlers[e];if(!t)throw new Error("Handler not found for '"+e+"'");return function(){var e=Array.prototype.slice.apply(arguments);return t.callback.apply(t.context,e)}},removeHandler:function(e){delete this._wreqrHandlers[e]},removeAllHandlers:function(){this._wreqrHandlers={}}}),i}(e,i),n.CommandStorage=function(){var t=function(e){this.options=e,this._commands={},i.isFunction(this.initialize)&&this.initialize(e)};return i.extend(t.prototype,e.Events,{getCommands:function(e){var t=this._commands[e];return t||(t={command:e,instances:[]},this._commands[e]=t),t},addCommand:function(e,t){var i=this.getCommands(e);i.instances.push(t)},clearCommands:function(e){var t=this.getCommands(e);t.instances=[]}}),t}(),n.Commands=function(e){return e.Handlers.extend({storageType:e.CommandStorage,constructor:function(t){this.options=t||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this);var i=Array.prototype.slice.call(arguments);e.Handlers.prototype.constructor.apply(this,i)},execute:function(e,t){e=arguments[0],t=Array.prototype.slice.call(arguments,1),this.hasHandler(e)?this.getHandler(e).apply(this,t):this.storage.addCommand(e,t)},_executeCommands:function(e,t,n){var o=this.storage.getCommands(e);i.each(o.instances,function(e){t.apply(n,e)}),this.storage.clearCommands(e)},_initializeStorage:function(e){var t,n=e.storageType||this.storageType;t=i.isFunction(n)?new n:n,this.storage=t}})}(n),n.RequestResponse=function(e){return e.Handlers.extend({request:function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return this.getHandler(e).apply(this,t)}})}(n),n.EventAggregator=function(e,t){var i=function(){};return i.extend=e.Model.extend,t.extend(i.prototype,e.Events),i}(e,i),n}(Backbone,Backbone.Marionette,_);var Marionette=function(e,t,i){"use strict";function n(e){return s.call(e)}function o(e,t){var i=new Error(e);throw i.name=t||"Error",i}var r={};t.Marionette=r,r.$=t.$;var s=Array.prototype.slice;return r.extend=t.Model.extend,r.getOption=function(e,t){if(e&&t){var i;return i=e.options&&t in e.options&&void 0!==e.options[t]?e.options[t]:e[t]}},r.triggerMethod=function(){function e(e,t,i){return i.toUpperCase()}var t=/(^|:)(\w)/gi,n=function(n){var o="on"+n.replace(t,e),r=this[o];if(i.isFunction(this.trigger)&&this.trigger.apply(this,arguments),i.isFunction(r))return r.apply(this,i.tail(arguments))};return n}(),r.MonitorDOMRefresh=function(){function e(e){e._isShown=!0,n(e)}function t(e){e._isRendered=!0,n(e)}function n(e){e._isShown&&e._isRendered&&i.isFunction(e.triggerMethod)&&e.triggerMethod("dom:refresh")}return function(i){i.listenTo(i,"show",function(){e(i)}),i.listenTo(i,"render",function(){t(i)})}}(),function(e){function t(e,t,n,r){var s=r.split(/\s+/);i.each(s,function(i){var r=e[i];r||o("Method '"+i+"' was configured as an event handler, but does not exist."),e.listenTo(t,n,r,e)})}function n(e,t,i,n){e.listenTo(t,i,n,e)}function r(e,t,n,o){var r=o.split(/\s+/);i.each(r,function(i){var o=e[i];e.stopListening(t,n,o,e)})}function s(e,t,i,n){e.stopListening(t,i,n,e)}function h(e,t,n,o,r){t&&n&&(i.isFunction(n)&&(n=n.call(e)),i.each(n,function(n,s){i.isFunction(n)?o(e,t,s,n):r(e,t,s,n)}))}e.bindEntityEvents=function(e,i,o){h(e,i,o,n,t)},e.unbindEntityEvents=function(e,t,i){h(e,t,i,s,r)}}(r),r.Callbacks=function(){this._deferred=r.$.Deferred(),this._callbacks=[]},i.extend(r.Callbacks.prototype,{add:function(e,t){this._callbacks.push({cb:e,ctx:t}),this._deferred.done(function(i,n){t&&(i=t),e.call(i,n)})},run:function(e,t){this._deferred.resolve(t,e)},reset:function(){var e=this._callbacks;this._deferred=r.$.Deferred(),this._callbacks=[],i.each(e,function(e){this.add(e.cb,e.ctx)},this)}}),r.Controller=function(e){this.triggerMethod=r.triggerMethod,this.options=e||{},i.isFunction(this.initialize)&&this.initialize(this.options)},r.Controller.extend=r.extend,i.extend(r.Controller.prototype,t.Events,{close:function(){this.stopListening(),this.triggerMethod("close"),this.unbind()}}),r.Region=function(e){if(this.options=e||{},this.el=r.getOption(this,"el"),!this.el){var t=new Error("An 'el' must be specified for a region.");throw t.name="NoElError",t}if(this.initialize){var i=Array.prototype.slice.apply(arguments);this.initialize.apply(this,i)}},i.extend(r.Region,{buildRegion:function(e,t){var n="string"==typeof e,o="string"==typeof e.selector,r="undefined"==typeof e.regionType,s="function"==typeof e;if(!s&&!n&&!o)throw new Error("Region must be specified as a Region type, a selector string or an object with selector property");var h,a;n&&(h=e),e.selector&&(h=e.selector),s&&(a=e),!s&&r&&(a=t),e.regionType&&(a=e.regionType);var l=new a({el:h});return e.parentEl&&(l.getEl=function(t){var n=e.parentEl;return i.isFunction(n)&&(n=n()),n.find(t)}),l}}),i.extend(r.Region.prototype,t.Events,{show:function(e){this.ensureEl();var t=e.isClosed||i.isUndefined(e.$el),n=e!==this.currentView;n&&this.close(),e.render(),(n||t)&&this.open(e),this.currentView=e,r.triggerMethod.call(this,"show",e),r.triggerMethod.call(e,"show")},ensureEl:function(){this.$el&&0!==this.$el.length||(this.$el=this.getEl(this.el))},getEl:function(e){return r.$(e)},open:function(e){this.$el.empty().append(e.el)},close:function(){var e=this.currentView;e&&!e.isClosed&&(e.close?e.close():e.remove&&e.remove(),r.triggerMethod.call(this,"close"),delete this.currentView)},attachView:function(e){this.currentView=e},reset:function(){this.close(),delete this.$el}}),r.Region.extend=r.extend,r.RegionManager=function(e){var t=e.Controller.extend({constructor:function(t){this._regions={},e.Controller.prototype.constructor.call(this,t)},addRegions:function(e,t){var n={};return i.each(e,function(e,o){"string"==typeof e&&(e={selector:e}),e.selector&&(e=i.defaults({},e,t));var r=this.addRegion(o,e);n[o]=r},this),n},addRegion:function(t,n){var o,r=i.isObject(n),s=i.isString(n),h=!!n.selector;return o=s||r&&h?e.Region.buildRegion(n,e.Region):i.isFunction(n)?e.Region.buildRegion(n,e.Region):n,this._store(t,o),this.triggerMethod("region:add",t,o),o},get:function(e){return this._regions[e]},removeRegion:function(e){var t=this._regions[e];this._remove(e,t)},removeRegions:function(){i.each(this._regions,function(e,t){this._remove(t,e)},this)},closeRegions:function(){i.each(this._regions,function(e,t){e.close()},this)},close:function(){this.removeRegions();var t=Array.prototype.slice.call(arguments);e.Controller.prototype.close.apply(this,t)},_store:function(e,t){this._regions[e]=t,this._setLength()},_remove:function(e,t){t.close(),delete this._regions[e],this._setLength(),this.triggerMethod("region:remove",e,t)},_setLength:function(){this.length=i.size(this._regions)}}),n=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return i.each(n,function(e){t.prototype[e]=function(){var t=i.values(this._regions),n=[t].concat(i.toArray(arguments));return i[e].apply(i,n)}}),t}(r),r.TemplateCache=function(e){this.templateId=e},i.extend(r.TemplateCache,{templateCaches:{},get:function(e){var t=this.templateCaches[e];return t||(t=new r.TemplateCache(e),this.templateCaches[e]=t),t.load()},clear:function(){var e,t=n(arguments),i=t.length;if(i>0)for(e=0;e<i;e++)delete this.templateCaches[t[e]];else this.templateCaches={}}}),i.extend(r.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var e=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(e),this.compiledTemplate},loadTemplate:function(e){var t=r.$(e).html();return t&&0!==t.length||o("Could not find template: '"+e+"'","NoTemplateError"),t},compileTemplate:function(e){return i.template(e)}}),r.Renderer={render:function(e,t){if(!e){var i=new Error("Cannot render the template since it's false, null or undefined.");throw i.name="TemplateNotFoundError",i}var n;return(n="function"==typeof e?e:r.TemplateCache.get(e))(t)}},r.View=t.View.extend({constructor:function(){i.bindAll(this,"render");var e=Array.prototype.slice.apply(arguments);t.View.prototype.constructor.apply(this,e),r.MonitorDOMRefresh(this),this.listenTo(this,"show",this.onShowCalled,this)},triggerMethod:r.triggerMethod,getTemplate:function(){return r.getOption(this,"template")},mixinTemplateHelpers:function(e){e=e||{};var t=r.getOption(this,"templateHelpers");return i.isFunction(t)&&(t=t.call(this)),i.extend(e,t)},configureTriggers:function(){if(this.triggers){var e={},t=i.result(this,"triggers");return i.each(t,function(t,i){e[i]=function(e){e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation();var i={view:this,model:this.model,collection:this.collection};this.triggerMethod(t,i)}},this),e}},delegateEvents:function(e){this._delegateDOMEvents(e),r.bindEntityEvents(this,this.model,r.getOption(this,"modelEvents")),r.bindEntityEvents(this,this.collection,r.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(e){e=e||this.events,i.isFunction(e)&&(e=e.call(this));var n={},o=this.configureTriggers();i.extend(n,e,o),t.View.prototype.delegateEvents.call(this,n)},undelegateEvents:function(){var e=Array.prototype.slice.call(arguments);t.View.prototype.undelegateEvents.apply(this,e),r.unbindEntityEvents(this,this.model,r.getOption(this,"modelEvents")),r.unbindEntityEvents(this,this.collection,r.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){if(!this.isClosed){var e=this.triggerMethod("before:close");e!==!1&&(this.isClosed=!0,this.triggerMethod("close"),this.unbindUIElements(),this.remove())}},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var e=i.result(this,"_uiBindings");this.ui={},i.each(i.keys(e),function(t){var i=e[t];this.ui[t]=this.$(i)},this)}},unbindUIElements:function(){this.ui&&this._uiBindings&&(i.each(this.ui,function(e,t){delete this.ui[t]},this),this.ui=this._uiBindings,delete this._uiBindings)}}),r.ItemView=r.View.extend({constructor:function(){r.View.prototype.constructor.apply(this,n(arguments))},serializeData:function(){var e={};return this.model?e=this.model.toJSON():this.collection&&(e={items:this.collection.toJSON()}),e},render:function(){this.isClosed=!1,this.triggerMethod("before:render",this),this.triggerMethod("item:before:render",this);var e=this.serializeData();e=this.mixinTemplateHelpers(e);var t=this.getTemplate(),i=r.Renderer.render(t,e);return this.$el.html(i),this.bindUIElements(),this.triggerMethod("render",this),this.triggerMethod("item:rendered",this),this},close:function(){this.isClosed||(this.triggerMethod("item:before:close"),r.View.prototype.close.apply(this,n(arguments)),this.triggerMethod("item:closed"))}}),r.CollectionView=r.View.extend({itemViewEventPrefix:"itemview",constructor:function(e){this._initChildViewStorage(),r.View.prototype.constructor.apply(this,n(arguments)),this._initialEvents()},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this.render,this))},addChildView:function(e,t,i){this.closeEmptyView();var n=this.getItemView(e),o=this.collection.indexOf(e);this.addItemView(e,n,o)},onShowCalled:function(){this.children.each(function(e){r.triggerMethod.call(e,"show")})},triggerBeforeRender:function(){this.triggerMethod("before:render",this),this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",this),this.triggerMethod("collection:rendered",this)},render:function(){return this.isClosed=!1,this.triggerBeforeRender(),this._renderChildren(),this.triggerRendered(),this},_renderChildren:function(){this.closeEmptyView(),this.closeChildren(),this.collection&&this.collection.length>0?this.showCollection():this.showEmptyView()},showCollection:function(){var e;this.collection.each(function(t,i){e=this.getItemView(t),this.addItemView(t,e,i)},this)},showEmptyView:function(){var e=r.getOption(this,"emptyView");if(e&&!this._showingEmptyView){this._showingEmptyView=!0;var i=new t.Model;this.addItemView(i,e,0)}},closeEmptyView:function(){this._showingEmptyView&&(this.closeChildren(),delete this._showingEmptyView)},getItemView:function(e){var t=r.getOption(this,"itemView");return t||o("An `itemView` must be specified","NoItemViewError"),t},addItemView:function(e,t,n){var o=r.getOption(this,"itemViewOptions");i.isFunction(o)&&(o=o.call(this,e,n));var s=this.buildItemView(e,t,o);this.addChildViewEventForwarding(s),this.triggerMethod("before:item:added",s),this.children.add(s),this.renderItemView(s,n),this._isShown&&r.triggerMethod.call(s,"show"),this.triggerMethod("after:item:added",s)},addChildViewEventForwarding:function(e){var t=r.getOption(this,"itemViewEventPrefix");this.listenTo(e,"all",function(){var i=n(arguments);i[0]=t+":"+i[0],i.splice(1,0,e),r.triggerMethod.apply(this,i)},this)},renderItemView:function(e,t){e.render(),this.appendHtml(this,e,t)},buildItemView:function(e,t,n){var o=i.extend({model:e},n);return new t(o)},removeItemView:function(e){var t=this.children.findByModel(e);this.removeChildView(t),this.checkEmpty()},removeChildView:function(e){e&&(this.stopListening(e),e.close?e.close():e.remove&&e.remove(),this.children.remove(e)),this.triggerMethod("item:removed",e)},checkEmpty:function(){this.collection&&0!==this.collection.length||this.showEmptyView()},appendHtml:function(e,t,i){e.$el.append(t.el)},_initChildViewStorage:function(){this.children=new t.ChildViewContainer},close:function(){this.isClosed||(this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),r.View.prototype.close.apply(this,n(arguments)))},closeChildren:function(){this.children.each(function(e){this.removeChildView(e)},this),this.checkEmpty()}}),r.CompositeView=r.CollectionView.extend({constructor:function(){r.CollectionView.prototype.constructor.apply(this,n(arguments))},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this._renderChildren,this))},getItemView:function(e){var t=r.getOption(this,"itemView")||this.constructor;return t||o("An `itemView` must be specified","NoItemViewError"),t},serializeData:function(){var e={};return this.model&&(e=this.model.toJSON()),e},render:function(){this.isRendered=!0,this.isClosed=!1,this.resetItemViewContainer(),this.triggerBeforeRender();var e=this.renderModel();return this.$el.html(e),this.bindUIElements(),this.triggerMethod("composite:model:rendered"),this._renderChildren(),this.triggerMethod("composite:rendered"),this.triggerRendered(),this},_renderChildren:function(){this.isRendered&&(r.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},renderModel:function(){var e={};e=this.serializeData(),e=this.mixinTemplateHelpers(e);var t=this.getTemplate();return r.Renderer.render(t,e)},appendHtml:function(e,t,i){var n=this.getItemViewContainer(e);n.append(t.el)},getItemViewContainer:function(e){if("$itemViewContainer"in e)return e.$itemViewContainer;var t,n=r.getOption(e,"itemViewContainer");if(n){var s=i.isFunction(n)?n():n;t=e.$(s),t.length<=0&&o("The specified `itemViewContainer` was not found: "+e.itemViewContainer,"ItemViewContainerMissingError")}else t=e.$el;return e.$itemViewContainer=t,t},resetItemViewContainer:function(){this.$itemViewContainer&&delete this.$itemViewContainer}}),r.Layout=r.ItemView.extend({regionType:r.Region,constructor:function(e){e=e||{},this._firstRender=!0,this._initializeRegions(e),r.ItemView.prototype.constructor.call(this,e)},render:function(){this.isClosed&&this._initializeRegions(),this._firstRender?this._firstRender=!1:this.isClosed||this._reInitializeRegions();var e=Array.prototype.slice.apply(arguments),t=r.ItemView.prototype.render.apply(this,e);return t},close:function(){if(!this.isClosed){this.regionManager.close();var e=Array.prototype.slice.apply(arguments);r.ItemView.prototype.close.apply(this,e)}},addRegion:function(e,t){var i={};return i[e]=t,this._buildRegions(i)[e]},addRegions:function(e){return this.regions=i.extend({},this.regions,e),this._buildRegions(e)},removeRegion:function(e){return delete this.regions[e],this.regionManager.removeRegion(e)},_buildRegions:function(e){var t=this,i={regionType:r.getOption(this,"regionType"),parentEl:function(){return t.$el}};return this.regionManager.addRegions(e,i)},_initializeRegions:function(e){var t;this._initRegionManager(),t=i.isFunction(this.regions)?this.regions(e):this.regions||{},this.addRegions(t)},_reInitializeRegions:function(){this.regionManager.closeRegions(),this.regionManager.each(function(e){e.reset()})},_initRegionManager:function(){this.regionManager=new r.RegionManager,this.listenTo(this.regionManager,"region:add",function(e,t){this[e]=t,this.trigger("region:add",e,t)}),this.listenTo(this.regionManager,"region:remove",function(e,t){delete this[e],this.trigger("region:remove",e,t)})}}),r.AppRouter=t.Router.extend({constructor:function(e){t.Router.prototype.constructor.apply(this,n(arguments)),this.options=e||{};var i=r.getOption(this,"appRoutes"),o=this._getController();this.processAppRoutes(o,i)},appRoute:function(e,t){var i=this._getController();this._addAppRoute(i,e,t)},processAppRoutes:function(e,t){if(t){var n=i.keys(t).reverse();i.each(n,function(i){this._addAppRoute(e,i,t[i])},this)}},_getController:function(){return r.getOption(this,"controller")},_addAppRoute:function(e,t,n){var o=e[n];if(!o)throw new Error("Method '"+n+"' was not found on the controller");this.route(t,n,i.bind(o,e))}}),r.Application=function(e){this._initRegionManager(),this._initCallbacks=new r.Callbacks,this.vent=new t.Wreqr.EventAggregator,this.commands=new t.Wreqr.Commands,this.reqres=new t.Wreqr.RequestResponse,this.submodules={},i.extend(this,e),this.triggerMethod=r.triggerMethod},i.extend(r.Application.prototype,t.Events,{execute:function(){var e=Array.prototype.slice.apply(arguments);this.commands.execute.apply(this.commands,e)},request:function(){var e=Array.prototype.slice.apply(arguments);return this.reqres.request.apply(this.reqres,e)},addInitializer:function(e){this._initCallbacks.add(e)},start:function(e){this.triggerMethod("initialize:before",e),this._initCallbacks.run(e,this),this.triggerMethod("initialize:after",e),this.triggerMethod("start",e)},addRegions:function(e){return this._regionManager.addRegions(e)},closeRegions:function(){this._regionManager.closeRegions()},removeRegion:function(e){this._regionManager.removeRegion(e)},getRegion:function(e){return this._regionManager.get(e)},module:function(e,t){var i=n(arguments);return i.unshift(this),r.Module.create.apply(r.Module,i)},_initRegionManager:function(){this._regionManager=new r.RegionManager,this.listenTo(this._regionManager,"region:add",function(e,t){this[e]=t}),this.listenTo(this._regionManager,"region:remove",function(e,t){delete this[e]})}}),r.Application.extend=r.extend,r.Module=function(e,t){this.moduleName=e,this.submodules={},this._setupInitializersAndFinalizers(),this.app=t,this.startWithParent=!0,this.triggerMethod=r.triggerMethod},i.extend(r.Module.prototype,t.Events,{addInitializer:function(e){this._initializerCallbacks.add(e)},addFinalizer:function(e){this._finalizerCallbacks.add(e)},start:function(e){this._isInitialized||(i.each(this.submodules,function(t){t.startWithParent&&t.start(e)}),this.triggerMethod("before:start",e),this._initializerCallbacks.run(e,this),this._isInitialized=!0,this.triggerMethod("start",e))},stop:function(){this._isInitialized&&(this._isInitialized=!1,r.triggerMethod.call(this,"before:stop"),i.each(this.submodules,function(e){e.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),r.triggerMethod.call(this,"stop"))},addDefinition:function(e,t){this._runModuleDefinition(e,t)},_runModuleDefinition:function(e,n){if(e){var o=i.flatten([this,this.app,t,r,r.$,i,n]);e.apply(this,o)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new r.Callbacks,this._finalizerCallbacks=new r.Callbacks}}),i.extend(r.Module,{create:function(e,t,o){var r=e,s=n(arguments);s.splice(0,3),t=t.split(".");var h=t.length,a=[];return a[h-1]=o,i.each(t,function(t,i){var n=r;r=this._getModule(n,t,e),this._addModuleDefinition(n,r,a[i],s)},this),r},_getModule:function(e,t,i,n,o){var s=e[t];return s||(s=new r.Module(t,i),e[t]=s,e.submodules[t]=s),s},_addModuleDefinition:function(e,t,n,o){var r,s;i.isFunction(n)?(r=n,s=!0):i.isObject(n)?(r=n.define,s=n.startWithParent):s=!0,r&&t.addDefinition(r,o),t.startWithParent=t.startWithParent&&s,t.startWithParent&&!t.startWithParentIsConfigured&&(t.startWithParentIsConfigured=!0,e.addInitializer(function(e){t.startWithParent&&t.start(e)}))}}),r}(this,Backbone,_);;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:backbone.marionette', location = 'js/lib/backbone.noconflict.js' */
!function(){var e=Backbone.noConflict();define("workflow-designer/backbone",[],function(){return e})}(),AJS.namespace("JIRA.WorkflowDesigner.Backbone",null,require("workflow-designer/backbone"));;
;
/* module-key = 'com.atlassian.auiplugin:internal-jquery-ui-datepicker', location = 'node_modules/@atlassian/aui/src/js-vendor/jquery/jquery-ui/jquery.ui.datepicker.js' */
("undefined"===typeof window?global:window).__601fc554d291439a8ef8bcac7fc51f19=function(){(function(d){function B(){this.debug=!1;this._curInst=null;this._keyEvent=!1;this._disabledInputs=[];this._inDialog=this._datepickerShowing=!1;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass=
"ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),
dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",
minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1};d.extend(this._defaults,this.regional[""]);this.dpDiv=C(d('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function C(a){return a.bind("mouseout",
function(a){a=d(a.target).closest("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a");a.length&&a.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")}).bind("mouseover",function(b){b=d(b.target).closest("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a");if(!d.datepicker._isDisabledDatepicker(D.inline?a.parent()[0]:D.input[0])&&b.length)b.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),
b.addClass("ui-state-hover"),b.hasClass("ui-datepicker-prev")&&b.addClass("ui-datepicker-prev-hover"),b.hasClass("ui-datepicker-next")&&b.addClass("ui-datepicker-next-hover")})}function z(a,b){d.extend(a,b);for(var c in b)if(null==b[c]||void 0==b[c])a[c]=b[c];return a}d.extend(d.ui,{datepicker:{version:"1.8.24"}});var x=(new Date).getTime(),D;d.extend(B.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},
setDefaults:function(a){z(this._defaults,a||{});return this},_attachDatepicker:function(a,b){var c=null,e;for(e in this._defaults){var f=a.getAttribute("date:"+e);if(f){c=c||{};try{c[e]=eval(f)}catch(h){c[e]=f}}}e=a.nodeName.toLowerCase();f="div"==e||"span"==e;a.id||(this.uuid+=1,a.id="dp"+this.uuid);var j=this._newInst(d(a),f);j.settings=d.extend({},b||{},c||{});"input"==e?this._connectDatepicker(a,j):f&&this._inlineDatepicker(a,j)},_newInst:function(a,b){return{id:a[0].id.replace(/([^A-Za-z0-9_-])/g,
"\\\\$1"),input:a,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:b,dpDiv:!b?this.dpDiv:C(d('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}},_connectDatepicker:function(a,b){var c=d(a);b.append=d([]);b.trigger=d([]);c.hasClass(this.markerClassName)||(this._attachments(c,b),c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",
function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),this._autoSize(b),d.data(a,"datepicker",b),b.settings.disabled&&this._disableDatepicker(a))},_attachments:function(a,b){var c=this._get(b,"appendText"),e=this._get(b,"isRTL");b.append&&b.append.remove();c&&(b.append=d('<span class="'+this._appendClass+'">'+c+"</span>"),a[e?"before":"after"](b.append));a.unbind("focus",this._showDatepicker);b.trigger&&b.trigger.remove();c=this._get(b,"showOn");("focus"==
c||"both"==c)&&a.focus(this._showDatepicker);if("button"==c||"both"==c){var c=this._get(b,"buttonText"),f=this._get(b,"buttonImage");b.trigger=d(this._get(b,"buttonImageOnly")?d("<img/>").addClass(this._triggerClass).attr({src:f,alt:c,title:c}):d('<button type="button"></button>').addClass(this._triggerClass).html(""==f?c:d("<img/>").attr({src:f,alt:c,title:c})));a[e?"before":"after"](b.trigger);b.trigger.click(function(){if(d.datepicker._datepickerShowing&&d.datepicker._lastInput==a[0])d.datepicker._hideDatepicker();
else{d.datepicker._datepickerShowing&&d.datepicker._lastInput!=a[0]&&d.datepicker._hideDatepicker();d.datepicker._showDatepicker(a[0])}return false})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b=new Date(2009,11,20),c=this._get(a,"dateFormat");if(c.match(/[DM]/)){var d=function(a){for(var b=0,c=0,d=0;d<a.length;d++)a[d].length>b&&(b=a[d].length,c=d);return c};b.setMonth(d(this._get(a,c.match(/MM/)?"monthNames":"monthNamesShort")));b.setDate(d(this._get(a,c.match(/DD/)?"dayNames":
"dayNamesShort"))+20-b.getDay())}a.input.attr("size",this._formatDate(a,b).length)}},_inlineDatepicker:function(a,b){var c=d(a);c.hasClass(this.markerClassName)||(c.addClass(this.markerClassName).append(b.dpDiv).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),d.data(a,"datepicker",b),this._setDate(b,this._getDefaultDate(b),!0),this._updateDatepicker(b),this._updateAlternate(b),b.settings.disabled&&this._disableDatepicker(a),
b.dpDiv.css("display","block"))},_dialogDatepicker:function(a,b,c,e,f){a=this._dialogInst;a||(this.uuid+=1,this._dialogInput=d('<input type="text" id="dp'+this.uuid+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),d("body").append(this._dialogInput),a=this._dialogInst=this._newInst(this._dialogInput,!1),a.settings={},d.data(this._dialogInput[0],"datepicker",a));z(a.settings,e||{});b=b&&b.constructor==Date?this._formatDate(a,b):b;this._dialogInput.val(b);
this._pos=f?f.length?f:[f.pageX,f.pageY]:null;this._pos||(this._pos=[document.documentElement.clientWidth/2-100+(document.documentElement.scrollLeft||document.body.scrollLeft),document.documentElement.clientHeight/2-150+(document.documentElement.scrollTop||document.body.scrollTop)]);this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");a.settings.onSelect=c;this._inDialog=!0;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);d.blockUI&&d.blockUI(this.dpDiv);
d.data(this._dialogInput[0],"datepicker",a);return this},_destroyDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();d.removeData(a,"datepicker");"input"==e?(c.append.remove(),c.trigger.remove(),b.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"==e||"span"==e)&&b.removeClass(this.markerClassName).empty()}},
_enableDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();if("input"==e)a.disabled=!1,c.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==e||"span"==e)b=b.children("."+this._inlineClass),b.children().removeClass("ui-state-disabled"),b.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled");this._disabledInputs=d.map(this._disabledInputs,
function(b){return b==a?null:b})}},_disableDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();if("input"==e)a.disabled=!0,c.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==e||"span"==e)b=b.children("."+this._inlineClass),b.children().addClass("ui-state-disabled"),b.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled",
"disabled");this._disabledInputs=d.map(this._disabledInputs,function(b){return b==a?null:b});this._disabledInputs[this._disabledInputs.length]=a}},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]==a)return!0;return!1},_getInst:function(a){try{return d.data(a,"datepicker")}catch(b){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(a,b,c){var e=this._getInst(a);if(2==arguments.length&&"string"==typeof b)return"defaults"==
b?d.extend({},d.datepicker._defaults):e?"all"==b?d.extend({},e.settings):this._get(e,b):null;var f=b||{};"string"==typeof b&&(f={},f[b]=c);if(e){this._curInst==e&&this._hideDatepicker();var h=this._getDateDatepicker(a,!0),j=this._getMinMaxDate(e,"min"),g=this._getMinMaxDate(e,"max");z(e.settings,f);null!==j&&(void 0!==f.dateFormat&&void 0===f.minDate)&&(e.settings.minDate=this._formatDate(e,j));null!==g&&(void 0!==f.dateFormat&&void 0===f.maxDate)&&(e.settings.maxDate=this._formatDate(e,g));this._attachments(d(a),
e);this._autoSize(e);this._setDate(e,h);this._updateAlternate(e);this._updateDatepicker(e)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){(a=this._getInst(a))&&this._updateDatepicker(a)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=this._getInst(a);c&&!c.inline&&this._setDateFromField(c,b);return c?this._getDate(c):null},_doKeyDown:function(a){var b=
d.datepicker._getInst(a.target),c=!0,e=b.dpDiv.is(".ui-datepicker-rtl");b._keyEvent=!0;if(d.datepicker._datepickerShowing)switch(a.keyCode){case 9:d.datepicker._hideDatepicker();c=!1;break;case 13:return c=d("td."+d.datepicker._dayOverClass+":not(."+d.datepicker._currentClass+")",b.dpDiv),c[0]&&d.datepicker._selectDay(a.target,b.selectedMonth,b.selectedYear,c[0]),(a=d.datepicker._get(b,"onSelect"))?(c=d.datepicker._formatDate(b),a.apply(b.input?b.input[0]:null,[c,b])):d.datepicker._hideDatepicker(),
!1;case 27:d.datepicker._hideDatepicker();break;case 33:d.datepicker._adjustDate(a.target,a.ctrlKey?-d.datepicker._get(b,"stepBigMonths"):-d.datepicker._get(b,"stepMonths"),"M");break;case 34:d.datepicker._adjustDate(a.target,a.ctrlKey?+d.datepicker._get(b,"stepBigMonths"):+d.datepicker._get(b,"stepMonths"),"M");break;case 35:(a.ctrlKey||a.metaKey)&&d.datepicker._clearDate(a.target);c=a.ctrlKey||a.metaKey;break;case 36:(a.ctrlKey||a.metaKey)&&d.datepicker._gotoToday(a.target);c=a.ctrlKey||a.metaKey;
break;case 37:if(a.ctrlKey||a.metaKey)d.datepicker._adjustDate(a.target,e?1:-1,"D");c=a.ctrlKey||a.metaKey;a.originalEvent.altKey&&d.datepicker._adjustDate(a.target,a.ctrlKey?-d.datepicker._get(b,"stepBigMonths"):-d.datepicker._get(b,"stepMonths"),"M");break;case 38:(a.ctrlKey||a.metaKey)&&d.datepicker._adjustDate(a.target,-7,"D");c=a.ctrlKey||a.metaKey;break;case 39:if(a.ctrlKey||a.metaKey)d.datepicker._adjustDate(a.target,e?-1:1,"D");c=a.ctrlKey||a.metaKey;a.originalEvent.altKey&&d.datepicker._adjustDate(a.target,
a.ctrlKey?+d.datepicker._get(b,"stepBigMonths"):+d.datepicker._get(b,"stepMonths"),"M");break;case 40:(a.ctrlKey||a.metaKey)&&d.datepicker._adjustDate(a.target,7,"D");c=a.ctrlKey||a.metaKey;break;default:c=!1}else 36==a.keyCode&&a.ctrlKey?d.datepicker._showDatepicker(this):c=!1;c&&(a.preventDefault(),a.stopPropagation())},_doKeyPress:function(a){var b=d.datepicker._getInst(a.target);if(d.datepicker._get(b,"constrainInput")){var b=d.datepicker._possibleChars(d.datepicker._get(b,"dateFormat")),c=String.fromCharCode(void 0==
a.charCode?a.keyCode:a.charCode);return a.ctrlKey||a.metaKey||" ">c||!b||-1<b.indexOf(c)}},_doKeyUp:function(a){a=d.datepicker._getInst(a.target);if(a.input.val()!=a.lastVal)try{if(d.datepicker.parseDate(d.datepicker._get(a,"dateFormat"),a.input?a.input.val():null,d.datepicker._getFormatConfig(a)))d.datepicker._setDateFromField(a),d.datepicker._updateAlternate(a),d.datepicker._updateDatepicker(a)}catch(b){d.datepicker.log(b)}return!0},_showDatepicker:function(a){a=a.target||a;"input"!=a.nodeName.toLowerCase()&&
(a=d("input",a.parentNode)[0]);if(!(d.datepicker._isDisabledDatepicker(a)||d.datepicker._lastInput==a)){var b=d.datepicker._getInst(a);d.datepicker._curInst&&d.datepicker._curInst!=b&&(d.datepicker._curInst.dpDiv.stop(!0,!0),b&&d.datepicker._datepickerShowing&&d.datepicker._hideDatepicker(d.datepicker._curInst.input[0]));var c=d.datepicker._get(b,"beforeShow"),c=c?c.apply(a,[a,b]):{};if(!1!==c){z(b.settings,c);b.lastVal=null;d.datepicker._lastInput=a;d.datepicker._setDateFromField(b);d.datepicker._inDialog&&
(a.value="");d.datepicker._pos||(d.datepicker._pos=d.datepicker._findPos(a),d.datepicker._pos[1]+=a.offsetHeight);var e=!1;d(a).parents().each(function(){e=e|d(this).css("position")=="fixed";return!e});e&&d.browser.opera&&(d.datepicker._pos[0]-=document.documentElement.scrollLeft,d.datepicker._pos[1]-=document.documentElement.scrollTop);c={left:d.datepicker._pos[0],top:d.datepicker._pos[1]};d.datepicker._pos=null;b.dpDiv.empty();b.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});d.datepicker._updateDatepicker(b);
c=d.datepicker._checkOffset(b,c,e);b.dpDiv.css({position:d.datepicker._inDialog&&d.blockUI?"static":e?"fixed":"absolute",display:"none",left:c.left+"px",top:c.top+"px"});if(!b.inline){var c=d.datepicker._get(b,"showAnim"),f=d.datepicker._get(b,"duration"),h=function(){var a=b.dpDiv.find("iframe.ui-datepicker-cover");if(a.length){var c=d.datepicker._getBorders(b.dpDiv);a.css({left:-c[0],top:-c[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()})}};b.dpDiv.zIndex(d(a).zIndex()+1);d.datepicker._datepickerShowing=
!0;if(d.effects&&d.effects[c])b.dpDiv.show(c,d.datepicker._get(b,"showOptions"),f,h);else b.dpDiv[c||"show"](c?f:null,h);(!c||!f)&&h();b.input.is(":visible")&&!b.input.is(":disabled")&&b.input.focus();d.datepicker._curInst=b}}}},_updateDatepicker:function(a){this.maxRows=4;var b=d.datepicker._getBorders(a.dpDiv);D=a;a.dpDiv.empty().append(this._generateHTML(a));this._attachHandlers(a);var c=a.dpDiv.find("iframe.ui-datepicker-cover");c.length&&c.css({left:-b[0],top:-b[1],width:a.dpDiv.outerWidth(),
height:a.dpDiv.outerHeight()});a.dpDiv.find("."+this._dayOverClass+" a").mouseover();b=this._getNumberOfMonths(a);c=b[1];a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");1<c&&a.dpDiv.addClass("ui-datepicker-multi-"+c).css("width",17*c+"em");a.dpDiv[(1!=b[0]||1!=b[1]?"add":"remove")+"Class"]("ui-datepicker-multi");a.dpDiv[(this._get(a,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");a==d.datepicker._curInst&&(d.datepicker._datepickerShowing&&
a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&a.input[0]!=document.activeElement)&&a.input.focus();if(a.yearshtml){var e=a.yearshtml;setTimeout(function(){e===a.yearshtml&&a.yearshtml&&a.dpDiv.find("select.ui-datepicker-year:first").replaceWith(a.yearshtml);e=a.yearshtml=null},0)}},_getBorders:function(a){var b=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(a,b,c){var e=
a.dpDiv.outerWidth(),f=a.dpDiv.outerHeight(),h=a.input?a.input.outerWidth():0,j=a.input?a.input.outerHeight():0,g=document.documentElement.clientWidth+(c?0:d(document).scrollLeft()),i=document.documentElement.clientHeight+(c?0:d(document).scrollTop());b.left-=this._get(a,"isRTL")?e-h:0;b.left-=c&&b.left==a.input.offset().left?d(document).scrollLeft():0;b.top-=c&&b.top==a.input.offset().top+j?d(document).scrollTop():0;b.left-=Math.min(b.left,b.left+e>g&&g>e?Math.abs(b.left+e-g):0);b.top-=Math.min(b.top,
b.top+f>i&&i>f?Math.abs(f+j):0);return b},_findPos:function(a){for(var b=this._getInst(a),b=this._get(b,"isRTL");a&&("hidden"==a.type||1!=a.nodeType||d.expr.filters.hidden(a));)a=a[b?"previousSibling":"nextSibling"];a=d(a).offset();return[a.left,a.top]},_hideDatepicker:function(a){var b=this._curInst;if(b&&!(a&&b!=d.data(a,"datepicker"))&&this._datepickerShowing){var a=this._get(b,"showAnim"),c=this._get(b,"duration"),e=function(){d.datepicker._tidyDialog(b)};if(d.effects&&d.effects[a])b.dpDiv.hide(a,
d.datepicker._get(b,"showOptions"),c,e);else b.dpDiv["slideDown"==a?"slideUp":"fadeIn"==a?"fadeOut":"hide"](a?c:null,e);a||e();this._datepickerShowing=!1;(a=this._get(b,"onClose"))&&a.apply(b.input?b.input[0]:null,[b.input?b.input.val():"",b]);this._lastInput=null;this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),d.blockUI&&(d.unblockUI(),d("body").append(this.dpDiv)));this._inDialog=!1}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},
_checkExternalClick:function(a){if(d.datepicker._curInst){var a=d(a.target),b=d.datepicker._getInst(a[0]);(a[0].id!=d.datepicker._mainDivId&&0==a.parents("#"+d.datepicker._mainDivId).length&&!a.hasClass(d.datepicker.markerClassName)&&!a.closest("."+d.datepicker._triggerClass).length&&d.datepicker._datepickerShowing&&(!d.datepicker._inDialog||!d.blockUI)||a.hasClass(d.datepicker.markerClassName)&&d.datepicker._curInst!=b)&&d.datepicker._hideDatepicker()}},_adjustDate:function(a,b,c){var a=d(a),e=this._getInst(a[0]);
this._isDisabledDatepicker(a[0])||(this._adjustInstDate(e,b+("M"==c?this._get(e,"showCurrentAtPos"):0),c),this._updateDatepicker(e))},_gotoToday:function(a){var a=d(a),b=this._getInst(a[0]);if(this._get(b,"gotoCurrent")&&b.currentDay)b.selectedDay=b.currentDay,b.drawMonth=b.selectedMonth=b.currentMonth,b.drawYear=b.selectedYear=b.currentYear;else{var c=new Date;b.selectedDay=c.getDate();b.drawMonth=b.selectedMonth=c.getMonth();b.drawYear=b.selectedYear=c.getFullYear()}this._notifyChange(b);this._adjustDate(a)},
_selectMonthYear:function(a,b,c){var a=d(a),e=this._getInst(a[0]);e["selected"+("M"==c?"Month":"Year")]=e["draw"+("M"==c?"Month":"Year")]=parseInt(b.options[b.selectedIndex].value,10);this._notifyChange(e);this._adjustDate(a)},_selectDay:function(a,b,c,e){var f=d(a);!d(e).hasClass(this._unselectableClass)&&!this._isDisabledDatepicker(f[0])&&(f=this._getInst(f[0]),f.selectedDay=f.currentDay=d("a",e).html(),f.selectedMonth=f.currentMonth=b,f.selectedYear=f.currentYear=c,this._selectDate(a,this._formatDate(f,
f.currentDay,f.currentMonth,f.currentYear)))},_clearDate:function(a){a=d(a);this._getInst(a[0]);this._selectDate(a,"")},_selectDate:function(a,b){var c=d(a),c=this._getInst(c[0]),b=null!=b?b:this._formatDate(c);c.input&&c.input.val(b);this._updateAlternate(c);var e=this._get(c,"onSelect");e?e.apply(c.input?c.input[0]:null,[b,c]):c.input&&c.input.trigger("change");c.inline?this._updateDatepicker(c):(this._hideDatepicker(),this._lastInput=c.input[0],"object"!=typeof c.input[0]&&c.input.focus(),this._lastInput=
null)},_updateAlternate:function(a){var b=this._get(a,"altField");if(b){var c=this._get(a,"altFormat")||this._get(a,"dateFormat"),e=this._getDate(a),f=this.formatDate(c,e,this._getFormatConfig(a));d(b).each(function(){d(this).val(f)})}},noWeekends:function(a){a=a.getDay();return[0<a&&6>a,""]},iso8601Week:function(a){a=new Date(a.getTime());a.setDate(a.getDate()+4-(a.getDay()||7));var b=a.getTime();a.setMonth(0);a.setDate(1);return Math.floor(Math.round((b-a)/864E5)/7)+1},parseDate:function(a,b,c){if(null==
a||null==b)throw"Invalid arguments";b="object"==typeof b?b.toString():b+"";if(""==b)return null;for(var e=(c?c.shortYearCutoff:null)||this._defaults.shortYearCutoff,e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),f=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,h=(c?c.dayNames:null)||this._defaults.dayNames,j=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,g=(c?c.monthNames:null)||this._defaults.monthNames,i=c=-1,p=-1,r=-1,k=!1,m=function(b){(b=y+1<a.length&&
a.charAt(y+1)==b)&&y++;return b},l=function(a){var c=m(a),a=RegExp("^\\d{1,"+("@"==a?14:"!"==a?20:"y"==a&&c?4:"o"==a?3:2)+"}"),a=b.substring(u).match(a);if(!a)throw"Missing number at position "+u;u+=a[0].length;return parseInt(a[0],10)},n=function(a,c,e){var a=d.map(m(a)?e:c,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)}),f=-1;d.each(a,function(a,c){var d=c[1];if(b.substr(u,d.length).toLowerCase()==d.toLowerCase())return f=c[0],u+=d.length,!1});if(-1!=f)return f+
1;throw"Unknown name at position "+u;},s=function(){if(b.charAt(u)!=a.charAt(y))throw"Unexpected literal at position "+u;u++},u=0,y=0;y<a.length;y++)if(k)"'"==a.charAt(y)&&!m("'")?k=!1:s();else switch(a.charAt(y)){case "d":p=l("d");break;case "D":n("D",f,h);break;case "o":r=l("o");break;case "m":i=l("m");break;case "M":i=n("M",j,g);break;case "y":c=l("y");break;case "@":var v=new Date(l("@")),c=v.getFullYear(),i=v.getMonth()+1,p=v.getDate();break;case "!":v=new Date((l("!")-this._ticksTo1970)/1E4);
c=v.getFullYear();i=v.getMonth()+1;p=v.getDate();break;case "'":m("'")?s():k=!0;break;default:s()}if(u<b.length)throw"Extra/unparsed characters found in date: "+b.substring(u);-1==c?c=(new Date).getFullYear():100>c&&(c+=(new Date).getFullYear()-(new Date).getFullYear()%100+(c<=e?0:-100));if(-1<r){i=1;p=r;do{e=this._getDaysInMonth(c,i-1);if(p<=e)break;i++;p-=e}while(1)}v=this._daylightSavingAdjust(new Date(c,i-1,p));if(v.getFullYear()!=c||v.getMonth()+1!=i||v.getDate()!=p)throw"Invalid date";return v},
ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864E9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(a,b,c){if(!b)return"";var d=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,h=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,
c=(c?c.monthNames:null)||this._defaults.monthNames,j=function(b){(b=r+1<a.length&&a.charAt(r+1)==b)&&r++;return b},g=function(a,b,c){b=""+b;if(j(a))for(;b.length<c;)b="0"+b;return b},i="",p=!1;if(b)for(var r=0;r<a.length;r++)if(p)"'"==a.charAt(r)&&!j("'")?p=!1:i+=a.charAt(r);else switch(a.charAt(r)){case "d":i+=g("d",b.getDate(),2);break;case "D":var k;k=b.getDay();var m=d,l=f;k=j("D")?l[k]:m[k];i+=k;break;case "o":i+=g("o",Math.round(((new Date(b.getFullYear(),b.getMonth(),b.getDate())).getTime()-
(new Date(b.getFullYear(),0,0)).getTime())/864E5),3);break;case "m":i+=g("m",b.getMonth()+1,2);break;case "M":k=b.getMonth();m=h;l=c;k=j("M")?l[k]:m[k];i+=k;break;case "y":i+=j("y")?b.getFullYear():(10>b.getYear()%100?"0":"")+b.getYear()%100;break;case "@":i+=b.getTime();break;case "!":i+=1E4*b.getTime()+this._ticksTo1970;break;case "'":j("'")?i+="'":p=!0;break;default:i+=a.charAt(r)}return i},_possibleChars:function(a){for(var b="",c=!1,d=function(b){(b=f+1<a.length&&a.charAt(f+1)==b)&&f++;return b},
f=0;f<a.length;f++)if(c)"'"==a.charAt(f)&&!d("'")?c=!1:b+=a.charAt(f);else switch(a.charAt(f)){case "d":case "m":case "y":case "@":b+="0123456789";break;case "D":case "M":return null;case "'":d("'")?b+="'":c=!0;break;default:b+=a.charAt(f)}return b},_get:function(a,b){return void 0!==a.settings[b]?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()!=a.lastVal){var c=this._get(a,"dateFormat"),d=a.lastVal=a.input?a.input.val():null,f,h;f=h=this._getDefaultDate(a);var j=
this._getFormatConfig(a);try{f=this.parseDate(c,d,j)||h}catch(g){this.log(g),d=b?"":d}a.selectedDay=f.getDate();a.drawMonth=a.selectedMonth=f.getMonth();a.drawYear=a.selectedYear=f.getFullYear();a.currentDay=d?f.getDate():0;a.currentMonth=d?f.getMonth():0;a.currentYear=d?f.getFullYear():0;this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(a,b,c){if(null==b||""===b)b=c;else{var e;if("string"==
typeof b)a:{try{e=d.datepicker.parseDate(d.datepicker._get(a,"dateFormat"),b,d.datepicker._getFormatConfig(a));break a}catch(f){}var h=(b.toLowerCase().match(/^c/)?d.datepicker._getDate(a):null)||new Date,a=h.getFullYear();e=h.getMonth();for(var h=h.getDate(),j=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,g=j.exec(b);g;){switch(g[2]||"d"){case "d":case "D":h+=parseInt(g[1],10);break;case "w":case "W":h+=7*parseInt(g[1],10);break;case "m":case "M":e+=parseInt(g[1],10);h=Math.min(h,d.datepicker._getDaysInMonth(a,
e));break;case "y":case "Y":a+=parseInt(g[1],10),h=Math.min(h,d.datepicker._getDaysInMonth(a,e))}g=j.exec(b)}e=new Date(a,e,h)}else"number"==typeof b?isNaN(b)?b=c:(a=new Date,a.setDate(a.getDate()+b),b=a):b=new Date(b.getTime()),e=b;b=e}if(b=b&&"Invalid Date"==b.toString()?c:b)b.setHours(0),b.setMinutes(0),b.setSeconds(0),b.setMilliseconds(0);return this._daylightSavingAdjust(b)},_daylightSavingAdjust:function(a){if(!a)return null;a.setHours(12<a.getHours()?a.getHours()+2:0);return a},_setDate:function(a,
b,c){var d=!b,f=a.selectedMonth,h=a.selectedYear,b=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=b.getDate();a.drawMonth=a.selectedMonth=a.currentMonth=b.getMonth();a.drawYear=a.selectedYear=a.currentYear=b.getFullYear();(f!=a.selectedMonth||h!=a.selectedYear)&&!c&&this._notifyChange(a);this._adjustInstDate(a);a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){return!a.currentYear||a.input&&""==a.input.val()?null:this._daylightSavingAdjust(new Date(a.currentYear,
a.currentMonth,a.currentDay))},_attachHandlers:function(a){var b=this._get(a,"stepMonths"),c="#"+a.id.replace(/\\\\/g,"\\");a.dpDiv.find("[data-handler]").map(function(){d(this).bind(this.getAttribute("data-event"),{prev:function(){window["DP_jQuery_"+x].datepicker._adjustDate(c,-b,"M")},next:function(){window["DP_jQuery_"+x].datepicker._adjustDate(c,+b,"M")},hide:function(){window["DP_jQuery_"+x].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+x].datepicker._gotoToday(c)},selectDay:function(){window["DP_jQuery_"+
x].datepicker._selectDay(c,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this);return!1},selectMonth:function(){window["DP_jQuery_"+x].datepicker._selectMonthYear(c,this,"M");return!1},selectYear:function(){window["DP_jQuery_"+x].datepicker._selectMonthYear(c,this,"Y");return!1}}[this.getAttribute("data-handler")])})},_generateHTML:function(a){var b=new Date,b=this._daylightSavingAdjust(new Date(b.getFullYear(),b.getMonth(),b.getDate())),c=this._get(a,"isRTL"),e=this._get(a,"showButtonPanel"),
f=this._get(a,"hideIfNoPrevNext"),h=this._get(a,"navigationAsDateFormat"),j=this._getNumberOfMonths(a),g=this._get(a,"showCurrentAtPos"),i=this._get(a,"stepMonths"),p=1!=j[0]||1!=j[1],r=this._daylightSavingAdjust(!a.currentDay?new Date(9999,9,9):new Date(a.currentYear,a.currentMonth,a.currentDay)),k=this._getMinMaxDate(a,"min"),m=this._getMinMaxDate(a,"max"),g=a.drawMonth-g,l=a.drawYear;0>g&&(g+=12,l--);if(m)for(var n=this._daylightSavingAdjust(new Date(m.getFullYear(),m.getMonth()-j[0]*j[1]+1,m.getDate())),
n=k&&n<k?k:n;this._daylightSavingAdjust(new Date(l,g,1))>n;)g--,0>g&&(g=11,l--);a.drawMonth=g;a.drawYear=l;var n=this._get(a,"prevText"),n=!h?n:this.formatDate(n,this._daylightSavingAdjust(new Date(l,g-i,1)),this._getFormatConfig(a)),n=this._canAdjustMonth(a,-1,l,g)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+n+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+n+"</span></a>":f?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+
n+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+n+"</span></a>",s=this._get(a,"nextText"),s=!h?s:this.formatDate(s,this._daylightSavingAdjust(new Date(l,g+i,1)),this._getFormatConfig(a)),f=this._canAdjustMonth(a,1,l,g)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>":f?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+
(c?"w":"e")+'">'+s+"</span></a>",i=this._get(a,"currentText"),s=this._get(a,"gotoCurrent")&&a.currentDay?r:b,i=!h?i:this.formatDate(i,s,this._getFormatConfig(a)),h=!a.inline?'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(a,"closeText")+"</button>":"",e=e?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(c?h:"")+(this._isInRange(a,s)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+
i+"</button>":"")+(c?"":h)+"</div>":"",h=parseInt(this._get(a,"firstDay"),10),h=isNaN(h)?0:h,i=this._get(a,"showWeek"),s=this._get(a,"dayNames");this._get(a,"dayNamesShort");var u=this._get(a,"dayNamesMin"),y=this._get(a,"monthNames"),v=this._get(a,"monthNamesShort"),x=this._get(a,"beforeShowDay"),z=this._get(a,"showOtherMonths"),D=this._get(a,"selectOtherMonths");this._get(a,"calculateWeek");for(var B=this._getDefaultDate(a),E="",F=0;F<j[0];F++){var I="";this.maxRows=4;for(var G=0;G<j[1];G++){var C=
this._daylightSavingAdjust(new Date(l,g,a.selectedDay)),t=" ui-corner-all",q="";if(p){q+='<div class="ui-datepicker-group';if(1<j[1])switch(G){case 0:q+=" ui-datepicker-group-first";t=" ui-corner-"+(c?"right":"left");break;case j[1]-1:q+=" ui-datepicker-group-last";t=" ui-corner-"+(c?"left":"right");break;default:q+=" ui-datepicker-group-middle",t=""}q+='">'}for(var q=q+('<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+t+'">'+(/all|left/.test(t)&&0==F?c?f:n:"")+(/all|right/.test(t)&&
0==F?c?n:f:"")+this._generateMonthYearHeader(a,g,l,k,m,0<F||0<G,y,v)+'</div><table class="ui-datepicker-calendar"><thead><tr>'),w=i?'<th class="ui-datepicker-week-col">'+this._get(a,"weekHeader")+"</th>":"",t=0;7>t;t++)var o=(t+h)%7,w=w+("<th"+(5<=(t+h+6)%7?' class="ui-datepicker-week-end"':"")+'><span title="'+s[o]+'">'+u[o]+"</span></th>");q+=w+"</tr></thead><tbody>";w=this._getDaysInMonth(l,g);l==a.selectedYear&&g==a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,w));t=(this._getFirstDayOfMonth(l,
g)-h+7)%7;w=Math.ceil((t+w)/7);this.maxRows=w=p?this.maxRows>w?this.maxRows:w:w;for(var o=this._daylightSavingAdjust(new Date(l,g,1-t)),L=0;L<w;L++){for(var q=q+"<tr>",J=!i?"":'<td class="ui-datepicker-week-col">'+this._get(a,"calculateWeek")(o)+"</td>",t=0;7>t;t++){var H=x?x.apply(a.input?a.input[0]:null,[o]):[!0,""],A=o.getMonth()!=g,K=A&&!D||!H[0]||k&&o<k||m&&o>m,J=J+('<td class="'+(5<=(t+h+6)%7?" ui-datepicker-week-end":"")+(A?" ui-datepicker-other-month":"")+(o.getTime()==C.getTime()&&g==a.selectedMonth&&
a._keyEvent||B.getTime()==o.getTime()&&B.getTime()==C.getTime()?" "+this._dayOverClass:"")+(K?" "+this._unselectableClass+" ui-state-disabled":"")+(A&&!z?"":" "+H[1]+(o.getTime()==r.getTime()?" "+this._currentClass:"")+(o.getTime()==b.getTime()?" ui-datepicker-today":""))+'"'+((!A||z)&&H[2]?' title="'+H[2]+'"':"")+(K?"":' data-handler="selectDay" data-event="click" data-month="'+o.getMonth()+'" data-year="'+o.getFullYear()+'"')+">"+(A&&!z?"&#xa0;":K?'<span class="ui-state-default">'+o.getDate()+"</span>":
'<a class="ui-state-default'+(o.getTime()==b.getTime()?" ui-state-highlight":"")+(o.getTime()==r.getTime()?" ui-state-active":"")+(A?" ui-priority-secondary":"")+'" href="#">'+o.getDate()+"</a>")+"</td>");o.setDate(o.getDate()+1);o=this._daylightSavingAdjust(o)}q+=J+"</tr>"}g++;11<g&&(g=0,l++);q+="</tbody></table>"+(p?"</div>"+(0<j[0]&&G==j[1]-1?'<div class="ui-datepicker-row-break"></div>':""):"");I+=q}E+=I}E+=e+(d.browser.msie&&7>parseInt(d.browser.version,10)&&!a.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':
"");a._keyEvent=!1;return E},_generateMonthYearHeader:function(a,b,c,d,f,h,j,g){var i=this._get(a,"changeMonth"),p=this._get(a,"changeYear"),r=this._get(a,"showMonthAfterYear"),k='<div class="ui-datepicker-title">',m="";if(h||!i)m+='<span class="ui-datepicker-month">'+j[b]+"</span>";else{for(var j=d&&d.getFullYear()==c,l=f&&f.getFullYear()==c,m=m+'<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">',n=0;12>n;n++)if((!j||n>=d.getMonth())&&(!l||n<=f.getMonth()))m+='<option value="'+
n+'"'+(n==b?' selected="selected"':"")+">"+g[n]+"</option>";m+="</select>"}r||(k+=m+(h||!i||!p?"&#xa0;":""));if(!a.yearshtml)if(a.yearshtml="",h||!p)k+='<span class="ui-datepicker-year">'+c+"</span>";else{var g=this._get(a,"yearRange").split(":"),s=(new Date).getFullYear(),j=function(a){a=a.match(/c[+-].*/)?c+parseInt(a.substring(1),10):a.match(/[+-].*/)?s+parseInt(a,10):parseInt(a,10);return isNaN(a)?s:a},b=j(g[0]),g=Math.max(b,j(g[1]||"")),b=d?Math.max(b,d.getFullYear()):b,g=f?Math.min(g,f.getFullYear()):
g;for(a.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';b<=g;b++)a.yearshtml+='<option value="'+b+'"'+(b==c?' selected="selected"':"")+">"+b+"</option>";a.yearshtml+="</select>";k+=a.yearshtml;a.yearshtml=null}k+=this._get(a,"yearSuffix");r&&(k+=(h||!i||!p?"&#xa0;":"")+m);return k+"</div>"},_adjustInstDate:function(a,b,c){var d=a.drawYear+("Y"==c?b:0),f=a.drawMonth+("M"==c?b:0),b=Math.min(a.selectedDay,this._getDaysInMonth(d,f))+("D"==c?b:0),d=this._restrictMinMax(a,
this._daylightSavingAdjust(new Date(d,f,b)));a.selectedDay=d.getDate();a.drawMonth=a.selectedMonth=d.getMonth();a.drawYear=a.selectedYear=d.getFullYear();("M"==c||"Y"==c)&&this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),c=c&&b<c?c:b;return d&&c>d?d:c},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){a=this._get(a,
"numberOfMonths");return null==a?[1,1]:"number"==typeof a?[1,a]:a},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(a,b,c,d){var f=this._getNumberOfMonths(a),c=this._daylightSavingAdjust(new Date(c,d+(0>b?b:f[0]*f[1]),1));0>b&&c.setDate(this._getDaysInMonth(c.getFullYear(),
c.getMonth()));return this._isInRange(a,c)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max");return(!c||b.getTime()>=c.getTime())&&(!d||b.getTime()<=d.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff"),b="string"!=typeof b?b:(new Date).getFullYear()%100+parseInt(b,10);return{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,
"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);b=b?"object"==typeof b?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),b,this._getFormatConfig(a))}});d.fn.datepicker=function(a){if(!this.length)return this;d.datepicker.initialized||(d(document).mousedown(d.datepicker._checkExternalClick).find("body").append(d.datepicker.dpDiv),
d.datepicker.initialized=!0);var b=Array.prototype.slice.call(arguments,1);return"string"==typeof a&&("isDisabled"==a||"getDate"==a||"widget"==a)||"option"==a&&2==arguments.length&&"string"==typeof arguments[1]?d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this[0]].concat(b)):this.each(function(){typeof a=="string"?d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this].concat(b)):d.datepicker._attachDatepicker(this,a)})};d.datepicker=new B;d.datepicker.initialized=!1;d.datepicker.uuid=
(new Date).getTime();d.datepicker.version="1.8.24";window["DP_jQuery_"+x]=d})(jQuery);return{}}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:jquery-ui-position', location = 'node_modules/@atlassian/aui/src/js-vendor/jquery/jquery-ui/jquery.ui.position.js' */
(function(c){c.ui=c.ui||{};var k=/left|center|right/,l=/top|center|bottom/,n=c.fn.position,o=c.fn.offset;c.fn.position=function(b){if(!b||!b.of)return n.apply(this,arguments);var b=c.extend({},b),a=c(b.of),d=a[0],g=(b.collision||"flip").split(" "),f=b.offset?b.offset.split(" "):[0,0],h,j,e;9===d.nodeType?(h=a.width(),j=a.height(),e={top:0,left:0}):d.setTimeout?(h=a.width(),j=a.height(),e={top:a.scrollTop(),left:a.scrollLeft()}):d.preventDefault?(b.at="left top",h=j=0,e={top:b.of.pageY,left:b.of.pageX}):
(h=a.outerWidth(),j=a.outerHeight(),e=a.offset());c.each(["my","at"],function(){var a=(b[this]||"").split(" ");a.length===1&&(a=k.test(a[0])?a.concat(["center"]):l.test(a[0])?["center"].concat(a):["center","center"]);a[0]=k.test(a[0])?a[0]:"center";a[1]=l.test(a[1])?a[1]:"center";b[this]=a});1===g.length&&(g[1]=g[0]);f[0]=parseInt(f[0],10)||0;1===f.length&&(f[1]=f[0]);f[1]=parseInt(f[1],10)||0;"right"===b.at[0]?e.left+=h:"center"===b.at[0]&&(e.left+=h/2);"bottom"===b.at[1]?e.top+=j:"center"===b.at[1]&&
(e.top+=j/2);e.left+=f[0];e.top+=f[1];return this.each(function(){var a=c(this),d=a.outerWidth(),m=a.outerHeight(),k=parseInt(c.curCSS(this,"marginLeft",true))||0,l=parseInt(c.curCSS(this,"marginTop",true))||0,n=d+k+(parseInt(c.curCSS(this,"marginRight",true))||0),o=m+l+(parseInt(c.curCSS(this,"marginBottom",true))||0),i=c.extend({},e),p;if(b.my[0]==="right")i.left=i.left-d;else if(b.my[0]==="center")i.left=i.left-d/2;if(b.my[1]==="bottom")i.top=i.top-m;else if(b.my[1]==="center")i.top=i.top-m/2;
p={left:i.left-k,top:i.top-l};c.each(["left","top"],function(a,e){if(c.ui.position[g[a]])c.ui.position[g[a]][e](i,{targetWidth:h,targetHeight:j,elemWidth:d,elemHeight:m,collisionPosition:p,collisionWidth:n,collisionHeight:o,offset:f,my:b.my,at:b.at})});c.fn.bgiframe&&a.bgiframe();a.offset(c.extend(i,{using:b.using}))})};c.ui.position={fit:{left:function(b,a){var d=c(window),d=a.collisionPosition.left+a.collisionWidth-d.width()-d.scrollLeft();b.left=0<d?b.left-d:Math.max(b.left-a.collisionPosition.left,
b.left)},top:function(b,a){var d=c(window),d=a.collisionPosition.top+a.collisionHeight-d.height()-d.scrollTop();b.top=0<d?b.top-d:Math.max(b.top-a.collisionPosition.top,b.top)}},flip:{left:function(b,a){if("center"!==a.at[0]){var d=c(window),d=a.collisionPosition.left+a.collisionWidth-d.width()-d.scrollLeft(),g="left"===a.my[0]?-a.elemWidth:"right"===a.my[0]?a.elemWidth:0,f="left"===a.at[0]?a.targetWidth:-a.targetWidth,h=-2*a.offset[0];b.left+=0>a.collisionPosition.left?g+f+h:0<d?g+f+h:0}},top:function(b,
a){if("center"!==a.at[1]){var d=c(window),d=a.collisionPosition.top+a.collisionHeight-d.height()-d.scrollTop(),g="top"===a.my[1]?-a.elemHeight:"bottom"===a.my[1]?a.elemHeight:0,f="top"===a.at[1]?a.targetHeight:-a.targetHeight,h=-2*a.offset[1];b.top+=0>a.collisionPosition.top?g+f+h:0<d?g+f+h:0}}}};c.offset.setOffset||(c.offset.setOffset=function(b,a){/static/.test(c.curCSS(b,"position"))&&(b.style.position="relative");var d=c(b),g=d.offset(),f=parseInt(c.curCSS(b,"top",!0),10)||0,h=parseInt(c.curCSS(b,
"left",!0),10)||0,g={top:a.top-g.top+f,left:a.left-g.left+h};"using"in a?a.using.call(b,g):d.css(g)},c.fn.offset=function(b){var a=this[0];return!a||!a.ownerDocument?null:b?c.isFunction(b)?this.each(function(a){c(this).offset(b.call(this,a,c(this).offset()))}):this.each(function(){c.offset.setOffset(this,b)}):o.call(this)});c.curCSS||(c.curCSS=c.css)})(jQuery);;
;
/* module-key = 'com.atlassian.auiplugin:jquery-ui-interactions', location = 'node_modules/@atlassian/aui/src/js-vendor/jquery/jquery-ui/jquery.ui.droppable.js' */
(function(d){d.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var a=this.options,b=a.accept;this.isover=0;this.isout=1;this.accept=d.isFunction(b)?b:function(a){return a.is(b)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};d.ui.ddmanager.droppables[a.scope]=d.ui.ddmanager.droppables[a.scope]||[];d.ui.ddmanager.droppables[a.scope].push(this);
a.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var a=d.ui.ddmanager.droppables[this.options.scope],b=0;b<a.length;b++)a[b]==this&&a.splice(b,1);this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable");return this},_setOption:function(a,b){"accept"==a&&(this.accept=d.isFunction(b)?b:function(a){return a.is(b)});d.Widget.prototype._setOption.apply(this,arguments)},_activate:function(a){var b=d.ui.ddmanager.current;this.options.activeClass&&
this.element.addClass(this.options.activeClass);b&&this._trigger("activate",a,this.ui(b))},_deactivate:function(a){var b=d.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);b&&this._trigger("deactivate",a,this.ui(b))},_over:function(a){var b=d.ui.ddmanager.current;if(b&&(b.currentItem||b.element)[0]!=this.element[0])if(this.accept.call(this.element[0],b.currentItem||b.element))this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",
a,this.ui(b))},_out:function(a){var b=d.ui.ddmanager.current;if(b&&(b.currentItem||b.element)[0]!=this.element[0])if(this.accept.call(this.element[0],b.currentItem||b.element))this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",a,this.ui(b))},_drop:function(a,b){var c=b||d.ui.ddmanager.current;if(!c||(c.currentItem||c.element)[0]==this.element[0])return!1;var f=!1;this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var a=d.data(this,
"droppable");if(a.options.greedy&&!a.options.disabled&&a.options.scope==c.options.scope&&a.accept.call(a.element[0],c.currentItem||c.element)&&d.ui.intersect(c,d.extend(a,{offset:a.element.offset()}),a.options.tolerance))return f=!0,!1});return f?!1:this.accept.call(this.element[0],c.currentItem||c.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",a,this.ui(c)),this.element):
!1},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}});d.extend(d.ui.droppable,{version:"1.8.24"});d.ui.intersect=function(a,b,c){if(!b.offset)return!1;var f=(a.positionAbs||a.position.absolute).left,g=f+a.helperProportions.width,e=(a.positionAbs||a.position.absolute).top,h=e+a.helperProportions.height,i=b.offset.left,k=i+b.proportions.width,j=b.offset.top,l=j+b.proportions.height;switch(c){case "fit":return i<=f&&g<=k&&j<=e&&h<=l;
case "intersect":return i<f+a.helperProportions.width/2&&g-a.helperProportions.width/2<k&&j<e+a.helperProportions.height/2&&h-a.helperProportions.height/2<l;case "pointer":return d.ui.isOver((a.positionAbs||a.position.absolute).top+(a.clickOffset||a.offset.click).top,(a.positionAbs||a.position.absolute).left+(a.clickOffset||a.offset.click).left,j,i,b.proportions.height,b.proportions.width);case "touch":return(e>=j&&e<=l||h>=j&&h<=l||e<j&&h>l)&&(f>=i&&f<=k||g>=i&&g<=k||f<i&&g>k);default:return!1}};
d.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(a,b){var c=d.ui.ddmanager.droppables[a.options.scope]||[],f=b?b.type:null,g=(a.currentItem||a.element).find(":data(droppable)").andSelf(),e=0;a:for(;e<c.length;e++)if(!(c[e].options.disabled||a&&!c[e].accept.call(c[e].element[0],a.currentItem||a.element))){for(var h=0;h<g.length;h++)if(g[h]==c[e].element[0]){c[e].proportions.height=0;continue a}c[e].visible="none"!=c[e].element.css("display");c[e].visible&&("mousedown"==
f&&c[e]._activate.call(c[e],b),c[e].offset=c[e].element.offset(),c[e].proportions={width:c[e].element[0].offsetWidth,height:c[e].element[0].offsetHeight})}},drop:function(a,b){var c=!1;d.each(d.ui.ddmanager.droppables[a.options.scope]||[],function(){if(this.options&&(!this.options.disabled&&(this.visible&&d.ui.intersect(a,this,this.options.tolerance))&&(c=this._drop.call(this,b)||c),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],a.currentItem||a.element)))this.isout=1,this.isover=
0,this._deactivate.call(this,b)});return c},dragStart:function(a,b){a.element.parents(":not(body,html)").bind("scroll.droppable",function(){a.options.refreshPositions||d.ui.ddmanager.prepareOffsets(a,b)})},drag:function(a,b){a.options.refreshPositions&&d.ui.ddmanager.prepareOffsets(a,b);d.each(d.ui.ddmanager.droppables[a.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var c=d.ui.intersect(a,this,this.options.tolerance);if(c=!c&&1==this.isover?"isout":c&&0==
this.isover?"isover":null){var f;if(this.options.greedy){var g=this.options.scope,e=this.element.parents(":data(droppable)").filter(function(){return d.data(this,"droppable").options.scope===g});e.length&&(f=d.data(e[0],"droppable"),f.greedyChild="isover"==c?1:0)}f&&"isover"==c&&(f.isover=0,f.isout=1,f._out.call(f,b));this[c]=1;this["isout"==c?"isover":"isout"]=0;this["isover"==c?"_over":"_out"].call(this,b);f&&"isout"==c&&(f.isout=0,f.isover=1,f._over.call(f,b))}}})},dragStop:function(a,b){a.element.parents(":not(body,html)").unbind("scroll.droppable");
a.options.refreshPositions||d.ui.ddmanager.prepareOffsets(a,b)}}})(jQuery);;
;
/* module-key = 'com.atlassian.auiplugin:jquery-ui-interactions', location = 'node_modules/@atlassian/aui/src/js-vendor/jquery/jquery-ui/jquery.ui.resizable.js' */
(function(e){e.widget("ui.resizable",e.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1E3},_create:function(){var b=this,a=this.options;this.element.addClass("ui-resizable");e.extend(this,{_aspectRatio:!!a.aspectRatio,aspectRatio:a.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],
_helper:a.helper||a.ghost||a.animate?a.helper||"ui-resizable-helper":null});this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=
!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,
display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize());this.handles=a.handles||(!e(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"});if(this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var c=this.handles.split(",");this.handles=
{};for(var d=0;d<c.length;d++){var f=e.trim(c[d]),g=e('<div class="ui-resizable-handle ui-resizable-'+f+'"></div>');g.css({zIndex:a.zIndex});"se"==f&&g.addClass("ui-icon ui-icon-gripsmall-diagonal-se");this.handles[f]=".ui-resizable-"+f;this.element.append(g)}}this._renderAxis=function(a){var a=a||this.element,b;for(b in this.handles){this.handles[b].constructor==String&&(this.handles[b]=e(this.handles[b],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var c=
e(this.handles[b],this.element),d=0,d=/sw|ne|nw|se|n|s/.test(b)?c.outerHeight():c.outerWidth(),c=["padding",/ne|nw|n/.test(b)?"Top":/se|sw|s/.test(b)?"Bottom":/^e$/.test(b)?"Right":"Left"].join("");a.css(c,d);this._proportionallyResize()}e(this.handles[b])}};this._renderAxis(this.element);this._handles=e(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!b.resizing){if(this.className)var a=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);b.axis=
a&&a[1]?a[1]:"se"}});a.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").hover(function(){if(!a.disabled){e(this).removeClass("ui-resizable-autohide");b._handles.show()}},function(){if(!a.disabled&&!b.resizing){e(this).addClass("ui-resizable-autohide");b._handles.hide()}}));this._mouseInit()},destroy:function(){this._mouseDestroy();var b=function(a){e(a).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};
if(this.elementIsWrapper){b(this.element);var a=this.element;a.after(this.originalElement.css({position:a.css("position"),width:a.outerWidth(),height:a.outerHeight(),top:a.css("top"),left:a.css("left")})).remove()}this.originalElement.css("resize",this.originalResizeStyle);b(this.originalElement);return this},_mouseCapture:function(b){var a=!1,c;for(c in this.handles)e(this.handles[c])[0]==b.target&&(a=!0);return!this.options.disabled&&a},_mouseStart:function(b){var a=this.options,c=this.element.position(),
d=this.element;this.resizing=!0;this.documentScroll={top:e(document).scrollTop(),left:e(document).scrollLeft()};(d.is(".ui-draggable")||/absolute/.test(d.css("position")))&&d.css({position:"absolute",top:c.top,left:c.left});this._renderProxy();var c=j(this.helper.css("left")),f=j(this.helper.css("top"));a.containment&&(c+=e(a.containment).scrollLeft()||0,f+=e(a.containment).scrollTop()||0);this.offset=this.helper.offset();this.position={left:c,top:f};this.size=this._helper?{width:d.outerWidth(),height:d.outerHeight()}:
{width:d.width(),height:d.height()};this.originalSize=this._helper?{width:d.outerWidth(),height:d.outerHeight()}:{width:d.width(),height:d.height()};this.originalPosition={left:c,top:f};this.sizeDiff={width:d.outerWidth()-d.width(),height:d.outerHeight()-d.height()};this.originalMousePosition={left:b.pageX,top:b.pageY};this.aspectRatio="number"==typeof a.aspectRatio?a.aspectRatio:this.originalSize.width/this.originalSize.height||1;a=e(".ui-resizable-"+this.axis).css("cursor");e("body").css("cursor",
"auto"==a?this.axis+"-resize":a);d.addClass("ui-resizable-resizing");this._propagate("start",b);return!0},_mouseDrag:function(b){var a=this.helper,c=this.originalMousePosition,d=this._change[this.axis];if(!d)return!1;c=d.apply(this,[b,b.pageX-c.left||0,b.pageY-c.top||0]);this._updateVirtualBoundaries(b.shiftKey);if(this._aspectRatio||b.shiftKey)c=this._updateRatio(c,b);c=this._respectSize(c,b);this._propagate("resize",b);a.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+
"px",height:this.size.height+"px"});!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize();this._updateCache(c);this._trigger("resize",b,this.ui());return!1},_mouseStop:function(b){this.resizing=!1;var a=this.options;if(this._helper){var c=this._proportionallyResizeElements,d=c.length&&/textarea/i.test(c[0].nodeName),c=d&&e.ui.hasScroll(c[0],"left")?0:this.sizeDiff.height,d=d?0:this.sizeDiff.width,d={width:this.helper.width()-d,height:this.helper.height()-c},c=parseInt(this.element.css("left"),
10)+(this.position.left-this.originalPosition.left)||null,f=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||null;a.animate||this.element.css(e.extend(d,{top:f,left:c}));this.helper.height(this.size.height);this.helper.width(this.size.width);this._helper&&!a.animate&&this._proportionallyResize()}e("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",b);this._helper&&this.helper.remove();return!1},_updateVirtualBoundaries:function(b){var a=
this.options,c,d,e,a={minWidth:i(a.minWidth)?a.minWidth:0,maxWidth:i(a.maxWidth)?a.maxWidth:Infinity,minHeight:i(a.minHeight)?a.minHeight:0,maxHeight:i(a.maxHeight)?a.maxHeight:Infinity};if(this._aspectRatio||b)if(b=a.minHeight*this.aspectRatio,d=a.minWidth/this.aspectRatio,c=a.maxHeight*this.aspectRatio,e=a.maxWidth/this.aspectRatio,b>a.minWidth&&(a.minWidth=b),d>a.minHeight&&(a.minHeight=d),c<a.maxWidth&&(a.maxWidth=c),e<a.maxHeight)a.maxHeight=e;this._vBoundaries=a},_updateCache:function(b){this.offset=
this.helper.offset();i(b.left)&&(this.position.left=b.left);i(b.top)&&(this.position.top=b.top);i(b.height)&&(this.size.height=b.height);i(b.width)&&(this.size.width=b.width)},_updateRatio:function(b){var a=this.position,c=this.size,d=this.axis;i(b.height)?b.width=b.height*this.aspectRatio:i(b.width)&&(b.height=b.width/this.aspectRatio);"sw"==d&&(b.left=a.left+(c.width-b.width),b.top=null);"nw"==d&&(b.top=a.top+(c.height-b.height),b.left=a.left+(c.width-b.width));return b},_respectSize:function(b){var a=
this._vBoundaries,c=this.axis,d=i(b.width)&&a.maxWidth&&a.maxWidth<b.width,e=i(b.height)&&a.maxHeight&&a.maxHeight<b.height,g=i(b.width)&&a.minWidth&&a.minWidth>b.width,h=i(b.height)&&a.minHeight&&a.minHeight>b.height;g&&(b.width=a.minWidth);h&&(b.height=a.minHeight);d&&(b.width=a.maxWidth);e&&(b.height=a.maxHeight);var k=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,m=/sw|nw|w/.test(c),c=/nw|ne|n/.test(c);g&&m&&(b.left=k-a.minWidth);d&&m&&(b.left=k-a.maxWidth);
h&&c&&(b.top=l-a.minHeight);e&&c&&(b.top=l-a.maxHeight);(a=!b.width&&!b.height)&&!b.left&&b.top?b.top=null:a&&(!b.top&&b.left)&&(b.left=null);return b},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var b=this.helper||this.element,a=0;a<this._proportionallyResizeElements.length;a++){var c=this._proportionallyResizeElements[a];if(!this.borderDif){var d=[c.css("borderTopWidth"),c.css("borderRightWidth"),c.css("borderBottomWidth"),c.css("borderLeftWidth")],f=[c.css("paddingTop"),
c.css("paddingRight"),c.css("paddingBottom"),c.css("paddingLeft")];this.borderDif=e.map(d,function(a,b){var c=parseInt(a,10)||0,d=parseInt(f[b],10)||0;return c+d})}if(!e.browser.msie||!e(b).is(":hidden")&&!e(b).parents(":hidden").length)c.css({height:b.height()-this.borderDif[0]-this.borderDif[2]||0,width:b.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var b=this.options;this.elementOffset=this.element.offset();if(this._helper){this.helper=this.helper||e('<div style="overflow:hidden;"></div>');
var a=e.browser.msie&&7>e.browser.version,c=a?1:0,a=a?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+a,height:this.element.outerHeight()+a,position:"absolute",left:this.elementOffset.left-c+"px",top:this.elementOffset.top-c+"px",zIndex:++b.zIndex});this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(b,a){return{width:this.originalSize.width+a}},w:function(b,a){return{left:this.originalPosition.left+a,width:this.originalSize.width-
a}},n:function(b,a,c){return{top:this.originalPosition.top+c,height:this.originalSize.height-c}},s:function(b,a,c){return{height:this.originalSize.height+c}},se:function(b,a,c){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,a,c]))},sw:function(b,a,c){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,a,c]))},ne:function(b,a,c){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,a,c]))},nw:function(b,a,
c){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,a,c]))}},_propagate:function(b,a){e.ui.plugin.call(this,b,[a,this.ui()]);"resize"!=b&&this._trigger(b,a,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});e.extend(e.ui.resizable,{version:"1.8.24"});e.ui.plugin.add("resizable","alsoResize",
{start:function(){var b=e(this).data("resizable").options,a=function(a){e(a).each(function(){var a=e(this);a.data("resizable-alsoresize",{width:parseInt(a.width(),10),height:parseInt(a.height(),10),left:parseInt(a.css("left"),10),top:parseInt(a.css("top"),10)})})};"object"==typeof b.alsoResize&&!b.alsoResize.parentNode?b.alsoResize.length?(b.alsoResize=b.alsoResize[0],a(b.alsoResize)):e.each(b.alsoResize,function(b){a(b)}):a(b.alsoResize)},resize:function(b,a){var c=e(this).data("resizable"),d=c.options,
f=c.originalSize,g=c.originalPosition,h={height:c.size.height-f.height||0,width:c.size.width-f.width||0,top:c.position.top-g.top||0,left:c.position.left-g.left||0},i=function(b,c){e(b).each(function(){var b=e(this),d=e(this).data("resizable-alsoresize"),f={},g=c&&c.length?c:b.parents(a.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(g,function(a,b){var c=(d[b]||0)+(h[b]||0);c&&0<=c&&(f[b]=c||null)});b.css(f)})};"object"==typeof d.alsoResize&&!d.alsoResize.nodeType?
e.each(d.alsoResize,function(a,b){i(a,b)}):i(d.alsoResize)},stop:function(){e(this).removeData("resizable-alsoresize")}});e.ui.plugin.add("resizable","animate",{stop:function(b){var a=e(this).data("resizable"),c=a.options,d=a._proportionallyResizeElements,f=d.length&&/textarea/i.test(d[0].nodeName),g=f&&e.ui.hasScroll(d[0],"left")?0:a.sizeDiff.height,f={width:a.size.width-(f?0:a.sizeDiff.width),height:a.size.height-g},g=parseInt(a.element.css("left"),10)+(a.position.left-a.originalPosition.left)||
null,h=parseInt(a.element.css("top"),10)+(a.position.top-a.originalPosition.top)||null;a.element.animate(e.extend(f,h&&g?{top:h,left:g}:{}),{duration:c.animateDuration,easing:c.animateEasing,step:function(){var c={width:parseInt(a.element.css("width"),10),height:parseInt(a.element.css("height"),10),top:parseInt(a.element.css("top"),10),left:parseInt(a.element.css("left"),10)};d&&d.length&&e(d[0]).css({width:c.width,height:c.height});a._updateCache(c);a._propagate("resize",b)}})}});e.ui.plugin.add("resizable",
"containment",{start:function(){var b=e(this).data("resizable"),a=b.element,c=b.options.containment;if(a=c instanceof e?c.get(0):/parent/.test(c)?a.parent().get(0):c)if(b.containerElement=e(a),/document/.test(c)||c==document)b.containerOffset={left:0,top:0},b.containerPosition={left:0,top:0},b.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight};else{var d=e(a),f=[];e(["Top","Right","Left","Bottom"]).each(function(a,
b){f[a]=j(d.css("padding"+b))});b.containerOffset=d.offset();b.containerPosition=d.position();b.containerSize={height:d.innerHeight()-f[3],width:d.innerWidth()-f[1]};var c=b.containerOffset,g=b.containerSize.height,h=b.containerSize.width,h=e.ui.hasScroll(a,"left")?a.scrollWidth:h,g=e.ui.hasScroll(a)?a.scrollHeight:g;b.parentData={element:a,left:c.left,top:c.top,width:h,height:g}}},resize:function(b){var a=e(this).data("resizable"),c=a.options,d=a.containerOffset,f=a.position,b=a._aspectRatio||b.shiftKey,
g={top:0,left:0},h=a.containerElement;h[0]!=document&&/static/.test(h.css("position"))&&(g=d);if(f.left<(a._helper?d.left:0))a.size.width+=a._helper?a.position.left-d.left:a.position.left-g.left,b&&(a.size.height=a.size.width/a.aspectRatio),a.position.left=c.helper?d.left:0;if(f.top<(a._helper?d.top:0))a.size.height+=a._helper?a.position.top-d.top:a.position.top,b&&(a.size.width=a.size.height*a.aspectRatio),a.position.top=a._helper?d.top:0;a.offset.left=a.parentData.left+a.position.left;a.offset.top=
a.parentData.top+a.position.top;c=Math.abs(a.offset.left-g.left+a.sizeDiff.width);d=Math.abs((a._helper?a.offset.top-g.top:a.offset.top-d.top)+a.sizeDiff.height);f=a.containerElement.get(0)==a.element.parent().get(0);g=/relative|absolute/.test(a.containerElement.css("position"));f&&g&&(c-=a.parentData.left);c+a.size.width>=a.parentData.width&&(a.size.width=a.parentData.width-c,b&&(a.size.height=a.size.width/a.aspectRatio));d+a.size.height>=a.parentData.height&&(a.size.height=a.parentData.height-d,
b&&(a.size.width=a.size.height*a.aspectRatio))},stop:function(){var b=e(this).data("resizable"),a=b.options,c=b.containerOffset,d=b.containerPosition,f=b.containerElement,g=e(b.helper),h=g.offset(),i=g.outerWidth()-b.sizeDiff.width,g=g.outerHeight()-b.sizeDiff.height;b._helper&&(!a.animate&&/relative/.test(f.css("position")))&&e(this).css({left:h.left-d.left-c.left,width:i,height:g});b._helper&&(!a.animate&&/static/.test(f.css("position")))&&e(this).css({left:h.left-d.left-c.left,width:i,height:g})}});
e.ui.plugin.add("resizable","ghost",{start:function(){var b=e(this).data("resizable"),a=b.options,c=b.size;b.ghost=b.originalElement.clone();b.ghost.css({opacity:0.25,display:"block",position:"relative",height:c.height,width:c.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof a.ghost?a.ghost:"");b.ghost.appendTo(b.helper)},resize:function(){var b=e(this).data("resizable");b.ghost&&b.ghost.css({position:"relative",height:b.size.height,width:b.size.width})},stop:function(){var b=
e(this).data("resizable");b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}});e.ui.plugin.add("resizable","grid",{resize:function(){var b=e(this).data("resizable"),a=b.options,c=b.size,d=b.originalSize,f=b.originalPosition,g=b.axis;a.grid="number"==typeof a.grid?[a.grid,a.grid]:a.grid;var h=Math.round((c.width-d.width)/(a.grid[0]||1))*(a.grid[0]||1),a=Math.round((c.height-d.height)/(a.grid[1]||1))*(a.grid[1]||1);/^(se|s|e)$/.test(g)?(b.size.width=d.width+h,b.size.height=d.height+a):
/^(ne)$/.test(g)?(b.size.width=d.width+h,b.size.height=d.height+a,b.position.top=f.top-a):(/^(sw)$/.test(g)?(b.size.width=d.width+h,b.size.height=d.height+a):(b.size.width=d.width+h,b.size.height=d.height+a,b.position.top=f.top-a),b.position.left=f.left-h)}});var j=function(b){return parseInt(b,10)||0},i=function(b){return!isNaN(parseInt(b,10))}})(jQuery);;
;
/* module-key = 'com.atlassian.auiplugin:jquery-ui-interactions', location = 'node_modules/@atlassian/aui/src/js-vendor/jquery/jquery-ui/jquery.ui.selectable.js' */
(function(e){e.widget("ui.selectable",e.ui.mouse,{options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var b=this;this.element.addClass("ui-selectable");this.dragged=!1;var f;this.refresh=function(){f=e(b.options.filter,b.element[0]);f.addClass("ui-selectee");f.each(function(){var b=e(this),c=b.offset();e.data(this,"selectable-item",{element:this,$element:b,left:c.left,top:c.top,right:c.left+b.outerWidth(),bottom:c.top+b.outerHeight(),startselected:!1,
selected:b.hasClass("ui-selected"),selecting:b.hasClass("ui-selecting"),unselecting:b.hasClass("ui-unselecting")})})};this.refresh();this.selectees=f.addClass("ui-selectee");this._mouseInit();this.helper=e("<div class='ui-selectable-helper'></div>")},destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable");this._mouseDestroy();return this},_mouseStart:function(b){var f=
this;this.opos=[b.pageX,b.pageY];if(!this.options.disabled){var d=this.options;this.selectees=e(d.filter,this.element[0]);this._trigger("start",b);e(d.appendTo).append(this.helper);this.helper.css({left:b.clientX,top:b.clientY,width:0,height:0});d.autoRefresh&&this.refresh();this.selectees.filter(".ui-selected").each(function(){var c=e.data(this,"selectable-item");c.startselected=!0;!b.metaKey&&!b.ctrlKey&&(c.$element.removeClass("ui-selected"),c.selected=!1,c.$element.addClass("ui-unselecting"),
c.unselecting=!0,f._trigger("unselecting",b,{unselecting:c.element}))});e(b.target).parents().andSelf().each(function(){var c=e.data(this,"selectable-item");if(c){var d=!b.metaKey&&!b.ctrlKey||!c.$element.hasClass("ui-selected");c.$element.removeClass(d?"ui-unselecting":"ui-selected").addClass(d?"ui-selecting":"ui-unselecting");c.unselecting=!d;c.selecting=d;(c.selected=d)?f._trigger("selecting",b,{selecting:c.element}):f._trigger("unselecting",b,{unselecting:c.element});return!1}})}},_mouseDrag:function(b){var f=
this;this.dragged=!0;if(!this.options.disabled){var d=this.options,c=this.opos[0],g=this.opos[1],i=b.pageX,j=b.pageY;if(c>i)var h=i,i=c,c=h;g>j&&(h=j,j=g,g=h);this.helper.css({left:c,top:g,width:i-c,height:j-g});this.selectees.each(function(){var a=e.data(this,"selectable-item");if(a&&a.element!=f.element[0]){var h=false;d.tolerance=="touch"?h=!(a.left>i||a.right<c||a.top>j||a.bottom<g):d.tolerance=="fit"&&(h=a.left>c&&a.right<i&&a.top>g&&a.bottom<j);if(h){if(a.selected){a.$element.removeClass("ui-selected");
a.selected=false}if(a.unselecting){a.$element.removeClass("ui-unselecting");a.unselecting=false}if(!a.selecting){a.$element.addClass("ui-selecting");a.selecting=true;f._trigger("selecting",b,{selecting:a.element})}}else{if(a.selecting)if((b.metaKey||b.ctrlKey)&&a.startselected){a.$element.removeClass("ui-selecting");a.selecting=false;a.$element.addClass("ui-selected");a.selected=true}else{a.$element.removeClass("ui-selecting");a.selecting=false;if(a.startselected){a.$element.addClass("ui-unselecting");
a.unselecting=true}f._trigger("unselecting",b,{unselecting:a.element})}if(a.selected&&!b.metaKey&&!b.ctrlKey&&!a.startselected){a.$element.removeClass("ui-selected");a.selected=false;a.$element.addClass("ui-unselecting");a.unselecting=true;f._trigger("unselecting",b,{unselecting:a.element})}}}});return!1}},_mouseStop:function(b){var f=this;this.dragged=!1;e(".ui-unselecting",this.element[0]).each(function(){var d=e.data(this,"selectable-item");d.$element.removeClass("ui-unselecting");d.unselecting=
!1;d.startselected=!1;f._trigger("unselected",b,{unselected:d.element})});e(".ui-selecting",this.element[0]).each(function(){var d=e.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected");d.selecting=!1;d.selected=!0;d.startselected=!0;f._trigger("selected",b,{selected:d.element})});this._trigger("stop",b);this.helper.remove();return!1}});e.extend(e.ui.selectable,{version:"1.8.24"})})(jQuery);;
;
/* module-key = 'com.atlassian.auiplugin:jquery-ui-widgets', location = 'node_modules/@atlassian/aui/src/js-vendor/jquery/jquery-ui/jquery.ui.accordion.js' */
(function(d){d.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:!0,clearStyle:!1,collapsible:!1,event:"click",fillSpace:!1,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var a=this,b=a.options;a.running=0;a.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix");
a.headers=a.element.find(b.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){b.disabled||d(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){b.disabled||d(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){b.disabled||d(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){b.disabled||d(this).removeClass("ui-state-focus")});a.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom");
if(b.navigation){var c=a.element.find("a").filter(b.navigationFilter).eq(0);if(c.length){var f=c.closest(".ui-accordion-header");a.active=f.length?f:c.closest(".ui-accordion-content").prev()}}a.active=a._findActive(a.active||b.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top");a.active.next().addClass("ui-accordion-content-active");a._createIcons();a.resize();a.element.attr("role","tablist");a.headers.attr("role","tab").bind("keydown.accordion",
function(b){return a._keydown(b)}).next().attr("role","tabpanel");a.headers.not(a.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide();a.active.length?a.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}):a.headers.eq(0).attr("tabIndex",0);d.browser.safari||a.headers.find("a").attr("tabIndex",-1);b.event&&a.headers.bind(b.event.split(" ").join(".accordion ")+".accordion",function(b){a._clickHandler.call(a,b,this);b.preventDefault()})},_createIcons:function(){var a=
this.options;a.icons&&(d("<span></span>").addClass("ui-icon "+a.icons.header).prependTo(this.headers),this.active.children(".ui-icon").toggleClass(a.icons.header).toggleClass(a.icons.headerSelected),this.element.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.children(".ui-icon").remove();this.element.removeClass("ui-accordion-icons")},destroy:function(){var a=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex");
this.headers.find("a").removeAttr("tabIndex");this._destroyIcons();var b=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");(a.autoHeight||a.fillHeight)&&b.css("height","");return d.Widget.prototype.destroy.call(this)},_setOption:function(a,b){d.Widget.prototype._setOption.apply(this,arguments);"active"==a&&this.activate(b);"icons"==a&&(this._destroyIcons(),
b&&this._createIcons());if("disabled"==a)this.headers.add(this.headers.next())[b?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")},_keydown:function(a){if(!this.options.disabled&&!a.altKey&&!a.ctrlKey){var b=d.ui.keyCode,c=this.headers.length,f=this.headers.index(a.target),g=!1;switch(a.keyCode){case b.RIGHT:case b.DOWN:g=this.headers[(f+1)%c];break;case b.LEFT:case b.UP:g=this.headers[(f-1+c)%c];break;case b.SPACE:case b.ENTER:this._clickHandler({target:a.target},a.target),a.preventDefault()}return g?
(d(a.target).attr("tabIndex",-1),d(g).attr("tabIndex",0),g.focus(),!1):!0}},resize:function(){var a=this.options,b;if(a.fillSpace){if(d.browser.msie){var c=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}b=this.element.parent().height();d.browser.msie&&this.element.parent().css("overflow",c);this.headers.each(function(){b-=d(this).outerHeight(!0)});this.headers.next().each(function(){d(this).height(Math.max(0,b-d(this).innerHeight()+d(this).height()))}).css("overflow",
"auto")}else a.autoHeight&&(b=0,this.headers.next().each(function(){b=Math.max(b,d(this).height("").height())}).height(b));return this},activate:function(a){this.options.active=a;a=this._findActive(a)[0];this._clickHandler({target:a},a);return this},_findActive:function(a){return a?"number"===typeof a?this.headers.filter(":eq("+a+")"):this.headers.not(this.headers.not(a)):!1===a?d([]):this.headers.filter(":eq(0)")},_clickHandler:function(a,b){var c=this.options;if(!c.disabled)if(a.target){var f=d(a.currentTarget||
b),g=f[0]===this.active[0];c.active=c.collapsible&&g?!1:this.headers.index(f);if(!(this.running||!c.collapsible&&g)){var i=this.active,e=f.next(),h=this.active.next(),k={options:c,newHeader:g&&c.collapsible?d([]):f,oldHeader:this.active,newContent:g&&c.collapsible?d([]):e,oldContent:h},j=this.headers.index(this.active[0])>this.headers.index(f[0]);this.active=g?d([]):f;this._toggle(e,h,k,g,j);i.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(c.icons.headerSelected).addClass(c.icons.header);
g||(f.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(c.icons.header).addClass(c.icons.headerSelected),f.next().addClass("ui-accordion-content-active"))}}else if(c.collapsible){this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(c.icons.headerSelected).addClass(c.icons.header);this.active.next().addClass("ui-accordion-content-active");var h=this.active.next(),
k={options:c,newHeader:d([]),oldHeader:c.active,newContent:d([]),oldContent:h},e=this.active=d([]);this._toggle(e,h,k)}},_toggle:function(a,b,c,f,g){var i=this,e=i.options;i.toShow=a;i.toHide=b;i.data=c;var h=function(){if(i)return i._completed.apply(i,arguments)};i._trigger("changestart",null,i.data);i.running=0===b.size()?a.size():b.size();if(e.animated){c={};c=e.collapsible&&f?{toShow:d([]),toHide:b,complete:h,down:g,autoHeight:e.autoHeight||e.fillSpace}:{toShow:a,toHide:b,complete:h,down:g,autoHeight:e.autoHeight||
e.fillSpace};e.proxied||(e.proxied=e.animated);e.proxiedDuration||(e.proxiedDuration=e.duration);e.animated=d.isFunction(e.proxied)?e.proxied(c):e.proxied;e.duration=d.isFunction(e.proxiedDuration)?e.proxiedDuration(c):e.proxiedDuration;var f=d.ui.accordion.animations,k=e.duration,j=e.animated;j&&(!f[j]&&!d.easing[j])&&(j="slide");f[j]||(f[j]=function(a){this.slide(a,{easing:j,duration:k||700})});f[j](c)}else e.collapsible&&f?a.toggle():(b.hide(),a.show()),h(!0);b.prev().attr({"aria-expanded":"false",
"aria-selected":"false",tabIndex:-1}).blur();a.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(a){this.running=a?0:--this.running;this.running||(this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""}),this.toHide.removeClass("ui-accordion-content-active"),this.toHide.length&&(this.toHide.parent()[0].className=this.toHide.parent()[0].className),this._trigger("change",null,this.data))}});d.extend(d.ui.accordion,{version:"1.8.24",
animations:{slide:function(a,b){a=d.extend({easing:"swing",duration:300},a,b);if(a.toHide.size())if(a.toShow.size()){var c=a.toShow.css("overflow"),f=0,g={},i={},e,h=a.toShow;e=h[0].style.width;h.width(h.parent().width()-parseFloat(h.css("paddingLeft"))-parseFloat(h.css("paddingRight"))-(parseFloat(h.css("borderLeftWidth"))||0)-(parseFloat(h.css("borderRightWidth"))||0));d.each(["height","paddingTop","paddingBottom"],function(b,c){i[c]="hide";var e=(""+d.css(a.toShow[0],c)).match(/^([\d+-.]+)(.*)$/);
g[c]={value:e[1],unit:e[2]||"px"}});a.toShow.css({height:0,overflow:"hidden"}).show();a.toHide.filter(":hidden").each(a.complete).end().filter(":visible").animate(i,{step:function(b,c){"height"==c.prop&&(f=0===c.end-c.start?0:(c.now-c.start)/(c.end-c.start));a.toShow[0].style[c.prop]=f*g[c.prop].value+g[c.prop].unit},duration:a.duration,easing:a.easing,complete:function(){a.autoHeight||a.toShow.css("height","");a.toShow.css({width:e,overflow:c});a.complete()}})}else a.toHide.animate({height:"hide",
paddingTop:"hide",paddingBottom:"hide"},a);else a.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},a)},bounceslide:function(a){this.slide(a,{easing:a.down?"easeOutBounce":"swing",duration:a.down?1E3:200})}}})})(jQuery);;
;
/* module-key = 'com.atlassian.auiplugin:jquery-ui-widgets', location = 'node_modules/@atlassian/aui/src/js-vendor/jquery/jquery-ui/jquery.ui.autocomplete.js' */
(function(d){var c=0;d.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var a=this,b=this.element[0].ownerDocument,c;this.isMultiLine=this.element.is("textarea");this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(b){if(!a.options.disabled&&
!a.element.propAttr("readOnly")){c=!1;var f=d.ui.keyCode;switch(b.keyCode){case f.PAGE_UP:a._move("previousPage",b);break;case f.PAGE_DOWN:a._move("nextPage",b);break;case f.UP:a._keyEvent("previous",b);break;case f.DOWN:a._keyEvent("next",b);break;case f.ENTER:case f.NUMPAD_ENTER:a.menu.active&&(c=!0,b.preventDefault());case f.TAB:if(!a.menu.active)break;a.menu.select(b);break;case f.ESCAPE:a.element.val(a.term);a.close(b);break;default:clearTimeout(a.searching),a.searching=setTimeout(function(){a.term!=
a.element.val()&&(a.selectedItem=null,a.search(null,b))},a.options.delay)}}}).bind("keypress.autocomplete",function(a){c&&(c=!1,a.preventDefault())}).bind("focus.autocomplete",function(){a.options.disabled||(a.selectedItem=null,a.previous=a.element.val())}).bind("blur.autocomplete",function(b){a.options.disabled||(clearTimeout(a.searching),a.closing=setTimeout(function(){a.close(b);a._change(b)},150))});this._initSource();this.menu=d("<ul></ul>").addClass("ui-autocomplete").appendTo(d(this.options.appendTo||
"body",b)[0]).mousedown(function(b){var c=a.menu.element[0];d(b.target).closest(".ui-menu-item").length||setTimeout(function(){d(document).one("mousedown",function(b){b.target!==a.element[0]&&(b.target!==c&&!d.ui.contains(c,b.target))&&a.close()})},1);setTimeout(function(){clearTimeout(a.closing)},13)}).menu({focus:function(b,d){var c=d.item.data("item.autocomplete");!1!==a._trigger("focus",b,{item:c})&&/^key/.test(b.originalEvent.type)&&a.element.val(c.value)},selected:function(c,d){var e=d.item.data("item.autocomplete"),
h=a.previous;a.element[0]!==b.activeElement&&(a.element.focus(),a.previous=h,setTimeout(function(){a.previous=h;a.selectedItem=e},1));!1!==a._trigger("select",c,{item:e})&&a.element.val(e.value);a.term=a.element.val();a.close(c);a.selectedItem=e},blur:function(){a.menu.element.is(":visible")&&a.element.val()!==a.term&&a.element.val(a.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu");d.fn.bgiframe&&this.menu.element.bgiframe();a.beforeunloadHandler=function(){a.element.removeAttr("autocomplete")};
d(window).bind("beforeunload",a.beforeunloadHandler)},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup");this.menu.element.remove();d(window).unbind("beforeunload",this.beforeunloadHandler);d.Widget.prototype.destroy.call(this)},_setOption:function(a,b){d.Widget.prototype._setOption.apply(this,arguments);"source"===a&&this._initSource();"appendTo"===a&&this.menu.element.appendTo(d(b||
"body",this.element[0].ownerDocument)[0]);"disabled"===a&&(b&&this.xhr)&&this.xhr.abort()},_initSource:function(){var a=this,b,c;d.isArray(this.options.source)?(b=this.options.source,this.source=function(a,c){c(d.ui.autocomplete.filter(b,a.term))}):"string"===typeof this.options.source?(c=this.options.source,this.source=function(b,f){a.xhr&&a.xhr.abort();a.xhr=d.ajax({url:c,data:b,dataType:"json",success:function(a){f(a)},error:function(){f([])}})}):this.source=this.options.source},search:function(a,
b){a=null!=a?a:this.element.val();this.term=this.element.val();if(a.length<this.options.minLength)return this.close(b);clearTimeout(this.closing);if(!1!==this._trigger("search",b))return this._search(a)},_search:function(a){this.pending++;this.element.addClass("ui-autocomplete-loading");this.source({term:a},this._response())},_response:function(){var a=this,b=++c;return function(d){b===c&&a.__response(d);a.pending--;a.pending||a.element.removeClass("ui-autocomplete-loading")}},__response:function(a){!this.options.disabled&&
a&&a.length?(a=this._normalize(a),this._suggest(a),this._trigger("open")):this.close()},close:function(a){clearTimeout(this.closing);this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",a))},_change:function(a){this.previous!==this.element.val()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(a){return a.length&&a[0].label&&a[0].value?a:d.map(a,function(a){return"string"===typeof a?{label:a,value:a}:d.extend({label:a.label||
a.value,value:a.value||a.label},a)})},_suggest:function(a){var b=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(b,a);this.menu.deactivate();this.menu.refresh();b.show();this._resizeMenu();b.position(d.extend({of:this.element},this.options.position));this.options.autoFocus&&this.menu.next(new d.Event("mouseover"))},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(a,b){var c=
this;d.each(b,function(b,d){c._renderItem(a,d)})},_renderItem:function(a,b){return d("<li></li>").data("item.autocomplete",b).append(d("<a></a>").text(b.label)).appendTo(a)},_move:function(a,b){if(this.menu.element.is(":visible"))if(this.menu.first()&&/^previous/.test(a)||this.menu.last()&&/^next/.test(a))this.element.val(this.term),this.menu.deactivate();else this.menu[a](b);else this.search(null,b)},widget:function(){return this.menu.element},_keyEvent:function(a,b){if(!this.isMultiLine||this.menu.element.is(":visible"))this._move(a,
b),b.preventDefault()}});d.extend(d.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(a,b){var c=RegExp(d.ui.autocomplete.escapeRegex(b),"i");return d.grep(a,function(a){return c.test(a.label||a.value||a)})}})})(jQuery);
(function(d){d.widget("ui.menu",{_create:function(){var c=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(a){d(a.target).closest(".ui-menu-item a").length&&(a.preventDefault(),c.select(a))});this.refresh()},refresh:function(){var c=this;this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem").children("a").addClass("ui-corner-all").attr("tabindex",
-1).mouseenter(function(a){c.activate(a,d(this).parent())}).mouseleave(function(){c.deactivate()})},activate:function(c,a){this.deactivate();if(this.hasScroll()){var b=a.offset().top-this.element.offset().top,d=this.element.scrollTop(),g=this.element.height();0>b?this.element.scrollTop(d+b):b>=g&&this.element.scrollTop(d+b-g+a.height())}this.active=a.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end();this._trigger("focus",c,{item:a})},deactivate:function(){this.active&&
(this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null)},next:function(c){this.move("next",".ui-menu-item:first",c)},previous:function(c){this.move("prev",".ui-menu-item:last",c)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(c,a,b){this.active?(c=this.active[c+"All"](".ui-menu-item").eq(0),c.length?this.activate(b,
c):this.activate(b,this.element.children(a))):this.activate(b,this.element.children(a))},nextPage:function(c){if(this.hasScroll())if(!this.active||this.last())this.activate(c,this.element.children(".ui-menu-item:first"));else{var a=this.active.offset().top,b=this.element.height(),e=this.element.children(".ui-menu-item").filter(function(){var c=d(this).offset().top-a-b+d(this).height();return 10>c&&-10<c});e.length||(e=this.element.children(".ui-menu-item:last"));this.activate(c,e)}else this.activate(c,
this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(c){if(this.hasScroll())if(!this.active||this.first())this.activate(c,this.element.children(".ui-menu-item:last"));else{var a=this.active.offset().top,b=this.element.height(),e=this.element.children(".ui-menu-item").filter(function(){var c=d(this).offset().top-a+b-d(this).height();return 10>c&&-10<c});e.length||(e=this.element.children(".ui-menu-item:first"));this.activate(c,e)}else this.activate(c,
this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[d.fn.prop?"prop":"attr"]("scrollHeight")},select:function(c){this._trigger("selected",c,{item:this.active})}})})(jQuery);;
;
/* module-key = 'com.atlassian.auiplugin:jquery-ui-widgets', location = 'node_modules/@atlassian/aui/src/js-vendor/jquery/jquery-ui/jquery.ui.button.js' */
(function(b){var g,h,i,e,k=function(){var a=b(this).find(":ui-button");setTimeout(function(){a.button("refresh")},1)},j=function(a){var c=a.name,d=a.form,f=b([]);c&&(f=d?b(d).find("[name='"+c+"']"):b("[name='"+c+"']",a.ownerDocument).filter(function(){return!this.form}));return f};b.widget("ui.button",{options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",k);"boolean"!==typeof this.options.disabled?
this.options.disabled=!!this.element.propAttr("disabled"):this.element.propAttr("disabled",this.options.disabled);this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var a=this,c=this.options,d="checkbox"===this.type||"radio"===this.type,f="ui-state-hover"+(!d?" ui-state-active":"");null===c.label&&(c.label=this.buttonElement.html());this.buttonElement.addClass("ui-button ui-widget ui-state-default ui-corner-all").attr("role","button").bind("mouseenter.button",function(){if(!c.disabled){b(this).addClass("ui-state-hover");
this===g&&b(this).addClass("ui-state-active")}}).bind("mouseleave.button",function(){c.disabled||b(this).removeClass(f)}).bind("click.button",function(a){if(c.disabled){a.preventDefault();a.stopImmediatePropagation()}});this.element.bind("focus.button",function(){a.buttonElement.addClass("ui-state-focus")}).bind("blur.button",function(){a.buttonElement.removeClass("ui-state-focus")});d&&(this.element.bind("change.button",function(){e||a.refresh()}),this.buttonElement.bind("mousedown.button",function(a){if(!c.disabled){e=
false;h=a.pageX;i=a.pageY}}).bind("mouseup.button",function(a){if(!c.disabled&&(h!==a.pageX||i!==a.pageY))e=true}));"checkbox"===this.type?this.buttonElement.bind("click.button",function(){if(c.disabled||e)return false;b(this).toggleClass("ui-state-active");a.buttonElement.attr("aria-pressed",a.element[0].checked)}):"radio"===this.type?this.buttonElement.bind("click.button",function(){if(c.disabled||e)return false;b(this).addClass("ui-state-active");a.buttonElement.attr("aria-pressed","true");var d=
a.element[0];j(d).not(d).map(function(){return b(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown.button",function(){if(c.disabled)return false;b(this).addClass("ui-state-active");g=this;b(document).one("mouseup",function(){g=null})}).bind("mouseup.button",function(){if(c.disabled)return false;b(this).removeClass("ui-state-active")}).bind("keydown.button",function(a){if(c.disabled)return false;(a.keyCode==b.ui.keyCode.SPACE||
a.keyCode==b.ui.keyCode.ENTER)&&b(this).addClass("ui-state-active")}).bind("keyup.button",function(){b(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(a){a.keyCode===b.ui.keyCode.SPACE&&b(this).click()}));this._setOption("disabled",c.disabled);this._resetButton()},_determineButtonType:function(){this.type=this.element.is(":checkbox")?"checkbox":this.element.is(":radio")?"radio":this.element.is("input")?"input":"button";if("checkbox"===this.type||
"radio"===this.type){var a=this.element.parents().filter(":last"),b="label[for='"+this.element.attr("id")+"']";this.buttonElement=a.find(b);this.buttonElement.length||(a=a.length?a.siblings():this.element.siblings(),this.buttonElement=a.filter(b),this.buttonElement.length||(this.buttonElement=a.find(b)));this.element.addClass("ui-helper-hidden-accessible");(a=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active");this.buttonElement.attr("aria-pressed",a)}else this.buttonElement=
this.element},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass("ui-button ui-widget ui-state-default ui-corner-all ui-state-hover ui-state-active  ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only").removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());this.hasTitle||
this.buttonElement.removeAttr("title");b.Widget.prototype.destroy.call(this)},_setOption:function(a,c){b.Widget.prototype._setOption.apply(this,arguments);"disabled"===a?c?this.element.propAttr("disabled",!0):this.element.propAttr("disabled",!1):this._resetButton()},refresh:function(){var a=this.element.is(":disabled");a!==this.options.disabled&&this._setOption("disabled",a);"radio"===this.type?j(this.element[0]).each(function(){b(this).is(":checked")?b(this).button("widget").addClass("ui-state-active").attr("aria-pressed",
"true"):b(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)this.options.label&&this.element.val(this.options.label);else{var a=this.buttonElement.removeClass("ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only"),
c=b("<span></span>",this.element[0].ownerDocument).addClass("ui-button-text").html(this.options.label).appendTo(a.empty()).text(),d=this.options.icons,f=d.primary&&d.secondary,e=[];d.primary||d.secondary?(this.options.text&&e.push("ui-button-text-icon"+(f?"s":d.primary?"-primary":"-secondary")),d.primary&&a.prepend("<span class='ui-button-icon-primary ui-icon "+d.primary+"'></span>"),d.secondary&&a.append("<span class='ui-button-icon-secondary ui-icon "+d.secondary+"'></span>"),this.options.text||
(e.push(f?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||a.attr("title",c))):e.push("ui-button-text-only");a.addClass(e.join(" "))}}});b.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(a,c){"disabled"===a&&this.buttons.button("option",a,c);b.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){var a="rtl"===
this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return b(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(a?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(a?"ui-corner-left":"ui-corner-right").end().end()},destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return b(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy");
b.Widget.prototype.destroy.call(this)}})})(jQuery);;
;
/* module-key = 'com.atlassian.auiplugin:jquery-ui-widgets', location = 'node_modules/@atlassian/aui/src/js-vendor/jquery/jquery-ui/jquery.ui.dialog.js' */
(function(c){var i={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},j={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};c.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(a){var b=c(this).css(a).offset().top;0>b&&c(this).css("top",a.top-b)}},resizable:!0,
show:null,stack:!0,title:"",width:300,zIndex:1E3},_create:function(){this.originalTitle=this.element.attr("title");"string"!==typeof this.originalTitle&&(this.originalTitle="");this.options.title=this.options.title||this.originalTitle;var a=this,b=a.options,d=b.title||"&#160;",e=c.ui.dialog.getTitleId(a.element),f=(a.uiDialog=c("<div></div>")).appendTo(document.body).hide().addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+b.dialogClass).css({zIndex:b.zIndex}).attr("tabIndex",-1).css("outline",
0).keydown(function(d){if(b.closeOnEscape&&!d.isDefaultPrevented()&&d.keyCode&&d.keyCode===c.ui.keyCode.ESCAPE){a.close(d);d.preventDefault()}}).attr({role:"dialog","aria-labelledby":e}).mousedown(function(b){a.moveToTop(false,b)});a.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(f);var h=(a.uiDialogTitlebar=c("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(f),g=c('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role",
"button").hover(function(){g.addClass("ui-state-hover")},function(){g.removeClass("ui-state-hover")}).focus(function(){g.addClass("ui-state-focus")}).blur(function(){g.removeClass("ui-state-focus")}).click(function(b){a.close(b);return false}).appendTo(h);(a.uiDialogTitlebarCloseText=c("<span></span>")).addClass("ui-icon ui-icon-closethick").text(b.closeText).appendTo(g);c("<span></span>").addClass("ui-dialog-title").attr("id",e).html(d).prependTo(h);c.isFunction(b.beforeclose)&&!c.isFunction(b.beforeClose)&&
(b.beforeClose=b.beforeclose);h.find("*").add(h).disableSelection();b.draggable&&c.fn.draggable&&a._makeDraggable();b.resizable&&c.fn.resizable&&a._makeResizable();a._createButtons(b.buttons);a._isOpen=!1;c.fn.bgiframe&&f.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){this.overlay&&this.overlay.destroy();this.uiDialog.hide();this.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body");this.uiDialog.remove();
this.originalTitle&&this.element.attr("title",this.originalTitle);return this},widget:function(){return this.uiDialog},close:function(a){var b=this,d,e;if(!1!==b._trigger("beforeClose",a))return b.overlay&&b.overlay.destroy(),b.uiDialog.unbind("keypress.ui-dialog"),b._isOpen=!1,b.options.hide?b.uiDialog.hide(b.options.hide,function(){b._trigger("close",a)}):(b.uiDialog.hide(),b._trigger("close",a)),c.ui.dialog.overlay.resize(),b.options.modal&&(d=0,c(".ui-dialog").each(function(){if(this!==b.uiDialog[0]){e=
c(this).css("z-index");isNaN(e)||(d=Math.max(d,e))}}),c.ui.dialog.maxZ=d),b},isOpen:function(){return this._isOpen},moveToTop:function(a,b){var d=this.options;if(d.modal&&!a||!d.stack&&!d.modal)return this._trigger("focus",b);d.zIndex>c.ui.dialog.maxZ&&(c.ui.dialog.maxZ=d.zIndex);this.overlay&&(c.ui.dialog.maxZ+=1,this.overlay.$el.css("z-index",c.ui.dialog.overlay.maxZ=c.ui.dialog.maxZ));d={scrollTop:this.element.scrollTop(),scrollLeft:this.element.scrollLeft()};c.ui.dialog.maxZ+=1;this.uiDialog.css("z-index",
c.ui.dialog.maxZ);this.element.attr(d);this._trigger("focus",b);return this},open:function(){if(!this._isOpen){var a=this.options,b=this.uiDialog;this.overlay=a.modal?new c.ui.dialog.overlay(this):null;this._size();this._position(a.position);b.show(a.show);this.moveToTop(!0);a.modal&&b.bind("keydown.ui-dialog",function(a){if(a.keyCode===c.ui.keyCode.TAB){var b=c(":tabbable",this),f=b.filter(":first"),b=b.filter(":last");if(a.target===b[0]&&!a.shiftKey)return f.focus(1),!1;if(a.target===f[0]&&a.shiftKey)return b.focus(1),
!1}});c(this.element.find(":tabbable").get().concat(b.find(".ui-dialog-buttonpane :tabbable").get().concat(b.get()))).eq(0).focus();this._isOpen=!0;this._trigger("open");return this}},_createButtons:function(a){var b=this,d=!1,e=c("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),f=c("<div></div>").addClass("ui-dialog-buttonset").appendTo(e);b.uiDialog.find(".ui-dialog-buttonpane").remove();"object"===typeof a&&null!==a&&c.each(a,function(){return!(d=!0)});d&&(c.each(a,
function(a,d){var d=c.isFunction(d)?{click:d,text:a}:d,e=c('<button type="button"></button>').click(function(){d.click.apply(b.element[0],arguments)}).appendTo(f);c.each(d,function(a,b){if("click"!==a)if(a in e)e[a](b);else e.attr(a,b)});c.fn.button&&e.button()}),e.appendTo(b.uiDialog))},_makeDraggable:function(){function a(a){return{position:a.position,offset:a.offset}}var b=this,d=b.options,e=c(document),f;b.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",
containment:"document",start:function(e,g){f="auto"===d.height?"auto":c(this).height();c(this).height(c(this).height()).addClass("ui-dialog-dragging");b._trigger("dragStart",e,a(g))},drag:function(c,d){b._trigger("drag",c,a(d))},stop:function(h,g){d.position=[g.position.left-e.scrollLeft(),g.position.top-e.scrollTop()];c(this).removeClass("ui-dialog-dragging").height(f);b._trigger("dragStop",h,a(g));c.ui.dialog.overlay.resize()}})},_makeResizable:function(a){function b(a){return{originalPosition:a.originalPosition,
originalSize:a.originalSize,position:a.position,size:a.size}}var a=void 0===a?this.options.resizable:a,d=this,e=d.options,f=d.uiDialog.css("position"),a="string"===typeof a?a:"n,e,s,w,se,sw,ne,nw";d.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:d.element,maxWidth:e.maxWidth,maxHeight:e.maxHeight,minWidth:e.minWidth,minHeight:d._minHeight(),handles:a,start:function(a,e){c(this).addClass("ui-dialog-resizing");d._trigger("resizeStart",a,b(e))},resize:function(a,c){d._trigger("resize",
a,b(c))},stop:function(a,f){c(this).removeClass("ui-dialog-resizing");e.height=c(this).height();e.width=c(this).width();d._trigger("resizeStop",a,b(f));c.ui.dialog.overlay.resize()}}).css("position",f).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(a){var b=[],d=[0,0],e;if(a){if("string"===typeof a||"object"===typeof a&&"0"in a)b=a.split?a.split(" "):
[a[0],a[1]],1===b.length&&(b[1]=b[0]),c.each(["left","top"],function(a,c){+b[a]===b[a]&&(d[a]=b[a],b[a]=c)}),a={my:b.join(" "),at:b.join(" "),offset:d.join(" ")};a=c.extend({},c.ui.dialog.prototype.options.position,a)}else a=c.ui.dialog.prototype.options.position;(e=this.uiDialog.is(":visible"))||this.uiDialog.show();this.uiDialog.css({top:0,left:0}).position(c.extend({of:window},a));e||this.uiDialog.hide()},_setOptions:function(a){var b=this,d={},e=!1;c.each(a,function(a,c){b._setOption(a,c);a in
i&&(e=!0);a in j&&(d[a]=c)});e&&this._size();this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",d)},_setOption:function(a,b){var d=this.uiDialog;switch(a){case "beforeclose":a="beforeClose";break;case "buttons":this._createButtons(b);break;case "closeText":this.uiDialogTitlebarCloseText.text(""+b);break;case "dialogClass":d.removeClass(this.options.dialogClass).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+b);break;case "disabled":b?d.addClass("ui-dialog-disabled"):
d.removeClass("ui-dialog-disabled");break;case "draggable":var e=d.is(":data(draggable)");e&&!b&&d.draggable("destroy");!e&&b&&this._makeDraggable();break;case "position":this._position(b);break;case "resizable":(e=d.is(":data(resizable)"))&&!b&&d.resizable("destroy");e&&"string"===typeof b&&d.resizable("option","handles",b);!e&&!1!==b&&this._makeResizable(b);break;case "title":c(".ui-dialog-title",this.uiDialogTitlebar).html(""+(b||"&#160;"))}c.Widget.prototype._setOption.apply(this,arguments)},
_size:function(){var a=this.options,b,d,e=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0});a.minWidth>a.width&&(a.width=a.minWidth);b=this.uiDialog.css({height:"auto",width:a.width}).height();d=Math.max(0,a.minHeight-b);"auto"===a.height?c.support.minHeight?this.element.css({minHeight:d,height:"auto"}):(this.uiDialog.show(),a=this.element.css("height","auto").height(),e||this.uiDialog.hide(),this.element.height(Math.max(a,d))):this.element.height(Math.max(a.height-
b,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}});c.extend(c.ui.dialog,{version:"1.8.24",uuid:0,maxZ:0,getTitleId:function(a){a=a.attr("id");a||(a=this.uuid+=1);return"ui-dialog-title-"+a},overlay:function(a){this.$el=c.ui.dialog.overlay.create(a)}});c.extend(c.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:c.map("focus mousedown mouseup keydown keypress click".split(" "),function(a){return a+".dialog-overlay"}).join(" "),
create:function(a){0===this.instances.length&&(setTimeout(function(){c.ui.dialog.overlay.instances.length&&c(document).bind(c.ui.dialog.overlay.events,function(a){if(c(a.target).zIndex()<c.ui.dialog.overlay.maxZ)return!1})},1),c(document).bind("keydown.dialog-overlay",function(b){a.options.closeOnEscape&&(!b.isDefaultPrevented()&&b.keyCode&&b.keyCode===c.ui.keyCode.ESCAPE)&&(a.close(b),b.preventDefault())}),c(window).bind("resize.dialog-overlay",c.ui.dialog.overlay.resize));var b=(this.oldInstances.pop()||
c("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});c.fn.bgiframe&&b.bgiframe();this.instances.push(b);return b},destroy:function(a){var b=c.inArray(a,this.instances);-1!=b&&this.oldInstances.push(this.instances.splice(b,1)[0]);0===this.instances.length&&c([document,window]).unbind(".dialog-overlay");a.remove();var d=0;c.each(this.instances,function(){d=Math.max(d,this.css("z-index"))});this.maxZ=d},height:function(){var a,b;return c.browser.msie&&
7>c.browser.version?(a=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),b=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),a<b?c(window).height()+"px":a+"px"):c(document).height()+"px"},width:function(){var a,b;return c.browser.msie?(a=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),b=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),a<b?c(window).width()+"px":a+"px"):c(document).width()+"px"},resize:function(){var a=
c([]);c.each(c.ui.dialog.overlay.instances,function(){a=a.add(this)});a.css({width:0,height:0}).css({width:c.ui.dialog.overlay.width(),height:c.ui.dialog.overlay.height()})}});c.extend(c.ui.dialog.overlay.prototype,{destroy:function(){c.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);;
;
/* module-key = 'com.atlassian.auiplugin:jquery-ui-widgets', location = 'node_modules/@atlassian/aui/src/js-vendor/jquery/jquery-ui/jquery.ui.progressbar.js' */
(function(b){b.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()});this.valueDiv=b("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element);this.oldValue=this._value();this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");
this.valueDiv.remove();b.Widget.prototype.destroy.apply(this,arguments)},value:function(a){if(void 0===a)return this._value();this._setOption("value",a);return this},_setOption:function(a,c){"value"===a&&(this.options.value=c,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete"));b.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var a=this.options.value;"number"!==typeof a&&(a=0);return Math.min(this.options.max,Math.max(this.min,a))},_percentage:function(){return 100*
this._value()/this.options.max},_refreshValue:function(){var a=this.value(),b=this._percentage();this.oldValue!==a&&(this.oldValue=a,this._trigger("change"));this.valueDiv.toggle(a>this.min).toggleClass("ui-corner-right",a===this.options.max).width(b.toFixed(0)+"%");this.element.attr("aria-valuenow",a)}});b.extend(b.ui.progressbar,{version:"1.8.24"})})(jQuery);;
;
/* module-key = 'com.atlassian.auiplugin:jquery-ui-widgets', location = 'node_modules/@atlassian/aui/src/js-vendor/jquery/jquery-ui/jquery.ui.slider.js' */
(function(d){d.widget("ui.slider",d.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var a=this,b=this.options,c=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),f=b.values&&b.values.length||1,e=[];this._mouseSliding=this._keySliding=!1;this._animateOff=!0;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+
this.orientation+" ui-widget ui-widget-content ui-corner-all"+(b.disabled?" ui-slider-disabled ui-disabled":""));this.range=d([]);if(b.range){if(!0===b.range&&(b.values||(b.values=[this._valueMin(),this._valueMin()]),b.values.length&&2!==b.values.length))b.values=[b.values[0],b.values[0]];this.range=d("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===b.range||"max"===b.range?" ui-slider-range-"+b.range:""))}for(var g=c.length;g<f;g+=1)e.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");
this.handles=c.add(d(e.join("")).appendTo(a.element));this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(a){a.preventDefault()}).hover(function(){b.disabled||d(this).addClass("ui-state-hover")},function(){d(this).removeClass("ui-state-hover")}).focus(function(){b.disabled?d(this).blur():(d(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),d(this).addClass("ui-state-focus"))}).blur(function(){d(this).removeClass("ui-state-focus")});this.handles.each(function(a){d(this).data("index.ui-slider-handle",
a)});this.handles.keydown(function(b){var c=d(this).data("index.ui-slider-handle"),e,f,g;if(!a.options.disabled){switch(b.keyCode){case d.ui.keyCode.HOME:case d.ui.keyCode.END:case d.ui.keyCode.PAGE_UP:case d.ui.keyCode.PAGE_DOWN:case d.ui.keyCode.UP:case d.ui.keyCode.RIGHT:case d.ui.keyCode.DOWN:case d.ui.keyCode.LEFT:if(b.preventDefault(),!a._keySliding&&(a._keySliding=!0,d(this).addClass("ui-state-active"),e=a._start(b,c),!1===e))return}g=a.options.step;e=a.options.values&&a.options.values.length?
f=a.values(c):f=a.value();switch(b.keyCode){case d.ui.keyCode.HOME:f=a._valueMin();break;case d.ui.keyCode.END:f=a._valueMax();break;case d.ui.keyCode.PAGE_UP:f=a._trimAlignValue(e+(a._valueMax()-a._valueMin())/5);break;case d.ui.keyCode.PAGE_DOWN:f=a._trimAlignValue(e-(a._valueMax()-a._valueMin())/5);break;case d.ui.keyCode.UP:case d.ui.keyCode.RIGHT:if(e===a._valueMax())return;f=a._trimAlignValue(e+g);break;case d.ui.keyCode.DOWN:case d.ui.keyCode.LEFT:if(e===a._valueMin())return;f=a._trimAlignValue(e-
g)}a._slide(b,c,f)}}).keyup(function(b){var c=d(this).data("index.ui-slider-handle");a._keySliding&&(a._keySliding=!1,a._stop(b,c),a._change(b,c),d(this).removeClass("ui-state-active"))});this._refreshValue();this._animateOff=!1},destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider");this._mouseDestroy();return this},
_mouseCapture:function(a){var b=this.options,c,f,e,g,h;if(b.disabled)return!1;this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();c=this._normValueFromMouse({x:a.pageX,y:a.pageY});f=this._valueMax()-this._valueMin()+1;g=this;this.handles.each(function(b){var a=Math.abs(c-g.values(b));f>a&&(f=a,e=d(this),h=b)});!0===b.range&&this.values(1)===b.min&&(h+=1,e=d(this.handles[h]));if(!1===this._start(a,h))return!1;this._mouseSliding=
!0;g._handleIndex=h;e.addClass("ui-state-active").focus();b=e.offset();this._clickOffset=!d(a.target).parents().andSelf().is(".ui-slider-handle")?{left:0,top:0}:{left:a.pageX-b.left-e.width()/2,top:a.pageY-b.top-e.height()/2-(parseInt(e.css("borderTopWidth"),10)||0)-(parseInt(e.css("borderBottomWidth"),10)||0)+(parseInt(e.css("marginTop"),10)||0)};this.handles.hasClass("ui-state-hover")||this._slide(a,h,c);return this._animateOff=!0},_mouseStart:function(){return!0},_mouseDrag:function(a){var b=this._normValueFromMouse({x:a.pageX,
y:a.pageY});this._slide(a,this._handleIndex,b);return!1},_mouseStop:function(a){this.handles.removeClass("ui-state-active");this._mouseSliding=!1;this._stop(a,this._handleIndex);this._change(a,this._handleIndex);this._clickOffset=this._handleIndex=null;return this._animateOff=!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(a){var b;"horizontal"===this.orientation?(b=this.elementSize.width,a=a.x-this.elementOffset.left-
(this._clickOffset?this._clickOffset.left:0)):(b=this.elementSize.height,a=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0));b=a/b;1<b&&(b=1);0>b&&(b=0);"vertical"===this.orientation&&(b=1-b);a=this._valueMax()-this._valueMin();b=this._valueMin()+b*a;return this._trimAlignValue(b)},_start:function(a,b){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values());return this._trigger("start",
a,c)},_slide:function(a,b,c){var d;if(this.options.values&&this.options.values.length){d=this.values(b?0:1);if(2===this.options.values.length&&!0===this.options.range&&(0===b&&c>d||1===b&&c<d))c=d;c!==this.values(b)&&(d=this.values(),d[b]=c,a=this._trigger("slide",a,{handle:this.handles[b],value:c,values:d}),this.values(b?0:1),!1!==a&&this.values(b,c,!0))}else c!==this.value()&&(a=this._trigger("slide",a,{handle:this.handles[b],value:c}),!1!==a&&this.value(c))},_stop:function(a,b){var c={handle:this.handles[b],
value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values());this._trigger("stop",a,c)},_change:function(a,b){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values());this._trigger("change",a,c)}},value:function(a){if(arguments.length)this.options.value=this._trimAlignValue(a),this._refreshValue(),this._change(null,
0);else return this._value()},values:function(a,b){var c,f,e;if(1<arguments.length)this.options.values[a]=this._trimAlignValue(b),this._refreshValue(),this._change(null,a);else if(arguments.length)if(d.isArray(arguments[0])){c=this.options.values;f=arguments[0];for(e=0;e<c.length;e+=1)c[e]=this._trimAlignValue(f[e]),this._change(null,e);this._refreshValue()}else return this.options.values&&this.options.values.length?this._values(a):this.value();else return this._values()},_setOption:function(a,b){var c,
f=0;d.isArray(this.options.values)&&(f=this.options.values.length);d.Widget.prototype._setOption.apply(this,arguments);switch(a){case "disabled":b?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case "orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+
this.orientation);this._refreshValue();break;case "value":this._animateOff=!0;this._refreshValue();this._change(null,0);this._animateOff=!1;break;case "values":this._animateOff=!0;this._refreshValue();for(c=0;c<f;c+=1)this._change(null,c);this._animateOff=!1}},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a)},_values:function(a){var b,c;if(arguments.length)return b=this.options.values[a],b=this._trimAlignValue(b);b=this.options.values.slice();for(c=0;c<b.length;c+=1)b[c]=
this._trimAlignValue(b[c]);return b},_trimAlignValue:function(a){if(a<=this._valueMin())return this._valueMin();if(a>=this._valueMax())return this._valueMax();var b=0<this.options.step?this.options.step:1,c=(a-this._valueMin())%b,a=a-c;2*Math.abs(c)>=b&&(a+=0<c?b:-b);return parseFloat(a.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var a=this.options.range,b=this.options,c=this,f=!this._animateOff?b.animate:!1,e,g=
{},h,k,i,j;if(this.options.values&&this.options.values.length)this.handles.each(function(a){e=100*((c.values(a)-c._valueMin())/(c._valueMax()-c._valueMin()));g["horizontal"===c.orientation?"left":"bottom"]=e+"%";d(this).stop(1,1)[f?"animate":"css"](g,b.animate);if(!0===c.options.range)if("horizontal"===c.orientation){if(0===a)c.range.stop(1,1)[f?"animate":"css"]({left:e+"%"},b.animate);if(1===a)c.range[f?"animate":"css"]({width:e-h+"%"},{queue:!1,duration:b.animate})}else{if(0===a)c.range.stop(1,
1)[f?"animate":"css"]({bottom:e+"%"},b.animate);if(1===a)c.range[f?"animate":"css"]({height:e-h+"%"},{queue:!1,duration:b.animate})}h=e});else{k=this.value();i=this._valueMin();j=this._valueMax();e=j!==i?100*((k-i)/(j-i)):0;g["horizontal"===c.orientation?"left":"bottom"]=e+"%";this.handle.stop(1,1)[f?"animate":"css"](g,b.animate);if("min"===a&&"horizontal"===this.orientation)this.range.stop(1,1)[f?"animate":"css"]({width:e+"%"},b.animate);if("max"===a&&"horizontal"===this.orientation)this.range[f?
"animate":"css"]({width:100-e+"%"},{queue:!1,duration:b.animate});if("min"===a&&"vertical"===this.orientation)this.range.stop(1,1)[f?"animate":"css"]({height:e+"%"},b.animate);if("max"===a&&"vertical"===this.orientation)this.range[f?"animate":"css"]({height:100-e+"%"},{queue:!1,duration:b.animate})}}});d.extend(d.ui.slider,{version:"1.8.24"})})(jQuery);;
;
/* module-key = 'com.atlassian.auiplugin:jquery-ui-widgets', location = 'node_modules/@atlassian/aui/src/js-vendor/jquery/jquery-ui/jquery.ui.tabs.js' */
(function(d){var n=0,o=0;d.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(!0)},_setOption:function(a,d){"selected"==a?this.options.collapsible&&d==this.options.selected||this.select(d):
(this.options[a]=d,this._tabify())},_tabId:function(a){return a.title&&a.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+ ++n},_sanitizeSelector:function(a){return a.replace(/:/g,"\\:")},_cookie:function(){var a=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+ ++o);return d.cookie.apply(null,[a].concat(d.makeArray(arguments)))},_ui:function(a,d){return{tab:a,panel:d,index:this.anchors.index(a)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var a=
d(this);a.html(a.data("label.tabs")).removeData("label.tabs")})},_tabify:function(a){function e(b,a){b.css("display","");!d.support.opacity&&a.opacity&&b[0].style.removeAttribute("filter")}var b=this,c=this.options,g=/^#.+/;this.list=this.element.find("ol,ul").eq(0);this.lis=d(" > li:has(a[href])",this.list);this.anchors=this.lis.map(function(){return d("a",this)[0]});this.panels=d([]);this.anchors.each(function(a,e){var h=d(e).attr("href"),f=h.split("#")[0],k;if(f&&(f===location.toString().split("#")[0]||
(k=d("base")[0])&&f===k.href))h=e.hash,e.href=h;g.test(h)?b.panels=b.panels.add(b.element.find(b._sanitizeSelector(h))):h&&"#"!==h?(d.data(e,"href.tabs",h),d.data(e,"load.tabs",h.replace(/#.*$/,"")),h=b._tabId(e),e.href="#"+h,f=b.element.find("#"+h),f.length||(f=d(c.panelTemplate).attr("id",h).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(b.panels[a-1]||b.list),f.data("destroy.tabs",!0)),b.panels=b.panels.add(f)):c.disabled.push(a)});a?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),
this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),void 0===c.selected?(location.hash&&this.anchors.each(function(b,a){if(a.hash==location.hash)return c.selected=b,!1}),"number"!==typeof c.selected&&c.cookie&&(c.selected=parseInt(b._cookie(),10)),"number"!==typeof c.selected&&this.lis.filter(".ui-tabs-selected").length&&(c.selected=
this.lis.index(this.lis.filter(".ui-tabs-selected"))),c.selected=c.selected||(this.lis.length?0:-1)):null===c.selected&&(c.selected=-1),c.selected=0<=c.selected&&this.anchors[c.selected]||0>c.selected?c.selected:0,c.disabled=d.unique(c.disabled.concat(d.map(this.lis.filter(".ui-state-disabled"),function(a){return b.lis.index(a)}))).sort(),-1!=d.inArray(c.selected,c.disabled)&&c.disabled.splice(d.inArray(c.selected,c.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),
0<=c.selected&&this.anchors.length&&(b.element.find(b._sanitizeSelector(b.anchors[c.selected].hash)).removeClass("ui-tabs-hide"),this.lis.eq(c.selected).addClass("ui-tabs-selected ui-state-active"),b.element.queue("tabs",function(){b._trigger("show",null,b._ui(b.anchors[c.selected],b.element.find(b._sanitizeSelector(b.anchors[c.selected].hash))[0]))}),this.load(c.selected)),d(window).bind("unload",function(){b.lis.add(b.anchors).unbind(".tabs");b.lis=b.anchors=b.panels=null})):c.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"));
this.element[c.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible");c.cookie&&this._cookie(c.selected,c.cookie);for(var a=0,f;f=this.lis[a];a++)d(f)[-1!=d.inArray(a,c.disabled)&&!d(f).hasClass("ui-tabs-selected")?"addClass":"removeClass"]("ui-state-disabled");!1===c.cache&&this.anchors.removeData("cache.tabs");this.lis.add(this.anchors).unbind(".tabs");if("mouseover"!==c.event){var k=function(b,a){a.is(":not(.ui-state-disabled)")&&a.addClass("ui-state-"+b)};this.lis.bind("mouseover.tabs",
function(){k("hover",d(this))});this.lis.bind("mouseout.tabs",function(){d(this).removeClass("ui-state-hover")});this.anchors.bind("focus.tabs",function(){k("focus",d(this).closest("li"))});this.anchors.bind("blur.tabs",function(){d(this).closest("li").removeClass("ui-state-focus")})}var j,i;c.fx&&(d.isArray(c.fx)?(j=c.fx[0],i=c.fx[1]):j=i=c.fx);var l=i?function(a,c){d(a).closest("li").addClass("ui-tabs-selected ui-state-active");c.hide().removeClass("ui-tabs-hide").animate(i,i.duration||"normal",
function(){e(c,i);b._trigger("show",null,b._ui(a,c[0]))})}:function(a,c){d(a).closest("li").addClass("ui-tabs-selected ui-state-active");c.removeClass("ui-tabs-hide");b._trigger("show",null,b._ui(a,c[0]))},m=j?function(a,c){c.animate(j,j.duration||"normal",function(){b.lis.removeClass("ui-tabs-selected ui-state-active");c.addClass("ui-tabs-hide");e(c,j);b.element.dequeue("tabs")})}:function(a,c){b.lis.removeClass("ui-tabs-selected ui-state-active");c.addClass("ui-tabs-hide");b.element.dequeue("tabs")};
this.anchors.bind(c.event+".tabs",function(){var a=this,e=d(a).closest("li"),f=b.panels.filter(":not(.ui-tabs-hide)"),g=b.element.find(b._sanitizeSelector(a.hash));if(e.hasClass("ui-tabs-selected")&&!c.collapsible||e.hasClass("ui-state-disabled")||e.hasClass("ui-state-processing")||b.panels.filter(":animated").length||b._trigger("select",null,b._ui(this,g[0]))===false){this.blur();return false}c.selected=b.anchors.index(this);b.abort();if(c.collapsible){if(e.hasClass("ui-tabs-selected")){c.selected=
-1;c.cookie&&b._cookie(c.selected,c.cookie);b.element.queue("tabs",function(){m(a,f)}).dequeue("tabs");this.blur();return false}if(!f.length){c.cookie&&b._cookie(c.selected,c.cookie);b.element.queue("tabs",function(){l(a,g)});b.load(b.anchors.index(this));this.blur();return false}}c.cookie&&b._cookie(c.selected,c.cookie);if(g.length){f.length&&b.element.queue("tabs",function(){m(a,f)});b.element.queue("tabs",function(){l(a,g)});b.load(b.anchors.index(this))}else throw"jQuery UI Tabs: Mismatching fragment identifier.";
d.browser.msie&&this.blur()});this.anchors.bind("click.tabs",function(){return false})},_getIndex:function(a){"string"==typeof a&&(a=this.anchors.index(this.anchors.filter("[href$='"+a+"']")));return a},destroy:function(){var a=this.options;this.abort();this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs");this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");this.anchors.each(function(){var a=
d.data(this,"href.tabs");a&&(this.href=a);var b=d(this).unbind(".tabs");d.each(["href","load","cache"],function(a,d){b.removeData(d+".tabs")})});this.lis.unbind(".tabs").add(this.panels).each(function(){d.data(this,"destroy.tabs")?d(this).remove():d(this).removeClass("ui-state-default ui-corner-top ui-tabs-selected ui-state-active ui-state-hover ui-state-focus ui-state-disabled ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide")});a.cookie&&this._cookie(null,a.cookie);return this},add:function(a,
e,b){void 0===b&&(b=this.anchors.length);var c=this,g=this.options,e=d(g.tabTemplate.replace(/#\{href\}/g,a).replace(/#\{label\}/g,e)),a=!a.indexOf("#")?a.replace("#",""):this._tabId(d("a",e)[0]);e.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);var f=c.element.find("#"+a);f.length||(f=d(g.panelTemplate).attr("id",a).data("destroy.tabs",!0));f.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide");b>=this.lis.length?(e.appendTo(this.list),f.appendTo(this.list[0].parentNode)):
(e.insertBefore(this.lis[b]),f.insertBefore(this.panels[b]));g.disabled=d.map(g.disabled,function(a){return a>=b?++a:a});this._tabify();1==this.anchors.length&&(g.selected=0,e.addClass("ui-tabs-selected ui-state-active"),f.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){c._trigger("show",null,c._ui(c.anchors[0],c.panels[0]))}),this.load(0));this._trigger("add",null,this._ui(this.anchors[b],this.panels[b]));return this},remove:function(a){var a=this._getIndex(a),e=this.options,b=this.lis.eq(a).remove(),
c=this.panels.eq(a).remove();b.hasClass("ui-tabs-selected")&&1<this.anchors.length&&this.select(a+(a+1<this.anchors.length?1:-1));e.disabled=d.map(d.grep(e.disabled,function(b){return b!=a}),function(b){return b>=a?--b:b});this._tabify();this._trigger("remove",null,this._ui(b.find("a")[0],c[0]));return this},enable:function(a){var a=this._getIndex(a),e=this.options;if(-1!=d.inArray(a,e.disabled))return this.lis.eq(a).removeClass("ui-state-disabled"),e.disabled=d.grep(e.disabled,function(b){return b!=
a}),this._trigger("enable",null,this._ui(this.anchors[a],this.panels[a])),this},disable:function(a){var a=this._getIndex(a),d=this.options;a!=d.selected&&(this.lis.eq(a).addClass("ui-state-disabled"),d.disabled.push(a),d.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[a],this.panels[a])));return this},select:function(a){a=this._getIndex(a);if(-1==a)if(this.options.collapsible&&-1!=this.options.selected)a=this.options.selected;else return this;this.anchors.eq(a).trigger(this.options.event+
".tabs");return this},load:function(a){var a=this._getIndex(a),e=this,b=this.options,c=this.anchors.eq(a)[0],g=d.data(c,"load.tabs");this.abort();if(!g||0!==this.element.queue("tabs").length&&d.data(c,"cache.tabs"))this.element.dequeue("tabs");else{this.lis.eq(a).addClass("ui-state-processing");if(b.spinner){var f=d("span",c);f.data("label.tabs",f.html()).html(b.spinner)}this.xhr=d.ajax(d.extend({},b.ajaxOptions,{url:g,success:function(f,g){e.element.find(e._sanitizeSelector(c.hash)).html(f);e._cleanup();
b.cache&&d.data(c,"cache.tabs",!0);e._trigger("load",null,e._ui(e.anchors[a],e.panels[a]));try{b.ajaxOptions.success(f,g)}catch(i){}},error:function(d,f){e._cleanup();e._trigger("load",null,e._ui(e.anchors[a],e.panels[a]));try{b.ajaxOptions.error(d,f,a,c)}catch(g){}}}));e.element.dequeue("tabs");return this}},abort:function(){this.element.queue([]);this.panels.stop(!1,!0);this.element.queue("tabs",this.element.queue("tabs").splice(-2,2));this.xhr&&(this.xhr.abort(),delete this.xhr);this._cleanup();
return this},url:function(a,d){this.anchors.eq(a).removeData("cache.tabs").data("load.tabs",d);return this},length:function(){return this.anchors.length}});d.extend(d.ui.tabs,{version:"1.8.24"});d.extend(d.ui.tabs.prototype,{rotation:null,rotate:function(a,d){var b=this,c=this.options,g=b._rotate||(b._rotate=function(d){clearTimeout(b.rotation);b.rotation=setTimeout(function(){var a=c.selected;b.select(++a<b.anchors.length?a:0)},a);d&&d.stopPropagation()}),f=b._unrotate||(b._unrotate=!d?function(a){a.clientX&&
b.rotate(null)}:function(){g()});a?(this.element.bind("tabsshow",g),this.anchors.bind(c.event+".tabs",f),g()):(clearTimeout(b.rotation),this.element.unbind("tabsshow",g),this.anchors.unbind(c.event+".tabs",f),delete this._rotate,delete this._unrotate);return this}})})(jQuery);;
;
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'node_modules/@atlassian/aui/src/js-vendor/jquery/jquery-ui/jquery.effects.core.js' */
jQuery.effects||function(d){function l(a){var b;return a&&a.constructor==Array&&3==a.length?a:(b=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(a))?[parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3],10)]:(b=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(a))?[2.55*parseFloat(b[1]),2.55*parseFloat(b[2]),2.55*parseFloat(b[3])]:(b=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(a))?[parseInt(b[1],16),parseInt(b[2],
16),parseInt(b[3],16)]:(b=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(a))?[parseInt(b[1]+b[1],16),parseInt(b[2]+b[2],16),parseInt(b[3]+b[3],16)]:/rgba\(0, 0, 0, 0\)/.exec(a)?m.transparent:m[d.trim(a).toLowerCase()]}function n(){var a=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,b={},c,d;if(a&&a.length&&a[0]&&a[a[0]])for(var f=a.length;f--;)c=a[f],"string"==typeof a[c]&&(d=c.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()}),b[d]=a[c]);else for(c in a)"string"===
typeof a[c]&&(b[c]=a[c]);return b}function o(a){var b,c;for(b in a)c=a[b],(null==c||d.isFunction(c)||b in q||/scrollbar/.test(b)||!/color/i.test(b)&&isNaN(parseFloat(c)))&&delete a[b];return a}function r(a,b){var c={_:0},d;for(d in b)a[d]!=b[d]&&(c[d]=b[d]);return c}function i(a,b,c,e){"object"==typeof a&&(e=b,c=null,b=a,a=b.effect);d.isFunction(b)&&(e=b,c=null,b={});if("number"==typeof b||d.fx.speeds[b])e=c,c=b,b={};d.isFunction(c)&&(e=c,c=null);b=b||{};c=c||b.duration;c=d.fx.off?0:"number"==typeof c?
c:c in d.fx.speeds?d.fx.speeds[c]:d.fx.speeds._default;e=e||b.complete;return[a,b,c,e]}function j(a){return!a||("number"===typeof a||d.fx.speeds[a])||"string"===typeof a&&!d.effects[a]?!0:!1}d.effects={};d.each("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor borderColor color outlineColor".split(" "),function(a,b){d.fx.step[b]=function(a){if(!a.colorInit){var e;e=a.elem;var f=b,g;do{g=(d.curCSS||d.css)(e,f);if(g!=""&&g!="transparent"||d.nodeName(e,"body"))break;
f="backgroundColor"}while(e=e.parentNode);e=l(g);a.start=e;a.end=l(a.end);a.colorInit=true}a.elem.style[b]="rgb("+Math.max(Math.min(parseInt(a.pos*(a.end[0]-a.start[0])+a.start[0],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[1]-a.start[1])+a.start[1],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[2]-a.start[2])+a.start[2],10),255),0)+")"}});var m={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,
0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,
255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},p=["add","remove","toggle"],q={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};d.effects.animateClass=function(a,b,c,e){d.isFunction(c)&&(e=c,c=null);return this.queue(function(){var f=
d(this),g=f.attr("style")||" ",h=o(n.call(this)),i,j=f.attr("class")||"";d.each(p,function(b,c){if(a[c])f[c+"Class"](a[c])});i=o(n.call(this));f.attr("class",j);f.animate(r(h,i),{queue:false,duration:b,easing:c,complete:function(){d.each(p,function(b,c){if(a[c])f[c+"Class"](a[c])});if(typeof f.attr("style")=="object"){f.attr("style").cssText="";f.attr("style").cssText=g}else f.attr("style",g);e&&e.apply(this,arguments);d.dequeue(this)}})})};d.fn.extend({_addClass:d.fn.addClass,addClass:function(a,
b,c,e){return b?d.effects.animateClass.apply(this,[{add:a},b,c,e]):this._addClass(a)},_removeClass:d.fn.removeClass,removeClass:function(a,b,c,e){return b?d.effects.animateClass.apply(this,[{remove:a},b,c,e]):this._removeClass(a)},_toggleClass:d.fn.toggleClass,toggleClass:function(a,b,c,e,f){return"boolean"==typeof b||void 0===b?c?d.effects.animateClass.apply(this,[b?{add:a}:{remove:a},c,e,f]):this._toggleClass(a,b):d.effects.animateClass.apply(this,[{toggle:a},b,c,e])},switchClass:function(a,b,c,
e,f){return d.effects.animateClass.apply(this,[{add:b,remove:a},c,e,f])}});d.extend(d.effects,{version:"1.8.24",save:function(a,b){for(var c=0;c<b.length;c++)null!==b[c]&&a.data("ec.storage."+b[c],a[0].style[b[c]])},restore:function(a,b){for(var c=0;c<b.length;c++)null!==b[c]&&a.css(b[c],a.data("ec.storage."+b[c]))},setMode:function(a,b){"toggle"==b&&(b=a.is(":hidden")?"show":"hide");return b},getBaseline:function(a,b){var c,d;switch(a[0]){case "top":c=0;break;case "middle":c=0.5;break;case "bottom":c=
1;break;default:c=a[0]/b.height}switch(a[1]){case "left":d=0;break;case "center":d=0.5;break;case "right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createWrapper:function(a){if(a.parent().is(".ui-effects-wrapper"))return a.parent();var b={width:a.outerWidth(!0),height:a.outerHeight(!0),"float":a.css("float")},c=d("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e=document.activeElement;try{e.id}catch(f){e=document.body}a.wrap(c);
(a[0]===e||d.contains(a[0],e))&&d(e).focus();c=a.parent();"static"==a.css("position")?(c.css({position:"relative"}),a.css({position:"relative"})):(d.extend(b,{position:a.css("position"),zIndex:a.css("z-index")}),d.each(["top","left","bottom","right"],function(c,d){b[d]=a.css(d);isNaN(parseInt(b[d],10))&&(b[d]="auto")}),a.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"}));return c.css(b).show()},removeWrapper:function(a){var b,c=document.activeElement;return a.parent().is(".ui-effects-wrapper")?
(b=a.parent().replaceWith(a),(a[0]===c||d.contains(a[0],c))&&d(c).focus(),b):a},setTransition:function(a,b,c,e){e=e||{};d.each(b,function(b,d){var h=a.cssUnit(d);0<h[0]&&(e[d]=h[0]*c+h[1])});return e}});d.fn.extend({effect:function(a,b,c,e){var f=i.apply(this,arguments),g={options:f[1],duration:f[2],callback:f[3]},f=g.options.mode,h=d.effects[a];return d.fx.off||!h?f?this[f](g.duration,g.callback):this.each(function(){g.callback&&g.callback.call(this)}):h.call(this,g)},_show:d.fn.show,show:function(a){if(j(a))return this._show.apply(this,
arguments);var b=i.apply(this,arguments);b[1].mode="show";return this.effect.apply(this,b)},_hide:d.fn.hide,hide:function(a){if(j(a))return this._hide.apply(this,arguments);var b=i.apply(this,arguments);b[1].mode="hide";return this.effect.apply(this,b)},__toggle:d.fn.toggle,toggle:function(a){if(j(a)||"boolean"===typeof a||d.isFunction(a))return this.__toggle.apply(this,arguments);var b=i.apply(this,arguments);b[1].mode="toggle";return this.effect.apply(this,b)},cssUnit:function(a){var b=this.css(a),
c=[];d.each(["em","px","%","pt"],function(a,d){0<b.indexOf(d)&&(c=[parseFloat(b),d])});return c}});var k={};d.each(["Quad","Cubic","Quart","Quint","Expo"],function(a,b){k[b]=function(b){return Math.pow(b,a+2)}});d.extend(k,{Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return 0===a||1===a?a:-Math.pow(2,8*(a-1))*Math.sin((80*(a-1)-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){for(var b,c=4;a<((b=Math.pow(2,
--c))-1)/11;);return 1/Math.pow(4,3-c)-7.5625*Math.pow((3*b-2)/22-a,2)}});d.each(k,function(a,b){d.easing["easeIn"+a]=b;d.easing["easeOut"+a]=function(a){return 1-b(1-a)};d.easing["easeInOut"+a]=function(a){return 0.5>a?b(2*a)/2:b(-2*a+2)/-2+1}})}(jQuery);;
;
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'node_modules/@atlassian/aui/src/js-vendor/jquery/jquery-ui/jquery.effects.blind.js' */
(function(b){b.effects.blind=function(c){return this.queue(function(){var a=b(this),g=["position","top","bottom","left","right"],f=b.effects.setMode(a,c.options.mode||"hide"),d=c.options.direction||"vertical";b.effects.save(a,g);a.show();var e=b.effects.createWrapper(a).css({overflow:"hidden"}),h="vertical"==d?"height":"width",d="vertical"==d?e.height():e.width();"show"==f&&e.css(h,0);var i={};i[h]="show"==f?d:0;e.animate(i,c.duration,c.options.easing,function(){"hide"==f&&a.hide();b.effects.restore(a,
g);b.effects.removeWrapper(a);c.callback&&c.callback.apply(a[0],arguments);a.dequeue()})})}})(jQuery);;
;
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'node_modules/@atlassian/aui/src/js-vendor/jquery/jquery-ui/jquery.effects.bounce.js' */
(function(e){e.effects.bounce=function(b){return this.queue(function(){var a=e(this),l=["position","top","bottom","left","right"],h=e.effects.setMode(a,b.options.mode||"effect"),d=b.options.direction||"up",c=b.options.distance||20,m=b.options.times||5,i=b.duration||250;/show|hide/.test(h)&&l.push("opacity");e.effects.save(a,l);a.show();e.effects.createWrapper(a);var f="up"==d||"down"==d?"top":"left",d="up"==d||"left"==d?"pos":"neg",c=b.options.distance||("top"==f?a.outerHeight(!0)/3:a.outerWidth(!0)/
3);"show"==h&&a.css("opacity",0).css(f,"pos"==d?-c:c);"hide"==h&&(c/=2*m);"hide"!=h&&m--;if("show"==h){var g={opacity:1};g[f]=("pos"==d?"+=":"-=")+c;a.animate(g,i/2,b.options.easing);c/=2;m--}for(g=0;g<m;g++){var j={},k={};j[f]=("pos"==d?"-=":"+=")+c;k[f]=("pos"==d?"+=":"-=")+c;a.animate(j,i/2,b.options.easing).animate(k,i/2,b.options.easing);c="hide"==h?2*c:c/2}"hide"==h?(g={opacity:0},g[f]=("pos"==d?"-=":"+=")+c,a.animate(g,i/2,b.options.easing,function(){a.hide();e.effects.restore(a,l);e.effects.removeWrapper(a);
b.callback&&b.callback.apply(this,arguments)})):(j={},k={},j[f]=("pos"==d?"-=":"+=")+c,k[f]=("pos"==d?"+=":"-=")+c,a.animate(j,i/2,b.options.easing).animate(k,i/2,b.options.easing,function(){e.effects.restore(a,l);e.effects.removeWrapper(a);b.callback&&b.callback.apply(this,arguments)}));a.queue("fx",function(){a.dequeue()});a.dequeue()})}})(jQuery);;
;
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'node_modules/@atlassian/aui/src/js-vendor/jquery/jquery-ui/jquery.effects.clip.js' */
(function(b){b.effects.clip=function(e){return this.queue(function(){var a=b(this),h="position top bottom left right height width".split(" "),f=b.effects.setMode(a,e.options.mode||"hide"),c=e.options.direction||"vertical";b.effects.save(a,h);a.show();var d=b.effects.createWrapper(a).css({overflow:"hidden"}),d="IMG"==a[0].tagName?d:a,i="vertical"==c?"height":"width",j="vertical"==c?"top":"left",c="vertical"==c?d.height():d.width();"show"==f&&(d.css(i,0),d.css(j,c/2));var g={};g[i]="show"==f?c:0;g[j]=
"show"==f?0:c/2;d.animate(g,{queue:!1,duration:e.duration,easing:e.options.easing,complete:function(){f=="hide"&&a.hide();b.effects.restore(a,h);b.effects.removeWrapper(a);e.callback&&e.callback.apply(a[0],arguments);a.dequeue()}})})}})(jQuery);;
;
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'node_modules/@atlassian/aui/src/js-vendor/jquery/jquery-ui/jquery.effects.drop.js' */
(function(c){c.effects.drop=function(d){return this.queue(function(){var a=c(this),h="position top bottom left right opacity".split(" "),e=c.effects.setMode(a,d.options.mode||"hide"),b=d.options.direction||"left";c.effects.save(a,h);a.show();c.effects.createWrapper(a);var f="up"==b||"down"==b?"top":"left",b="up"==b||"left"==b?"pos":"neg",g=d.options.distance||("top"==f?a.outerHeight(!0)/2:a.outerWidth(!0)/2);"show"==e&&a.css("opacity",0).css(f,"pos"==b?-g:g);var i={opacity:"show"==e?1:0};i[f]=("show"==
e?"pos"==b?"+=":"-=":"pos"==b?"-=":"+=")+g;a.animate(i,{queue:!1,duration:d.duration,easing:d.options.easing,complete:function(){"hide"==e&&a.hide();c.effects.restore(a,h);c.effects.removeWrapper(a);d.callback&&d.callback.apply(this,arguments);a.dequeue()}})})}})(jQuery);;
;
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'node_modules/@atlassian/aui/src/js-vendor/jquery/jquery-ui/jquery.effects.explode.js' */
(function(j){j.effects.explode=function(a){return this.queue(function(){var c=a.options.pieces?Math.round(Math.sqrt(a.options.pieces)):3,d=a.options.pieces?Math.round(Math.sqrt(a.options.pieces)):3;a.options.mode="toggle"==a.options.mode?j(this).is(":visible")?"hide":"show":a.options.mode;var b=j(this).show().css("visibility","hidden"),e=b.offset();e.top-=parseInt(b.css("marginTop"),10)||0;e.left-=parseInt(b.css("marginLeft"),10)||0;for(var h=b.outerWidth(!0),i=b.outerHeight(!0),f=0;f<c;f++)for(var g=
0;g<d;g++)b.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-g*(h/d),top:-f*(i/c)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:h/d,height:i/c,left:e.left+g*(h/d)+("show"==a.options.mode?(g-Math.floor(d/2))*(h/d):0),top:e.top+f*(i/c)+("show"==a.options.mode?(f-Math.floor(c/2))*(i/c):0),opacity:"show"==a.options.mode?0:1}).animate({left:e.left+g*(h/d)+("show"==a.options.mode?0:(g-Math.floor(d/2))*(h/d)),top:e.top+
f*(i/c)+("show"==a.options.mode?0:(f-Math.floor(c/2))*(i/c)),opacity:"show"==a.options.mode?1:0},a.duration||500);setTimeout(function(){"show"==a.options.mode?b.css({visibility:"visible"}):b.css({visibility:"visible"}).hide();a.callback&&a.callback.apply(b[0]);b.dequeue();j("div.ui-effects-explode").remove()},a.duration||500)})}})(jQuery);;
;
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'node_modules/@atlassian/aui/src/js-vendor/jquery/jquery-ui/jquery.effects.fade.js' */
(function(b){b.effects.fade=function(a){return this.queue(function(){var c=b(this),d=b.effects.setMode(c,a.options.mode||"hide");c.animate({opacity:d},{queue:!1,duration:a.duration,easing:a.options.easing,complete:function(){a.callback&&a.callback.apply(this,arguments);c.dequeue()}})})}})(jQuery);;
;
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'node_modules/@atlassian/aui/src/js-vendor/jquery/jquery-ui/jquery.effects.fold.js' */
(function(c){c.effects.fold=function(a){return this.queue(function(){var b=c(this),j=["position","top","bottom","left","right"],d=c.effects.setMode(b,a.options.mode||"hide"),g=a.options.size||15,h=!!a.options.horizFirst,k=a.duration?a.duration/2:c.fx.speeds._default/2;c.effects.save(b,j);b.show();var e=c.effects.createWrapper(b).css({overflow:"hidden"}),f="show"==d!=h,l=f?["width","height"]:["height","width"],f=f?[e.width(),e.height()]:[e.height(),e.width()],i=/([0-9]+)%/.exec(g);i&&(g=parseInt(i[1],
10)/100*f["hide"==d?0:1]);"show"==d&&e.css(h?{height:0,width:g}:{height:g,width:0});h={};i={};h[l[0]]="show"==d?f[0]:g;i[l[1]]="show"==d?f[1]:0;e.animate(h,k,a.options.easing).animate(i,k,a.options.easing,function(){"hide"==d&&b.hide();c.effects.restore(b,j);c.effects.removeWrapper(b);a.callback&&a.callback.apply(b[0],arguments);b.dequeue()})})}})(jQuery);;
;
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'node_modules/@atlassian/aui/src/js-vendor/jquery/jquery-ui/jquery.effects.highlight.js' */
(function(b){b.effects.highlight=function(c){return this.queue(function(){var a=b(this),e=["backgroundImage","backgroundColor","opacity"],d=b.effects.setMode(a,c.options.mode||"show"),f={backgroundColor:a.css("backgroundColor")};"hide"==d&&(f.opacity=0);b.effects.save(a,e);a.show().css({backgroundImage:"none",backgroundColor:c.options.color||"#ffff99"}).animate(f,{queue:!1,duration:c.duration,easing:c.options.easing,complete:function(){d=="hide"&&a.hide();b.effects.restore(a,e);d=="show"&&!b.support.opacity&&
this.style.removeAttribute("filter");c.callback&&c.callback.apply(this,arguments);a.dequeue()}})})}})(jQuery);;
;
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'node_modules/@atlassian/aui/src/js-vendor/jquery/jquery-ui/jquery.effects.pulsate.js' */
(function(e){e.effects.pulsate=function(a){return this.queue(function(){var b=e(this),d=e.effects.setMode(b,a.options.mode||"show"),g=2*(a.options.times||5)-1,h=a.duration?a.duration/2:e.fx.speeds._default/2,f=b.is(":visible"),c=0;f||(b.css("opacity",0).show(),c=1);("hide"==d&&f||"show"==d&&!f)&&g--;for(d=0;d<g;d++)b.animate({opacity:c},h,a.options.easing),c=(c+1)%2;b.animate({opacity:c},h,a.options.easing,function(){c==0&&b.hide();a.callback&&a.callback.apply(this,arguments)});b.queue("fx",function(){b.dequeue()}).dequeue()})}})(jQuery);;
;
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'node_modules/@atlassian/aui/src/js-vendor/jquery/jquery-ui/jquery.effects.scale.js' */
(function(c){c.effects.puff=function(b){return this.queue(function(){var a=c(this),d=c.effects.setMode(a,b.options.mode||"hide"),e=parseInt(b.options.percent,10)||150,i=e/100,g={height:a.height(),width:a.width()};c.extend(b.options,{fade:!0,mode:d,percent:"hide"==d?e:100,from:"hide"==d?g:{height:g.height*i,width:g.width*i}});a.effect("scale",b.options,b.duration,b.callback);a.dequeue()})};c.effects.scale=function(b){return this.queue(function(){var a=c(this),d=c.extend(!0,{},b.options),e=c.effects.setMode(a,
b.options.mode||"effect"),i=parseInt(b.options.percent,10)||(0==parseInt(b.options.percent,10)?0:"hide"==e?0:100),g=b.options.direction||"both",f=b.options.origin;"effect"!=e&&(d.origin=f||["middle","center"],d.restore=!0);f={height:a.height(),width:a.width()};a.from=b.options.from||("show"==e?{height:0,width:0}:f);a.to={height:f.height*("horizontal"!=g?i/100:1),width:f.width*("vertical"!=g?i/100:1)};if(b.options.fade&&("show"==e&&(a.from.opacity=0,a.to.opacity=1),"hide"==e))a.from.opacity=1,a.to.opacity=
0;d.from=a.from;d.to=a.to;d.mode=e;a.effect("size",d,b.duration,b.callback);a.dequeue()})};c.effects.size=function(b){return this.queue(function(){var a=c(this),d="position top bottom left right width height overflow opacity".split(" "),e="position top bottom left right overflow opacity".split(" "),i=["width","height","overflow"],g=["fontSize"],f=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],j=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],r=c.effects.setMode(a,
b.options.mode||"effect"),q=b.options.restore||!1,n=b.options.scale||"both",k=b.options.origin,h={height:a.height(),width:a.width()};a.from=b.options.from||h;a.to=b.options.to||h;k&&(k=c.effects.getBaseline(k,h),a.from.top=(h.height-a.from.height)*k.y,a.from.left=(h.width-a.from.width)*k.x,a.to.top=(h.height-a.to.height)*k.y,a.to.left=(h.width-a.to.width)*k.x);var l=a.from.height/h.height,o=a.from.width/h.width,m=a.to.height/h.height,p=a.to.width/h.width;if("box"==n||"both"==n)if(l!=m&&(d=d.concat(f),
a.from=c.effects.setTransition(a,f,l,a.from),a.to=c.effects.setTransition(a,f,m,a.to)),o!=p)d=d.concat(j),a.from=c.effects.setTransition(a,j,o,a.from),a.to=c.effects.setTransition(a,j,p,a.to);if(("content"==n||"both"==n)&&l!=m)d=d.concat(g),a.from=c.effects.setTransition(a,g,l,a.from),a.to=c.effects.setTransition(a,g,m,a.to);c.effects.save(a,q?d:e);a.show();c.effects.createWrapper(a);a.css("overflow","hidden").css(a.from);if("content"==n||"both"==n)f=f.concat(["marginTop","marginBottom"]).concat(g),
j=j.concat(["marginLeft","marginRight"]),i=d.concat(f).concat(j),a.find("*[width]").each(function(){var a=c(this);q&&c.effects.save(a,i);var d=a.height(),e=a.width();a.from={height:d*l,width:e*o};a.to={height:d*m,width:e*p};if(l!=m){a.from=c.effects.setTransition(a,f,l,a.from);a.to=c.effects.setTransition(a,f,m,a.to)}if(o!=p){a.from=c.effects.setTransition(a,j,o,a.from);a.to=c.effects.setTransition(a,j,p,a.to)}a.css(a.from);a.animate(a.to,b.duration,b.options.easing,function(){q&&c.effects.restore(a,
i)})});a.animate(a.to,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){a.to.opacity===0&&a.css("opacity",a.from.opacity);r=="hide"&&a.hide();c.effects.restore(a,q?d:e);c.effects.removeWrapper(a);b.callback&&b.callback.apply(this,arguments);a.dequeue()}})})}})(jQuery);;
;
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'node_modules/@atlassian/aui/src/js-vendor/jquery/jquery-ui/jquery.effects.shake.js' */
(function(d){d.effects.shake=function(a){return this.queue(function(){var b=d(this),j=["position","top","bottom","left","right"];d.effects.setMode(b,a.options.mode||"effect");var c=a.options.direction||"left",e=a.options.distance||20,l=a.options.times||3,f=a.duration||a.options.duration||140;d.effects.save(b,j);b.show();d.effects.createWrapper(b);var g="up"==c||"down"==c?"top":"left",h="up"==c||"left"==c?"pos":"neg",c={},i={},k={};c[g]=("pos"==h?"-=":"+=")+e;i[g]=("pos"==h?"+=":"-=")+2*e;k[g]=("pos"==
h?"-=":"+=")+2*e;b.animate(c,f,a.options.easing);for(e=1;e<l;e++)b.animate(i,f,a.options.easing).animate(k,f,a.options.easing);b.animate(i,f,a.options.easing).animate(c,f/2,a.options.easing,function(){d.effects.restore(b,j);d.effects.removeWrapper(b);a.callback&&a.callback.apply(this,arguments)});b.queue("fx",function(){b.dequeue()});b.dequeue()})}})(jQuery);;
;
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'node_modules/@atlassian/aui/src/js-vendor/jquery/jquery-ui/jquery.effects.slide.js' */
(function(c){c.effects.slide=function(d){return this.queue(function(){var a=c(this),h=["position","top","bottom","left","right"],f=c.effects.setMode(a,d.options.mode||"show"),b=d.options.direction||"left";c.effects.save(a,h);a.show();c.effects.createWrapper(a).css({overflow:"hidden"});var g="up"==b||"down"==b?"top":"left",b="up"==b||"left"==b?"pos":"neg",e=d.options.distance||("top"==g?a.outerHeight(!0):a.outerWidth(!0));"show"==f&&a.css(g,"pos"==b?isNaN(e)?"-"+e:-e:e);var i={};i[g]=("show"==f?"pos"==
b?"+=":"-=":"pos"==b?"-=":"+=")+e;a.animate(i,{queue:!1,duration:d.duration,easing:d.options.easing,complete:function(){"hide"==f&&a.hide();c.effects.restore(a,h);c.effects.removeWrapper(a);d.callback&&d.callback.apply(this,arguments);a.dequeue()}})})}})(jQuery);;
;
/* module-key = 'com.atlassian.auiplugin:jquery-effects', location = 'node_modules/@atlassian/aui/src/js-vendor/jquery/jquery-ui/jquery.effects.transfer.js' */
(function(e){e.effects.transfer=function(a){return this.queue(function(){var b=e(this),c=e(a.options.to),d=c.offset(),c={top:d.top,left:d.left,height:c.innerHeight(),width:c.innerWidth()},d=b.offset(),f=e('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(a.options.className).css({top:d.top,left:d.left,height:b.innerHeight(),width:b.innerWidth(),position:"absolute"}).animate(c,a.duration,a.options.easing,function(){f.remove();a.callback&&a.callback.apply(b[0],arguments);b.dequeue()})})}})(jQuery);;
;
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'node_modules/@atlassian/aui/src/js-vendor/jquery/jquery.ui.menu.js' */
(function(d){d.widget("ui.menu",{_create:function(){var a=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(b){d(b.target).closest(".ui-menu-item a").length&&(b.preventDefault(),a.select(b))});this.refresh()},refresh:function(){var a=this;this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem").children("a").addClass("ui-corner-all").attr("tabindex",
-1).mouseenter(function(b){a.activate(b,d(this).parent())}).mouseleave(function(){a.deactivate()})},activate:function(a,b){this.deactivate();if(this.hasScroll()){var c=b.offset().top-this.element.offset().top,e=this.element.attr("scrollTop"),d=this.element.height();0>c?this.element.attr("scrollTop",e+c):c>d&&this.element.attr("scrollTop",e+c-d+b.height())}this.active=b.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end();this._trigger("focus",a,{item:b})},deactivate:function(){this.active&&
(this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null)},next:function(a){this.move("next",".ui-menu-item:first",a)},previous:function(a){this.move("prev",".ui-menu-item:last",a)},first:function(){return this.active&&!this.active.prev().length},last:function(){return this.active&&!this.active.next().length},move:function(a,b,c){this.active?(a=this.active[a+"All"](".ui-menu-item").eq(0),a.length?this.activate(c,a):this.activate(c,this.element.children(b))):
this.activate(c,this.element.children(b))},nextPage:function(a){if(this.hasScroll())if(!this.active||this.last())this.activate(a,this.element.children(":first"));else{var b=this.active.offset().top,c=this.element.height(),e=this.element.children("li").filter(function(){var a=d(this).offset().top-b-c+d(this).height();return 10>a&&-10<a});e.length||(e=this.element.children(":last"));this.activate(a,e)}else this.activate(a,this.element.children(!this.active||this.last()?":first":":last"))},previousPage:function(a){if(this.hasScroll())if(!this.active||
this.first())this.activate(a,this.element.children(":last"));else{var b=this.active.offset().top,c=this.element.height();result=this.element.children("li").filter(function(){var a=d(this).offset().top-b+c-d(this).height();return 10>a&&-10<a});result.length||(result=this.element.children(":first"));this.activate(a,result)}else this.activate(a,this.element.children(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element.attr("scrollHeight")},select:function(a){this._trigger("selected",
a,{item:this.active})}})})(jQuery);;
;
/* module-key = 'com.atlassian.plugin.jslibs:eve-0.2.4', location = 'libs/eve/0.2.4/eve-0.2.4.js' */
(function(l){define("atlassian/libs/eve-0.2.4",function(){var m={};l.call(m);return"undefined"!=typeof module&&module.exports?module.exports:m.eve})})(function(){var l=/[\.\/]/,m=function(){},p=function(j,f){return j-f},n,o={n:{}},h=function(j,f){var g=Array.prototype.slice.call(arguments,2),a=h.listeners(j),b=0,d,i=[],c={};n=j;for(var e=0,k=a.length;e<k;e++)"zIndex"in a[e]&&(i.push(a[e].zIndex),0>a[e].zIndex&&(c[a[e].zIndex]=a[e]));for(i.sort(p);0>i[b];)if(d=c[i[b++]],!1===d.apply(f,g))return!1;
for(e=0;e<k;e++)if(d=a[e],"zIndex"in d)if(d.zIndex==i[b]){if(!1===d.apply(f,g))return!1;do if(b++,(d=c[i[b]])&&!1===d.apply(f,g))return!1;while(d)}else c[d.zIndex]=d;else if(!1===d.apply(f,g))return!1};h.listeners=function(j){var j=j.split(l),f=o,g,a,b,d,i,c,e,k=[f],h=[];b=0;for(d=j.length;b<d;b++){e=[];i=0;for(c=k.length;i<c;i++){f=k[i].n;g=[f[j[b]],f["*"]];for(a=2;a--;)if(f=g[a])e.push(f),h=h.concat(f.f||[])}k=e}return h};h.on=function(j,f){for(var g=j.split(l),a=o,b=0,d=g.length;b<d;b++)a=a.n,
!a[g[b]]&&(a[g[b]]={n:{}}),a=a[g[b]];a.f=a.f||[];b=0;for(d=a.f.length;b<d;b++)if(a.f[b]==f)return m;a.f.push(f);return function(a){+a==+a&&(f.zIndex=+a)}};h.nt=function(j){return j?RegExp("(?:\\.|\\/|^)"+j+"(?:\\.|\\/|$)").test(n):n};h.unbind=function(j,f){for(var g=j.split(l),a,b,d,i=[o],c=0,e=g.length;c<e;c++)for(var h=0;h<i.length;h+=d.length-2){d=[h,1];a=i[h].n;if("*"!=g[c])a[g[c]]&&d.push(a[g[c]]);else for(b in a)a.hasOwnProperty(b)&&d.push(a[b]);i.splice.apply(i,d)}c=0;for(e=i.length;c<e;c++)for(a=
i[c];a.n;){if(f){if(a.f){c=0;for(e=a.f.length;c<e;c++)if(a.f[c]==f){a.f.splice(c,1);break}!a.f.length&&delete a.f}for(b in a.n)if(a.n.hasOwnProperty(b)&&a.n[b].f){g=a.n[b].f;c=0;for(e=g.length;c<e;c++)if(g[c]==f){g.splice(c,1);break}!g.length&&delete a.n[b].f}}else for(b in delete a.f,a.n)a.n.hasOwnProperty(b)&&a.n[b].f&&delete a.n[b].f;a=a.n}};h.version="0.2.4";h.toString=function(){return"You are running Eve 0.2.4"};"undefined"!=typeof module&&module.exports?module.exports=h:this.eve=h});;
;
/* module-key = 'com.atlassian.plugin.jslibs:raphael-2.1.0-factory', location = 'factories/raphael/2.1.0/raphael-2.1.0-factory.js' */
(function(B){define("atlassian/libs/factories/raphael-2.1.0",function(){return function(i){B(i);return window.Raphael.ninja()}})})(function(B){a:{var i=function(a){if(i.is(a,"function"))return Oa?a():B.on("raphael.DOMload",a);if(i.is(a,P))return i._engine.create[I](i,a.splice(0,3+i.is(a[0],E))).add(a);var b=Array.prototype.slice.call(arguments,0);if(i.is(b[b.length-1],"function")){var c=b.pop();return Oa?c.call(i._engine.create[I](i,b)):B.on("raphael.DOMload",function(){c.call(i._engine.create[I](i,
b))})}return i._engine.create[I](i,arguments)},Pa=function(a){if(Object(a)!==a)return a;var b=new a.constructor,c;for(c in a)a[F](c)&&(b[c]=Pa(a[c]));return b},Z=function(a,b,c){function d(){var f=Array.prototype.slice.call(arguments,0),e=f.join("\u2400"),g=d.cache=d.cache||{},h=d.count=d.count||[];if(g[F](e)){a:for(var f=h,h=e,l=0,n=f.length;l<n;l++)if(f[l]===h){f.push(f.splice(l,1)[0]);break a}return c?c(g[e]):g[e]}1E3<=h.length&&delete g[h.shift()];h.push(e);g[e]=a[I](b,f);return c?c(g[e]):g[e]}
return d},Aa=function(){return this.hex},nb=function(a,b){for(var c=[],d=0,f=a.length;f-2*!b>d;d+=2){var e=[{x:+a[d-2],y:+a[d-1]},{x:+a[d],y:+a[d+1]},{x:+a[d+2],y:+a[d+3]},{x:+a[d+4],y:+a[d+5]}];b?d?f-4==d?e[3]={x:+a[0],y:+a[1]}:f-2==d&&(e[2]={x:+a[0],y:+a[1]},e[3]={x:+a[2],y:+a[3]}):e[0]={x:+a[f-2],y:+a[f-1]}:f-4==d?e[3]=e[2]:d||(e[0]={x:+a[d],y:+a[d+1]});c.push(["C",(-e[0].x+6*e[1].x+e[2].x)/6,(-e[0].y+6*e[1].y+e[2].y)/6,(e[1].x+6*e[2].x-e[3].x)/6,(e[1].y+6*e[2].y-e[3].y)/6,e[2].x,e[2].y])}return c},
ma=function(a,b,c,d,f,e,g,h,l){null==l&&(l=1);for(var l=(1<l?1:0>l?0:l)/2,n=[-0.1252,0.1252,-0.3678,0.3678,-0.5873,0.5873,-0.7699,0.7699,-0.9041,0.9041,-0.9816,0.9816],i=[0.2491,0.2491,0.2335,0.2335,0.2032,0.2032,0.1601,0.1601,0.1069,0.1069,0.0472,0.0472],j=0,p=0;12>p;p++)var k=l*n[p]+l,ga=k*(k*(-3*a+9*c-9*f+3*g)+6*a-12*c+6*f)-3*a+3*c,k=k*(k*(-3*b+9*d-9*e+3*h)+6*b-12*d+6*e)-3*b+3*d,j=j+i[p]*w.sqrt(ga*ga+k*k);return l*j},Wb=function(a,b,c,d,f,e,g,h,l){if(!(0>l||ma(a,b,c,d,f,e,g,h)<l)){var n=0.5,i=
1-n,j;for(j=ma(a,b,c,d,f,e,g,h,i);0.01<S(j-l);)n/=2,i+=(j<l?1:-1)*n,j=ma(a,b,c,d,f,e,g,h,i);return i}},Qa=function(a,b,c){for(var a=i._path2curve(a),b=i._path2curve(b),d,f,e,g,h,l,n,m,j,p,k=c?0:[],ga=0,q=a.length;ga<q;ga++)if(j=a[ga],"M"==j[0])d=h=j[1],f=l=j[2];else{"C"==j[0]?(j=[d,f].concat(j.slice(1)),d=j[6],f=j[7]):(j=[d,f,d,f,h,l,h,l],d=h,f=l);for(var D=0,v=b.length;D<v;D++)if(p=b[D],"M"==p[0])e=n=p[1],g=m=p[2];else{"C"==p[0]?(p=[e,g].concat(p.slice(1)),e=p[6],g=p[7]):(p=[e,g,e,g,n,m,n,m],e=n,
g=m);var t;var s=j,o=p;t=c;var r=i.bezierBBox(s),u=i.bezierBBox(o);if(i.isBBoxIntersect(r,u)){for(var r=ma.apply(0,s),u=ma.apply(0,o),r=~~(r/5),u=~~(u/5),w=[],y=[],B={},C=t?0:[],x=0;x<r+1;x++){var z=i.findDotsAtSegment.apply(i,s.concat(x/r));w.push({x:z.x,y:z.y,t:x/r})}for(x=0;x<u+1;x++)z=i.findDotsAtSegment.apply(i,o.concat(x/u)),y.push({x:z.x,y:z.y,t:x/u});for(x=0;x<r;x++)for(s=0;s<u;s++){var A=w[x],F=w[x+1],o=y[s],z=y[s+1],I=0.001>S(F.x-A.x)?"y":"x",M=0.001>S(z.x-o.x)?"y":"x",Q;b:{Q=A.x;var E=
A.y,G=F.x,H=F.y,K=o.x,L=o.y,N=z.x,O=z.y;if(!(J(Q,G)<R(K,N)||R(Q,G)>J(K,N)||J(E,H)<R(L,O)||R(E,H)>J(L,O))){var T=(Q*H-E*G)*(K-N)-(Q-G)*(K*O-L*N),U=(Q*H-E*G)*(L-O)-(E-H)*(K*O-L*N),P=(Q-G)*(L-O)-(E-H)*(K-N);if(P){var T=T/P,U=U/P,P=+T.toFixed(2),V=+U.toFixed(2);if(!(P<+R(Q,G).toFixed(2)||P>+J(Q,G).toFixed(2)||P<+R(K,N).toFixed(2)||P>+J(K,N).toFixed(2)||V<+R(E,H).toFixed(2)||V>+J(E,H).toFixed(2)||V<+R(L,O).toFixed(2)||V>+J(L,O).toFixed(2))){Q={x:T,y:U};break b}}}Q=void 0}Q&&B[Q.x.toFixed(4)]!=Q.y.toFixed(4)&&
(B[Q.x.toFixed(4)]=Q.y.toFixed(4),A=A.t+S((Q[I]-A[I])/(F[I]-A[I]))*(F.t-A.t),o=o.t+S((Q[M]-o[M])/(z[M]-o[M]))*(z.t-o.t),0<=A&&(1>=A&&0<=o&&1>=o)&&(t?C++:C.push({x:Q.x,y:Q.y,t1:A,t2:o})))}t=C}else t=t?0:[];if(c)k+=t;else{r=0;for(u=t.length;r<u;r++)t[r].segment1=ga,t[r].segment2=D,t[r].bez1=j,t[r].bez2=p;k=k.concat(t)}}}return k},ha=function(a,b,c,d,f,e){null!=a?(this.a=+a,this.b=+b,this.c=+c,this.d=+d,this.e=+f,this.f=+e):(this.a=1,this.c=this.b=0,this.d=1,this.f=this.e=0)},ob=function(){return this.x+
qa+this.y+qa+this.width+" \u00d7 "+this.height},da=function(a,b){var c=[],d={};this.ms=b;this.times=1;if(a){for(var f in a)a[F](f)&&(d[z(f)]=a[f],c.push(z(f)));c.sort(Xb)}this.anim=d;this.top=c[c.length-1];this.percents=c},sa=function(a,b,c,d,f,e){var c=z(c),g,h,l,n,m,j,p=a.ms,k={},o={},q={};if(d){j=0;for(v=y.length;j<v;j++){var D=y[j];if(D.el.id==b.id&&D.anim==a){D.percent!=c?(y.splice(j,1),l=1):h=D;b.attr(D.totalOrigin);break}}}else d=+o;j=0;for(var v=a.percents.length;j<v;j++)if(a.percents[j]==
c||a.percents[j]>d*a.top){c=a.percents[j];m=a.percents[j-1]||0;p=p/a.top*(c-m);n=a.percents[j+1];g=a.anim[c];break}else d&&b.attr(a.anim[a.percents[j]]);if(g){if(h)h.initstatus=d,h.start=new Date-h.ms*d;else{for(var t in g)if(g[F](t)&&(Ra[F](t)||b.paper.customAttributes[F](t)))switch(k[t]=b.attr(t),null==k[t]&&(k[t]=Yb[t]),o[t]=g[t],Ra[t]){case E:q[t]=(o[t]-k[t])/p;break;case "colour":k[t]=i.getRGB(k[t]);j=i.getRGB(o[t]);q[t]={r:(j.r-k[t].r)/p,g:(j.g-k[t].g)/p,b:(j.b-k[t].b)/p};break;case "path":j=
ra(k[t],o[t]);D=j[1];k[t]=j[0];q[t]=[];j=0;for(v=k[t].length;j<v;j++){q[t][j]=[0];for(var r=1,s=k[t][j].length;r<s;r++)q[t][j][r]=(D[j][r]-k[t][j][r])/p}break;case "transform":j=b._;if(v=Zb(j[t],o[t])){k[t]=v.from;o[t]=v.to;q[t]=[];q[t].real=!0;j=0;for(v=k[t].length;j<v;j++){q[t][j]=[k[t][j][0]];r=1;for(s=k[t][j].length;r<s;r++)q[t][j][r]=(o[t][j][r]-k[t][j][r])/p}}else v=b.matrix||new ha,j={_:{transform:j.transform},getBBox:function(){return b.getBBox(1)}},k[t]=[v.a,v.b,v.c,v.d,v.e,v.f],pb(j,o[t]),
o[t]=j._.transform,q[t]=[(j.matrix.a-v.a)/p,(j.matrix.b-v.b)/p,(j.matrix.c-v.c)/p,(j.matrix.d-v.d)/p,(j.matrix.e-v.e)/p,(j.matrix.f-v.f)/p];break;case "csv":v=K(g[t])[ba](Sa);D=K(k[t])[ba](Sa);if("clip-rect"==t){k[t]=D;q[t]=[];for(j=D.length;j--;)q[t][j]=(v[j]-k[t][j])/p}o[t]=v;break;default:v=[][x](g[t]);D=[][x](k[t]);q[t]=[];for(j=b.paper.customAttributes[t].length;j--;)q[t][j]=((v[j]||0)-(D[j]||0))/p}j=g.easing;t=i.easing_formulas[j];if(!t)if((t=K(j).match($b))&&5==t.length){var u=t;t=function(a){var b=
+u[1],c=+u[2],d=3*b,e=3*(+u[3]-b)-d,f=1-d-e,b=3*c,c=3*(+u[4]-c)-b,g=1-b-c,a=function(a,b){var c,g,h,l;h=a;for(g=0;8>g;g++){l=((f*h+e)*h+d)*h-a;if(S(l)<b)return h;c=(3*f*h+2*e)*h+d;if(1E-6>S(c))break;h-=l/c}c=0;g=1;h=a;if(h<c)return c;if(h>g)return g;for(;c<g;){l=((f*h+e)*h+d)*h;if(S(l-a)<b)break;a>l?c=h:g=h;h=(g-c)/2+c}return h}(a,1/(200*p));return((g*a+c)*a+b)*a}}else t=ac;j=g.start||a.start||+new Date;D={anim:a,percent:c,timestamp:j,start:j+(a.del||0),status:0,initstatus:d||0,stop:!1,ms:p,easing:t,
from:k,diff:q,to:o,el:b,callback:g.callback,prev:m,next:n,repeat:e||a.times,origin:b.attr(),totalOrigin:f};y.push(D);if(d&&(!h&&!l)&&(D.stop=!0,D.start=new Date-p*d,1==y.length))return Ta();l&&(D.start=new Date-D.ms*d);1==y.length&&qb(Ta)}B("raphael.anim.start."+b.id,b,a)}},rb=function(a){for(var b=0;b<y.length;b++)y[b].el.paper==a&&y.splice(b--,1)};i.version="2.1.0";i.eve=B;var Oa,Sa=/[, ]+/,bc={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},cc=/\{(\d+)\}/g,F="hasOwnProperty",u={doc:document,win:window},
sb=Object.prototype[F].call(u.win,"Raphael"),dc=u.win.Raphael,tb=function(){this.ca=this.customAttributes={}},A,I="apply",x="concat",Ua="createTouch"in u.doc,qa=" ",K=String,ba="split",ub="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[ba](qa),Va={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},Ba=K.prototype.toLowerCase,w=Math,J=w.max,R=w.min,S=w.abs,V=w.pow,L=w.PI,E="number",P="array",ec=Object.prototype.toString;i._ISURL=
/^url\(['"]?([^\)]+?)['"]?\)$/i;var fc=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,gc={NaN:1,Infinity:1,"-Infinity":1},$b=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,Wa=w.round,z=parseFloat,ia=parseInt,vb=K.prototype.toUpperCase,
Yb=i._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,
target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},Ra=i._availableAnimAttrs={blur:E,"clip-rect":"csv",cx:E,cy:E,fill:"colour","fill-opacity":E,"font-size":E,height:E,opacity:E,path:"path",r:E,rx:E,ry:E,stroke:"colour","stroke-opacity":E,"stroke-width":E,transform:"transform",width:E,x:E,y:E},Xa=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,
hc={hs:1,rg:1},ic=/,?([achlmqrstvxz]),?/gi,jc=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/ig,
kc=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/ig,wb=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/ig;
i._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/;var ta={},Xb=function(a,b){return z(a)-z(b)},lc=function(){},ac=function(a){return a},Ya=i._rectPath=function(a,b,c,d,f){return f?[["M",a+f,b],["l",c-2*f,0],["a",f,f,0,0,1,
f,f],["l",0,d-2*f],["a",f,f,0,0,1,-f,f],["l",2*f-c,0],["a",f,f,0,0,1,-f,-f],["l",0,2*f-d],["a",f,f,0,0,1,f,-f],["z"]]:[["M",a,b],["l",c,0],["l",0,d],["l",-c,0],["z"]]},xb=function(a,b,c,d){null==d&&(d=c);return[["M",a,b],["m",0,-d],["a",c,d,0,1,1,0,2*d],["a",c,d,0,1,1,0,-2*d],["z"]]},Ca=i._getPath={path:function(a){return a.attr("path")},circle:function(a){a=a.attrs;return xb(a.cx,a.cy,a.r)},ellipse:function(a){a=a.attrs;return xb(a.cx,a.cy,a.rx,a.ry)},rect:function(a){a=a.attrs;return Ya(a.x,a.y,
a.width,a.height,a.r)},image:function(a){a=a.attrs;return Ya(a.x,a.y,a.width,a.height)},text:function(a){a=a._getBBox();return Ya(a.x,a.y,a.width,a.height)}},Za=i.mapPath=function(a,b){if(!b)return a;var c,d,f,e,g,h,l,a=ra(a);f=0;for(g=a.length;f<g;f++){l=a[f];e=1;for(h=l.length;e<h;e+=2)c=b.x(l[e],l[e+1]),d=b.y(l[e],l[e+1]),l[e]=c,l[e+1]=d}return a};i._g=u;i.type=u.win.SVGAngle||u.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML";if("VML"==i.type){var $a=
u.doc.createElement("div"),Da;$a.innerHTML='<v:shape adj="1"/>';Da=$a.firstChild;Da.style.behavior="url(#default#VML)";if(!(Da&&"object"==typeof Da.adj)){i.type="";break a}$a=null}i.svg=!(i.vml="VML"==i.type);i._Paper=tb;i.fn=A=tb.prototype=i.prototype;i._id=0;i._oid=0;i.is=function(a,b){b=Ba.call(b);return"finite"==b?!gc[F](+a):"array"==b?a instanceof Array:"null"==b&&null===a||b==typeof a&&null!==a||"object"==b&&a===Object(a)||"array"==b&&Array.isArray&&Array.isArray(a)||ec.call(a).slice(8,-1).toLowerCase()==
b};i.angle=function(a,b,c,d,f,e){return null==f?(a-=c,b-=d,!a&&!b?0:(180*w.atan2(-b,-a)/L+540)%360):i.angle(a,b,f,e)-i.angle(c,d,f,e)};i.rad=function(a){return a%360*L/180};i.deg=function(a){return 180*a/L%360};i.snapTo=function(a,b,c){c=i.is(c,"finite")?c:10;if(i.is(a,P))for(var d=a.length;d--;){if(S(a[d]-b)<=c)return a[d]}else{a=+a;d=b%a;if(d<c)return b-d;if(d>a-c)return b-d+a}return b};var mc=/[xy]/g,nc=function(a){var b=16*w.random()|0;return("x"==a?b:b&3|8).toString(16)};i.createUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(mc,
nc).toUpperCase()};i.setWindow=function(a){B("raphael.setWindow",i,u.win,a);u.win=a;u.doc=u.win.document;i._engine.initWin&&i._engine.initWin(u.win)};var Ea=function(a){if(i.vml){var b=/^\s+|\s+$/g,c;try{var d=new ActiveXObject("htmlfile");d.write("<body>");d.close();c=d.body}catch(f){c=createPopup().document.body}var e=c.createTextRange();Ea=Z(function(a){try{c.style.color=K(a).replace(b,"");var d=e.queryCommandValue("ForeColor");return"#"+("000000"+((d&255)<<16|d&65280|(d&16711680)>>>16).toString(16)).slice(-6)}catch(f){return"none"}})}else{var g=
u.doc.createElement("i");g.title="Rapha\u00ebl Colour Picker";g.style.display="none";u.doc.body.appendChild(g);Ea=Z(function(a){g.style.color=a;return u.doc.defaultView.getComputedStyle(g,"").getPropertyValue("color")})}return Ea(a)},oc=function(){return"hsb("+[this.h,this.s,this.b]+")"},pc=function(){return"hsl("+[this.h,this.s,this.l]+")"},yb=function(){return this.hex},zb=function(a,b,c){null==b&&(i.is(a,"object")&&"r"in a&&"g"in a&&"b"in a)&&(c=a.b,b=a.g,a=a.r);null==b&&i.is(a,"string")&&(c=i.getRGB(a),
a=c.r,b=c.g,c=c.b);if(1<a||1<b||1<c)a/=255,b/=255,c/=255;return[a,b,c]},Ab=function(a,b,c,d){a*=255;b*=255;c*=255;a={r:a,g:b,b:c,hex:i.rgb(a,b,c),toString:yb};i.is(d,"finite")&&(a.opacity=d);return a};i.color=function(a){var b;i.is(a,"object")&&"h"in a&&"s"in a&&"b"in a?(b=i.hsb2rgb(a),a.r=b.r,a.g=b.g,a.b=b.b,a.hex=b.hex):i.is(a,"object")&&"h"in a&&"s"in a&&"l"in a?(b=i.hsl2rgb(a),a.r=b.r,a.g=b.g,a.b=b.b,a.hex=b.hex):(i.is(a,"string")&&(a=i.getRGB(a)),i.is(a,"object")&&"r"in a&&"g"in a&&"b"in a?(b=
i.rgb2hsl(a),a.h=b.h,a.s=b.s,a.l=b.l,b=i.rgb2hsb(a),a.v=b.b):(a={hex:"none"},a.r=a.g=a.b=a.h=a.s=a.v=a.l=-1));a.toString=yb;return a};i.hsb2rgb=function(a,b,c,d){this.is(a,"object")&&("h"in a&&"s"in a&&"b"in a)&&(c=a.b,b=a.s,a=a.h,d=a.o);var f,e,g,a=360*a%360/60;g=c*b;b=g*(1-S(a%2-1));c=f=e=c-g;a=~~a;c+=[g,b,0,0,b,g][a];f+=[b,g,g,b,0,0][a];e+=[0,0,b,g,g,b][a];return Ab(c,f,e,d)};i.hsl2rgb=function(a,b,c,d){this.is(a,"object")&&("h"in a&&"s"in a&&"l"in a)&&(c=a.l,b=a.s,a=a.h);if(1<a||1<b||1<c)a/=360,
b/=100,c/=100;var f,e,g,a=360*a%360/60;g=2*b*(0.5>c?c:1-c);b=g*(1-S(a%2-1));c=f=e=c-g/2;a=~~a;c+=[g,b,0,0,b,g][a];f+=[b,g,g,b,0,0][a];e+=[0,0,b,g,g,b][a];return Ab(c,f,e,d)};i.rgb2hsb=function(a,b,c){var c=zb(a,b,c),a=c[0],b=c[1],c=c[2],d,f;d=J(a,b,c);f=d-R(a,b,c);return{h:60*(((0==f?0:d==a?(b-c)/f:d==b?(c-a)/f+2:(a-b)/f+4)+360)%6)/360,s:0==f?0:f/d,b:d,toString:oc}};i.rgb2hsl=function(a,b,c){var c=zb(a,b,c),a=c[0],b=c[1],c=c[2],d,f,e;f=J(a,b,c);d=R(a,b,c);e=f-d;d=(f+d)/2;return{h:60*(((0==e?0:f==
a?(b-c)/e:f==b?(c-a)/e+2:(a-b)/e+4)+360)%6)/360,s:0==e?0:0.5>d?e/(2*d):e/(2-2*d),l:d,toString:pc}};i._path2string=function(){return this.join(",").replace(ic,"$1")};i._preload=function(a,b){var c=u.doc.createElement("img");c.style.cssText="position:absolute;left:-9999em;top:-9999em";c.onload=function(){b.call(this);this.onload=null;u.doc.body.removeChild(this)};c.onerror=function(){u.doc.body.removeChild(this)};u.doc.body.appendChild(c);c.src=a};i.getRGB=Z(function(a){if(!a||(a=K(a)).indexOf("-")+
1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:Aa};if("none"==a)return{r:-1,g:-1,b:-1,hex:"none",toString:Aa};!(hc[F](a.toLowerCase().substring(0,2))||"#"==a.charAt())&&(a=Ea(a));var b,c,d,f,e;if(a=a.match(fc)){a[2]&&(d=ia(a[2].substring(5),16),c=ia(a[2].substring(3,5),16),b=ia(a[2].substring(1,3),16));a[3]&&(d=ia((e=a[3].charAt(3))+e,16),c=ia((e=a[3].charAt(2))+e,16),b=ia((e=a[3].charAt(1))+e,16));a[4]&&(e=a[4][ba](Xa),b=z(e[0]),"%"==e[0].slice(-1)&&(b*=2.55),c=z(e[1]),"%"==e[1].slice(-1)&&
(c*=2.55),d=z(e[2]),"%"==e[2].slice(-1)&&(d*=2.55),"rgba"==a[1].toLowerCase().slice(0,4)&&(f=z(e[3])),e[3]&&"%"==e[3].slice(-1)&&(f/=100));if(a[5])return e=a[5][ba](Xa),b=z(e[0]),"%"==e[0].slice(-1)&&(b*=2.55),c=z(e[1]),"%"==e[1].slice(-1)&&(c*=2.55),d=z(e[2]),"%"==e[2].slice(-1)&&(d*=2.55),("deg"==e[0].slice(-3)||"\u00b0"==e[0].slice(-1))&&(b/=360),"hsba"==a[1].toLowerCase().slice(0,4)&&(f=z(e[3])),e[3]&&"%"==e[3].slice(-1)&&(f/=100),i.hsb2rgb(b,c,d,f);if(a[6])return e=a[6][ba](Xa),b=z(e[0]),"%"==
e[0].slice(-1)&&(b*=2.55),c=z(e[1]),"%"==e[1].slice(-1)&&(c*=2.55),d=z(e[2]),"%"==e[2].slice(-1)&&(d*=2.55),("deg"==e[0].slice(-3)||"\u00b0"==e[0].slice(-1))&&(b/=360),"hsla"==a[1].toLowerCase().slice(0,4)&&(f=z(e[3])),e[3]&&"%"==e[3].slice(-1)&&(f/=100),i.hsl2rgb(b,c,d,f);a={r:b,g:c,b:d,toString:Aa};a.hex="#"+(16777216|d|c<<8|b<<16).toString(16).slice(1);i.is(f,"finite")&&(a.opacity=f);return a}return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:Aa}},i);i.hsb=Z(function(a,b,c){return i.hsb2rgb(a,b,
c).hex});i.hsl=Z(function(a,b,c){return i.hsl2rgb(a,b,c).hex});i.rgb=Z(function(a,b,c){return"#"+(16777216|c|b<<8|a<<16).toString(16).slice(1)});i.getColor=function(a){var a=this.getColor.start=this.getColor.start||{h:0,s:1,b:a||0.75},b=this.hsb2rgb(a.h,a.s,a.b);a.h+=0.075;1<a.h&&(a.h=0,a.s-=0.2,0>=a.s&&(this.getColor.start={h:0,s:1,b:a.b}));return b.hex};i.getColor.reset=function(){delete this.start};i.parsePathString=function(a){if(!a)return null;var b=ja(a);if(b.arr)return $(b.arr);var c={a:7,
c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},d=[];i.is(a,P)&&i.is(a[0],P)&&(d=$(a));d.length||K(a).replace(jc,function(a,b,g){var h=[],a=b.toLowerCase();g.replace(wb,function(a,b){b&&h.push(+b)});"m"==a&&2<h.length&&(d.push([b][x](h.splice(0,2))),a="l",b="m"==b?"l":"L");if("r"==a)d.push([b][x](h));else for(;h.length>=c[a]&&!(d.push([b][x](h.splice(0,c[a]))),!c[a]););});d.toString=i._path2string;b.arr=$(d);return d};i.parseTransformString=Z(function(a){if(!a)return null;var b=[];i.is(a,P)&&i.is(a[0],P)&&
(b=$(a));b.length||K(a).replace(kc,function(a,d,f){var e=[];Ba.call(d);f.replace(wb,function(a,b){b&&e.push(+b)});b.push([d][x](e))});b.toString=i._path2string;return b});var ja=function(a){var b=ja.ps=ja.ps||{};b[a]?b[a].sleep=100:b[a]={sleep:100};setTimeout(function(){for(var c in b)b[F](c)&&c!=a&&(b[c].sleep--,!b[c].sleep&&delete b[c])});return b[a]};i.findDotsAtSegment=function(a,b,c,d,f,e,g,h,l){var i=1-l,m=V(i,3),j=V(i,2),p=l*l,k=p*l,o=m*a+3*j*l*c+3*i*l*l*f+k*g,m=m*b+3*j*l*d+3*i*l*l*e+k*h,j=
a+2*l*(c-a)+p*(f-2*c+a),k=b+2*l*(d-b)+p*(e-2*d+b),q=c+2*l*(f-c)+p*(g-2*f+c),p=d+2*l*(e-d)+p*(h-2*e+d),a=i*a+l*c,b=i*b+l*d,f=i*f+l*g,e=i*e+l*h,h=90-180*w.atan2(j-q,k-p)/L;(j>q||k<p)&&(h+=180);return{x:o,y:m,m:{x:j,y:k},n:{x:q,y:p},start:{x:a,y:b},end:{x:f,y:e},alpha:h}};i.bezierBBox=function(a,b,c,d,f,e,g,h){i.is(a,"array")||(a=[a,b,c,d,f,e,g,h]);a=Bb.apply(null,a);return{x:a.min.x,y:a.min.y,x2:a.max.x,y2:a.max.y,width:a.max.x-a.min.x,height:a.max.y-a.min.y}};i.isPointInsideBBox=function(a,b,c){return b>=
a.x&&b<=a.x2&&c>=a.y&&c<=a.y2};i.isBBoxIntersect=function(a,b){var c=i.isPointInsideBBox;return c(b,a.x,a.y)||c(b,a.x2,a.y)||c(b,a.x,a.y2)||c(b,a.x2,a.y2)||c(a,b.x,b.y)||c(a,b.x2,b.y)||c(a,b.x,b.y2)||c(a,b.x2,b.y2)||(a.x<b.x2&&a.x>b.x||b.x<a.x2&&b.x>a.x)&&(a.y<b.y2&&a.y>b.y||b.y<a.y2&&b.y>a.y)};i.pathIntersection=function(a,b){return Qa(a,b)};i.pathIntersectionNumber=function(a,b){return Qa(a,b,1)};i.isPointInsidePath=function(a,b,c){var d=i.pathBBox(a);return i.isPointInsideBBox(d,b,c)&&1==Qa(a,
[["M",b,c],["H",d.x2+10]],1)%2};i._removedFactory=function(a){return function(){B("raphael.log",null,"Rapha\u00ebl: you are calling to method \u201c"+a+"\u201d of removed object",a)}};var ab=i.pathBBox=function(a){var b=ja(a);if(b.bbox)return b.bbox;if(!a)return{x:0,y:0,width:0,height:0,x2:0,y2:0};for(var a=ra(a),c=0,d=0,f=[],e=[],g,h=0,l=a.length;h<l;h++)g=a[h],"M"==g[0]?(c=g[1],d=g[2],f.push(c),e.push(d)):(c=Bb(c,d,g[1],g[2],g[3],g[4],g[5],g[6]),f=f[x](c.min.x,c.max.x),e=e[x](c.min.y,c.max.y),c=
g[5],d=g[6]);a=R[I](0,f);g=R[I](0,e);f=J[I](0,f);e=J[I](0,e);e={x:a,y:g,x2:f,y2:e,width:f-a,height:e-g};b.bbox=Pa(e);return e},$=function(a){a=Pa(a);a.toString=i._path2string;return a},qc=i._pathToRelative=function(a){var b=ja(a);if(b.rel)return $(b.rel);if(!i.is(a,P)||!i.is(a&&a[0],P))a=i.parsePathString(a);var c=[],d=0,f=0,e=0,g=0,h=0;"M"==a[0][0]&&(d=a[0][1],f=a[0][2],e=d,g=f,h++,c.push(["M",d,f]));for(var l=a.length;h<l;h++){var n=c[h]=[],m=a[h];if(m[0]!=Ba.call(m[0]))switch(n[0]=Ba.call(m[0]),
n[0]){case "a":n[1]=m[1];n[2]=m[2];n[3]=m[3];n[4]=m[4];n[5]=m[5];n[6]=+(m[6]-d).toFixed(3);n[7]=+(m[7]-f).toFixed(3);break;case "v":n[1]=+(m[1]-f).toFixed(3);break;case "m":e=m[1],g=m[2];default:for(var j=1,p=m.length;j<p;j++)n[j]=+(m[j]-(j%2?d:f)).toFixed(3)}else{c[h]=[];"m"==m[0]&&(e=m[1]+d,g=m[2]+f);n=0;for(j=m.length;n<j;n++)c[h][n]=m[n]}m=c[h].length;switch(c[h][0]){case "z":d=e;f=g;break;case "h":d+=+c[h][m-1];break;case "v":f+=+c[h][m-1];break;default:d+=+c[h][m-2],f+=+c[h][m-1]}}c.toString=
i._path2string;b.rel=$(c);return c},Cb=i._pathToAbsolute=function(a){var b=ja(a);if(b.abs)return $(b.abs);if(!i.is(a,P)||!i.is(a&&a[0],P))a=i.parsePathString(a);if(!a||!a.length)return[["M",0,0]];var c=[],d=0,f=0,e=0,g=0,h=0;"M"==a[0][0]&&(d=+a[0][1],f=+a[0][2],e=d,g=f,h++,c[0]=["M",d,f]);for(var l=3==a.length&&"M"==a[0][0]&&"R"==a[1][0].toUpperCase()&&"Z"==a[2][0].toUpperCase(),n,m=h,j=a.length;m<j;m++){c.push(h=[]);n=a[m];if(n[0]!=vb.call(n[0]))switch(h[0]=vb.call(n[0]),h[0]){case "A":h[1]=n[1];
h[2]=n[2];h[3]=n[3];h[4]=n[4];h[5]=n[5];h[6]=+(n[6]+d);h[7]=+(n[7]+f);break;case "V":h[1]=+n[1]+f;break;case "H":h[1]=+n[1]+d;break;case "R":for(var p=[d,f][x](n.slice(1)),k=2,o=p.length;k<o;k++)p[k]=+p[k]+d,p[++k]=+p[k]+f;c.pop();c=c[x](nb(p,l));break;case "M":e=+n[1]+d,g=+n[2]+f;default:k=1;for(o=n.length;k<o;k++)h[k]=+n[k]+(k%2?d:f)}else if("R"==n[0])p=[d,f][x](n.slice(1)),c.pop(),c=c[x](nb(p,l)),h=["R"][x](n.slice(-2));else{p=0;for(k=n.length;p<k;p++)h[p]=n[p]}switch(h[0]){case "Z":d=e;f=g;break;
case "H":d=h[1];break;case "V":f=h[1];break;case "M":e=h[h.length-2],g=h[h.length-1];default:d=h[h.length-2],f=h[h.length-1]}}c.toString=i._path2string;b.abs=$(c);return c},Db=function(a,b,c,d,f,e){var g=1/3,h=2/3;return[g*a+h*c,g*b+h*d,g*f+h*c,g*e+h*d,f,e]},Eb=function(a,b,c,d,f,e,g,h,l,i){var m=120*L/180,j=L/180*(+f||0),p=[],k,o=Z(function(a,b,c){var d=a*w.cos(c)-b*w.sin(c),a=a*w.sin(c)+b*w.cos(c);return{x:d,y:a}});if(i)v=i[0],k=i[1],e=i[2],q=i[3];else{k=o(a,b,-j);a=k.x;b=k.y;k=o(h,l,-j);h=k.x;
l=k.y;w.cos(L/180*f);w.sin(L/180*f);k=(a-h)/2;v=(b-l)/2;q=k*k/(c*c)+v*v/(d*d);1<q&&(q=w.sqrt(q),c*=q,d*=q);var q=c*c,D=d*d,q=(e==g?-1:1)*w.sqrt(S((q*D-q*v*v-D*k*k)/(q*v*v+D*k*k))),e=q*c*v/d+(a+h)/2,q=q*-d*k/c+(b+l)/2,v=w.asin(((b-q)/d).toFixed(9));k=w.asin(((l-q)/d).toFixed(9));v=a<e?L-v:v;k=h<e?L-k:k;0>v&&(v=2*L+v);0>k&&(k=2*L+k);g&&v>k&&(v-=2*L);!g&&k>v&&(k-=2*L)}if(S(k-v)>m){var p=k,D=h,t=l;k=v+m*(g&&k>v?1:-1);h=e+c*w.cos(k);l=q+d*w.sin(k);p=Eb(h,l,c,d,f,0,g,D,t,[k,p,e,q])}e=k-v;f=w.cos(v);m=w.sin(v);
g=w.cos(k);k=w.sin(k);e=w.tan(e/4);c=4/3*c*e;e*=4/3*d;d=[a,b];a=[a+c*m,b-e*f];b=[h+c*k,l-e*g];h=[h,l];a[0]=2*d[0]-a[0];a[1]=2*d[1]-a[1];if(i)return[a,b,h][x](p);p=[a,b,h][x](p).join()[ba](",");i=[];h=0;for(l=p.length;h<l;h++)i[h]=h%2?o(p[h-1],p[h],j).y:o(p[h],p[h+1],j).x;return i},Fa=function(a,b,c,d,f,e,g,h,l){var i=1-l;return{x:V(i,3)*a+3*V(i,2)*l*c+3*i*l*l*f+V(l,3)*g,y:V(i,3)*b+3*V(i,2)*l*d+3*i*l*l*e+V(l,3)*h}},Bb=Z(function(a,b,c,d,f,e,g,h){var l=f-2*c+a-(g-2*f+c),i=2*(c-a)-2*(f-c),m=a-c,j=(-i+
w.sqrt(i*i-4*l*m))/2/l,l=(-i-w.sqrt(i*i-4*l*m))/2/l,p=[b,h],k=[a,g];"1e12"<S(j)&&(j=0.5);"1e12"<S(l)&&(l=0.5);0<j&&1>j&&(j=Fa(a,b,c,d,f,e,g,h,j),k.push(j.x),p.push(j.y));0<l&&1>l&&(j=Fa(a,b,c,d,f,e,g,h,l),k.push(j.x),p.push(j.y));l=e-2*d+b-(h-2*e+d);i=2*(d-b)-2*(e-d);m=b-d;j=(-i+w.sqrt(i*i-4*l*m))/2/l;l=(-i-w.sqrt(i*i-4*l*m))/2/l;"1e12"<S(j)&&(j=0.5);"1e12"<S(l)&&(l=0.5);0<j&&1>j&&(j=Fa(a,b,c,d,f,e,g,h,j),k.push(j.x),p.push(j.y));0<l&&1>l&&(j=Fa(a,b,c,d,f,e,g,h,l),k.push(j.x),p.push(j.y));return{min:{x:R[I](0,
k),y:R[I](0,p)},max:{x:J[I](0,k),y:J[I](0,p)}}}),ra=i._path2curve=Z(function(a,b){var c=!b&&ja(a);if(!b&&c.curve)return $(c.curve);var d=Cb(a),f=b&&Cb(b),e={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},g={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},h=function(a,b){var c,d;if(!a)return["C",b.x,b.y,b.x,b.y,b.x,b.y];!(a[0]in{T:1,Q:1})&&(b.qx=b.qy=null);switch(a[0]){case "M":b.X=a[1];b.Y=a[2];break;case "A":a=["C"][x](Eb[I](0,[b.x,b.y][x](a.slice(1))));break;case "S":c=b.x+(b.x-(b.bx||b.x));d=b.y+(b.y-(b.by||
b.y));a=["C",c,d][x](a.slice(1));break;case "T":b.qx=b.x+(b.x-(b.qx||b.x));b.qy=b.y+(b.y-(b.qy||b.y));a=["C"][x](Db(b.x,b.y,b.qx,b.qy,a[1],a[2]));break;case "Q":b.qx=a[1];b.qy=a[2];a=["C"][x](Db(b.x,b.y,a[1],a[2],a[3],a[4]));break;case "L":a=["C"][x]([b.x,b.y,a[1],a[2],a[1],a[2]]);break;case "H":a=["C"][x]([b.x,b.y,a[1],b.y,a[1],b.y]);break;case "V":a=["C"][x]([b.x,b.y,b.x,a[1],b.x,a[1]]);break;case "Z":a=["C"][x]([b.x,b.y,b.X,b.Y,b.X,b.Y])}return a},l=function(a,b){if(7<a[b].length){a[b].shift();
for(var c=a[b];c.length;)a.splice(b++,0,["C"][x](c.splice(0,6)));a.splice(b,1);j=J(d.length,f&&f.length||0)}},i=function(a,b,c,e,g){a&&(b&&"M"==a[g][0]&&"M"!=b[g][0])&&(b.splice(g,0,["M",e.x,e.y]),c.bx=0,c.by=0,c.x=a[g][1],c.y=a[g][2],j=J(d.length,f&&f.length||0))},m=0,j=J(d.length,f&&f.length||0);for(;m<j;m++){d[m]=h(d[m],e);l(d,m);f&&(f[m]=h(f[m],g));f&&l(f,m);i(d,f,e,g,m);i(f,d,g,e,m);var p=d[m],k=f&&f[m],o=p.length,q=f&&k.length;e.x=p[o-2];e.y=p[o-1];e.bx=z(p[o-4])||e.x;e.by=z(p[o-3])||e.y;g.bx=
f&&(z(k[q-4])||g.x);g.by=f&&(z(k[q-3])||g.y);g.x=f&&k[q-2];g.y=f&&k[q-1]}f||(c.curve=$(d));return f?[d,f]:d},null,$);i._parseDots=Z(function(a){for(var b=[],c=0,d=a.length;c<d;c++){var f={},e=a[c].match(/^([^:]*):?([\d\.]*)/);f.color=i.getRGB(e[1]);if(f.color.error)return null;f.color=f.color.hex;e[2]&&(f.offset=e[2]+"%");b.push(f)}c=1;for(d=b.length-1;c<d;c++)if(!b[c].offset){a=z(b[c-1].offset||0);e=0;for(f=c+1;f<d;f++)if(b[f].offset){e=b[f].offset;break}e||(e=100,f=d);e=z(e);for(e=(e-a)/(f-c+1);c<
f;c++)a+=e,b[c].offset=a+"%"}return b});var Ga=i._tear=function(a,b){a==b.top&&(b.top=a.prev);a==b.bottom&&(b.bottom=a.next);a.next&&(a.next.prev=a.prev);a.prev&&(a.prev.next=a.next)};i._tofront=function(a,b){b.top!==a&&(Ga(a,b),a.next=null,a.prev=b.top,b.top.next=a,b.top=a)};i._toback=function(a,b){b.bottom!==a&&(Ga(a,b),a.next=b.bottom,a.prev=null,b.bottom.prev=a,b.bottom=a)};i._insertafter=function(a,b,c){Ga(a,c);b==c.top&&(c.top=a);b.next&&(b.next.prev=a);a.next=b.next;a.prev=b;b.next=a};i._insertbefore=
function(a,b,c){Ga(a,c);b==c.bottom&&(c.bottom=a);b.prev&&(b.prev.next=a);a.prev=b.prev;b.prev=a;a.next=b};var rc=i.toMatrix=function(a,b){var c=ab(a),d={_:{transform:""},getBBox:function(){return c}};pb(d,b);return d.matrix};i.transformPath=function(a,b){return Za(a,rc(a,b))};var pb=i._extractTransform=function(a,b){if(null==b)return a._.transform;var b=K(b).replace(/\.{3}|\u2026/g,a._.transform||""),c=i.parseTransformString(b),d=0,f=0,e=0,g=1,h=1,l=a._,e=new ha;l.transform=c||[];if(c)for(var f=
0,n=c.length;f<n;f++){var m=c[f],j=m.length,p=K(m[0]).toLowerCase(),k=m[0]!=p,o=k?e.invert():0,q;"t"==p&&3==j?k?(j=o.x(0,0),p=o.y(0,0),k=o.x(m[1],m[2]),o=o.y(m[1],m[2]),e.translate(k-j,o-p)):e.translate(m[1],m[2]):"r"==p?2==j?(q=q||a.getBBox(1),e.rotate(m[1],q.x+q.width/2,q.y+q.height/2),d+=m[1]):4==j&&(k?(k=o.x(m[2],m[3]),o=o.y(m[2],m[3]),e.rotate(m[1],k,o)):e.rotate(m[1],m[2],m[3]),d+=m[1]):"s"==p?2==j||3==j?(q=q||a.getBBox(1),e.scale(m[1],m[j-1],q.x+q.width/2,q.y+q.height/2),g*=m[1],h*=m[j-1]):
5==j&&(k?(k=o.x(m[3],m[4]),o=o.y(m[3],m[4]),e.scale(m[1],m[2],k,o)):e.scale(m[1],m[2],m[3],m[4]),g*=m[1],h*=m[2]):"m"==p&&7==j&&e.add(m[1],m[2],m[3],m[4],m[5],m[6]);l.dirtyT=1;a.matrix=e}a.matrix=e;l.sx=g;l.sy=h;l.deg=d;l.dx=f=e.e;l.dy=e=e.f;1==g&&1==h&&!d&&l.bbox?(l.bbox.x+=+f,l.bbox.y+=+e):l.dirtyT=1},Fb=function(a){var b=a[0];switch(b.toLowerCase()){case "t":return[b,0,0];case "m":return[b,1,0,0,1,0,0];case "r":return 4==a.length?[b,0,a[2],a[3]]:[b,0];case "s":return 5==a.length?[b,1,1,a[3],a[4]]:
3==a.length?[b,1,1]:[b,1]}},Zb=i._equaliseTransform=function(a,b){for(var b=K(b).replace(/\.{3}|\u2026/g,a),a=i.parseTransformString(a)||[],b=i.parseTransformString(b)||[],c=J(a.length,b.length),d=[],f=[],e=0,g,h,l,n;e<c;e++){l=a[e]||Fb(b[e]);n=b[e]||Fb(l);if(l[0]!=n[0]||"r"==l[0].toLowerCase()&&(l[2]!=n[2]||l[3]!=n[3])||"s"==l[0].toLowerCase()&&(l[3]!=n[3]||l[4]!=n[4]))return;d[e]=[];f[e]=[];g=0;for(h=J(l.length,n.length);g<h;g++)g in l&&(d[e][g]=l[g]),g in n&&(f[e][g]=n[g])}return{from:d,to:f}};
i._getContainer=function(a,b,c,d){var f;f=null==d&&!i.is(a,"object")?u.doc.getElementById(a):a;if(null!=f)return f.tagName?null==b?{container:f,width:f.style.pixelWidth||f.offsetWidth,height:f.style.pixelHeight||f.offsetHeight}:{container:f,width:b,height:c}:{container:1,x:a,y:b,width:c,height:d}};i.pathToRelative=qc;i._engine={};i.path2curve=ra;i.matrix=function(a,b,c,d,f,e){return new ha(a,b,c,d,f,e)};var N=ha.prototype,bb=function(a){return a[0]*a[0]+a[1]*a[1]},Gb=function(a){var b=w.sqrt(bb(a));
a[0]&&(a[0]/=b);a[1]&&(a[1]/=b)};N.add=function(a,b,c,d,f,e){var g=[[],[],[]],h=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],b=[[a,c,f],[b,d,e],[0,0,1]];a&&a instanceof ha&&(b=[[a.a,a.c,a.e],[a.b,a.d,a.f],[0,0,1]]);for(a=0;3>a;a++)for(c=0;3>c;c++){for(d=f=0;3>d;d++)f+=h[a][d]*b[d][c];g[a][c]=f}this.a=g[0][0];this.b=g[1][0];this.c=g[0][1];this.d=g[1][1];this.e=g[0][2];this.f=g[1][2]};N.invert=function(){var a=this.a*this.d-this.b*this.c;return new ha(this.d/a,-this.b/a,-this.c/a,this.a/
a,(this.c*this.f-this.d*this.e)/a,(this.b*this.e-this.a*this.f)/a)};N.clone=function(){return new ha(this.a,this.b,this.c,this.d,this.e,this.f)};N.translate=function(a,b){this.add(1,0,0,1,a,b)};N.scale=function(a,b,c,d){null==b&&(b=a);(c||d)&&this.add(1,0,0,1,c,d);this.add(a,0,0,b,0,0);(c||d)&&this.add(1,0,0,1,-c,-d)};N.rotate=function(a,b,c){var a=i.rad(a),b=b||0,c=c||0,d=+w.cos(a).toFixed(9),a=+w.sin(a).toFixed(9);this.add(d,a,-a,d,b,c);this.add(1,0,0,1,-b,-c)};N.x=function(a,b){return a*this.a+
b*this.c+this.e};N.y=function(a,b){return a*this.b+b*this.d+this.f};N.get=function(a){return+this[K.fromCharCode(97+a)].toFixed(4)};N.toString=function(){return i.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()};N.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+
this.get(5)+", sizingmethod='auto expand')"};N.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]};N.split=function(){var a={};a.dx=this.e;a.dy=this.f;var b=[[this.a,this.c],[this.b,this.d]];a.scalex=w.sqrt(bb(b[0]));Gb(b[0]);a.shear=b[0][0]*b[1][0]+b[0][1]*b[1][1];b[1]=[b[1][0]-b[0][0]*a.shear,b[1][1]-b[0][1]*a.shear];a.scaley=w.sqrt(bb(b[1]));Gb(b[1]);a.shear/=a.scaley;var c=-b[0][1],b=b[1][1];0>b?(a.rotate=i.deg(w.acos(b)),0>c&&(a.rotate=360-a.rotate)):a.rotate=i.deg(w.asin(c));a.isSimple=
!+a.shear.toFixed(9)&&(a.scalex.toFixed(9)==a.scaley.toFixed(9)||!a.rotate);a.isSuperSimple=!+a.shear.toFixed(9)&&a.scalex.toFixed(9)==a.scaley.toFixed(9)&&!a.rotate;a.noRotation=!+a.shear.toFixed(9)&&!a.rotate;return a};N.toTransformString=function(a){a=a||this[ba]();return a.isSimple?(a.scalex=+a.scalex.toFixed(4),a.scaley=+a.scaley.toFixed(4),a.rotate=+a.rotate.toFixed(4),(a.dx||a.dy?"t"+[a.dx,a.dy]:"")+(1!=a.scalex||1!=a.scaley?"s"+[a.scalex,a.scaley,0,0]:"")+(a.rotate?"r"+[a.rotate,0,0]:"")):
"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]};var Ha=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);A.safari="Apple Computer, Inc."==navigator.vendor&&(Ha&&4>Ha[1]||"iP"==navigator.platform.slice(0,2))||"Google Inc."==navigator.vendor&&Ha&&8>Ha[1]?function(){var a=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){a.remove()})}:lc;var sc=function(){this.returnValue=!1},tc=function(){return this.originalEvent.preventDefault()},
uc=function(){this.cancelBubble=!0},vc=function(){return this.originalEvent.stopPropagation()},Hb;Hb=u.doc.addEventListener?function(a,b,c,d){var f=Ua&&Va[b]?Va[b]:b,e=function(e){var f=e.clientX+(u.doc.documentElement.scrollLeft||u.doc.body.scrollLeft),l=e.clientY+(u.doc.documentElement.scrollTop||u.doc.body.scrollTop);if(Ua&&Va[F](b))for(var i=0,m=e.targetTouches&&e.targetTouches.length;i<m;i++)if(e.targetTouches[i].target==a){m=e;e=e.targetTouches[i];e.originalEvent=m;e.preventDefault=tc;e.stopPropagation=
vc;break}return c.call(d,e,f,l)};a.addEventListener(f,e,!1);return function(){a.removeEventListener(f,e,!1);return!0}}:u.doc.attachEvent?function(a,b,c,d){var f=function(a){var a=a||u.win.event,b=a.clientX+(u.doc.documentElement.scrollLeft||u.doc.body.scrollLeft),f=a.clientY+(u.doc.documentElement.scrollTop||u.doc.body.scrollTop);a.preventDefault=a.preventDefault||sc;a.stopPropagation=a.stopPropagation||uc;return c.call(d,a,b,f)};a.attachEvent("on"+b,f);return function(){a.detachEvent("on"+b,f);return!0}}:
void 0;for(var ka=[],cb=function(a){for(var b=a.clientX,c=a.clientY,d=u.doc.documentElement.scrollTop||u.doc.body.scrollTop,f=u.doc.documentElement.scrollLeft||u.doc.body.scrollLeft,e,g=ka.length;g--;){e=ka[g];if(Ua)for(var h=a.touches.length,i;h--;){if(i=a.touches[h],i.identifier==e.el._drag.id){b=i.clientX;c=i.clientY;(a.originalEvent?a.originalEvent:a).preventDefault();break}}else a.preventDefault();var h=e.el.node,n=h.nextSibling,m=h.parentNode,j=h.style.display;u.win.opera&&m.removeChild(h);
h.style.display="none";i=e.el.paper.getElementByPoint(b,c);h.style.display=j;u.win.opera&&(n?m.insertBefore(h,n):m.appendChild(h));i&&B("raphael.drag.over."+e.el.id,e.el,i);b+=f;c+=d;B("raphael.drag.move."+e.el.id,e.move_scope||e.el,b-e.el._drag.x,c-e.el._drag.y,b,c,a)}},db=function(a){i.unmousemove(cb).unmouseup(db);for(var b=ka.length,c;b--;)c=ka[b],c.el._drag={},B("raphael.drag.end."+c.el.id,c.end_scope||c.start_scope||c.move_scope||c.el,a);ka=[]},C=i.el={},Ib=ub.length;Ib--;)(function(a){i[a]=
C[a]=function(b,c){i.is(b,"function")&&(this.events=this.events||[],this.events.push({name:a,f:b,unbind:Hb(this.shape||this.node||u.doc,a,b,c||this)}));return this};i["un"+a]=C["un"+a]=function(b){for(var c=this.events||[],d=c.length;d--;)if(c[d].name==a&&c[d].f==b){c[d].unbind();c.splice(d,1);!c.length&&delete this.events;break}return this}})(ub[Ib]);C.data=function(a,b){var c=ta[this.id]=ta[this.id]||{};if(1==arguments.length){if(i.is(a,"object")){for(var d in a)a[F](d)&&this.data(d,a[d]);return this}B("raphael.data.get."+
this.id,this,c[a],a);return c[a]}c[a]=b;B("raphael.data.set."+this.id,this,b,a);return this};C.removeData=function(a){null==a?ta[this.id]={}:ta[this.id]&&delete ta[this.id][a];return this};C.hover=function(a,b,c,d){return this.mouseover(a,c).mouseout(b,d||c)};C.unhover=function(a,b){return this.unmouseover(a).unmouseout(b)};var na=[];C.drag=function(a,b,c,d,f,e){function g(g){(g.originalEvent||g).preventDefault();var l=u.doc.documentElement.scrollTop||u.doc.body.scrollTop,n=u.doc.documentElement.scrollLeft||
u.doc.body.scrollLeft;this._drag.x=g.clientX+n;this._drag.y=g.clientY+l;this._drag.id=g.identifier;!ka.length&&i.mousemove(cb).mouseup(db);ka.push({el:this,move_scope:d,start_scope:f,end_scope:e});b&&B.on("raphael.drag.start."+this.id,b);a&&B.on("raphael.drag.move."+this.id,a);c&&B.on("raphael.drag.end."+this.id,c);B("raphael.drag.start."+this.id,f||d||this,g.clientX+n,g.clientY+l,g)}this._drag={};na.push({el:this,start:g});this.mousedown(g);return this};C.onDragOver=function(a){a?B.on("raphael.drag.over."+
this.id,a):B.unbind("raphael.drag.over."+this.id)};C.undrag=function(){for(var a=na.length;a--;)na[a].el==this&&(this.unmousedown(na[a].start),na.splice(a,1),B.unbind("raphael.drag.*."+this.id));!na.length&&i.unmousemove(cb).unmouseup(db)};A.circle=function(a,b,c){a=i._engine.circle(this,a||0,b||0,c||0);this.__set__&&this.__set__.push(a);return a};A.rect=function(a,b,c,d,f){a=i._engine.rect(this,a||0,b||0,c||0,d||0,f||0);this.__set__&&this.__set__.push(a);return a};A.ellipse=function(a,b,c,d){a=i._engine.ellipse(this,
a||0,b||0,c||0,d||0);this.__set__&&this.__set__.push(a);return a};A.path=function(a){a&&!i.is(a,"string")&&!i.is(a[0],P)&&(a+="");var b=i._engine.path(i.format[I](i,arguments),this);this.__set__&&this.__set__.push(b);return b};A.image=function(a,b,c,d,f){a=i._engine.image(this,a||"about:blank",b||0,c||0,d||0,f||0);this.__set__&&this.__set__.push(a);return a};A.text=function(a,b,c){a=i._engine.text(this,a||0,b||0,K(c));this.__set__&&this.__set__.push(a);return a};A.set=function(a){!i.is(a,"array")&&
(a=Array.prototype.splice.call(arguments,0,arguments.length));var b=new oa(a);this.__set__&&this.__set__.push(b);return b};A.setStart=function(a){this.__set__=a||this.set()};A.setFinish=function(){var a=this.__set__;delete this.__set__;return a};A.setSize=function(a,b){return i._engine.setSize.call(this,a,b)};A.setViewBox=function(a,b,c,d,f){return i._engine.setViewBox.call(this,a,b,c,d,f)};A.top=A.bottom=null;A.raphael=i;A.getElementByPoint=function(a,b){var c,d,f=this.canvas,e=u.doc.elementFromPoint(a,
b);if(u.win.opera&&"svg"==e.tagName){d=f.getBoundingClientRect();c=f.ownerDocument;var g=c.body,h=c.documentElement;c=d.top+(u.win.pageYOffset||h.scrollTop||g.scrollTop)-(h.clientTop||g.clientTop||0);d=d.left+(u.win.pageXOffset||h.scrollLeft||g.scrollLeft)-(h.clientLeft||g.clientLeft||0);g=f.createSVGRect();g.x=a-d;g.y=b-c;g.width=g.height=1;c=f.getIntersectionList(g,null);c.length&&(e=c[c.length-1])}if(!e)return null;for(;e.parentNode&&e!=f.parentNode&&!e.raphael;)e=e.parentNode;e==this.canvas.parentNode&&
(e=f);return e=e&&e.raphael?this.getById(e.raphaelid):null};A.getById=function(a){for(var b=this.bottom;b;){if(b.id==a)return b;b=b.next}return null};A.forEach=function(a,b){for(var c=this.bottom;c&&!1!==a.call(b,c);)c=c.next;return this};A.getElementsByPoint=function(a,b){var c=this.set();this.forEach(function(d){d.isPointInside(a,b)&&c.push(d)});return c};C.isPointInside=function(a,b){var c=this.realPath=this.realPath||Ca[this.type](this);return i.isPointInsidePath(c,a,b)};C.getBBox=function(a){if(this.removed)return{};
var b=this._;if(a){if(b.dirty||!b.bboxwt)this.realPath=Ca[this.type](this),b.bboxwt=ab(this.realPath),b.bboxwt.toString=ob,b.dirty=0;return b.bboxwt}if(b.dirty||b.dirtyT||!b.bbox){if(b.dirty||!this.realPath)b.bboxwt=0,this.realPath=Ca[this.type](this);b.bbox=ab(Za(this.realPath,this.matrix));b.bbox.toString=ob;b.dirty=b.dirtyT=0}return b.bbox};C.clone=function(){if(this.removed)return null;var a=this.paper[this.type]().attr(this.attr());this.__set__&&this.__set__.push(a);return a};C.glow=function(a){if("text"==
this.type)return null;for(var a=a||{},b=(a.width||10)+(+this.attr("stroke-width")||1),c=a.fill||!1,d=a.opacity||0.5,f=a.offsetx||0,e=a.offsety||0,a=a.color||"#000",g=b/2,h=this.paper,i=h.set(),n=this.realPath||Ca[this.type](this),n=this.matrix?Za(n,this.matrix):n,m=1;m<g+1;m++)i.push(h.path(n).attr({stroke:a,fill:c?a:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(b/g*m).toFixed(3),opacity:+(d/g).toFixed(3)}));return i.insertBefore(this).translate(f,e)};var eb=function(a,
b,c,d,f,e,g,h,l){return null==l?ma(a,b,c,d,f,e,g,h):i.findDotsAtSegment(a,b,c,d,f,e,g,h,Wb(a,b,c,d,f,e,g,h,l))},fb=function(a,b){return function(c,d,f){for(var c=ra(c),e,g,h,l,n="",m={},j=0,p=0,k=c.length;p<k;p++){h=c[p];if("M"==h[0])e=+h[1],g=+h[2];else{l=eb(e,g,h[1],h[2],h[3],h[4],h[5],h[6]);if(j+l>d){if(b&&!m.start){e=eb(e,g,h[1],h[2],h[3],h[4],h[5],h[6],d-j);n+=["C"+e.start.x,e.start.y,e.m.x,e.m.y,e.x,e.y];if(f)return n;m.start=n;n=["M"+e.x,e.y+"C"+e.n.x,e.n.y,e.end.x,e.end.y,h[5],h[6]].join();
j+=l;e=+h[5];g=+h[6];continue}if(!a&&!b)return e=eb(e,g,h[1],h[2],h[3],h[4],h[5],h[6],d-j),{x:e.x,y:e.y,alpha:e.alpha}}j+=l;e=+h[5];g=+h[6]}n+=h.shift()+h}m.end=n;e=a?j:b?m:i.findDotsAtSegment(e,g,h[0],h[1],h[2],h[3],h[4],h[5],1);e.alpha&&(e={x:e.x,y:e.y,alpha:e.alpha});return e}},Jb=fb(1),Kb=fb(),gb=fb(0,1);i.getTotalLength=Jb;i.getPointAtLength=Kb;i.getSubpath=function(a,b,c){if(1E-6>this.getTotalLength(a)-c)return gb(a,b).end;a=gb(a,c,1);return b?gb(a,b).end:a};C.getTotalLength=function(){if("path"==
this.type)return this.node.getTotalLength?this.node.getTotalLength():Jb(this.attrs.path)};C.getPointAtLength=function(a){if("path"==this.type)return Kb(this.attrs.path,a)};C.getSubpath=function(a,b){if("path"==this.type)return i.getSubpath(this.attrs.path,a,b)};var W=i.easing_formulas={linear:function(a){return a},"<":function(a){return V(a,1.7)},">":function(a){return V(a,0.48)},"<>":function(a){var b=0.48-a/1.04,c=w.sqrt(0.1734+b*b),a=c-b,a=V(S(a),1/3)*(0>a?-1:1),b=-c-b,b=V(S(b),1/3)*(0>b?-1:1),
a=a+b+0.5;return 3*(1-a)*a*a+a*a*a},backIn:function(a){return a*a*(2.70158*a-1.70158)},backOut:function(a){a-=1;return a*a*(2.70158*a+1.70158)+1},elastic:function(a){return a==!!a?a:V(2,-10*a)*w.sin((a-0.075)*2*L/0.3)+1},bounce:function(a){a<1/2.75?a*=7.5625*a:a<2/2.75?(a-=1.5/2.75,a=7.5625*a*a+0.75):a<2.5/2.75?(a-=2.25/2.75,a=7.5625*a*a+0.9375):(a-=2.625/2.75,a=7.5625*a*a+0.984375);return a}};W.easeIn=W["ease-in"]=W["<"];W.easeOut=W["ease-out"]=W[">"];W.easeInOut=W["ease-in-out"]=W["<>"];W["back-in"]=
W.backIn;W["back-out"]=W.backOut;var y=[],qb=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){setTimeout(a,16)},Ta=function(){for(var a=+new Date,b=0;b<y.length;b++){var c=y[b];if(!c.el.removed&&!c.paused){var d=a-c.start,f=c.ms,e=c.easing,g=c.from,h=c.diff,l=c.to,n=c.el,m={},j,p={},k;c.initstatus?(d=(c.initstatus*c.anim.top-c.prev)/(c.percent-c.prev)*f,c.status=c.initstatus,
delete c.initstatus,c.stop&&y.splice(b--,1)):c.status=(c.prev+(c.percent-c.prev)*(d/f))/c.anim.top;if(!(0>d))if(d<f){var o=e(d/f),q;for(q in g)if(g[F](q)){switch(Ra[q]){case E:j=+g[q]+o*f*h[q];break;case "colour":j="rgb("+[hb(Wa(g[q].r+o*f*h[q].r)),hb(Wa(g[q].g+o*f*h[q].g)),hb(Wa(g[q].b+o*f*h[q].b))].join()+")";break;case "path":j=[];d=0;for(e=g[q].length;d<e;d++){j[d]=[g[q][d][0]];l=1;for(p=g[q][d].length;l<p;l++)j[d][l]=+g[q][d][l]+o*f*h[q][d][l];j[d]=j[d].join(qa)}j=j.join(qa);break;case "transform":if(h[q].real){j=
[];d=0;for(e=g[q].length;d<e;d++){j[d]=[g[q][d][0]];l=1;for(p=g[q][d].length;l<p;l++)j[d][l]=g[q][d][l]+o*f*h[q][d][l]}}else j=function(a){return+g[q][a]+o*f*h[q][a]},j=[["m",j(0),j(1),j(2),j(3),j(4),j(5)]];break;case "csv":if("clip-rect"==q){j=[];for(d=4;d--;)j[d]=+g[q][d]+o*f*h[q][d]}break;default:e=[][x](g[q]);j=[];for(d=n.paper.customAttributes[q].length;d--;)j[d]=+e[d]+o*f*h[q][d]}m[q]=j}n.attr(m);(function(a,b,c){setTimeout(function(){B("raphael.anim.frame."+a,b,c)})})(n.id,n,c.anim)}else{(function(a,
b,c){setTimeout(function(){B("raphael.anim.frame."+b.id,b,c);B("raphael.anim.finish."+b.id,b,c);i.is(a,"function")&&a.call(b)})})(c.callback,n,c.anim);n.attr(l);y.splice(b--,1);if(1<c.repeat&&!c.next){for(k in l)l[F](k)&&(p[k]=c.totalOrigin[k]);c.el.attr(p);sa(c.anim,c.el,c.anim.percents[0],null,c.totalOrigin,c.repeat-1)}c.next&&!c.stop&&sa(c.anim,c.el,c.next,null,c.totalOrigin,c.repeat)}}}i.svg&&n&&n.paper&&n.paper.safari();y.length&&qb(Ta)},hb=function(a){return 255<a?255:0>a?0:a};C.animateWith=
function(a,b,c,d,f,e){if(this.removed)return e&&e.call(this),this;c=c instanceof da?c:i.animation(c,d,f,e);sa(c,this,c.percents[0],null,this.attr());c=0;for(d=y.length;c<d;c++)if(y[c].anim==b&&y[c].el==a){y[d-1].start=y[c].start;break}return this};C.onAnimation=function(a){a?B.on("raphael.anim.frame."+this.id,a):B.unbind("raphael.anim.frame."+this.id);return this};da.prototype.delay=function(a){var b=new da(this.anim,this.ms);b.times=this.times;b.del=+a||0;return b};da.prototype.repeat=function(a){var b=
new da(this.anim,this.ms);b.del=this.del;b.times=w.floor(J(a,0))||1;return b};i.animation=function(a,b,c,d){if(a instanceof da)return a;if(i.is(c,"function")||!c)d=d||c||null,c=null;var a=Object(a),b=+b||0,f={},e,g;for(g in a)a[F](g)&&(z(g)!=g&&z(g)+"%"!=g)&&(e=!0,f[g]=a[g]);return e?(c&&(f.easing=c),d&&(f.callback=d),new da({100:f},b)):new da(a,b)};C.animate=function(a,b,c,d){if(this.removed)return d&&d.call(this),this;a=a instanceof da?a:i.animation(a,b,c,d);sa(a,this,a.percents[0],null,this.attr());
return this};C.setTime=function(a,b){a&&null!=b&&this.status(a,R(b,a.ms)/a.ms);return this};C.status=function(a,b){var c=[],d=0,f,e;if(null!=b)return sa(a,this,-1,R(b,1)),this;for(f=y.length;d<f;d++)if(e=y[d],e.el.id==this.id&&(!a||e.anim==a)){if(a)return e.status;c.push({anim:e.anim,status:e.status})}return a?0:c};C.pause=function(a){for(var b=0;b<y.length;b++)if(y[b].el.id==this.id&&(!a||y[b].anim==a)&&!1!==B("raphael.anim.pause."+this.id,this,y[b].anim))y[b].paused=!0;return this};C.resume=function(a){for(var b=
0;b<y.length;b++)if(y[b].el.id==this.id&&(!a||y[b].anim==a)){var c=y[b];!1!==B("raphael.anim.resume."+this.id,this,c.anim)&&(delete c.paused,this.status(c.anim,c.status))}return this};C.stop=function(a){for(var b=0;b<y.length;b++)y[b].el.id==this.id&&(!a||y[b].anim==a)&&!1!==B("raphael.anim.stop."+this.id,this,y[b].anim)&&y.splice(b--,1);return this};B.on("raphael.remove",rb);B.on("raphael.clear",rb);C.toString=function(){return"Rapha\u00ebl\u2019s object"};var oa=function(a){this.items=[];this.length=
0;this.type="set";if(a)for(var b=0,c=a.length;b<c;b++)if(a[b]&&(a[b].constructor==C.constructor||a[b].constructor==oa))this[this.items.length]=this.items[this.items.length]=a[b],this.length++},O=oa.prototype;O.push=function(){for(var a,b,c=0,d=arguments.length;c<d;c++)if((a=arguments[c])&&(a.constructor==C.constructor||a.constructor==oa))b=this.items.length,this[b]=this.items[b]=a,this.length++;return this};O.pop=function(){this.length&&delete this[this.length--];return this.items.pop()};O.forEach=
function(a,b){for(var c=0,d=this.items.length;c<d&&!1!==a.call(b,this.items[c],c);c++);return this};for(var ib in C)C[F](ib)&&(O[ib]=function(a){return function(){var b=arguments;return this.forEach(function(c){c[a][I](c,b)})}}(ib));O.attr=function(a,b){if(a&&i.is(a,P)&&i.is(a[0],"object"))for(var c=0,d=a.length;c<d;c++)this.items[c].attr(a[c]);else{c=0;for(d=this.items.length;c<d;c++)this.items[c].attr(a,b)}return this};O.clear=function(){for(;this.length;)this.pop()};O.splice=function(a,b,c){var a=
0>a?J(this.length+a,0):a,b=J(0,R(this.length-a,b)),d=[],f=[],e=[],g;for(g=2;g<arguments.length;g++)e.push(arguments[g]);for(g=0;g<b;g++)f.push(this[a+g]);for(;g<this.length-a;g++)d.push(this[a+g]);var h=e.length;for(g=0;g<h+d.length;g++)this.items[a+g]=this[a+g]=g<h?e[g]:d[g-h];for(g=this.items.length=this.length-=b-h;this[g];)delete this[g++];return new oa(f)};O.exclude=function(a){for(var b=0,c=this.length;b<c;b++)if(this[b]==a)return this.splice(b,1),!0};O.animate=function(a,b,c,d){(i.is(c,"function")||
!c)&&(d=c||null);var f=this.items.length,e=f,g=this,h;if(!f)return this;d&&(h=function(){!--f&&d.call(g)});c=i.is(c,"string")?c:h;b=i.animation(a,b,c,h);for(a=this.items[--e].animate(b);e--;)this.items[e]&&!this.items[e].removed&&this.items[e].animateWith(a,b,b);return this};O.insertAfter=function(a){for(var b=this.items.length;b--;)this.items[b].insertAfter(a);return this};O.getBBox=function(){for(var a=[],b=[],c=[],d=[],f=this.items.length;f--;)if(!this.items[f].removed){var e=this.items[f].getBBox();
a.push(e.x);b.push(e.y);c.push(e.x+e.width);d.push(e.y+e.height)}a=R[I](0,a);b=R[I](0,b);c=J[I](0,c);d=J[I](0,d);return{x:a,y:b,x2:c,y2:d,width:c-a,height:d-b}};O.clone=function(a){for(var a=new oa,b=0,c=this.items.length;b<c;b++)a.push(this.items[b].clone());return a};O.toString=function(){return"Rapha\u00ebl\u2018s set"};i.registerFont=function(a){if(!a.face)return a;this.fonts=this.fonts||{};var b={w:a.w,face:{},glyphs:{}},c=a.face["font-family"],d;for(d in a.face)a.face[F](d)&&(b.face[d]=a.face[d]);
this.fonts[c]?this.fonts[c].push(b):this.fonts[c]=[b];if(!a.svg){b.face["units-per-em"]=ia(a.face["units-per-em"],10);for(var f in a.glyphs)if(a.glyphs[F](f)&&(c=a.glyphs[f],b.glyphs[f]={w:c.w,k:{},d:c.d&&"M"+c.d.replace(/[mlcxtrv]/g,function(a){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[a]||"M"})+"z"},c.k))for(var e in c.k)c[F](e)&&(b.glyphs[f].k[e]=c.k[e])}return a};A.getFont=function(a,b,c,d){d=d||"normal";c=c||"normal";b=+b||{normal:400,bold:700,lighter:300,bolder:800}[b]||400;if(i.fonts){var f=
i.fonts[a];if(!f){var a=RegExp("(^|\\s)"+a.replace(/[^\w\d\s+!~.:_-]/g,"")+"(\\s|$)","i"),e;for(e in i.fonts)if(i.fonts[F](e)&&a.test(e)){f=i.fonts[e];break}}var g;if(f){e=0;for(a=f.length;e<a&&!(g=f[e],g.face["font-weight"]==b&&(g.face["font-style"]==c||!g.face["font-style"])&&g.face["font-stretch"]==d);e++);}return g}};A.print=function(a,b,c,d,f,e,g){var e=e||"middle",g=J(R(g||0,1),-1),h=K(c)[ba](""),l=0,n=0,m="";i.is(d,c)&&(d=this.getFont(d));if(d)for(var c=(f||16)/d.face["units-per-em"],j=d.face.bbox[ba](Sa),
f=+j[0],o=j[3]-j[1],k=0,e=+j[1]+("baseline"==e?o+ +d.face.descent:o/2),j=0,r=h.length;j<r;j++){if("\n"==h[j])n=s=l=0,k+=o;else var q=n&&d.glyphs[h[j-1]]||{},s=d.glyphs[h[j]],l=l+(n?(q.w||d.w)+(q.k&&q.k[h[j]]||0)+d.w*g:0),n=1;s&&s.d&&(m+=i.transformPath(s.d,["t",l*c,k*c,"s",c,c,f,e,"t",(a-f)/c,(b-e)/c]))}return this.path(m).attr({fill:"#000",stroke:"none"})};A.add=function(a){if(i.is(a,"array"))for(var b=this.set(),c=0,d=a.length,f;c<d;c++)f=a[c]||{},bc[F](f.type)&&b.push(this[f.type]().attr(f));return b};
i.format=function(a,b){var c=i.is(b,P)?[0][x](b):arguments;a&&i.is(a,"string")&&c.length-1&&(a=a.replace(cc,function(a,b){return null==c[++b]?"":c[b]}));return a||""};var wc=/\{([^\}]+)\}/g,xc=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;i.fullfill=function(a,b){return String(a).replace(wc,function(a,d){var f=b;d.replace(xc,function(a,b,c,d,i){b=b||d;f&&(b in f&&(f=f[b]),"function"==typeof f&&i&&(f=f()))});return f=(null==f||f==b?a:f)+""})};i.ninja=function(){sb?u.win.Raphael=dc:delete Raphael;
return i};i.st=O;var la=document,Lb=void 0,Mb=function(){/in/.test(la.readyState)?setTimeout(Mb,9):i.eve("raphael.DOMload")};null==la.readyState&&la.addEventListener&&(la.addEventListener("DOMContentLoaded",Lb=function(){la.removeEventListener("DOMContentLoaded",Lb,!1);la.readyState="complete"},!1),la.readyState="loading");Mb();sb?u.win.Raphael=i:Raphael=i;B.on("raphael.DOMload",function(){Oa=true})}if(window.Raphael&&window.Raphael.svg){var s=window.Raphael,X=String,Y=parseFloat,Nb=parseInt,pa=Math,
jb=pa.max,Ia=pa.abs,kb=pa.pow,ua=/[, ]+/,Ja=s.eve,yc={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},aa={};s.toString=function(){return"Your browser supports SVG.\nYou are running Rapha\u00ebl "+this.version};var r=function(a,b){if(b){"string"==typeof a&&(a=r(a));for(var c in b)b.hasOwnProperty(c)&&("xlink:"==c.substring(0,6)?a.setAttributeNS("http://www.w3.org/1999/xlink",
c.substring(6),X(b[c])):a.setAttribute(c,X(b[c])))}else a=s._g.doc.createElementNS("http://www.w3.org/2000/svg",a),a.style&&(a.style.webkitTapHighlightColor="rgba(0,0,0,0)");return a},Ob=function(a,b){var c="linear",d=a.id+b,f=0.5,e=0.5,g=a.node,h=a.paper,i=g.style,n=s._g.doc.getElementById(d);if(!n){b=X(b).replace(s._radial_gradient,function(a,b,d){c="radial";b&&d&&(f=Y(b),e=Y(d),a=2*(0.5<e)-1,0.25<kb(f-0.5,2)+kb(e-0.5,2)&&(e=pa.sqrt(0.25-kb(f-0.5,2))*a+0.5)&&0.5!=e&&(e=e.toFixed(5)-1E-5*a));return""});
b=b.split(/\s*\-\s*/);if("linear"==c){n=b.shift();n=-Y(n);if(isNaN(n))return null;var m=[0,0,pa.cos(s.rad(n)),pa.sin(s.rad(n))],n=1/(jb(Ia(m[2]),Ia(m[3]))||1);m[2]*=n;m[3]*=n;0>m[2]&&(m[0]=-m[2],m[2]=0);0>m[3]&&(m[1]=-m[3],m[3]=0)}var j=s._parseDots(b);if(!j)return null;d=d.replace(/[\(\)\s,\xb0#]/g,"_");a.gradient&&d!=a.gradient.id&&(h.defs.removeChild(a.gradient),delete a.gradient);if(!a.gradient){n=r(c+"Gradient",{id:d});a.gradient=n;r(n,"radial"==c?{fx:f,fy:e}:{x1:m[0],y1:m[1],x2:m[2],y2:m[3],
gradientTransform:a.matrix.invert()});h.defs.appendChild(n);h=0;for(m=j.length;h<m;h++)n.appendChild(r("stop",{offset:j[h].offset?j[h].offset:h?"100%":"0%","stop-color":j[h].color||"#fff"}))}}r(g,{fill:"url(#"+d+")",opacity:1,"fill-opacity":1});i.fill="";i.opacity=1;return i.fillOpacity=1},Ka=function(a){var b=a.getBBox(1);r(a.pattern,{patternTransform:a.matrix.invert()+" translate("+b.x+","+b.y+")"})},ea=function(a,b,c){if("path"==a.type){for(var d=X(b).toLowerCase().split("-"),f=a.paper,e=c?"end":
"start",g=a.node,h=a.attrs,i=h["stroke-width"],n=d.length,m="classic",j,o,k=3,u=3,q=5;n--;)switch(d[n]){case "block":case "classic":case "oval":case "diamond":case "open":case "none":m=d[n];break;case "wide":u=5;break;case "narrow":u=2;break;case "long":k=5;break;case "short":k=2}"open"==m?(k+=2,u+=2,q+=2,j=1,o=c?4:1,d={fill:"none",stroke:h.stroke}):(o=j=k/2,d={fill:h.stroke,stroke:"none"});a._.arrows?c?(a._.arrows.endPath&&aa[a._.arrows.endPath]--,a._.arrows.endMarker&&aa[a._.arrows.endMarker]--):
(a._.arrows.startPath&&aa[a._.arrows.startPath]--,a._.arrows.startMarker&&aa[a._.arrows.startMarker]--):a._.arrows={};if("none"!=m){var n="raphael-marker-"+m,w="raphael-marker-"+e+m+k+u;s._g.doc.getElementById(n)?aa[n]++:(f.defs.appendChild(r(r("path"),{"stroke-linecap":"round",d:yc[m],id:n})),aa[n]=1);var v=s._g.doc.getElementById(w);v?(aa[w]++,k=v.getElementsByTagName("use")[0]):(v=r(r("marker"),{id:w,markerHeight:u,markerWidth:k,orient:"auto",refX:o,refY:u/2}),k=r(r("use"),{"xlink:href":"#"+n,
transform:(c?"rotate(180 "+k/2+" "+u/2+") ":"")+"scale("+k/q+","+u/q+")","stroke-width":(1/((k/q+u/q)/2)).toFixed(4)}),v.appendChild(k),f.defs.appendChild(v),aa[w]=1);r(k,d);f=j*("diamond"!=m&&"oval"!=m);c?(c=a._.arrows.startdx*i||0,i=s.getTotalLength(h.path)-f*i):(c=f*i,i=s.getTotalLength(h.path)-(a._.arrows.enddx*i||0));d={};d["marker-"+e]="url(#"+w+")";if(i||c)d.d=Raphael.getSubpath(h.path,c,i);r(g,d);a._.arrows[e+"Path"]=n;a._.arrows[e+"Marker"]=w;a._.arrows[e+"dx"]=f;a._.arrows[e+"Type"]=m;a._.arrows[e+
"String"]=b}else c?(c=a._.arrows.startdx*i||0,i=s.getTotalLength(h.path)-c):(c=0,i=s.getTotalLength(h.path)-(a._.arrows.enddx*i||0)),a._.arrows[e+"Path"]&&r(g,{d:Raphael.getSubpath(h.path,c,i)}),delete a._.arrows[e+"Path"],delete a._.arrows[e+"Marker"],delete a._.arrows[e+"dx"],delete a._.arrows[e+"Type"],delete a._.arrows[e+"String"];for(d in aa)aa.hasOwnProperty(d)&&!aa[d]&&(a=s._g.doc.getElementById(d))&&a.parentNode.removeChild(a)}},zc={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,
1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},Pb=function(a,b,c){if(b=zc[X(b).toLowerCase()]){for(var d=a.attrs["stroke-width"]||"1",c={round:d,square:d,butt:0}[a.attrs["stroke-linecap"]||c["stroke-linecap"]]||0,f=[],e=b.length;e--;)f[e]=b[e]*d+(e%2?1:-1)*c;r(a.node,{"stroke-dasharray":f.join(",")})}},lb=function(a,b){var c=a.node,d=a.attrs,f=c.style.visibility;c.style.visibility="hidden";for(var e in b)if(b.hasOwnProperty(e)&&s._availableAttrs.hasOwnProperty(e)){var g=
b[e];d[e]=g;switch(e){case "blur":a.blur(g);break;case "href":case "title":case "target":var h=c.parentNode;if("a"!=h.tagName.toLowerCase()){var i=r("a");h.insertBefore(i,c);i.appendChild(c);h=i}"target"==e?h.setAttributeNS("http://www.w3.org/1999/xlink","show","blank"==g?"new":g):h.setAttributeNS("http://www.w3.org/1999/xlink",e,g);break;case "cursor":c.style.cursor=g;break;case "transform":a.transform(g);break;case "arrow-start":ea(a,g);break;case "arrow-end":ea(a,g,1);break;case "clip-rect":h=
X(g).split(ua);if(4==h.length){a.clip&&a.clip.parentNode.parentNode.removeChild(a.clip.parentNode);var i=r("clipPath"),n=r("rect");i.id=s.createUUID();r(n,{x:h[0],y:h[1],width:h[2],height:h[3]});i.appendChild(n);a.paper.defs.appendChild(i);r(c,{"clip-path":"url(#"+i.id+")"});a.clip=n}if(!g&&(g=c.getAttribute("clip-path")))(g=s._g.doc.getElementById(g.replace(/(^url\(#|\)$)/g,"")))&&g.parentNode.removeChild(g),r(c,{"clip-path":""}),delete a.clip;break;case "path":"path"==a.type&&(r(c,{d:g?d.path=s._pathToAbsolute(g):
"M0,0"}),a._.dirty=1,a._.arrows&&("startString"in a._.arrows&&ea(a,a._.arrows.startString),"endString"in a._.arrows&&ea(a,a._.arrows.endString,1)));break;case "width":if(c.setAttribute(e,g),a._.dirty=1,d.fx)e="x",g=d.x;else break;case "x":d.fx&&(g=-d.x-(d.width||0));case "rx":if("rx"==e&&"rect"==a.type)break;case "cx":c.setAttribute(e,g);a.pattern&&Ka(a);a._.dirty=1;break;case "height":if(c.setAttribute(e,g),a._.dirty=1,d.fy)e="y",g=d.y;else break;case "y":d.fy&&(g=-d.y-(d.height||0));case "ry":if("ry"==
e&&"rect"==a.type)break;case "cy":c.setAttribute(e,g);a.pattern&&Ka(a);a._.dirty=1;break;case "r":"rect"==a.type?r(c,{rx:g,ry:g}):c.setAttribute(e,g);a._.dirty=1;break;case "src":"image"==a.type&&c.setAttributeNS("http://www.w3.org/1999/xlink","href",g);break;case "stroke-width":if(1!=a._.sx||1!=a._.sy)g/=jb(Ia(a._.sx),Ia(a._.sy))||1;a.paper._vbSize&&(g*=a.paper._vbSize);c.setAttribute(e,g);d["stroke-dasharray"]&&Pb(a,d["stroke-dasharray"],b);a._.arrows&&("startString"in a._.arrows&&ea(a,a._.arrows.startString),
"endString"in a._.arrows&&ea(a,a._.arrows.endString,1));break;case "stroke-dasharray":Pb(a,g,b);break;case "fill":var m=X(g).match(s._ISURL);if(m){var i=r("pattern"),j=r("image");i.id=s.createUUID();r(i,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1});r(j,{x:0,y:0,"xlink:href":m[1]});i.appendChild(j);(function(b){s._preload(m[1],function(){var c=this.offsetWidth,d=this.offsetHeight;r(b,{width:c,height:d});r(j,{width:c,height:d});a.paper.safari()})})(i);a.paper.defs.appendChild(i);r(c,{fill:"url(#"+
i.id+")"});a.pattern=i;a.pattern&&Ka(a);break}h=s.getRGB(g);if(h.error){if(("circle"==a.type||"ellipse"==a.type||"r"!=X(g).charAt())&&Ob(a,g)){if("opacity"in d||"fill-opacity"in d)if(h=s._g.doc.getElementById(c.getAttribute("fill").replace(/^url\(#|\)$/g,"")))h=h.getElementsByTagName("stop"),r(h[h.length-1],{"stop-opacity":("opacity"in d?d.opacity:1)*("fill-opacity"in d?d["fill-opacity"]:1)});d.gradient=g;d.fill="none";break}}else delete b.gradient,delete d.gradient,!s.is(d.opacity,"undefined")&&
s.is(b.opacity,"undefined")&&r(c,{opacity:d.opacity}),!s.is(d["fill-opacity"],"undefined")&&s.is(b["fill-opacity"],"undefined")&&r(c,{"fill-opacity":d["fill-opacity"]});h.hasOwnProperty("opacity")&&r(c,{"fill-opacity":1<h.opacity?h.opacity/100:h.opacity});case "stroke":h=s.getRGB(g);c.setAttribute(e,h.hex);"stroke"==e&&h.hasOwnProperty("opacity")&&r(c,{"stroke-opacity":1<h.opacity?h.opacity/100:h.opacity});"stroke"==e&&a._.arrows&&("startString"in a._.arrows&&ea(a,a._.arrows.startString),"endString"in
a._.arrows&&ea(a,a._.arrows.endString,1));break;case "gradient":("circle"==a.type||"ellipse"==a.type||"r"!=X(g).charAt())&&Ob(a,g);break;case "opacity":d.gradient&&!d.hasOwnProperty("stroke-opacity")&&r(c,{"stroke-opacity":1<g?g/100:g});case "fill-opacity":if(d.gradient){if(h=s._g.doc.getElementById(c.getAttribute("fill").replace(/^url\(#|\)$/g,"")))h=h.getElementsByTagName("stop"),r(h[h.length-1],{"stop-opacity":g});break}default:"font-size"==e&&(g=Nb(g,10)+"px"),h=e.replace(/(\-.)/g,function(a){return a.substring(1).toUpperCase()}),
c.style[h]=g,a._.dirty=1,c.setAttribute(e,g)}}if(!("text"!=a.type||!b.hasOwnProperty("text")&&!b.hasOwnProperty("font")&&!b.hasOwnProperty("font-size")&&!b.hasOwnProperty("x")&&!b.hasOwnProperty("y"))){e=a.attrs;g=a.node;h=g.firstChild?Nb(s._g.doc.defaultView.getComputedStyle(g.firstChild,"").getPropertyValue("font-size"),10):10;if(b.hasOwnProperty("text")){for(e.text=b.text;g.firstChild;)g.removeChild(g.firstChild);for(var i=X(b.text).split("\n"),d=[],o=0,k=i.length;o<k;o++)n=r("tspan"),o&&r(n,{dy:1.2*
h,x:e.x}),n.appendChild(s._g.doc.createTextNode(i[o])),g.appendChild(n),d[o]=n}else{d=g.getElementsByTagName("tspan");o=0;for(k=d.length;o<k;o++)o?r(d[o],{dy:1.2*h,x:e.x}):r(d[0],{dy:0})}r(g,{x:e.x,y:e.y});a._.dirty=1;g=a._getBBox();(e=e.y-(g.y+g.height/2))&&s.is(e,"finite")&&r(d[0],{dy:e})}c.style.visibility=f},fa=function(a,b){this[0]=this.node=a;a.raphael=!0;this.id=s._oid++;a.raphaelid=this.id;this.matrix=s.matrix();this.realPath=null;this.paper=b;this.attrs=this.attrs||{};this._={transform:[],
sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1};!b.bottom&&(b.bottom=this);(this.prev=b.top)&&(b.top.next=this);b.top=this;this.next=null},G=s.el;fa.prototype=G;G.constructor=fa;s._engine.path=function(a,b){var c=r("path");b.canvas&&b.canvas.appendChild(c);c=new fa(c,b);c.type="path";lb(c,{fill:"none",stroke:"#000",path:a});return c};G.rotate=function(a,b,c){if(this.removed)return this;a=X(a).split(ua);a.length-1&&(b=Y(a[1]),c=Y(a[2]));a=Y(a[0]);null==c&&(b=c);if(null==b||null==c)c=this.getBBox(1),b=c.x+c.width/
2,c=c.y+c.height/2;this.transform(this._.transform.concat([["r",a,b,c]]));return this};G.scale=function(a,b,c,d){if(this.removed)return this;a=X(a).split(ua);a.length-1&&(b=Y(a[1]),c=Y(a[2]),d=Y(a[3]));a=Y(a[0]);null==b&&(b=a);null==d&&(c=d);if(null==c||null==d)var f=this.getBBox(1);c=null==c?f.x+f.width/2:c;d=null==d?f.y+f.height/2:d;this.transform(this._.transform.concat([["s",a,b,c,d]]));return this};G.translate=function(a,b){if(this.removed)return this;a=X(a).split(ua);a.length-1&&(b=Y(a[1]));
a=Y(a[0])||0;this.transform(this._.transform.concat([["t",a,+b||0]]));return this};G.transform=function(a){var b=this._;if(null==a)return b.transform;s._extractTransform(this,a);this.clip&&r(this.clip,{transform:this.matrix.invert()});this.pattern&&Ka(this);this.node&&r(this.node,{transform:this.matrix});if(1!=b.sx||1!=b.sy)a=this.attrs.hasOwnProperty("stroke-width")?this.attrs["stroke-width"]:1,this.attr({"stroke-width":a});return this};G.hide=function(){!this.removed&&this.paper.safari(this.node.style.display=
"none");return this};G.show=function(){!this.removed&&this.paper.safari(this.node.style.display="");return this};G.remove=function(){if(!this.removed&&this.node.parentNode){var a=this.paper;a.__set__&&a.__set__.exclude(this);Ja.unbind("raphael.*.*."+this.id);this.gradient&&a.defs.removeChild(this.gradient);s._tear(this,a);"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.removeChild(this.node.parentNode):this.node.parentNode.removeChild(this.node);for(var b in this)this[b]=
"function"==typeof this[b]?s._removedFactory(b):null;this.removed=!0}};G._getBBox=function(){if("none"==this.node.style.display){this.show();var a=!0}var b={};try{b=this.node.getBBox()}catch(c){}finally{b=b||{}}a&&this.hide();return b};G.attr=function(a,b){if(this.removed)return this;if(null==a){var c={},d;for(d in this.attrs)this.attrs.hasOwnProperty(d)&&(c[d]=this.attrs[d]);c.gradient&&"none"==c.fill&&(c.fill=c.gradient)&&delete c.gradient;c.transform=this._.transform;return c}if(null==b&&s.is(a,
"string")){if("fill"==a&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==a)return this._.transform;d=a.split(ua);for(var c={},f=0,e=d.length;f<e;f++)a=d[f],c[a]=a in this.attrs?this.attrs[a]:s.is(this.paper.customAttributes[a],"function")?this.paper.customAttributes[a].def:s._availableAttrs[a];return e-1?c:c[d[0]]}if(null==b&&s.is(a,"array")){c={};f=0;for(e=a.length;f<e;f++)c[a[f]]=this.attr(a[f]);return c}null!=b?(c={},c[a]=b):null!=a&&s.is(a,"object")&&(c=
a);for(f in c)Ja("raphael.attr."+f+"."+this.id,this,c[f]);for(f in this.paper.customAttributes)if(this.paper.customAttributes.hasOwnProperty(f)&&c.hasOwnProperty(f)&&s.is(this.paper.customAttributes[f],"function"))for(e in d=this.paper.customAttributes[f].apply(this,[].concat(c[f])),this.attrs[f]=c[f],d)d.hasOwnProperty(e)&&(c[e]=d[e]);lb(this,c);return this};G.toFront=function(){if(this.removed)return this;"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.appendChild(this.node.parentNode):
this.node.parentNode.appendChild(this.node);var a=this.paper;a.top!=this&&s._tofront(this,a);return this};G.toBack=function(){if(this.removed)return this;var a=this.node.parentNode;"a"==a.tagName.toLowerCase()?a.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):a.firstChild!=this.node&&a.insertBefore(this.node,this.node.parentNode.firstChild);s._toback(this,this.paper);return this};G.insertAfter=function(a){if(this.removed)return this;var b=a.node||a[a.length-
1].node;b.nextSibling?b.parentNode.insertBefore(this.node,b.nextSibling):b.parentNode.appendChild(this.node);s._insertafter(this,a,this.paper);return this};G.insertBefore=function(a){if(this.removed)return this;var b=a.node||a[0].node;b.parentNode.insertBefore(this.node,b);s._insertbefore(this,a,this.paper);return this};G.blur=function(a){if(0!==+a){var b=r("filter"),c=r("feGaussianBlur");this.attrs.blur=a;b.id=s.createUUID();r(c,{stdDeviation:+a||1.5});b.appendChild(c);this.paper.defs.appendChild(b);
this._blur=b;r(this.node,{filter:"url(#"+b.id+")"})}else this._blur&&(this._blur.parentNode.removeChild(this._blur),delete this._blur,delete this.attrs.blur),this.node.removeAttribute("filter")};s._engine.circle=function(a,b,c,d){var f=r("circle");a.canvas&&a.canvas.appendChild(f);a=new fa(f,a);a.attrs={cx:b,cy:c,r:d,fill:"none",stroke:"#000"};a.type="circle";r(f,a.attrs);return a};s._engine.rect=function(a,b,c,d,f,e){var g=r("rect");a.canvas&&a.canvas.appendChild(g);a=new fa(g,a);a.attrs={x:b,y:c,
width:d,height:f,r:e||0,rx:e||0,ry:e||0,fill:"none",stroke:"#000"};a.type="rect";r(g,a.attrs);return a};s._engine.ellipse=function(a,b,c,d,f){var e=r("ellipse");a.canvas&&a.canvas.appendChild(e);a=new fa(e,a);a.attrs={cx:b,cy:c,rx:d,ry:f,fill:"none",stroke:"#000"};a.type="ellipse";r(e,a.attrs);return a};s._engine.image=function(a,b,c,d,f,e){var g=r("image");r(g,{x:c,y:d,width:f,height:e,preserveAspectRatio:"none"});g.setAttributeNS("http://www.w3.org/1999/xlink","href",b);a.canvas&&a.canvas.appendChild(g);
a=new fa(g,a);a.attrs={x:c,y:d,width:f,height:e,src:b};a.type="image";return a};s._engine.text=function(a,b,c,d){var f=r("text");a.canvas&&a.canvas.appendChild(f);a=new fa(f,a);a.attrs={x:b,y:c,"text-anchor":"middle",text:d,font:s._availableAttrs.font,stroke:"none",fill:"#000"};a.type="text";lb(a,a.attrs);return a};s._engine.setSize=function(a,b){this.width=a||this.width;this.height=b||this.height;this.canvas.setAttribute("width",this.width);this.canvas.setAttribute("height",this.height);this._viewBox&&
this.setViewBox.apply(this,this._viewBox);return this};s._engine.create=function(){var a=s._getContainer.apply(0,arguments),b=a&&a.container,c=a.x,d=a.y,f=a.width,a=a.height;if(!b)throw Error("SVG container not found.");var e=r("svg"),g,c=c||0,d=d||0,f=f||512,a=a||342;r(e,{height:a,version:1.1,width:f,xmlns:"http://www.w3.org/2000/svg"});1==b?(e.style.cssText="overflow:hidden;position:absolute;left:"+c+"px;top:"+d+"px",s._g.doc.body.appendChild(e),g=1):(e.style.cssText="overflow:hidden;position:relative",
b.firstChild?b.insertBefore(e,b.firstChild):b.appendChild(e));b=new s._Paper;b.width=f;b.height=a;b.canvas=e;b.clear();b._left=b._top=0;g&&(b.renderfix=function(){});b.renderfix();return b};s._engine.setViewBox=function(a,b,c,d,f){Ja("raphael.setViewBox",this,this._viewBox,[a,b,c,d,f]);var e=jb(c/this.width,d/this.height),g=this.top,h=f?"meet":"xMinYMin",i;null==a?(this._vbSize&&(e=1),delete this._vbSize,i="0 0 "+this.width+" "+this.height):(this._vbSize=e,i=a+" "+b+" "+c+" "+d);for(r(this.canvas,
{viewBox:i,preserveAspectRatio:h});e&&g;)h="stroke-width"in g.attrs?g.attrs["stroke-width"]:1,g.attr({"stroke-width":h}),g._.dirty=1,g._.dirtyT=1,g=g.prev;this._viewBox=[a,b,c,d,!!f];return this};s.prototype.renderfix=function(){var a=this.canvas,b=a.style,c;try{c=a.getScreenCTM()||a.createSVGMatrix()}catch(d){c=a.createSVGMatrix()}a=-c.e%1;c=-c.f%1;if(a||c)if(a&&(this._left=(this._left+a)%1,b.left=this._left+"px"),c)this._top=(this._top+c)%1,b.top=this._top+"px"};s.prototype.clear=function(){s.eve("raphael.clear",
this);for(var a=this.canvas;a.firstChild;)a.removeChild(a.firstChild);this.bottom=this.top=null;(this.desc=r("desc")).appendChild(s._g.doc.createTextNode("Created with Rapha\u00ebl "+s.version));a.appendChild(this.desc);a.appendChild(this.defs=r("defs"))};s.prototype.remove=function(){Ja("raphael.remove",this);this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var a in this)this[a]="function"==typeof this[a]?s._removedFactory(a):null};var Qb=s.st,va;for(va in G)G.hasOwnProperty(va)&&
!Qb.hasOwnProperty(va)&&(Qb[va]=function(a){return function(){var b=arguments;return this.forEach(function(c){c[a].apply(c,b)})}}(va))}if(window.Raphael&&window.Raphael.vml){var o=window.Raphael,M=String,T=parseFloat,wa=Math,U=wa.round,mb=wa.max,Rb=wa.min,La=wa.abs,xa=/[, ]+/,Ac=o.eve,Sb={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},Bc=/([clmz]),?([^clmz]*)/gi,Cc=/ progid:\S+Blur\([^\)]+\)/g,Dc=/-?[^,\s-]+/g,Ec={path:1,rect:1,image:1},Fc={circle:1,ellipse:1},Tb=function(a,b,c){var d=o.matrix();
d.rotate(-a,0.5,0.5);return{dx:d.x(b,c),dy:d.y(b,c)}},Ma=function(a,b,c,d,f,e){var g=a._,h=a.matrix,i=g.fillpos,a=a.node,n=a.style,m=1,j="",o=21600/b,k=21600/c;n.visibility="hidden";if(b&&c){a.coordsize=La(o)+" "+La(k);n.rotation=e*(0>b*c?-1:1);e&&(f=Tb(e,d,f),d=f.dx,f=f.dy);0>b&&(j+="x");0>c&&(j+=" y")&&(m=-1);n.flip=j;a.coordorigin=d*-o+" "+f*-k;if(i||g.fillsize)d=(d=a.getElementsByTagName("fill"))&&d[0],a.removeChild(d),i&&(f=Tb(e,h.x(i[0],i[1]),h.y(i[0],i[1])),d.position=f.dx*m+" "+f.dy*m),g.fillsize&&
(d.size=g.fillsize[0]*La(b)+" "+g.fillsize[1]*La(c)),a.appendChild(d);n.visibility="visible"}};o.toString=function(){return"Your browser doesn\u2019t support SVG. Falling down to VML.\nYou are running Rapha\u00ebl "+this.version};var Ub=function(a,b,c){for(var b=M(b).toLowerCase().split("-"),c=c?"end":"start",d=b.length,f="classic",e="medium",g="medium";d--;)switch(b[d]){case "block":case "classic":case "oval":case "diamond":case "open":case "none":f=b[d];break;case "wide":case "narrow":g=b[d];break;
case "long":case "short":e=b[d]}a=a.node.getElementsByTagName("stroke")[0];a[c+"arrow"]=f;a[c+"arrowlength"]=e;a[c+"arrowwidth"]=g},ya=function(a,b){a.attrs=a.attrs||{};var c=a.node,d=a.attrs,f=c.style,e=Ec[a.type]&&(b.x!=d.x||b.y!=d.y||b.width!=d.width||b.height!=d.height||b.cx!=d.cx||b.cy!=d.cy||b.rx!=d.rx||b.ry!=d.ry||b.r!=d.r),g=Fc[a.type]&&(d.cx!=b.cx||d.cy!=b.cy||d.r!=b.r||d.rx!=b.rx||d.ry!=b.ry),h;for(h in b)b.hasOwnProperty(h)&&(d[h]=b[h]);e&&(d.path=o._getPath[a.type](a),a._.dirty=1);b.href&&
(c.href=b.href);b.title&&(c.title=b.title);b.target&&(c.target=b.target);b.cursor&&(f.cursor=b.cursor);"blur"in b&&a.blur(b.blur);if(b.path&&"path"==a.type||e){f=~M(d.path).toLowerCase().indexOf("r")?o._pathToAbsolute(d.path):d.path;e=/[ahqstv]/ig;h=o._pathToAbsolute;M(f).match(e)&&(h=o._path2curve);e=/[clmz]/g;if(h==o._pathToAbsolute&&!M(f).match(e))f=M(f).replace(Bc,function(a,b,c){var d=[],e=b.toLowerCase()=="m",f=Sb[b];c.replace(Dc,function(a){if(e&&d.length==2){f=f+(d+Sb[b=="m"?"l":"L"]);d=[]}d.push(U(a*
21600))});return f+d});else{for(var e=h(f),i,f=[],n=0,m=e.length;n<m;n++){h=e[n];i=e[n][0].toLowerCase();"z"==i&&(i="x");for(var j=1,p=h.length;j<p;j++)i+=U(21600*h[j])+(j!=p-1?",":"");f.push(i)}f=f.join(" ")}c.path=f;"image"==a.type&&(a._.fillpos=[d.x,d.y],a._.fillsize=[d.width,d.height],Ma(a,1,1,0,0,0))}"transform"in b&&a.transform(b.transform);g&&(g=+d.cx,f=+d.cy,e=+d.rx||+d.r||0,h=+d.ry||+d.r||0,c.path=o.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",U(21600*(g-e)),U(21600*(f-h)),U(21600*(g+e)),
U(21600*(f+h)),U(21600*g)));if("clip-rect"in b&&(g=M(b["clip-rect"]).split(xa),4==g.length&&(g[2]=+g[2]+ +g[0],g[3]=+g[3]+ +g[1],f=c.clipRect||o._g.doc.createElement("div"),e=f.style,e.clip=o.format("rect({1}px {2}px {3}px {0}px)",g),c.clipRect||(e.position="absolute",e.top=0,e.left=0,e.width=a.paper.width+"px",e.height=a.paper.height+"px",c.parentNode.insertBefore(f,c),f.appendChild(c),c.clipRect=f)),!b["clip-rect"]))c.clipRect&&(c.clipRect.style.clip="auto");a.textpath&&(g=a.textpath.style,b.font&&
(g.font=b.font),b["font-family"]&&(g.fontFamily='"'+b["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,"")+'"'),b["font-size"]&&(g.fontSize=b["font-size"]),b["font-weight"]&&(g.fontWeight=b["font-weight"]),b["font-style"]&&(g.fontStyle=b["font-style"]));"arrow-start"in b&&Ub(a,b["arrow-start"]);"arrow-end"in b&&Ub(a,b["arrow-end"],1);if(null!=b.opacity||null!=b["stroke-width"]||null!=b.fill||null!=b.src||null!=b.stroke||null!=b["stroke-width"]||null!=b["stroke-opacity"]||null!=b["fill-opacity"]||
null!=b["stroke-dasharray"]||null!=b["stroke-miterlimit"]||null!=b["stroke-linejoin"]||null!=b["stroke-linecap"]){g=(g=c.getElementsByTagName("fill"))&&g[0];!g&&(g=ca("fill"));"image"==a.type&&b.src&&(g.src=b.src);b.fill&&(g.on=!0);if(null==g.on||"none"==b.fill||null===b.fill)g.on=!1;if(g.on&&b.fill)if(f=M(b.fill).match(o._ISURL)){g.parentNode==c&&c.removeChild(g);g.rotate=!0;g.src=f[1];g.type="tile";var k=a.getBBox(1);g.position=k.x+" "+k.y;a._.fillpos=[k.x,k.y];o._preload(f[1],function(){a._.fillsize=
[this.offsetWidth,this.offsetHeight]})}else{g.color=o.getRGB(b.fill).hex;g.src="";g.type="solid";if(f=o.getRGB(b.fill).error)if(f=a.type in{circle:1,ellipse:1}||"r"!=M(b.fill).charAt())a:{f=a;h=b.fill;e=g;f.attrs=f.attrs||{};var r=Math.pow,q="linear",s=".5 .5";f.attrs.gradient=h;h=M(h).replace(o._radial_gradient,function(a,b,c){q="radial";if(b&&c){b=T(b);c=T(c);r(b-0.5,2)+r(c-0.5,2)>0.25&&(c=wa.sqrt(0.25-r(b-0.5,2))*((c>0.5)*2-1)+0.5);s=b+" "+c}return""});h=h.split(/\s*\-\s*/);if("linear"==q&&(k=
h.shift(),k=-T(k),isNaN(k))){f=null;break a}if(h=o._parseDots(h)){f=f.shape||f.node;if(h.length){f.removeChild(e);e.on=!0;e.method="none";e.color=h[0].color;e.color2=h[h.length-1].color;i=[];n=0;for(m=h.length;n<m;n++)h[n].offset&&i.push(h[n].offset+" "+h[n].color);e.colors=i.length?i.join():"0% "+e.color;"radial"==q?(e.type="gradientTitle",e.focus="100%",e.focussize="0 0",e.focusposition=s,e.angle=0):(e.type="gradient",e.angle=(270-k)%360);f.appendChild(e)}f=1}else f=null}f&&(d.fill="none",d.gradient=
b.fill,g.rotate=!1)}if("fill-opacity"in b||"opacity"in b)f=((+d["fill-opacity"]+1||2)-1)*((+d.opacity+1||2)-1)*((+o.getRGB(b.fill).o+1||2)-1),f=Rb(mb(f,0),1),g.opacity=f,g.src&&(g.color="none");c.appendChild(g);k=c.getElementsByTagName("stroke")&&c.getElementsByTagName("stroke")[0];g=!1;!k&&(g=k=ca("stroke"));if(b.stroke&&"none"!=b.stroke||b["stroke-width"]||null!=b["stroke-opacity"]||b["stroke-dasharray"]||b["stroke-miterlimit"]||b["stroke-linejoin"]||b["stroke-linecap"])k.on=!0;("none"==b.stroke||
null===b.stroke||null==k.on||0==b.stroke||0==b["stroke-width"])&&(k.on=!1);f=o.getRGB(b.stroke);k.on&&b.stroke&&(k.color=f.hex);f=((+d["stroke-opacity"]+1||2)-1)*((+d.opacity+1||2)-1)*((+f.o+1||2)-1);e=0.75*(T(b["stroke-width"])||1);f=Rb(mb(f,0),1);null==b["stroke-width"]&&(e=d["stroke-width"]);b["stroke-width"]&&(k.weight=e);e&&1>e&&(f*=e)&&(k.weight=1);k.opacity=f;b["stroke-linejoin"]&&(k.joinstyle=b["stroke-linejoin"]||"miter");k.miterlimit=b["stroke-miterlimit"]||8;b["stroke-linecap"]&&(k.endcap=
"butt"==b["stroke-linecap"]?"flat":"square"==b["stroke-linecap"]?"square":"round");b["stroke-dasharray"]&&(f={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"},k.dashstyle=f.hasOwnProperty(b["stroke-dasharray"])?f[b["stroke-dasharray"]]:"");g&&c.appendChild(k)}if("text"==a.type){a.paper.canvas.style.display="";c=a.paper.span;k=d.font&&d.font.match(/\d+(?:\.\d*)?(?=px)/);f=c.style;
d.font&&(f.font=d.font);d["font-family"]&&(f.fontFamily=d["font-family"]);d["font-weight"]&&(f.fontWeight=d["font-weight"]);d["font-style"]&&(f.fontStyle=d["font-style"]);k=T(d["font-size"]||k&&k[0])||10;f.fontSize=100*k+"px";a.textpath.string&&(c.innerHTML=M(a.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));c=c.getBoundingClientRect();a.W=d.w=(c.right-c.left)/100;a.H=d.h=(c.bottom-c.top)/100;a.X=d.x;a.Y=d.y+a.H/2;("x"in b||"y"in b)&&(a.path.v=o.format("m{0},{1}l{2},{1}",
U(21600*d.x),U(21600*d.y),U(21600*d.x)+1));c="x y text font font-family font-weight font-style font-size".split(" ");k=0;for(g=c.length;k<g;k++)if(c[k]in b){a._.dirty=1;break}switch(d["text-anchor"]){case "start":a.textpath.style["v-text-align"]="left";a.bbx=a.W/2;break;case "end":a.textpath.style["v-text-align"]="right";a.bbx=-a.W/2;break;default:a.textpath.style["v-text-align"]="center",a.bbx=0}a.textpath.style["v-text-kern"]=!0}},Na=function(a,b){this[0]=this.node=a;a.raphael=!0;this.id=o._oid++;
a.raphaelid=this.id;this.Y=this.X=0;this.attrs={};this.paper=b;this.matrix=o.matrix();this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1};!b.bottom&&(b.bottom=this);(this.prev=b.top)&&(b.top.next=this);b.top=this;this.next=null},H=o.el;Na.prototype=H;H.constructor=Na;H.transform=function(a){if(null==a)return this._.transform;var b=this.paper._viewBoxShift,c=b?"s"+[b.scale,b.scale]+"-1-1t"+[b.dx,b.dy]:"",d;b&&(d=a=M(a).replace(/\.{3}|\u2026/g,this._.transform||""));o._extractTransform(this,
c+a);var b=this.matrix.clone(),f=this.skew,a=this.node,c=~M(this.attrs.fill).indexOf("-"),e=!M(this.attrs.fill).indexOf("url(");b.translate(-0.5,-0.5);e||c||"image"==this.type?(f.matrix="1 0 0 1",f.offset="0 0",f=b.split(),c&&f.noRotation||!f.isSimple?(a.style.filter=b.toFilter(),c=this.getBBox(),f=this.getBBox(1),b=c.x-f.x,c=c.y-f.y,a.coordorigin=-21600*b+" "+-21600*c,Ma(this,1,1,b,c,0)):(a.style.filter="",Ma(this,f.scalex,f.scaley,f.dx,f.dy,f.rotate))):(a.style.filter="",f.matrix=M(b),f.offset=
b.offset());d&&(this._.transform=d);return this};H.rotate=function(a,b,c){if(this.removed)return this;if(null!=a){a=M(a).split(xa);a.length-1&&(b=T(a[1]),c=T(a[2]));a=T(a[0]);null==c&&(b=c);if(null==b||null==c)c=this.getBBox(1),b=c.x+c.width/2,c=c.y+c.height/2;this._.dirtyT=1;this.transform(this._.transform.concat([["r",a,b,c]]));return this}};H.translate=function(a,b){if(this.removed)return this;a=M(a).split(xa);a.length-1&&(b=T(a[1]));a=T(a[0])||0;b=+b||0;this._.bbox&&(this._.bbox.x+=a,this._.bbox.y+=
b);this.transform(this._.transform.concat([["t",a,b]]));return this};H.scale=function(a,b,c,d){if(this.removed)return this;a=M(a).split(xa);a.length-1&&(b=T(a[1]),c=T(a[2]),d=T(a[3]),isNaN(c)&&(c=null),isNaN(d)&&(d=null));a=T(a[0]);null==b&&(b=a);null==d&&(c=d);if(null==c||null==d)var f=this.getBBox(1);c=null==c?f.x+f.width/2:c;d=null==d?f.y+f.height/2:d;this.transform(this._.transform.concat([["s",a,b,c,d]]));this._.dirtyT=1;return this};H.hide=function(){!this.removed&&(this.node.style.display=
"none");return this};H.show=function(){!this.removed&&(this.node.style.display="");return this};H._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}};H.remove=function(){if(!this.removed&&this.node.parentNode){this.paper.__set__&&this.paper.__set__.exclude(this);o.eve.unbind("raphael.*.*."+this.id);o._tear(this,this.paper);this.node.parentNode.removeChild(this.node);this.shape&&this.shape.parentNode.removeChild(this.shape);for(var a in this)this[a]=
"function"==typeof this[a]?o._removedFactory(a):null;this.removed=!0}};H.attr=function(a,b){if(this.removed)return this;if(null==a){var c={},d;for(d in this.attrs)this.attrs.hasOwnProperty(d)&&(c[d]=this.attrs[d]);c.gradient&&"none"==c.fill&&(c.fill=c.gradient)&&delete c.gradient;c.transform=this._.transform;return c}if(null==b&&o.is(a,"string")){if("fill"==a&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;d=a.split(xa);for(var c={},f=0,e=d.length;f<e;f++)a=d[f],c[a]=a in
this.attrs?this.attrs[a]:o.is(this.paper.customAttributes[a],"function")?this.paper.customAttributes[a].def:o._availableAttrs[a];return e-1?c:c[d[0]]}if(this.attrs&&null==b&&o.is(a,"array")){c={};f=0;for(e=a.length;f<e;f++)c[a[f]]=this.attr(a[f]);return c}null!=b&&(c={},c[a]=b);null==b&&o.is(a,"object")&&(c=a);for(f in c)Ac("raphael.attr."+f+"."+this.id,this,c[f]);if(c){for(f in this.paper.customAttributes)if(this.paper.customAttributes.hasOwnProperty(f)&&c.hasOwnProperty(f)&&o.is(this.paper.customAttributes[f],
"function"))for(e in d=this.paper.customAttributes[f].apply(this,[].concat(c[f])),this.attrs[f]=c[f],d)d.hasOwnProperty(e)&&(c[e]=d[e]);c.text&&"text"==this.type&&(this.textpath.string=c.text);ya(this,c)}return this};H.toFront=function(){!this.removed&&this.node.parentNode.appendChild(this.node);this.paper&&this.paper.top!=this&&o._tofront(this,this.paper);return this};H.toBack=function(){if(this.removed)return this;this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,
this.node.parentNode.firstChild),o._toback(this,this.paper));return this};H.insertAfter=function(a){if(this.removed)return this;a.constructor==o.st.constructor&&(a=a[a.length-1]);a.node.nextSibling?a.node.parentNode.insertBefore(this.node,a.node.nextSibling):a.node.parentNode.appendChild(this.node);o._insertafter(this,a,this.paper);return this};H.insertBefore=function(a){if(this.removed)return this;a.constructor==o.st.constructor&&(a=a[0]);a.node.parentNode.insertBefore(this.node,a.node);o._insertbefore(this,
a,this.paper);return this};H.blur=function(a){var b=this.node.runtimeStyle,c=b.filter,c=c.replace(Cc,"");0!==+a?(this.attrs.blur=a,b.filter=c+"  progid:DXImageTransform.Microsoft.Blur(pixelradius="+(+a||1.5)+")",b.margin=o.format("-{0}px 0 0 -{0}px",U(+a||1.5))):(b.filter=c,b.margin=0,delete this.attrs.blur)};o._engine.path=function(a,b){var c=ca("shape");c.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px";c.coordsize="21600 21600";c.coordorigin=b.coordorigin;var d=new Na(c,b),f=
{fill:"none",stroke:"#000"};a&&(f.path=a);d.type="path";d.path=[];d.Path="";ya(d,f);b.canvas.appendChild(c);f=ca("skew");f.on=!0;c.appendChild(f);d.skew=f;d.transform("");return d};o._engine.rect=function(a,b,c,d,f,e){var g=o._rectPath(b,c,d,f,e),a=a.path(g),h=a.attrs;a.X=h.x=b;a.Y=h.y=c;a.W=h.width=d;a.H=h.height=f;h.r=e;h.path=g;a.type="rect";return a};o._engine.ellipse=function(a,b,c,d,f){a=a.path();a.X=b-d;a.Y=c-f;a.W=2*d;a.H=2*f;a.type="ellipse";ya(a,{cx:b,cy:c,rx:d,ry:f});return a};o._engine.circle=
function(a,b,c,d){a=a.path();a.X=b-d;a.Y=c-d;a.W=a.H=2*d;a.type="circle";ya(a,{cx:b,cy:c,r:d});return a};o._engine.image=function(a,b,c,d,f,e){var g=o._rectPath(c,d,f,e),a=a.path(g).attr({stroke:"none"}),h=a.attrs,i=a.node,n=i.getElementsByTagName("fill")[0];h.src=b;a.X=h.x=c;a.Y=h.y=d;a.W=h.width=f;a.H=h.height=e;h.path=g;a.type="image";n.parentNode==i&&i.removeChild(n);n.rotate=!0;n.src=b;n.type="tile";a._.fillpos=[c,d];a._.fillsize=[f,e];i.appendChild(n);Ma(a,1,1,0,0,0);return a};o._engine.text=
function(a,b,c,d){var f=ca("shape"),e=ca("path"),g=ca("textpath"),b=b||0,c=c||0,d=d||"";e.v=o.format("m{0},{1}l{2},{1}",U(21600*b),U(21600*c),U(21600*b)+1);e.textpathok=!0;g.string=M(d);g.on=!0;f.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px";f.coordsize="21600 21600";f.coordorigin="0 0";var h=new Na(f,a),i={fill:"#000",stroke:"none",font:o._availableAttrs.font,text:d};h.shape=f;h.path=e;h.textpath=g;h.type="text";h.attrs.text=M(d);h.attrs.x=b;h.attrs.y=c;h.attrs.w=1;h.attrs.h=
1;ya(h,i);f.appendChild(g);f.appendChild(e);a.canvas.appendChild(f);a=ca("skew");a.on=!0;f.appendChild(a);h.skew=a;h.transform("");return h};o._engine.setSize=function(a,b){var c=this.canvas.style;this.width=a;this.height=b;a==+a&&(a+="px");b==+b&&(b+="px");c.width=a;c.height=b;c.clip="rect(0 "+a+" "+b+" 0)";this._viewBox&&o._engine.setViewBox.apply(this,this._viewBox);return this};o._engine.setViewBox=function(a,b,c,d,f){o.eve("raphael.setViewBox",this,this._viewBox,[a,b,c,d,f]);var e=this.width,
g=this.height,h=1/mb(c/e,d/g),i,n;f&&(i=g/d,n=e/c,c*i<e&&(a-=(e-c*i)/2/i),d*n<g&&(b-=(g-d*n)/2/n));this._viewBox=[a,b,c,d,!!f];this._viewBoxShift={dx:-a,dy:-b,scale:h};this.forEach(function(a){a.transform("...")});return this};var ca;o._engine.initWin=function(a){var b=a.document;b.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!b.namespaces.rvml&&b.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),ca=function(a){return b.createElement("<rvml:"+a+' class="rvml">')}}catch(c){ca=
function(a){return b.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}};o._engine.initWin(o._g.win);o._engine.create=function(){var a=o._getContainer.apply(0,arguments),b=a.container,c=a.height,d=a.width,f=a.x,a=a.y;if(!b)throw Error("VML container not found.");var e=new o._Paper,g=e.canvas=o._g.doc.createElement("div"),h=g.style,f=f||0,a=a||0,d=d||512,c=c||342;e.width=d;e.height=c;d==+d&&(d+="px");c==+c&&(c+="px");e.coordsize="21600000 21600000";e.coordorigin="0 0";e.span=
o._g.doc.createElement("span");e.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;";g.appendChild(e.span);h.cssText=o.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",d,c);1==b?(o._g.doc.body.appendChild(g),h.left=f+"px",h.top=a+"px",h.position="absolute"):b.firstChild?b.insertBefore(g,b.firstChild):b.appendChild(g);e.renderfix=function(){};return e};o.prototype.clear=function(){o.eve("raphael.clear",
this);this.canvas.innerHTML="";this.span=o._g.doc.createElement("span");this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";this.canvas.appendChild(this.span);this.bottom=this.top=null};o.prototype.remove=function(){o.eve("raphael.remove",this);this.canvas.parentNode.removeChild(this.canvas);for(var a in this)this[a]="function"==typeof this[a]?o._removedFactory(a):null;return!0};var Vb=o.st,za;for(za in H)H.hasOwnProperty(za)&&!Vb.hasOwnProperty(za)&&
(Vb[za]=function(a){return function(){var b=arguments;return this.forEach(function(c){c[a].apply(c,b)})}}(za))}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d-api', location = 'js/lib/raphael-wrapper.js' */
!function(a,e){window.Raphael=e(a)}(require("atlassian/libs/eve-0.2.4"),require("atlassian/libs/factories/raphael-2.1.0"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d-api', location = 'js/lib/draw2d/draw2d.js' */
var draw2d={geo:{},io:{json:{},png:{},svg:{}},util:{spline:{}},shape:{basic:{},arrow:{},node:{},note:{},diagram:{},analog:{},icon:{},layout:{},pert:{},state:{},widget:{}},policy:{canvas:{},port:{},figure:{}},command:{},decoration:{connection:{}},layout:{connection:{},anchor:{},mesh:{},locator:{}},ui:{},isTouchDevice:navigator.platform.indexOf("iPhone")!=-1||navigator.platform.indexOf("iPod")!=-1||navigator.platform.indexOf("iPad")!=-1};!function(){Raphael.fn.group=function(t,e){var s=document.getElementsByTagName("svg").length>0;if(!s)return{add:function(){}};var n;for(this.svg="http://www.w3.org/2000/svg",this.defs=document.getElementsByTagName("defs")[t],this.svgcanv=document.getElementsByTagName("svg")[t],this.group=document.createElementNS(this.svg,"g"),n=0;n<e.length;n++)this.group.appendChild(e[n].node);return this.svgcanv.appendChild(this.group),this.group.translate=function(t,e){this.setAttribute("transform","translate("+t+","+e+") scale("+this.getAttr("scale").x+","+this.getAttr("scale").y+")")},this.group.rotate=function(t,e,s){this.setAttribute("transform","translate("+this.getAttr("translate").x+","+this.getAttr("translate").y+") scale("+this.getAttr("scale").x+","+this.getAttr("scale").y+") rotate("+t+","+e+","+s+")")},this.group.scale=function(t,e){this.setAttribute("transform","scale("+t+","+e+") translate("+this.getAttr("translate").x+","+this.getAttr("translate").y+")")},this.group.push=function(t){this.appendChild(t.node)},this.group.getAttr=function(t){this.previous=this.getAttribute("transform")?this.getAttribute("transform"):"";var e,s,i,r=[];for(r=this.previous.split(" "),n=0;n<r.length;n++)if("t"==r[n].substring(0,1)){var a=r[n],o=[];o=a.split("("),a=o[1].substring(0,o[1].length-1),o=[],o=a.split(","),e=0===o.length?{x:0,y:0}:{x:o[0],y:o[1]}}else"r"===r[n].substring(0,1)?(a=r[n],o=a.split("("),a=o[1].substring(0,o[1].length-1),o=a.split(","),s=0===o.length?{x:0,y:0,z:0}:{x:o[0],y:o[1],z:o[2]}):"s"===r[n].substring(0,1)&&(a=r[n],o=a.split("("),a=o[1].substring(0,o[1].length-1),o=a.split(","),i=0===o.length?{x:1,y:1}:{x:o[0],y:o[1]});if("undefined"==typeof e&&(e={x:0,y:0}),"undefined"==typeof s&&(s={x:0,y:0,z:0}),"undefined"==typeof i&&(i={x:1,y:1}),"translate"==t)var g=e;else"rotate"==t?g=s:"scale"==t&&(g=i);return g},this.group.copy=function(t){this.copy=t.node.cloneNode(!0),this.appendChild(this.copy)},this.group}}(),Math.sign=function(){return this<0?-1:1};;
;
/* module-key = 'com.atlassian.plugin.jslibs:shifty-0.6.1', location = 'libs/shifty/0.6.1/shifty-0.6.1.js' */
/*

 Shifty <http://jeremyckahn.github.com/shifty/>
 Author: Jeremy Kahn - jeremyckahn@gmail.com
 License: MIT
 Version: 0.6.1 (Mon, 16 Apr 2012 16:27:31 GMT)
*/
(function(e){define("atlassian/libs/shifty-0.6.1",function(){var h={};e.call(h);return"object"===typeof exports?module.exports:h.Tweenable})})(function(){var e,h=function(a,b){for(var c in a)a.hasOwnProperty(c)&&b(a,c)},n=function(a,b){h(b,function(b,d){a[d]=b[d]});return a},o=function(a,b){h(b,function(b,d){"undefined"===typeof a[d]&&(a[d]=b[d])});return a},y=function(a,b,c){var d,a=(a-b.timestamp)/b.duration;for(d in c.current)c.current.hasOwnProperty(d)&&b.to.hasOwnProperty(d)&&(c.current[d]=w(b.originalState[d],
b.to[d],x[b.easing[d]],a));return c.current},w=function(a,b,c,d){return a+(b-a)*c(d)},l=function(a,b,c){h(e.prototype.filter,function(d,e){d[e][a]&&d[e][a].apply(b,c)})},p=function(a,b){var c=a.timestamp+a.duration,d=Math.min(k(),c),c=d>=c;if(b.isTweening){c||(b.loopId=setTimeout(function(){p(a,b)},1E3/a.owner.fps));l("beforeTween",a.owner,[b.current,a.originalState,a.to]);y(d,a,b);l("afterTween",a.owner,[b.current,a.originalState,a.to]);if(a.hook.step){var d=a.hook,e=a.owner,f=[b.current],g;for(g=
0;g<d.step.length;g++)d.step[g].apply(e,f)}a.step&&a.step.call(b.current,b.current)}(c||!b.isTweening)&&a.owner.stop(!0)},B=function(a,b){var c;c={};"string"===typeof b?h(a,function(a,e){c[e]=b}):h(a,function(a,e){c[e]||(c[e]=b[e]||A)});return c},k,A="linear",x;k="function"===typeof SHIFTY_DEBUG_NOW?SHIFTY_DEBUG_NOW:function(){return+new Date};"function"===typeof SHIFTY_DEBUG_NOW&&(this.timeoutHandler=p);e=function(a){a=a||{};this._hook={};this._tweenParams={owner:this,hook:this._hook,data:{}};this._state=
{};this._state.current=a.initialState||{};this.fps=a.fps||30;this.easing=a.easing||A;this.duration=a.duration||500;return this};e.prototype.tween=function(a,b,c,d,e){var f,g;if(!this._state.isTweening){f=this._tweenParams;g=this._state;this._state.loopId=0;this._state.pausedAtTime=null;if(b){f.to=b||{};f.duration=c||this.duration;f.callback=d;f.easing=e||this.easing;g.current=a||{}}else{f.step=a.step;f.callback=a.callback;f.to=a.to||a.target||{};f.duration=a.duration||this.duration;f.easing=a.easing||
this.easing;g.current=a.from||{}}f.timestamp=k();o(g.current,f.to);o(f.to,g.current);f.easing=B(g.current,f.easing);l("tweenCreated",f.owner,[g.current,f.originalState,f.to]);f.originalState=n({},g.current);g.isTweening=true;this.resume();a.start&&a.start();return this}};e.prototype.to=function(a,b,c,d){if(arguments.length===1)if("to"in a){a.from=this.get();this.tween(a)}else this.tween(this.get(),a);else this.tween(this.get(),a,b,c,d);return this};e.prototype.get=function(){return this._state.current};
e.prototype.set=function(a){this._state.current=a||{};return this};e.prototype.stop=function(a){clearTimeout(this._state.loopId);this._state.isTweening=false;if(a){n(this._state.current,this._tweenParams.to);l("afterTweenEnd",this,[this._state.current,this._tweenParams.originalState,this._tweenParams.to]);this._tweenParams.callback&&this._tweenParams.callback.call(this._state.current,this._state.current)}return this};e.prototype.pause=function(){clearTimeout(this._state.loopId);this._state.pausedAtTime=
k();this._state.isPaused=true;return this};e.prototype.resume=function(){if(this._state.isPaused)this._tweenParams.timestamp=this._tweenParams.timestamp+(k()-this._state.pausedAtTime);p(this._tweenParams,this._state);return this};e.prototype.hookAdd=function(a,b){this._hook.hasOwnProperty(a)||(this._hook[a]=[]);this._hook[a].push(b)};e.prototype.hookRemove=function(a,b){var c;if(this._hook.hasOwnProperty(a))if(b)for(c=this._hook[a].length;c>=0;c++)this._hook[a][c]===b&&this._hook[a].splice(c,1);else this._hook[a]=
[]};e.prototype.filter={};e.util={now:k,each:h,tweenProps:y,tweenProp:w,applyFilter:l,simpleCopy:n,weakCopy:o,composeEasingObject:B};x=e.prototype.formula={linear:function(a){return a}};"object"===typeof exports?module.exports=e:"function"===typeof define&&define.amd?define(function(){return e}):"undefined"===typeof this.Tweenable&&(this.Tweenable=e);e.util.simpleCopy(e.prototype.formula,{easeInQuad:function(a){return Math.pow(a,2)},easeOutQuad:function(a){return-(Math.pow(a-1,2)-1)},easeInOutQuad:function(a){return(a=
a/0.5)<1?0.5*Math.pow(a,2):-0.5*((a=a-2)*a-2)},easeInCubic:function(a){return Math.pow(a,3)},easeOutCubic:function(a){return Math.pow(a-1,3)+1},easeInOutCubic:function(a){return(a=a/0.5)<1?0.5*Math.pow(a,3):0.5*(Math.pow(a-2,3)+2)},easeInQuart:function(a){return Math.pow(a,4)},easeOutQuart:function(a){return-(Math.pow(a-1,4)-1)},easeInOutQuart:function(a){return(a=a/0.5)<1?0.5*Math.pow(a,4):-0.5*((a=a-2)*Math.pow(a,3)-2)},easeInQuint:function(a){return Math.pow(a,5)},easeOutQuint:function(a){return Math.pow(a-
1,5)+1},easeInOutQuint:function(a){return(a=a/0.5)<1?0.5*Math.pow(a,5):0.5*(Math.pow(a-2,5)+2)},easeInSine:function(a){return-Math.cos(a*(Math.PI/2))+1},easeOutSine:function(a){return Math.sin(a*(Math.PI/2))},easeInOutSine:function(a){return-0.5*(Math.cos(Math.PI*a)-1)},easeInExpo:function(a){return a==0?0:Math.pow(2,10*(a-1))},easeOutExpo:function(a){return a==1?1:-Math.pow(2,-10*a)+1},easeInOutExpo:function(a){return a==0?0:a==1?1:(a=a/0.5)<1?0.5*Math.pow(2,10*(a-1)):0.5*(-Math.pow(2,-10*--a)+2)},
easeInCirc:function(a){return-(Math.sqrt(1-a*a)-1)},easeOutCirc:function(a){return Math.sqrt(1-Math.pow(a-1,2))},easeInOutCirc:function(a){return(a=a/0.5)<1?-0.5*(Math.sqrt(1-a*a)-1):0.5*(Math.sqrt(1-(a=a-2)*a)+1)},easeOutBounce:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a=a-1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a=a-2.25/2.75)*a+0.9375:7.5625*(a=a-2.625/2.75)*a+0.984375},easeInBack:function(a){return a*a*(2.70158*a-1.70158)},easeOutBack:function(a){return(a=a-1)*a*(2.70158*a+1.70158)+1},
easeInOutBack:function(a){var b=1.70158;return(a=a/0.5)<1?0.5*a*a*(((b=b*1.525)+1)*a-b):0.5*((a=a-2)*a*(((b=b*1.525)+1)*a+b)+2)},elastic:function(a){return-1*Math.pow(4,-8*a)*Math.sin((a*6-1)*2*Math.PI/2)+1},swingFromTo:function(a){var b=1.70158;return(a=a/0.5)<1?0.5*a*a*(((b=b*1.525)+1)*a-b):0.5*((a=a-2)*a*(((b=b*1.525)+1)*a+b)+2)},swingFrom:function(a){return a*a*(2.70158*a-1.70158)},swingTo:function(a){return(a=a-1)*a*(2.70158*a+1.70158)+1},bounce:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?
7.5625*(a=a-1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a=a-2.25/2.75)*a+0.9375:7.5625*(a=a-2.625/2.75)*a+0.984375},bouncePast:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?2-(7.5625*(a=a-1.5/2.75)*a+0.75):a<2.5/2.75?2-(7.5625*(a=a-2.25/2.75)*a+0.9375):2-(7.5625*(a=a-2.625/2.75)*a+0.984375)},easeFromTo:function(a){return(a=a/0.5)<1?0.5*Math.pow(a,4):-0.5*((a=a-2)*Math.pow(a,3)-2)},easeFrom:function(a){return Math.pow(a,4)},easeTo:function(a){return Math.pow(a,0.25)}});var F=function(a,b,c,d,e,f){return function(){if(c)a.tween(b,
c,d,e,f);else{b.callback=e;b.from?a.tween(b):a.to(b)}}},G=function(){};e.prototype.queue=function(a,b,c,d,e){if(!this._tweenQueue)this._tweenQueue=[];var f=d=d||a.callback||G,g=this._tweenQueue;this._tweenQueue.push(F(this,a,b,c,function(){f();g.shift();if(g.length)g[0]();else g.running=false},e));return this};e.prototype.queueStart=function(){if(!this._tweenQueue.running&&this._tweenQueue.length>0){this._tweenQueue[0]();this._tweenQueue.running=true}return this};e.prototype.queueShift=function(){this._tweenQueue.shift();
return this};e.prototype.queuePop=function(){this._tweenQueue.pop();return this};e.prototype.queueEmpty=function(){this._tweenQueue.length=0;return this};e.prototype.queueLength=function(){return this._tweenQueue.length};var q=function(a){return parseInt(a,16)},r=function(a){e.util.each(a,function(a,c){if(typeof a[c]==="string"&&(C.test(a[c])||D.test(a[c]))){var d;d=a[c];d=d.replace(/#/g,"");if(d.length===3){d=d.split("");d=d[0]+d[0]+d[1]+d[1]+d[2]+d[2]}d=[q(d.substr(0,2)),q(d.substr(2,2)),q(d.substr(4,
2))];a[c]="rgb("+d[0]+","+d[1]+","+d[2]+")"}})},s=function(a,b){var c,d,e;d=b.length;for(c=0;c<d;c++){e=a[b[c]].match(/(\d+)/g);a["__r__"+b[c]]=+e[0];a["__g__"+b[c]]=+e[1];a["__b__"+b[c]]=+e[2];delete a[b[c]]}},t=function(a,b){var c,d;d=b.length;for(c=0;c<d;c++){a[b[c]]="rgb("+parseInt(a["__r__"+b[c]],10)+","+parseInt(a["__g__"+b[c]],10)+","+parseInt(a["__b__"+b[c]],10)+")";delete a["__r__"+b[c]];delete a["__g__"+b[c]];delete a["__b__"+b[c]]}},C=/^#([0-9]|[a-f]){3}$/i,D=/^#([0-9]|[a-f]){6}$/i,H=/^rgb\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*\)\s*$/i,
i;e&&(e.prototype.filter.color={tweenCreated:function(a,b,c){r(a);r(b);r(c)},beforeTween:function(a,b,c){var d;d=[];e.util.each(b,function(a,b){typeof a[b]==="string"&&(C.test(a[b])||D.test(a[b])||H.test(a[b]))&&d.push(b)});i=d;s(a,i);s(b,i);s(c,i);var a=this._tweenParams.easing,b=i,z;z=b.length;for(c=0;c<z;c++){a["__r__"+b[c]]=a[b[c]];a["__g__"+b[c]]=a[b[c]];a["__b__"+b[c]]=a[b[c]]}},afterTween:function(a,b,c){t(a,i);t(b,i);t(c,i);var a=this._tweenParams.easing,b=i,d;d=b.length;for(c=0;c<d;c++){delete a["__r__"+
b[c]];delete a["__g__"+b[c]];delete a["__b__"+b[c]]}}});var u=function(a,b){e.util.each(b,function(c,d){var e=b[d],f=e[0].replace(/\(/g,"\\(").replace(/\)/g,"\\)"),g=e[1].replace(/\(/g,"\\(").replace(/\)/g,"\\)");a[d]=+a[d].replace(e[0]===""?RegExp(g,"g"):RegExp("("+f+"|"+g+")","g"),"")})},v=function(a,b){e.util.each(b,function(b,d){var e=b[d];a[d]=e[0]+a[d]+e[1]})},E=/\D+/g,j;e.prototype.filter.token={beforeTween:function(a,b,c){var d;d={};e.util.each(b,function(a,b){var c=a[b];if(typeof c==="string"&&
c.match(E)){c=c.match(E);c.length===1&&c.unshift("");d[b]=c}});j=d;u(a,j);u(b,j);u(c,j)},afterTween:function(a,b,c){v(a,j);v(b,j);v(c,j)}};e&&(e.util.interpolate=function(a,b,c,d){var h;if(a&&a.from){b=a.to;c=a.position;d=a.easing;a=a.from}h=new e;h._tweenParams.easing=d||"linear";d=e.util.simpleCopy({},a);e.util.applyFilter("tweenCreated",h,[d,a,b]);e.util.applyFilter("beforeTween",h,[d,a,b]);var f=a,g=b,i;i=e.util.composeEasingObject(f,h._tweenParams.easing);d=e.util.tweenProps(c,{originalState:f,
to:g,timestamp:0,duration:1,easing:i},{current:d});e.util.applyFilter("afterTween",h,[d,a,b]);return d},e.prototype.interpolate=function(a,b,c){a=e.util.interpolate(this.get(),a,b,c);this.set(a);return a});var m=!1;e.util.enableRounding=function(){m=true};e.util.disableRounding=function(){m=false};e.util.isRoundingEnabled=function(){return m};e.prototype.filter.round={afterTween:function(a){m&&e.util.each(a,function(a,c){a[c].replace||(a[c]=Math.round(a[c]))})}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/util/Color.js' */
(function ($) {draw2d.util.Color=Class.extend({init:function(t,e,r){if(this.hashString=null,"undefined"==typeof t||null===t)this.hashString="none";else if(t instanceof draw2d.util.Color)this.red=t.red,this.green=t.green,this.blue=t.blue;else if("undefined"==typeof e){var n=this.hex2rgb(t);this.red=n[0],this.green=n[1],this.blue=n[2]}else this.red=t,this.green=e,this.blue=r},getHTMLStyle:function(){return"rgb("+this.red+","+this.green+","+this.blue+")"},getRed:function(){return this.red},getGreen:function(){return this.green},getBlue:function(){return this.blue},getIdealTextColor:function(){var t=105,e=.299*this.red+.587*this.green+.114*this.blue;return 255-e<t?new draw2d.util.Color(0,0,0):new draw2d.util.Color(255,255,255)},hex2rgb:function(t){return t=t.replace("#",""),{0:parseInt(t.substr(0,2),16),1:parseInt(t.substr(2,2),16),2:parseInt(t.substr(4,2),16)}},hex:function(){return this.int2hex(this.red)+this.int2hex(this.green)+this.int2hex(this.blue)},hash:function(){return null===this.hashString&&(this.hashString="#"+this.hex()),this.hashString},int2hex:function(t){return t=Math.round(Math.min(Math.max(0,t),255)),"0123456789ABCDEF".charAt((t-t%16)/16)+"0123456789ABCDEF".charAt(t%16)},darker:function(t){if("none"===this.hashString)return this;var e=parseInt(Math.round(this.getRed()*(1-t))),r=parseInt(Math.round(this.getGreen()*(1-t))),n=parseInt(Math.round(this.getBlue()*(1-t)));return e<0?e=0:e>255&&(e=255),r<0?r=0:r>255&&(r=255),n<0?n=0:n>255&&(n=255),new draw2d.util.Color(e,r,n)},lighter:function(t){if("none"===this.hashString)return this;var e=parseInt(Math.round(this.getRed()*(1+t))),r=parseInt(Math.round(this.getGreen()*(1+t))),n=parseInt(Math.round(this.getBlue()*(1+t)));return e<0?e=0:e>255&&(e=255),r<0?r=0:r>255&&(r=255),n<0?n=0:n>255&&(n=255),new draw2d.util.Color(e,r,n)},fadeTo:function(t,e){var r=Math.floor(this.red+e*(t.red-this.red)+.5),n=Math.floor(this.green+e*(t.green-this.green)+.5),i=Math.floor(this.blue+e*(t.blue-this.blue)+.5);return new draw2d.util.Color(r,n,i)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/util/ArrayList.js' */
(function ($) {draw2d.util.ArrayList=Class.extend({init:function(t){this.increment=10,this.size=0,this.data=new Array(this.increment),"undefined"!=typeof t&&$.each(t,$.proxy(function(t,i){this.add(i)},this))},reverse:function(){for(var t=new Array(this.size),i=0;i<this.size;i++)t[i]=this.data[this.size-i-1];return this.data=t,this},getCapacity:function(){return this.data.length},getSize:function(){return this.size},isEmpty:function(){return 0===this.getSize()},getLastElement:function(){return null!==this.data[this.getSize()-1]?this.data[this.getSize()-1]:null},asArray:function(){return this.trimToSize(),this.data},getFirstElement:function(){return null!==this.data[0]&&"undefined"!=typeof this.data[0]?this.data[0]:null},get:function(t){return this.data[t]},add:function(t){return this.getSize()==this.data.length&&this.resize(),this.data[this.size++]=t,this},grep:function(t){return this.data=$.grep(this.data,t),this.data=$.grep(this.data,function(t){return"undefined"!=typeof t}),this.size=this.data.length,this},addAll:function(t){if(!(t instanceof draw2d.util.ArrayList))throw"Unable to handle unknown object type in ArrayList.addAll";for(var i=0;i<t.getSize();i++)this.add(t.get(i));return this},pop:function(){return this.removeElementAt(this.getSize()-1)},push:function(t){this.add(t)},remove:function(t){var i=this.indexOf(t);return i>=0?this.removeElementAt(i):null},insertElementAt:function(t,i){this.size==this.capacity&&this.resize();for(var e=this.getSize();e>i;e--)this.data[e]=this.data[e-1];return this.data[i]=t,this.size++,this},removeElementAt:function(t){for(var i=this.data[t],e=t;e<this.size-1;e++)this.data[e]=this.data[e+1];return this.data[this.size-1]=null,this.size--,i},removeAll:function(t){return $.each(t,$.proxy(function(t,i){this.remove(i)},this)),this},indexOf:function(t){for(var i=0;i<this.getSize();i++)if(this.data[i]==t)return i;return-1},contains:function(t){for(var i=0;i<this.getSize();i++)if(this.data[i]==t)return!0;return!1},resize:function(){newData=new Array(this.data.length+this.increment);for(var t=0;t<this.data.length;t++)newData[t]=this.data[t];return this.data=newData,this},trimToSize:function(){if(this.data.length==this.size)return this;for(var t=new Array(this.getSize()),i=0;i<this.getSize();i++)t[i]=this.data[i];return this.size=t.length,this.data=t,this},sort:function(t){var i,e,n,s,a,r;for(i=1;i<this.getSize();i++){for(s=this.data[i],n=s[t],e=i-1,a=this.data[e],r=a[t];e>=0&&r>n;)this.data[e+1]=this.data[e],e--,e>=0&&(a=this.data[e],r=a[t]);this.data[e+1]=s}return this},clone:function(){for(var t=new draw2d.util.ArrayList,i=0;i<this.size;i++)t.add(this.data[i]);return t},each:function(t){for(var i=0;i<this.size&&t(i,this.data[i])!==!1;i++);},overwriteElementAt:function(t,i){return this.data[i]=t,this},getPersistentAttributes:function(){return{data:this.data,increment:this.increment,size:this.getSize()}},setPersistentAttributes:function(t){this.data=t.data,this.increment=t.increment,this.size=t.size}}),draw2d.util.ArrayList.EMPTY_LIST=new draw2d.util.ArrayList;}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/util/SVGUtil.js' */
(function ($) {Raphael.fn.polygon=function(p){for(var t=["M"],a=p.split(" "),h=0;h<a.length;h++){for(var r=a[h].split(","),l=0;l<r.length;l++){var n=parseFloat(r[l]);n&&t.push(n)}0==h&&t.push("L")}return t.push("Z"),this.path(t)};}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/util/UUID.js' */
(function ($) {draw2d.util.UUID=function(){},draw2d.util.UUID.create=function(){var t=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()};}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/util/spline/Spline.js' */
(function ($) {draw2d.util.spline.Spline=Class.extend({NAME:"draw2d.util.spline.Spline",init:function(){},generate:function(e,i){throw"inherit classes must implement the method 'draw2d.util.spline.Spline.generate()'"}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/util/spline/CubicSpline.js' */
(function ($) {draw2d.util.spline.CubicSpline=draw2d.util.spline.Spline.extend({NAME:"draw2d.util.spline.CubicSpline",init:function(){this._super()},generate:function(e,t){var d=new draw2d.util.ArrayList;d.add(e.get(0)),d.addAll(e),d.add(e.get(e.getSize()-1));var i=d.getSize(),r=new draw2d.util.ArrayList;r.add(e.get(0)),r.add(this.p(1,0,d));for(var n=1;n<i-2;n++)for(var a=1;a<=t;a++)r.add(this.p(n,a/t,d));return r.add(e.get(e.getSize()-1)),r},p:function(e,t,d){for(var i=0,r=0,n=e-1,a=-2;a<=1;a++){var l=this.blend(a,t),u=d.get(n++);i+=l*u.x,r+=l*u.y}return new draw2d.geo.Point(i,r)},blend:function(e,t){return e===-2?(((-t+3)*t-3)*t+1)/6:e===-1?((3*t-6)*t*t+4)/6:0===e?(((-3*t+3)*t+3)*t+1)/6:t*t*t/6}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/util/spline/CatmullRomSpline.js' */
(function ($) {draw2d.util.spline.CatmullRomSpline=draw2d.util.spline.CubicSpline.extend({NAME:"draw2d.util.spline.CatmullRomSpline",init:function(){this._super()},blend:function(i,l){return i==-2?((-l+2)*l-1)*l/2:i==-1?((3*l-5)*l*l+2)/2:0==i?((-3*l+4)*l+1)*l/2:(l-1)*l*l/2}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/util/spline/BezierSpline.js' */
(function ($) {draw2d.util.spline.BezierSpline=draw2d.util.spline.Spline.extend({NAME:"draw2d.util.spline.BezierSpline",init:function(){this._super()},generate:function(e,i){var n=e.getSize(),r=new draw2d.util.ArrayList;r.add(this.p(0,0,e));for(var t=0;t<n-3;t+=3)for(var d=1;d<=i;d++)r.add(this.p(t,d/i,e));return r},p:function(e,i,n){for(var r=0,t=0,d=e,a=0;a<=3;a++){var l=this.blend(a,i),u=n.get(d++);r+=l*u.x,t+=l*u.y}return new draw2d.geo.Point(r,t)},blend:function(e,i){return 0==e?(1-i)*(1-i)*(1-i):1==e?3*i*(1-i)*(1-i):2==e?3*i*i*(1-i):i*i*i}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/geo/PositionConstants.js' */
(function ($) {draw2d.geo.PositionConstants=function(){},draw2d.geo.PositionConstants.NORTH=1,draw2d.geo.PositionConstants.SOUTH=4,draw2d.geo.PositionConstants.WEST=8,draw2d.geo.PositionConstants.EAST=16;}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/geo/Point.js' */
(function ($) {draw2d.geo.Point=Class.extend({NAME:"draw2d.geo.Point",init:function(t,i){this.x=t,this.y=i,this.bx=null,this.by=null,this.bw=null,this.bh=null},setBoundary:function(t,i,s,n){return t instanceof draw2d.geo.Rectangle?(this.bx=t.x,this.by=t.y,this.bw=t.w,this.bh=t.h):(this.bx=t,this.by=i,this.bw=s,this.bh=n),this.adjustBoundary(),this},adjustBoundary:function(){if(null!==this.bx)return this.x=Math.min(Math.max(this.bx,this.x),this.bw),this.y=Math.min(Math.max(this.by,this.y),this.bh),this},translate:function(t,i){return this.x+=t,this.y+=i,this.adjustBoundary(),this},getX:function(){return this.x},getY:function(){return this.y},setX:function(t){return this.x=t,this.adjustBoundary(),this},setY:function(t){return this.y=t,this.adjustBoundary(),this},setPosition:function(t,i){return t instanceof draw2d.geo.Point?(this.x=t.x,this.y=t.y):(this.x=t,this.y=i),this.adjustBoundary(),this},getPosition:function(t){var i=t.x-this.x,s=t.y-this.y;return Math.abs(i)>Math.abs(s)?i<0?draw2d.geo.PositionConstants.WEST:draw2d.geo.PositionConstants.EAST:s<0?draw2d.geo.PositionConstants.NORTH:draw2d.geo.PositionConstants.SOUTH},equals:function(t){return this.x===t.x&&this.y===t.y},getDistance:function(t){return Math.sqrt((this.x-t.x)*(this.x-t.x)+(this.y-t.y)*(this.y-t.y))},getTranslated:function(t){return new draw2d.geo.Point(this.x+t.x,this.y+t.y)},getPersistentAttributes:function(){return{x:this.x,y:this.y}},setPersistentAttributes:function(t){this.x=t.x,this.y=t.y},subtract:function(t){return new draw2d.geo.Point(this.x-t.x,this.y-t.y)},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lerp:function(t,i){return new draw2d.geo.Point(this.x+(t.x-this.x)*i,this.y+(t.y-this.y)*i)},clone:function(){return new draw2d.geo.Point(this.x,this.y)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/geo/Rectangle.js' */
(function ($) {draw2d.geo.Rectangle=draw2d.geo.Point.extend({NAME:"draw2d.geo.Rectangle",init:function(t,i,e,h){this._super(t,i),this.w=e,this.h=h},adjustBoundary:function(){null!==this.bx&&(this.x=Math.min(Math.max(this.bx,this.x),this.bw-this.w),this.y=Math.min(Math.max(this.by,this.y),this.bh-this.h),this.w=Math.min(this.w,this.bw),this.h=Math.min(this.h,this.bh))},resize:function(t,i){return this.w+=t,this.h+=i,this.adjustBoundary(),this},scale:function(t,i){return this.w+=t,this.h+=i,this.x-=t/2,this.y-=i/2,this.adjustBoundary(),this},setBounds:function(t){return this.setPosition(t.x,t.y),this.w=t.w,this.h=t.h,this},isEmpty:function(){return this.w<=0||this.h<=0},getWidth:function(){return this.w},setWidth:function(t){return this.w=t,this.adjustBoundary(),this},getHeight:function(){return this.h},setHeight:function(t){return this.h=t,this.adjustBoundary(),this},getLeft:function(){return this.x},getRight:function(){return this.x+this.w},getTop:function(){return this.y},getBottom:function(){return this.y+this.h},getTopLeft:function(){return new draw2d.geo.Point(this.x,this.y)},getTopCenter:function(){return new draw2d.geo.Point(this.x+this.w/2,this.y)},getTopRight:function(){return new draw2d.geo.Point(this.x+this.w,this.y)},getBottomLeft:function(){return new draw2d.geo.Point(this.x,this.y+this.h)},getBottomCenter:function(){return new draw2d.geo.Point(this.x+this.w/2,this.y+this.h)},getCenter:function(){return new draw2d.geo.Point(this.x+this.w/2,this.y+this.h/2)},getBottomRight:function(){return new draw2d.geo.Point(this.x+this.w,this.y+this.h)},getPoints:function(){var t=new draw2d.util.ArrayList;return t.add(this.getTopLeft()),t.add(this.getTopRight()),t.add(this.getBottomRight()),t.add(this.getBottomLeft()),t},moveInside:function(t){var i=new draw2d.geo.Rectangle(t.x,t.y,t.w,t.h);return i.x=Math.max(i.x,this.x),i.y=Math.max(i.y,this.y),i.w<this.w?i.x=Math.min(i.x+i.w,this.x+this.w)-i.w:i.x=this.x,i.h<this.h?i.y=Math.min(i.y+i.h,this.y+this.h)-i.h:i.y=this.y,i},getDistance:function(t){var i=this.x,e=this.y,h=this.w,s=this.h,n=t.getX(),r=t.getY(),o=1,a=1;t instanceof draw2d.geo.Rectangle&&(o=t.getWidth(),a=t.getHeight());var u=9;if(i+h<=n)u=e+s<=r?0:e>=r+a?6:7;else if(i>=n+o)u=e+s<=r?2:e>=r+a?4:3;else if(e+s<=r)u=1;else{if(!(e>=r+a))return 0;u=5}switch(u){case 0:return i=i+h-n,e=e+s-r,-(i+e);case 1:return-(e+s-r);case 2:return i=n+o-i,e=e+s-r,-(i+e);case 3:return-(n+o-i);case 4:return i=n+o-i,e=r+a-e,-(i+e);case 5:return-(r+a-e);case 6:return i=i+h-n,e=r+a-e,-(i+e);case 7:return-(i+h-n)}throw"Unknown data type of parameter for distance calculation in draw2d.geo.Rectangle.getDistnace(..)"},determineOctant:function(t){var i=3,e=this.x+i,h=this.y+i,s=this.w-2*i,n=this.h-2*i,r=t.x,o=t.y,a=2,u=2;t instanceof draw2d.geo.Rectangle&&(a=t.w,u=t.h);var g=0;return g=r+a<=e?o+u<=h?0:o>=h+n?6:7:r>=e+s?o+u<=h?2:o>=h+n?4:3:o+u<=h?1:o>=h+n?5:8},getDirection:function(t){var i=this.getTopLeft();switch(this.determineOctant(t)){case 0:return i.x-t.x<i.y-t.y?0:3;case 1:return 0;case 2:return i=this.getTopRight(),t.x-i.x<i.y-t.y?0:1;case 3:return 1;case 4:return i=this.getBottomRight(),t.x-i.x<t.y-i.y?2:1;case 5:return 2;case 6:return i=this.getBottomLeft(),i.x-t.x<t.y-i.y?2:3;case 7:return 3;case 8:return t.y>this.y?2:0}return 0},equals:function(t){return this.x==t.x&&this.y==t.y&&this.w==t.w&&this.h==t.h},hitTest:function(t,i){t instanceof draw2d.geo.Point&&(i=t.y,t=t.x);var e=this.x+this.getWidth(),h=this.y+this.getHeight();return t>=this.x&&t<=e&&i>=this.y&&i<=h},isInside:function(t){return t.hitTest(this.getTopLeft())&&t.hitTest(this.getTopRight())&&t.hitTest(this.getBottomLeft())&&t.hitTest(this.getBottomRight())},intersects:function(t){return x11=t.x,y11=t.y,x12=t.x+t.w,y12=t.y+t.h,x21=this.x,y21=this.y,x22=this.x+this.w,y22=this.y+this.h,x_overlap=Math.max(0,Math.min(x12,x22)-Math.max(x11,x21)),y_overlap=Math.max(0,Math.min(y12,y22)-Math.max(y11,y21)),x_overlap*y_overlap!==0},toJSON:function(){return{width:this.w,height:this.h,x:this.x,y:this.y}}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/command/CommandType.js' */
(function ($) {draw2d.command.CommandType=Class.extend({NAME:"draw2d.command.CommandType",init:function(d){this.policy=d},getPolicy:function(){return this.policy}}),draw2d.command.CommandType.DELETE="DELETE",draw2d.command.CommandType.MOVE="MOVE",draw2d.command.CommandType.CONNECT="CONNECT",draw2d.command.CommandType.MOVE_BASEPOINT="MOVE_BASEPOINT",draw2d.command.CommandType.RESIZE="RESIZE",draw2d.command.CommandType.RESET="RESET";}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/command/Command.js' */
(function ($) {draw2d.command.Command=Class.extend({NAME:"draw2d.command.Command",init:function(n){this.label=n},getLabel:function(){return this.label},canExecute:function(){return!0},execute:function(){},cancel:function(){},undo:function(){},redo:function(){}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/command/CommandCollection.js' */
(function ($) {draw2d.command.CommandCollection=draw2d.command.Command.extend({NAME:"draw2d.command.CommandCollection",init:function(){this._super("Execute Commands"),this.commands=new draw2d.util.ArrayList},add:function(n){this.commands.add(n)},execute:function(){this.commands.each(function(n,d){d.execute()})},redo:function(){this.commands.each(function(n,d){d.redo()})},undo:function(){this.commands.reverse(),this.commands.each(function(n,d){d.undo()}),this.commands.reverse()}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/command/CommandStack.js' */
(function ($) {draw2d.command.CommandStack=Class.extend({NAME:"draw2d.command.CommandStack",init:function(){this.undostack=[],this.redostack=[],this.maxundo=50,this.transactionCommand=null,this.eventListeners=new draw2d.util.ArrayList},setUndoLimit:function(t){this.maxundo=t},markSaveLocation:function(){this.undostack=[],this.redostack=[],this.notifyListeners(new draw2d.command.Command,draw2d.command.CommandStack.POST_EXECUTE)},execute:function(t){if(null!==t){if("undefined"==typeof t)throw"Missing parameter [command] for method call CommandStack.execute";if(t.canExecute()!==!1){if(null!==this.transactionCommand)return void this.transactionCommand.add(t);this.notifyListeners(t,draw2d.command.CommandStack.PRE_EXECUTE),this.undostack.push(t),t.execute(),this.redostack=[],this.undostack.length>this.maxundo&&(this.undostack=this.undostack.slice(this.undostack.length-this.maxundo)),this.notifyListeners(t,draw2d.command.CommandStack.POST_EXECUTE)}}},startTransaction:function(){this.transactionCommand=new draw2d.command.CommandCollection},commitTransaction:function(){if(null!==this.transactionCommand){var t=this.transactionCommand;this.transactionCommand=null,this.execute(t)}},undo:function(){var t=this.undostack.pop();t&&(this.notifyListeners(t,draw2d.command.CommandStack.PRE_UNDO),this.redostack.push(t),t.undo(),this.notifyListeners(t,draw2d.command.CommandStack.POST_UNDO))},redo:function(){var t=this.redostack.pop();t&&(this.notifyListeners(t,draw2d.command.CommandStack.PRE_REDO),this.undostack.push(t),t.redo(),this.notifyListeners(t,draw2d.command.CommandStack.POST_REDO))},getRedoLabel:function(){if(0===this.redostack.lenght)return"";var t=this.redostack[this.redostack.length-1];return t?t.getLabel():""},getUndoLabel:function(){if(0===this.undostack.lenght)return"";var t=this.undostack[this.undostack.length-1];return t?t.getLabel():""},canRedo:function(){return this.redostack.length>0},canUndo:function(){return this.undostack.length>0},addEventListener:function(t){if(t instanceof draw2d.command.CommandStackEventListener)this.eventListeners.add(t);else if("function"==typeof t.stackChanged)this.eventListeners.add(t);else{if("function"!=typeof t)throw"Object doesn't implement required callback interface [draw2d.command.CommandStackListener]";this.eventListeners.add({stackChanged:t})}},removeEventListener:function(t){for(var n=0;n<size;n++){var a=this.eventListeners.get(n);if(a===t||a.stackChanged===t)return void this.eventListeners.remove(a)}},notifyListeners:function(t,n){for(var a=new draw2d.command.CommandStackEvent(this,t,n),d=this.eventListeners.getSize(),o=0;o<d;o++)this.eventListeners.get(o).stackChanged(a)}}),draw2d.command.CommandStack.PRE_EXECUTE=1,draw2d.command.CommandStack.PRE_REDO=2,draw2d.command.CommandStack.PRE_UNDO=4,draw2d.command.CommandStack.POST_EXECUTE=8,draw2d.command.CommandStack.POST_REDO=16,draw2d.command.CommandStack.POST_UNDO=32,draw2d.command.CommandStack.POST_INIT=64,draw2d.command.CommandStack.POST_MASK=draw2d.command.CommandStack.POST_EXECUTE|draw2d.command.CommandStack.POST_UNDO|draw2d.command.CommandStack.POST_REDO,draw2d.command.CommandStack.PRE_MASK=draw2d.command.CommandStack.PRE_EXECUTE|draw2d.command.CommandStack.PRE_UNDO|draw2d.command.CommandStack.PRE_REDO;}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/command/CommandStackEvent.js' */
(function ($) {draw2d.command.CommandStackEvent=Class.extend({NAME:"draw2d.command.CommandStackEvent",init:function(t,n,a){this.stack=t,this.command=n,this.details=a},getStack:function(){return this.stack},getCommand:function(){return this.command},getDetails:function(){return this.details},isPostChangeEvent:function(){return 0!=(this.getDetails()&draw2d.command.CommandStack.POST_MASK)},isPreChangeEvent:function(){return 0!=(this.getDetails()&draw2d.command.CommandStack.PRE_MASK)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/command/CommandStackEventListener.js' */
(function ($) {draw2d.command.CommandStackEventListener=Class.extend({NAME:"draw2d.command.CommandStackEventListener",init:function(){},stackChanged:function(n){}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/command/CommandMove.js' */
(function ($) {draw2d.command.CommandMove=draw2d.command.Command.extend({NAME:"draw2d.command.CommandMove",init:function(t,i,o){this._super("Shape moved"),this.figure=t,"undefined"==typeof i?(this.oldX=t.getX(),this.oldY=t.getY()):(this.oldX=i,this.oldY=o)},setStartPosition:function(t,i){this.oldX=t,this.oldY=i},setPosition:function(t,i){this.newX=t,this.newY=i},canExecute:function(){return this.newX!=this.oldX||this.newY!=this.oldY},execute:function(){this.redo()},undo:function(){this.figure.setPosition(this.oldX,this.oldY)},redo:function(){this.figure.setPosition(this.newX,this.newY)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/command/CommandMoveLine.js' */
(function ($) {draw2d.command.CommandMoveLine=draw2d.command.Command.extend({NAME:"draw2d.command.CommandMoveLine",init:function(t,i,s,n,e){this._super("Line moved"),this.line=t,this.startX1=i,this.startY1=s,this.endX1=n,this.endY1=e,this.startX2=-1,this.startY2=-1,this.endX2=-1,this.endY2=-1},canExecute:function(){return this.startX1!=this.startX2||this.startY1!=this.startY2||this.endX1!=this.endX2||this.endY1!=this.endY2},execute:function(){this.startX2=this.line.getStartX(),this.startY2=this.line.getStartY(),this.endX2=this.line.getEndX(),this.endY2=this.line.getEndY(),this.redo()},undo:function(){this.line.setStartPoint(this.startX1,this.startY1),this.line.setEndPoint(this.endX1,this.endY1)},redo:function(){this.line.setStartPoint(this.startX2,this.startY2),this.line.setEndPoint(this.endX2,this.endY2)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/command/CommandResize.js' */
(function ($) {draw2d.command.CommandResize=draw2d.command.Command.extend({NAME:"draw2d.command.CommandResize",init:function(i,t,e){this._super("Resize Shape"),this.figure=i,"undefined"==typeof t?(this.oldWidth=i.getWidth(),this.oldHeight=i.getHeight()):(this.oldWidth=t,this.oldHeight=e)},setDimension:function(i,t){this.newWidth=0|i,this.newHeight=0|t},canExecute:function(){return this.newWidth!=this.oldWidth||this.newHeight!=this.oldHeight},execute:function(){this.redo()},undo:function(){this.figure.setDimension(this.oldWidth,this.oldHeight)},redo:function(){this.figure.setDimension(this.newWidth,this.newHeight)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/command/CommandConnect.js' */
(function ($) {draw2d.command.CommandConnect=draw2d.command.Command.extend({NAME:"draw2d.command.CommandConnect",init:function(n,t,o){this._super("Connecting Ports"),this.canvas=n,this.source=t,this.target=o,this.connection=null},setConnection:function(n){this.connection=n},execute:function(){null===this.connection&&(this.connection=draw2d.Connection.createConnection(this.source,this.target)),this.connection.setSource(this.source),this.connection.setTarget(this.target),this.canvas.addFigure(this.connection),this.canvas.onNewConnection(this.connection)},redo:function(){this.canvas.addFigure(this.connection),this.connection.reconnect()},undo:function(){this.canvas.removeFigure(this.connection)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/command/CommandReconnect.js' */
(function ($) {draw2d.command.CommandReconnect=draw2d.command.Command.extend({NAME:"draw2d.command.CommandReconnect",init:function(t){this._super("Connecting Ports"),this.con=t,this.oldSourcePort=t.getSource(),this.oldTargetPort=t.getTarget(),this.oldRouter=t.getRouter()},canExecute:function(){return!0},setNewPorts:function(t,o){this.newSourcePort=t,this.newTargetPort=o},execute:function(){this.redo()},cancel:function(){this.con.calculatePath(),this.con.setRouter(this.oldRouter)},undo:function(){this.con.setSource(this.oldSourcePort),this.con.setTarget(this.oldTargetPort),this.con.setRouter(this.oldRouter),this.con.onReconnect(this.con.getSource(),this.con.getTarget())},redo:function(){this.con.setSource(this.newSourcePort),this.con.setTarget(this.newTargetPort),this.con.setRouter(this.oldRouter),this.con.onReconnect(this.con.getSource(),this.con.getTarget())}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/command/CommandDelete.js' */
(function ($) {draw2d.command.CommandDelete=draw2d.command.Command.extend({init:function(n){this._super("Deleting Shape"),this.parent=n.getParent(),this.figure=n,this.canvas=n.getCanvas(),this.connections=null},execute:function(){this.redo()},undo:function(){this.canvas.addFigure(this.figure),this.figure instanceof draw2d.Connection&&this.figure.reconnect(),this.canvas.setCurrentSelection(this.figure),null!==this.parent&&this.parent.addChild(this.figure);for(var n=0;n<this.connections.getSize();++n)this.canvas.addFigure(this.connections.get(n)),this.connections.get(n).reconnect()},redo:function(){if(this.canvas.setCurrentSelection(null),this.figure instanceof draw2d.shape.node.Node&&null===this.connections){this.connections=new draw2d.util.ArrayList;for(var n=this.figure.getPorts(),t=0;t<n.getSize();t++)for(var e=n.get(t),i=0,s=e.getConnections().getSize();i<s;i++)this.connections.contains(e.getConnections().get(i))||this.connections.add(e.getConnections().get(i));for(var t=0;t<n.getSize();t++){var e=n.get(t);e.setCanvas(null)}}this.canvas.removeFigure(this.figure),null===this.connections&&(this.connections=new draw2d.util.ArrayList),null!==this.parent&&this.parent.removeChild(this.figure);for(var t=0;t<this.connections.getSize();++t)this.canvas.removeFigure(this.connections.get(t))}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/command/CommandAdd.js' */
(function ($) {draw2d.command.CommandAdd=draw2d.command.Command.extend({init:function(i,t,e,n){this._super("Add Shape"),this.figure=t,this.canvas=i,this.x=e,this.y=n},execute:function(){this.canvas.addFigure(this.figure,this.x,this.y)},redo:function(){this.execute()},undo:function(){this.canvas.removeFigure(this.figure)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/connection/ConnectionRouter.js' */
(function ($) {draw2d.layout.connection.ConnectionRouter=Class.extend({NAME:"draw2d.layout.connection.ConnectionRouter",init:function(){},route:function(n){throw"subclasses must implement the method [ConnectionRouter.route]"}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/connection/DirectRouter.js' */
(function ($) {draw2d.layout.connection.DirectRouter=draw2d.layout.connection.ConnectionRouter.extend({NAME:"draw2d.layout.connection.DirectRouter",init:function(){},invalidate:function(){},route:function(t){var n=t.getStartPoint(),o=t.getEndPoint();t.addPoint(n),t.addPoint(o);var i=["M",n.x," ",n.y];i.push("L",o.x," ",o.y),t.svgPathString=i.join("")}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/connection/ManhattanConnectionRouter.js' */
(function ($) {draw2d.layout.connection.ManhattanConnectionRouter=draw2d.layout.connection.ConnectionRouter.extend({NAME:"draw2d.layout.connection.ManhattanConnectionRouter",MINDIST:20,TOL:.1,TOLxTOL:.01,TOGGLE_DIST:5,init:function(){},route:function(e){var t=e.getStartPoint(),n=e.getSource().getConnectionDirection(e,e.getTarget()),i=e.getEndPoint(),o=e.getTarget().getConnectionDirection(e,e.getSource());this._route(e,i,o,t,n);for(var a=e.getPoints(),d=a.get(0),r=["M",(0|d.x)+.5," ",(0|d.y)+.5],s=1;s<a.getSize();s++)d=a.get(s),r.push("L",(0|d.x)+.5," ",(0|d.y)+.5);e.svgPathString=r.join("")},_route:function(e,t,n,i,o){var a,d,r=0,s=1,w=2,g=3,x=t.x-i.x,y=t.y-i.y;if(x*x<this.TOLxTOL&&y*y<this.TOLxTOL)return void e.addPoint(new draw2d.geo.Point(i.x,i.y));if(n===g)if(x>0&&y*y<this.TOL&&o===s)a=i,d=o;else{if(x<0)a=new draw2d.geo.Point(t.x-this.MINDIST,t.y);else if(y>0&&o===w||y<0&&o===r)a=new draw2d.geo.Point(i.x,t.y);else if(n==o){var f=Math.min(t.x,i.x)-this.MINDIST;a=new draw2d.geo.Point(f,t.y)}else a=new draw2d.geo.Point(t.x-x/2,t.y);d=y>0?r:w}else if(n===s)if(x<0&&y*y<this.TOL&&o===g)a=i,d=o;else{if(x>0)a=new draw2d.geo.Point(t.x+this.MINDIST,t.y);else if(y>0&&o===w||y<0&&o===r)a=new draw2d.geo.Point(i.x,t.y);else if(n===o){var f=Math.max(t.x,i.x)+this.MINDIST;a=new draw2d.geo.Point(f,t.y)}else a=new draw2d.geo.Point(t.x-x/2,t.y);d=y>0?r:w}else if(n===w)if(x*x<this.TOL&&y<0&&o===r)a=i,d=o;else{if(y>0)a=new draw2d.geo.Point(t.x,t.y+this.MINDIST);else if(x>0&&o===s||x<0&&o===g)a=new draw2d.geo.Point(t.x,i.y);else if(n===o){var f=Math.max(t.y,i.y)+this.MINDIST;a=new draw2d.geo.Point(t.x,f)}else a=new draw2d.geo.Point(t.x,t.y-y/2);d=x>0?g:s}else if(n===r)if(x*x<this.TOL&&y>0&&o===w)a=i,d=o;else{if(y<0)a=new draw2d.geo.Point(t.x,t.y-this.MINDIST);else if(x>0&&o===s||x<0&&o===g)a=new draw2d.geo.Point(t.x,i.y);else if(n===o){var f=Math.min(t.y,i.y)-this.MINDIST;a=new draw2d.geo.Point(t.x,f)}else a=new draw2d.geo.Point(t.x,t.y-y/2);d=x>0?g:s}this._route(e,a,d,i,o),e.addPoint(t)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/connection/ManhattanBridgedConnectionRouter.js' */
(function ($) {draw2d.layout.connection.ManhattanBridgedConnectionRouter=draw2d.layout.connection.ManhattanConnectionRouter.extend({NAME:"draw2d.layout.connection.ManhattanBridgedConnectionRouter",BRIDGE_HORIZONTAL_LR:" r 0 0 3 -4 7 -4 10 0 13 0 ",BRIDGE_HORIZONTAL_RL:" r 0 0 -3 -4 -7 -4 -10 0 -13 0 ",init:function(){},route:function(t){var n=t.getStartPoint(),e=t.getSource().getConnectionDirection(t,t.getTarget()),o=t.getEndPoint(),i=t.getTarget().getConnectionDirection(t,t.getSource());this._route(t,o,i,n,e);var r=t.getCanvas().getIntersection(t).sort("x"),a=r.clone().reverse(),c=r,g=0,u=t.getPoints(),s=u.get(0),R=["M",(0|s.x)+.5," ",(0|s.y)+.5],d=s;for(g=1;g<u.getSize();g++){s=u.get(g);var h=5,y=this.BRIDGE_HORIZONTAL_LR;d.x>s.x&&(c=a,y=this.BRIDGE_HORIZONTAL_RL,h=-h),c.each(function(t,n){0==n.justTouching&&draw2d.shape.basic.Line.hit(1,d.x,d.y,s.x,s.y,n.x,n.y)===!0&&s.y===n.y&&(R.push(" L",(n.x-h|0)+.5," ",(0|n.y)+.5),R.push(y))}),R.push(" L",(0|s.x)+.5," ",(0|s.y)+.5),d=s}t.svgPathString=R.join("")}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/connection/CircuitConnectionRouter.js' */
(function ($) {draw2d.layout.connection.CircuitConnectionRouter=draw2d.layout.connection.ManhattanConnectionRouter.extend({NAME:"draw2d.layout.connection.CircuitConnectionRouter",init:function(){this.setBridgeRadius(4),this.setJunctionRadius(2),this.abortRoutingOnFirstJunctionNode=!1},setJunctionRadius:function(t){this.junctionRadius=t},setBridgeRadius:function(t){this.bridgeRadius=t,this.bridge_LR=[" r",.5,-.5,t-t/2,-(t-t/4),t,-t,t+t/2,-(t-t/4),2*t,"0 "].join(" "),this.bridge_RL=[" r",-.5,-.5,-(t-t/2),-(t-t/4),-t,-t,-(t+t/2),-(t-t/4),2*-t,"0 "].join(" ")},route:function(t){var e=t.getStartPoint(),i=t.getSource().getConnectionDirection(t,t.getTarget()),n=t.getEndPoint(),o=t.getTarget().getConnectionDirection(t,t.getSource());this._route(t,n,o,e,i);var r=t.getCanvas().getIntersection(t).sort("x"),s=r.clone().reverse(),u=r,a=0;"undefined"!=typeof t.junctionNodes&&null!==t.junctionNodes&&t.junctionNodes.remove(),t.junctionNodes=t.canvas.paper.set();var c=t.getPoints(),d=c.get(0),g=["M",(0|d.x)+.5," ",(0|d.y)+.5],h=d,l=null,R=null,y=null;for(a=1;a<c.getSize();a++)d=c.get(a),h.x>d.x?(u=s,R=this.bridge_RL,l=-this.bridgeRadius):(u=r,R=this.bridge_LR,l=this.bridgeRadius),u.each($.proxy(function(e,i){if(draw2d.shape.basic.Line.hit(1,h.x,h.y,d.x,d.y,i.x,i.y)===!0)if(t.sharingPorts(i.other)){var n=i.other,o=n.getZOrder(),r=t.getZOrder();if(r<o){var s=t.canvas.paper.ellipse(i.x,i.y,this.junctionRadius,this.junctionRadius).attr({fill:t.lineColor.hash()});t.junctionNodes.push(s),this.abortRoutingOnFirstJunctionNode===!0&&(t.getSource()!=n.getSource()&&t.getSource()!=n.getTarget()||(g=["M",(0|i.x)+.5," ",(0|i.y)+.5],null!==y&&(y.remove(),t.junctionNodes.exclude(y))),y=s)}}else d.y===i.y&&(g.push(" L",(i.x-l|0)+.5," ",(0|i.y)+.5),g.push(R))},this)),g.push(" L",(0|d.x)+.5," ",(0|d.y)+.5),h=d;t.svgPathString=g.join("")}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/connection/SplineConnectionRouter.js' */
(function ($) {draw2d.layout.connection.SplineConnectionRouter=draw2d.layout.connection.ManhattanConnectionRouter.extend({NAME:"draw2d.layout.connection.SplineConnectionRouter",init:function(){this.spline=new draw2d.util.spline.CubicSpline,this.MINDIST=50,this.cheapRouter=null},route:function(t){var n=0,e=t.getStartPoint(),i=t.getSource().getConnectionDirection(t,t.getTarget()),o=t.getEndPoint(),r=t.getTarget().getConnectionDirection(t,t.getSource());this._route(t,o,r,e,i);var a=t.getPoints();t.oldPoint=null,t.lineSegments=new draw2d.util.ArrayList,t.basePoints=new draw2d.util.ArrayList;var c=this.spline.generate(a,8);c.each(function(n,e){t.addPoint(e)});var a=t.getPoints();length=a.getSize();var g=a.get(0),u=["M",g.x," ",g.y];for(n=1;n<length;n++)g=a.get(n),u.push("L",g.x," ",g.y);t.svgPathString=u.join("")}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/connection/FanConnectionRouter.js' */
(function ($) {draw2d.layout.connection.FanConnectionRouter=draw2d.layout.connection.DirectRouter.extend({NAME:"gdraw2d.layout.connection.FanConnectionRouter",init:function(){},route:function(t){for(var o=t.getSource().getConnections(),n=new draw2d.util.ArrayList,e=0,i=0;i<o.getSize();i++){var r=o.get(i);r.getTarget()!==t.getTarget()&&r.getSource()!==t.getTarget()||(n.add(r),t===r&&(e=n.getSize()))}n.getSize()>1?this.routeCollision(t,e):this._super(t)},routeCollision:function(t,o){var n,e=t.getStartPoint(),i=t.getEndPoint(),r=15,a=new draw2d.geo.Point((i.x+e.x)/2,(i.y+e.y)/2),d=i.getPosition(e);n=d==draw2d.geo.PositionConstants.SOUTH||d==draw2d.geo.PositionConstants.EAST?new draw2d.geo.Point(i.x-e.x,i.y-e.y):new draw2d.geo.Point(e.x-i.x,e.y-i.y);var g,s=Math.sqrt(n.x*n.x+n.y*n.y),u=r*n.x/s,w=r*n.y/s;g=o%2===0?new draw2d.geo.Point(a.x+o/2*(-1*w),a.y+o/2*u):new draw2d.geo.Point(a.x+o/2*w,a.y+o/2*(-1*u)),t.addPoint(e),t.addPoint(g),t.addPoint(i);for(var y=t.getPoints(),c=y.get(0),P=["M",c.x," ",c.y],x=1;x<y.getSize();x++)c=y.get(x),P.push("L",c.x," ",c.y);t.svgPathString=P.join("")}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/connection/MazeConnectionRouter.js' */
(function ($) {var ROUTER_RECTS=null;draw2d.layout.connection.MazeConnectionRouter=draw2d.layout.connection.ConnectionRouter.extend({NAME:"draw2d.layout.connection.MazeConnectionRouter",init:function(){this.useSpline=!1,this.useSimplify=!0,this.useSimplifyValue=2,this.useDebug=!1,this.useShift=4,this.portOutletOffset=15,this.finder=new PF.JumpPointFinder({allowDiagonal:!1,dontCrossCorners:!0})},route:function(t){var e=t.getStartPoint(),i=t.getSource().getConnectionDirection(t,t.getTarget()),a=t.getEndPoint(),n=t.getTarget().getConnectionDirection(t,t.getSource());this._route(t,a,n,e,i);for(var r=t.getPoints(),o=r.get(0),s=["M",(0|o.x)+.5," ",(0|o.y)+.5],u=1;u<r.getSize();u++)o=r.get(u),s.push("L",(0|o.x)+.5," ",(0|o.y)+.5);t.svgPathString=s.join("")},_route:function(t,e,i,a,n){var r=this.useShift;oldToPt=a,oldFromPt=e,e=this.getAddjustedPoint(e,i,this.portOutletOffset),a=this.getAddjustedPoint(a,n,this.portOutletOffset);var o=this.generateNoGoGrid(t,e,i,a,n),s=this.finder.findPath(e.x>>r,e.y>>r,a.x>>r,a.y>>r,o);if($.each(s,function(t,e){e.x=e[0]=e[0]<<r,e.y=e[1]=e[1]<<r}),this.useDebug){null!==ROUTER_RECTS&&ROUTER_RECTS.remove(),ROUTER_RECTS=t.canvas.paper.set();for(var u=0;u<o.width;u++)for(var f=0;f<o.height;f++)o.isWalkableAt(u,f)||ROUTER_RECTS.push(t.canvas.paper.rect(u<<r,f<<r,1<<r,1<<r).attr({fill:"red",opacity:"0.1"}));ROUTER_RECTS.push(t.canvas.paper.rect(e.x-3,e.y-3,6,6).attr({fill:"#ff0000",opacity:"0.8"})),ROUTER_RECTS.push(t.canvas.paper.rect(a.x-3,a.y-3,6,6).attr({fill:"#ff0000",opacity:"0.8"})),$.each(s,function(e,i){ROUTER_RECTS.push(t.canvas.paper.rect(i.x-3,i.y-3,6,6).attr({fill:"#0000ff",opacity:"0.8"}))});for(var h=s[0],c=["M",h.x," ",h.y],u=1;u<s.length;u++)h=s[u],c.push("L",h.x," ",h.y);c=c.join(""),ROUTER_RECTS.push(t.canvas.paper.path(c).attr({stroke:"#0000ff"}))}if(this.adjustPath(e,s,i),s.reverse(),this.adjustPath(a,s,n),s.reverse(),$.each(s,function(t,e){e.x=e[0],e.y=e[1]}),this.useSpline){var h=new draw2d.util.ArrayList;if(h.add(oldFromPt),$.each(s,function(t,e){h.add(new draw2d.geo.Point(e[0],e[1]))}),h.add(oldToPt),this.useDebug){$.each(s,function(e,i){ROUTER_RECTS.push(t.canvas.paper.rect(i.x-3,i.y-3,6,6).attr({fill:"#00ff00",opacity:"0.8"}))});for(var p=s[0],c=["M",p.x," ",p.y],u=1;u<s.length;u++)p=s[u],c.push("L",p.x," ",p.y);c=c.join(""),ROUTER_RECTS.push(t.canvas.paper.path(c).attr({stroke:"#00ff00"}))}this.spline=new draw2d.util.spline.CubicSpline;var l=this.spline.generate(h,8);this.useSimplify?(s=[],l.each(function(t,e){s.push({x:e.x,y:e.y})}),s=this.simplify(s,this.useSimplifyValue,!0),$.each(s,function(e,i){t.addPoint(i.x,i.y)})):l.each(function(e,i){t.addPoint(i)})}else{if(this.useSimplify&&(s=this.simplify(s,this.useSimplifyValue,!0)),this.useDebug){$.each(s,function(e,i){ROUTER_RECTS.push(t.canvas.paper.rect(i.x-3,i.y-3,6,6).attr({fill:"#00ff00",opacity:"0.8"}))});for(var h=s[0],c=["M",h.x," ",h.y],u=1;u<s.length;u++)h=s[u],c.push("L",h.x," ",h.y);c=c.join(""),ROUTER_RECTS.push(t.canvas.paper.path(c).attr({stroke:"#00ff00"}))}t.addPoint(oldFromPt),$.each(s,function(e,i){t.addPoint(i[0],i[1])}),t.addPoint(oldToPt)}},generateNoGoGrid:function(t,e,i,a,n){var r=this.useShift,o=(1<<r)/2,s=t.getCanvas().paper.width>>r,u=t.getCanvas().paper.height>>r,f=new PF.Grid(s,u),h=t.getCanvas().getFigures();h.each(function(t,i){var n=i.getBoundingBox();if(n.hitTest(e.x,e.y)!==!0&&!n.hitTest(a.x,a.y)){var s=n.x>>r,u=n.y>>r;if(!(s<1||u<1))for(var h=n.x+n.w+o>>r,c=n.y+n.h+o>>r,t=s;t<=h;t++)for(var p=u;p<=c;p++)f.setWalkableAt(t,p,!1)}});var c=t.getSource().getParent().getBoundingBox();if(1===n||3===n){var p=c.y>>r;if(p>0)for(var l=c.y+c.h,d=a.x>>r,y=p-1;y<<r<=l;y++)f.setWalkableAt(d,y,!0)}else{var g=c.x>>r;if(g>0)for(var v=c.x+c.w,y=a.x>>r,d=g-1;d<<r<=v;d++)f.setWalkableAt(d,y,!0)}if(c=t.getTarget().getParent().getBoundingBox(),1===i||3===i){var p=c.y>>r;if(p>0)for(var l=c.y+c.h,d=e.x>>r,y=p-1;y<<r<=l;y++)f.setWalkableAt(d,y,!0)}else{var g=c.x>>r;if(g>0)for(var v=c.x+c.w,y=e.x>>r,d=g-1;d<<r<=v;d++)f.setWalkableAt(d,y,!0)}return f},getAddjustedPoint:function(t,e,i){switch(e){case 0:return new draw2d.geo.Point(t.x,t.y-i);case 1:return new draw2d.geo.Point(t.x+i,t.y);case 2:return new draw2d.geo.Point(t.x,t.y+i);case 3:return new draw2d.geo.Point(t.x-i,t.y)}},adjustPath:function(t,e,i){var a=this.useShift,n=t.x>>a,r=t.y>>a;$.each(e,function(e,i){return r===i[1]>>a&&void(i[1]=t.y)}),$.each(e,function(e,i){return n===i[0]>>a&&void(i[0]=t.x)})},getSquareDistance:function(t,e){var i=t.x-e.x,a=t.y-e.y;return i*i+a*a},getSquareSegmentDistance:function(t,e,i){var a,n=e.x,r=e.y,o=i.x-n,s=i.y-r;return 0===o&&0===s||(a=((t.x-n)*o+(t.y-r)*s)/(o*o+s*s),a>1?(n=i.x,r=i.y):a>0&&(n+=o*a,r+=s*a)),o=t.x-n,s=t.y-r,o*o+s*s},simplifyRadialDistance:function(t,e){var i,a,n=t.length,r=t[0],o=[r];for(i=1;i<n;i++)a=t[i],this.getSquareDistance(a,r)>e&&(o.push(a),r=a);return r!==a&&o.push(a),o},simplifyDouglasPeucker:function(t,e){var i,a,n,r,o=t.length,s=typeof Uint8Array!=void 0+""?Uint8Array:Array,u=new s(o),f=0,h=o-1,c=[],p=[],l=[];for(u[f]=u[h]=1;h;){for(a=0,i=f+1;i<h;i++)n=this.getSquareSegmentDistance(t[i],t[f],t[h]),n>a&&(r=i,a=n);a>e&&(u[r]=1,c.push(f),p.push(r),c.push(r),p.push(h)),f=c.pop(),h=p.pop()}for(i=0;i<o;i++)u[i]&&l.push(t[i]);return l},simplify:function(t,e,i){var a=void 0!==e?e*e:1;return i||(t=this.simplifyRadialDistance(t,a)),t=this.simplifyDouglasPeucker(t,a)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/connection/SketchConnectionRouter.js' */
(function ($) {draw2d.layout.connection.SketchConnectionRouter=draw2d.layout.connection.MazeConnectionRouter.extend({NAME:"draw2d.layout.connection.SketchConnectionRouter",init:function(){this._super(),this.useSpline=!0,this.useShift=5,this.useSimplifyValue=.2,this.finder=new PF.JumpPointFinder({allowDiagonal:!1,dontCrossCorners:!0})}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/mesh/MeshLayouter.js' */
(function ($) {draw2d.layout.mesh.MeshLayouter=Class.extend({init:function(){},add:function(t,n){return new draw2d.util.ArrayList}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/mesh/ExplodeLayouter.js' */
(function ($) {draw2d.layout.mesh.ExplodeLayouter=draw2d.layout.mesh.MeshLayouter.extend({MIN_MARGIN:40,init:function(){},add:function(t,a){var M=[];M[0]={x:0,y:0},M[1]={x:0,y:0},M[2]={x:0,y:0},M[3]={x:0,y:0},M[4]={x:0,y:0},M[5]={x:0,y:0},M[6]={x:0,y:0},M[7]={x:0,y:0},M[8]={x:0,y:0};var x=a.getBoundingBox(),h=t.getFigures(),e=null,I=0,N=0,i=null,s=0;for(s=0;s<h.getSize();s++)if(e=h.get(s),e!==a&&(I=e.getBoundingBox().getDistance(x),I<this.MIN_MARGIN))switch(N=this.determineOctant(x,e.getBoundingBox())){case 2:M[2].x=Math.max(M[2].x,this.MIN_MARGIN-I),M[3].x=Math.max(M[3].x,this.MIN_MARGIN-I),M[4].x=Math.max(M[4].x,this.MIN_MARGIN-I);break;case 3:M[2].x=Math.max(M[2].x,this.MIN_MARGIN-I),M[3].x=Math.max(M[3].x,this.MIN_MARGIN-I),M[4].x=Math.max(M[4].x,this.MIN_MARGIN-I);break;case 4:M[2].x=Math.max(M[2].x,this.MIN_MARGIN-I),M[3].x=Math.max(M[3].x,this.MIN_MARGIN-I),M[4].x=Math.max(M[4].x,this.MIN_MARGIN-I),M[4].y=Math.max(M[4].y,this.MIN_MARGIN-I),M[5].y=Math.max(M[5].y,this.MIN_MARGIN-I),M[6].y=Math.max(M[6].y,this.MIN_MARGIN-I);break;case 5:M[4].y=Math.max(M[4].y,this.MIN_MARGIN-I),M[5].y=Math.max(M[5].y,this.MIN_MARGIN-I),M[6].y=Math.max(M[6].y,this.MIN_MARGIN-I);break;case 6:M[4].y=Math.max(M[4].y,this.MIN_MARGIN-I),M[5].y=Math.max(M[5].y,this.MIN_MARGIN-I),M[6].y=Math.max(M[6].y,this.MIN_MARGIN-I);break;case 8:I=0|x.getBottomRight().getDistance(e.getBoundingBox().getTopLeft()),M[2].x=Math.max(M[2].x,this.MIN_MARGIN+I),M[3].x=Math.max(M[3].x,this.MIN_MARGIN+I),M[4].x=Math.max(M[4].x,this.MIN_MARGIN+I),M[4].y=Math.max(M[4].y,this.MIN_MARGIN+I),M[5].y=Math.max(M[5].y,this.MIN_MARGIN+I),M[6].y=Math.max(M[6].y,this.MIN_MARGIN+I),M[8].x=Math.max(M[8].x,this.MIN_MARGIN+I)}var y=new draw2d.util.ArrayList;for(s=0;s<h.getSize();s++)e=h.get(s),e!==a&&(N=this.determineOctant(x,e.getBoundingBox()),i=M[N],0===i.x&&0===i.y||y.add(new draw2d.layout.mesh.ProposedMeshChange(e,i.x,i.y)));return y},determineOctant:function(t,a){var M=t.x,x=t.y,h=t.w,e=t.h,I=a.x,N=a.y,i=a.w,s=a.h,y=0;return y=I+i<=M?N+s<=x?0:N>=x+e?6:7:I>=M+h?N+s<=x?2:N>=x+e?4:3:N+s<=x?1:N>=x+e?5:8}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/mesh/ProposedMeshChange.js' */
(function ($) {draw2d.layout.mesh.ProposedMeshChange=Class.extend({init:function(t,e,i){this.figure=t,this.x=e,this.y=i},getFigure:function(){return this.figure},getX:function(){return this.x},getY:function(){return this.y}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/locator/Locator.js' */
(function ($) {draw2d.layout.locator.Locator=Class.extend({NAME:"draw2d.layout.locator.Locator",init:function(t){this.parent=t},getParent:function(){return this.parent},setParent:function(t){this.parent=t},relocate:function(t,n){}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/locator/PortLocator.js' */
(function ($) {draw2d.layout.locator.PortLocator=draw2d.layout.locator.Locator.extend({NAME:"draw2d.layout.locator.PortLocator",init:function(){this._super()},applyConsiderRotation:function(t,o,a){var e=t.getParent(),r=e.getWidth()/2,i=e.getHeight()/2,n=e.getRotationAngle(),d=Raphael.matrix();if(d.rotate(n,r,i),90===n||270===n){var l=e.getHeight()/e.getWidth();d.scale(l,1/l,r,i)}t.setPosition(d.x(o,a),d.y(o,a))}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/locator/InputPortLocator.js' */
(function ($) {draw2d.layout.locator.InputPortLocator=draw2d.layout.locator.PortLocator.extend({NAME:"draw2d.layout.locator.InputPortLocator",init:function(){this._super()},relocate:function(t,o){var r=o.getParent(),a=r.getHeight(),e=a/(r.getInputPorts().getSize()+1);this.applyConsiderRotation(o,0,e*(t+1))}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/locator/OutputPortLocator.js' */
(function ($) {draw2d.layout.locator.OutputPortLocator=draw2d.layout.locator.PortLocator.extend({NAME:"draw2d.layout.locator.OutputPortLocator",init:function(){this._super()},relocate:function(t,o){var r=o.getParent(),a=r.getHeight()/(r.getOutputPorts().getSize()+1);this.applyConsiderRotation(o,r.getWidth(),a*(t+1))}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/locator/ConnectionLocator.js' */
(function ($) {draw2d.layout.locator.ConnectionLocator=draw2d.layout.locator.Locator.extend({NAME:"draw2d.layout.locator.ConnectionLocator",init:function(o){this._super(o)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/locator/ManhattanMidpointLocator.js' */
(function ($) {draw2d.layout.locator.ManhattanMidpointLocator=draw2d.layout.locator.ConnectionLocator.extend({NAME:"draw2d.layout.locator.ManhattanMidpointLocator",init:function(t){this._super(t)},relocate:function(t,o){var a=this.getParent(),i=a.getPoints(),e=Math.floor((i.getSize()-2)/2);if(!(i.getSize()<=e+1)){var n=i.get(e),r=i.get(e+1);if(n&&r){var c=(r.x-n.x)/2+n.x-o.getWidth()/2|0,d=(r.y-n.y)/2+n.y-o.getHeight()/2|0;o.setPosition(c,d)}}}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/locator/PolylineMidpointLocator.js' */
(function ($) {draw2d.layout.locator.PolylineMidpointLocator=draw2d.layout.locator.ManhattanMidpointLocator.extend({NAME:"draw2d.layout.locator.PolylineMidpointLocator",init:function(t){this._super(t)},relocate:function(t,o){var i=this.getParent(),e=i.getPoints();if(e.getSize()%2===0)this._super(t,o);else{var t=Math.floor(e.getSize()/2),a=e.get(t);o.setPosition(a.x-o.getWidth()/2,a.y-o.getHeight()/2)}}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/locator/TopLocator.js' */
(function ($) {draw2d.layout.locator.TopLocator=draw2d.layout.locator.Locator.extend({NAME:"draw2d.layout.locator.TopLocator",init:function(o){this._super(o)},relocate:function(o,t){var a=this.getParent(),n=a.getBoundingBox(),r=t.getBoundingBox();t instanceof draw2d.Port?t.setPosition(n.w/2,2):t.setPosition(n.w/2-r.w/2,-(r.h+2))}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/locator/BottomLocator.js' */
(function ($) {draw2d.layout.locator.BottomLocator=draw2d.layout.locator.Locator.extend({NAME:"draw2d.layout.locator.BottomLocator",init:function(o){this._super(o)},relocate:function(o,t){var a=this.getParent(),n=a.getBoundingBox(),r=t.getBoundingBox();t instanceof draw2d.Port?t.setPosition(n.w/2,n.h-2):t.setPosition(n.w/2-r.w/2,2+n.h)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/locator/LeftLocator.js' */
(function ($) {draw2d.layout.locator.LeftLocator=draw2d.layout.locator.Locator.extend({NAME:"draw2d.layout.locator.LeftLocator",init:function(o){this._super(o)},relocate:function(o,t){var a=this.getParent(),n=a.getBoundingBox(),r=t.getBoundingBox();t instanceof draw2d.Port?t.setPosition(2,n.h/2):t.setPosition(-r.w-5,n.h/2-r.h/2)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/locator/RightLocator.js' */
(function ($) {draw2d.layout.locator.RightLocator=draw2d.layout.locator.Locator.extend({NAME:"draw2d.layout.locator.RightLocator",init:function(o){this._super(o)},relocate:function(o,t){var a=this.getParent(),i=a.getBoundingBox(),n=t.getBoundingBox();t instanceof draw2d.Port?t.setPosition(i.w-2,i.h/2):t.setPosition(i.w+5,i.h/2-n.h/2)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/locator/CenterLocator.js' */
(function ($) {draw2d.layout.locator.CenterLocator=draw2d.layout.locator.Locator.extend({NAME:"draw2d.layout.locator.CenterLocator",init:function(o){this._super(o)},relocate:function(o,t){var a=this.getParent(),e=a.getBoundingBox();if(t instanceof draw2d.Port)t.setPosition(e.w/2,e.h/2);else{var r=t.getBoundingBox();t.setPosition(e.w/2-r.w/2,e.h/2-r.h/2)}}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/EditPolicy.js' */
(function ($) {draw2d.policy.EditPolicy=Class.extend({NAME:"draw2d.policy.EditPolicy",init:function(){},onInstall:function(n){},onUninstall:function(n){}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/canvas/CanvasPolicy.js' */
(function ($) {draw2d.policy.canvas.CanvasPolicy=draw2d.policy.EditPolicy.extend({NAME:"draw2d.policy.canvas.CanvasPolicy",init:function(){this._super()},onInstall:function(n){},onUninstall:function(n){},onClick:function(n,o){},onMouseMove:function(n,o,i){},snap:function(n,o,i){return i},onMouseDown:function(n,o,i){},onMouseDrag:function(n,o,i,c,t){},onMouseUp:function(n,o,i){}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/canvas/SelectionPolicy.js' */
(function ($) {draw2d.policy.canvas.SelectionPolicy=draw2d.policy.canvas.CanvasPolicy.extend({NAME:"draw2d.policy.canvas.SelectionPolicy",init:function(){this._super()},unselect:function(c,e){e.unselect(),c.getSelection().remove(e)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/canvas/SingleSelectionPolicy.js' */
(function ($) {draw2d.policy.canvas.SingleSelectionPolicy=draw2d.policy.canvas.SelectionPolicy.extend({NAME:"draw2d.policy.canvas.SingleSelectionPolicy",init:function(){this._super(),this.mouseMovedDuringMouseDown=!1,this.mouseDraggingElement=null,this.mouseDownElement=null},select:function(e,n,t){var o=e.getSelection().getPrimary(),i=e.getSelection().getAll().contains(n);i&&n.allowSelectionIfAlreadySelected===!1||(o!==n&&(e.getSelection().setPrimary(n),null!==o&&this.unselect(e,o)),null!==n&&n.select(!0,t),e.selectionListeners.each(function(e,t){t.onSelectionChanged(n,o)}))},onMouseDown:function(e,n,t){this.mouseMovedDuringMouseDown=!1;for(var o=!0,i=e.getBestFigure(n,t),r=[i];null!==i&&null!==i.getParent()&&!(i instanceof draw2d.Port);)i=i.getParent(),r.push(i);null!==i&&i.isDraggable()&&(o=i.onDragStart(n-i.getAbsoluteX(),t-i.getAbsoluteY()),o===!1?(this.mouseDraggingElement=null,this.mouseDownElement=i):(this.mouseDraggingElement=i,this.mouseDownElement=i)),null===i||i.isSelectable()!==!0||i===e.getSelection().getPrimary()&&i.allowSelectionIfAlreadySelected!==!0||(this.select(e,i,r),i instanceof draw2d.shape.basic.Line?i instanceof draw2d.Connection||(e.draggingLineCommand=i.createCommand(new draw2d.command.CommandType(draw2d.command.CommandType.MOVE)),null!==e.draggingLineCommand&&(e.draggingLine=i)):o===!1&&i.unselect())},onMouseDrag:function(e,n,t,o,i){if(this.mouseMovedDuringMouseDown=!0,null!==this.mouseDraggingElement){if(e.linesToRepaintAfterDragDrop.isEmpty()===!0&&this.mouseDraggingElement instanceof draw2d.shape.node.Node){var r=this.mouseDraggingElement.getConnections(),l=e.lineIntersections.clone();e.lineIntersections.each($.proxy(function(n,t){(r.contains(t.line)||r.contains(t.other))&&(l.remove(t),e.linesToRepaintAfterDragDrop.add(t.line),e.linesToRepaintAfterDragDrop.add(t.other))},this)),e.lineIntersections=l,e.linesToRepaintAfterDragDrop.each($.proxy(function(e,n){this.repaintLineAfterDragDrop(n)},this))}var a=e.getSelection().getAll();a.contains(this.mouseDraggingElement)?a.each(function(e,o){o.onDrag(n,t)}):this.mouseDraggingElement.onDrag(n,t);var s=e.fromDocumentToCanvasCoordinate(e.mouseDownX,e.mouseDownY).translate(n,t),g=e.getBestFigure(s.x,s.y,this.mouseDraggingElement);g!==e.currentDropTarget&&(null!==e.currentDropTarget&&(e.currentDropTarget.onDragLeave(this.mouseDraggingElement),e.currentDropTarget=null),null!==g&&(e.currentDropTarget=g.onDragEnter(this.mouseDraggingElement)))}else null===this.mouseDownElement||this.mouseDownElement instanceof draw2d.Connection||this.mouseDownElement.onPanning(n,t)},repaintLineAfterDragDrop:function(e){e.svgPathString=null,e.repaint()},onMouseUp:function(e,n,t){if(null!==this.mouseDraggingElement){var o=e.getSelection().getAll();o.contains(this.mouseDraggingElement)?(e.getCommandStack().startTransaction(),e.getSelection().getAll().each(function(e,n){n.onDragEnd()}),e.getCommandStack().commitTransaction()):this.mouseDraggingElement.onDragEnd(),null!==e.currentDropTarget&&(this.mouseDraggingElement.onDrop(e.currentDropTarget),e.currentDropTarget.onDragLeave(this.mouseDraggingElement),e.currentDropTarget=null),this.mouseDraggingElement=null}null!==this.mouseDownElement&&this.mouseDownElement.isSelectable()!==!1||this.mouseMovedDuringMouseDown!==!1||this.select(e,null),this.mouseDownElement=null,this.mouseMovedDuringMouseDown=!1}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/canvas/PanningSelectionPolicy.js' */
(function ($) {draw2d.policy.canvas.PanningSelectionPolicy=draw2d.policy.canvas.SingleSelectionPolicy.extend({NAME:"draw2d.policy.canvas.PanningSelectionPolicy",init:function(){this._super()},onMouseDrag:function(l,n,o,e,i){if(this._super(l,n,o,e,i),null===this.mouseDraggingElement&&null===this.mouseDownElement){var c=l.getScrollArea();c.scrollTop(c.scrollTop()+i),c.scrollLeft(c.scrollLeft()+e)}}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/canvas/BoundingBoxSelectionPolicy.js' */
(function ($) {draw2d.policy.canvas.BoundingboxSelectionPolicy=draw2d.policy.canvas.SingleSelectionPolicy.extend({NAME:"draw2d.policy.canvas.BoundingboxSelectionPolicy",init:function(){this._super(),this.boundingBoxFigure1=null,this.boundingBoxFigure2=null,this.x=0,this.y=0},select:function(i,n){i.getSelection().getAll().contains(n)||(null!==n&&n.select(!0),i.getSelection().setPrimary(n),i.selectionListeners.each(function(i,e){e.onSelectionChanged(n)}))},onMouseDown:function(i,n,e){this.x=n,this.y=e;var t=i.getSelection().getAll();this._super(i,n,e),null===this.mouseDownElement||this.mouseDownElement.isResizeHandle!==!1||t.contains(this.mouseDownElement)||t.each($.proxy(function(n,e){this.unselect(i,e)},this)),t=i.getSelection().getAll(),t.each($.proxy(function(n,e){var t=e.onDragStart(e.getAbsoluteX(),e.getAbsoluteY());e instanceof draw2d.shape.basic.Line||t===!1&&this.unselect(i,e)},this))},onMouseDrag:function(i,n,e,t,o){this._super(i,n,e,t,o),null===this.mouseDraggingElement&&null===this.mouseDownElement&&null===this.boundingBoxFigure1&&(this.boundingBoxFigure1=new draw2d.shape.basic.Rectangle(1,1),this.boundingBoxFigure1.setPosition(this.x,this.y),this.boundingBoxFigure1.setCanvas(i),this.boundingBoxFigure1.setBackgroundColor("#0f0f0f"),this.boundingBoxFigure1.setAlpha(.1),this.boundingBoxFigure2=new draw2d.shape.basic.Rectangle(1,1),this.boundingBoxFigure2.setPosition(this.x,this.y),this.boundingBoxFigure2.setCanvas(i),this.boundingBoxFigure2.setDashArray("- "),this.boundingBoxFigure2.setStroke(1),this.boundingBoxFigure2.setColor(new draw2d.util.Color(84,151,220)),this.boundingBoxFigure2.setBackgroundColor(null)),null!==this.boundingBoxFigure1&&(this.boundingBoxFigure1.setDimension(Math.abs(n),Math.abs(e)),this.boundingBoxFigure1.setPosition(this.x+Math.min(0,n),this.y+Math.min(0,e)),this.boundingBoxFigure2.setDimension(Math.abs(n),Math.abs(e)),this.boundingBoxFigure2.setPosition(this.x+Math.min(0,n),this.y+Math.min(0,e)))},onMouseUp:function(i,n,e){if(null===this.mouseDownElement)i.getSelection().getAll().each($.proxy(function(n,e){this.unselect(i,e)},this));else if(null!==this.mouseDownElement&&this.mouseMovedDuringMouseDown===!1){var t=i.getSelection().getAll();t.contains(this.mouseDownElement)||i.getSelection().getAll().each($.proxy(function(n,e){this.unselect(i,e)},this))}if(this._super(i,n,e),null!==this.boundingBoxFigure1){var o=this.boundingBoxFigure1.getBoundingBox();i.getFigures().each($.proxy(function(n,e){if(e.getBoundingBox().isInside(o)){var t=e.onDragStart(e.getAbsoluteX(),e.getAbsoluteY());t===!0&&this.select(i,e,!1)}},this));var s=i.getSelection();i.getLines().each($.proxy(function(n,e){e instanceof draw2d.Connection&&s.contains(e.getSource().getParent())&&s.contains(e.getTarget().getParent())&&this.select(i,e,!1)},this)),this.boundingBoxFigure1.setCanvas(null),this.boundingBoxFigure1=null,this.boundingBoxFigure2.setCanvas(null),this.boundingBoxFigure2=null}}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/canvas/ReadOnlySelectionPolicy.js' */
(function ($) {draw2d.policy.canvas.ReadOnlySelectionPolicy=draw2d.policy.canvas.SelectionPolicy.extend({NAME:"draw2d.policy.canvas.ReadOnlySelectionPolicy",init:function(){this._super()},onInstall:function(l){l.getAllPorts().each($.proxy(function(l,o){o.setVisible(!1)},this))},onUninstall:function(l){l.getAllPorts().each($.proxy(function(l,o){o.setVisible(!0)},this))},onMouseDrag:function(l,o,n,c,i){var t=l.getScrollArea();t.scrollTop(t.scrollTop()+i),t.scrollLeft(t.scrollLeft()+c)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/canvas/DecorationPolicy.js' */
(function ($) {draw2d.policy.canvas.DecorationPolicy=draw2d.policy.canvas.CanvasPolicy.extend({NAME:"draw2d.policy.canvas.DecorationPolicy",init:function(){this._super()}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/canvas/FadeoutDecorationPolicy.js' */
(function ($) {draw2d.policy.canvas.FadeoutDecorationPolicy=draw2d.policy.canvas.DecorationPolicy.extend({NAME:"draw2d.policy.canvas.FadeoutDecorationPolicy",DEFAULT_FADEOUT_DURATION:30,TARGET_COLOR:new draw2d.util.Color("#707070"),init:function(){this._super(),this.alpha=1,this.hidePortsCounter=this.DEFAULT_FADEOUT_DURATION,this.canvas=null},onInstall:function(t){this.canvas=t,this.timerId=window.setInterval($.proxy(this.onTimer,this),100),this.hidePortsCounter=1,this.alpha=.1},onUninstall:function(t){window.clearInterval(this.timerId),this.canvas.getAllPorts().each($.proxy(function(t,i){i.setAlpha(1)},this))},onTimer:function(){this.hidePortsCounter--,this.hidePortsCounter<=0&&this.alpha>0?(this.alpha=Math.max(0,this.alpha-.05),this.canvas.getAllPorts().each($.proxy(function(t,i){i.setAlpha(this.alpha)},this)),this.canvas.getSelection().getAll().each($.proxy(function(t,i){i.selectionHandles.each($.proxy(function(t,i){i.setAlpha(this.alpha)},this))},this))):this.hidePortsCounter>0&&1!==this.alpha&&(this.alpha=1,this.duringHide=!1,this.canvas.getAllPorts().each($.proxy(function(t,i){i.setAlpha(this.alpha)},this)),this.canvas.getSelection().getAll().each($.proxy(function(t,i){i.selectionHandles.each($.proxy(function(t,i){i.setAlpha(this.alpha)},this))},this)))},onMouseDown:function(t,i,s){this.hidePortsCounter=this.DEFAULT_FADEOUT_DURATION},onMouseMove:function(t,i,s){this.hidePortsCounter=this.DEFAULT_FADEOUT_DURATION},onMouseDrag:function(t,i,s,o,n){this.hidePortsCounter=this.DEFAULT_FADEOUT_DURATION},onMouseUp:function(t,i,s){this.hidePortsCounter=this.DEFAULT_FADEOUT_DURATION}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/canvas/CoronaDecorationPolicy.js' */
(function ($) {draw2d.policy.canvas.CoronaDecorationPolicy=draw2d.policy.canvas.DecorationPolicy.extend({NAME:"draw2d.policy.canvas.CoronaDecorationPolicy",init:function(){this._super(),this.startDragX=0,this.startDragY=0},onInstall:function(t){var i=t.getFigures();i.each(function(t,i){i.getPorts().each(function(t,i){i.setVisible(!1)})})},onUninstall:function(t){var i=t.getFigures();i.each(function(t,i){i.getPorts().each(function(t,i){i.setVisible(!0)})})},onMouseDown:function(t,i,n){this.startDragX=i,this.startDragY=n},onMouseMove:function(t,i,n){this.updatePorts(t,i,n)},onMouseDrag:function(t,i,n,o,s){this.updatePorts(t,this.startDragX+i,this.startDragY+n)},updatePorts:function(t,i,n){var o=t.getFigures();o.each(function(t,o){o.isVisible()===!0&&o.hitTest(i,n,50)===!0&&o instanceof draw2d.shape.node.Node?o.getPorts().each(function(t,i){i.setVisible(!0)}):o.getPorts().each(function(t,i){i.setVisible(!1)})})}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/canvas/SnapToEditPolicy.js' */
(function ($) {draw2d.policy.canvas.SnapToEditPolicy=draw2d.policy.canvas.CanvasPolicy.extend({NAME:"draw2d.policy.canvas.SnapToEditPolicy",init:function(i){this._super(),this.grid=i},snap:function(i,a,n){return n}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/canvas/SnapToGridEditPolicy.js' */
(function ($) {draw2d.policy.canvas.SnapToGridEditPolicy=draw2d.policy.canvas.SnapToEditPolicy.extend({NAME:"draw2d.policy.canvas.SnapToGridEditPolicy",GRID_COLOR:"#e0e0f0",GRID_WIDTH:10,init:function(i){this._super(),this.canvas=null,this.lines=null,i?this.grid=i:this.grid=this.GRID_WIDTH},onInstall:function(i){this.canvas=i,this.showGrid()},onUninstall:function(i){this.canvas=null,this.lines.remove()},snap:function(i,s,t){var a=s.getSnapToGridAnchor();return t.x=t.x+a.x,t.y=t.y+a.y,t.x=this.grid*Math.floor((t.x+this.grid/2)/this.grid),t.y=this.grid*Math.floor((t.y+this.grid/2)/this.grid),t.x=t.x-a.x,t.y=t.y-a.y,t},showGrid:function(){var i=this.canvas.initialWidth,s=this.canvas.initialHeight;this.lines=this.canvas.paper.set();for(var t=this.grid;t<i;t+=this.grid)this.lines.push(this.canvas.paper.path("M "+t+" 0 l 0 "+s));for(var a=this.grid;a<s;a+=this.grid)this.lines.push(this.canvas.paper.path("M 0 "+a+" l "+i+" 0"));this.lines.attr({stroke:this.GRID_COLOR}),this.lines.toBack()}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/canvas/ShowGridEditPolicy.js' */
(function ($) {draw2d.policy.canvas.ShowGridEditPolicy=draw2d.policy.canvas.SnapToEditPolicy.extend({NAME:"draw2d.policy.canvas.ShowGridEditPolicy",GRID_COLOR:"#e0e0f0",GRID_WIDTH:10,init:function(i){this._super(),this.canvas=null,this.lines=null,i?this.grid=i:this.grid=this.GRID_WIDTH},onInstall:function(i){this.canvas=i,this.showGrid()},onUninstall:function(i){this.canvas=null,this.lines.remove()},snap:function(i,s,t){return t},showGrid:function(){var i=this.canvas.initialWidth,s=this.canvas.initialHeight;this.lines=this.canvas.paper.set();for(var t=this.grid;t<i;t+=this.grid)this.lines.push(this.canvas.paper.path("M "+t+" 0 l 0 "+s));for(var n=this.grid;n<s;n+=this.grid)this.lines.push(this.canvas.paper.path("M 0 "+n+" l "+i+" 0"));this.lines.attr({stroke:this.GRID_COLOR}),this.lines.toBack()}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/canvas/SnapToGeometryEditPolicy.js' */
(function ($) {draw2d.SnapToHelper={},draw2d.SnapToHelper.NORTH=1,draw2d.SnapToHelper.SOUTH=4,draw2d.SnapToHelper.WEST=8,draw2d.SnapToHelper.EAST=16,draw2d.SnapToHelper.CENTER=32,draw2d.SnapToHelper.NORTH_EAST=draw2d.SnapToHelper.NORTH|draw2d.SnapToHelper.EAST,draw2d.SnapToHelper.NORTH_WEST=draw2d.SnapToHelper.NORTH|draw2d.SnapToHelper.WEST,draw2d.SnapToHelper.SOUTH_EAST=draw2d.SnapToHelper.SOUTH|draw2d.SnapToHelper.EAST,draw2d.SnapToHelper.SOUTH_WEST=draw2d.SnapToHelper.SOUTH|draw2d.SnapToHelper.WEST,draw2d.SnapToHelper.NORTH_SOUTH=draw2d.SnapToHelper.NORTH|draw2d.SnapToHelper.SOUTH,draw2d.SnapToHelper.EAST_WEST=draw2d.SnapToHelper.EAST|draw2d.SnapToHelper.WEST,draw2d.SnapToHelper.NSEW=draw2d.SnapToHelper.NORTH_SOUTH|draw2d.SnapToHelper.EAST_WEST,draw2d.policy.canvas.SnapToGeometryEditPolicy=draw2d.policy.canvas.SnapToEditPolicy.extend({NAME:"draw2d.policy.canvas.SnapToGeometryEditPolicy",SNAP_THRESHOLD:3,LINE_COLOR:"#1387E6",FADEOUT_DURATION:300,init:function(){this._super(),this.rows=null,this.cols=null,this.vline=null,this.hline=null,this.canvas=null},onInstall:function(e){this.canvas=e},onUninstall:function(e){this.canvas=null},onMouseUp:function(e,t,a){this.rows=null,this.cols=null,this.hideVerticalLine(),this.hideHorizontalLine()},snap:function(e,t,a){if(t instanceof draw2d.ResizeHandle){var n=t.getSnapToGridAnchor();a.x+=n.x,a.y+=n.y;var i=new draw2d.geo.Point(a.x,a.y),o=t.getSnapToDirection(),r=this.snapPoint(o,a,i);return o&draw2d.SnapToHelper.EAST_WEST&&!(r&draw2d.SnapToHelper.EAST_WEST)?this.showVerticalLine(i.x):this.hideVerticalLine(),o&draw2d.SnapToHelper.NORTH_SOUTH&&!(r&draw2d.SnapToHelper.NORTH_SOUTH)?this.showHorizontalLine(i.y):this.hideHorizontalLine(),i.x-=n.x,i.y-=n.y,i}var l=new draw2d.geo.Rectangle(a.x,a.y,t.getWidth(),t.getHeight()),i=new draw2d.geo.Rectangle(a.x,a.y,t.getWidth(),t.getHeight()),o=draw2d.SnapToHelper.NSEW,r=this.snapRectangle(l,i);return o&draw2d.SnapToHelper.WEST&&!(r&draw2d.SnapToHelper.WEST)?this.showVerticalLine(i.x):o&draw2d.SnapToHelper.EAST&&!(r&draw2d.SnapToHelper.EAST)?this.showVerticalLine(i.getX()+i.getWidth()):this.hideVerticalLine(),o&draw2d.SnapToHelper.NORTH&&!(r&draw2d.SnapToHelper.NORTH)?this.showHorizontalLine(i.y):o&draw2d.SnapToHelper.SOUTH&&!(r&draw2d.SnapToHelper.SOUTH)?this.showHorizontalLine(i.getY()+i.getHeight()):this.hideHorizontalLine(),i.getTopLeft()},snapRectangle:function(e,t){var a=e.getTopLeft(),n=e.getBottomRight(),i=this.snapPoint(draw2d.SnapToHelper.NORTH_WEST,e.getTopLeft(),a);t.x=a.x,t.y=a.y;var o=this.snapPoint(draw2d.SnapToHelper.SOUTH_EAST,e.getBottomRight(),n);return i&draw2d.SnapToHelper.WEST&&(t.x=n.x-e.getWidth()),i&draw2d.SnapToHelper.NORTH&&(t.y=n.y-e.getHeight()),i|o},snapPoint:function(e,t,a){if(null!==this.rows&&null!==this.cols||this.populateRowsAndCols(),0!==(e&draw2d.SnapToHelper.EAST)){var n=this.getCorrectionFor(this.cols,t.getX()-1,1);n!==this.SNAP_THRESHOLD&&(e&=~draw2d.SnapToHelper.EAST,a.x+=n)}if(0!==(e&draw2d.SnapToHelper.WEST)){var i=this.getCorrectionFor(this.cols,t.getX(),-1);i!==this.SNAP_THRESHOLD&&(e&=~draw2d.SnapToHelper.WEST,a.x+=i)}if(0!==(e&draw2d.SnapToHelper.SOUTH)){var o=this.getCorrectionFor(this.rows,t.getY()-1,1);o!==this.SNAP_THRESHOLD&&(e&=~draw2d.SnapToHelper.SOUTH,a.y+=o)}if(0!==(e&draw2d.SnapToHelper.NORTH)){var r=this.getCorrectionFor(this.rows,t.getY(),-1);r!==this.SNAP_THRESHOLD&&(e&=~draw2d.SnapToHelper.NORTH,a.y+=r)}return e},populateRowsAndCols:function(){var e=this.canvas.getSelection();this.rows=[],this.cols=[];for(var t=this.canvas.getFigures(),a=0,n=0;n<t.getSize();n++){var i=t.get(n);if(!e.contains(i)){var o=i.getBoundingBox();this.cols[3*a]={type:-1,location:o.getX()},this.rows[3*a]={type:-1,location:o.getY()},this.cols[3*a+1]={type:0,location:o.x+(o.getWidth()-1)/2},this.rows[3*a+1]={type:0,location:o.y+(o.getHeight()-1)/2},this.cols[3*a+2]={type:1,location:o.getRight()-1},this.rows[3*a+2]={type:1,location:o.getBottom()-1},a++}}},getCorrectionFor:function(e,t,a){for(var n=this.SNAP_THRESHOLD,i=this.SNAP_THRESHOLD,o=0;o<e.length;o++){var r,l=e[o];l.type===-1&&0!==a?(r=Math.abs(t-l.location),r<n&&(n=r,i=l.location-t)):0===l.type&&0===a?(r=Math.abs(t-l.location),r<n&&(n=r,i=l.location-t)):1===l.type&&0!==a&&(r=Math.abs(t-l.location),r<n&&(n=r,i=l.location-t))}return i},showVerticalLine:function(e){null==this.vline&&(this.vline=this.canvas.paper.path("M "+e+" 0 l 0 "+this.canvas.getHeight()).attr({stroke:this.LINE_COLOR,"stroke-width":1}))},hideVerticalLine:function(e){if(null!=this.vline){var t=this.vline;t.animate({opacity:.1},this.FADEOUT_DURATION,function(){t.remove()}),this.vline=null}},showHorizontalLine:function(e){null==this.hline&&(this.hline=this.canvas.paper.path("M 0 "+e+" l "+this.canvas.getWidth()+" 0").attr({stroke:this.LINE_COLOR,"stroke-width":1}))},hideHorizontalLine:function(){if(null!=this.hline){var e=this.hline;e.animate({opacity:.1},this.FADEOUT_DURATION,function(){e.remove()}),this.hline=null}}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/figure/DragDropEditPolicy.js' */
(function ($) {draw2d.policy.figure.DragDropEditPolicy=draw2d.policy.EditPolicy.extend({NAME:"draw2d.policy.figure.DragDropEditPolicy",init:function(){this._super()},onDragStart:function(n,o){o.shape.attr({cursor:"move"})},onDrag:function(n,o){},onDragEnd:function(n,o){o.shape.attr({cursor:"default"})},adjustPosition:function(n,o,t){return o instanceof draw2d.geo.Point?o:new draw2d.geo.Point(o,t)},adjustDimension:function(n,o,t){return new draw2d.geo.Rectangle(0,0,o,t)},moved:function(n,o){}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/figure/RegionEditPolicy.js' */
(function ($) {draw2d.policy.figure.RegionEditPolicy=draw2d.policy.figure.DragDropEditPolicy.extend({NAME:"draw2d.policy.figure.RegionEditPolicy",init:function(e,t,i,n){if(this._super(),e instanceof draw2d.geo.Rectangle)this.constRect=e;else{if("number"!=typeof n)throw"Invalid parameter. RegionConstraintPolicy need a rectangle as parameter in the constructor";this.constRect=new draw2d.geo.Rectangle(e,t,i,n)}},adjustPosition:function(e,t,i){var n=null;return n=t instanceof draw2d.geo.Point?new draw2d.geo.Rectangle(t.x,t.y,e.getWidth(),e.getHeight()):new draw2d.geo.Rectangle(t,i,e.getWidth(),e.getHeight()),n=this.constRect.moveInside(n),n.getTopLeft()}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/figure/HorizontalEditPolicy.js' */
(function ($) {draw2d.policy.figure.HorizontalEditPolicy=draw2d.policy.figure.DragDropEditPolicy.extend({NAME:"draw2d.policy.figure.HorizontalEditPolicy",init:function(){this._super()},adjustPosition:function(i,o,t){return new draw2d.geo.Point(o,i.getY())}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/figure/VerticalEditPolicy.js' */
(function ($) {draw2d.policy.figure.VerticalEditPolicy=draw2d.policy.figure.DragDropEditPolicy.extend({NAME:"draw2d.policy.figure.VerticalEditPolicy",init:function(){this._super()},adjustPosition:function(i,t,r){return new draw2d.geo.Point(i.getX(),r)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/figure/SelectionFeedbackPolicy.js' */
(function ($) {draw2d.policy.figure.SelectionFeedbackPolicy=draw2d.policy.figure.DragDropEditPolicy.extend({NAME:"draw2d.policy.figure.SelectionFeedbackPolicy",init:function(){this._super()},onSelect:function(e,i,n){},onUnselect:function(e,i){i.selectionHandles.each(function(e,i){i.hide()}),i.selectionHandles=new draw2d.util.ArrayList}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/figure/LineSelectionFeedbackPolicy.js' */
(function ($) {draw2d.policy.figure.LineSelectionFeedbackPolicy=draw2d.policy.figure.SelectionFeedbackPolicy.extend({NAME:"draw2d.policy.figure.LineSelectionFeedbackPolicy",init:function(){this._super()},onSelect:function(e,i,n){i.selectionHandles.isEmpty()&&(i.selectionHandles.add(this.createLineStartResizeHandle(i)),i.selectionHandles.add(this.createLineEndResizeHandle(i)),i.selectionHandles.each(function(n,t){t.setDraggable(i.isResizeable()),t.show(e)})),this.moved(e,i)},createLineStartResizeHandle:function(e){return new draw2d.shape.basic.LineStartResizeHandle(e)},createLineEndResizeHandle:function(e){return new draw2d.shape.basic.LineEndResizeHandle(e)},moved:function(e,i){if(!i.selectionHandles.isEmpty()){var n=i.selectionHandles.get(0),t=i.selectionHandles.get(1),a=n.getWidth()/2,s=n.getHeight()/2,d=i.getStartPoint(),c=i.getEndPoint();n.setPosition(d.x-a,d.y-s),t.setPosition(c.x-a,c.y-s)}}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/figure/RectangleSelectionFeedbackPolicy.js' */
(function ($) {draw2d.policy.figure.RectangleSelectionFeedbackPolicy=draw2d.policy.figure.SelectionFeedbackPolicy.extend({NAME:"draw2d.policy.figure.RectangleSelectionFeedbackPolicy",init:function(){this._super()},onSelect:function(e,s,t){if(s.selectionHandles.isEmpty()){var i=new draw2d.shape.basic.Rectangle;i.setBackgroundColor(null),i.setDashArray("- "),i.setColor("#2096fc"),i.setStroke(.5),i.hide=function(){i.setCanvas(null)},i.show=function(e){i.setCanvas(e),i.shape.toFront()},i.show(e);var n=new draw2d.ResizeHandle(s,1),a=new draw2d.ResizeHandle(s,2),l=new draw2d.ResizeHandle(s,3),o=new draw2d.ResizeHandle(s,4),d=new draw2d.ResizeHandle(s,5),g=new draw2d.ResizeHandle(s,6),r=new draw2d.ResizeHandle(s,7),c=new draw2d.ResizeHandle(s,8);s.selectionHandles.add(n),s.selectionHandles.add(a),s.selectionHandles.add(l),s.selectionHandles.add(o),s.selectionHandles.add(d),s.selectionHandles.add(g),s.selectionHandles.add(r),s.selectionHandles.add(c),n.show(e),l.show(e),d.show(e),r.show(e),n.setDraggable(s.isResizeable()),l.setDraggable(s.isResizeable()),d.setDraggable(s.isResizeable()),r.setDraggable(s.isResizeable()),s.isResizeable()===!0?(n.setBackgroundColor(n.DEFAULT_COLOR),l.setBackgroundColor(l.DEFAULT_COLOR),d.setBackgroundColor(d.DEFAULT_COLOR),r.setBackgroundColor(r.DEFAULT_COLOR)):(n.setBackgroundColor(null),l.setBackgroundColor(null),d.setBackgroundColor(null),r.setBackgroundColor(null)),s.isStrechable()&&s.isResizeable()&&(a.setDraggable(s.isResizeable()),o.setDraggable(s.isResizeable()),g.setDraggable(s.isResizeable()),c.setDraggable(s.isResizeable()),a.show(e),o.show(e),g.show(e),c.show(e)),s.selectionHandles.add(i)}this.moved(e,s)},moved:function(e,s){if(!s.selectionHandles.isEmpty()){var t=s.getHeight(),i=s.getWidth(),n=s.getX(),a=s.getY(),l=s.selectionHandles.get(0),o=s.selectionHandles.get(2),d=s.selectionHandles.get(4),g=s.selectionHandles.get(6);if(l.setPosition(n-l.getWidth(),a-l.getHeight()),o.setPosition(n+i,a-o.getHeight()),d.setPosition(n+i,a+t),g.setPosition(n-g.getWidth(),a+t),s.isStrechable()){var r=s.selectionHandles.get(1),c=s.selectionHandles.get(3),H=s.selectionHandles.get(5),h=s.selectionHandles.get(7);r.setPosition(n+i/2-r.getWidth()/2,a-r.getHeight()),c.setPosition(n+i,a+t/2-c.getHeight()/2),H.setPosition(n+i/2-H.getWidth()/2,a+t),h.setPosition(n-h.getWidth(),a+t/2-h.getHeight()/2)}var w=s.selectionHandles.get(8);w.setPosition(s.getPosition().translate(-2,-2)),w.setDimension(s.getWidth()+4,s.getHeight()+4),w.setRotationAngle(s.getRotationAngle())}}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/figure/BigRectangleSelectionFeedbackPolicy.js' */
(function ($) {draw2d.policy.figure.BigRectangleSelectionFeedbackPolicy=draw2d.policy.figure.RectangleSelectionFeedbackPolicy.extend({NAME:"draw2d.policy.figure.BigRectangleSelectionFeedbackPolicy",init:function(){this._super()},onSelect:function(e,i,c){this._super(e,i,c),i.selectionHandles.isEmpty()||i.selectionHandles.each(function(e,i){i.setDimension(15,15)}),this.moved(e,i)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/figure/RoundRectangleSelectionFeedbackPolicy.js' */
(function ($) {draw2d.policy.figure.RoundRectangleSelectionFeedbackPolicy=draw2d.policy.figure.RectangleSelectionFeedbackPolicy.extend({NAME:"draw2d.policy.figure.RoundRectangleSelectionFeedbackPolicy",init:function(){this._super()},onSelect:function(e,i,n){this._super(e,i,n),i.selectionHandles.isEmpty()||i.selectionHandles.each(function(e,i){i.setDimension(12,12),i.setRadius(4)}),this.moved(e,i)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/figure/BusSelectionFeedbackPolicy.js' */
(function ($) {draw2d.policy.figure.BusSelectionFeedbackPolicy=draw2d.policy.figure.SelectionFeedbackPolicy.extend({NAME:"draw2d.policy.figure.BusSelectionFeedbackPolicy",init:function(){this._super()},onSelect:function(e,i,t){if(i.selectionHandles.isEmpty()){var s=new draw2d.ResizeHandle(i,2),d=new draw2d.ResizeHandle(i,4),n=new draw2d.ResizeHandle(i,6),a=new draw2d.ResizeHandle(i,8);i.selectionHandles.add(s),i.selectionHandles.add(d),i.selectionHandles.add(n),i.selectionHandles.add(a),s.setDraggable(i.isResizeable()),d.setDraggable(i.isResizeable()),n.setDraggable(i.isResizeable()),a.setDraggable(i.isResizeable()),s.show(e),d.show(e),n.show(e),a.show(e)}this.moved(e,i)},moved:function(e,i){if(!i.selectionHandles.isEmpty()){var t=i.selectionHandles.get(0),s=i.selectionHandles.get(1),d=i.selectionHandles.get(2),n=i.selectionHandles.get(3),a=i.getHeight(),l=i.getWidth(),o=i.getX(),g=i.getY();t.setPosition(o+l/2-t.getWidth()/2,g-t.getHeight()),s.setPosition(o+l,g+a/2-s.getHeight()/2),d.setPosition(o+l/2-d.getWidth()/2,g+a),n.setPosition(o-n.getWidth(),g+a/2-n.getHeight()/2)}}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/figure/VBusSelectionFeedbackPolicy.js' */
(function ($) {draw2d.policy.figure.VBusSelectionFeedbackPolicy=draw2d.policy.figure.BusSelectionFeedbackPolicy.extend({NAME:"draw2d.policy.figure.VBusSelectionFeedbackPolicy",init:function(){this._super()},moved:function(e,i){if(!i.selectionHandles.isEmpty()){var t=i.selectionHandles.get(0),n=i.selectionHandles.get(2),s=i.getWidth();t.setDimension(s,t.getHeight()),n.setDimension(s,n.getHeight()),this._super(e,i)}}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/figure/HBusSelectionFeedbackPolicy.js' */
(function ($) {draw2d.policy.figure.HBusSelectionFeedbackPolicy=draw2d.policy.figure.BusSelectionFeedbackPolicy.extend({NAME:"draw2d.policy.figure.HBusSelectionFeedbackPolicy",init:function(){this._super()},moved:function(e,i){if(!i.selectionHandles.isEmpty()){var t=i.selectionHandles.get(1),n=i.selectionHandles.get(3);t.setDimension(t.getWidth(),i.getHeight()),n.setDimension(t.getWidth(),i.getHeight()),this._super(e,i)}}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/figure/AntSelectionFeedbackPolicy.js' */
(function ($) {draw2d.policy.figure.AntSelectionFeedbackPolicy=draw2d.policy.figure.SelectionFeedbackPolicy.extend({NAME:"draw2d.policy.figure.AntSelectionFeedbackPolicy",init:function(){this._super()},onSelect:function(e,t,n){if(t.selectionHandles.isEmpty()){var i=new draw2d.shape.basic.Rectangle;i.setBackgroundColor(null),i.setDashArray("- "),i.setColor("#00bdee"),i.hide=function(){i.setCanvas(null)},i.show=function(e){i.setCanvas(e),i.shape.toFront()},i.show(e),t.selectionHandles.add(i)}this.moved(e,t)},moved:function(e,t){if(!t.selectionHandles.isEmpty()){var n=t.selectionHandles.get(0);n.setPosition(t.getPosition().translate(-2,-2)),n.setDimension(t.getWidth()+4,t.getHeight()+4),n.setRotationAngle(t.getRotationAngle())}}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/figure/GlowSelectionFeedbackPolicy.js' */
(function ($) {draw2d.policy.figure.GlowSelectionFeedbackPolicy=draw2d.policy.figure.SelectionFeedbackPolicy.extend({NAME:"draw2d.policy.figure.GlowSelectionFeedbackPolicy",init:function(){this._super()},onSelect:function(e,i,o){i.setGlow(!0),this.moved(e,i)},onUnselect:function(e,i){this._super(e,i),i.setGlow(!1)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/figure/SlimSelectionFeedbackPolicy.js' */
(function ($) {draw2d.policy.figure.SlimSelectionFeedbackPolicy=draw2d.policy.figure.RectangleSelectionFeedbackPolicy.extend({NAME:"draw2d.policy.figure.SlimSelectionFeedbackPolicy",init:function(){this._super()},onSelect:function(e,i,c){this._super(e,i,c),i.selectionHandles.isEmpty()||i.selectionHandles.each(function(e,i){i.setDimension(6,6),i.setRadius(0)}),this.moved(e,i)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/port/PortFeedbackPolicy.js' */
(function ($) {draw2d.policy.port.PortFeedbackPolicy=draw2d.policy.figure.DragDropEditPolicy.extend({NAME:"draw2d.policy.port.PortFeedbackPolicy",init:function(){this._super()},onHoverEnter:function(o,i,r){},onHoverLeave:function(o,i,r){}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/port/ElasticStrapFeedbackPolicy.js' */
(function ($) {draw2d.policy.port.ElasticStrapFeedbackPolicy=draw2d.policy.port.PortFeedbackPolicy.extend({NAME:"draw2d.policy.port.ElasticStrapFeedbackPolicy",init:function(){this._super(),this.connectionLine=null},onDragStart:function(n,t){this.connectionLine=new draw2d.shape.basic.Line,this.connectionLine.setCanvas(n),this.connectionLine.getShapeElement(),this.onDrag(n,t)},onDrag:function(n,t){var e=t.ox+t.getParent().getAbsoluteX(),o=t.oy+t.getParent().getAbsoluteY();this.connectionLine.setStartPoint(e,o),this.connectionLine.setEndPoint(t.getAbsoluteX(),t.getAbsoluteY())},onDragEnd:function(n,t){this.connectionLine.setCanvas(null),this.connectionLine=null},onHoverEnter:function(n,t,e){this.connectionLine.setGlow(!0),e.setGlow(!0)},onHoverLeave:function(n,t,e){e.setGlow(!1),this.connectionLine.setGlow(!1)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/policy/port/IntrusivePortsFeedbackPolicy.js' */
(function ($) {draw2d.policy.port.IntrusivePortsFeedbackPolicy=draw2d.policy.port.PortFeedbackPolicy.extend({NAME:"draw2d.policy.port.IntrusivePortsFeedbackPolicy",init:function(){this._super(),this.connectionLine=null,this.tweenable=null},onDragStart:function(e,t){var n=0;t.getDropTargets().each(function(e,t){t.__beforeInflate=t.getWidth(),n=t.__beforeInflate});var o=t.getDropTargets();o.grep(function(e){return e.NAME!=t.NAME&&e.parent!==t.parent||e instanceof draw2d.HybridPort||t instanceof draw2d.HybridPort}),this.prepareDropTargetsForDrag(o);var r=this;this.tweenable=new Tweenable,this.tweenable.tween({from:{size:n/2},to:{size:n},duration:200,easing:"easeOutSine",step:function(e){o.each(function(t,n){r.alterDropTargetOnDrag(n,e)})}}),this.connectionLine=new draw2d.shape.basic.Line,this.connectionLine.setCanvas(e),this.connectionLine.getShapeElement(),this.connectionLine.setDashArray("- "),this.connectionLine.setColor(this.getConnectionLineColour()),this.onDrag(e,t)},getConnectionLineColour:function(){return"#30c48a"},prepareDropTargetsForDrag:function(e){},alterDropTargetOnDrag:function(e,t){e.shape.attr({rx:t.size,ry:t.size}),e.width=e.height=2*t.size},onDrag:function(e,t){var n=t.ox+t.getParent().getAbsoluteX(),o=t.oy+t.getParent().getAbsoluteY();this.connectionLine.setStartPoint(n,o),this.connectionLine.setEndPoint(t.getAbsoluteX(),t.getAbsoluteY())},onDragEnd:function(e,t){this.tweenable.stop(!1),this.tweenable=null;var n=this,o=t.getDropTargets();this.prepareDropTargetsForDragEnd(o),o.each(function(e,t){n.alterDropTargetOnDragEnd(t)}),this.connectionLine.setCanvas(null),this.connectionLine=null},prepareDropTargetsForDragEnd:function(e){},alterDropTargetOnDragEnd:function(e){e.shape.attr({rx:e.__beforeInflate/2,ry:e.__beforeInflate/2}),e.width=e.height=e.__beforeInflate},onHoverEnter:function(e,t,n){this.connectionLine.setGlow(!0),n.setGlow(!0)},onHoverLeave:function(e,t,n){n.setGlow(!1),this.connectionLine.setGlow(!1)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/Canvas.js' */
(function ($) {draw2d.Canvas=Class.extend({NAME:"draw2d.Canvas",init:function(t){$.browser.msie&&8===parseInt($.browser.version,10)&&(this.fromDocumentToCanvasCoordinate=this._fromDocumentToCanvasCoordinate_IE8_HACK),this.setScrollArea(document.body),this.canvasId=t,this.html=$("#"+t),this.html.css({cursor:"default"}),this.initialWidth=this.getWidth(),this.initialHeight=this.getHeight(),this.html.css({"-webkit-tap-highlight-color":"rgba(0,0,0,0)"}),this.html.droppable({accept:".draw2d_droppable",over:$.proxy(function(t,e){this.onDragEnter(e.draggable)},this),out:$.proxy(function(t,e){this.onDragLeave(e.draggable)},this),drop:$.proxy(function(t,e){t=this._getEvent(t);var i=this.fromDocumentToCanvasCoordinate(t.clientX,t.clientY);this.onDrop(e.draggable,i.getX(),i.getY())},this)}),$(".draw2d_droppable").draggable({appendTo:"body",stack:"body",zIndex:27e3,helper:"clone",drag:$.proxy(function(t,e){t=this._getEvent(t);var i=this.fromDocumentToCanvasCoordinate(t.clientX,t.clientY);this.onDrag(e.draggable,i.getX(),i.getY())},this),stop:function(t,e){this.isInExternalDragOperation=!1},start:function(t,e){this.isInExternalDragOperation=!0,$(e.helper).addClass("shadow")}}),this.paper=Raphael(t,this.getWidth(),this.getHeight()),this.paper.canvas.style.position="absolute",this.zoomFactor=1,this.selection=new draw2d.Selection,this.currentDropTarget=null,this.isInExternalDragOperation=!1,this.currentHoverFigure=null,this.editPolicy=new draw2d.util.ArrayList,this.figures=new draw2d.util.ArrayList,this.lines=new draw2d.util.ArrayList,this.commonPorts=new draw2d.util.ArrayList,this.dropTargets=new draw2d.util.ArrayList,this.resizeHandles=new draw2d.util.ArrayList,this.selectionListeners=new draw2d.util.ArrayList,this.viewBoxListeners=new draw2d.util.ArrayList,this.commandStack=new draw2d.command.CommandStack,this.linesToRepaintAfterDragDrop=new draw2d.util.ArrayList,this.lineIntersections=new draw2d.util.ArrayList,this.installEditPolicy(new draw2d.policy.canvas.BoundingboxSelectionPolicy),this.commandStack.addEventListener($.proxy(function(t){t.isPostChangeEvent()===!0&&(this.calculateConnectionIntersection(),this.linesToRepaintAfterDragDrop.each(function(t,e){e.svgPathString=null,e.repaint()}),this.linesToRepaintAfterDragDrop=new draw2d.util.ArrayList)},this)),this.mouseDown=!1,this.mouseDownX=0,this.mouseDownY=0,this.mouseDragDiffX=0,this.mouseDragDiffY=0;var e=this.documentCallbacks=[],i=function(t,i){$(document).bind(t,i),e.push({events:t,callback:i})};i("mouseup touchend",$.proxy(function(t){if(this.mouseDown!==!1){t=this._getEvent(t),this.calculateConnectionIntersection(),this.mouseDown=!1;var e=this.fromDocumentToCanvasCoordinate(t.clientX,t.clientY);this.editPolicy.each($.proxy(function(t,i){i.onMouseUp(this,e.x,e.y)},this)),this.mouseDragDiffX=0,this.mouseDragDiffY=0}},this)),this.html.bind("mousemove touchmove",$.proxy(function(t){if(t=this._getEvent(t),this.mouseDown===!1){var e=this.fromDocumentToCanvasCoordinate(t.clientX,t.clientY);try{var i=this.getBestFigure(e.x,e.y);i!==this.currentHoverFigure&&null!==this.currentHoverFigure&&this.currentHoverFigure.onMouseLeave(i),i!==this.currentHoverFigure&&null!==i&&i.onMouseEnter(this.currentHoverFigure),this.currentHoverFigure=i}catch(t){console.log(t)}this.editPolicy.each($.proxy(function(t,i){i.onMouseMove(this,e.x,e.y)},this))}},this)),i("mousemove touchmove",$.proxy(function(t){if(this.mouseDown){var e=this.fromDocumentToCanvasCoordinate(this.mouseDownX,this.mouseDownY),i=this.fromDocumentToCanvasCoordinate(t.clientX,t.clientY),n=i.x-e.x,o=i.y-e.y;this.editPolicy.each($.proxy(function(t,e){e.onMouseDrag(this,n,o,this.mouseDragDiffX-n,this.mouseDragDiffY-o)},this)),this.mouseDragDiffX=n,this.mouseDragDiffY=o}},this)),this.html.bind("mousedown touchstart",$.proxy(function(t){var e=null;switch(t.which){case 1:case 0:t.preventDefault(),t=this._getEvent(t),this.mouseDownX=t.clientX,this.mouseDownY=t.clientY,this.mouseDragDiffX=0,this.mouseDragDiffY=0,e=this.fromDocumentToCanvasCoordinate(t.clientX,t.clientY),this.mouseDown=!0,this.editPolicy.each($.proxy(function(t,i){i.onMouseDown(this,e.x,e.y)},this));break;case 3:t.preventDefault(),t=this._getEvent(t),e=this.fromDocumentToCanvasCoordinate(t.clientX,t.clientY),this.onRightMouseDown(e.x,e.y);break;case 2:}},this)),this.html.bind("dblclick",$.proxy(function(t){t=this._getEvent(t),this.mouseDownX=t.clientX,this.mouseDownY=t.clientY;var e=this.fromDocumentToCanvasCoordinate(t.clientX,t.clientY);this.onDoubleClick(e.x,e.y)},this)),i("click",$.proxy(function(t){if(t=this._getEvent(t),this.mouseDownX===t.clientX||this.mouseDownY===t.clientY){var e=this.fromDocumentToCanvasCoordinate(t.clientX,t.clientY);this.onClick(e.x,e.y)}},this)),i("keydown",$.proxy(function(t){if(!$(t.target).is("input")){var e=t.ctrlKey;this.onKeyDown(t.keyCode,e)}},this))},calculateConnectionIntersection:function(){this.lineIntersections=new draw2d.util.ArrayList;for(var t=this.getLines().clone();t.getSize()>0;){var e=t.removeElementAt(0);t.each($.proxy(function(t,i){var n=e.intersection(i);n.getSize()>0&&(this.lineIntersections.add({line:e,other:i,intersection:n}),this.lineIntersections.add({line:i,other:e,intersection:n}))},this))}},clear:function(){this.lines.clone().each($.proxy(function(t,e){this.removeFigure(e)},this)),this.figures.clone().each($.proxy(function(t,e){this.removeFigure(e)},this)),this.zoomFactor=1,this.selection.clear(),this.currentDropTarget=null,this.isInExternalDragOperation=!1,this.figures=new draw2d.util.ArrayList,this.lines=new draw2d.util.ArrayList,this.commonPorts=new draw2d.util.ArrayList,this.dropTargets=new draw2d.util.ArrayList,this.commandStack.markSaveLocation(),this.linesToRepaintAfterDragDrop=new draw2d.util.ArrayList,this.lineIntersections=new draw2d.util.ArrayList},installEditPolicy:function(t){t instanceof draw2d.policy.canvas.SelectionPolicy?(this.getSelection().getAll().each(function(t,e){e.unselect()}),this.editPolicy.grep($.proxy(function(t){var e=!(t instanceof draw2d.policy.canvas.SelectionPolicy);return e===!1&&t.onUninstall(this),e},this))):t instanceof draw2d.policy.canvas.SnapToEditPolicy&&this.editPolicy.grep($.proxy(function(t){var e=!(t instanceof draw2d.policy.canvas.SnapToEditPolicy);return e===!1&&t.onUninstall(this),e},this)),t.onInstall(this),this.editPolicy.add(t)},uninstallEditPolicy:function(t){t instanceof draw2d.policy.EditPolicy&&this.editPolicy.grep($.proxy(function(e){return e!==t||(e.onUninstall(this),!1)},this))},setViewBox:function(t){this.paper.setViewBox(t.getX(),t.getY(),t.getWidth(),t.getHeight()),this.viewBoxListeners.each(function(t,e){e()})},setZoom:function(t,e){var i=$.proxy(function(t){this.zoomFactor=Math.min(Math.max(.01,t),10);var e=this.initialWidth*this.zoomFactor|0,i=this.initialHeight*this.zoomFactor|0;this.paper.setViewBox(0,0,e,i)},this);if(e){var n=new Tweenable;n.tween({from:{x:this.zoomFactor},to:{x:t},duration:300,easing:"easeOutSine",step:function(t){i(t.x)}})}else i(t)},getZoom:function(){return this.zoomFactor},fromDocumentToCanvasCoordinate:function(t,e){return new draw2d.geo.Point((t-this.getAbsoluteX()+this.getScrollLeft())*this.zoomFactor,(e-this.getAbsoluteY()+this.getScrollTop())*this.zoomFactor)},_fromDocumentToCanvasCoordinate_IE8_HACK:function(t,e){return new draw2d.geo.Point((t-this.getAbsoluteX())*this.zoomFactor,(e-this.getAbsoluteY())*this.zoomFactor)},fromCanvasToDocumentCoordinate:function(t,e){return new draw2d.geo.Point((t+this.getAbsoluteX()-this.getScrollLeft())*this.zoomFactor,(e+this.getAbsoluteY()-this.getScrollTop())*this.zoomFactor)},getHtmlContainer:function(){return this.html},_getEvent:function(t){if("undefined"!=typeof t.originalEvent){if(t.originalEvent.touches&&t.originalEvent.touches.length)return t.originalEvent.touches[0];if(t.originalEvent.changedTouches&&t.originalEvent.changedTouches.length)return t.originalEvent.changedTouches[0]}return t},setScrollArea:function(t){this.scrollArea=$(t)},getScrollArea:function(){return this.scrollArea},getScrollLeft:function(){return this.scrollArea.scrollLeft()},getScrollTop:function(){return this.scrollArea.scrollTop()},getAbsoluteX:function(){return this.html.offset().left},getAbsoluteY:function(){return this.html.offset().top},getWidth:function(){return this.html.width()},getHeight:function(){return this.html.height()},addFigure:function(t,e,i){t.getCanvas()!==this&&(t.setCanvas(this),t.getShapeElement(),t instanceof draw2d.shape.basic.Line?(this.lines.add(t),this.linesToRepaintAfterDragDrop=this.lines):(this.figures.add(t),"undefined"!=typeof i&&t.setPosition(e,i)),t.repaint(),t.fireMoveEvent())},removeFigure:function(t){this.editPolicy.each($.proxy(function(e,i){"function"==typeof i.unselect&&i.unselect(this,t)},this)),t===this.currentHoverFigure&&(this.currentHoverFigure=null),t instanceof draw2d.shape.basic.Line?this.lines.remove(t):this.figures.remove(t),t.setCanvas(null),t instanceof draw2d.Connection&&t.disconnect(),t.onRemove()},getLines:function(){return this.lines},getFigures:function(){return this.figures},getLine:function(t){for(var e=this.lines.getSize(),i=0;i<e;i++){var n=this.lines.get(i);if(n.getId()===t)return n}return null},getFigure:function(t){var e=null;return this.figures.each(function(i,n){if(n.id===t)return e=n,!1}),e},getIntersection:function(t){var e=new draw2d.util.ArrayList;return this.lineIntersections.each($.proxy(function(i,n){n.line===t&&n.intersection.each(function(t,i){e.add({x:i.x,y:i.y,justTouching:i.justTouching,other:n.other})})},this)),e},snapToHelper:function(t,e){return this.editPolicy.each($.proxy(function(i,n){e=n.snap(this,t,e)},this)),e},registerPort:function(t){t.targets=this.dropTargets,this.commonPorts.add(t),this.dropTargets.add(t)},unregisterPort:function(t){t.targets=null,this.commonPorts.remove(t),this.dropTargets.remove(t)},getAllPorts:function(){return this.commonPorts},getCommandStack:function(){return this.commandStack},getCurrentSelection:function(){return this.selection.getPrimary()},getSelection:function(){return this.selection},setCurrentSelection:function(t){this.editPolicy.each($.proxy(function(e,i){"function"==typeof i.select&&i.select(this,t)},this))},addSelectionListener:function(t){if(null!==t)if("function"==typeof t)this.selectionListeners.add({onSelectionChanged:t});else{if("function"!=typeof t.onSelectionChanged)throw"Object doesn't implement required callback method [onSelectionChanged]";this.selectionListeners.add(t)}},removeSelectionListener:function(t){this.selectionListeners=this.selectionListeners.grep(function(e){return e&&e!==t&&e.onSelectionChanged!==t})},addViewBoxListener:function(t){this.viewBoxListeners.add(t)},removeViewBoxListener:function(t){this.viewBoxListeners=this.viewBoxListeners.grep(function(e){return e!==t})},getBestFigure:function(t,e,i){var n=null,o=null,s=0,r=null;for(s=0,len=this.resizeHandles.getSize();s<len;s++)if(o=this.resizeHandles.get(s),o.isVisible()===!0&&o.hitTest(t,e)===!0&&o!==i)return o;for(s=0,len=this.commonPorts.getSize();s<len;s++)if(o=this.commonPorts.get(s),o!==i&&o.isVisible()===!0&&o.hitTest(t,e)===!0)return o;if(n=this.getBestLine(t,e,i),null!==n)return n;for(s=this.figures.getSize()-1;s>=0;s--){var a=this.figures.get(s),c=function(i){i.each(function(i,o){return c(o.getChildren()),null===n&&o.isVisible()===!0&&o.hitTest(t,e)===!0&&(n=o),null===n})};if(c(a.getChildren()),null===n&&a.isVisible()===!0&&a.hitTest(t,e)===!0&&a!==i&&(null===n?n=a:n.getZOrder()<a.getZOrder()&&(n=a)),null!==n)return n}var h=this.lines.getSize();for(s=0;s<h;s++){var l=this.lines.get(s);r=l.getChildren(),r.each(function(i,o){return o.isVisible()!==!0||o.hitTest(t,e)!==!0||(n=o,!1)})}return n},getBestLine:function(t,e,i){for(var n=null,o=this.lines.getSize(),s=0;s<o;s++){var r=this.lines.get(s);if(r.isVisible()===!0&&r.hitTest(t,e)===!0&&r!==i&&null===n){n=r;break}}return n},hideSnapToHelperLines:function(){this.hideSnapToHelperLineHorizontal(),this.hideSnapToHelperLineVertical()},hideSnapToHelperLineHorizontal:function(){},hideSnapToHelperLineVertical:function(){},onDragEnter:function(t){},onDrag:function(t,e,i){},onDragLeave:function(t){},onDrop:function(t,e,i){},onKeyDown:function(t,e){46==t&&null!==this.selection.getPrimary()?this.commandStack.execute(this.selection.getPrimary().createCommand(new draw2d.command.CommandType(draw2d.command.CommandType.DELETE))):90==t&&e?this.commandStack.undo():89==t&&e?this.commandStack.redo():107===t?this.setZoom(.95*this.zoomFactor):109===t&&this.setZoom(1.05*this.zoomFactor)},onDoubleClick:function(t,e){var i=this.getBestFigure(t,e);null!==i&&i.onDoubleClick()},onClick:function(t,e){var i=this.getBestFigure(t,e);null!==i&&i.onClick()},onRightMouseDown:function(t,e){var i=this.getBestFigure(t,e);null!==i&&i.onContextMenu(t,e)},onNewConnection:function(t){},remove:function(){var t=$(document);$.each(this.documentCallbacks,function(){t.unbind(this.events,this.callback)}),this.documentCallbacks=[],this.html.unbind(),this.html.remove()}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/Selection.js' */
(function ($) {draw2d.Selection=Class.extend({NAME:"draw2d.Selection",init:function(){this.primary=null,this.all=new draw2d.util.ArrayList},clear:function(){this.primary=null,this.all=new draw2d.util.ArrayList},getPrimary:function(){return this.primary},setPrimary:function(i){this.primary=i,null===i||this.all.contains(i)||this.all.add(i)},remove:function(i){this.all.remove(i),this.primary===i&&(this.primary=null)},contains:function(i){return this.all.contains(i)},getAll:function(){return this.all.clone()}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/Figure.js' */
(function ($) {draw2d.Figure=Class.extend({NAME:"draw2d.Figure",MIN_TIMER_INTERVAL:50,init:function(t,i){this.id=draw2d.util.UUID.create(),this.isResizeHandle=!1,this.command=null,this.canvas=null,this.shape=null,this.children=new draw2d.util.ArrayList,this.selectable=!0,this.deleteable=!0,this.resizeable=!0,this.draggable=!0,this.visible=!0,this.canSnapToHelper=!0,this.snapToGridAnchor=new draw2d.geo.Point(0,0),this.editPolicy=new draw2d.util.ArrayList,this.timerId=-1,this.timerInterval=0,this.parent=null,this.x=0,this.y=0,this.minHeight=5,this.minWidth=5,this.rotationAngle=0,"undefined"!=typeof i?(this.width=t,this.height=i):(this.width=this.getMinWidth(),this.height=this.getMinHeight()),this.alpha=1,this.isInDragDrop=!1,this.isMoving=!1,this.originalAlpha=this.alpha,this.ox=0,this.oy=0,this.repaintBlocked=!1,this.selectionHandles=new draw2d.util.ArrayList,this.moveListener=new draw2d.util.ArrayList,this.resizeListener=new draw2d.util.ArrayList,this.installEditPolicy(new draw2d.policy.figure.RectangleSelectionFeedbackPolicy)},select:function(t,i){return"undefined"==typeof t&&(t=!0),this.editPolicy.each($.proxy(function(i,e){e instanceof draw2d.policy.figure.SelectionFeedbackPolicy&&e.onSelect(this.canvas,this,t)},this)),this.onSelect&&this.onSelect(i),this},unselect:function(){return this.editPolicy.each($.proxy(function(t,i){i instanceof draw2d.policy.figure.SelectionFeedbackPolicy&&i.onUnselect(this.canvas,this)},this)),this.onDeselect&&this.onDeselect(),this},getId:function(){return this.id},setId:function(t){return this.id=t,this},setCanvas:function(t){null===t&&null!==this.shape&&(this.unselect(),this.shape.remove(),this.shape=null),this.canvas=t,null!==this.canvas&&this.getShapeElement(),null===t?this.stopTimer():this.timerInterval>=this.MIN_TIMER_INTERVAL&&this.startTimer(this.timerInterval),this.children.each(function(i,e){e.figure.setCanvas(t)})},getCanvas:function(){return this.canvas},startTimer:function(t){return this.stopTimer(),this.timerInterval=Math.max(this.MIN_TIMER_INTERVAL,t),null!==this.canvas&&(this.timerId=window.setInterval($.proxy(this.onTimer,this),this.timerInterval)),this},stopTimer:function(){this.timerId>=0&&(window.clearInterval(this.timerId),this.timerId=-1)},onTimer:function(){},installEditPolicy:function(t){t instanceof draw2d.policy.figure.SelectionFeedbackPolicy&&this.editPolicy.grep($.proxy(function(t){var i=!(t instanceof draw2d.policy.figure.SelectionFeedbackPolicy);return i||t.onUninstall(this),i},this)),t.onInstall(this),this.editPolicy.add(t)},addFigure:function(t,i){return t.setDraggable(!1),t.setSelectable(!1),t.setParent(this),this.children.add({figure:t,locator:i}),null!==this.canvas&&t.setCanvas(this.canvas),this.repaint(),this},getChildren:function(){var t=new draw2d.util.ArrayList;return this.children.each(function(i,e){t.add(e.figure)}),t},resetChildren:function(){this.children.each(function(t,i){i.figure.setCanvas(null)}),this.children=new draw2d.util.ArrayList,this.repaint()},getShapeElement:function(){return null!==this.shape?this.shape:(this.shape=this.createShapeElement(),this.shape)},createShapeElement:function(){throw"Inherited class ["+this.NAME+"] must override the abstract method createShapeElement"},repaint:function(t){return this.visible!==!0?void this.shape.hide():(this.shape.show(),t.opacity=this.alpha,this.shape.attr(t),this.applyTransformation(),void this.children.each(function(t,i){i.locator.relocate(t,i.figure)}))},applyTransformation:function(){},setGlow:function(t){return this},onDragStart:function(t,i){return this.isInDragDrop=!1,this.isMoving=!1,this.originalAlpha=this.getAlpha(),this.command=this.createCommand(new draw2d.command.CommandType(draw2d.command.CommandType.MOVE)),null!==this.command&&(this.ox=this.x,this.oy=this.y,this.isInDragDrop=!0,this.editPolicy.each($.proxy(function(t,i){i instanceof draw2d.policy.figure.DragDropEditPolicy&&i.onDragStart(this.canvas,this)},this)),!0)},onDrag:function(t,i){if(this.editPolicy.each($.proxy(function(e,n){if(n instanceof draw2d.policy.figure.DragDropEditPolicy){var s=n.adjustPosition(this,this.ox+t,this.oy+i);t=s.x-this.ox,i=s.y-this.oy}},this)),this.x=this.ox+t,this.y=this.oy+i,this.getCanSnapToHelper()){var e=new draw2d.geo.Point(this.x,this.y);e=this.getCanvas().snapToHelper(this,e),this.x=e.x,this.y=e.y}this.setPosition(this.x,this.y),this.editPolicy.each($.proxy(function(t,i){i instanceof draw2d.policy.figure.DragDropEditPolicy&&i.onDrag(this.canvas,this)},this)),this.isMoving===!1&&(this.isMoving=!0,this.setAlpha(.7*this.originalAlpha))},onPanning:function(t,i){},onDragEnd:function(){this.setAlpha(this.originalAlpha),this.command.setPosition(this.x,this.y),this.isInDragDrop=!1,this.canvas.getCommandStack().execute(this.command),this.command=null,this.isMoving=!1,this.editPolicy.each($.proxy(function(t,i){i instanceof draw2d.policy.figure.DragDropEditPolicy&&i.onDragEnd(this.canvas,this)},this)),this.fireMoveEvent()},onDragEnter:function(t){return null},onDragLeave:function(t){},onDrop:function(t){},onMouseEnter:function(){},onMouseLeave:function(){},onDoubleClick:function(){},onClick:function(){},onContextMenu:function(t,i){},setAlpha:function(t){if(t=Math.min(1,Math.max(0,parseFloat(t))),t!==this.alpha)return this.alpha=t,this.repaint(),this},getAlpha:function(){return this.alpha},setRotationAngle:function(t){return this.rotationAngle=t,this.editPolicy.each($.proxy(function(t,i){i instanceof draw2d.policy.figure.DragDropEditPolicy&&i.moved(this.canvas,this)},this)),this.repaint(),this},getRotationAngle:function(){return this.rotationAngle},setVisible:function(t){return this.visible=!!t,this.repaint(),this},isVisible:function(){return this.visible&&null!==this.shape},getZOrder:function(){if(null===this.shape)return-1;for(var t=0,i=this.shape.node;null!==(i=i.previousSibling);)t++;return t},setCanSnapToHelper:function(t){return this.canSnapToHelper=!!t,this},getCanSnapToHelper:function(){return this.canSnapToHelper},getSnapToGridAnchor:function(){return this.snapToGridAnchor},setSnapToGridAnchor:function(t){this.snapToGridAnchor=t},getWidth:function(){return this.width},getHeight:function(){return this.height},getMinWidth:function(){return this.minWidth},setMinWidth:function(t){return this.minWidth=parseFloat(t),this},getMinHeight:function(){return this.minHeight},setMinHeight:function(t){return this.minHeight=parseFloat(t),this},getX:function(){return this.x},getY:function(){return this.y},getAbsoluteX:function(){return null===this.parent?this.x||0:this.x+this.parent.getAbsoluteX()},getAbsoluteY:function(){return null===this.parent?this.y||0:this.y+this.parent.getAbsoluteY()},getAbsolutePosition:function(){return new draw2d.geo.Point(this.getAbsoluteX(),this.getAbsoluteY())},getAbsoluteBounds:function(){return new draw2d.geo.Rectangle(this.getAbsoluteX(),this.getAbsoluteY(),this.getWidth(),this.getHeight())},setPosition:function(t,i){return t instanceof draw2d.geo.Point?(this.x=t.x,this.y=t.y):(this.x=t,this.y=i),this.repaint(),this.editPolicy.each($.proxy(function(t,i){i instanceof draw2d.policy.figure.DragDropEditPolicy&&i.moved(this.canvas,this)},this)),this.fireMoveEvent(),this},getPosition:function(){return new draw2d.geo.Point(this.x,this.y)},translate:function(t,i){return this.setPosition(this.x+t,this.y+i),this},setDimension:function(t,i){if(t=Math.max(this.getMinWidth(),t),i=Math.max(this.getMinHeight(),i),this.width!==t||this.height!==i)return this.editPolicy.each($.proxy(function(e,n){if(n instanceof draw2d.policy.figure.DragDropEditPolicy){var s=n.adjustDimension(this,t,i);t=s.w,i=s.h}},this)),this.width=Math.max(this.getMinWidth(),t),this.height=Math.max(this.getMinHeight(),i),this.repaint(),this.fireResizeEvent(),this.fireMoveEvent(),this.editPolicy.each($.proxy(function(t,i){i instanceof draw2d.policy.figure.DragDropEditPolicy&&i.moved(this.canvas,this)},this)),this},getBoundingBox:function(){return new draw2d.geo.Rectangle(this.getAbsoluteX(),this.getAbsoluteY(),this.getWidth(),this.getHeight())},hitTest:function(t,i,e){return"number"==typeof e?this.getBoundingBox().scale(e,e).hitTest(t,i):this.getBoundingBox().hitTest(t,i)},setDraggable:function(t){return this.draggable=!!t,this},isDraggable:function(){return this.draggable},isResizeable:function(){return this.resizeable},setResizeable:function(t){return this.resizeable=!!t,this},isSelectable:function(){return this.selectable},setSelectable:function(t){return this.selectable=!!t,this},isStrechable:function(){return!0},isDeleteable:function(){return this.deleteable},setDeleteable:function(t){return this.deleteable=!!t,this},setParent:function(t){return this.parent=t,this},getParent:function(){return this.parent},attachResizeListener:function(t){if(null!==t)return this.resizeListener.add(t),this},detachResizeListener:function(t){if(null!==t)return this.resizeListener.remove(t),this},fireResizeEvent:function(){return this.resizeListener.each($.proxy(function(t,i){i.onOtherFigureIsResizing(this)},this)),this},onOtherFigureIsResizing:function(t){},attachMoveListener:function(t){if(null!==t)return this.moveListener.contains(t)||this.moveListener.add(t),this},detachMoveListener:function(t){if(null!==t)return this.moveListener.remove(t),this},fireMoveEvent:function(){return this.moveListener.each($.proxy(function(t,i){i.onOtherFigureIsMoving(this)},this)),this},onOtherFigureIsMoving:function(t){},createCommand:function(t){return null===t?null:t.getPolicy()===draw2d.command.CommandType.MOVE?this.isDraggable()?new draw2d.command.CommandMove(this):null:t.getPolicy()===draw2d.command.CommandType.DELETE?this.isDeleteable()?new draw2d.command.CommandDelete(this):null:t.getPolicy()===draw2d.command.CommandType.RESIZE&&this.isResizeable()?new draw2d.command.CommandResize(this):null},getPersistentAttributes:function(){var t={type:this.NAME,id:this.id,x:this.x,y:this.y,width:this.width,height:this.height};return t},setPersistentAttributes:function(t){return this.id=t.id,this.x=t.x,this.y=t.y,"undefined"!=typeof t.width&&(this.width=t.width),"undefined"!=typeof t.height&&(this.height=t.height),this},onRemove:function(){}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/node/Node.js' */
(function ($) {draw2d.shape.node.Node=draw2d.Figure.extend({NAME:"draw2d.shape.node.Node",init:function(t,e){this.inputPorts=new draw2d.util.ArrayList,this.outputPorts=new draw2d.util.ArrayList,this.hybridPorts=new draw2d.util.ArrayList,this.portRelayoutRequired=!0,this.cachedPorts=null,this._super(t,e)},onDoubleClick:function(){var t=this.getWidth(),e=this.getHeight();this.setRotationAngle((this.getRotationAngle()+90)%360),this.setDimension(e,t),this.portRelayoutRequired=!0},getPorts:function(){return null===this.cachedPorts&&(this.cachedPorts=new draw2d.util.ArrayList,this.cachedPorts.addAll(this.inputPorts),this.cachedPorts.addAll(this.outputPorts),this.cachedPorts.addAll(this.hybridPorts),this.children.each($.proxy(function(t,e){this.cachedPorts.addAll(e.figure.getPorts())},this))),this.cachedPorts},getInputPorts:function(){return this.inputPorts.clone().addAll(this.hybridPorts)},getOutputPorts:function(){return this.outputPorts.clone().addAll(this.hybridPorts)},getPort:function(t){var e=null;return this.getPorts().each(function(r,i){if(i.getName()===t)return e=i,!1}),e},getInputPort:function(t){if("number"==typeof t)return this.inputPorts.get(t);for(var e=0;e<this.inputPorts.getSize();e++){var r=this.inputPorts.get(e);if(r.getName()===t)return r}return null},getOutputPort:function(t){if("number"==typeof t)return this.outputPorts.get(t);for(var e=0;e<this.outputPorts.getSize();e++){var r=this.outputPorts.get(e);if(r.getName()===t)return r}return null},getHybridPort:function(t){if("number"==typeof t)return this.hybridPorts.get(t);for(var e=0;e<this.hybridPorts.getSize();e++){var r=this.hybridPorts.get(e);if(r.getName()===t)return r}return null},addPort:function(t,e){if(!(t instanceof draw2d.Port))throw"Argument is not typeof 'draw2d.Port'. \nFunction: draw2d.shape.node.Node#addPort";this.cachedPorts=null,this.portRelayoutRequired=!0,t instanceof draw2d.InputPort?this.inputPorts.add(t):t instanceof draw2d.OutputPort?this.outputPorts.add(t):t instanceof draw2d.HybridPort&&this.hybridPorts.add(t),"undefined"!=typeof e&&e instanceof draw2d.layout.locator.Locator&&t.setLocator(e),t.setParent(this),t.setCanvas(this.canvas),t.setDeleteable(!1),null!==this.canvas&&(t.getShapeElement(),this.canvas.registerPort(t))},removePort:function(t){if(this.portRelayoutRequired=!0,this.inputPorts.remove(t),this.outputPorts.remove(t),this.hybridPorts.remove(t),null!==t.getCanvas()){t.getCanvas().unregisterPort(t);for(var e=t.getConnections(),r=0;r<e.getSize();++r)t.getCanvas().removeFigure(e.get(r))}t.setCanvas(null)},createPort:function(t,e){var r=null,i=0;switch(t){case"input":r=new draw2d.InputPort,i=this.inputPorts.getSize();break;case"output":r=new draw2d.OutputPort,i=this.outputPorts.getSize();break;case"hybrid":r=new draw2d.HybridPort,i=this.hybridPorts.getSize();break;default:throw"Unknown type ["+t+"] of port requested"}return r.setName(t+i),this.addPort(r,e),this.setDimension(this.width,this.height),r},getConnections:function(){for(var t=new draw2d.util.ArrayList,e=this.getPorts(),r=0;r<e.getSize();r++)for(var i=e.get(r),o=0,s=i.getConnections().getSize();o<s;o++)t.contains(i.getConnections().get(o))||t.add(i.getConnections().get(o));return t},setCanvas:function(t){var e=this.canvas;this._super(t);var r=this.getPorts();null!==e&&r.each(function(t,r){e.unregisterPort(r)}),null!==t?(r.each(function(e,r){r.setCanvas(t),t.registerPort(r)}),this.setDimension(this.width,this.height)):r.each(function(t,e){e.setCanvas(null)})},setRotationAngle:function(t){this.portRelayoutRequired=!0,this._super(t),this.layoutPorts()},setDimension:function(t,e){this.portRelayoutRequired=!0,this._super(t,e)},onPortValueChanged:function(t){},repaint:function(t){this.repaintBlocked!==!0&&null!==this.shape&&(this._super(t),this.layoutPorts())},layoutPorts:function(){this.portRelayoutRequired!==!1&&(this.portRelayoutRequired=!1,this.outputPorts.each(function(t,e){e.locator.relocate(t,e)}),this.inputPorts.each(function(t,e){e.locator.relocate(t,e)}),this.hybridPorts.each(function(t,e){e.locator.relocate(t,e)}))}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/VectorFigure.js' */
(function ($) {draw2d.VectorFigure=draw2d.shape.node.Node.extend({NAME:"draw2d.VectorFigure",init:function(){this.stroke=1,this.bgColor=new draw2d.util.Color(255,255,255),this.lineColor=new draw2d.util.Color(128,128,255),this.color=new draw2d.util.Color(128,128,128),this.strokeBeforeGlow=this.stroke,this.glowIsActive=!1,this._super()},setGlow:function(t){return t===this.glowIsActive?this:(this.glowIsActive=t,t===!0?(this.strokeBeforeGlow=this.getStroke(),this.setStroke(2.5*this.strokeBeforeGlow)):this.setStroke(this.strokeBeforeGlow),this)},repaint:function(t){this.repaintBlocked!==!0&&null!==this.shape&&("undefined"==typeof t&&(t={}),t.x=this.getAbsoluteX(),t.y=this.getAbsoluteY(),"undefined"==typeof t.stroke&&(null===this.color||0===this.stroke?t.stroke="none":t.stroke=this.color.hash()),t["stroke-width"]=this.stroke,"undefined"==typeof t.fill&&(t.fill=this.bgColor.hash()),this._super(t))},setBackgroundColor:function(t){return this.bgColor=new draw2d.util.Color(t),this.repaint(),this},getBackgroundColor:function(){return this.bgColor},setStroke:function(t){return this.stroke=t,this.repaint(),this},getStroke:function(){return this.stroke},setColor:function(t){return this.color=new draw2d.util.Color(t),this.repaint(),this},getColor:function(){return this.color}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/basic/Rectangle.js' */
(function ($) {draw2d.shape.basic.Rectangle=draw2d.VectorFigure.extend({NAME:"draw2d.shape.basic.Rectangle",init:function(t,i){this.radius=2,this.dasharray=null,this._super(),this.setBackgroundColor(new draw2d.util.Color(100,100,100)),this.setColor("#1B1B1B"),"undefined"==typeof t?this.setDimension(50,90):this.setDimension(t,i)},repaint:function(t){this.repaintBlocked!==!0&&null!==this.shape&&("undefined"==typeof t&&(t={}),null!==this.dasharray&&(t["stroke-dasharray"]=this.dasharray),t.width=this.getWidth(),t.height=this.getHeight(),t.r=this.radius,this._super(t))},applyTransformation:function(){if(this.shape.transform("R"+this.rotationAngle),90===this.getRotationAngle()||270===this.getRotationAngle()){var t=this.getHeight()/this.getWidth(),i="...S"+t+","+1/t+","+(this.getAbsoluteX()+this.getWidth()/2)+","+(this.getAbsoluteY()+this.getHeight()/2);this.shape.transform(i)}},createShapeElement:function(){return this.canvas.paper.rect(this.getAbsoluteX(),this.getAbsoluteY(),this.getWidth(),this.getHeight())},setRadius:function(t){this.radius=t,this.repaint()},getRadius:function(){return this.radius},setDashArray:function(t){this.dasharray=t},getPersistentAttributes:function(){var t=this._super();return t.radius=this.radius,t},setPersistentAttributes:function(t){this._super(t),"number"==typeof t.radius&&(this.radius=t.radius)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/SetFigure.js' */
(function ($) {draw2d.SetFigure=draw2d.shape.basic.Rectangle.extend({NAME:"draw2d.SetFigure",init:function(t,i){this.svgNodes=null,this.originalWidth=null,this.originalHeight=null,this.scaleX=1,this.scaleY=1,this._super(t,i),this.setStroke(0),this.setBackgroundColor(null)},setCanvas:function(t){null===t&&null!==this.svgNodes&&(this.svgNodes.remove(),this.svgNodes=null),this._super(t)},repaint:function(t){this.repaintBlocked!==!0&&null!==this.shape&&(null!==this.originalWidth&&(this.scaleX=this.width/this.originalWidth,this.scaleY=this.height/this.originalHeight),"undefined"==typeof t&&(t={}),this.visible===!0?this.svgNodes.show():this.svgNodes.hide(),this._super(t))},applyTransformation:function(){var t="S"+this.scaleX+","+this.scaleY+",0,0 R"+this.rotationAngle+","+(this.getWidth()/2|0)+","+(this.getHeight()/2|0)+"T"+this.getAbsoluteX()+","+this.getAbsoluteY();if(this.svgNodes.transform(t),90===this.rotationAngle||270===this.rotationAngle){var i=this.svgNodes.getBBox(!0),s=i.height/i.width,e=i.width/i.height,h="...S"+s+","+e+","+(this.getAbsoluteX()+this.getWidth()/2)+","+(this.getAbsoluteY()+this.getHeight()/2);this.svgNodes.transform(h)}},createShapeElement:function(){var t=this.canvas.paper.rect(this.getX(),this.getY(),this.getWidth(),this.getHeight());this.svgNodes=this.createSet();var i=this.svgNodes.getBBox();return this.originalWidth=i.width,this.originalHeight=i.height,t},createSet:function(){return this.canvas.paper.set()}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/SVGFigure.js' */
(function ($) {draw2d.SVGFigure=draw2d.SetFigure.extend({NAME:"draw2d.SVGFigure",init:function(e,t){this._super(e,t)},createSet:function(){return this.importSVG(this.canvas,this.getSVG())},importSVG:function(e,t){var a=e.paper.set();try{if("undefined"==typeof t)throw"No data was provided.";var i=$(t);i.attr("width")&&i.attr("height")&&this.setDimension(i.attr("width"),i.attr("height"));var n=new RegExp("([a-z0-9-]+) ?: ?([^ ;]+)[ ;]?","gi");i.children().each(function(t,i){var r=null,s=null,f={},l=i.tagName,o=l.indexOf(":");if(o!=-1&&(l=l.substr(o+1)),$(i.attributes).each(function(){switch(this.nodeName){case"stroke-dasharray":f[this.nodeName]="- ";break;case"style":s=this.nodeValue;break;case"id":case"xml:space":break;default:f[this.nodeName]=this.nodeValue}}),null!==s)for(;n.exec(s);)f[RegExp.$1]=RegExp.$2;switch("undefined"==typeof f["stroke-width"]&&(f["stroke-width"]="undefined"==typeof f.stroke?0:1.2),l){case"rect":r=e.paper.rect();break;case"circle":r=e.paper.circle();break;case"ellipse":r=e.paper.ellipse();break;case"path":f.fill="none",r=e.paper.path(f.d);break;case"line":f.d="M "+f.x1+" "+f.y1+"L"+f.x2+" "+f.y2,f.fill="none",r=e.paper.path(f.d);break;case"polyline":var p=f.points;f.d="M "+p.replace(" "," L"),r=e.paper.path(f.d);break;case"polygon":r=e.paper.polygon(f.points);break;case"image":r=e.paper.image();break;case"tspan":case"text":if(i.childNodes.length>0){var d=i.firstChild;do{switch(d.nodeType){case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:return;case 1:}var c=e.paper.text(0,0,$(d).text()),u={x:parseFloat(d.attributes.x.value),y:parseFloat(d.attributes.y.value)};u["text-anchor"]="start","undefined"!=typeof d.attributes["font-size"]?u["font-size"]=parseInt(d.attributes["font-size"].value):"undefined"!=typeof f["font-size"]&&(u["font-size"]=parseInt(f["font-size"])),"undefined"!=typeof d.attributes["font-family"]?u["font-family"]=d.attributes["family-family"].value:"undefined"!=typeof f["font-family"]&&(u["font-family"]=f["font-family"]),u.fill="#000000","undefined"!=typeof d.attributes.fill?u.fill=d.attributes.fill.value:"undefined"!=typeof f.fill&&(u.fill=f.fill),u.y=u.y+c.getBBox().height/2,c.attr(u),a.push(c)}while(d=d.nextSibling)}else r=e.paper.text(0,0,$(i).html()),"undefined"==typeof f.fill&&(f.fill="#000000"),"undefined"==typeof f["text-anchor"]&&(f["text-anchor"]="start"),"undefined"!=typeof f["font-size"]&&(f["font-size"]=parseInt(f["font-size"])),"undefined"!=typeof f["font-family"]&&(f["font-family"]=parseInt(f["font-family"])),f.y=parseFloat(f.y)+r.getBBox().height/2}null!==r&&(r.attr(f),a.push(r))})}catch(e){alert("The SVG data you entered was invalid! ("+e+")")}return a}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/node/Hub.js' */
(function ($) {draw2d.shape.node.Hub=draw2d.shape.basic.Rectangle.extend({NAME:"draw2d.shape.node.Hub",DEFAULT_COLOR:new draw2d.util.Color("#4DF0FE"),BACKGROUND_COLOR:new draw2d.util.Color("#29AA77"),init:function(t,e,i){this.label=null,this._super(t,e),this.port=this.createPort("hybrid",new draw2d.layout.locator.CenterLocator(this)),this.CONNECTION_DIR_STRATEGY=[$.proxy(function(t,e){return this.getParent().getBoundingBox().getDirection(e.getAbsolutePosition())},this.port),$.proxy(function(t,e){return this.getAbsoluteY()>e.getAbsoluteY()?0:2},this.port),$.proxy(function(t,e){return this.getAbsoluteX()>e.getAbsoluteX()?3:1},this.port)],this.port.setGlow=$.proxy(this.setGlow,this),this.port._orig_hitTest=this.port.hitTest,this.port.hitTest=$.proxy(this.hitTest,this),this.port.setConnectionAnchor(new draw2d.layout.anchor.ShortesPathConnectionAnchor(this.port)),this.port.setVisible(!1),"undefined"==typeof e&&this.setDimension(150,50),this.setConnectionDirStrategy(0),this.setColor(this.DEFAULT_COLOR.darker()),this.setBackgroundColor(this.BACKGROUND_COLOR),"undefined"!=typeof i&&(this.label=new draw2d.shape.basic.Label(i),this.label.setColor("#0d0d0d"),this.label.setFontColor("#0d0d0d"),this.label.setStroke(0),this.addFigure(this.label,new draw2d.layout.locator.CenterLocator(this)))},onDragEnter:function(t){return this.getHybridPort(0).onDragEnter(t)},getMinWidth:function(){return null!==this.label?Math.max(this.label.getMinWidth(),this._super()):this._super()},repaint:function(t){this.repaintBlocked!==!0&&null!==this.shape&&("undefined"==typeof t&&(t={}),"undefined"==typeof t.fill&&(null!==this.bgColor?t.fill="90-"+this.bgColor.hash()+":5-"+this.bgColor.lighter(.3).hash()+":95":t.fill="none"),this._super(t))},setConnectionDirStrategy:function(t){switch(t){case 0:case 1:case 2:this.port.getConnectionDirection=this.CONNECTION_DIR_STRATEGY[t]}},getPersistentAttributes:function(){var t=this._super();return t.dirStrategy=this.CONNECTION_DIR_STRATEGY.indexOf(this.port.getConnectionDirection),t},setPersistentAttributes:function(t){this._super(t),"number"==typeof t.dirStrategy&&this.setConnectionDirStrategy(t.dirStrategy)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/node/HorizontalBus.js' */
(function ($) {draw2d.shape.node.HorizontalBus=draw2d.shape.node.Hub.extend({NAME:"draw2d.shape.node.HorizontalBus",init:function(e,i,n){this._super(e,i,n),this.setConnectionDirStrategy(1),this.installEditPolicy(new draw2d.policy.figure.HBusSelectionFeedbackPolicy)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/node/VerticalBus.js' */
(function ($) {draw2d.shape.node.VerticalBus=draw2d.shape.node.Hub.extend({NAME:"draw2d.shape.node.VerticalBus",init:function(e,t,i){this._super(e,t,i),null!==this.label&&this.label.setRotationAngle(90),this.setConnectionDirStrategy(2),this.installEditPolicy(new draw2d.policy.figure.VBusSelectionFeedbackPolicy)},getMinHeight:function(){return null===this.shape&&null===this.label?0:this.label.getMinWidth()},getMinWidth:function(){return null===this.shape&&null===this.label?0:this.label.getMinHeight()}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/node/Fulcrum.js' */
(function ($) {draw2d.shape.node.Fulcrum=draw2d.shape.node.Hub.extend({NAME:"draw2d.shape.node.Fulcrum",init:function(){this._super(40,40),this.port.setConnectionAnchor(new draw2d.layout.anchor.ConnectionAnchor(this.port)),this.port.setVisible(!0),this.port.hitTest=this.port._orig_hitTest,this.setConnectionDirStrategy(0),this.setColor(null),this.setRadius(10),this.setBackgroundColor(null),this.setStroke(0),this.installEditPolicy(new draw2d.policy.figure.AntSelectionFeedbackPolicy)},repaint:function(t){this.repaintBlocked!==!0&&null!==this.shape&&("undefined"==typeof t&&(t={}),"undefined"==typeof t.fill&&(t.fill=this.bgColor.hash()),this._super(t))}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/basic/Oval.js' */
(function ($) {draw2d.shape.basic.Oval=draw2d.VectorFigure.extend({NAME:"draw2d.shape.basic.Oval",init:function(t,e){this._super(),this.setBackgroundColor("#C02B1D"),this.setColor("#1B1B1B"),"number"==typeof e&&"number"==typeof t?this.setDimension(t,e):this.setDimension(50,50)},createShapeElement:function(){var t=this.getWidth()/2,e=this.getHeight()/2;return this.canvas.paper.ellipse(this.getAbsoluteX()+t,this.getAbsoluteY()+e,t,e)},repaint:function(t){this.repaintBlocked!==!0&&null!==this.shape&&("undefined"==typeof t&&(t={}),"undefined"==typeof t.rx&&(t.rx=this.width/2,t.ry=this.height/2),"undefined"==typeof t.cx&&(t.cx=this.getAbsoluteX()+t.rx,t.cy=this.getAbsoluteY()+t.ry),this._super(t))},intersectionWithLine:function(t,e){var i=this.getWidth()/2,s=this.getHeight()/2,r=new draw2d.util.ArrayList,n=new draw2d.geo.Point(t.x,t.y),d=e.subtract(t),o=new draw2d.geo.Point(this.getAbsoluteX()+i,this.getAbsoluteY()+s),a=n.subtract(o),h=new draw2d.geo.Point(d.x/(i*i),d.y/(s*s)),u=new draw2d.geo.Point(a.x/(i*i),a.y/(s*s)),l=d.dot(h),g=d.dot(u),p=a.dot(u)-1,c=g*g-l*p;if(c<0);else if(c>0){var f=Math.sqrt(c),w=(-g-f)/l,b=(-g+f)/l;(w<0||1<w)&&(b<0||1<b)||(0<=w&&w<=1&&r.add(t.lerp(e,w)),0<=b&&b<=1&&r.add(t.lerp(e,b)))}else{var y=-g/l;0<=y&&y<=1&&r.add(t.lerp(e,y))}return r}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/basic/Circle.js' */
(function ($) {draw2d.shape.basic.Circle=draw2d.shape.basic.Oval.extend({NAME:"draw2d.shape.basic.Circle",init:function(i){this._super(),"number"==typeof i?this.setDimension(i,i):this.setDimension(40,40)},setDimension:function(i,e){i>e?this._super(i,i):this._super(e,e)},isStrechable:function(){return!1}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/basic/Label.js' */
(function ($) {draw2d.shape.basic.Label=draw2d.SetFigure.extend({NAME:"draw2d.shape.basic.Label",FONT_FALLBACK:{Georgia:"Georgia, serif","Palatino Linotype":'"Palatino Linotype", "Book Antiqua", Palatino, serif',"Times New Roman":'"Times New Roman", Times, serif',Arial:"Arial, Helvetica, sans-serif","Arial Black":'"Arial Black", Gadget, sans-serif',"Comic Sans MS":'"Comic Sans MS", cursive, sans-serif',Impact:"Impact, Charcoal, sans-serif","Lucida Sans Unicode":'"Lucida Sans Unicode", "Lucida Grande", sans-serif',"Tahoma, Geneva":"Tahoma, Geneva, sans-seri","Trebuchet MS":'"Trebuchet MS", Helvetica, sans-serif',Verdana:"Verdana, Geneva, sans-serif","Courier New":'"Courier New", Courier, monospace',"Lucida Console":'"Lucida Console", Monaco, monospace'},init:function(t){this._super(),"string"==typeof t?this.text=t:this.text="",this.cachedWidth=null,this.cachedHeight=null,this.cachedMinWidth=null,this.cachedMinHeight=null,this.fontSize=12,this.fontColor=new draw2d.util.Color("#080808"),this.fontFamily=null,this.padding=4,this.bold=!1,this.setStroke(1),this.setDimension(10,10),this.editor=null,this.installEditPolicy(new draw2d.policy.figure.AntSelectionFeedbackPolicy)},createSet:function(){return this.canvas.paper.text(0,0,this.text)},repaint:function(t){if(this.repaintBlocked!==!0&&null!==this.shape){this.cachedWidth=null,this.cachedHeight=null,this.cachedMinWidth=null,this.cachedMinHeight=null;var i={};i.text=this.text,i.x=this.padding+this.getStroke(),i.y=this.getHeight()/2,i["font-weight"]=this.bold===!0?"bold":"normal",i["text-anchor"]="start",i["font-size"]=this.fontSize,null!==this.fontFamily&&(i["font-family"]=this.fontFamily),i.fill=this.fontColor.hash(),this.svgNodes.attr(i),this._super(t)}},applyTransformation:function(){this.shape.transform("R"+this.rotationAngle),this.svgNodes.transform("R"+this.rotationAngle+"T"+this.getAbsoluteX()+","+this.getAbsoluteY())},isResizeable:function(){return!1},setFontSize:function(t){this.cachedMinWidth=null,this.cachedMinHeight=null,this.fontSize=t,this.repaint()},setBold:function(t){this.cachedMinWidth=null,this.cachedMinHeight=null,this.bold=t,this.repaint()},setFontColor:function(t){this.fontColor=new draw2d.util.Color(t),this.repaint()},getFontColor:function(){return this.fontColor},setPadding:function(t){this.cachedMinWidth=null,this.cachedMinHeight=null,this.cachedWidth=null,this.cachedHeight=null,this.padding=t,this.repaint()},setFontFamily:function(t){this.cachedMinWidth=null,this.cachedMinHeight=null,this.cachedWidth=null,this.cachedHeight=null,"undefined"!==this.FONT_FALLBACK[t]&&(t=this.FONT_FALLBACK[t]),this.fontFamily=t,this.repaint()},setDimension:function(t,i){this.cachedWidth=null,this.cachedHeight=null,this._super(t,i)},getMinWidth:function(){return null===this.shape?0:(null===this.cachedMinWidth&&(this.cachedMinWidth=this.svgNodes.getBBox(!0).width+2*this.padding+2*this.getStroke()),this.cachedMinWidth)},getMinHeight:function(){return null===this.shape?0:(null===this.cachedMinHeight&&(this.cachedMinHeight=this.svgNodes.getBBox(!0).height+2*this.padding+2*this.getStroke()),this.cachedMinHeight)},getWidth:function(){return null===this.shape?0:(null===this.cachedWidth&&(this.cachedWidth=Math.max(this.width,this.getMinWidth())),this.cachedWidth)},getHeight:function(){return null===this.shape?0:(null===this.cachedHeight&&(this.cachedHeight=Math.max(this.height,this.getMinHeight())),this.cachedHeight)},installEditor:function(t){this.editor=t},onDoubleClick:function(){null!==this.editor&&this.editor.start(this)},getText:function(){return this.text},setText:function(t){this.cachedWidth=null,this.cachedHeight=null,this.cachedMinWidth=null,this.cachedMinHeight=null,this.text=t,this.repaint(),this.editPolicy.each($.proxy(function(t,i){i instanceof draw2d.policy.figure.DragDropEditPolicy&&i.moved(this.canvas,this)},this)),this.fireResizeEvent(),null!==this.parent&&this.parent.repaint()},hitTest:function(t,i){if(0===this.rotationAngle)return this._super(t,i);var e=this.shape.matrix,n=this.getBoundingBox().getPoints();n.each(function(t,i){var n=e.x(i.x,i.y),h=e.y(i.x,i.y);i.x=n,i.y=h});var h=4,s=0,a=h-1,o=!1;for(s=0;s<h;s++){var l=n.get(s),c=n.get(a);(l.y<i&&c.y>=i||c.y<i&&l.y>=i)&&(l.x<=t||c.x<=t)&&l.x+(i-l.y)/(c.y-l.y)*(c.x-l.x)<t&&(o=!o),a=s}return o},getPersistentAttributes:function(){var t=this._super();return t.text=this.text,t.fontSize=this.fontSize,t.fontColor=this.fontColor.hash(),t.fontFamily=this.fontFamily,t},setPersistentAttributes:function(t){this._super(t),"undefined"!=typeof t.text&&this.setText(t.text),"undefined"!=typeof t.fontFamily&&this.setFontFamily(t.fontFamily),"undefined"!=typeof t.fontSize&&this.setFontSize(t.fontSize),"undefined"!=typeof t.fontColor&&this.setFontColor(t.fontColor)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/basic/Line.js' */
(function ($) {draw2d.shape.basic.Line=draw2d.Figure.extend({NAME:"draw2d.shape.basic.Line",DEFAULT_COLOR:new draw2d.util.Color(0,0,0),init:function(t,i,e,s){this.repaintBlocked=!1,this.corona=10,this.isGlowing=!1,this.lineColor=this.DEFAULT_COLOR,this.stroke=1,this.dasharray=null,"number"==typeof s?(this.startX=t,this.startY=i,this.endX=e,this.endY=s):(this.startX=30,this.startY=30,this.endX=100,this.endY=100),this._super(),this.installEditPolicy(new draw2d.policy.figure.LineSelectionFeedbackPolicy),this.setSelectable(!0),this.setDeleteable(!0)},onDragEnd:function(){this.setAlpha(this.originalAlpha),this.isInDragDrop=!1,this.canvas.getCommandStack().execute(this.command),this.command=null,this.isMoving=!1,this.editPolicy.each($.proxy(function(t,i){i instanceof draw2d.policy.figure.DragDropEditPolicy&&i.onDragEnd(this.canvas,this)},this)),this.fireMoveEvent()},setDashArray:function(t){return this.dasharray=t,this},setCoronaWidth:function(t){return this.corona=t,this},createShapeElement:function(){return this.canvas.paper.path("M"+this.getStartX()+" "+this.getStartY()+"L"+this.getEndX()+" "+this.getEndY())},repaint:function(t){this.repaintBlocked!==!0&&null!==this.shape&&("undefined"==typeof t?t={stroke:"#"+this.lineColor.hex(),"stroke-width":this.stroke,path:["M",this.getStartX(),this.getStartY(),"L",this.getEndX(),this.getEndY()].join(" ")}:("undefined"==typeof t.path&&(t.path=["M",this.getStartX(),this.getStartY(),"L",this.getEndX(),this.getEndY()].join(" ")),t.stroke=this.lineColor.hash(),t["stroke-width"]=this.stroke),null!==this.dasharray&&(t["stroke-dasharray"]=this.dasharray),this._super(t))},setGlow:function(t){if(this.isGlowing!==t)return t===!0?(this._lineColor=this.lineColor,this._stroke=this.stroke,this.setColor(draw2d.util.Color("#3f72bf")),this.setStroke(4*this.stroke|0)):(this.setColor(this._lineColor),this.setStroke(this._stroke)),this.isGlowing=t,this},isResizeable:function(){return!0},setStroke:function(t){return this.stroke=t,this.repaint(),this},setColor:function(t){return this.lineColor=new draw2d.util.Color(t),this.repaint(),this},getColor:function(){return this.lineColor},setStartPoint:function(t,i){if(this.startX!==t||this.startY!==i)return this.startX=t,this.startY=i,this.repaint(),this.editPolicy.each($.proxy(function(t,i){i instanceof draw2d.policy.figure.DragDropEditPolicy&&i.moved(this.canvas,this)},this)),this},setEndPoint:function(t,i){if(this.endX!==t||this.endY!==i)return this.endX=t,this.endY=i,this.repaint(),this.editPolicy.each($.proxy(function(t,i){i instanceof draw2d.policy.figure.DragDropEditPolicy&&i.moved(this.canvas,this)},this)),this},getStartX:function(){return this.startX},getStartY:function(){return this.startY},getStartPoint:function(){return new draw2d.geo.Point(this.startX,this.startY)},getEndX:function(){return this.endX},getEndY:function(){return this.endY},getEndPoint:function(){return new draw2d.geo.Point(this.endX,this.endY)},getSegments:function(){var t=new draw2d.util.ArrayList;return t.add({start:this.getStartPoint(),end:this.getEndPoint()}),t},getLength:function(){return null!==this.shape?this.shape.getTotalLength():Math.sqrt((this.startX-this.endX)*(this.startX-this.endX)+(this.startY-this.endY)*(this.startY-this.endY))},getAngle:function(){var t=this.getLength(),i=-(180/Math.PI)*Math.asin((this.startY-this.endY)/t);return i<0?i=this.endX<this.startX?Math.abs(i)+180:360-Math.abs(i):this.endX<this.startX&&(i=180-i),i},createCommand:function(t){if(t.getPolicy()===draw2d.command.CommandType.MOVE){var i=this.getStartX(),e=this.getStartY(),s=this.getEndX(),n=this.getEndY();return new draw2d.command.CommandMoveLine(this,i,e,s,n)}return t.getPolicy()===draw2d.command.CommandType.DELETE?this.isDeleteable()===!1?null:new draw2d.command.CommandDelete(this):null},hitTest:function(t,i){return draw2d.shape.basic.Line.hit(this.corona,this.startX,this.startY,this.endX,this.endY,t,i)},intersection:function(t){var i=new draw2d.util.ArrayList;if(t===this)return i;var e=this.getSegments(),s=t.getSegments();return e.each(function(t,e){s.each(function(t,s){var n=draw2d.shape.basic.Line.intersection(e.start,e.end,s.start,s.end);null!==n&&i.add(n)})}),i},getPersistentAttributes:function(){var t=this._super();return delete t.x,delete t.y,delete t.width,delete t.height,t.stroke=this.stroke,t.color=this.getColor().hash(),t},setPersistentAttributes:function(t){this._super(t),"undefined"!=typeof t.stroke&&this.setStroke(parseInt(t.stroke)),"undefined"!=typeof t.color&&this.setColor(t.color)}}),draw2d.shape.basic.Line.intersection=function(t,i,e,s){var n=null,r=(s.x-e.x)*(t.y-e.y)-(s.y-e.y)*(t.x-e.x),h=(i.x-t.x)*(t.y-e.y)-(i.y-t.y)*(t.x-e.x),a=(s.y-e.y)*(i.x-t.x)-(s.x-e.x)*(i.y-t.y);if(0!=a){var o=r/a,d=h/a;0<=o&&o<=1&&0<=d&&d<=1&&(n=new draw2d.geo.Point(t.x+o*(i.x-t.x)|0,t.y+o*(i.y-t.y)|0),n.justTouching=0==o||1==o||0==d||1==d)}return n},draw2d.shape.basic.Line.hit=function(t,i,e,s,n,r,h){s-=i,n-=e,r-=i,h-=e;var a,o=r*s+h*n;o<=0?a=0:(r=s-r,h=n-h,o=r*s+h*n,a=o<=0?0:o*o/(s*s+n*n));var d=r*r+h*h-a;return d<0&&(d=0),Math.sqrt(d)<t};}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/basic/PolyLine.js' */
(function ($) {draw2d.shape.basic.PolyLine=draw2d.shape.basic.Line.extend({NAME:"draw2d.shape.basic.PolyLine",init:function(){this.svgPathString=null,this.oldPoint=null,this.lineSegments=new draw2d.util.ArrayList,this.basePoints=new draw2d.util.ArrayList,this._super()},setStartPoint:function(t,i){this.repaintBlocked=!0,this._super(t,i),this.calculatePath(),this.repaintBlocked=!1,this.repaint()},setEndPoint:function(t,i){this.repaintBlocked=!0,this._super(t,i),this.calculatePath(),this.repaintBlocked=!1,this.repaint()},calculatePath:function(){null!==this.shape&&(this.svgPathString=null,this.oldPoint=null,this.lineSegments=new draw2d.util.ArrayList,this.basePoints=new draw2d.util.ArrayList,this.router.route(this),this.routingRequired=!1)},repaint:function(){this.repaintBlocked!==!0&&null!==this.shape&&(null!==this.svgPathString&&this.routingRequired!==!0||this.calculatePath(),this._super({path:this.svgPathString,"stroke-linejoin":"round"}))},onDragEnter:function(t){return this.setGlow(!0),this},onDragLeave:function(t){this.setGlow(!1)},getPoints:function(){return this.basePoints},getSegments:function(){return this.lineSegments},addPoint:function(t,i){"undefined"!=typeof i&&(t=new draw2d.geo.Point(t,i)),this.basePoints.add(t),null!==this.oldPoint&&this.lineSegments.add({start:this.oldPoint,end:t}),this.svgPathString=null,this.oldPoint=t},onOtherFigureIsMoving:function(t){this.repaintBlocked=!0,this._super(t),this.calculatePath(),this.repaintBlocked=!1,this.repaint()},hitTest:function(t,i){for(var n=0;n<this.lineSegments.getSize();n++){var e=this.lineSegments.get(n);if(draw2d.shape.basic.Line.hit(this.corona,e.start.x,e.start.y,e.end.x,e.end.y,t,i))return!0}return!1},createCommand:function(t){return t.getPolicy()===draw2d.command.CommandType.DELETE&&this.isDeleteable()===!0?new draw2d.command.CommandDelete(this):null}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/basic/Diamond.js' */
(function ($) {draw2d.shape.basic.Diamond=draw2d.VectorFigure.extend({NAME:"draw2d.shape.basic.Diamond",init:function(e,i){this._super(),this.setBackgroundColor("#00a3f6"),this.setColor("#1B1B1B"),"undefined"==typeof e?this.setDimension(50,90):this.setDimension(e,i)},repaint:function(e){if(this.repaintBlocked!==!0&&null!==this.shape){"undefined"==typeof e&&(e={});var i=this.getBoundingBox(),t=["M",i.x+i.w/2," ",i.y];t.push("L",i.x+i.w," ",i.y+i.h/2),t.push("L",i.x+i.w/2," ",i.y+i.h),t.push("L",i.x," ",i.y+i.h/2),t.push("L",i.x+i.w/2," ",i.y),e.path=t.join(""),this._super(e)}},createShapeElement:function(){return this.canvas.paper.path("M0 0L1 1")}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/basic/Image.js' */
(function ($) {draw2d.shape.basic.Image=draw2d.shape.node.Node.extend({NAME:"draw2d.shape.basic.Image",init:function(t,e,i){this._super(e,i),this.path=t},repaint:function(t){this.repaintBlocked!==!0&&null!==this.shape&&("undefined"==typeof t&&(t={}),t.x=this.getAbsoluteX(),t.y=this.getAbsoluteY(),t.width=this.getWidth(),t.height=this.getHeight(),this._super(t))},createShapeElement:function(){return this.canvas.paper.image(this.path,this.getX(),this.getY(),this.getWidth(),this.getHeight())}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/Connection.js' */
(function ($) {draw2d.Connection=draw2d.shape.basic.PolyLine.extend({NAME:"draw2d.Connection",init:function(t){this._super(),this.sourcePort=null,this.targetPort=null,this.oldPoint=null,this.sourceDecorator=null,this.targetDecorator=null,this.sourceDecoratorNode=null,this.targetDecoratorNode=null,this.router=t||draw2d.Connection.DEFAULT_ROUTER,this.setColor("#1B1B1B"),this.setStroke(1)},disconnect:function(){null!==this.sourcePort&&(this.sourcePort.detachMoveListener(this),this.fireSourcePortRouteEvent()),null!==this.targetPort&&(this.targetPort.detachMoveListener(this),this.fireTargetPortRouteEvent())},reconnect:function(){null!==this.sourcePort&&(this.sourcePort.attachMoveListener(this),this.fireSourcePortRouteEvent()),null!==this.targetPort&&(this.targetPort.attachMoveListener(this),this.fireTargetPortRouteEvent()),this.onReconnect(this.getSourcePort(),this.getTargetPort()),this.routingRequired=!0,this.repaint()},isResizeable:function(){return this.isDraggable()},addFigure:function(t,e){if(!(e instanceof draw2d.layout.locator.ConnectionLocator))throw"Locator must implement the class draw2d.layout.locator.ConnectionLocator";this._super(t,e)},setSourceDecorator:function(t){this.sourceDecorator=t,this.routingRequired=!0,null!==this.sourceDecoratorNode&&(this.sourceDecoratorNode.remove(),this.sourceDecoratorNode=null),this.repaint()},getSourceDecorator:function(){return this.sourceDecorator},setTargetDecorator:function(t){this.targetDecorator=t,this.routingRequired=!0,null!==this.targetDecoratorNode&&(this.targetDecoratorNode.remove(),this.targetDecoratorNode=null),this.repaint()},getTargetDecorator:function(){return this.targetDecorator},setRouter:function(t){"undefined"==typeof t||null===t?this.router=new draw2d.layout.connection.NullRouter:this.router=t,this.routingRequired=!0,this.repaint()},getRouter:function(){return this.router},calculatePath:function(){null!==this.sourcePort&&null!==this.targetPort&&this._super()},repaint:function(t){if(this.repaintBlocked!==!0&&null!==this.shape&&null!==this.sourcePort&&null!==this.targetPort){if(this._super(t),this.getSource().getParent().isMoving===!1&&this.getTarget().getParent().isMoving===!1&&(null!==this.targetDecorator&&null===this.targetDecoratorNode&&(this.targetDecoratorNode=this.targetDecorator.paint(this.getCanvas().paper)),null!==this.sourceDecorator&&null===this.sourceDecoratorNode&&(this.sourceDecoratorNode=this.sourceDecorator.paint(this.getCanvas().paper))),null!==this.sourceDecoratorNode){var e=this.getPoints().get(0);this.sourceDecoratorNode.transform("r"+this.getStartAngle()+","+e.x+","+e.y+" t"+e.x+","+e.y)}if(null!==this.targetDecoratorNode){var r=this.getPoints().getLastElement();this.targetDecoratorNode.transform("r"+this.getEndAngle()+","+r.x+","+r.y+" t"+r.x+","+r.y)}}},getAbsoluteX:function(){return 0},getAbsoluteY:function(){return 0},postProcess:function(t){this.router.postProcess(this,this.getCanvas(),t)},onDragEnter:function(t){return t instanceof draw2d.shape.basic.LineResizeHandle?null:this},onDragLeave:function(t){},getStartPoint:function(){return this.isMoving===!1?this.sourcePort.getConnectionAnchorLocation(this.targetPort.getConnectionAnchorReferencePoint()):this._super()},getEndPoint:function(){return this.isMoving===!1?this.targetPort.getConnectionAnchorLocation(this.sourcePort.getConnectionAnchorReferencePoint()):this._super()},setSource:function(t){null!==this.sourcePort&&(this.sourcePort.detachMoveListener(this),this.sourcePort.onDisconnect(this)),this.sourcePort=t,null!==this.sourcePort&&(this.routingRequired=!0,this.fireSourcePortRouteEvent(),this.sourcePort.attachMoveListener(this),null!==this.canvas&&this.sourcePort.onConnect(this),this.setStartPoint(t.getAbsoluteX(),t.getAbsoluteY()))},getSource:function(){return this.sourcePort},setTarget:function(t){null!==this.targetPort&&(this.targetPort.detachMoveListener(this),this.targetPort.onDisconnect(this)),this.targetPort=t,null!==this.targetPort&&(this.routingRequired=!0,this.fireTargetPortRouteEvent(),this.targetPort.attachMoveListener(this),null!==this.canvas&&this.targetPort.onConnect(this),this.setEndPoint(t.getAbsoluteX(),t.getAbsoluteY()))},getTarget:function(){return this.targetPort},sharingPorts:function(t){return this.sourcePort==t.sourcePort||this.sourcePort==t.targetPort||this.targetPort==t.sourcePort||this.targetPort==t.targetPort},setCanvas:function(t){this._super(t),null!==this.sourceDecoratorNode&&(this.sourceDecoratorNode.remove(),this.sourceDecoratorNode=null),null!==this.targetDecoratorNode&&(this.targetDecoratorNode.remove(),this.targetDecoratorNode=null),null===this.canvas?(null!==this.sourcePort&&(this.sourcePort.detachMoveListener(this),this.sourcePort.onDisconnect(this)),null!==this.targetPort&&(this.targetPort.detachMoveListener(this),this.targetPort.onDisconnect(this))):(null!==this.sourcePort&&(this.sourcePort.attachMoveListener(this),this.sourcePort.onConnect(this)),null!==this.targetPort&&(this.targetPort.attachMoveListener(this),this.targetPort.onConnect(this)))},onOtherFigureIsMoving:function(t){t===this.sourcePort?this.setStartPoint(this.sourcePort.getAbsoluteX(),this.sourcePort.getAbsoluteY()):this.setEndPoint(this.targetPort.getAbsoluteX(),this.targetPort.getAbsoluteY()),this._super(t)},getStartAngle:function(){if(0===this.lineSegments.getSize())return 0;var t=this.lineSegments.get(0).start,e=this.lineSegments.get(0).end;this.router instanceof draw2d.layout.connection.SplineConnectionRouter&&(e=this.lineSegments.get(5).end);var r=Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)),o=-(180/Math.PI)*Math.asin((t.y-e.y)/r);return o<0?o=e.x<t.x?Math.abs(o)+180:360-Math.abs(o):e.x<t.x&&(o=180-o),o},getEndAngle:function(){if(0===this.lineSegments.getSize())return 90;var t=this.lineSegments.get(this.lineSegments.getSize()-1).end,e=this.lineSegments.get(this.lineSegments.getSize()-1).start;this.router instanceof draw2d.layout.connection.SplineConnectionRouter&&(e=this.lineSegments.get(this.lineSegments.getSize()-5).end);var r=Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)),o=-(180/Math.PI)*Math.asin((t.y-e.y)/r);return o<0?o=e.x<t.x?Math.abs(o)+180:360-Math.abs(o):e.x<t.x&&(o=180-o),o},fireSourcePortRouteEvent:function(){for(var t=this.sourcePort.getConnections(),e=0;e<t.getSize();e++)t.get(e).repaint()},fireTargetPortRouteEvent:function(){for(var t=this.targetPort.getConnections(),e=0;e<t.getSize();e++)t.get(e).repaint()},createCommand:function(t){return t.getPolicy()===draw2d.command.CommandType.MOVE_BASEPOINT?new draw2d.command.CommandReconnect(this):this._super(t)},getPersistentAttributes:function(){for(var t=this._super(),e=this.getSource().getParent();null!==e.getParent();)e=e.getParent();t.source={node:e.getId(),port:this.getSource().getName()};for(var e=this.getTarget().getParent();null!==e.getParent();)e=e.getParent();return t.target={node:e.getId(),port:this.getTarget().getName()},t.router=this.router.NAME,t},setPersistentAttributes:function(memento){this._super(memento),"undefined"!=typeof memento.router&&this.setRouter(eval("new "+memento.router+"()"))},onReconnect:function(t,e){}}),draw2d.Connection.createConnection=function(t,e){return new draw2d.Connection},draw2d.Connection.DEFAULT_ROUTER=new draw2d.layout.connection.ManhattanConnectionRouter;}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/ResizeHandle.js' */
(function ($) {draw2d.ResizeHandle=draw2d.shape.basic.Rectangle.extend({NAME:"draw2d.ResizeHandle",DEFAULT_COLOR:"#00bdee",init:function(e,t){this._super(),this.isResizeHandle=!0,this.owner=e,this.type=t,this.command=null,this.commandMove=null,this.commandResize=null,this.setDimension(),this.setBackgroundColor(this.DEFAULT_COLOR),this.setColor("#7A7A7A"),this.setStroke(1),this.setSelectable(!1),this.setRadius(0)},select:function(e){},unselect:function(){},getSnapToDirection:function(){switch(this.type){case 1:return draw2d.SnapToHelper.NORTH_WEST;case 2:return draw2d.SnapToHelper.NORTH;case 3:return draw2d.SnapToHelper.NORTH_EAST;case 4:return draw2d.SnapToHelper.EAST;case 5:return draw2d.SnapToHelper.SOUTH_EAST;case 6:return draw2d.SnapToHelper.SOUTH;case 7:return draw2d.SnapToHelper.SOUTH_WEST;case 8:return draw2d.SnapToHelper.WEST;case 9:return draw2d.SnapToHelper.NSEW;default:return draw2d.SnapToHelper.EAST}},createShapeElement:function(){var e=this._super();switch(this.type){case 1:e.attr({cursor:"nw-resize"});break;case 2:e.attr({cursor:"n-resize"});break;case 3:e.attr({cursor:"ne-resize"});break;case 4:e.attr({cursor:"e-resize"});break;case 5:e.attr({cursor:"se-resize"});break;case 6:e.attr({cursor:"s-resize"});break;case 7:e.attr({cursor:"sw-resize"});break;case 8:e.attr({cursor:"w-resize"})}return e},onDragStart:function(){return!!this.isDraggable()&&(this.ox=this.getAbsoluteX(),this.oy=this.getAbsoluteY(),this.commandMove=this.owner.createCommand(new draw2d.command.CommandType(draw2d.command.CommandType.MOVE)),this.commandResize=this.owner.createCommand(new draw2d.command.CommandType(draw2d.command.CommandType.RESIZE)),!0)},onDrag:function(e,t){if(this.isDraggable()!==!1){var s=this.getAbsoluteX(),i=this.getAbsoluteY();this._super(e,t);var n=this.getAbsoluteX()-s,a=this.getAbsoluteY()-i,r=this.owner,o=r.getAbsoluteX(),d=r.getAbsoluteY(),h=r.getWidth(),c=r.getHeight();switch(this.type){case 1:r.setDimension(h-n,c-a),r.setPosition(o+(h-r.getWidth()),d+(c-r.getHeight()));break;case 2:r.setDimension(h,c-a),r.setPosition(o,d+(c-r.getHeight()));break;case 3:r.setDimension(h+n,c-a),r.setPosition(o,d+(c-r.getHeight()));break;case 4:r.setDimension(h+n,c);break;case 5:r.setDimension(h+n,c+a);break;case 6:r.setDimension(h,c+a);break;case 7:r.setDimension(h-n,c+a),r.setPosition(o+(h-r.getWidth()),d);break;case 8:r.setDimension(h-n,c),r.setPosition(o+(h-r.getWidth()),d)}}},onDragEnd:function(){this.isDraggable()&&(null!==this.commandMove&&(this.commandMove.setPosition(this.owner.getX(),this.owner.getY()),this.canvas.getCommandStack().execute(this.commandMove),this.commandMove=null),null!==this.commandResize&&(this.commandResize.setDimension(this.owner.getWidth(),this.owner.getHeight()),this.canvas.getCommandStack().execute(this.commandResize),this.commandResize=null),this.canvas.hideSnapToHelperLines())},setPosition:function(e,t){e instanceof draw2d.geo.Point?(this.x=e.x,this.y=e.y):(this.x=e,this.y=t),this.repaint()},setDimension:function(e,t){"undefined"!=typeof t?this._super(e,t):draw2d.isTouchDevice?this._super(15,15):this._super(8,8);var s=this.getWidth(),i=s/2;switch(this.type){case 1:this.setSnapToGridAnchor(new draw2d.geo.Point(s,s));break;case 2:this.setSnapToGridAnchor(new draw2d.geo.Point(i,s));break;case 3:this.setSnapToGridAnchor(new draw2d.geo.Point(0,s));break;case 4:this.setSnapToGridAnchor(new draw2d.geo.Point(0,i));break;case 5:this.setSnapToGridAnchor(new draw2d.geo.Point(0,0));break;case 6:this.setSnapToGridAnchor(new draw2d.geo.Point(i,0));break;case 7:this.setSnapToGridAnchor(new draw2d.geo.Point(s,0));break;case 8:this.setSnapToGridAnchor(new draw2d.geo.Point(s,i));break;case 9:this.setSnapToGridAnchor(new draw2d.geo.Point(i,i))}},show:function(e){this.setCanvas(e),this.canvas.resizeHandles.add(this),this.shape.toFront()},hide:function(){null!==this.shape&&(this.canvas.resizeHandles.remove(this),this.setCanvas(null))},repaint:function(e){this.repaintBlocked!==!0&&null!==this.shape&&("undefined"==typeof e&&(e={}),this.getAlpha()<.9?e.fill="#e6e6e8":e.fill="90-#b8c8ec-#e6e6e8",this._super(e))},supportsSnapToHelper:function(){return!0},onKeyDown:function(e,t){this.canvas.onKeyDown(e,t)},fireMoveEvent:function(){}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/LineResizeHandle.js' */
(function ($) {draw2d.shape.basic.LineResizeHandle=draw2d.shape.basic.Circle.extend({NAME:"draw2d.shape.basic.LineResizeHandle",init:function(t){this._super(),this.owner=t,this.isResizeHandle=!0,draw2d.isTouchDevice?this.setDimension(14,14):this.setDimension(7,7),this.setBackgroundColor("#d04437"),this.setColor("#d04437"),this.setStroke(1),this.setSelectable(!1),this.currentTarget=null},select:function(t){},unselect:function(){},getRelatedPort:function(){return null},getOppositePort:function(){return null},getOppositePortTo:function(t){return _.without([this.owner.getSource(),this.owner.getTarget()],t)[0]},repaint:function(t){this.repaintBlocked!==!0&&null!==this.shape&&("undefined"==typeof t&&(t={}),"fill"in t||(this.getAlpha()<.9?t.fill="#d04437":t.fill="r(.4,.3)#d04437:40-#d04437:60-#d04437"),this._super(t))},onDragStart:function(){return this.ox=this.x,this.oy=this.y,this.command=this.getCanvas().getCurrentSelection().createCommand(new draw2d.command.CommandType(draw2d.command.CommandType.MOVE_BASEPOINT)),!0},onDrag:function(t,e){this.setPosition(this.ox+t,this.oy+e);var n=this.getRelatedPort(),i=this.getBoundingBox().getCenter(),r=null!==n?this._getDropTarget(i.x,i.y,n):null;return r!==this.currentTarget&&r!==this.getOppositePortTo(n)?(null!==this.currentTarget&&(this.currentTarget.onDragLeave(n),this.currentTarget.setGlow(!1)),null!==r?(this.currentTarget=r.onDragEnter(n),null!==this.currentTarget&&this.currentTarget.setGlow(!0)):this.currentTarget=n):null!==this.currentTarget&&this.currentTarget.setGlow(!0),!0},_getDropTarget:function(t,e,n){return n.getDropTarget(t,e)},onDragEnd:function(){if(!this.isDraggable())return!1;var t=this.getRelatedPort();return null!==t&&null!==this.currentTarget&&(this.onDrop(this.currentTarget),this.currentTarget.onDragLeave(t),this.currentTarget.setGlow(!1),this.currentTarget=null),this.getCanvas().getCurrentSelection()instanceof draw2d.Connection?null!==this.command&&this.command.cancel():null!==this.command&&this.getCanvas().getCommandStack().execute(this.command),this.command=null,this.getCanvas().hideSnapToHelperLines(),!0},supportsSnapToHelper:function(){return!(this.getCanvas().getCurrentSelection()instanceof draw2d.Connection)},show:function(t,e,n){this.setCanvas(t),this.setPosition(e,n),this.shape.toFront(),this.canvas.resizeHandles.add(this)},hide:function(){null!==this.shape&&(this.canvas.resizeHandles.remove(this),this.setCanvas(null))},onKeyDown:function(t,e){this.canvas.onKeyDown(t,e)},fireMoveEvent:function(){}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/LineStartResizeHandle.js' */
(function ($) {draw2d.shape.basic.LineStartResizeHandle=draw2d.shape.basic.LineResizeHandle.extend({NAME:"draw2d.shape.basic.LineStartResizeHandle",init:function(t){this._super(t)},getRelatedPort:function(){return this.owner instanceof draw2d.Connection?this.owner.getSource():null},getOppositePort:function(){return this.owner instanceof draw2d.Connection?this.owner.getTarget():null},onDrag:function(t,e){var n=this.getX(),i=this.getY();this._super(t,e);var s=n-this.getX(),o=i-this.getY(),r=this.owner.getStartPoint();return this.owner.setStartPoint(r.x-s,r.y-o),this.owner.isMoving=!0,!0},onDrop:function(t){this.owner.isMoving=!1,this.owner instanceof draw2d.Connection&&null!==this.command&&(this.command.setNewPorts(t,this.owner.getTarget()),this.getCanvas().getCommandStack().execute(this.command)),this.command=null}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/LineEndResizeHandle.js' */
(function ($) {draw2d.shape.basic.LineEndResizeHandle=draw2d.shape.basic.LineResizeHandle.extend({NAME:"draw2d.shape.basic.LineEndResizeHandle",init:function(n){this._super(n)},getRelatedPort:function(){return this.owner instanceof draw2d.Connection?this.owner.getTarget():null},getOppositePort:function(){return this.owner instanceof draw2d.Connection?this.owner.getSource():null},onDrag:function(n,e){var t=this.getX(),i=this.getY();this._super(n,e);var s=t-this.getX(),o=i-this.getY(),r=this.owner.getEndPoint();return this.owner.setEndPoint(r.x-s,r.y-o),this.owner.isMoving=!0,this.detachMoveListener(this.owner),!0},onDrop:function(n){this.owner.isMoving=!1,this.owner instanceof draw2d.Connection&&null!==this.command&&(this.command.setNewPorts(this.owner.getSource(),n),this.getCanvas().getCommandStack().execute(this.command)),this.command=null}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/Port.js' */
(function ($) {draw2d.Port=draw2d.shape.basic.Circle.extend({NAME:"draw2d.Port",DEFAULT_BORDER_COLOR:new draw2d.util.Color("#1B1B1B"),init:function(t){this.locator=null,this.lighterBgColor=null,this._super(),draw2d.isTouchDevice?this.setDimension(25,25):this.setDimension(10,10),this.ox=this.x,this.oy=this.y,this.coronaWidth=5,this.corona=null,this.currentTargetPort=null,this.currentTarget=null,this.setBackgroundColor("#4f6870"),this.setStroke(1),this.setColor(this.DEFAULT_BORDER_COLOR),this.setSelectable(!1),"undefined"==typeof t?this.name=null:this.name=t,this.connectionAnchor=new draw2d.layout.anchor.ConnectionAnchor(this),this.value=null,this.maxFanOut=Number.MAX_VALUE,this.setCanSnapToHelper(!1),this.installEditPolicy(new draw2d.policy.port.IntrusivePortsFeedbackPolicy)},setMaxFanOut:function(t){return this.maxFanOut=Math.max(1,t),this},getMaxFanOut:function(){return this.maxFanOut},setConnectionAnchor:function(t){return"undefined"!=typeof t&&null!==t||(t=new draw2d.layout.anchor.ConnectionAnchor),this.connectionAnchor=t,this.connectionAnchor.setOwner(this),this},getConnectionAnchorLocation:function(t){return this.connectionAnchor.getLocation(t)},getConnectionAnchorReferencePoint:function(){return this.connectionAnchor.getReferencePoint()},getConnectionDirection:function(t,n){return this.getParent().getBoundingBox().getDirection(this.getAbsolutePosition())},setLocator:function(t){return this.locator=t,this},setBackgroundColor:function(t){return this._super(t),this.lighterBgColor=this.bgColor.lighter(.3).hash(),this},setValue:function(t){return this.value=t,null!==this.getParent()&&this.getParent().onPortValueChanged(this),this},getValue:function(){return this.value},repaint:function(t){this.repaintBlocked!==!0&&null!==this.shape&&("undefined"==typeof t&&(t={}),t.cx=this.getAbsoluteX(),t.cy=this.getAbsoluteY(),t.rx=this.width/2,t.ry=t.rx,t.cursor="move",this.getAlpha()<.9?t.fill=this.bgColor.hash():t.fill=["90",this.bgColor.hash(),this.lighterBgColor].join("-"),this._super(t))},onMouseEnter:function(){this.setStroke(2)},onMouseLeave:function(){this.setStroke(1)},getConnections:function(){for(var t=new draw2d.util.ArrayList,n=this.moveListener.getSize(),e=0;e<n;e++){var i=this.moveListener.get(e);i instanceof draw2d.Connection&&t.add(i)}return t},setParent:function(t){this._super(t),null!==this.parent&&this.parent.detachMoveListener(this),null!==this.parent&&this.parent.attachMoveListener(this)},getCoronaWidth:function(){return this.coronaWidth},setCoronaWidth:function(t){this.coronaWidth=t},onDragStart:function(){return!(this.getConnections().getSize()>=this.maxFanOut)&&(this.getShapeElement().toFront(),this.ox=this.x,this.oy=this.y,this.editPolicy.each($.proxy(function(t,n){n instanceof draw2d.policy.figure.DragDropEditPolicy&&n.onDragStart(this.canvas,this)},this)),!0)},onDrag:function(t,n){this.isInDragDrop=!0,this._super(t,n);var e=this.getDropTarget(this.getAbsoluteX(),this.getAbsoluteY(),this);e!==this.currentTarget&&(null!==this.currentTarget&&(this.currentTarget.onDragLeave(this),this.editPolicy.each($.proxy(function(t,n){n instanceof draw2d.policy.port.PortFeedbackPolicy&&n.onHoverLeave(this.canvas,this,this.currentTarget)},this))),null!==e?(this.currentTarget=e.onDragEnter(this),null!==this.currentTarget&&(this.currentTargetPort=e,this.editPolicy.each($.proxy(function(t,n){n instanceof draw2d.policy.port.PortFeedbackPolicy&&n.onHoverEnter(this.canvas,this,this.currentTarget)},this)))):this.currentTarget=null)},onDragEnd:function(){this.setAlpha(1),this.setPosition(this.ox,this.oy),this.isInDragDrop=!1,this.currentTarget&&this.editPolicy.each($.proxy(function(t,n){n instanceof draw2d.policy.port.PortFeedbackPolicy&&n.onHoverLeave(this.canvas,this,this.currentTarget)},this)),this.editPolicy.each($.proxy(function(t,n){n instanceof draw2d.policy.figure.DragDropEditPolicy&&n.onDragEnd(this.canvas,this)},this)),this.currentTarget=null},onDragEnter:function(t){if(!(t instanceof draw2d.Port))return null;if(this.getConnections().getSize()>=this.maxFanOut)return null;var n=new draw2d.command.CommandType(draw2d.command.CommandType.CONNECT);n.canvas=this.parent.getCanvas(),n.source=t,n.target=this;var e=this.createCommand(n);return null===e?null:this},onDragLeave:function(t){!(t instanceof draw2d.Port)},onDrop:function(t){if(t instanceof draw2d.Port){var n=new draw2d.command.CommandType(draw2d.command.CommandType.CONNECT);n.canvas=this.parent.getCanvas(),n.source=t,n.target=this;var e=this.createCommand(n);null!==e&&this.parent.getCanvas().getCommandStack().execute(e),this.setGlow(!1)}},onConnect:function(t){},onDisconnect:function(t){},onOtherFigureIsMoving:function(t){this.repaint(),this.fireMoveEvent()},getName:function(){return this.name},setName:function(t){this.name=t},hitTest:function(t,n){var e=this.getAbsoluteX()-2*this.coronaWidth-this.getWidth()/2,i=this.getAbsoluteY()-2*this.coronaWidth-this.getHeight()/2,o=e+this.width+4*this.coronaWidth,r=i+this.height+4*this.coronaWidth;return t>=e&&t<=o&&n>=i&&n<=r},setGlow:function(t){return t===!0&&null===this.corona?(this.corona=new draw2d.Corona,this.corona.setDimension(this.getWidth()+2*this.getCoronaWidth(),this.getWidth()+2*this.getCoronaWidth()),this.corona.setPosition(this.getAbsoluteX()-this.getCoronaWidth()-this.getWidth()/2,this.getAbsoluteY()-this.getCoronaWidth()-this.getHeight()/2),this.corona.setCanvas(this.getCanvas()),this.corona.getShapeElement(),this.corona.repaint()):t===!1&&null!==this.corona&&(this.corona.setCanvas(null),this.parent.getCanvas().removeFigure(this.corona),this.corona=null),this},createCommand:function(t){return t.getPolicy()===draw2d.command.CommandType.MOVE?this.isDraggable()?new draw2d.command.CommandMovePort(this):null:t.getPolicy()===draw2d.command.CommandType.CONNECT?t.source.parent.id===t.target.parent.id?null:new draw2d.command.CommandConnect(t.canvas,t.source,t.target):null},fireMoveEvent:function(){this.isInDragDrop!==!0&&this._super()},getDropTarget:function(t,n,e){for(var i=0;i<this.targets.getSize();i++){var o=this.targets.get(i);if(o!==e&&o.hitTest(t,n)===!0)return o}return null},getDropTargets:function(){return this.targets.clone().grep($.proxy(function(t){return t!==this},this))}}),draw2d.Corona=draw2d.shape.basic.Circle.extend({init:function(){this._super(),this.setAlpha(.3),this.setBackgroundColor(new draw2d.util.Color(178,225,255)),this.setColor(new draw2d.util.Color(102,182,252))},setAlpha:function(t){return this._super(Math.min(.3,t)),this.setDeleteable(!1),this.setDraggable(!1),this.setResizeable(!1),this.setSelectable(!1),this}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/InputPort.js' */
(function ($) {draw2d.InputPort=draw2d.Port.extend({NAME:"draw2d.InputPort",init:function(t){this._super(t),this.locator=new draw2d.layout.locator.InputPortLocator},onDragEnter:function(t){return t instanceof draw2d.OutputPort?this._super(t):t instanceof draw2d.HybridPort?this._super(t):null},onDragLeave:function(t){t instanceof draw2d.OutputPort?this._super(t):t instanceof draw2d.HybridPort&&this._super(t)},createCommand:function(t){return t.getPolicy()===draw2d.command.CommandType.CONNECT?t.source.getParent().getId()===t.target.getParent().getId()?null:t.source instanceof draw2d.OutputPort?new draw2d.command.CommandConnect(t.canvas,t.source,t.target):t.source instanceof draw2d.HybridPort?new draw2d.command.CommandConnect(t.canvas,t.source,t.target):null:this._super(t)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/OutputPort.js' */
(function ($) {draw2d.OutputPort=draw2d.Port.extend({NAME:"draw2d.OutputPort",init:function(t){this._super(t),this.locator=new draw2d.layout.locator.OutputPortLocator},onDragEnter:function(t){return t instanceof draw2d.InputPort?this._super(t):t instanceof draw2d.HybridPort?this._super(t):null},onDragLeave:function(t){t instanceof draw2d.InputPort?this._super(t):t instanceof draw2d.HybridPort&&this._super(t)},createCommand:function(t){return t.getPolicy()===draw2d.command.CommandType.CONNECT?t.source.getParent().getId()===t.target.getParent().getId()?null:t.source instanceof draw2d.InputPort?new draw2d.command.CommandConnect(t.canvas,t.target,t.source):t.source instanceof draw2d.HybridPort?new draw2d.command.CommandConnect(t.canvas,t.target,t.source):null:this._super(t)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/HybridPort.js' */
(function ($) {draw2d.HybridPort=draw2d.Port.extend({NAME:"draw2d.HybridPort",init:function(n){this._super(n),this.locator=new draw2d.layout.locator.InputPortLocator},onDragEnter:function(n){return n instanceof draw2d.Port?this._super(n):null},onDragLeave:function(n){n instanceof draw2d.Port&&n instanceof draw2d.Port&&this._super(n)},createCommand:function(n){return n.getPolicy()===draw2d.command.CommandType.CONNECT?n.source instanceof draw2d.InputPort?new draw2d.command.CommandConnect(n.canvas,n.target,n.source):n.source instanceof draw2d.OutputPort?new draw2d.command.CommandConnect(n.canvas,n.source,n.target):n.source instanceof draw2d.HybridPort?new draw2d.command.CommandConnect(n.canvas,n.target,n.source):null:this._super(n)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/anchor/ConnectionAnchor.js' */
(function ($) {draw2d.layout.anchor.ConnectionAnchor=Class.extend({NAME:"draw2d.layout.anchor.ConnectionAnchor",init:function(n){this.owner=n},getLocation:function(n){return this.getReferencePoint()},getOwner:function(){return this.owner},setOwner:function(n){if("undefined"==typeof n)throw"Missing parameter for 'owner' in ConnectionAnchor.setOwner";this.owner=n},getBox:function(){return this.getOwner().getAbsoluteBounds()},getReferencePoint:function(){return this.getOwner().getAbsolutePosition()}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/anchor/ChopboxConnectionAnchor.js' */
(function ($) {draw2d.layout.anchor.ChopboxConnectionAnchor=draw2d.layout.anchor.ConnectionAnchor.extend({NAME:"draw2d.layout.anchor.ChopboxConnectionAnchor",init:function(t){this._super(t)},getLocation:function(t){var n=new draw2d.geo.Rectangle(0,0);n.setBounds(this.getBox()),n.translate(-1,-1),n.resize(1,1);var e=n.getCenter();if(n.isEmpty()||t.x==e.x&&t.y==e.y)return e;var o=t.x-e.x,r=t.y-e.y,a=.5/Math.max(Math.abs(o)/n.w,Math.abs(r)/n.h);return o*=a,r*=a,e.translate(o,r),e},getBox:function(){return this.getOwner().getParent().getBoundingBox()},getReferencePoint:function(){return this.getBox().getCenter()}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/anchor/ShortesPathConnectionAnchor.js' */
(function ($) {draw2d.layout.anchor.ShortesPathConnectionAnchor=draw2d.layout.anchor.ConnectionAnchor.extend({NAME:"draw2d.layout.anchor.ShortesPathConnectionAnchor",init:function(e){this._super(e)},getLocation:function(e){var t=this.getOwner().getParent().getBoundingBox(),n=t.getCenter();if(this.getOwner().getParent()instanceof draw2d.shape.basic.Oval){var r=this.getOwner().getParent().intersectionWithLine(e,n);if(1==r.getSize())return r.get(0)}var o=t.determineOctant(new draw2d.geo.Rectangle(e.x,e.y,2,2));switch(o){case 0:return t.getTopLeft();case 1:return new draw2d.geo.Point(e.x,t.getTop());case 2:return t.getTopRight();case 3:return new draw2d.geo.Point(t.getRight(),e.y);case 4:return t.getBottomRight();case 5:return new draw2d.geo.Point(e.x,t.getBottom());case 6:return t.getBottomLeft();case 7:return new draw2d.geo.Point(t.getLeft(),e.y)}return t.getTopLeft()},getBox:function(){return this.getOwner().getParent().getBoundingBox()},getReferencePoint:function(){return this.getBox().getCenter()}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/layout/anchor/CenterEdgeConnectionAnchor.js' */
(function ($) {draw2d.layout.anchor.CenterEdgeConnectionAnchor=draw2d.layout.anchor.ConnectionAnchor.extend({NAME:"draw2d.layout.anchor.CenterEdgeConnectionAnchor",init:function(e){this._super(e)},getLocation:function(e){var n=this.getOwner().getParent().getBoundingBox(),t=n.getDirection(e),r=n.getCenter();switch(t){case 0:r.y=n.y;break;case 1:r.x=n.x+n.w;break;case 2:r.y=n.y+n.h;break;case 3:r.x=n.x}return r},getBox:function(){return this.getOwner().getParent().getBoundingBox()},getReferencePoint:function(){return this.getBox().getCenter()}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/arrow/CalligrapherArrowLeft.js' */
(function ($) {draw2d.shape.arrow.CalligrapherArrowLeft=draw2d.SVGFigure.extend({NAME:"draw2d.shape.arrow.CalligrapherArrowLeft",init:function(){this._super()},getSVG:function(){return'<svg width="230" height="60" xmlns="http://www.w3.org/2000/svg" version="1.1">  <path style="fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path3024" d="m 218.87943,27.464763 c -1.21088,-0.0563 -2.42064,-0.14616 -3.63262,-0.16893 c -5.82495,-0.10948 -18.61676,-0.0226 -22.97385,0.0122 c -7.12848,0.057 -14.25673,0.14021 -21.38495,0.22333 c -9.03765,0.10539 -18.07511,0.22813 -27.11266,0.3422 c -10.2269,0.11878 -20.4538,0.23756 -30.6807,0.35634 c -35.488759,0.4089 -70.975849,0.82793 -106.4669238,0.95195 c 0,0 7.9718628,-5.70244 7.9718628,-5.70244 l 0,0 c 6.374241,0.28694 12.745594,0.64561 19.122722,0.86083 c 28.09499,0.94816 56.21338,0.92473 84.315959,0.32205 c 10.51273,-0.32805 21.0288,-0.56402 31.53819,-0.98412 c 27.47361,-1.09824 54.91405,-2.91665 82.28177,-5.53697 c 0,0 -12.9788,9.32351 -12.9788,9.32351 z" inkscape:connector-curvature="0" />  <path style="fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path3026" d="m 100.75066,1.6309831 c -7.165239,3.9571 -14.284929,7.47866 -22.036659,10.2707299 c -5.00195,1.80163 -10.10374,3.31886 -15.2402,4.79424 c -8.25878,2.37815 -16.55626,4.65805 -24.9012,6.79479 c -2.89107,0.71593 -5.74687,1.56407 -8.66266,2.20424 c -3.211679,0.70512 -6.49468,1.17333 -9.752959,1.6747 c -5.447101,0.92112 -10.9044008,1.81762 -16.3983488,2.50082 c -1.608931,0.0814 -0.850754,0.10697 -2.275834,-0.0365 C 20.004071,21.041553 19.256899,21.517873 32.515691,19.216243 c 6.21537,-1.05913 12.34875,-2.37668 18.3945,-4.03234 c 8.12719,-2.02803 16.23765,-4.1157 24.26421,-6.4321199 c 5.23574,-1.55053 10.41682,-3.15473 15.46857,-5.12875 c 1.38953,-0.54295 2.7579,-1.12682 4.12253,-1.71603 c 0.98421,-0.42496 3.86537,-1.81801999 2.92296,-1.32600999 C 93.642191,2.6934931 89.529511,4.7073031 85.450031,6.7704531 l 15.300629,-5.1394 z" inkscape:connector-curvature="0" sodipodi:nodetypes="csccsccccccsssccc" />  <path style="fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path3028" d="m 80.764281,58.068863 c -2.45498,-3.50762 -6.58178,-6.10525 -10.40324,-8.66732 c -4.30614,-2.72676 -7.93958,-6.28283 -12.6021,-8.28702 c -7.39912,-4.50257 -11.70055,-7.85592 -20.85866,-9.23429 c -4.9257,-0.85706 -17.294247,-1.32043 -22.226462,-2.15427 c -3.445882,-0.42869 -6.2035918,0.70541 -9.6845138,0.57715 c -1.496337,-0.0586 -2.99355,-0.0965 -4.491229,-0.12472 l 13.9525278,-6.24562 l 3.25,-1.17153 c 1.441459,0.0813 -1.116338,0.15309 0.325505,0.23016 c 3.574557,0.17902 7.211864,0.0695 10.712655,0.73822 c 4.723107,1.08097 9.443947,2.1624 14.234177,3.05317 c 2.76739,0.64203 3.92627,0.87082 6.64127,1.66289 c 4.42146,1.28993 8.60075,3.01513 12.86503,4.58129 c 1.90199,0.73446 5.05193,1.93181 6.89302,2.7216 c 4.92005,2.11061 9.5916,4.57045 13.9716,7.31023 c 4.16708,2.62011 8.48023,5.20033 11.72012,8.56863 z" inkscape:connector-curvature="0" sodipodi:nodetypes="ccccccccccccscsccc" /></svg>'},repaint:function(c){this.repaintBlocked!==!0&&null!==this.shape&&(null!==this.svgNodes&&this.svgNodes.attr({fill:this.color.hash()}),this._super(c))}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/arrow/CalligrapherArrowDownLeft.js' */
(function ($) {draw2d.shape.arrow.CalligrapherArrowDownLeft=draw2d.SVGFigure.extend({NAME:"draw2d.shape.arrow.CalligrapherArrowDownLeft",init:function(){this._super()},getSVG:function(){return'<svg width="180" height="300" xmlns="http://www.w3.org/2000/svg" version="1.1">     <path style="fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path3084" d="m 159.63578,17.846597 c 0.43137,9.44641 -0.0636,18.88035 -0.8284,28.30165 c -1.73211,18.38336 -4.05381,36.71698 -6.08253,55.075313 c -1.61738,13.7075 -3.03402,27.43467 -3.97611,41.19113 c -1.09101,11.16584 -1.31019,22.36559 -1.28541,33.56466 c -0.1328,4.82188 0.3218,9.6468 0.14332,14.46812 c -0.0888,2.39977 -0.28315,3.73625 -0.55012,6.12095 c -0.85848,4.73147 -2.27416,9.40019 -4.7769,13.68272 c -1.47003,2.51544 -3.78493,5.6647 -5.47739,8.05048 c -5.02888,6.66256 -11.08555,12.65652 -18.10552,17.75963 c -4.23302,3.07716 -7.74942,5.12065 -12.22081,7.86298 c -13.253319,6.72606 -25.889792,15.11686 -40.84124,18.60576 c -3.016829,0.7039 -4.431417,0.8157 -7.450859,1.2076 c -6.983246,0.5774 -14.009174,0.3375 -21.010676,0.2509 c -3.278795,-0.033 -6.55749,0.01 -9.835897,0.045 c 0,0 20.838833,-13.2364 20.838833,-13.2364 l 0,0 c 3.147056,0.093 6.294483,0.1852 9.443646,0.2007 c 6.966697,0.011 13.971433,0.1301 20.897176,-0.6344 c 3.732439,-0.5577 7.321215,-1.2431 10.881203,-2.4145 c 1.517208,-0.4992 5.830867,-2.43339 4.487902,-1.6386 c -6.098183,3.6088 -25.104875,12.8748 -9.52514,5.223 c 4.40875,-2.5927 8.262057,-4.7459 12.425175,-7.65986 c 6.839117,-4.78709 12.633657,-10.50427 17.500607,-16.86761 c 2.53518,-3.56692 5.24684,-7.12748 7.07617,-11.03446 c 1.42357,-3.0404 2.21532,-6.28727 2.91146,-9.50152 c 0.91919,-6.88822 1.03991,-13.81392 1.25118,-20.74151 c 0.47683,-11.27871 0.96259,-22.55877 1.61689,-33.83062 c 1.21127,-14.03392 3.64191,-27.94339 5.46543,-41.92167 c 2.26899,-18.186603 4.6835,-36.384373 5.4487,-54.679643 c 0.0788,-2.46092 0.23808,-4.92087 0.23618,-7.38276 c -0.005,-6.45916 -0.62194,-13.00218 -2.13821,-19.32664 c 0,0 23.48134,-10.73998 23.48134,-10.73998 z" inkscape:connector-curvature="0" />     <path style="fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path3086" d="m 41.271518,252.40239 c 2.465518,-0.7264 4.879503,-1.7726 7.145328,-2.9859 c 0.955597,-0.5117 3.736822,-2.1986 2.791991,-1.6673 c -5.218817,2.9348 -10.409826,5.9187 -15.61474,8.878 c 5.366557,-3.4898 10.227818,-7.6685 14.119927,-12.75576 c 3.507157,-5.09382 4.097613,-11.17122 4.301158,-17.17644 c 0.02635,-3.95844 -0.31227,-7.90612 -0.635377,-11.84752 c 0,0 19.920693,-10.3059 19.920693,-10.3059 l 0,0 c 0.171761,4.05015 0.409899,8.09777 0.50079,12.15101 c -0.185739,6.23619 -0.347804,12.66862 -3.492579,18.24747 c -0.503375,0.75197 -0.961922,1.53596 -1.510126,2.25591 c -3.478528,4.56826 -8.226837,8.04586 -12.757403,11.47443 c -7.345206,4.3297 -14.671333,8.692 -22.035619,12.9891 c -3.551305,2.0723 -7.368692,3.8726 -11.394645,4.7773 c 0,0 18.660602,-14.0344 18.660602,-14.0344 z" inkscape:connector-curvature="0" />     <path style="fill:#000000;fill-opacity:1;fill-rule:nonzero;stroke:none" id="path3088" d="m 37.815923,255.49919 c 3.41111,0.1581 6.814569,0.2213 10.182693,0.8184 c 6.92998,2.6928 13.533527,6.2357 20.043462,9.8162 c 3.912139,2.1362 7.91195,4.4644 10.690321,8.0298 c 1.039962,1.2802 1.510411,2.7604 1.893523,4.3313 c 0,0 -20.370847,10.9259 -20.370847,10.9259 l 0,0 c -0.225419,-1.2711 -0.55067,-2.4558 -1.329618,-3.5184 c -2.332229,-3.3633 -5.869056,-5.6279 -9.247191,-7.8233 c -6.335066,-3.7106 -12.98611,-7.1834 -20.232784,-8.6836 c -3.497247,-0.3814 -7.011372,-0.4307 -10.521829,-0.1703 c 0,0 18.89227,-13.726 18.89227,-13.726 z" inkscape:connector-curvature="0" /></svg>'},repaint:function(c){this.repaintBlocked!==!0&&null!==this.shape&&(null!==this.svgNodes&&this.svgNodes.attr({fill:this.color.hash()}),this._super(c))}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/node/Start.js' */
(function ($) {draw2d.shape.node.Start=draw2d.shape.basic.Rectangle.extend({NAME:"draw2d.shape.node.Start",DEFAULT_COLOR:new draw2d.util.Color("#4D90FE"),init:function(){this._super(),this.createPort("output"),this.setDimension(50,50),this.setBackgroundColor(this.DEFAULT_COLOR),this.setColor(this.DEFAULT_COLOR.darker())}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/node/End.js' */
(function ($) {draw2d.shape.node.End=draw2d.shape.basic.Rectangle.extend({NAME:"draw2d.shape.node.End",DEFAULT_COLOR:new draw2d.util.Color("#4D90FE"),init:function(){this._super(),this.createPort("input"),this.setDimension(50,50),this.setBackgroundColor(this.DEFAULT_COLOR),this.setColor(this.DEFAULT_COLOR.darker())}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/node/Between.js' */
(function ($) {draw2d.shape.node.Between=draw2d.shape.basic.Rectangle.extend({NAME:"draw2d.shape.node.Between",DEFAULT_COLOR:new draw2d.util.Color("#4D90FE"),init:function(){this._super(),this.setDimension(50,50),this.setBackgroundColor(this.DEFAULT_COLOR),this.setColor(this.DEFAULT_COLOR.darker()),this.createPort("output"),this.createPort("input")}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/note/PostIt.js' */
(function ($) {draw2d.shape.note.PostIt=draw2d.shape.basic.Label.extend({NAME:"draw2d.shape.note.PostIt",init:function(t){this._super(t),this.setStroke(1),this.setBackgroundColor("#5b5b5b"),this.setColor("#FFFFFF"),this.setFontColor("#ffffff"),this.setFontSize(14),this.setPadding(5),this.setRadius(5)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/widget/Widget.js' */
(function ($) {draw2d.shape.widget.Widget=draw2d.SetFigure.extend({init:function(t,i){this._super(t,i)},getWidth:function(){return this.width},getHeight:function(){return this.height}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/widget/Slider.js' */
(function ($) {draw2d.shape.widget.Slider=draw2d.shape.widget.Widget.extend({NAME:"draw2d.shape.widget.Slider",DEFAULT_COLOR_THUMB:new draw2d.util.Color("#bddf69"),DEFAULT_COLOR_BG:new draw2d.util.Color("#d3d3d3"),init:function(t,i){"undefined"==typeof t&&(t=120,i=15),this.currentValue=0,this.slideBoundingBox=new draw2d.geo.Rectangle(0,0,10,20),this._super(t,i),this.setBackgroundColor(this.DEFAULT_COLOR_BG),this.setColor(this.DEFAULT_COLOR_THUMB),this.setStroke(1),this.setRadius(4),this.setResizeable(!0),this.setMinHeight(10),this.setMinWidth(80)},createSet:function(){var t=this.canvas.paper.set(),i=this.canvas.paper.rect(5,5,10,20);return i.node.style.cursor="col-resize",t.push(i),t},setDimension:function(t,i){this._super(t,i),this.slideBoundingBox.setBoundary(0,0,this.getWidth()-10,this.getHeight()),this.slideBoundingBox.setHeight(this.getHeight()+1),this.repaint()},onValueChange:function(t){},onDragStart:function(t,i){return this.slideBoundingBox.hitTest(t,i)?(this.origX=this.slideBoundingBox.getX(),this.origY=this.slideBoundingBox.getY(),!1):this._super(t,i)},onPanning:function(t,i){this.slideBoundingBox.setPosition(this.origX+t,this.origY+i),this.setValue(100/(this.slideBoundingBox.bw-this.slideBoundingBox.getWidth())*this.slideBoundingBox.getX())},setValue:function(t){this.currentValue=Math.min(Math.max(0,0|t),100),this.repaint(),this.onValueChange(this.currentValue)},repaint:function(t){if(this.repaintBlocked!==!0&&null!==this.shape){"undefined"==typeof t&&(t={});var i=(this.slideBoundingBox.bw-this.slideBoundingBox.getWidth())/100*this.currentValue|0;if(this.slideBoundingBox.setX(i),null!==this.svgNodes){var e=this.slideBoundingBox.toJSON();e.y=e.y-5,e.height=e.height+10,e.fill=this.getColor().hash(),e.stroke=this.getColor().darker(.2).hash(),e.r=4,this.svgNodes.attr(e)}t.fill="90-"+this.bgColor.hash()+":5-"+this.bgColor.lighter(.3).hash()+":95",t.stroke=this.bgColor.darker(.1).hash(),this._super(t)}},applyTransformation:function(){this.svgNodes.transform("T"+this.getAbsoluteX()+","+this.getAbsoluteY())}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/diagram/Diagram.js' */
(function ($) {draw2d.shape.diagram.Diagram=draw2d.SetFigure.extend({init:function(t,s){this.data=[],this.padding=5,this.cache={},this._super(t,s),this.setBackgroundColor("#8dabf2"),this.setStroke(1),this.setColor("#f0f0f0"),this.setRadius(2),this.setResizeable(!0)},setData:function(t){this.data=t,this.cache={},null!==this.svgNodes&&(this.svgNodes.remove(),this.svgNodes=this.createSet()),this.repaint()},setDimension:function(t,s){this.cache={},this._super(t,s)},getWidth:function(){return this.width},getHeight:function(){return this.height},repaint:function(t){this.repaintBlocked!==!0&&null!=this.shape&&("undefined"==typeof t&&(t={}),"undefined"==typeof t.fill&&(t.fill="none"),this._super(t))},applyTransformation:function(){this.isResizeable()===!0?this.svgNodes.transform("S"+this.scaleX+","+this.scaleY+","+this.getAbsoluteX()+","+this.getAbsoluteY()+"t"+this.getAbsoluteX()+","+this.getAbsoluteY()):this.svgNodes.transform("T"+this.getAbsoluteX()+","+this.getAbsoluteY())}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/diagram/Pie.js' */
(function ($) {draw2d.shape.diagram.Pie=draw2d.shape.diagram.Diagram.extend({COLORS:["#00A8F0","#b9dd69","#f3546a","#4DA74D","#9440ED"],TWO_PI:2*Math.PI,init:function(t){this._super(t,t),this.setStroke(0)},setData:function(t){this.sum=0,$.each(t,$.proxy(function(t,s){this.sum+=s},this));var s=1/this.sum;$.each(t,$.proxy(function(a,i){t[a]=s*i},this)),this._super(t)},createSet:function(){for(var t=this.getWidth()/2,s=this.data.length,a=this.canvas.paper.set(),i=0,e=0;e<s;e++){var h=this.TWO_PI*this.data[e],r=this.COLORS[e%s],n=this.drawSegment(t,h,i,.1);n.attr({stroke:this.color.hash(),fill:r}),a.push(n),i+=h}return a},setDimension:function(t,s){t>s?this._super(t,t):this._super(s,s),null!==this.svgNodes&&(this.svgNodes.remove(),this.svgNodes=this.createSet()),this.repaint()},polarPath:function(t,s,a){var i,e;return i=t*Math.cos(s+a)+t,e=t*Math.sin(s+a)+t,"L "+i+" "+e+" "},drawSegment:function(t,s,a,i){for(var e="M "+t+" "+t,h=0;h<s;h+=i)e+=this.polarPath(t,h,a);return e+=this.polarPath(t,s,a),e+="L "+t+" "+t,this.getCanvas().paper.path(e)},applyTransformation:function(){this.svgNodes.transform("T"+this.getAbsoluteX()+","+this.getAbsoluteY())}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/diagram/Sparkline.js' */
(function ($) {draw2d.shape.diagram.Sparkline=draw2d.shape.diagram.Diagram.extend({init:function(t,i){this.min=0,this.max=10,"undefined"==typeof t&&(t=180,i=50),this._super(t,i)},setData:function(t){this.min=Math.min.apply(Math,t),this.max=Math.max.apply(Math,t),this.max==this.min&&(this.max=this.min+1),this._super(t)},createSet:function(){return this.canvas.paper.path("M0 0 l0 0")},repaint:function(t){if(this.repaintBlocked!==!0&&null!==this.shape){"undefined"==typeof t&&(t={}),t.fill="90-#000:5-#4d4d4d:95";var i=this.padding,a=this.getWidth()-2*+this.padding,h=this.getHeight()-2*+this.padding,n=this.data.length,s=this.min,e=this.max,p=function(t,p){var r=1;return n>1&&(r=a/(n-1)),{y:-((t-s)/(e-s)*h)+h+i,x:i+p*r}};if(null!==this.svgNodes&&"undefined"==typeof this.cache.pathString){var r=null;$.each(this.data,$.proxy(function(t,i){var a=p(i,t);null===r?this.cache.pathString=["M",a.x,a.y].join(" "):this.cache.pathString=[this.cache.pathString,"L",a.x,a.y].join(" "),r=a},this)),this.svgNodes.attr({path:this.cache.pathString,stroke:"#f0f0f0"})}this._super(t)}}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/analog/OpAmp.js' */
(function ($) {draw2d.shape.analog.OpAmp=draw2d.SVGFigure.extend({NAME:"draw2d.shape.analog.OpAmp",MyInputPortLocator:draw2d.layout.locator.PortLocator.extend({init:function(){this._super()},relocate:function(t,o){var e=o.getParent(),n=(8+18.5*t)*e.scaleY;this.applyConsiderRotation(o,1,n)}}),init:function(t,o){"undefined"==typeof t&&(t=50,o=50),this._super(t,o),this.inputLocator=new this.MyInputPortLocator,this.createPort("input",this.inputLocator),this.createPort("input",this.inputLocator),this.createPort("output"),this.setBackgroundColor("#f0f0ff")},getSVG:function(){return'<svg xmlns="http://www.w3.org/2000/svg" version="1.1"><path d="m8.2627,0l0,35.36035l31.23926,-17.76025l-31.23926,-17.60011l0,0l0,0.00001zm2.27832,27.36719l4.08105,0m-2.10449,-2.20703l0,4.27979m2.26367,-21.35938l-4.15918,0"  stroke="#1B1B1B" fill="none"/><line x1="0.53516"  y1="8"  x2="8.21191"  y2="8"  stroke="#010101"/><line x1="39.14941" y1="18" x2="45.81055" y2="18" stroke="#010101" /><line x1="0.53516"  y1="27" x2="8.21191"  y2="27" stroke="#010101" /></svg>'},repaint:function(t){this.repaintBlocked!==!0&&null!==this.shape&&("undefined"==typeof t&&(t={}),t.fill="none",null!=this.bgColor&&this.svgNodes[0].attr({fill:this.bgColor.hash()}),this._super(t))}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/analog/ResistorBridge.js' */
(function ($) {draw2d.shape.analog.ResistorBridge=draw2d.SVGFigure.extend({NAME:"draw2d.shape.analog.ResistorBridge",MyInputPortLocator:draw2d.layout.locator.PortLocator.extend({init:function(){this._super()},relocate:function(t,i){var e=i.getParent().getWidth(),o=i.getParent().getHeight();this.applyConsiderRotation(i,e/2+1,o*t)}}),MyOutputPortLocator:draw2d.layout.locator.PortLocator.extend({init:function(){this._super()},relocate:function(t,i){var e=i.getParent().getWidth(),o=i.getParent().getHeight();this.applyConsiderRotation(i,e*(t-2),o/2)}}),init:function(t,i){"undefined"==typeof t&&(t=50,i=50),this._super(t,i),this.inputLocator=new this.MyInputPortLocator,this.outputLocator=new this.MyOutputPortLocator,this.createPort("hybrid",this.inputLocator),this.createPort("hybrid",this.inputLocator),this.createPort("hybrid",this.outputLocator),this.createPort("hybrid",this.outputLocator)},getSVG:function(){return'<svg  xmlns="http://www.w3.org/2000/svg" version="1.1"><path fill="#010101" stroke="#010101" stroke-miterlimit="14.3" id="path12322" d="m47.62207,22.71094l0,0c0.73145,0.73242 0.71777,1.93359 -0.03027,2.68164c-0.74805,0.74951 -1.94922,0.76123 -2.68073,0.0293c-0.73138,-0.73242 -0.71967,-1.93211 0.03033,-2.68115c0.74707,-0.74803 1.94727,-0.76219 2.68066,-0.02979l0,0z"/><path fill="#010101" stroke="#010101" stroke-miterlimit="14.3" id="path12324" d="m25.84082,0.93115l0,0c0.73145,0.73096 0.71875,1.93359 -0.02832,2.68066c-0.75,0.74951 -1.94922,0.76123 -2.68164,0.0293c-0.73242,-0.73241 -0.71973,-1.93164 0.0293,-2.68065c0.74805,-0.74756 1.94922,-0.76172 2.68066,-0.0293l0,0l0,-0.00002z"/><path fill="#010101" stroke="#010101" stroke-miterlimit="14.3" id="path12326" d="m25.75098,44.58203l0,0c0.73145,0.73193 0.71875,1.93311 -0.02832,2.68115c-0.75,0.74902 -1.94922,0.76074 -2.68262,0.0293c-0.73145,-0.73193 -0.71973,-1.93262 0.03033,-2.68164c0.74707,-0.74756 1.94922,-0.76123 2.68066,-0.02879l0,0l-0.00006,-0.00002z"/><path fill="#010101" stroke="#010101" stroke-miterlimit="14.3" id="path12328" d="m3.9707,22.80127l0,0c0.73242,0.73193 0.71777,1.93359 -0.0293,2.68115c-0.74902,0.74951 -1.94922,0.76172 -2.68164,0.0293c-0.73145,-0.73242 -0.71973,-1.93164 0.03027,-2.68115c0.74707,-0.74707 1.94922,-0.76074 2.68066,-0.0293l0,0z"/><polyline fill="none" stroke="#010101" id="polyline12334" points="24.908203125,45.49267578125 31.71875,38.68310546875 31.2119140625,36.98876953125 34.892578125,37.95703125 33.953125,34.22265625 37.6650390625,35.18359375 36.6767578125,31.52490234375 40.3759765625,32.47314453125 39.873046875,30.52783203125 45.884765625,24.51708984375 " stroke-miterlimit="14.3"/><polyline fill="#010101" id="polyline12338" points="36.3408203125,23.98876953125 38.146484375,29.55810546875 33.630859375,29.55810546875 35.435546875,23.98779296875 "/><line fill="none" stroke="#010101" id="line12340" y2="28.90967" x2="35.8877" y1="41.13428" x1="35.88867" stroke-miterlimit="14.3"/><polyline fill="none" stroke="#010101" id="polyline12346" points="3.2109375,23.79248046875 10.01953125,16.98388671875 9.513671875,15.2890625 13.193359375,16.25732421875 12.251953125,12.5234375 15.9658203125,13.48486328125 14.9775390625,9.82568359375 18.6767578125,10.7734375 18.173828125,8.82958984375 24.185546875,2.81787109375 " stroke-miterlimit="14.3"/><polyline fill="#010101" id="polyline12350" points="13.126953125,23.80419921875 11.3212890625,18.236328125 15.8369140625,18.236328125 14.0322265625,23.806640625 "/><line fill="none" stroke="#010101" id="line12352" y2="18.8833" x2="13.58008" y1="6.65967" x1="13.5791" stroke-miterlimit="14.3"/><polyline fill="none" stroke="#010101" id="polyline12358" points="46.65625,24.33642578125 39.84765625,17.52783203125 38.154296875,18.033203125 39.1220703125,14.353515625 35.3876953125,15.29345703125 36.34765625,11.58056640625 32.689453125,12.56884765625 33.6376953125,8.86865234375 31.6923828125,9.373046875 24.322265625,2.00341796875 " stroke-miterlimit="14.3"/><polyline fill="#010101" id="polyline12362" points="36.578125,1.87109375 38.3828125,7.439453125 33.8681640625,7.439453125 35.6728515625,1.869140625 "/><line fill="none" stroke="#010101" id="line12364" y2="6.7915" x2="36.125" y1="19.01758" x1="36.125" stroke-miterlimit="14.3"/><polyline fill="none" stroke="#010101" id="polyline12370" points="24.494140625,46.49951171875 17.685546875,39.69091796875 15.9921875,40.1953125 16.958984375,36.515625 13.2265625,37.45556640625 14.185546875,33.7421875 10.52734375,34.73193359375 11.474609375,31.03125 9.529296875,31.53515625 2.1611328125,24.166015625 " stroke-miterlimit="14.3"/><polyline fill="#010101" id="polyline12374" points="12.150390625,44.80029296875 10.34765625,39.23193359375 14.861328125,39.23095703125 13.0556640625,44.80224609375 "/><line fill="none" stroke="#010101" id="line12376" y2="39.87891" x2="12.60352" y1="27.6543" x1="12.60352" stroke-miterlimit="14.3"/></svg>'}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/analog/ResistorVertical.js' */
(function ($) {draw2d.shape.analog.ResistorVertical=draw2d.SetFigure.extend({NAME:"draw2d.shape.analog.ResistorVertical",MyInputPortLocator:draw2d.layout.locator.PortLocator.extend({init:function(){this._super()},relocate:function(t,o){var r=o.getParent().getWidth(),e=o.getParent().getHeight();this.applyConsiderRotation(o,r/2,e)}}),MyOutputPortLocator:draw2d.layout.locator.PortLocator.extend({init:function(){this._super()},relocate:function(t,o){var r=o.getParent().getWidth();this.applyConsiderRotation(o,r/2,0)}}),init:function(t,o){"undefined"==typeof t&&(t=30,o=50),this._super(t,o),this.inputLocator=new this.MyInputPortLocator,this.outputLocator=new this.MyOutputPortLocator,this.createPort("hybrid",this.inputLocator),this.createPort("hybrid",this.outputLocator)},createSet:function(){var t=this._super();return t.push(this.canvas.paper.path("M15,0 L15,5 L0,7.5 L30,10 L0,15 L30,20 L0,25 L30,30 L15,32.5 L15,40")),t}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/analog/VoltageSupplyHorizontal.js' */
(function ($) {draw2d.shape.analog.VoltageSupplyHorizontal=draw2d.SVGFigure.extend({NAME:"draw2d.shape.analog.VoltageSupplyHorizontal",MyInputPortLocator:draw2d.layout.locator.PortLocator.extend({init:function(){this._super()},relocate:function(t,o){var e=o.getParent().getHeight();this.applyConsiderRotation(o,0,e/2)}}),MyOutputPortLocator:draw2d.layout.locator.PortLocator.extend({init:function(){this._super()},relocate:function(t,o){var e=o.getParent().getWidth(),r=o.getParent().getHeight();this.applyConsiderRotation(o,e,r/2)}}),init:function(t,o){"undefined"==typeof t&&(t=50,o=30),this._super(t,o),this.createPort("hybrid",new this.MyInputPortLocator),this.createPort("hybrid",new this.MyOutputPortLocator)},getSVG:function(){return'<svg width="49" height="28" xmlns="http://www.w3.org/2000/svg" version="1.1"><path d="m24.99933,18.95592l0,-9.54576m-5.78374,-9.40907l0,28.35939m-5.78718,-9.40457l0,-9.54576m-5.78374,-9.40907l0,28.35939" id="path10566" stroke-miterlimit="14.3" stroke="#010101" fill="none"/><path d="m26.79878,14.13039l6.90583,0m-33.22691,0l6.90583,0" id="path10568" stroke-miterlimit="14.3" stroke-linecap="square" stroke="#010101" fill="none"/></svg>'}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/analog/VoltageSupplyVertical.js' */
(function ($) {draw2d.shape.analog.VoltageSupplyVertical=draw2d.SVGFigure.extend({NAME:"draw2d.shape.analog.VoltageSupplyVertical",MyInputPortLocator:draw2d.layout.locator.PortLocator.extend({init:function(){this._super()},relocate:function(t,o){var r=o.getParent().getWidth(),e=o.getParent().getHeight();this.applyConsiderRotation(o,r/2,e)}}),MyOutputPortLocator:draw2d.layout.locator.PortLocator.extend({init:function(){this._super()},relocate:function(t,o){var r=o.getParent().getWidth();this.applyConsiderRotation(o,r/2,0)}}),init:function(t,o){"undefined"==typeof t&&(t=30,o=50),this._super(t,o),this.inputLocator=new this.MyInputPortLocator,this.outputLocator=new this.MyOutputPortLocator,this.createPort("hybrid",this.inputLocator),this.createPort("hybrid",this.outputLocator)},getSVG:function(){return'<svg  xmlns="http://www.w3.org/2000/svg" version="1.1"><path d="m19.62398,12.37594l-9.87926,0m-9.74355,8.22145l29.36289,0m-9.74007,8.22469l-9.87927,0m-9.74355,8.22145l29.36289,0" id="path10560" stroke-miterlimit="14.3" stroke="#010101" fill="none"/><path d="m14.63157,9.81646l0,-9.81646m0,47.2328l0,-9.81646" id="path10562" stroke-miterlimit="14.3" stroke-linecap="square" stroke="#010101" fill="none"/></svg>'}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/layout/Layout.js' */
(function ($) {draw2d.shape.layout.Layout=draw2d.shape.basic.Rectangle.extend({NAME:"draw2d.shape.layout.Layout",init:function(){this._super(),this.setBackgroundColor(null),this.setRadius(0),this.setStroke(0),this.installEditPolicy(new draw2d.policy.figure.AntSelectionFeedbackPolicy)},addFigure:function(t,e){this._super(t,this.locator),t.attachResizeListener(this)},onOtherFigureIsResizing:function(t){this.getParent()instanceof draw2d.shape.layout.Layout?this.fireResizeEvent():this.setDimension(1,1)},onDoubleClick:function(t){}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/layout/HorizontalLayout.js' */
(function ($) {draw2d.shape.layout.HorizontalLayout=draw2d.shape.layout.Layout.extend({NAME:"draw2d.shape.layout.HorizontalLayout",init:function(){this._super();var t=this;this.locator={relocate:function(i,e){for(var n=t.getStroke(),h=n,s=0;s<i;s++){var r=t.children.get(s).figure;h+=r.getWidth()+t.gap}e.setPosition(h,n)}},this.setDimension(1,1),this.gap=0},setGap:function(t){this.gap=t,this.setDimension(1,1)},getMinWidth:function(){var t=2*this.stroke+Math.max(0,this.children.getSize()-1)*this.gap;return this.children.each(function(i,e){t+=e.figure.getMinWidth()}),t},getMinHeight:function(){var t=10;return this.children.each(function(i,e){t=Math.max(t,e.figure.getMinHeight())}),t+2*this.stroke},setDimension:function(t,i){this._super(t,i);var e=this.width-this.getMinWidth();e>0?(e=e/this.children.getSize()|0,this.children.each(function(t,i){i.figure.setDimension(i.figure.getMinWidth()+e,i.figure.getHeight())})):this.children.each(function(t,i){i.figure.setDimension(1,1)})}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/layout/VerticalLayout.js' */
(function ($) {draw2d.shape.layout.VerticalLayout=draw2d.shape.layout.Layout.extend({NAME:"draw2d.shape.layout.VerticalLayout",init:function(){this._super(),this.gap=0;var t=this;this.locator={relocate:function(i,e){for(var n=t.getStroke()/2,h=n,s=0;s<i;s++){var a=t.children.get(s).figure;h=h+a.getHeight()+t.gap}e.setPosition(n,h)}},this.setDimension(10,10)},setGap:function(t){this.gap=t,this.setDimension(1,1)},getMinWidth:function(){var t=10;return this.children.each(function(i,e){t=Math.max(t,e.figure.getMinWidth())}),t+this.stroke},getMinHeight:function(){var t=+this.stroke+Math.max(0,this.children.getSize()-1)*this.gap;return this.children.each(function(i,e){t+=e.figure.getMinHeight()}),t},setDimension:function(t,i){this._super(t,i);var e=this.width-this.stroke;this.children.each(function(t,i){i.figure.setDimension(e,i.figure.getHeight())})}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/pert/Activity.js' */
(function ($) {draw2d.shape.pert.Activity=draw2d.shape.layout.VerticalLayout.extend({NAME:"draw2d.shape.pert.Activity",init:function(){this._super();var t=this;this.mementoValues={duration:null},this.lighterBgColor=null,this.darkerBgColor=null,this.setBackgroundColor("#f3f3f3"),this.setStroke(2),this.setColor(this.darkerBgColor),this.setRadius(5);var e=new draw2d.shape.layout.HorizontalLayout;e.setStroke(0),this.earlyStartLabel=this.createLabel("Early Start").setStroke(0),this.durationLabel=new draw2d.shape.basic.Label("Duration"),this.durationLabel.setStroke(1),this.durationLabel.setColor(this.darkerBgColor),this.durationLabel.setRadius(0),this.durationLabel.setBackgroundColor(null),this.durationLabel.setPadding(5),this.durationLabel.setColor(this.bgColor.darker(.2)),this.durationLabel.installEditor(new draw2d.ui.LabelEditor({onCommit:function(e){t.setDuration(parseFloat(e))}})),this.earlyEndLabel=this.createLabel("Early End").setStroke(0),e.addFigure(this.earlyStartLabel),e.addFigure(this.durationLabel),e.addFigure(this.earlyEndLabel),this.activityLabel=new draw2d.shape.basic.Label("Activity Name"),this.activityLabel.setRadius(0),this.activityLabel.setPadding(10),this.activityLabel.setColor(this.darkerBgColor),this.activityLabel.setBackgroundColor(null),this.activityLabel.installEditor(new draw2d.ui.LabelInplaceEditor),this.inputPort=this.activityLabel.createPort("input"),this.inputPort.getActivity=function(){return t},this.inputPort.onConnect=function(){t.setDuration(t.mementoValues.duration)},this.inputPort.onDisconnect=function(){t.setDuration(t.mementoValues.duration)},this.inputPort.setValue=function(e){t.setDuration(t.mementoValues.duration)},this.outputPort=this.activityLabel.createPort("output"),this.outputPort.getActivity=function(){return t},this.outputPort.onConnect=function(){t.setDuration(t.mementoValues.duration)},this.outputPort.onDisconnect=function(){t.setDuration(t.mementoValues.duration)};var a=new draw2d.shape.layout.HorizontalLayout;a.setStroke(0),this.lateStartLabel=this.createLabel("Late Start").setStroke(0),this.stackLabel=this.createLabel("Stack"),this.lateEndLabel=this.createLabel("Late End").setStroke(0),a.addFigure(this.lateStartLabel),a.addFigure(this.stackLabel),a.addFigure(this.lateEndLabel),this.addFigure(e),this.addFigure(this.activityLabel),this.addFigure(a),this.setDuration(1)},setDuration:function(t){this.mementoValues.duration!==t&&(this.mementoValues.duration=t,this.durationLabel.setText(this.mementoValues.duration));var e=this.getEarlyStart();this.earlyStartLabel.setText(e),this.earlyEndLabel.setText(e+this.mementoValues.duration);var a=this.outputPort.getConnections();if(a.each($.proxy(function(t,e){var a=e.getTarget();a.setValue()},this)),0===a.getSize()){var i=parseFloat(this.earlyEndLabel.getText());this.setLateFinish(i)}},getEarlyEnd:function(){return this.getEarlyStart()+this.mementoValues.duration},getEarlyStart:function(){var t=0;return this.inputPort.getConnections().each(function(e,a){var i=a.getSource().getActivity();t=Math.max(t,i.getEarlyEnd())}),t},setLateFinish:function(t){var e=t-this.mementoValues.duration;this.lateEndLabel.setText(t),this.lateStartLabel.setText(e),this.stackLabel.setText(e-parseFloat(this.earlyStartLabel.getText()));var a=this.inputPort.getConnections();a.each($.proxy(function(t,a){var i=a.getSource();i.getActivity().setLateFinish(e)},this))},createLabel:function(t){var e=new draw2d.shape.basic.Label(t);return e.setStroke(1),e.setColor(this.darkerBgColor),e.setRadius(0),e.setBackgroundColor(null),e.setPadding(5),e.setColor(this.bgColor.darker(.2)),e.onDoubleClick=function(t){},e},setBackgroundColor:function(t){this._super(t),this.lighterBgColor=this.bgColor.lighter(.2).hash(),this.darkerBgColor=this.bgColor.darker(.2).hash()},repaint:function(t){this.repaintBlocked!==!0&&null!==this.shape&&("undefined"==typeof t&&(t={}),this.getAlpha()<.9?t.fill=this.bgColor.hash():t.fill=["90",this.bgColor.hash(),this.lighterBgColor].join("-"),this._super(t))}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/ui/LabelEditor.js' */
(function ($) {draw2d.ui.LabelEditor=Class.extend({init:function(t){this.listener=$.extend({onCommit:function(){},onCancel:function(){}},t)},start:function(t){var e=prompt("Label: ",t.getText());e?(t.setText(e),this.listener.onCommit(t.getText())):this.listener.onCancel()}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/ui/LabelInplaceEditor.js' */
(function ($) {draw2d.ui.LabelInplaceEditor=draw2d.ui.LabelEditor.extend({init:function(t){this._super(),this.listener=$.extend({onCommit:function(){},onCancel:function(){}},t)},start:function(t){this.label=t,this.commitCallback=$.proxy(this.commit,this),$("body").bind("click",this.commitCallback),this.html=$('<input id="inplaceeditor">'),this.html.val(t.getText()),this.html.hide(),$("body").append(this.html),this.html.autoResize({animate:!1}),this.html.bind("keyup",$.proxy(function(t){switch(t.which){case 13:this.commit();break;case 27:this.cancel()}},this)),this.html.bind("blur",this.commitCallback),this.html.bind("click",function(t){t.stopPropagation(),t.preventDefault()});var i=this.label.getCanvas(),l=this.label.getBoundingBox();l.setPosition(i.fromCanvasToDocumentCoordinate(l.x,l.y));var h=i.getScrollArea();h.is($("body"))&&l.translate(i.getScrollLeft(),i.getScrollTop()),l.translate(-1,-1),l.resize(2,2),this.html.css({position:"absolute",top:l.y,left:l.x,"min-width":l.w,height:l.h}),this.html.fadeIn($.proxy(function(){this.html.focus()},this))},commit:function(){this.html.unbind("blur",this.commitCallback),$("body").unbind("click",this.commitCallback);var t=this.html.val();this.label.setText(t),this.html.fadeOut($.proxy(function(){this.html.remove(),this.html=null,this.listener.onCommit(this.label.getText())},this))},cancel:function(){this.html.unbind("blur",this.commitCallback),$("body").unbind("click",this.commitCallback),this.html.fadeOut($.proxy(function(){this.html.remove(),this.html=null,this.listener.onCancel()},this))}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/decoration/connection/Decorator.js' */
(function ($) {draw2d.decoration.connection.Decorator=Class.extend({NAME:"draw2d.decoration.connection.Decorator",init:function(o,t){("undefined"==typeof o||o<1)&&(this.width=20),("undefined"==typeof t||t<1)&&(this.height=15),this.color=new draw2d.util.Color(0,0,0),this.backgroundColor=new draw2d.util.Color(250,250,250)},paint:function(o){},setColor:function(o){return this.color=new draw2d.util.Color(o),this},setBackgroundColor:function(o){return this.backgroundColor=new draw2d.util.Color(o),this},setDimension:function(o,t){return this.width=o,this.height=t,this}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/decoration/connection/ArrowDecorator.js' */
(function ($) {draw2d.decoration.connection.ArrowDecorator=draw2d.decoration.connection.Decorator.extend({NAME:"draw2d.decoration.connection.ArrowDecorator",init:function(t,o){this._super(t,o)},paint:function(t){var o=t.set();return o.push(t.path(["M0 0","L",this.width," ",-this.height/2,"L",this.width," ",this.height/2,"L0 0"].join(""))),o.attr({fill:this.backgroundColor.hash(),stroke:this.color.hash()}),o}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/decoration/connection/DiamondDecorator.js' */
(function ($) {draw2d.decoration.connection.DiamondDecorator=draw2d.decoration.connection.Decorator.extend({NAME:"draw2d.decoration.connection.DiamondDecorator",init:function(t,i){this._super(t,i)},paint:function(t){var i=t.set();return i.push(t.path(["M",this.width/2," ",-this.height/2,"L",this.width," ",0,"L",this.width/2," ",this.height/2,"L",0," ",0,"L",this.width/2," ",-this.height/2,"Z"].join(""))),i.attr({fill:this.backgroundColor.hash(),stroke:this.color.hash()}),i}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/decoration/connection/CircleDecorator.js' */
(function ($) {draw2d.decoration.connection.CircleDecorator=draw2d.decoration.connection.Decorator.extend({NAME:"draw2d.decoration.connection.CircleDecorator",init:function(o,r){this._super(o,r)},paint:function(o){var r=o.circle(0,0,this.width/2);return r.attr({fill:this.backgroundColor.hash(),stroke:this.color.hash()}),r}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/decoration/connection/BarDecorator.js' */
(function ($) {draw2d.decoration.connection.BarDecorator=draw2d.decoration.connection.Decorator.extend({NAME:"draw2d.decoration.connection.BarDecorator",init:function(t,o){this._super(t,o)},paint:function(t){var o=t.set(),i=["M",this.width/2," ",-this.height/2];return i.push("L",this.width/2," ",this.height/2),o.push(t.path(i.join(""))),o.attr({fill:this.backgroundColor.hash(),stroke:this.color.hash()}),o}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/io/Reader.js' */
(function ($) {draw2d.io.Reader=Class.extend({init:function(){},unmarshal:function(n,a){}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/io/Writer.js' */
(function ($) {draw2d.io.Writer=Class.extend({init:function(){},marshal:function(r){return""},formatXml:function(r){var n="",a=/(>)(<)(\/*)/g;r=r.replace(a,"$1\r\n$2$3");var t=0;return jQuery.each(r.split("\r\n"),function(r,a){var c=0;a.match(/.+<\/\w[^>]*>$/)?c=0:a.match(/^<\/\w/)?0!=t&&(t-=1):c=a.match(/^<\w[^>]*[^\/]>.*$/)?1:0;for(var e="",i=0;i<t;i++)e+="  ";n+=e+a+"\r\n",t+=c}),n}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/io/svg/Writer.js' */
(function ($) {draw2d.io.svg.Writer=draw2d.io.Writer.extend({init:function(){this._super()},marshal:function(e){var r=e.getCurrentSelection();e.setCurrentSelection(null);var t=e.getHtmlContainer().html().replace(/>\s+/g,">").replace(/\s+</g,"<");return t=this.formatXml(t),t=t.replace(/<desc>.*<\/desc>/g,"<desc>Create with draw2d JS graph library and RaphaelJS</desc>"),e.setCurrentSelection(r),t}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/io/png/Writer.js' */
(function ($) {draw2d.io.png.Writer=draw2d.io.Writer.extend({init:function(){this._super()},marshal:function(a){var e=a.getHtmlContainer().html().replace(/>\s+/g,">").replace(/\s+</g,"<");e=e.replace('<svg xmlns="http://www.w3.org/2000/svg"',"<svg");var n=$('<canvas id="canvas" width="1000px" height="600px"></canvas>');$("body").append(n),canvg("canvas",e,{ignoreMouse:!0,ignoreAnimation:!0});var t=document.getElementById("canvas").toDataURL("image/png");return n.remove(),t}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/io/json/Writer.js' */
(function ($) {draw2d.io.json.Writer=draw2d.io.Writer.extend({init:function(){this._super()},marshal:function(t){var e=[],r=t.getFigures(),i=0,n=null;for(i=0;i<r.getSize();i++)n=r.get(i),e.push(n.getPersistentAttributes());var s=t.getLines();return s.each(function(t,r){e.push(r.getPersistentAttributes())}),e}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/io/json/Reader.js' */
(function ($) {draw2d.io.json.Reader=draw2d.io.Reader.extend({init:function(){this._super()},unmarshal:function(canvas,json){var node=null;$.each(json,function(i,element){var o=eval("new "+element.type+"()"),source=null,target=null;for(i in element){var val=element[i];"source"===i?(node=canvas.getFigure(val.node),source=node.getPort(val.port)):"target"===i&&(node=canvas.getFigure(val.node),target=node.getPort(val.port))}null!==source&&null!==target&&(o.setSource(source),o.setTarget(target)),o.setPersistentAttributes(element),canvas.addFigure(o)}),canvas.calculateConnectionIntersection(),canvas.getLines().each(function(e,n){n.svgPathString=null,n.repaint()}),canvas.linesToRepaintAfterDragDrop=canvas.getLines().clone()}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/icon/Icon.js' */
(function ($) {draw2d.shape.icon.Icon=draw2d.SetFigure.extend({NAME:"draw2d.shape.icon.Icon",init:function(s,t){this._super(s,t),this.setBackgroundColor("#333333")},repaint:function(s){this.repaintBlocked!==!0&&null!==this.shape&&("undefined"==typeof s&&(s={}),s.fill="none",null!==this.svgNodes&&this.svgNodes.attr({fill:this.bgColor.hash(),stroke:"none"}),this._super(s))},applyTransformation:function(){this.isResizeable()===!0?this.svgNodes.transform("S"+this.scaleX+","+this.scaleY+","+this.getAbsoluteX()+","+this.getAbsoluteY()+"t"+(this.getAbsoluteX()-this.offsetX)+","+(this.getAbsoluteY()-this.offsetY)):this.svgNodes.transform("T"+(this.getAbsoluteX()-this.offsetX)+","+(this.getAbsoluteY()-this.offsetY))},createShapeElement:function(){var s=this._super(),t=this.svgNodes.getBBox();return this.offsetX=t.x,this.offsetY=t.y,s},setDimension:function(s,t){s>t?this._super(s,s):this._super(t,t)}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d/shape/icon/ArrowLeft.js' */
(function ($) {draw2d.shape.icon.ArrowLeft=draw2d.shape.icon.Icon.extend({NAME:"draw2d.shape.icon.ArrowLeft",init:function(e,n){this._super(e,n)},createSet:function(){return this.canvas.paper.path("M24.316,5.318L6.684,15.5l17.632,10.182V5.318L24.316,5.318z")}});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/draw2d-amd.js' */
(function ($) {define("workflow-designer/draw-2d",[],function(){return draw2d});}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:draw2d', location = 'js/lib/shifty-amd.js' */
(function ($) {!function(i){window.Tweenable=i}(require("atlassian/libs/shifty-0.6.1"));}(jQuery));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:form-dialog-view', location = 'js/views/dialogs/FormDialogView.js' */
define("workflow-designer/dialogs/form-dialog-view",["jira/dialog/dialog","jira/dialog/form-dialog","workflow-designer/backbone","workflow-designer/underscore","jquery"],function(e,i,o,n,t){function s(){this.get$popup().find(":submit").removeClass("button")}return o.Marionette.Layout.extend({disable:function(){this.$(":input").attr("disabled","disabled")},enable:function(){this.$(":input").removeAttr("disabled")},_getWindowTitle:t.noop,hide:function(){this.dialog.hide(!0)},_onContentRefresh:t.noop,_onError:function(e){this.enable(),this.showErrorMessage(e)},_onHide:function(i,o,t){var s;this._onCancel&&(s=n.contains([e.HIDE_REASON.cancel,e.HIDE_REASON.escape],t),s&&this._onCancel())},_onSubmit:function(){throw new Error("FormDialogView subclasses must implement _onSubmit().")},removeErrorMessages:function(){this.$(".error").remove()},reposition:function(){this.dialog._positionInCenter()},show:function(){function e(){s.call(this),o.setElement(this.get$popup()),o.bindUIElements(),o._onContentRefresh()}var o=this;return this.dialog=new i({content:this._getContent(),id:this.id,onContentRefresh:e,stacked:!0,submitHandler:n.bind(this._onSubmit,this),windowTitle:this._getWindowTitle()}),this.dialog.show(),t(this.dialog).one("Dialog.hide",n.bind(this._onHide,this)),this},showErrorMessage:function(e){var i=aui.message.error({content:e}),o=this.$(".form-body");e&&(o.find(".aui-message.error").remove(),o.prepend(i).scrollTop(0),this.reposition())}})}),AJS.namespace("JIRA.WorkflowDesigner.Dialogs.FormDialogView",null,require("workflow-designer/dialogs/form-dialog-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:inline-dialog-view', location = 'js/views/dialogs/InlineDialogView.js' */
define("workflow-designer/dialogs/inline-dialog-view",["aui/inline-dialog","workflow-designer/backbone","workflow-designer/underscore","jquery"],function(i,e,n,o){return e.Marionette.ItemView.extend({initialize:function(i){n.bindAll(this,"_onDocumentClick","_onKeyDown","_shouldHide"),this._trigger=i.trigger,this._reset()},_clickShouldHide:function(i){return!o.contains(this._inlineDialog[0],i.target)},_createInlineDialog:function(e){function t(i,e,n){c._getContent(i,n)}function l(){c.bindUIElements(),c._onBeforeShow(),n.delay(function(){i.current=null,c._onShow(),o(document).on({click:c._onDocumentClick,keydown:c._onKeyDown})},c._inlineDialog.getOptions().fadeTime)}function r(){o(document).off({click:c._onDocumentClick,keydown:c._onKeyDown})}var s,c=this;return s=new i(e,this.id,t,{hideCallback:r,initCallback:l,noBind:!0,persistent:!0,preHideCallback:this._shouldHide})},hide:function(){this._inlineDialog.hide()},_onDocumentClick:function(i){this._clickShouldHide(i)&&this.hide()},_onBeforeShow:o.noop,_onKeyDown:function(i){var e=i.which===o.ui.keyCode.ESCAPE,n=o(i.target).is(":input");e&&!n&&this.hide()},_onShow:o.noop,remove:function(){e.Marionette.ItemView.prototype.remove.apply(this,arguments),this.hide(),this._inlineDialog.remove()},_reset:function(){this._inlineDialog=this._createInlineDialog(this._trigger),this.setElement(this._inlineDialog)},_shouldHide:function(){return!0},show:function(){var e=o.Deferred();return this._inlineDialog.show(),n.delay(e.resolve,i.opts.fadeTime),e.promise()}})}),AJS.namespace("JIRA.WorkflowDesigner.Dialogs.InlineDialogView",null,require("workflow-designer/dialogs/inline-dialog-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:properties-view', location = 'js/views/properties-panel/PropertiesView.js' */
define("workflow-designer/properties-panel/properties-view",["workflow-designer/backbone"],function(e){return e.Marionette.ItemView.extend({className:"properties-view",initialize:function(e){this._canvasModel=e.canvasModel,this._selectedView=e.selectedView,this._workflowModel=e.workflowModel,this._selectedView&&this.listenTo(this._selectedView.model,"change",this._onChange)},applyDescriptionExpander:function(){var e,i=this.$("#properties-panel-description"),t=parseInt(i.css("max-height"),10);0!==i.length&&(i.css({height:"auto",maxHeight:"none"}),e=i.height()>t,e?i.css({height:"",minHeight:t}):(i.find(".aui-expander-trigger").remove(),i.removeClass("aui-expander-content")))},_destroy:function(){this._selectedView.destroy()},_edit:function(){this._selectedView.edit()},_onChange:function(){this.render().applyDescriptionExpander()},serializeData:function(){return this._selectedView&&this._selectedView.model.toJSON()||{}}})}),AJS.namespace("JIRA.WorkflowDesigner.PropertiesPanel.PropertiesView",null,require("workflow-designer/properties-panel/properties-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer-internal-api', location = 'js/internal-api/PanelService.js' */
define("workflow-designer/internal-api/panel-service",["workflow-designer/panel-collection","exports"],function(e,n){var r={};n.addPanel=function(n,a){r[n]=r[n]||new e,r[n].add(a)},n.renderPanels=function(e,n){var a=r[e];return a&&a.map(function(e){return e.get("template")(n)})}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer-internal-api', location = 'js/internal-api/WorkflowService.js' */
define("workflow-designer/internal-api/workflow-service",["jquery","exports"],function(e,r){function o(e){return{getWorkflowData:function(){return e.getWorkflowData()}}}function n(){t.forEach(function(e){i.forEach(function(r){e.executedFor=e.executedFor||[],e.executedFor.indexOf(r)===-1&&(e(o(r)),e.executedFor.push(r))})})}var i=[],t=[];r.registerWorkflowDesigner=function(e){i.push(e),n()},r.ready=function(e){t.push(e),n()}}),AJS.namespace("JIRA.WorkflowDesigner.InternalApi.WorkflowService",null,require("workflow-designer/internal-api/workflow-service"));;
;
/* module-key = 'com.atlassian.plugin.jslibs:cocktail-0.3.0', location = 'libs/cocktail/0.3.0/cocktail-0.3.0.js' */
(function(c){define("atlassian/libs/cocktail-0.3.0",function(){var a={};c.call(a);return"undefined"!==typeof exports?module.exports:a.Cocktail})})(function(){var c;c="undefined"!==typeof exports?exports:this.Cocktail={};c.mixins={};c.mixin=function(b){var a=_.chain(arguments).toArray().rest().flatten().value(),e={};_(a).each(function(a){_.isString(a)&&(a=c.mixins[a]);_(a).each(function(a,d){_.isFunction(a)?(b.prototype[d]&&(e[d]=e[d]||[b.prototype[d]],e[d].push(a)),b.prototype[d]=a):_.isObject(a)&&
(b.prototype[d]=_.extend({},a,b.prototype[d]||{}))})});_(e).each(function(a,c){b.prototype[c]=function(){var b=this,c=arguments,e=void 0;_(a).each(function(a){a=_.isFunction(a)?a.apply(b,c):a;e=void 0===a?e:a});return e}})};var a;c.patch=function(b){a=b.Model.extend;var g=function(b,g){var f=a.call(this,b,g),d=f.prototype.mixins;d&&f.prototype.hasOwnProperty("mixins")&&c.mixin(f,d);return f};_([b.Model,b.Collection,b.Router,b.View]).each(function(a){a.mixin=function(){c.mixin(this,_.toArray(arguments))};
a.extend=g})};c.unpatch=function(b){_([b.Model,b.Collection,b.Router,b.View]).each(function(b){b.mixin=void 0;b.extend=a})}});;
;
/* module-key = 'jira.webresources:status-category-picker', location = '/includes/jira/field/statusCategoryPicker.js' */
define("jira/field/status-category-single-select",["jira/ajs/select/single-select","jquery"],function(e,t){function s(e){var s,i=t();return e&&e.model&&(s=t.extend({},e.model().data()),delete s.descriptor,i=t(JIRA.Template.Util.Issue.Status.issueStatus({issueStatus:{name:e.label(),statusCategory:s},isCompact:!0})).removeClass("jira-issue-status-lozenge-tooltip").removeAttr("title").removeAttr("data-tooltip")),i}return e.extend({_hasIcon:function(){return this.$field.val()&&this.$field.val()!==this.model.placeholder},setSelection:function(e){this._super(e),this.$container.find(".fake-ss-icon").remove(),this.$container.append(s(e).addClass("fake-ss-icon aui-ss-entity-icon"))},init:function(e){this._super(e);var t=this.listController._renders.suggestion;this.listController._renders.suggestion=function(e){var i=t.apply(this,arguments);return i.find("a").prepend("&nbsp;").prepend(s(e)),i}},_renders:{entityIcon:function(e){return t()}}})}),AJS.namespace("JIRA.StatusCategorySingleSelect",null,require("jira/field/status-category-single-select"));;
;
/* module-key = 'jira.webresources:status-category-picker', location = '/includes/jira/field/initStatusPickers.js' */
define("jira/field/init-status-pickers",["jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/status-category-single-select"],function(e,t,i,n){function s(e){e.find("select#statusCategory").each(function(e,t){new n({element:t,revertOnInvalid:!0})})}i.bind(t.NEW_CONTENT_ADDED,function(t,i,n){n!==e.panelRefreshed&&s(i)})});;
;
/* module-key = 'jira.webresources:status-category-picker', location = '/includes/jira/field/init/init-status-category-picker-webresource.js' */
require("jira/field/init-status-pickers");;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'soy/Forms.soy' */
// This file was automatically generated from Forms.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.WorkflowDesigner.Templates.Forms.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.WorkflowDesigner == 'undefined') { JIRA.WorkflowDesigner = {}; }
if (typeof JIRA.WorkflowDesigner.Templates == 'undefined') { JIRA.WorkflowDesigner.Templates = {}; }
if (typeof JIRA.WorkflowDesigner.Templates.Forms == 'undefined') { JIRA.WorkflowDesigner.Templates.Forms = {}; }


JIRA.WorkflowDesigner.Templates.Forms.checkbox = function(opt_data, opt_ignored) {
  return '<fieldset class="group"><div class="checkbox">' + aui.form.input({id: opt_data.id, isChecked: opt_data.isChecked, type: 'checkbox'}) + aui.form.label({content: '' + soy.$$escapeHtml(opt_data.labelContent), forField: opt_data.id, isRequired: false}) + '</div></fieldset>';
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.Forms.checkbox.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.Forms.checkbox';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'soy/PropertiesPanel.soy' */
// This file was automatically generated from PropertiesPanel.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.WorkflowDesigner.Templates.PropertiesPanel.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.WorkflowDesigner == 'undefined') { JIRA.WorkflowDesigner = {}; }
if (typeof JIRA.WorkflowDesigner.Templates == 'undefined') { JIRA.WorkflowDesigner.Templates = {}; }
if (typeof JIRA.WorkflowDesigner.Templates.PropertiesPanel == 'undefined') { JIRA.WorkflowDesigner.Templates.PropertiesPanel = {}; }


JIRA.WorkflowDesigner.Templates.PropertiesPanel.description = function(opt_data, opt_ignored) {
  var output = '';
  var id__soy3 = 'properties-panel-description';
  output += aui.expander.content({content: '' + soy.$$filterNoAutoescape(opt_data.content) + aui.expander.trigger({content: '<span class="trigger-text">' + soy.$$escapeHtml('Show more') + '</span>', contentId: id__soy3, extraClasses: 'aui-expander-reveal-text', replaceSelector: '.trigger-text', replaceText: 'Show less', tag: 'a'}), extraClasses: 'description', id: id__soy3});
  return output;
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.PropertiesPanel.description.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.PropertiesPanel.description';
}


JIRA.WorkflowDesigner.Templates.PropertiesPanel.module = function(opt_data, opt_ignored) {
  return '<div class="module">' + ((opt_data.heading) ? '<div class="mod-header"><h4>' + soy.$$escapeHtml(opt_data.heading) + '</h4></div>' : '') + '<div class="mod-content">' + soy.$$filterNoAutoescape(opt_data.content) + '</div></div>';
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.PropertiesPanel.module.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.PropertiesPanel.module';
}


JIRA.WorkflowDesigner.Templates.PropertiesPanel.horizontalLine = function(opt_data, opt_ignored) {
  return '<div class="mod-header"><h4/><div>';
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.PropertiesPanel.horizontalLine.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.PropertiesPanel.horizontalLine';
}


JIRA.WorkflowDesigner.Templates.PropertiesPanel.optionsStatusItem = function(opt_data, opt_ignored) {
  return '<li><a class="' + soy.$$escapeHtml(opt_data.classes) + '" href="' + soy.$$escapeHtml(opt_data.href) + '" target="_blank">' + soy.$$escapeHtml(opt_data.label) + '</a>' + ((opt_data.count != null) ? '<span> (' + soy.$$escapeHtml(opt_data.count) + ')</span>' : '') + '</li>';
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.PropertiesPanel.optionsStatusItem.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.PropertiesPanel.optionsStatusItem';
}


JIRA.WorkflowDesigner.Templates.PropertiesPanel.optionsTransitionItem = function(opt_data, opt_ignored) {
  return '<li data-transition-option-key="' + soy.$$escapeHtml(opt_data.key) + '"><a href="' + soy.$$escapeHtml(opt_data.href) + '" target="_blank">' + soy.$$escapeHtml(opt_data.label) + '</a><span> (' + soy.$$escapeHtml(opt_data.count) + ')</span></li>';
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.PropertiesPanel.optionsTransitionItem.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.PropertiesPanel.optionsTransitionItem';
}


JIRA.WorkflowDesigner.Templates.PropertiesPanel.validationInfo = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = JIRA.WorkflowDesigner.Templates.PropertiesPanel.horizontalLine(null) + '<div><table><tr><td>';
  switch (opt_data.problem.severity) {
    case 'MINOR':
      output += '<span class="aui-icon aui-icon-small aui-iconfont-info" style="color:#3572b0; padding-right: 5px"></span>';
      break;
    case 'CRITICAL':
    case 'MAJOR':
      output += '<span class="aui-icon aui-icon-small aui-iconfont-error" style="color:#d04437; padding-right: 5px"></span>';
      break;
  }
  output += '</td><td><div><span> ' + soy.$$escapeHtml(opt_data.problem.message) + '</span></div>' + ((opt_data.problem.quickFixHtml) ? '<div>' + soy.$$filterNoAutoescape(opt_data.problem.quickFixHtml) + '</div>' : '') + '</td></tr></table></div>' + JIRA.WorkflowDesigner.Templates.PropertiesPanel.horizontalLine(null);
  return output;
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.PropertiesPanel.validationInfo.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.PropertiesPanel.validationInfo';
}


JIRA.WorkflowDesigner.Templates.PropertiesPanel.propertiesPanel = function(opt_data, opt_ignored) {
  var output = '';
  var hasActions__soy77 = opt_data.extraActions && opt_data.extraActions.length || opt_data.mainActions && opt_data.mainActions.length;
  var hasInformation__soy78 = opt_data.description || opt_data.informationContent && opt_data.informationContent.length;
  output += '<h3>' + soy.$$filterNoAutoescape(opt_data.titleContent) + '</h3>' + ((opt_data.validations) ? JIRA.WorkflowDesigner.Templates.PropertiesPanel.validationInfo({problem: opt_data.validations.mostSevere}) : '') + ((hasInformation__soy78) ? ((opt_data.description) ? JIRA.WorkflowDesigner.Templates.PropertiesPanel.description({content: '<strong>' + soy.$$escapeHtml('Description') + '</strong> <span class="description-content">' + soy.$$escapeHtml(opt_data.description) + '</span>'}) : '') + ((opt_data.informationContent) ? soy.$$filterNoAutoescape(opt_data.informationContent) : '') : '') + ((hasActions__soy77) ? JIRA.WorkflowDesigner.Templates.PropertiesPanel.module({content: '' + ((opt_data.extraActions) ? '<div class="extra-actions">' + soy.$$filterNoAutoescape(opt_data.extraActions) + '</div>' : '') + ((opt_data.mainActions) ? '<div>' + soy.$$filterNoAutoescape(opt_data.mainActions) + '</div>' : '')}) : '') + ((opt_data.options) ? JIRA.WorkflowDesigner.Templates.PropertiesPanel.module({content: '<ul>' + soy.$$filterNoAutoescape(opt_data.options) + '</ul>', heading: 'Options'}) : '') + ((opt_data.additionalModules) ? soy.$$filterNoAutoescape(opt_data.additionalModules) : '');
  return output;
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.PropertiesPanel.propertiesPanel.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.PropertiesPanel.propertiesPanel';
}


JIRA.WorkflowDesigner.Templates.PropertiesPanel.status = function(opt_data, opt_ignored) {
  var output = '';
  var workflowMode__soy132 = opt_data.isDraft ? 'draft' : 'live';
  var commonParameters__soy133 = 'workflowMode=' + workflowMode__soy132 + '&workflowName=' + opt_data.workflowName + '&workflowStep=' + opt_data.stepId;
  var param137 = '' + JIRA.WorkflowDesigner.Templates.Forms.checkbox({id: 'create-global-transition-sidebar', isChecked: opt_data.hasGlobalTransition, labelContent: '' + soy.$$escapeHtml('Allow all statuses to transition to this one')});
  if (opt_data.additionalPanels) {
    var additionalPanelList145 = opt_data.additionalPanels;
    var additionalPanelListLen145 = additionalPanelList145.length;
    for (var additionalPanelIndex145 = 0; additionalPanelIndex145 < additionalPanelListLen145; additionalPanelIndex145++) {
      var additionalPanelData145 = additionalPanelList145[additionalPanelIndex145];
      param137 += soy.$$filterNoAutoescape(additionalPanelData145);
    }
  }
  var param135 = '' + aui.form.form({action: '', content: param137, isTopLabels: true});
  output += JIRA.WorkflowDesigner.Templates.PropertiesPanel.propertiesPanel({description: opt_data.description, extraActions: param135, mainActions: '' + aui.buttons.button({text: ' ' + 'Edit', iconType: 'aui', iconClass: 'aui-icon-small aui-iconfont-edit', extraClasses: 'edit'}) + aui.buttons.button({text: 'Remove status', extraClasses: 'delete aui-button-link'}), options: '' + JIRA.WorkflowDesigner.Templates.PropertiesPanel.optionsStatusItem({label: 'Properties', href: "" + '/secure/admin/workflows/ViewWorkflowStepMetaAttributes.jspa?' + commonParameters__soy133, classes: 'status-properties'}), titleContent: '' + soy.$$escapeHtml(opt_data.name), validations: opt_data.validations});
  return output;
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.PropertiesPanel.status.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.PropertiesPanel.status';
}


JIRA.WorkflowDesigner.Templates.PropertiesPanel.transition = function(opt_data, opt_ignored) {
  var output = '';
  var editScreenURL__soy170 = "" + '/secure/admin/ConfigureFieldScreen.jspa?id=' + opt_data.screenId;
  var param182 = '';
  if (opt_data.additionalPanels) {
    var additionalPanelList185 = opt_data.additionalPanels;
    var additionalPanelListLen185 = additionalPanelList185.length;
    for (var additionalPanelIndex185 = 0; additionalPanelIndex185 < additionalPanelListLen185; additionalPanelIndex185++) {
      var additionalPanelData185 = additionalPanelList185[additionalPanelIndex185];
      param182 += soy.$$filterNoAutoescape(additionalPanelData185);
    }
  }
  param182 += aui.buttons.button({text: ' ' + 'Edit', iconType: 'aui', iconClass: 'aui-icon-small aui-iconfont-edit', extraClasses: 'edit'}) + aui.buttons.button({text: 'Delete transition', extraClasses: 'delete aui-button-link'});
  var param197 = '';
  var optionList198 = opt_data.transitionOptions;
  var optionListLen198 = optionList198.length;
  for (var optionIndex198 = 0; optionIndex198 < optionListLen198; optionIndex198++) {
    var optionData198 = optionList198[optionIndex198];
    param197 += JIRA.WorkflowDesigner.Templates.PropertiesPanel.optionsTransitionItem({count: optionData198.count, href: "" + optionData198.url + '&' + opt_data.queryString, key: optionData198.key, label: optionData198.name});
  }
  output += JIRA.WorkflowDesigner.Templates.PropertiesPanel.propertiesPanel({description: opt_data.description, informationContent: '' + ((opt_data.screenId) ? '<p><strong>' + soy.$$escapeHtml('Screen') + '</strong> <a href="' + soy.$$escapeHtml(editScreenURL__soy170) + '" target="_blank">' + soy.$$escapeHtml(opt_data.screenName) + '</a></p>' : ''), mainActions: param182, options: param197, titleContent: '' + soy.$$escapeHtml(opt_data.name), validations: opt_data.validations});
  return output;
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.PropertiesPanel.transition.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.PropertiesPanel.transition';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'soy/StatusCategoryField.soy' */
// This file was automatically generated from StatusCategoryField.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.WorkflowDesigner.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.WorkflowDesigner == 'undefined') { JIRA.WorkflowDesigner = {}; }
if (typeof JIRA.WorkflowDesigner.Templates == 'undefined') { JIRA.WorkflowDesigner.Templates = {}; }


JIRA.WorkflowDesigner.Templates.statusCategorySelectField = function(opt_data, opt_ignored) {
  var output = '<div class="field-group">' + aui.form.label({forField: opt_data.id, isRequired: true, content: 'Category'}) + JIRA.WorkflowDesigner.Templates.statusCategorySelect(opt_data) + '<div class="description">';
  var new__soy10 = '<b>' + soy.$$escapeHtml('To Do') + '</b>';
  var inProgress__soy14 = '<b>' + soy.$$escapeHtml('In Progress') + '</b>';
  var done__soy18 = '<b>' + soy.$$escapeHtml('Done') + '</b>';
  output += soy.$$filterNoAutoescape(AJS.format('Helps identify where an issue is in its lifecycle. \x3cbr/\x3eIssues move from {0} to {1} when work starts on them, and later move to {2} when all work is complete.',new__soy10,inProgress__soy14,done__soy18)) + '</div>' + ((opt_data.errors && opt_data.errors.statusCategory) ? aui.form.fieldError({message: opt_data.errors.statusCategory}) : '') + '</div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.statusCategorySelectField.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.statusCategorySelectField';
}


JIRA.WorkflowDesigner.Templates.statusCategorySelect = function(opt_data, opt_ignored) {
  var output = '<select id="' + soy.$$escapeHtml(opt_data.id) + '" name="' + soy.$$escapeHtml(opt_data.id) + '" class="select">';
  var optionList36 = opt_data.statusCategoryOptions;
  var optionListLen36 = optionList36.length;
  for (var optionIndex36 = 0; optionIndex36 < optionListLen36; optionIndex36++) {
    var optionData36 = optionList36[optionIndex36];
    output += JIRA.WorkflowDesigner.Templates.statusCategoryOption(optionData36);
  }
  output += '</select>';
  return output;
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.statusCategorySelect.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.statusCategorySelect';
}


JIRA.WorkflowDesigner.Templates.statusCategoryOption = function(opt_data, opt_ignored) {
  return '<option value="' + soy.$$escapeHtml(opt_data.value) + '" data-key="' + soy.$$escapeHtml(opt_data.key) + '" data-color-name="' + soy.$$escapeHtml(opt_data.colorName) + '" data-sequence="' + soy.$$escapeHtml(opt_data.sequence) + '"' + ((opt_data.selected) ? ' selected' : '') + ((opt_data.isPlaceholder) ? ' data-placeholder="true"' : '') + '>' + soy.$$escapeHtml(opt_data.text) + '</option>';
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.statusCategoryOption.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.statusCategoryOption';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'soy/TransitionDialogs.soy' */
// This file was automatically generated from TransitionDialogs.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.WorkflowDesigner.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.WorkflowDesigner == 'undefined') { JIRA.WorkflowDesigner = {}; }
if (typeof JIRA.WorkflowDesigner.Templates == 'undefined') { JIRA.WorkflowDesigner.Templates = {}; }


JIRA.WorkflowDesigner.Templates.addTransitionDialog = function(opt_data, opt_ignored) {
  return '<div class="aui-dialog-content">' + aui.form.form({action: '', content: '<h2 class="dialog-title">' + soy.$$escapeHtml('Add Transition') + '</h2><div class="form-body">' + aui.tabPane({content: '', id: 'new-transition-pane', isActive: true}) + aui.tabPane({content: '', id: 'reuse-transition-pane'}) + '</div><div class="buttons-container form-footer"><div class="buttons">' + aui.form.submit({extraClasses: 'aui-button aui-button-primary', name: 'submit', text: 'Add'}) + aui.form.linkButton({name: 'cancel', text: 'Cancel'}) + '</div></div>'}) + '</div>';
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.addTransitionDialog.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.addTransitionDialog';
}


JIRA.WorkflowDesigner.Templates.addTransitionDialogTabs = function(opt_data, opt_ignored) {
  return '' + aui.tabs({menuItems: [{extraClasses: 'new-transition', isActive: true, text: 'New Transition', url: '#new-transition-pane'}, {text: 'Reuse a transition', url: '#reuse-transition-pane'}], paneContent: ''});
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.addTransitionDialogTabs.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.addTransitionDialogTabs';
}


JIRA.WorkflowDesigner.Templates.cannotDeleteInitialTransitionDialog = function(opt_data, opt_ignored) {
  return '<div class="aui-dialog-content">' + aui.form.form({action: '', content: '<h2 class="dialog-title">' + soy.$$escapeHtml('Read-Only') + '</h2><div class="form-body"><p>' + soy.$$escapeHtml(AJS.format('The initial transition cannot be deleted.',opt_data.transitionName)) + '</p></div><div class="buttons-container form-footer"><div class="buttons">' + aui.form.linkButton({name: 'cancel', text: 'Cancel'}) + '</div></div>'}) + '</div>';
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.cannotDeleteInitialTransitionDialog.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.cannotDeleteInitialTransitionDialog';
}


JIRA.WorkflowDesigner.Templates.confirmDeleteTransitionDialog = function(opt_data, opt_ignored) {
  return '<div class="aui-dialog-content">' + aui.form.form({action: '', content: '<h2 class="dialog-title">' + soy.$$escapeHtml('Confirm Delete') + '</h2><div class="form-body"><p>' + soy.$$escapeHtml(AJS.format('Are you sure you want to delete the transition \x27\x27{0}\x27\x27?',opt_data.transitionName)) + '</p></div><div class="buttons-container form-footer"><div class="buttons">' + aui.form.submit({extraClasses: 'aui-button aui-button-primary', name: 'submit', text: 'Delete'}) + aui.form.linkButton({name: 'cancel', text: 'Cancel'}) + '</div></div>'}) + '</div>';
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.confirmDeleteTransitionDialog.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.confirmDeleteTransitionDialog';
}


JIRA.WorkflowDesigner.Templates.confirmEditTransitionSourceDialog = function(opt_data, opt_ignored) {
  return '<div class="aui-dialog-content">' + aui.form.form({action: '', content: '<h2 class="dialog-title">' + soy.$$escapeHtml('Confirm Edit Transition') + '</h2><div class="form-body"><p>' + soy.$$escapeHtml(AJS.format('Are you sure you want to change the source of \x27\x27{0}\x27\x27 from \x27\x27{1}\x27\x27 to \x27\x27{2}\x27\x27?',opt_data.transitionName,opt_data.originalSourceStatusName,opt_data.newSourceStatusName)) + '</p></div><div class="buttons-container form-footer"><div class="buttons">' + aui.form.submit({extraClasses: 'aui-button aui-button-primary', text: 'Save'}) + aui.form.linkButton({id: 'cancel', text: 'Cancel'}) + '</div></div>'}) + '</div>';
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.confirmEditTransitionSourceDialog.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.confirmEditTransitionSourceDialog';
}


JIRA.WorkflowDesigner.Templates.confirmEditTransitionTargetDialog = function(opt_data, opt_ignored) {
  return '<div class="aui-dialog-content">' + aui.form.form({action: '', content: '<h2 class="dialog-title">' + soy.$$escapeHtml('Confirm Edit Transition') + '</h2><div class="form-body"><p>' + soy.$$escapeHtml(AJS.format('Are you sure you want to change the destination of \x27\x27{0}\x27\x27 to \x27\x27{1}\x27\x27?',opt_data.transitionName,opt_data.targetStatusName)) + '</p></div><div class="buttons-container form-footer"><div class="buttons">' + aui.form.submit({extraClasses: 'aui-button aui-button-primary', name: 'submit', text: 'Save'}) + aui.form.linkButton({name: 'cancel', text: 'Cancel'}) + '</div></div>'}) + '</div>';
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.confirmEditTransitionTargetDialog.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.confirmEditTransitionTargetDialog';
}


JIRA.WorkflowDesigner.Templates.descriptionField = function(opt_data, opt_ignored) {
  return '' + aui.form.textareaField({id: 'transition-description', labelContent: 'Description', name: 'description', rows: 4, value: opt_data.value});
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.descriptionField.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.descriptionField';
}


JIRA.WorkflowDesigner.Templates.editTransitionDialog = function(opt_data, opt_ignored) {
  return '<div class="aui-dialog-content">' + aui.form.form({action: '', content: '<h2 class="dialog-title">' + soy.$$escapeHtml('Edit Transition') + '</h2><div class="form-body">' + JIRA.WorkflowDesigner.Templates.nameField({value: opt_data.name}) + JIRA.WorkflowDesigner.Templates.descriptionField({value: opt_data.description}) + JIRA.WorkflowDesigner.Templates.screenField({options: opt_data.screens}) + '</div><div class="buttons-container form-footer"><div class="buttons">' + aui.form.submit({extraClasses: 'aui-button aui-button-primary', name: 'submit', text: 'Save'}) + aui.form.linkButton({name: 'cancel', text: 'Cancel'}) + '</div></div>'}) + '</div>';
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.editTransitionDialog.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.editTransitionDialog';
}


JIRA.WorkflowDesigner.Templates.fromStatusField = function(opt_data, opt_ignored) {
  return '' + aui.form.selectField({id: 'transition-source-step-id', isRequired: true, labelContent: 'From status', options: opt_data.statuses});
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.fromStatusField.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.fromStatusField';
}


JIRA.WorkflowDesigner.Templates.nameField = function(opt_data, opt_ignored) {
  return '' + aui.form.textField({id: 'transition-name', isRequired: true, labelContent: 'Name', name: 'name', value: opt_data.value});
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.nameField.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.nameField';
}


JIRA.WorkflowDesigner.Templates.newTransitionForm = function(opt_data, opt_ignored) {
  return '' + JIRA.WorkflowDesigner.Templates.fromStatusField({statuses: opt_data.sourceStatuses}) + JIRA.WorkflowDesigner.Templates.toStatusField({statuses: opt_data.targetStatuses}) + JIRA.WorkflowDesigner.Templates.nameField({value: ''}) + JIRA.WorkflowDesigner.Templates.descriptionField({value: ''}) + JIRA.WorkflowDesigner.Templates.screenField({options: opt_data.screens});
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.newTransitionForm.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.newTransitionForm';
}


JIRA.WorkflowDesigner.Templates.reuseTransitionForm = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$escapeHtml('You can reuse a transition provided the destination status is the same.') + '</p>' + JIRA.WorkflowDesigner.Templates.fromStatusField({statuses: opt_data.sourceStatuses}) + JIRA.WorkflowDesigner.Templates.toStatusField({statuses: opt_data.targetStatuses}) + aui.form.fieldGroup({content: '' + aui.form.label({content: 'Transition to reuse', forField: 'transition-id', isRequired: true}) + aui.form.select({id: 'transition-id', options: []}) + '<div class="no-transitions-message"><p>' + soy.$$escapeHtml('There are no transitions going to this status.') + '</p><p>' + soy.$$filterNoAutoescape(AJS.format('{0}Create a new transition{1} to get started.','<a class="create-new-transition" href="#">','</a>')) + '</p></div>'});
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.reuseTransitionForm.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.reuseTransitionForm';
}


JIRA.WorkflowDesigner.Templates.screenField = function(opt_data, opt_ignored) {
  return '' + aui.form.selectField({id: 'transition-screen-id', isRequired: false, labelContent: 'Screen', options: opt_data.options});
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.screenField.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.screenField';
}


JIRA.WorkflowDesigner.Templates.toStatusField = function(opt_data, opt_ignored) {
  return '' + aui.form.selectField({id: 'transition-target-step-id', isRequired: true, labelContent: 'To status', options: opt_data.statuses});
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.toStatusField.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.toStatusField';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'soy/WorkflowDesigner.soy' */
// This file was automatically generated from WorkflowDesigner.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.WorkflowDesigner.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.WorkflowDesigner == 'undefined') { JIRA.WorkflowDesigner = {}; }
if (typeof JIRA.WorkflowDesigner.Templates == 'undefined') { JIRA.WorkflowDesigner.Templates = {}; }


JIRA.WorkflowDesigner.Templates.actions = function(opt_data, opt_ignored) {
  return '' + aui.toolbar2.toolbar2({content: '' + ((! opt_data.immutable) ? JIRA.WorkflowDesigner.Templates.primaryActions(opt_data) : '') + ((opt_data.fullScreenButton || ! opt_data.immutable) ? JIRA.WorkflowDesigner.Templates.secondaryActions(opt_data) : '')});
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.actions.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.actions';
}


JIRA.WorkflowDesigner.Templates.addStatusInlineDialog = function(opt_data, opt_ignored) {
  var output = '';
  var hasStatuses__soy18 = opt_data.statusOptions.length > 0;
  output += aui.form.form({action: '', content: '' + aui.form.fieldGroup({content: '' + aui.form.select({extraAttributes: {'data-container-class': 'full-width-field'}, extraClasses: 'full-width-field', id: 'status-name', options: opt_data.statusOptions}) + aui.form.fieldDescription({message: 'Search for an existing status or name a new one.'})}) + JIRA.WorkflowDesigner.Templates.Forms.checkbox({id: 'create-global-transition-add', isChecked: opt_data.createGlobalTransition, labelContent: '' + soy.$$escapeHtml('Allow all statuses to transition to this one')}) + aui.form.buttons({content: '' + aui.form.submit({isDisabled: ! hasStatuses__soy18, name: 'submit', text: 'Add'}) + aui.form.linkButton({name: 'cancel', text: 'Cancel'})}), isTopLabels: true});
  return output;
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.addStatusInlineDialog.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.addStatusInlineDialog';
}


JIRA.WorkflowDesigner.Templates.browserNotSupportedMessage = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml('This feature is not available in Internet Explorer prior to version 10.');
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.browserNotSupportedMessage.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.browserNotSupportedMessage';
}


JIRA.WorkflowDesigner.Templates.browserNotSupportedWarning = function(opt_data, opt_ignored) {
  return '' + aui.message.warning({content: '', titleContent: '' + JIRA.WorkflowDesigner.Templates.browserNotSupportedMessage(null)});
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.browserNotSupportedWarning.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.browserNotSupportedWarning';
}


JIRA.WorkflowDesigner.Templates.cannotDeleteInitialStatus = function(opt_data, opt_ignored) {
  return '<div class="aui-dialog-content">' + aui.form.form({action: '', content: '<h2 class="dialog-title">' + soy.$$escapeHtml('Read-Only') + '</h2><div class="form-body"><p>' + soy.$$escapeHtml(AJS.format('The initial status cannot be deleted.',opt_data.name)) + '</p></div><div class="buttons-container form-footer"><div class="buttons">' + aui.form.linkButton({name: 'cancel', text: 'Cancel'}) + '</div></div>'}) + '</div>';
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.cannotDeleteInitialStatus.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.cannotDeleteInitialStatus';
}


JIRA.WorkflowDesigner.Templates.cannotDeleteStatusFromActiveWorkflow = function(opt_data, opt_ignored) {
  return '<div class="aui-dialog-content">' + aui.form.form({action: '', content: '<h2 class="dialog-title">' + soy.$$escapeHtml('Statuses can\x27t be removed from active workflows') + '</h2><div class="form-body"><p>' + soy.$$escapeHtml('You can only remove statuses from inactive workflows. To start with this workflow and remove statuses, make a copy of it which will be inactive. You can assign it to the project when you\x27re happy with it.') + '</p><p><a target="_blank" href="https://confluence.atlassian.com/display/JIRA/Configuring+Workflow">' + soy.$$escapeHtml('Learn more about configuring and editing workflows.') + '</a></p></div><div class="buttons-container form-footer"><div class="buttons">' + aui.form.linkButton({name: 'cancel', text: 'Cancel'}) + '</div></div>'}) + '</div>';
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.cannotDeleteStatusFromActiveWorkflow.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.cannotDeleteStatusFromActiveWorkflow';
}


JIRA.WorkflowDesigner.Templates.confirmDeleteStatus = function(opt_data, opt_ignored) {
  return '<div class="aui-dialog-content">' + aui.form.form({action: '', content: '<h2 class="dialog-title">' + soy.$$escapeHtml('Confirm Remove Status') + '</h2><div class="form-body"><p>' + soy.$$escapeHtml(AJS.format('Are you sure you want to remove the status \x27\x27{0}\x27\x27 and delete the related transitions?',opt_data.name)) + '</p></div><div class="buttons-container form-footer"><div class="buttons">' + aui.form.submit({extraClasses: 'aui-button aui-button-primary', name: 'submit', text: 'Remove'}) + aui.form.linkButton({name: 'cancel', text: 'Cancel'}) + '</div></div>'}) + '</div>';
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.confirmDeleteStatus.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.confirmDeleteStatus';
}


JIRA.WorkflowDesigner.Templates.workflowDesignerSection = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="workflow-designer-section">' + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + '</div>';
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.workflowDesignerSection.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.workflowDesignerSection';
}


JIRA.WorkflowDesigner.Templates.container = function(opt_data, opt_ignored) {
  return '' + JIRA.WorkflowDesigner.Templates.workflowDesignerSection({content: '<div class="workflow-canvas-wrapper"><div class="container"></div></div>'});
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.container.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.container';
}


JIRA.WorkflowDesigner.Templates.createStatusDialog = function(opt_data, opt_ignored) {
  return '' + JIRA.WorkflowDesigner.Templates.statusDialog(soy.$$augmentMap(opt_data, {submitText: 'Create', title: 'Create New Status'}));
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.createStatusDialog.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.createStatusDialog';
}


JIRA.WorkflowDesigner.Templates.editStatusDialog = function(opt_data, opt_ignored) {
  var output = '';
  var beforeContent__soy120 = '' + ((opt_data.numberOfWorkflows > 1) ? aui.message.warning({content: 'This status is used in other workflows, editing it will affect them.'}) : '');
  output += JIRA.WorkflowDesigner.Templates.statusDialog(soy.$$augmentMap(opt_data, {beforeContent: beforeContent__soy120, submitText: 'Save', title: 'Edit Status'}));
  return output;
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.editStatusDialog.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.editStatusDialog';
}


JIRA.WorkflowDesigner.Templates.fullScreenButtons = function(opt_data, opt_ignored) {
  return '' + aui.buttons.button({extraClasses: 'enter-full-screen full-screen-trigger', iconClass: 'aui-icon-small', iconType: 'aui', text: '', extraAttributes: {title: 'Enter full screen'}}) + aui.buttons.button({extraClasses: 'exit-full-screen full-screen-trigger hidden', iconClass: 'aui-icon-small', iconType: 'aui', text: '', extraAttributes: {title: 'Exit full screen'}});
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.fullScreenButtons.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.fullScreenButtons';
}


JIRA.WorkflowDesigner.Templates.loopedTransitionDialogContent = function(opt_data, opt_ignored) {
  return '<strong>' + soy.$$escapeHtml(opt_data.name) + '</strong><p>' + soy.$$escapeHtml('All statuses can make use of this transition.') + '</p>';
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.loopedTransitionDialogContent.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.loopedTransitionDialogContent';
}


JIRA.WorkflowDesigner.Templates.globalTransitionDialogContent = function(opt_data, opt_ignored) {
  return '<strong>' + soy.$$escapeHtml(opt_data.name) + '</strong><p>' + soy.$$escapeHtml(AJS.format('All statuses can transition to \x27\x27{0}\x27\x27.',opt_data.statusName)) + '</p>';
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.globalTransitionDialogContent.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.globalTransitionDialogContent';
}


JIRA.WorkflowDesigner.Templates.lastEditedMessage = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.updatedDate && opt_data.updateAuthor) {
    var authorName__soy157 = '' + soy.$$escapeHtml(opt_data.updateAuthor.displayName);
    var timeElement__soy160 = '<time datetime="' + soy.$$escapeHtml(opt_data.updatedDate) + '"></time>';
    var wasCurrentUser__soy164 = opt_data.currentUserName == opt_data.updateAuthor.userName;
    output += '<span class="last-edited-message">' + ((wasCurrentUser__soy164) ? soy.$$filterNoAutoescape(AJS.format('Last edited by you, {0}',timeElement__soy160)) : soy.$$filterNoAutoescape(AJS.format('Last edited by {0}, {1}',authorName__soy157,timeElement__soy160))) + '</span>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.lastEditedMessage.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.lastEditedMessage';
}


JIRA.WorkflowDesigner.Templates.primaryActions = function(opt_data, opt_ignored) {
  return '' + aui.toolbar2.item({content: '' + aui.buttons.button({extraClasses: 'add-status', iconClass: 'aui-icon-small aui-iconfont-add', iconText: 'Add status', iconType: 'aui', text: 'Add status'}) + aui.buttons.button({extraClasses: 'add-transition', iconClass: 'aui-icon-small aui-iconfont-add', iconText: 'Add transition', iconType: 'aui', text: 'Add transition'}) + aui.form.checkboxField({extraClasses: 'show-transition-labels', fields: [{id: 'show-transition-labels', isChecked: opt_data.showTransitionLabels, labelText: 'Show transition labels'}], legendContent: ''}), item: 'primary'});
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.primaryActions.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.primaryActions';
}


JIRA.WorkflowDesigner.Templates.progressIndicatorBlanket = function(opt_data, opt_ignored) {
  return '<div class="blanket"></div><div class="spinner"></div>';
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.progressIndicatorBlanket.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.progressIndicatorBlanket';
}


JIRA.WorkflowDesigner.Templates.secondaryActions = function(opt_data, opt_ignored) {
  return '' + aui.toolbar2.item({content: '' + ((! opt_data.immutable) ? JIRA.WorkflowDesigner.Templates.lastEditedMessage(opt_data) : '') + ((opt_data.fullScreenButton) ? JIRA.WorkflowDesigner.Templates.fullScreenButtons(null) : ''), item: 'secondary'});
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.secondaryActions.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.secondaryActions';
}


JIRA.WorkflowDesigner.Templates.statusDialog = function(opt_data, opt_ignored) {
  return '<div class="aui-dialog-content">' + aui.form.form({action: '', content: '<h2 class="dialog-title">' + soy.$$escapeHtml(opt_data.title) + '</h2><div class="form-body">' + ((opt_data.beforeContent) ? soy.$$filterNoAutoescape(opt_data.beforeContent) : '') + aui.form.textField({id: 'status-name', isRequired: true, labelContent: 'Name', name: 'name', value: opt_data.name}) + aui.form.textareaField({id: 'status-description', labelContent: 'Description', name: 'description', rows: 4, value: opt_data.description}) + ((opt_data.showStatusCategoryField) ? JIRA.WorkflowDesigner.Templates.statusCategorySelectField({id: 'status-category-id', statusCategoryOptions: opt_data.statusCategoryOptions}) : '') + '</div><div class="buttons-container form-footer">' + ((! opt_data.statusId) ? '<div class="checkbox buttons-container-left"><input ' + ((opt_data.createGlobalTransition) ? 'checked="checked"' : '') + ' class="checkbox" id="create-global-transition-create" type="checkbox"><label for="create-global-transition-create">' + soy.$$escapeHtml('Allow all statuses to transition to this one') + '</label></div>' : '') + '<div class="buttons">' + aui.form.submit({extraClasses: 'aui-button aui-button-primary', name: 'submit', text: opt_data.submitText}) + aui.form.linkButton({name: 'cancel', text: 'Cancel'}) + '</div></div>'}) + '</div>';
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.statusDialog.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.statusDialog';
}


JIRA.WorkflowDesigner.Templates.zoomControl = function(opt_data, opt_ignored) {
  return '<button ' + ((opt_data.zoomInDisabled) ? 'aria-disabled="true"' : '') + ' class="aui-button zoom-in" title="' + soy.$$escapeHtml('Zoom in') + '" type="button">+</button><button ' + ((opt_data.zoomOutDisabled) ? 'aria-disabled="true"' : '') + ' class="aui-button zoom-out" title="' + soy.$$escapeHtml('Zoom out') + '" type="button">&ndash;</button>';
};
if (goog.DEBUG) {
  JIRA.WorkflowDesigner.Templates.zoomControl.soyTemplateName = 'JIRA.WorkflowDesigner.Templates.zoomControl';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/lib/cocktail-amd.js' */
define("workflow-designer/cocktail",["atlassian/libs/cocktail-0.3.0"],function(i){return i});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/util/Messages.js' */
define("workflow-designer/messages",["jira/message","workflow-designer/underscore"],function(e,s){return{showErrorMessage:function(r,o){var n;return o=s.defaults({},o,{closeable:!0,timeout:0}),r&&(n=e.showErrorMsg(r,o),n.css("z-index",2510)),n}}}),AJS.namespace("JIRA.WorkflowDesigner.Messages",null,require("workflow-designer/messages"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/util/BrowserUtilities.js' */
define("workflow-designer/browser-utilities",["workflow-designer/underscore","jquery"],function(e,r){function n(e){return encodeURIComponent(e).replace(/[!'()]/g,escape).replace(/\*/g,"%2A").replace(/%20/g,"+")}return{escapeQueryParameter:n,makeQueryString:function(r){function i(r){return e.map(r,n).join("=")}return e.map(e.pairs(r),i).join("&")},getZoomLevel:function(){var e;return r.browser.mozilla?null:(r.browser.msie?e=screen.deviceXDPI/screen.logicalXDPI:r.browser.webkit&&(e=window.outerWidth/window.innerWidth),Math.round(10*e)/10)},isMac:function(){return navigator.platform.toUpperCase().indexOf("MAC")!==-1}}}),AJS.namespace("JIRA.WorkflowDesigner.BrowserUtilities",null,require("workflow-designer/browser-utilities"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/util/BrowserZoomChecker.js' */
define("workflow-designer/browser-zoom-checker",["workflow-designer/messages","workflow-designer/browser-utilities","workflow-designer/underscore","jquery"],function(e,s,o,r){var i=function(){o.bindAll(this,"_startWindowResizeSession","_endWindowResizeSession"),r(window).on("resize",this._startWindowResizeSession),this._debouncedEndWindowResizeSession=o.debounce(this._endWindowResizeSession,250),this._intervalId=setInterval(o.bind(this._check,this),1e3)};return o.extend(i.prototype,{_isMac:s.isMac(),_msgErrorZoomLevel:s.isMac()?"The workflow designer may not behave correctly at your current browser zoom level, press \u2318 + 0 to reset it.":"The workflow designer may not behave correctly at your current browser zoom level, press Ctrl + 0 to reset it.",_check:function(){if(!this._windowIsResizing){var e=s.getZoomLevel();e&&1!==e?this._showErrorMessage(this._msgErrorZoomLevel):this._destroyErrorMessage()}},destroy:function(){clearInterval(this._intervalId),r(window).off("resize",this._startWindowResizeSession),this._destroyErrorMessage()},isErrorMessageDisplayed:function(){return this._browserZoomMessage&&this._browserZoomMessage.is(":visible")},_destroyErrorMessage:function(){this._browserZoomMessage&&(this._browserZoomMessage.remove(),delete this._browserZoomMessage)},_showErrorMessage:function(s){this._browserZoomMessage||(this._browserZoomMessage=e.showErrorMessage(s))},_endWindowResizeSession:function(){this._windowIsResizing=!1,this._destroyErrorMessage()},_startWindowResizeSession:function(){this._windowIsResizing=!0,this._debouncedEndWindowResizeSession()}}),i}),AJS.namespace("JIRA.WorkflowDesigner.BrowserZoomChecker",null,require("workflow-designer/browser-zoom-checker"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/util/Collection.js' */
define("workflow-designer/collection",["workflow-designer/backbone","workflow-designer/underscore"],function(t,e){var n=["chain","each","filter","find","invoke","without"],i=function(t){this.length=0,this._objects=[],this.reset(t||[])};return e.extend(i.prototype,t.Events,{add:function(t){return t=[].concat(t),e.each(t,function(t){t.on("all",this.trigger,this)},this),this._objects=this._objects.concat(t),this.length=this._objects.length,this},at:function(t){return this._objects[t]},remove:function(t){return t=e.isArray(t)?t:[t],e.each(t,function(t){t.off("all",this.trigger,this)},this),this._objects=e.difference(this._objects,t),this.length=this._objects.length,this},reset:function(t){return this.remove(this._objects),this.add(t)}}),e.each(n,function(t){i.prototype[t]=function(){return e[t].apply(e,[this._objects].concat(e.toArray(arguments)))}}),i}),AJS.namespace("JIRA.WorkflowDesigner.Collection",null,require("workflow-designer/collection"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/util/Direction.js' */
define("workflow-designer/direction",[],function(){return{DOWN:2,LEFT:3,RIGHT:1,UP:0}}),AJS.namespace("JIRA.WorkflowDesigner.Direction",null,require("workflow-designer/direction"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/util/Draw2DUtilities.js' */
define("workflow-designer/draw2d-utilities",[],function(){return{setCursor:function(e,r){var i=e.svgNodes||e.shape;i&&i.attr("cursor",r)}}}),AJS.namespace("JIRA.WorkflowDesigner.Draw2DUtilities",null,require("workflow-designer/draw2d-utilities"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/util/FigureUtilities.js' */
define("workflow-designer/figure-utilities",["workflow-designer/draw-2d","workflow-designer/underscore"],function(e,n){return{calculateBoundingBox:function(r){var i,l,u=null,o=null,t=null,g=null;return n.each(r,function(e){var n=e.getX(),r=e.getY();(!u||u>n)&&(u=n),(!o||o<n)&&(o=n),(!t||t>r)&&(t=r),(!g||g<r)&&(g=r)}),i=o-u,l=g-t,new e.geo.Rectangle(u,t,i,l)}}}),AJS.namespace("JIRA.WorkflowDesigner.FigureUtilities",null,require("workflow-designer/figure-utilities"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/util/patches/FigurePatch.js' */
!function(){var s=require("workflow-designer/draw-2d"),e=require("workflow-designer/underscore");e.extend(s.Figure.prototype,{sendToBack:function(){return this.svgNodes&&this.svgNodes.toBack(),this.shape&&this.shape.toBack(),this},sendToFront:function(){return this.shape&&this.shape.toFront(),this.svgNodes&&this.svgNodes.toFront(),this}})}();;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/util/patches/LabelPatch.js' */
!function(){var e=require("workflow-designer/draw-2d"),t=require("workflow-designer/underscore"),i=e.shape.basic.Label.prototype.setText;t.extend(e.shape.basic.Label.prototype,{setText:function(){i.apply(this,arguments),this.cachedHeight=null,this.cachedMinHeight=null,this.cachedWidth=null,this.cachedMinWidth=null}})}();;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/util/patches/LinePatch.js' */
!function(){var e=require("workflow-designer/figure-utilities"),r=require("workflow-designer/draw-2d"),i=require("workflow-designer/underscore");i.extend(r.shape.basic.Line.prototype,{getBoundingBox:function(){return e.calculateBoundingBox([this.getStartPoint(),this.getEndPoint()])}}),r.shape.basic.Line.hit=function(e,r,i,t,n,o,u){t-=r,n-=i,o-=r,u-=i;var a,s=o*t+u*n;if(s<=0)return!1;if(o=t-o,u=n-u,s=o*t+u*n,s<=0)return!1;a=s*s/(t*t+n*n);var d=o*o+u*u-a;return d<0&&(d=0),Math.sqrt(d)<e}}();;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/util/patches/NodePatch.js' */
!function(){var e=require("workflow-designer/draw-2d"),o=require("workflow-designer/underscore");o.extend(e.shape.node.Node.prototype,{onDoubleClick:jQuery.noop})}();;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/util/patches/PointPatch.js' */
!function(){var e=require("workflow-designer/draw-2d"),r=require("workflow-designer/underscore");r.extend(e.geo.Point.prototype,{add:function(){return this.getTranslated.apply(this,arguments)},getComponents:function(){return[this.x,this.y]}})}();;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/util/patches/PolyLinePatch.js' */
!function(){var e=require("workflow-designer/figure-utilities"),r=require("workflow-designer/draw-2d"),i=require("workflow-designer/underscore");i.extend(r.shape.basic.PolyLine.prototype,{getBoundingBox:function(){var r=this.getPoints().asArray();return e.calculateBoundingBox(r)}})}();;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/util/patches/RectanglePatch.js' */
!function(){var t=require("workflow-designer/draw-2d"),e=require("workflow-designer/underscore"),i={union:function(e){var i,n;return i={x:Math.max(e.getRight(),this.getRight()),y:Math.max(e.getBottom(),this.getBottom())},n={x:Math.min(e.getLeft(),this.getLeft()),y:Math.min(e.getTop(),this.getTop())},new t.geo.Rectangle(n.x,n.y,i.x-n.x,i.y-n.y)},clone:function(){return new t.geo.Rectangle(this.x,this.y,this.w,this.h)},scaleByFactor:function(t){return this.scale(this.w*(t-1),this.h*(t-1))},scaleHeight:function(t){return this.h+=t,this.y-=t/2,this.adjustBoundary(),this},scaleWidth:function(t){return this.w+=t,this.x-=t/2,this.adjustBoundary(),this},getRelativePosition:function(t){return t.subtract(this.getTopLeft())},getRelativePositionAsPercentage:function(e){var i=this.getRelativePosition(e);return new t.geo.Point(i.x/this.w,i.y/this.h)}};e.extend(t.geo.Rectangle.prototype,i)}();;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/util/StatusLozengeColours.js' */
define("workflow-designer/status-lozenge-colours",["workflow-designer/underscore","jquery"],function(r,o){function e(o){return o=o.match(/\d+/g),"#"+r.map(o,function(r){return r=parseInt(r,10).toString(16),("0"+r).slice(-2)}).join("")}function t(r){var o=n(r),t=o.css(r.property);return o.remove(),e(t)}function n(r){return o(JIRA.Template.Util.Issue.Status.issueStatus({isSubtle:!!r.isSubtle,issueStatus:{statusCategory:{colorName:r.colourName}}})).hide().appendTo("body")}return{getBackgroundColour:function(r){return r.property="background-color",t(r)},getBorderColour:function(r){return r.property="border-top-color",t(r)},getColour:function(r){return r.property="color",t(r)}}}),AJS.namespace("JIRA.WorkflowDesigner.StatusLozengeColours",null,require("workflow-designer/status-lozenge-colours"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/util/SVGUtilities.js' */
define("workflow-designer/svg-utilities",["jquery"],function(e){function r(r,o,n,t){var i=e(r).closest("svg").get(0).createSVGPoint();return i.x=n,i.y=t,i=i.matrixTransform(o),{x:i.x,y:i.y}}var o={fromScreenToSVGCoordinate:function(o,n,t){return o=e(o).get(0),r(o,o.getScreenCTM().inverse(),n,t)},fromSVGToPageCoordinate:function(r,n,t){var i=e(window.document),g=o.fromSVGToScreenCoordinate(r,n,t);return g.x+=i.scrollLeft(),g.y+=i.scrollTop(),g},fromSVGToScreenCoordinate:function(o,n,t){return o=e(o).get(0),r(o,o.getScreenCTM(),n,t)},getPageBoundingBox:function(r){var n,t,i=e(r).get(0).getBBox();return t=o.fromSVGToPageCoordinate(r,i.x,i.y),n=o.fromSVGToPageCoordinate(r,i.x+i.width,i.y+i.height),{height:n.y-t.y,width:n.x-t.x,x:t.x,y:t.y}}};return o}),AJS.namespace("JIRA.WorkflowDesigner.SVGUtilities",null,require("workflow-designer/svg-utilities"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/util/UnderscoreMixins.js' */
require(["workflow-designer/underscore"],function(n){n.mixin({cartesianProduct:function(){var r=Array.prototype.slice.call(arguments,0);return n.reduce(r,function(r,e){var c=[];return n.each(r,function(r){n.each(e,function(n){c.push(r.concat(n))})}),c},[[]])},flatMap:n.compose(n.flatten,n.map),sum:function(r,e){return n.reduce(r,function(n,r){return n+r},0,e)}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/util/Vector2D.js' */
define("workflow-designer/vector-2d",["workflow-designer/draw-2d"],function(t){var e=t.geo.Point;return e.extend({init:function(t,n){var i=t instanceof e&&n instanceof e,r=t,o=n;i&&(r=n.x-t.x,o=n.y-t.y),this._super(r,o)},getLength:function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},multiply:function(t){return this.x*=t,this.y*=t,this},normalize:function(){var t=this.getLength();return t>0&&this.multiply(1/t),this}})}),AJS.namespace("JIRA.WorkflowDesigner.Vector2D",null,require("workflow-designer/vector-2d"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/util/ViewBoxTransformer.js' */
define("workflow-designer/viewbox-transformer",["workflow-designer/draw-2d"],function(e){function t(e,t,o){var g=e.clone().scaleByFactor(2*n),r=g.getLeft()-e.getLeft(),i=g.getTop()-e.getTop();return t<r&&g.scaleWidth(2*(r-t+a)),o<i&&g.scaleHeight(2*(i-o+a)),g}function o(e,o,g){return t(e,o,g).translate(-o,-g).resize(o,g)}function g(e,t){var o=r*t,g=i*t,n=Math.max(Math.min(e,o),g);return Math.abs(n-1)>1e-4?n:1}var n=.25,r=2,i=.5,a=10;return{getZoomViewBox:function(t){var n,r,i,a,f,s=t.viewBox,u=t.diagramBoundingBox,w=g(t.factor,t.zoom),c=t.target;return r=s.getWidth()*w,n=s.getHeight()*w,a=o(u,r,n),i=s.getRelativePositionAsPercentage(c),f=new e.geo.Point(c.getX()-i.x*r,c.getY()-i.y*n),f.setBoundary(a.getLeft(),a.getTop(),a.getRight(),a.getBottom()),new e.geo.Rectangle(f.getX(),f.getY(),r,n)},getPanViewBox:function(t){var g,n,r=t.viewBox,i=t.diagramBoundingBox,a=t.displacement;return g=o(i,r.getWidth(),r.getHeight()),n=r.getTopLeft().translate(a.x,a.y).setBoundary(g.getLeft(),g.getTop(),g.getRight(),g.getBottom()),new e.geo.Rectangle(n.getX(),n.getY(),r.getWidth(),r.getHeight())}}}),AJS.namespace("JIRA.WorkflowDesigner.ViewBoxTransformer",null,require("workflow-designer/viewbox-transformer"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/util/ColorProvider.js' */
define("workflow-designer/color-provider",["jira/featureflags/simplified-ux-feature-manager"],function(e){var r=e.isAdg3StylesEnabled(),o="#C0C0C0",n="#DFE1E6",t="#333333",l="#172B4D",i="#1A8CFF",u="#0052CC",a="#F5F5F5",f="#DFE1E6",d="#333333",g="#172B4D";return{getUnselectedPathColor:function(){return r?n:o},getHighlightedPathColor:function(){return r?l:t},getSelectedPathColor:function(){return r?u:i},getSelectedLabelColor:function(){return r?f:a},getLabelColor:function(){return r?g:d}}}),AJS.namespace("JIRA.WorkflowDesigner.ColorProvider",null,require("workflow-designer/color-provider"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/io/ErrorHandler.js' */
define("workflow-designer/io/error-handler",["workflow-designer/messages","workflow-designer/underscore"],function(e,r){var o;o={generic:"The Jira server was contacted but has returned an error response. We are unsure of the result of this operation.",notAuthenticated:"You are not authorized to perform this operation.  Please log in.",timeout:"The call to the Jira server did not complete within the timeout period.  We are unsure of the result of this operation."};var t={getErrorMessage:function(e,t,n){var s=e&&e.responseText,a=e&&e.status;if(n=r.defaults({},n,o),"timeout"===t)return n.timeout;if(401===a)return n.notAuthenticated;if(r.contains([400,403,404],a))try{return JSON.parse(s).errorMessages[0]||s}catch(e){return s}return"abort"!==t?n.generic:null},handle:function(r,o){var t;t=this.getErrorMessage(r,o),t&&e.showErrorMessage(t)}};return r.bindAll(t,"getErrorMessage","handle"),t}),AJS.namespace("JIRA.WorkflowDesigner.IO.ErrorHandler",null,require("workflow-designer/io/error-handler"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/io/ajax/AJAXManager.js' */
define("workflow-designer/io/ajax/ajax-manager",["jira/ajs/ajax/smart-ajax","workflow-designer/underscore","jquery"],function(e,a,r){return{_makeRequest:function(n){var o,s=r.Deferred();return n.headers=a.extend({},n.headers,{"X-Atlassian-Token":"no-check"}),o=e.makeChainableRequest(n),o.done(s.resolve),o.fail(s.reject),s.promise()}}}),AJS.namespace("JIRA.WorkflowDesigner.IO.AJAX.AJAXManager",null,require("workflow-designer/io/ajax/ajax-manager"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/models/PanelModel.js' */
define("workflow-designer/panel-model",["jquery","workflow-designer/backbone"],function(e,l){return l.Model.extend({defaults:{weight:0,template:null}})}),AJS.namespace("JIRA.WorkflowDesigner.PanelModel",null,require("workflow-designer/panel-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/collections/PanelCollection.js' */
define("workflow-designer/panel-collection",["workflow-designer/panel-model","workflow-designer/backbone"],function(e,n){return n.Collection.extend({model:function(n,o){return new e(n,o)},comparator:"weight"})}),AJS.namespace("JIRA.WorkflowDesigner.PanelCollection",null,require("workflow-designer/panel-collection"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/models/LoopedTransitionContainerModel.js' */
define("workflow-designer/looped-transition-container-model",["workflow-designer/backbone","workflow-designer/underscore"],function(e,n){return e.Model.extend({defaults:{x:null,y:null},hasCoordinates:function(){var e=this.get("x"),o=this.get("y");return n.isNumber(e)&&n.isNumber(o)}})}),AJS.namespace("JIRA.WorkflowDesigner.LoopedTransitionContainerModel",null,require("workflow-designer/looped-transition-container-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/models/StatusModel.js' */
define("workflow-designer/status-model",["workflow-designer/backbone","workflow-designer/underscore"],function(e,t){return e.Model.extend({defaults:{description:"",id:null,initial:!1,name:"",statusCategory:null,statusId:null,stepId:null,x:null,y:null,validations:null},hasCoordinates:function(){var e=this.get("x"),n=this.get("y");return t.isNumber(e)&&t.isNumber(n)},hasTransition:function(e){return e.get("source")===this||e.get("target")===this},isInitial:function(){return this.get("initial")}})}),AJS.namespace("JIRA.WorkflowDesigner.StatusModel",null,require("workflow-designer/status-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/collections/StatusCollection.js' */
define("workflow-designer/status-collection",["workflow-designer/status-model","workflow-designer/backbone"],function(e,o){return o.Collection.extend({model:function(o,n){return new e(o,n)}})}),AJS.namespace("JIRA.WorkflowDesigner.StatusCollection",null,require("workflow-designer/status-collection"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/models/TransitionOptionTypeModel.js' */
define("workflow-designer/transition-option-type-model",["workflow-designer/backbone"],function(e){return e.Model.extend({defaults:{count:0,key:null,name:null,url:null,weight:1e3}})}),AJS.namespace("JIRA.WorkflowDesigner.TransitionOptionTypeModel",null,require("workflow-designer/transition-option-type-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/collections/TransitionOptionTypeCollection.js' */
define("workflow-designer/transition-option-type-collection",["workflow-designer/transition-option-type-model","workflow-designer/backbone"],function(o,n){return n.Collection.extend({model:function(n,e){return new o(n,e)}})}),AJS.namespace("JIRA.WorkflowDesigner.TransitionOptionTypeCollection",null,require("workflow-designer/transition-option-type-collection"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/models/TransitionModel.js' */
define("workflow-designer/transition-model",["workflow-designer/transition-option-type-collection","workflow-designer/backbone","workflow-designer/underscore","jquery"],function(t,n,e,i){return n.Model.extend({defaults:function(){return{id:null,actionId:null,description:null,globalTransition:!1,loopedTransition:!1,name:null,screenId:null,screenName:null,source:null,sourceAngle:null,target:null,targetAngle:null,transitionOptions:new t,validations:null}},initialize:function(){this._createId(),this.on("change:actionId change:source change:target",e.bind(this._createId,this))},_createId:function(){function t(t){return i.get(t)&&i.get(t).get("id")||null}var n,e,i=this;if(this.isLoopedTransition()?n=e="S<-1>":this.isGlobalTransition()?n=e=t("target"):(n=t("source"),e=t("target")),this.getActionId()&&n&&e){var o=this.get("source")&&this.get("source").isInitial()?"IA":"A";this.set("id",o+"<"+this.getActionId()+":"+n+":"+e+">")}},isGlobalTransition:function(){return this.get("globalTransition")},isLoopedTransition:function(){return this.get("loopedTransition")},isInitial:function(){return!this.isGlobalTransition()&&!this.isLoopedTransition()&&this.get("source").isInitial()},getActionId:function(){return this.get("actionId")},getSourceStepId:function(){var t=this.get("source");return t&&t.get("stepId")},getTargetStepId:function(){var t=this.get("target");return t&&t.get("stepId")},setSource:function(t,n){this.set({source:t,sourceAngle:n})},setTarget:function(t,n){this.set({target:t,targetAngle:n})},sync:i.noop})}),AJS.namespace("JIRA.WorkflowDesigner.TransitionModel",null,require("workflow-designer/transition-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/collections/TransitionCollection.js' */
define("workflow-designer/transition-collection",["workflow-designer/transition-model","workflow-designer/backbone"],function(n,e){return e.Collection.extend({model:function(e,i){return new n(e,i)},getInitial:function(){return this.find(function(n){return n.isInitial()})}})}),AJS.namespace("JIRA.WorkflowDesigner.TransitionCollection",null,require("workflow-designer/transition-collection"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/models/WorkflowModel.js' */
define("workflow-designer/workflow-model",["workflow-designer/status-model","workflow-designer/status-collection","workflow-designer/transition-model","workflow-designer/transition-collection","workflow-designer/looped-transition-container-model","workflow-designer/backbone","workflow-designer/underscore"],function(t,e,n,i,s,o,r){return o.Model.extend({defaults:function(){return{currentStepId:null,draft:!1,name:null,liveStepIds:null,loadedAt:null,loopedTransitionContainer:null,statuses:new e,transitions:new i,updatedDate:null,updateAuthor:null}},initialize:function(){this._triggerLayoutChanged=r.bind(this.trigger,this,"layoutChanged"),this.listenTo(this.get("statuses"),{"change:x change:y":this._triggerLayoutChanged,reset:this._detectNewStatus}),this.listenTo(this.get("transitions"),{"change:actionId change:sourceAngle change:target change:targetAngle remove":this._triggerLayoutChanged,reset:this._detectNewTransition}),this.on("validation:statuses",this._updateValidation("statuses","stepId")),this.on("validation:transitions",this._updateValidation("transitions","id"))},_updateValidation:function(t,e){var n=this.get(t);return function(t){n.forEach(function(n){n.set("validations",t[n.get(e)])})}},addStatus:function(e){var n=e instanceof t;return n||(e=new t(e)),this.get("statuses").add(e),e},addTransition:function(t){var e,i=t instanceof n;return i||(t=new n(t)),this.get("transitions").add(t),t.isLoopedTransition()&&(e=this.get("loopedTransitionContainer"),e||(e=new s,this.set("loopedTransitionContainer",e),this.listenTo(e,{"change:x change:y":this._triggerLayoutChanged})),this.trigger("loopedTransitionAdded")),this._triggerLayoutChanged(),t},_detectNewStatus:function(t,e){var n=this._getNewModel(t,e.previousModels);n&&this.trigger("new:status",n)},_detectNewTransition:function(t,e){var n=this._getNewModel(t,e.previousModels);n&&this.trigger("new:transition",n)},getGlobalTransitionForStatus:function(t){return this.get("transitions").findWhere({globalTransition:!0,target:t})},_getInitialTransitions:function(){return this.get("transitions").filter(function(t){return t.isInitial()})},getInitialTransitionDestinations:function(){return r.map(this._getInitialTransitions(),function(t){return t.get("target")})},_getNewModel:function(t,e){var n=0===e.length;if(t=t.filter(function(t){return r.every(e,function(e){return t.id!==e.id})}),1===t.length&&!n)return t[0]},getStatus:function(t){return this.get("statuses").get(t)},removeLoopedTransitionContainer:function(){this.unset("loopedTransitionContainer"),this._triggerLayoutChanged()},removeTransition:function(t){this.get("transitions").remove(t),t.isLoopedTransition()&&this.trigger("loopedTransitionRemoved")},reset:function(t){this.trigger("reset:before"),this.get("statuses").reset(t.statuses),this.get("transitions").reset(t.transitions),this.set(r.omit(t,"statuses","transitions")),this.get("loopedTransitionContainer")&&this.listenTo(this.get("loopedTransitionContainer"),{"change:x change:y":this._triggerLayoutChanged}),this.trigger("reset:after")},statusHasGlobalTransition:function(t){return!!this.getGlobalTransitionForStatus(t)},statusIsDeletable:function(t){var e=this.get("draft"),n=r.contains(this.get("liveStepIds"),t.get("stepId"));return!(e&&n)},updateTransitionSource:function(t){var e=this.get("statuses").findWhere({initial:!1,stepId:t.sourceStepId});t.transition.setSource(e,t.sourceAngle)},updateTransitionTargets:function(t){var e,n=t.transition.get("actionId");e=this.get("statuses").findWhere({initial:!1,stepId:t.targetStepId}),t.transition.setTarget(e,t.targetAngle),this.get("transitions").chain().filter(function(e){return e!==t.transition&&e.get("actionId")===n}).invoke("setTarget",e)}})}),AJS.namespace("JIRA.WorkflowDesigner.WorkflowModel",null,require("workflow-designer/workflow-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/io/WorkflowDataReader.js' */
define("workflow-designer/io/workflow-data-reader",["workflow-designer/status-model","workflow-designer/looped-transition-container-model","workflow-designer/transition-model","workflow-designer/underscore"],function(e,o,r,n){function t(e,o){return e=n.chain(e).omit("sourceId","targetId").extend({source:o[e.sourceId],target:o[e.targetId]}).value(),new r(e)}return{read:function(r){var a,i={},s=[];if(r&&r.statuses&&r.transitions)return n.each(r.statuses,function(o){var r=new e(o);i[r.id]=r}),n.each(r.transitions,function(e){s.push(t(e,i))}),r.loopedTransitionContainer&&(a=new o(r.loopedTransitionContainer)),{loopedTransitionContainer:a,statuses:n.values(i),transitions:s,updateAuthor:r.updateAuthor,updatedDate:new Date(r.updatedDate)}}}}),AJS.namespace("JIRA.WorkflowDesigner.IO.WorkflowDataReader",null,require("workflow-designer/io/workflow-data-reader"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/io/WorkflowDataWriter.js' */
define("workflow-designer/io/workflow-data-writer",["workflow-designer/underscore"],function(e){function t(t){return e.chain(t.toJSON()).pick("id","x","y").value()}function r(t){var r,n,i,o={};return t.isLoopedTransition()||(r=t.isGlobalTransition(),n=t.get("source"),i=t.get("target"),o={sourceId:r?i.id:n.id,targetId:i.id}),e.chain(t.toJSON()).pick("id","sourceAngle","targetAngle").extend(o).value()}return{write:function(n){var i,o,a=n.get("loopedTransitionContainer");return o={statuses:n.get("statuses").map(t),transitions:n.get("transitions").map(r)},a&&e.extend(o,{loopedTransitionContainer:{x:a.get("x"),y:a.get("y")}}),i={layout:o},e.chain(n.toJSON()).pick("draft","name").extend(i).value()}}}),AJS.namespace("JIRA.WorkflowDesigner.IO.WorkflowDataWriter",null,require("workflow-designer/io/workflow-data-writer"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/io/ajax/WorkflowAJAXManager.js' */
define("workflow-designer/io/ajax/workflow-ajax-manager",["workflow-designer/io/workflow-data-reader","workflow-designer/io/workflow-data-writer","workflow-designer/io/ajax/ajax-manager","workflow-designer/io/error-handler","workflow-designer/underscore","jquery","wrm/context-path","jira/util/data/meta","jira/featureflags/feature-manager"],function(e,r,t,s,a,o,i,n,u){return a.extend({},t,{discard:function(e){var r=o.Deferred(),t=this;return this._publishOrDiscardRequest=this._makeRequest({contentType:"application/json",data:e,success:r.resolve,type:"POST",url:i()+"/rest/workflowDesigner/latest/workflows/discardDraft"}),this._publishOrDiscardRequest.fail(function(e,t){r.reject(s.getErrorMessage(e,t))}),this._publishOrDiscardRequest.always(function(){delete t._publishOrDiscardRequest}),r.promise()},load:function(r,t){var n,u=o.Deferred();n=this._makeRequest({data:{name:r,draft:!!t},dataType:"json",url:i()+"/rest/workflowDesigner/latest/workflows"}),n.done(function(r){var t,s=r.layout;t=e.read(s),t=a.extend(t,{liveStepIds:r.liveStepIds}),u.resolve(t,r)}),n.fail(function(e,r){u.reject(s.getErrorMessage(e,r))});try{this._shadowLayoutRequestsEnabled()&&this._makeRequest({url:this._getShadowRequestURL()})}catch(e){}return u.promise()},publish:function(e){var t=o.Deferred(),a=this,n=r.write(e);return this._publishOrDiscardRequest=this._makeRequest({contentType:"application/json",data:JSON.stringify(n),success:t.resolve,type:"POST",url:i()+"/rest/workflowDesigner/latest/workflows/publishDraft"}),this._publishOrDiscardRequest.fail(function(e,r){t.reject(s.getErrorMessage(e,r))}),this._publishOrDiscardRequest.always(function(){delete a._publishOrDiscardRequest}),t.promise()},save:function(e){var t,a=o.Deferred(),n=r.write(e);if(!this._publishOrDiscardRequest){t=this._makeRequest({contentType:"application/json",data:JSON.stringify(n),success:a.resolve,type:"POST",url:i()+"/rest/workflowDesigner/latest/workflows"}),t.fail(function(e,r){a.reject(s.getErrorMessage(e,r))});try{this._shadowLayoutRequestsEnabled()&&this._makeRequest({type:"PUT",url:this._getShadowRequestURL()})}catch(e){}}return a.promise()},triggerMauEventForProject:function(e){this._makeRequest({data:{projectKey:e},dataType:"json",type:"POST",url:AJS.contextPath()+"/rest/workflowDesigner/latest/workflowMau"})},_getShadowRequestURL:function(){return i()+"/gateway/api/project-config/workflow/"+n.get("cloud-id")+"/projects/-1/issuetypes/-1/workflow/layout"},_shadowLayoutRequestsEnabled:function(){return u.isFeatureEnabled("project.config.dw.workflow.editor.shadow.layout.requests.to.jira-dw-workflow")}})}),AJS.namespace("JIRA.WorkflowDesigner.IO.AJAX.WorkflowAJAXManager",null,require("workflow-designer/io/ajax/workflow-ajax-manager"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/io/ajax/ProjectConfigAJAXManager.js' */
define("workflow-designer/io/ajax/project-config-ajax-manager",["workflow-designer/io/ajax/ajax-manager","workflow-designer/io/error-handler","workflow-designer/io/workflow-data-reader","workflow-designer/backbone","workflow-designer/underscore","jquery","wrm/context-path"],function(e,r,a,o,n,t,i){function f(e){var o,i,f=t.Deferred();return e.done(function(e){i=e.layout,o=a.read(i),o=n.extend(o,{liveStepIds:e.liveStepIds}),f.resolve(e.isDraft,o,e)}),e.fail(function(e,a){f.reject(r.getErrorMessage(e,a))}),f.promise()}var d=i()+"/rest/workflowDesigner/latest/workflows";return n.extend({},e,{loadDraftWorkflowIfAvailable:function(e){var r,a;return r=n.extend({},e,{preferDraft:!0}),a=this._makeRequest({data:r,dataType:"json",url:d}),f(a)},loadOrCreateDraftWorkflow:function(e){var r,a;return r=n.extend({},e,{draft:!0}),a=this._makeRequest({data:r,dataType:"json",url:d}),f(a)}})}),AJS.namespace("JIRA.WorkflowDesigner.IO.AJAX.ProjectConfigAJAXManager",null,require("workflow-designer/io/ajax/project-config-ajax-manager"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/io/ajax/ScreensAJAXManager.js' */
define("workflow-designer/io/ajax/screens-ajax-manager",["workflow-designer/io/ajax/ajax-manager","workflow-designer/io/error-handler","workflow-designer/underscore","jquery","wrm/context-path"],function(e,r,n,o,a){var s;return n.extend({},e,{getScreens:function(){var e,n=o.Deferred();return s?n.resolve(s):(e=this._makeRequest({dataType:"json",url:a()+"/rest/workflowDesigner/latest/screens"}),e.done(function(e){s=e,n.resolve(s)}),e.fail(function(e,o){n.reject(r.getErrorMessage(e,o))})),n.promise()},reset:function(){s=void 0}})}),AJS.namespace("JIRA.WorkflowDesigner.IO.AJAX.ScreensAJAXManager",null,require("workflow-designer/io/ajax/screens-ajax-manager"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/io/ajax/StatusCategoriesAJAXManager.js' */
define("workflow-designer/io/ajax/status-categories-ajax-manager",["workflow-designer/io/ajax/ajax-manager","workflow-designer/io/error-handler","workflow-designer/underscore","jquery","wrm/context-path"],function(e,r,a,o,t){var s;return a.extend({},e,{getStatusCategories:function(){var e,a=o.Deferred();return s?a.resolve(s):(e=this._makeRequest({dataType:"json",url:t()+"/rest/workflowDesigner/latest/statusCategories"}),e.done(function(e){s=e,a.resolve(s)}),e.fail(function(e,o){a.reject(r.getErrorMessage(e,o))})),a.promise()},reset:function(){s=void 0}})}),AJS.namespace("JIRA.WorkflowDesigner.IO.AJAX.StatusCategoriesAJAXManager",null,require("workflow-designer/io/ajax/status-categories-ajax-manager"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/io/ajax/StatusesAJAXManager.js' */
define("workflow-designer/io/ajax/statuses-ajax-manager",["workflow-designer/io/ajax/ajax-manager","workflow-designer/io/error-handler","workflow-designer/underscore","jquery","wrm/context-path"],function(e,r,s,t,a){var o;return s.extend({},e,{getStatuses:function(){var e,s=t.Deferred();return o?s.resolve(o):(e=this._makeRequest({dataType:"json",url:a()+"/rest/workflowDesigner/latest/statuses"}),e.done(function(e){o=e,s.resolve(o)}),e.fail(function(e,t){s.reject(r.getErrorMessage(e,t))})),s.promise()},getNumberOfAssociatedWorkflows:function(e){var s,o=t.Deferred();return s=this._makeRequest({data:{statusId:e},dataType:"json",url:a()+"/rest/workflowDesigner/latest/statuses/associatedWorkflowCount"}),s.done(function(e){o.resolve(e)}),s.fail(function(e,s){o.reject(r.getErrorMessage(e,s))}),o.promise()},reset:function(){o=void 0}})}),AJS.namespace("JIRA.WorkflowDesigner.IO.AJAX.StatusesAJAXManager",null,require("workflow-designer/io/ajax/statuses-ajax-manager"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/io/ajax/WorkflowGlobalTransitionsAJAXManager.js' */
define("workflow-designer/io/ajax/workflow-global-transitions-ajax-manager",["workflow-designer/io/ajax/ajax-manager","workflow-designer/io/workflow-data-reader","workflow-designer/io/error-handler","workflow-designer/underscore","jquery","wrm/context-path"],function(e,r,o,a,t,n){return a.extend({},e,{addGlobalTransition:function(e){var r,s=t.Deferred();return r=this._makeRequest({data:a.pick(e,"statusId","workflowName","name","description","screenId"),dataType:"json",type:"post",url:n()+"/rest/workflowDesigner/latest/workflows/globalTransitions/simple"}),r.done(s.resolve),r.fail(function(e,r){s.reject(o.getErrorMessage(e,r))}),s.promise()},createGlobalTransition:function(e){var s,i=t.Deferred();return s=this._makeRequest({data:a.pick(e,"statusId","workflowName","name","description","screenId"),dataType:"json",type:"post",url:n()+"/rest/workflowDesigner/latest/workflows/globalTransitions"}),s.done(function(e){i.resolve(r.read(e))}),s.fail(function(e,r){i.reject(o.getErrorMessage(e,r))}),i.promise()},deleteGlobalTransition:function(e){var r,s=t.Deferred();return r=this._makeRequest({data:a.pick(e,"transitionId","workflowName"),dataType:"json",type:"delete",url:n()+"/rest/workflowDesigner/latest/workflows/globalTransitions"}),r.done(s.resolve),r.fail(function(e,r){s.reject(o.getErrorMessage(e,r))}),s.promise()},updateGlobalTransition:function(e){var r,s=t.Deferred();return r=this._makeRequest({data:a.pick(e,"transitionId","name","description","screenId","workflowName"),dataType:"json",type:"put",url:n()+"/rest/workflowDesigner/latest/workflows/globalTransitions"}),r.done(s.resolve),r.fail(function(e,r){s.reject(o.getErrorMessage(e,r))}),s.promise()}})}),AJS.namespace("JIRA.WorkflowDesigner.IO.AJAX.WorkflowGlobalTransitionsAJAXManager",null,require("workflow-designer/io/ajax/workflow-global-transitions-ajax-manager"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/io/ajax/WorkflowLoopedTransitionsAJAXManager.js' */
define("workflow-designer/io/ajax/workflow-looped-transitions-ajax-manager",["workflow-designer/io/ajax/ajax-manager","workflow-designer/io/error-handler","workflow-designer/underscore","jquery","wrm/context-path"],function(e,o,r,n,a){function t(e){var a,t=n.Deferred();return a=this._makeRequest(r.defaults({},e,{dataType:"json",url:i})),a.done(t.resolve),a.fail(function(e,r){t.reject(o.getErrorMessage(e,r))}),t.promise()}var i=a()+"/rest/workflowDesigner/latest/workflows/loopedTransitions";return r.extend({},e,{addLoopedTransition:function(e){return t.call(this,{data:r.pick(e,"workflowName","name","description","screenId"),type:"post"})},deleteLoopedTransition:function(e){return t.call(this,{data:e,type:"delete"})},updateLoopedTransition:function(e){return t.call(this,{data:e,type:"put"})}})}),AJS.namespace("JIRA.WorkflowDesigner.IO.AJAX.WorkflowLoopedTransitionsAJAXManager",null,require("workflow-designer/io/ajax/workflow-looped-transitions-ajax-manager"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/io/ajax/WorkflowStatusesAJAXManager.js' */
define("workflow-designer/io/ajax/workflow-statuses-ajax-manager",["workflow-designer/io/ajax/ajax-manager","workflow-designer/io/workflow-data-reader","workflow-designer/io/ajax/statuses-ajax-manager","workflow-designer/io/error-handler","workflow-designer/underscore","jquery","wrm/context-path"],function(e,r,t,a,o,s,n){return o.extend({},e,{addStatus:function(e){var t,i=s.Deferred();return t=this._makeRequest({data:o.pick(e,"createGlobalTransition","statusId","workflowName"),dataType:"json",type:"post",url:n()+"/rest/workflowDesigner/latest/workflows/statuses"}),t.done(function(e){i.resolve(r.read(e))}),t.fail(function(e,r){i.reject(a.getErrorMessage(e,r))}),i.promise()},createStatus:function(e){var i,l=s.Deferred();return i=this._makeRequest({data:o.pick(e,"createGlobalTransition","description","name","statusCategoryId","workflowName"),dataType:"json",type:"post",url:n()+"/rest/workflowDesigner/latest/workflows/statuses/create"}),i.done(function(e){l.resolve(r.read(e)),t.reset()}),i.fail(function(e,r){l.reject(a.getErrorMessage(e,r))}),l.promise()},removeStatus:function(e){var t,i=s.Deferred();return t=this._makeRequest({data:o.pick(e,"statusId","workflowName"),dataType:"json",type:"delete",url:n()+"/rest/workflowDesigner/latest/workflows/statuses"}),t.done(function(e){i.resolve(r.read(e))}),t.fail(function(e,r){i.reject(a.getErrorMessage(e,r))}),i.promise()},updateStatus:function(e){var r,t=s.Deferred();return r=this._makeRequest({data:o.pick(e,"description","name","statusCategoryId","statusId","workflowName"),dataType:"json",type:"put",url:n()+"/rest/workflowDesigner/latest/workflows/statuses"}),r.done(t.resolve),r.fail(function(e,r){t.reject(a.getErrorMessage(e,r))}),t.promise()}})}),AJS.namespace("JIRA.WorkflowDesigner.IO.AJAX.WorkflowStatusesAJAXManager",null,require("workflow-designer/io/ajax/workflow-statuses-ajax-manager"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/io/ajax/WorkflowTransitionsAJAXManager.js' */
define("workflow-designer/io/ajax/workflow-transitions-ajax-manager",["workflow-designer/io/ajax/ajax-manager","workflow-designer/io/error-handler","workflow-designer/underscore","jquery","wrm/context-path"],function(e,r,t,a,n){function o(e){var n,o=a.Deferred();return n=this._makeRequest(t.defaults({},e,{dataType:"json",url:i})),n.done(o.resolve),n.fail(function(e,t){o.reject(r.getErrorMessage(e,t))}),o.promise()}var i=n()+"/rest/workflowDesigner/latest/workflows/transitions";return t.extend({},e,{addCommonTransition:function(e){return o.call(this,{data:t.pick(e,"sourceStatusId","transitionId","workflowName"),type:"post",url:i+"/common"})},addTransition:function(e){return o.call(this,{data:e,type:"post"})},deleteTransition:function(e){return o.call(this,{data:e,type:"delete"})},updateTransition:function(e){return o.call(this,{data:e,type:"put"})},updateTransitionSource:function(e){return o.call(this,{data:e,type:"post",url:i+"/source"})},updateTransitionTarget:function(e){return o.call(this,{data:e,type:"post",url:i+"/target"})}})}),AJS.namespace("JIRA.WorkflowDesigner.IO.AJAX.WorkflowTransitionsAJAXManager",null,require("workflow-designer/io/ajax/workflow-transitions-ajax-manager"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/io/LayoutAutoSaver.js' */
define("workflow-designer/io/layout-auto-saver",["workflow-designer/io/ajax/workflow-ajax-manager","workflow-designer/messages","workflow-designer/underscore"],function(o,e,n){function s(){return "Some changes made to this workflow haven\'t been saved. If you navigate away they will be lost."}var a,i=function(o){n.bindAll(this,"_save"),this._save=n.debounce(this._save,1e3),this._window=o.window||window,this._workflowModel=o.workflowModel,this._workflowModel.on("layoutChanged",this._onLayoutChanged,this)};return i.prototype={destroy:function(){var o=this._window.onbeforeunload===s;o&&(this._window.onbeforeunload=this._originalOnBeforeUnload)},_installUnsavedChangesMessage:function(){var o=!a&&this._window.onbeforeunload!==s;o&&(this._originalOnBeforeUnload=this._window.onbeforeunload,this._window.onbeforeunload=s)},_onLayoutChanged:function(){this._installUnsavedChangesMessage(),this._layoutId=n.uniqueId(),this._save()},removeUnsavedChangesMessage:function(){this._window.onbeforeunload=this._originalOnBeforeUnload,delete this._originalOnBeforeUnload},_save:function(){function n(){a._layoutId===i&&a.removeUnsavedChangesMessage()}var s,a=this,i=this._layoutId;s=o.save(this._workflowModel),s.done(n),s.fail(function(o){e.showErrorMessage(o)})}},i.disableMessage=function(){a=!0},i}),AJS.namespace("JIRA.WorkflowDesigner.IO.LayoutAutoSaver",null,require("workflow-designer/io/layout-auto-saver"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/io/ajax/UserPropertiesAJAXManager.js' */
define("workflow-designer/io/ajax/user-properties-ajax-manager",["workflow-designer/io/ajax/ajax-manager","workflow-designer/io/error-handler","workflow-designer/underscore","jquery","wrm/context-path"],function(e,r,o,a,n){var t=n()+"/rest/workflowDesigner/latest/userProperties";return o.extend({},e,{getProperty:function(e){var o,n=a.Deferred();return o=this._makeRequest({data:{key:e},dataType:"json",url:t}),o.done(n.resolve),o.fail(function(e,o){n.reject(r.getErrorMessage(e,o))}),n.promise()},setProperty:function(e,o){var n,s=a.Deferred();return n=this._makeRequest({contentType:"application/json",data:JSON.stringify({key:e,value:o}),type:"POST",url:t}),n.done(s.resolve),n.fail(function(e,o){s.reject(r.getErrorMessage(e,o))}),s.promise()}})}),AJS.namespace("JIRA.WorkflowDesigner.IO.AJAX.UserPropertiesAJAXManager",null,require("workflow-designer/io/ajax/user-properties-ajax-manager"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/util/Analytics.js' */
define("workflow-designer/analytics",["workflow-designer/io/ajax/user-properties-ajax-manager","jquery"],function(t,i){function n(t,i){AJS.EventQueue&&AJS.EventQueue.push({name:"administration.workflow."+t,properties:i})}function o(t,i){var n="administration.workflow."+t;AJS.Analytics?AJS.Analytics.triggerPrivacyPolicySafeEvent(n,i):AJS.trigger("analyticsEvent",{name:n,data:i})}function r(t,n){i(document).on("click",t,function(){o(n)})}function e(t,i){n("edit",{mode:"new-diagram",action:t,object:i})}var a,s;return r(".enter-full-screen","fullscreen"),r("[data-transition-option-key='properties.key']","view.transition.properties"),r("[data-transition-option-key='com.atlassian.jira.plugins.jira-transition-triggers-plugin:triggers-transitions-tab']","view.transition.triggers-transitions-tab"),r("[data-transition-option-key='com.atlassian.jira.plugin.system.workfloweditor.transition.tabs:conditions']","view.transition.conditions"),r("[data-transition-option-key='com.atlassian.jira.plugin.system.workfloweditor.transition.tabs:validators']","view.transition.validators"),r("[data-transition-option-key='com.atlassian.jira.plugin.system.workfloweditor.transition.tabs:postfunctions']","view.transition.postfunctions"),r(".status-properties","view.status.properties"),{_reset:function(){a=!1,s=!1},triggerToggleLabels:function(t){n("toggle.labels."+(t?"on":"off"))},triggerAddStatus:function(){e("add","status")},triggerUpdateStatus:function(){e("update","status")},triggerAddStep:function(){e("add","step")},triggerFirstAddStatus:function(o){var r="jira.workflowdesigner.added.first.status",e=i.Deferred();a||(e=t.getProperty(r)),e.done(function(i){var e=!i.value;e&&(n("first.add.status",{duration:o}),t.setProperty(r,!0)),a=!0})},triggerUpdateStep:function(){e("update","step")},triggerRemoveStep:function(){e("remove","step")},triggerAddCommonTransition:function(){e("add","commontransition")},triggerAddTransition:function(){e("add","transition")},triggerFirstAddTransition:function(o){var r="jira.workflowdesigner.added.first.transition",e=i.Deferred();s||(e=t.getProperty(r)),e.done(function(i){var e=!i.value;e&&(n("first.add.transition",{duration:o}),t.setProperty(r,!0)),s=!0})},triggerUpdateTransition:function(){e("update","transition")},triggerRemoveTransition:function(){e("remove","transition")},triggerAddGlobalTransition:function(){e("add","globaltransition")},triggerUpdateGlobalTransition:function(){e("update","globaltransition")},triggerRemoveGlobalTransition:function(){e("remove","globaltransition")},triggerAddLoopedTransition:function(){e("add","loopedtransition")},triggerUpdateLoopedTransition:function(){e("update","loopedtransition")},triggerRemoveLoopedTransition:function(){e("remove","loopedtransition")}}}),AJS.namespace("JIRA.WorkflowDesigner.Analytics",null,require("workflow-designer/analytics"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/io/ajax/ValidationAJAXManager.js' */
define("workflow-designer/io/ajax/validation-ajax-manager",["workflow-designer/io/ajax/ajax-manager","workflow-designer/io/error-handler","workflow-designer/underscore","jquery","wrm/context-path"],function(e,r,a,o,n){function i(e){var n=o.Deferred(),i=this._makeRequest(a.defaults({},e,{dataType:"json",url:t}));return i.done(n.resolve),i.fail(function(e,a){n.reject(r.getErrorMessage(e,a))}),n.promise()}var t=n()+"/rest/workflowDesigner/latest/workflows/validation";return a.extend({},e,{check:function(e){return i.call(this,{data:JSON.stringify({workflowName:e}),type:"post",contentType:"application/json"})}})}),AJS.namespace("JIRA.WorkflowDesigner.IO.AJAX.ValidationAJAXManager",null,require("workflow-designer/io/ajax/validation-ajax-manager"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/util/Validator.js' */
define("workflow-designer/validator",["workflow-designer/io/ajax/validation-ajax-manager","workflow-designer/messages","jira/ajs/dark-features","workflow-designer/underscore"],function(r,e,n,a){var o={MINOR:1,MAJOR:2,CRITICAL:3},t=function(r){if(!r)return 0;var e=a.map(r,function(r){return o[r.severity]});return a.max(e)||0},i=function(r){function e(r){var e=t(r),n={};return n.alterDisplay=2===e||3===e,n.color=n.alterDisplay&&"#d04437",e>0&&(n.mostSevere=a.last(a.sortBy(r,function(r){return o[r.severity]}))),n}return a.object(a.map(r,function(r,n){return[n,e(r)]}))};return{serverityLevels:o,validate:function(n){var a=n.get("name"),o=r.check(a);o.done(function(r){n.trigger("validation:statuses",i(r.nodeProblems)),n.trigger("validation:transitions",i(r.edgeProblems))}).fail(function(r){return e.showErrorMessage("The workflow couldn\'t be validated."+" "+r)})}}}),AJS.namespace("JIRA.WorkflowDesigner.Validator",null,require("workflow-designer/validator"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/CanvasModel.js' */
define("workflow-designer/canvas-model",["workflow-designer/analytics","workflow-designer/backbone"],function(e,s){return s.Model.extend({defaults:{selectedModel:null,selectedView:null,showTransitionLabels:!1,zoomLevel:null},initialize:function(e,s){this._workflowModel=s.workflowModel,this.listenTo(this,"change:showTransitionLabels",this._onShowTransitionLabelsChange),this.listenTo(this._workflowModel,{"new:status":this._selectModel,"new:transition":this._selectModel,"reset:before":this._deselect}),this.listenTo(this._workflowModel.get("transitions"),"destroy",this._onDestroy)},_deselect:function(){this.set({selectedModel:null,selectedView:null})},_onDestroy:function(e){var s=this.get("selectedModel")===e;s&&this._deselect()},_onShowTransitionLabelsChange:function(s,t){e.triggerToggleLabels(t)},_selectModel:function(e){this.get("selectedModel")||this.set("selectedModel",e)},selectView:function(e){this.set({selectedModel:e&&e.model,selectedView:e})}})}),AJS.namespace("JIRA.WorkflowDesigner.CanvasModel",null,require("workflow-designer/canvas-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/layout/connection/GappedConnection.js' */
define("workflow-designer/layout/connection/gapped-connection",["workflow-designer/direction","workflow-designer/draw-2d"],function(t,n){return n.Connection.extend({init:function(t,n){this._super(),this._sourceGap=t,this._targetGap=n},_getTransformation:function(n,i){var e=0,o=0;switch(n){case t.UP:o=-i;break;case t.RIGHT:e=i;break;case t.DOWN:o=i;break;case t.LEFT:e=-i}return{x:e,y:o}},getEndPointGapTransformation:function(){return this._getTransformation(this.getTarget().getConnectionDirection(),this._targetGap)},getStartPointGapTransformation:function(){return this._getTransformation(this.getSource().getConnectionDirection(),this._sourceGap)},setEndPoint:function(t,n){var i;this.isMoving?this._super(t,n):(i=this.getEndPointGapTransformation(),this._super(t+i.x,n+i.y))},setStartPoint:function(t,n){var i;this.isMoving?this._super(t,n):(i=this.getStartPointGapTransformation(),this._super(t+i.x,n+i.y))},getEndPoint:function(){var t,n=this._super();return this.isMoving?n:(t=this.getEndPointGapTransformation(),n.clone().translate(t.x,t.y))},getStartPoint:function(){var t=this.getStartPointGapTransformation(),n=this._super();return this.isMoving?n:n.clone().translate(t.x,t.y)}})}),AJS.namespace("JIRA.WorkflowDesigner.Layout.Connection.GappedConnection",null,require("workflow-designer/layout/connection/gapped-connection"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/layout/connection/RoundedManhattanConnectionRouter.js' */
define("workflow-designer/layout/connection/rounded-manhattan-connection-router",["workflow-designer/vector-2d","workflow-designer/draw-2d","workflow-designer/underscore"],function(n,t,e){return t.layout.connection.ManhattanConnectionRouter.extend({CORNER_RADIUS:5,init:function(){this._super.apply(this,arguments)},_calculateConnectionPoints:function(n){return this._route(n,n.getEndPoint(),n.getTarget().getConnectionDirection(),n.getStartPoint(),n.getSource().getConnectionDirection()),n.getPoints().asArray()},_getPointInstructions:function(t,e,o){var i,r=new n(t,o[e+1]||t),c=new n(t,o[e-1]||t);return i=Math.min(r.getLength()/2,c.getLength()/2,this.CORNER_RADIUS),["L",t.add(c.normalize().multiply(i)).getComponents(),"S",t.getComponents(),t.add(r.normalize().multiply(i)).getComponents()]},route:function(n){function t(n,t,e,o){return n.concat(i._getPointInstructions(t,e,o))}var o,i=this;o=this._calculateConnectionPoints(n),n.svgPathString=e.reduce(o,t,["M",o[0].x,o[0].y]).join(" ")}})}),AJS.namespace("JIRA.WorkflowDesigner.Layout.Connection.RoundedManhattanConnectionRouter",null,require("workflow-designer/layout/connection/rounded-manhattan-connection-router"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/layout/locator/ManhattanPercentageLocator.js' */
define("workflow-designer/layout/locator/manhattan-percentage-locator",["workflow-designer/vector-2d","workflow-designer/draw-2d","workflow-designer/underscore"],function(e,t,n){function r(t){return new e(t.start,t.end).getLength()}function o(e){var t=e.getSegments().asArray();return n.reduce(t,function(e,t){return e+r(t)},0)}return t.layout.locator.ConnectionLocator.extend({init:function(e,t){this._percentage=t,this._super(e)},relocate:function(t,a){var i,c,s=this.getParent(),g=o(s)*this._percentage;i=n.find(s.getSegments().asArray(),function(e){var t=r(e);return t>=g||void(g-=t)}),i&&(c=new e(i.start,i.end),c.normalize().multiply(g).translate(a.getWidth()/-2,a.getHeight()/-2),a.setPosition(i.start.getTranslated(c)))}})}),AJS.namespace("JIRA.WorkflowDesigner.Layout.Locator.ManhattanPercentageLocator",null,require("workflow-designer/layout/locator/manhattan-percentage-locator"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/layout/locator/PositionOnParentBoundsLocator.js' */
define("workflow-designer/layout/locator/position-on-parent-bounds-locator",["workflow-designer/direction","workflow-designer/draw-2d"],function(t,i){return i.layout.locator.Locator.extend({init:function(t){this._super(t.parent),this.side=t.side,this.bias=t.bias},relocate:function(i,o){var e,s,n=this.getParent().getBoundingBox(),r=t;this.side===r.UP||this.side===r.DOWN?(e=n.getWidth()*this.bias,s=this.side===r.UP?0:n.getHeight()):this.side!==r.LEFT&&this.side!==r.RIGHT||(s=n.getHeight()*this.bias,e=this.side===r.LEFT?0:n.getWidth()),o.setPosition(e,s)}})}),AJS.namespace("JIRA.WorkflowDesigner.Layout.Locator.PositionOnParentBoundsLocator",null,require("workflow-designer/layout/locator/position-on-parent-bounds-locator"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/layout/locator/StaticLocator.js' */
define("workflow-designer/layout/locator/static-locator",["workflow-designer/draw-2d"],function(o){return o.layout.locator.Locator.extend({init:function(o,t,r){this._super(o),this._x=t,this._y=r},relocate:function(o,t){t.setPosition(this._x,this._y)}})}),AJS.namespace("JIRA.WorkflowDesigner.Layout.Locator.StaticLocator",null,require("workflow-designer/layout/locator/static-locator"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/policy/port/StatusPortsFeedbackPolicy.js' */
define("workflow-designer/policy/feedback/status-ports-feedback-policy",["workflow-designer/draw-2d","workflow-designer/color-provider","workflow-designer/underscore","jquery"],function(e,o,r,n){return e.policy.port.IntrusivePortsFeedbackPolicy.extend({prepareDropTargetsForDrag:function(e){r.invoke(e.asArray(),"show")},alterDropTargetOnDrag:n.noop,alterDropTargetOnDragEnd:n.noop,getConnectionLineColour:function(){return o.getSelectedPathColor()},onHoverEnter:function(e,o,r){r.setGlow(!0)},onHoverLeave:function(e,o,r){r.setGlow(!1)}})}),AJS.namespace("JIRA.WorkflowDesigner.Policy.Feedback.StatusPortsFeedbackPolicy",null,require("workflow-designer/policy/feedback/status-ports-feedback-policy"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/StatusPort.js' */
define("workflow-designer/status-port",["workflow-designer/policy/feedback/status-ports-feedback-policy","workflow-designer/draw2d-utilities","workflow-designer/draw-2d","workflow-designer/color-provider","workflow-designer/underscore"],function(t,i,e,r,s){var o=e.HybridPort.extend({RADIUS:8,STROKE_WIDTH:1,init:function(i){this._super(),this.connectionDirection=i.connectionDirection,this.canvas=i.canvas,this.isPortDragged=i.isPortDragged,this.getAllTargetPorts=i.getAllTargetPorts,this.lighterBgColor=this.bgColor.hash(),this.setBackgroundColor("#ffffff"),this.setColor(r.getSelectedPathColor()),this.setCoronaWidth(6),this.setDimension(this.RADIUS,this.RADIUS),this.setStroke(this.STROKE_WIDTH),this.hide(),this._resetEditPolicies(),this.installEditPolicy(new t)},_resetEditPolicies:function(){var t=this;this.editPolicy.each(function(i,e){e.onUninstall(t)}),this.editPolicy=new e.util.ArrayList},getConnectionDirection:function(){return this.connectionDirection},getDropTarget:function(t,i){return o.getHitPort(t,i,this.getDropTargets().asArray())},getDropTargets:function(){var t=s.without(this.getAllTargetPorts(),this);return new e.util.ArrayList(t).trimToSize()},onMouseEnter:function(t){this.trigger("mouse:enter",t)},onMouseLeave:function(t){this.trigger("mouse:leave",t)},onDragStart:function(){this.triggerDragStart(),this.trigger("select"),this._super()},onDragEnd:function(){this._super(),this.triggerDragEnd()},triggerDragStart:function(){this.trigger("drag:start")},triggerDragEnd:function(){this.trigger("drag:end")},hitTest:function(t,i){if(this.isPortDragged&&this.isPortDragged())return this._super(t,i);var e=this.getAbsoluteX(),r=this.getAbsoluteY(),s=e-this.getWidth()/2,o=r-this.getHeight()/2,n=e+this.getWidth()/2,h=r+this.getHeight()/2;return t>=s&&t<=n&&i>=o&&i<=h},show:function(){this.sendToFront().setVisible(!0)},hide:function(){this.setVisible(!1)},repaint:function(){this._super.apply(this,arguments),this._setCursor(this)},setGlow:function(t){var i="#3b7fc4";this._super(t),t?(this.corona.setBackgroundColor(i),this.corona.setColor(i),this.corona.shape.attr("opacity",.45),this._setCursor(this.corona),this.sendToFront(),this.setStroke(0)):this.setStroke(this.STROKE_WIDTH)},_setCursor:function(t){i.setCursor(t,"crosshair")}});return o.getHitPort=function(t,i,r){function n(t){return t.hitTest(a.x,a.y)}function h(t){return t.getAbsolutePosition().getDistance(a)}var g,a=new e.geo.Point(t,i);return g=s.chain(r).filter(n).min(h).value(),g instanceof o?g:null},o}),AJS.namespace("JIRA.WorkflowDesigner.StatusPort",null,require("workflow-designer/status-port"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/mixins/LineResizeHandleMixin.js' */
define("workflow-designer/line-resize-handle-mixin",["workflow-designer/status-port","workflow-designer/draw-2d","workflow-designer/underscore"],function(t,e,i){return{init:function(){this._actionableArea=new e.shape.basic.Circle(20),this._actionableArea.draggable=!0,this.setActionableAreaAttributes({})},setPosition:function(){this._actionableArea.setPosition(this.x-this._actionableArea.width/2+this.width/2,this.y-this._actionableArea.height/2+this.height/2)},show:function(t){this._actionableArea.setCanvas(t),this._actionableArea.sendToFront()},hide:function(){this._actionableArea.setCanvas(null)},repaint:function(t){t=i.extend({},t,{cursor:"crosshair",fill:"#333333",stroke:"#333333"});var a=this.getGap();return this.x-=a.x,this.y-=a.y,this._actionableArea&&this._actionableAreaAttributes&&(this._actionableArea.repaint(this._actionableAreaAttributes),this._actionableArea.sendToFront()),e.shape.basic.LineResizeHandle.prototype.repaint.call(this,t)},setActionableAreaAttributes:function(t){this._actionableAreaAttributes=i.defaults({},t,{cursor:"crosshair","fill-opacity":0,"stroke-opacity":0})},hitTest:function(t,e){return this._actionableArea.hitTest(t,e)},sendActionableAreaToFront:function(){this._actionableArea.sendToFront()},onDragStart:function(){var t=this.getRelatedPort();t.triggerDragStart(),i.chain(this._getDropTargets(t)).without(this.getOppositePortTo(t)).invoke("show")},onDragEnd:function(){var t=this.getRelatedPort();t.triggerDragEnd(),i.invoke(this._getDropTargets(t),"hide")},_getDropTarget:function(e,i,a){return t.getHitPort(e,i,this._getDropTargets(a))}}}),AJS.namespace("JIRA.WorkflowDesigner.LineResizeHandleMixin",null,require("workflow-designer/line-resize-handle-mixin"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/mixins/RequestResponseMixin.js' */
define("workflow-designer/request-response-mixin",["workflow-designer/backbone"],function(e){return{initialize:function(){this.requestResponse=new e.Wreqr.RequestResponse},remove:function(){this.requestResponse.removeAllHandlers()}}}),AJS.namespace("JIRA.WorkflowDesigner.RequestResponseMixin",null,require("workflow-designer/request-response-mixin"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/mixins/SelectableFigureMixin.js' */
define("workflow-designer/selectable-figure-mixin",[],function(){return{deselect:function(){this.isSelected()?this._canvas.selectFigure(null):this._onDeselect()},isSelected:function(){return this._canvas.getSelectedFigure()===this._getFigure()},select:function(){this.isSelected()?this._onSelect():this._canvas.selectFigure(this._getFigure())}}}),AJS.namespace("JIRA.WorkflowDesigner.SelectableFigureMixin",null,require("workflow-designer/selectable-figure-mixin"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/LineEndResizeHandle.js' */
define("workflow-designer/line-end-resize-handle",["workflow-designer/layout/connection/gapped-connection","workflow-designer/line-resize-handle-mixin","workflow-designer/draw-2d","workflow-designer/cocktail"],function(e,n,i,r){var o=i.shape.basic.LineEndResizeHandle.extend({getGap:function(){return this.owner instanceof e?this.owner.getEndPointGapTransformation():{x:0,y:0}},_getDropTargets:function(e){return e.getAllTargetPorts()}});return r.mixin(o,n),o}),AJS.namespace("JIRA.WorkflowDesigner.LineEndResizeHandle",null,require("workflow-designer/line-end-resize-handle"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/LineStartResizeHandle.js' */
define("workflow-designer/line-start-resize-handle",["workflow-designer/layout/connection/gapped-connection","workflow-designer/line-resize-handle-mixin","workflow-designer/draw-2d","workflow-designer/cocktail"],function(e,n,r,i){var t=r.shape.basic.LineStartResizeHandle.extend({getGap:function(){return this.owner instanceof e?this.owner.getStartPointGapTransformation():{x:0,y:0}},_getDropTargets:function(e){return e.getAllTargetPorts()}});return i.mixin(t,n),t}),AJS.namespace("JIRA.WorkflowDesigner.LineStartResizeHandle",null,require("workflow-designer/line-start-resize-handle"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/policy/canvas/snap-to-geometry/Snapper.js' */
define("workflow-designer/policy/canvas/snapper",["workflow-designer/underscore"],function(n){var e=function(e){n.bindAll(this,"snap"),this.points=e};return e.prototype={snap:function(e){function r(n){return n-e}return 0===this.points.length?0:n.chain(this.points).map(r).min(Math.abs).value()}},e}),AJS.namespace("JIRA.WorkflowDesigner.Policy.Canvas.SnapToGeometry.Snapper",null,require("workflow-designer/policy/canvas/snapper"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/policy/canvas/snap-to-geometry/SnapPoints.js' */
define("workflow-designer/policy/canvas/snap-to-geometry/snap-points",["workflow-designer/underscore"],function(n){var t={getXSnapPoints:function(t){function e(t){var e=t.getBoundingBox();return n.map([e.getLeft(),e.getCenter().getX(),e.getRight()],this._makeSnapPoint(t))}return n.isArray(t)||(t=[t]),n.flatMap(t,e,this)},getYSnapPoints:function(t){function e(t){var e=t.getBoundingBox();return n.map([e.getTop(),e.getBottom()],this._makeSnapPoint(t))}return n.isArray(t)||(t=[t]),n.flatMap(t,e,this)},_makeSnapPoint:function(n){return function(t){return{rectangle:n.getBoundingBox(),value:t}}}};return n.bindAll(t,"getXSnapPoints","getYSnapPoints"),t}),AJS.namespace("JIRA.WorkflowDesigner.Policy.Canvas.SnapToGeometry.SnapPoints",null,require("workflow-designer/policy/canvas/snap-to-geometry/snap-points"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/policy/canvas/snap-to-geometry/GuideLineEditPolicy.js' */
define("workflow-designer/policy/canvas/snap-to-geometry/guide-line-edit-policy",["workflow-designer/policy/canvas/snap-to-geometry/snap-points","workflow-designer/draw-2d","underscore"],function(e,i,t){return i.policy.canvas.CanvasPolicy.extend({GUIDE_LINE_COLOUR:"#ff0000",init:function(){this._super.apply(this,arguments)},_collectFigures:function(){var e=this;this.figures||(this.figures=[],this.canvas.getFigures().each(function(i,t){t.snapToGeometry&&(t.isInDragDrop?e.dragFigure=t:e.figures.push(t))}))},_collectSnapPoints:function(){this.SnapPoints||(this.SnapPoints={x:e.getXSnapPoints(this.figures),y:e.getYSnapPoints(this.figures)})},_drawGuideLine:function(e,i,t,n){var s=["M",e,i,"L",t,n].join(" ");this.guideLines||(this.guideLines=[]),this.guideLines.push(this.canvas.paper.path(s).attr({stroke:this.GUIDE_LINE_COLOUR}))},_drawGuideLines:function(e,i,n){var s=t.cartesianProduct(i,n);t.each(s,function(i){this._equalSnapPoints(i[0],i[1])&&e.apply(this,i)},this)},_drawHorizontalGuideLines:function(){function i(e,i){var t=Math.max(e.rectangle.getRight(),i.rectangle.getRight()),n=Math.min(e.rectangle.getLeft(),i.rectangle.getLeft());this._drawGuideLine(n,e.value,t,e.value)}var t;t=e.getYSnapPoints(this.dragFigure),this._drawGuideLines(i,t,this.SnapPoints.y)},_drawVerticalGuideLines:function(){function i(e,i){var t=Math.max(e.rectangle.getBottom(),i.rectangle.getBottom()),n=Math.min(e.rectangle.getTop(),i.rectangle.getTop());this._drawGuideLine(e.value,n,e.value,t)}var t;t=e.getXSnapPoints(this.dragFigure),this._drawGuideLines(i,t,this.SnapPoints.x)},_equalSnapPoints:function(e,i){return Math.abs(e.value-i.value)<=.1},onInstall:function(e){this.canvas=e},onMouseDrag:function(){this._collectFigures(),this._removeGuideLines(),this.dragFigure&&0!==this.figures.length&&(this._collectSnapPoints(),this._drawHorizontalGuideLines(),this._drawVerticalGuideLines())},onMouseUp:function(){delete this.dragFigure,delete this.figures,delete this.SnapPoints,this._removeGuideLines()},onUninstall:function(){delete this.canvas},_removeGuideLines:function(){t.invoke(this.guideLines,"remove"),this.guideLines=[]}})}),AJS.namespace("JIRA.WorkflowDesigner.Policy.Canvas.SnapToGeometry.GuideLineEditPolicy",null,require("workflow-designer/policy/canvas/snap-to-geometry/guide-line-edit-policy"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/policy/canvas/snap-to-geometry/SnapEditPolicy.js' */
define("workflow-designer/policy/canvas/snap-to-geometry/snap-edit-policy",["workflow-designer/policy/canvas/snapper","workflow-designer/policy/canvas/snap-to-geometry/snap-points","workflow-designer/draw-2d","workflow-designer/underscore"],function(n,e,t,s){return t.policy.canvas.SnapToEditPolicy.extend({SNAP_THRESHOLD:3,init:function(){this._super.apply(this,arguments)},_createSnappers:function(e){var t;this.snappers||(t=this._getFigures(e),this.snappers={x:new n(this._getXSnapPoints(t)),y:new n(this._getYSnapPoints(t))})},_getFigures:function(n){return s.filter(n.getFigures().asArray(),function(n){return!n.isInDragDrop&&n.snapToGeometry})},_getXSnapPoints:function(n){return s.pluck(e.getXSnapPoints(n),"value")},_getYSnapPoints:function(n){return s.pluck(e.getYSnapPoints(n),"value")},onMouseUp:function(){delete this.snappers},snap:function(n,e,t){return e.snapToGeometry?(this._createSnappers(n),this._snapFigure(e).getTopLeft()):t},_snapFigure:function(n){return n.getBoundingBox().translate(this._snapPoints(this._getXSnapPoints(n),this.snappers.x),this._snapPoints(this._getYSnapPoints(n),this.snappers.y))},_snapPoints:function(n,e){var t=s.chain(n).map(e.snap).min(Math.abs).value();return Math.abs(t)<=this.SNAP_THRESHOLD?t:0}})}),AJS.namespace("JIRA.WorkflowDesigner.Policy.Canvas.SnapToGeometry.SnapEditPolicy",null,require("workflow-designer/policy/canvas/snap-to-geometry/snap-edit-policy"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/policy/canvas/PanningSingleSelectionPolicy.js' */
define("workflow-designer/policy/canvas/panning-single-selection-policy",["workflow-designer/viewbox-transformer","workflow-designer/vector-2d","workflow-designer/draw-2d","aui/inline-dialog"],function(n,i,e,o){return e.policy.canvas.SingleSelectionPolicy.extend({init:function(n){this._super(),this._getCanvasBoundingBox=n},onMouseDown:function(n,i,e){o.current&&o.current.hide(),this._super(n,i,e),this._initialViewBox=n.getViewBox(),this._boundingBox=this._getCanvasBoundingBox()},onMouseDrag:function(e,o,s,t,l){this._super(e,o,s,t,l),null===this.mouseDownElement&&null===this.mouseDraggingElement&&e.setViewBoxQuick(n.getPanViewBox({diagramBoundingBox:this._boundingBox,displacement:new i((-o),(-s)),viewBox:this._initialViewBox}))}})}),AJS.namespace("JIRA.WorkflowDesigner.Policy.Canvas.PanningSingleSelectionPolicy",null,require("workflow-designer/policy/canvas/panning-single-selection-policy"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/policy/port/LineSelectionFeedbackPolicy.js' */
define("workflow-designer/policy/feedback/line-selection-feedback-policy",["workflow-designer/line-start-resize-handle","workflow-designer/line-end-resize-handle","workflow-designer/draw-2d"],function(e,n,i){return i.policy.figure.LineSelectionFeedbackPolicy.extend({createLineStartResizeHandle:function(n){return new e(n)},createLineEndResizeHandle:function(e){return new n(e)}})}),AJS.namespace("JIRA.WorkflowDesigner.Policy.Feedback.LineSelectionFeedbackPolicy",null,require("workflow-designer/policy/feedback/line-selection-feedback-policy"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/Draw2DView.js' */
define("workflow-designer/draw-2d-view",["workflow-designer/backbone"],function(e){return e.View.extend({initialize:function(e){this._canvas=e.canvas},remove:function(){e.View.prototype.remove.apply(this,arguments),this._canvas.removeFigure(this._figure)}})}),AJS.namespace("JIRA.WorkflowDesigner.Draw2DView",null,require("workflow-designer/draw-2d-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/FullScreenController.js' */
define("workflow-designer/full-screen-controller",["workflow-designer/underscore","jquery"],function(e,r){function o(r,o){return e.reduce(o,function(e,o){return e[o]=r.css(o),e},{})}function t(e){var o;o=r("<div>").css({height:e.outerHeight()}).insertAfter(e),e.data(s,o)}function n(e){e.data(s).remove(),e.removeData(s)}function l(e){var r=e.data(c);e.css(r).removeData(c)}function i(r,t){var n=o(r,e.keys(t));r.css(t).data(c,n)}var f=500,c="full-screen-controller-original-properties",s="full-screen-controller-placeholder";return{enterFullScreen:function(e){var o=r("body"),n=r.Deferred(),l=r(window.document);return e=r(e),t(e),i(e,{height:e.outerHeight(),left:e.offset().left-l.scrollLeft(),position:"fixed",top:e.offset().top-l.scrollTop(),width:e.outerWidth(),zIndex:2e3}),i(o,{overflow:"hidden"}),e.appendTo(o),e.animate({height:"100%",left:0,top:0,width:"100%"},f,n.resolve),n.promise()},exitFullScreen:function(e){function o(){e.insertBefore(t),n(e),l(e),c.resolve()}var t,i=r("body"),c=r.Deferred(),u=r(window.document);return e=r(e),t=e.data(s),l(i),e.animate({height:t.outerHeight(),left:t.offset().left-u.scrollLeft(),top:t.offset().top-u.scrollTop(),width:t.outerWidth()},f,o),c.promise()}}}),AJS.namespace("JIRA.WorkflowDesigner.FullScreenController",null,require("workflow-designer/full-screen-controller"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/InlineDialogSVGPositioner.js' */
define("workflow-designer/inline-dialog-svg-positioner",["workflow-designer/svg-utilities","aui/inline-dialog","workflow-designer/backbone","workflow-designer/underscore","jquery"],function(e,i,o,n,r){return{calculatePosition:function(o,n,t,l){var s,g,a;return s=e.getPageBoundingBox(n.target),a=r("<div/>").css({height:s.height,left:s.x,position:"absolute",top:s.y,width:s.width}).appendTo("body"),g=i.opts.calculatePositions(o,{target:a},t,l),a.remove(),g}}}),AJS.namespace("JIRA.WorkflowDesigner.InlineDialogSVGPositioner",null,require("workflow-designer/inline-dialog-svg-positioner"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/ProgressIndicatorBlanketView.js' */
define("workflow-designer/progress-indicator-blanket-view",["workflow-designer/templates","workflow-designer/backbone","jquery"],function(e,n,i){var r=40,t=440;return n.Marionette.ItemView.extend({className:"progress-indicator-blanket",template:e.progressIndicatorBlanket,ui:{spinner:".spinner"},initialize:function(e){this._container=i(e.container)},hide:function(){clearInterval(this._intervalID),this.$el.remove()},show:function(){function e(){n=(n-r)%t,i.ui.spinner.css("background-position","0 "+n+"px")}var n=0,i=this;clearInterval(this._intervalID),this._intervalID=setInterval(e,50),this.render().$el.appendTo(this._container)}})}),AJS.namespace("JIRA.WorkflowDesigner.ProgressIndicatorBlanketView",null,require("workflow-designer/progress-indicator-blanket-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/Positioner.js' */
define("workflow-designer/positioner",["workflow-designer/draw-2d","workflow-designer/underscore"],function(e,i){function n(e){var n=e.getInitialTransitionDestinations();return function(e,t){var o,r,a,s,g=e.model,u=t.model;if(o=g.isInitial(),a=u.isInitial(),o&&!a)return-1;if(!o&&a)return 1;if(!o&&!a){if(r=i.contains(n,g),s=i.contains(n,u),r&&!s)return-1;if(!r&&s)return 1}return g.get("id").localeCompare(u.get("id"))}}function t(e){return e.getBoundingBox().getHeight()+r}function o(e){return e.model.hasCoordinates()}var r=20,a={positionLoopedTransitionContainer:function(e){var i,n,t,o,r,a;e.loopedTransitionContainerView.model.hasCoordinates()||(e.statusViews.each(function(e){var i=e.getBoundingBox(),r=i.getBottom(),a=i.getLeft(),s=i.getTop();(!t||t>a)&&(t=a),(!o||o>s)&&(o=s),(!n||n<r)&&(n=r)}),i=e.loopedTransitionContainerView.getFigure(),r=t-100-i.getWidth(),a=o+(n-o)/2-i.getHeight()/2,e.loopedTransitionContainerView.setPosition(r,a),e.loopedTransitionContainerView.resetFigure())},positionStatuses:function(r){function a(e){var n=i.sum(i.map(e,t));d=g.getY()-n/2}function s(e){e.setPosition(g.getX()-e.getBoundingBox().getWidth()/2,d),d+=t(e)}var g,u,d;return g=new e.geo.Point(r.viewBox.getCenter().getX(),r.viewBox.getY()+.2*r.viewBox.getHeight()),u=i.chain(r.statusViews).reject(o).value(),u.sort(n(r.workflowModel)),i.chain(u).tap(a).each(s),u}};return a}),AJS.namespace("JIRA.WorkflowDesigner.Positioner",null,require("workflow-designer/positioner"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/TriangleFigure.js' */
define("workflow-designer/triangle-figure",["workflow-designer/status-port","workflow-designer/draw-2d","workflow-designer/underscore"],function(e,t,r){return t.VectorFigure.extend({repaint:function(e){var t;null!==this.shape&&(t=["M",this.getAbsoluteX(),this.getAbsoluteY()+this.getHeight()/2,"l",this.getWidth(),-(this.getHeight()/2),"l",0,this.getHeight(),"Z"].join(" "),this._super(r.extend({},e,{path:t})))},createShapeElement:function(){return this.canvas.paper.path("")}})}),AJS.namespace("JIRA.WorkflowDesigner.TriangleFigure",null,require("workflow-designer/triangle-figure"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/TriangleFigureUpwards.js' */
define("workflow-designer/triangle-figure-upwards",["workflow-designer/draw-2d","workflow-designer/underscore"],function(e,t){return e.VectorFigure.extend({repaint:function(e){var r;null!==this.shape&&(r=["M",this.getAbsoluteX(),this.getAbsoluteY()+this.getHeight()/2,"l",this.getWidth()/1.5,-(this.getHeight()/1.5),"l",this.getWidth()/1.5,this.getHeight()/1.5,"Z"].join(" "),this._super(t.extend({},e,{path:r})))},createShapeElement:function(){return this.canvas.paper.path("")}})}),AJS.namespace("JIRA.WorkflowDesigner.TriangleFigureUpwards",null,require("workflow-designer/triangle-figure-upwards"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/dialogs/StatusDialogView.js' */
define("workflow-designer/dialogs/status-dialog-view",["workflow-designer/dialogs/form-dialog-view","workflow-designer/io/ajax/status-categories-ajax-manager","workflow-designer/messages","workflow-designer/backbone","workflow-designer/underscore","jquery"],function(e,t,s,o,a,i){var r=JIRA.StatusCategorySingleSelect,n=1;return e.extend({ui:{description:"#status-description",name:"#status-name",statusCategoryId:"#status-category-id"},initialize:function(e){a.bindAll(this,"_onSubmit","_onSuccess","_onError"),this._workflowModel=e.workflowModel,this._statusModel=e.statusModel},_getContent:function(){var e=this;return function(t){var o=e.serializeData(),i=e._getStatusCategoryOptions();i.done(function(s){a.extend(o,{showStatusCategoryField:!0,statusCategoryOptions:s}),t(e.template(o))}),i.fail(function(t){s.showErrorMessage(t),e.hide()})}},_getCurrentStatusCategoryId:function(){var e=this._statusModel.get("statusCategory");return e&&e.id},_getStatusCategories:function(){function e(e){return e.id===n}var s=i.Deferred(),o=t.getStatusCategories();return o.done(function(t){s.resolve(a.reject(t,e))}),o.fail(s.reject),s},_getStatusCategoryOptions:function(){function e(e){return{colorName:e.colorName,key:e.key,selected:e.id===t,text:e.name,value:e.id}}var t=this._getCurrentStatusCategoryId(),s=i.Deferred(),o=this._getStatusCategories();return o.done(function(o){var i;i=a.map(o,e),i.push({isPlaceholder:!0,selected:t===n,text:"Select a category"}),s.resolve(i)}),o.fail(s.reject),s},_onContentRefresh:function(){this.ui.statusCategoryId.length&&new r({element:this.ui.statusCategoryId,revertOnInvalid:!0})},_onSubmit:function(e,t){var s,o;e.preventDefault(),this.disable(),this.removeErrorMessages(),s={description:this.ui.description.val(),name:this.ui.name.val(),statusCategoryId:this.ui.statusCategoryId.find(":selected").val(),workflowName:this._workflowModel.get("name")},o=this._makeRequest(s),o.done(this._onSuccess).fail(t).fail(this._onError)},serializeData:function(){return this._statusModel.toJSON()}})}),AJS.namespace("JIRA.WorkflowDesigner.Dialogs.StatusDialogView",null,require("workflow-designer/dialogs/status-dialog-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/dialogs/add-status/CreateStatusDialogView.js' */
define("workflow-designer/dialogs/create-status-dialog-view",["workflow-designer/dialogs/status-dialog-view","workflow-designer/io/ajax/workflow-statuses-ajax-manager","workflow-designer/analytics","workflow-designer/templates","workflow-designer/backbone","workflow-designer/underscore"],function(e,t,a,i,r,o){return e.extend({id:"create-status-dialog",template:i.createStatusDialog,ui:function(){return o.extend({},e.prototype.ui,{createGlobalTransition:"#create-global-transition-create"})},initialize:function(t){t=o.defaults({},t,{createGlobalTransition:!1}),e.prototype.initialize.apply(this,arguments),this._createGlobalTransition=t.createGlobalTransition},_makeRequest:function(e){return e=o.extend({},e,{createGlobalTransition:this.ui.createGlobalTransition.is(":checked")}),t.createStatus(e)},_onSuccess:function(e){var t=new Date-this._workflowModel.get("loadedAt");a.triggerAddStatus(),a.triggerAddStep(),a.triggerFirstAddStatus(t),this.hide(),this._workflowModel.reset(e)},serializeData:function(){var t=e.prototype.serializeData.apply(this,arguments);return o.extend(t,{createGlobalTransition:this._createGlobalTransition})}})}),AJS.namespace("JIRA.WorkflowDesigner.Dialogs.CreateStatusDialogView",null,require("workflow-designer/dialogs/create-status-dialog-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/dialogs/add-status/AddStatusSuggestionHandler.js' */
define("workflow-designer/dialogs/add-status-suggestion-handler",["jira/ajs/list/group-descriptor","jira/ajs/list/item-descriptor","jira/ajs/select/suggestions/select-suggest-handler","workflow-designer/underscore"],function(e,t,s,n){function r(s){return new e({items:[new t({fieldText:s,label:AJS.format("{0} (new status)",s),value:""})]})}return s.extend({formatSuggestions:function(t,s){var n;return t=this._super.apply(this,arguments),n=[],t.length&&n.push(new e({items:t})),this._shouldShowNewStatusOption(s)&&n.push(r(s)),n},_shouldShowNewStatusOption:function(e){var t,s;return e=e.toLowerCase().trim(),t=0===e.length,s=n.every(this.options.statuses,function(t){return e!==t.name.toLowerCase().trim()}),!t&&s}})}),AJS.namespace("JIRA.WorkflowDesigner.Dialogs.AddStatusSuggestionHandler",null,require("workflow-designer/dialogs/add-status-suggestion-handler"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/dialogs/add-status/AddStatusInlineDialogView.js' */
define("workflow-designer/dialogs/add-status-inline-dialog-view",["workflow-designer/io/ajax/workflow-statuses-ajax-manager","workflow-designer/io/ajax/statuses-ajax-manager","workflow-designer/dialogs/inline-dialog-view","workflow-designer/dialogs/create-status-dialog-view","workflow-designer/status-model","workflow-designer/dialogs/add-status-suggestion-handler","workflow-designer/messages","workflow-designer/analytics","jira/ajs/select/single-select","workflow-designer/templates","workflow-designer/backbone","workflow-designer/underscore","jquery"],function(e,t,s,i,o,a,n,r,l,d,u,c,h){return s.extend({events:{"change #create-global-transition-add":"_storeCreateGlobalTransition","click .cancel":"_cancel","selected #status-name":"_onSelection","submit form":"_submit","unselect #status-name":"_clearSelection"},id:"add-status-dialog-view-watchers",template:d.addStatusInlineDialog,ui:{createGlobalTransition:"#create-global-transition-add",form:".contents form",statusName:"#status-name",submit:":submit"},initialize:function(e){c.bindAll(this,"_onError","_onSelection","_onSuccess"),s.prototype.initialize.apply(this,arguments),this._workflowModel=e.workflowModel},_addExistingStatus:function(){var t,s=c.bind(this.trigger,this,"done");this._disable(),this._removeErrorMessages(),this.trigger("submit"),t={createGlobalTransition:this.ui.createGlobalTransition.is(":checked"),statusId:this._selectedOption.value(),workflowName:this._workflowModel.get("name")},this._request=e.addStatus(t),this._request.always(s).done(this._onSuccess).fail(this._onError)},_cancel:function(e){e&&e.preventDefault(),this._clearSelection(),this._createGlobalTransition=!1,this.hide()},_clearSelection:function(){this._selectedOption=void 0,this.ui.submit.attr("disabled","")},_clickShouldHide:function(e){var t=s.prototype._clickShouldHide.apply(this,arguments);return!this._isStatusNameDropdown(e.target)&&t},_createNewStatus:function(){var e;e={createGlobalTransition:this.ui.createGlobalTransition.is(":checked"),statusModel:new o({name:this._selectedOption.fieldText()}),workflowModel:this._workflowModel},new i(e).show(),this._cancel()},_disable:function(){this.$(":input").attr("disabled","disabled")},_enable:function(){this.$(":input").removeAttr("disabled")},_getContent:function(e,s){var i=this,o=t.getStatuses();o.done(function(t){var o;o=i.template({createGlobalTransition:i._createGlobalTransition,statusOptions:i._getStatusOptions(t)}),e.html(o),i._statuses=t,s()}),o.fail(function(e){n.showErrorMessage(e),i._reset()})},_getStatusOptions:function(e){function t(e){return e.name.toLowerCase()}function s(e){return c.contains(o,e.id)}function i(e){return{text:e.name,value:e.id}}var o;return o=this._workflowModel.get("statuses").pluck("statusId"),c.chain(e).reject(s).sortBy(t).map(i).value()},_isStatusNameDropdown:function(e){var t=this._statusName.dropdownController,s=t&&t.layer()[0];return!!h(e).closest(s).length},_onBeforeShow:function(){var e=this._selectedOption;this._statusName=new l({element:this.ui.statusName,errorMessage:"",statuses:this._statuses,suggestionsHandler:a}),e&&this._statusName.setSelection(e)},_onError:function(e){this._enable(),e&&this.ui.form.prepend(aui.message.error({content:e}))},_onSelection:function(e,t){this._selectedOption=t,this.ui.submit.removeAttr("disabled")},_onShow:function(){this.$("#status-name-field").focus()},_onSuccess:function(e){var s=new Date-this._workflowModel.get("loadedAt");r.triggerAddStep(),r.triggerFirstAddStatus(s),t.reset(),this._clearSelection(),this._createGlobalTransition=!1,this.hide(),this._workflowModel.reset(e)},_removeErrorMessages:function(){this.$(".aui-message.error").remove()},_shouldHide:function(){return!(this._request&&"pending"===this._request.state())},_storeCreateGlobalTransition:function(){this._createGlobalTransition=this.ui.createGlobalTransition.is(":checked")},_submit:function(e){var t=!(!this._selectedOption||!this._selectedOption.value()),s=!!this._selectedOption;e.preventDefault(),t?this._addExistingStatus():s&&this._createNewStatus()}})}),AJS.namespace("JIRA.WorkflowDesigner.Dialogs.AddStatusInlineDialogView",null,require("workflow-designer/dialogs/add-status-inline-dialog-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/dialogs/TransitionDialogView.js' */
define("workflow-designer/dialogs/transition-dialog-view",["workflow-designer/dialogs/form-dialog-view","workflow-designer/io/ajax/screens-ajax-manager","workflow-designer/messages","workflow-designer/backbone","workflow-designer/underscore","jquery"],function(e,o,i,r,n,s){return e.extend({initialize:function(e){n.bindAll(this,"_onError","_onLoadError","_onSubmit","_onSuccess"),this._canvasModel=e.canvasModel,this._transitionModel=e.transitionModel,this._workflowModel=e.workflowModel},_getScreenOptions:function(){function e(e){return{text:e.name,value:e.id,selected:e.id===t}}var i=s.Deferred(),r=o.getScreens(),t=this._transitionModel.get("screenId");return r.done(function(o){i.resolve(n.map(o,e))}),r.fail(i.reject),i.promise()},_onLoadError:function(e){i.showErrorMessage(e),this.hide()},_onSubmit:function(e){e.preventDefault(),this.disable(),this.removeErrorMessages()}})}),AJS.namespace("JIRA.WorkflowDesigner.Dialogs.TransitionDialogView",null,require("workflow-designer/dialogs/transition-dialog-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/dialogs/add-transition/AddTransitionFormView.js' */
define("workflow-designer/add-transition-form-view",["jira/ajs/select/single-select","workflow-designer/backbone","workflow-designer/underscore"],function(e,t,i){return t.Marionette.ItemView.extend({initialize:function(){},_clearAngles:function(){this.model.set({sourceAngle:null,targetAngle:null})},_getSelectedSourceStatus:function(){var e=Number(this.ui.sourceStepId.find(":selected").val());return this.options.workflowModel.get("statuses").findWhere({initial:!1,stepId:e})},_getSelectedTargetStatus:function(){var e=Number(this.ui.targetStepId.find(":selected").val());return this.options.workflowModel.get("statuses").findWhere({initial:!1,stepId:e})},onShow:function(){var t;new e({element:this.ui.sourceStepId,revertOnInvalid:!0}),new e({element:this.ui.targetStepId,revertOnInvalid:!0}),t=i.bind(this._clearAngles,this),this.ui.sourceStepId.on("selected",t),this.ui.targetStepId.on("selected",t)}})}),AJS.namespace("JIRA.WorkflowDesigner.AddTransitionFormView",null,require("workflow-designer/add-transition-form-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/dialogs/add-transition/NewTransitionFormView.js' */
define("workflow-designer/new-transition-form-view",["workflow-designer/add-transition-form-view","workflow-designer/io/ajax/workflow-looped-transitions-ajax-manager","workflow-designer/io/ajax/workflow-global-transitions-ajax-manager","workflow-designer/io/ajax/workflow-transitions-ajax-manager","jira/ajs/select/single-select","workflow-designer/templates","workflow-designer/backbone","workflow-designer/underscore","jquery"],function(e,t,s,n,i,o,r,a,d){var u=-65536,l=-65537;return e.extend({template:o.newTransitionForm,ui:{description:"#transition-description",name:"#transition-name",screenId:"#transition-screen-id",sourceStepId:"#transition-source-step-id",targetStepId:"#transition-target-step-id"},initialize:function(){function e(e,t){return{text:e,value:t,selected:!1}}a.bindAll(this,"_onAddTransitionSuccess"),this.options=d.extend(!0,{},this.options,{}),this.options.sourceStatuses.push(e("Any status",u)),this.options.targetStatuses.push(e("Itself",l))},_getSelectedScreenId:function(){return Number(this.ui.screenId.find(":selected").val())},_getSelectedScreenName:function(){return this.ui.screenId.find(":selected").text()},onShow:function(){e.prototype.onShow.apply(this,arguments),new i({element:this.ui.screenId,revertOnInvalid:!0})},_onAddTransitionSuccess:function(e){var t;t=a.extend({},e,{description:this.ui.description.val(),globalTransition:e.global,loopedTransition:e.looped,name:this.ui.name.val(),screenId:this._getSelectedScreenId(),screenName:this._getSelectedScreenName(),source:this._getSelectedSourceStatus(),target:this._getSelectedTargetStatus()}),this.model.set(t)},serializeData:function(){return{screens:this.options.screens,sourceStatuses:this.options.sourceStatuses,targetStatuses:this.options.targetStatuses}},_shouldUseGlobalTransition:function(e){return e.sourceStepId===u&&e.targetStepId!==l},_shouldUseLoopedTransition:function(e){return e.sourceStepId===u&&e.targetStepId===l},_shouldUseNormalTransitionLoop:function(e){return e.sourceStepId!==u&&e.targetStepId===l},_setupLoopedTransition:function(e){var s=t.addLoopedTransition(e);return s},_setupGlobalTransition:function(e){var t;return e=a.extend(e,{statusId:this._getSelectedTargetStatus().get("statusId")}),t=s.addGlobalTransition(e)},_setupNormalTransition:function(e){var t;return e=a.extend(e,{sourceStepId:this._getSelectedSourceStatus().get("stepId"),targetStepId:this._getSelectedTargetStatus().get("stepId")}),t=n.addTransition(e)},_setupNormalTransitionLoop:function(e){var t;return e=a.extend(e,{sourceStepId:this._getSelectedSourceStatus().get("stepId"),targetStepId:this._getSelectedSourceStatus().get("stepId")}),this.ui.targetStepId.val(this.ui.sourceStepId.val()),t=n.addTransition(e)},submit:function(){var e,t,s=d.Deferred();return e={description:this.ui.description.val(),name:this.ui.name.val(),screenId:this._getSelectedScreenId(),sourceStepId:Number(this.ui.sourceStepId.find(":selected").val()),targetStepId:Number(this.ui.targetStepId.find(":selected").val()),workflowName:this.options.workflowModel.get("name")},t=this._shouldUseLoopedTransition(e)?this._setupLoopedTransition(e):this._shouldUseGlobalTransition(e)?this._setupGlobalTransition(e):this._shouldUseNormalTransitionLoop(e)?this._setupNormalTransitionLoop(e):this._setupNormalTransition(e),t.done(this._onAddTransitionSuccess).done(s.resolve).fail(s.reject),s.promise()}})}),AJS.namespace("JIRA.WorkflowDesigner.NewTransitionFormView",null,require("workflow-designer/new-transition-form-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/dialogs/add-transition/ReuseTransitionFormView.js' */
define("workflow-designer/reuse-transition-form-view",["workflow-designer/io/ajax/workflow-transitions-ajax-manager","workflow-designer/add-transition-form-view","jira/ajs/select/single-select","workflow-designer/analytics","workflow-designer/templates","workflow-designer/backbone","workflow-designer/underscore","jquery"],function(t,e,i,n,r,s,o,a){return e.extend({events:{"simpleClick .create-new-transition":"_triggerCreateNewTransition"},template:r.reuseTransitionForm,ui:{noTransitionsMessage:".no-transitions-message",sourceStepId:"#transition-source-step-id",targetStepId:"#transition-target-step-id",transitionId:"#transition-id"},initialize:function(){o.bindAll(this,"_onSuccess","_refreshTransitionOptions")},_getSelectedTransition:function(){var t=Number(this.ui.transitionId.find(":selected").val());return this.options.workflowModel.get("transitions").findWhere({actionId:t})},_getTransitions:function(){function t(t){return t.get("actionId")}function e(t){return t.get("name").toLowerCase()}function i(t){return t.get("target")===r}function n(t){return t.get("source")&&t.get("source").isInitial()}var r=this._getSelectedTargetStatus(),s=this.options.workflowModel.get("transitions");return s.chain().filter(i).reject(n).sortBy(e).uniq(t).value()},onShow:function(){e.prototype.onShow.apply(this,arguments),this._transitionField=new i({element:this.ui.transitionId,revertOnInvalid:!0}),this._refreshTransitionOptions(),this.ui.targetStepId.on("selected",this._refreshTransitionOptions)},_onSuccess:function(){var t;t=this._getSelectedTransition().omit("id","sourceAngle","targetAngle"),t=o.extend(t,{source:this._getSelectedSourceStatus()}),n.triggerAddCommonTransition(),this.model.set(t)},_refreshTransitionOptions:function(){var t;t=o.map(this._getTransitions(),function(t,e){var i;return i=a("<option>").attr({value:t.get("actionId")}).text(t.get("name")),0===e&&i.attr("selected","selected"),i[0]}),this._transitionField.$container.toggle(t.length>0),this._transitionField.model.$element.html(t).trigger("reset"),this.ui.noTransitionsMessage.toggle(t.length<1)},serializeData:function(){return{sourceStatuses:this.options.sourceStatuses,targetStatuses:this.options.targetStatuses}},submit:function(){var e,i,n=a.Deferred(),r=!this._getTransitions().length;return r?n.reject("There are no transitions going to this status.").promise():(e={sourceStatusId:this._getSelectedSourceStatus().get("statusId"),transitionId:this._getSelectedTransition().get("actionId"),workflowName:this.options.workflowModel.get("name")},i=t.addCommonTransition(e),i.done(this._onSuccess).done(n.resolve).fail(n.reject),n.promise())},_triggerCreateNewTransition:function(t){t&&t.preventDefault(),this.trigger("createNewTransition")}})}),AJS.namespace("JIRA.WorkflowDesigner.ReuseTransitionFormView",null,require("workflow-designer/reuse-transition-form-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/dialogs/add-transition/AddTransitionDialogView.js' */
define("workflow-designer/dialogs/add-transition-dialog-view",["workflow-designer/dialogs/transition-dialog-view","workflow-designer/reuse-transition-form-view","workflow-designer/new-transition-form-view","workflow-designer/analytics","workflow-designer/templates","aui/tabs","workflow-designer/backbone","workflow-designer/underscore"],function(e,t,i,n,o,s,r,a){return e.extend({events:{tabSelect:"_onTabChange"},id:"add-transition-dialog",regions:{newTransitionPane:"#new-transition-pane",reuseTransitionPane:"#reuse-transition-pane"},tabsTemplate:o.addTransitionDialogTabs,template:o.addTransitionDialog,_createNewTransitionForm:function(e){var t;e=a.extend({},e,{screens:this._screenOptions}),t=new i(e),this.newTransitionPane.show(t)},_createReuseTransitionForm:function(e){var i;i=new t(e),this.listenTo(i,"createNewTransition",this._showNewTransitionPane),this.reuseTransitionPane.show(i)},_createTabs:function(){this.dialog.get$popupHeading().append(this.tabsTemplate()),s.setup(),this.dialog._positionInCenter()},_getContent:function(){var e,t=this;return function(i){e=t._getScreenOptions(),e.done(function(e){t._screenOptions=e,i(t.template())}),e.fail(t._onLoadError)}},_getStatusOptions:function(e){function t(e){return e.get("name").toLowerCase()}function i(e){return e.get("initial")}function n(t){return{text:t.get("name"),value:t.get("stepId"),selected:t.get("stepId")===e}}var o=this._workflowModel.get("statuses");return o.chain().reject(i).sortBy(t).map(n).value()},_getVisibleView:function(){var e;return e=[this.newTransitionPane.currentView,this.reuseTransitionPane.currentView],a.find(e,function(e){return e.$el.closest(".active-pane").length})},_getWindowTitle:function(){return "Add Transition"},_onContentRefresh:function(){var e;e={model:this._transitionModel,sourceStatuses:this._getStatusOptions(this._transitionModel.getSourceStepId()),targetStatuses:this._getStatusOptions(this._transitionModel.getTargetStepId()),workflowModel:this._workflowModel},this._createNewTransitionForm(e),this._createReuseTransitionForm(e),this._createTabs()},_onSubmit:function(t,i){var n;e.prototype._onSubmit.apply(this,arguments),n=this._getVisibleView().submit(),n.done(this._onSuccess).fail(i).fail(this._onError)},_onSuccess:function(){var e=new Date-this._workflowModel.get("loadedAt");n.triggerAddTransition(),n.triggerFirstAddTransition(e),this.hide(),this._workflowModel.addTransition(this._transitionModel),this._canvasModel.set("selectedModel",this._transitionModel)},_onTabChange:function(){this.$(":input:visible:first").focus(),this.reposition()},showErrorMessage:function(e){var t=aui.message.error({content:e}),i=this._getVisibleView();this.removeErrorMessages(),i.$el.prepend(t),this.reposition()},_showNewTransitionPane:function(){var e=this.$(".aui-tabs .new-transition > a");s.change(e)}})}),AJS.namespace("JIRA.WorkflowDesigner.Dialogs.AddTransitionDialogView",null,require("workflow-designer/dialogs/add-transition-dialog-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/dialogs/DeleteStatusDialogView.js' */
define("workflow-designer/dialogs/delete-status-dialog-view",["workflow-designer/dialogs/form-dialog-view","workflow-designer/io/ajax/workflow-statuses-ajax-manager","workflow-designer/analytics","workflow-designer/templates","workflow-designer/underscore","jquery"],function(e,t,o,s,i,l){return e.extend({id:"delete-status-dialog",initialize:function(e){i.bindAll(this,"_onError","_onSuccess"),this.statusModel=e.statusModel,this.workflowModel=e.workflowModel},_getContent:function(){var e=this._chooseContentTemplate();return l(e(this.statusModel.toJSON()))},_chooseContentTemplate:function(){var e=this.workflowModel.get("transitions").getInitial(),t=this.statusModel.hasTransition(e);return this.workflowModel.statusIsDeletable(this.statusModel)?t?s.cannotDeleteInitialStatus:s.confirmDeleteStatus:s.cannotDeleteStatusFromActiveWorkflow},_onSubmit:function(e,o){var s,i;e.preventDefault(),this.disable(),this.removeErrorMessages(),s={statusId:this.statusModel.get("statusId"),workflowName:this.workflowModel.get("name")},i=t.removeStatus(s),i.done(this._onSuccess).fail(o).fail(this._onError)},_onSuccess:function(e){o.triggerRemoveStep(),this.hide(),this.workflowModel.reset(e)}})}),AJS.namespace("JIRA.WorkflowDesigner.Dialogs.DeleteStatusDialogView",null,require("workflow-designer/dialogs/delete-status-dialog-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/dialogs/DeleteTransitionDialogView.js' */
define("workflow-designer/dialogs/delete-transition-dialog-view",["workflow-designer/io/ajax/workflow-transitions-ajax-manager","workflow-designer/io/ajax/workflow-global-transitions-ajax-manager","workflow-designer/io/ajax/workflow-looped-transitions-ajax-manager","workflow-designer/dialogs/form-dialog-view","workflow-designer/analytics","workflow-designer/templates","workflow-designer/underscore","jquery"],function(i,o,e,n,t,r,s,a){return n.extend({id:"delete-transition-dialog",initialize:function(i){s.bindAll(this,"_onError","_onSuccess"),this.transitionModel=i.transitionModel,this.workflowModel=i.workflowModel},_getContent:function(){var i=this._chooseContentTemplate();return a(i({transitionName:this.transitionModel.get("name")}))},_chooseContentTemplate:function(){return this.transitionModel.isInitial()?r.cannotDeleteInitialTransitionDialog:r.confirmDeleteTransitionDialog},_onSubmit:function(n,t){var r,s;n.preventDefault(),this.disable(),this.removeErrorMessages(),r={transitionId:this.transitionModel.get("actionId"),sourceStepId:this.transitionModel.getSourceStepId(),workflowName:this.workflowModel.get("name")},s=this.transitionModel.isLoopedTransition()?e.deleteLoopedTransition(r):this.transitionModel.isGlobalTransition()?o.deleteGlobalTransition(r):i.deleteTransition(r),s.done(this._onSuccess).fail(t).fail(this._onError)},_onSuccess:function(){this.transitionModel.isGlobalTransition()?t.triggerRemoveGlobalTransition():t.triggerRemoveTransition(),this.hide(),this.transitionModel.destroy(),this.workflowModel.removeTransition(this.transitionModel)}})}),AJS.namespace("JIRA.WorkflowDesigner.Dialogs.DeleteTransitionDialogView",null,require("workflow-designer/dialogs/delete-transition-dialog-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/dialogs/EditStatusDialogView.js' */
define("workflow-designer/dialogs/edit-status-dialog-view",["workflow-designer/io/ajax/workflow-statuses-ajax-manager","workflow-designer/messages","workflow-designer/io/ajax/statuses-ajax-manager","workflow-designer/dialogs/status-dialog-view","workflow-designer/analytics","workflow-designer/templates","workflow-designer/backbone","workflow-designer/underscore","jquery"],function(e,t,s,a,o,i,r,n,u){return a.extend({id:"edit-status-dialog",template:i.editStatusDialog,_getContent:function(){var e=a.prototype._getContent.apply(this),o=this;return function(a){var i,r=s.getNumberOfAssociatedWorkflows(o._statusModel.get("statusId")),n=s.getStatuses();i=u.when(r,n),i.done(function(t,s){o._numberOfAssociatedWorkflows=t,o._statuses=s,e(a)}),i.fail(function(e){t.showErrorMessage(e),o.hide()})}},_getSelectedStatusCategory:function(){var e=this.ui.statusCategoryId.find(":selected");return e.length?{colourName:e.data("color-name"),id:Number(e.val())}:null},_makeRequest:function(t){return t=n.extend({},t,{statusId:this._statusModel.get("statusId")}),e.updateStatus(t)},_onSuccess:function(){var e;e={description:this.ui.description.val(),name:this.ui.name.val(),statusCategory:this._getSelectedStatusCategory()},o.triggerUpdateStatus(),o.triggerUpdateStep(),this.hide(),this._statusModel.set(e)},serializeData:function(){var e=a.prototype.serializeData.apply(this,arguments);return n.extend(e,{numberOfWorkflows:this._numberOfAssociatedWorkflows})}})}),AJS.namespace("JIRA.WorkflowDesigner.Dialogs.EditStatusDialogView",null,require("workflow-designer/dialogs/edit-status-dialog-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/dialogs/EditTransitionDialogView.js' */
define("workflow-designer/dialogs/edit-transition-dialog-view",["workflow-designer/dialogs/transition-dialog-view","workflow-designer/io/ajax/workflow-transitions-ajax-manager","workflow-designer/analytics","jira/ajs/select/single-select","workflow-designer/templates","workflow-designer/backbone","workflow-designer/underscore"],function(e,i,t,n,o,r,s){return e.extend({id:"edit-transition-dialog",template:o.editTransitionDialog,ui:{description:"#transition-description",name:"#transition-name",screenId:"#transition-screen-id"},_getContent:function(){var e=this;return function(i){var t=e._transitionModel.toJSON(),n=e._getScreenOptions();n.done(function(n){s.extend(t,{screens:n}),i(e.template(t))}),n.fail(e._onLoadError)}},_getSelectedScreenId:function(){return Number(this.ui.screenId.find(":selected").val())},_getSelectedScreenName:function(){return this.ui.screenId.find(":selected").text()},_makeRequest:function(e){return i.updateTransition(e)},_onContentRefresh:function(){new n({element:this.ui.screenId,revertOnInvalid:!0})},_onSubmit:function(i,t){var n,o;n={description:this.ui.description.val(),name:this.ui.name.val(),screenId:this._getSelectedScreenId(),sourceStepId:this._transitionModel.getSourceStepId(),transitionId:this._transitionModel.getActionId(),workflowName:this._workflowModel.get("name")},e.prototype._onSubmit.apply(this,arguments),o=this._makeRequest(n),o.done(this._onSuccess).fail(t).fail(this._onError)},_onSuccess:function(){this.hide(),this._updateTransitionModels({description:this.ui.description.val(),name:this.ui.name.val(),screenId:this._getSelectedScreenId(),screenName:this._getSelectedScreenName()}),this._triggerAnalyticsEvent()},_triggerAnalyticsEvent:function(){t.triggerUpdateTransition()},_updateTransitionModels:function(e){function i(e){return e.get("actionId")===t}var t=this._transitionModel.get("actionId"),n=this._workflowModel.get("transitions");n.chain().filter(i).invoke("set",e)}})}),AJS.namespace("JIRA.WorkflowDesigner.Dialogs.EditTransitionDialogView",null,require("workflow-designer/dialogs/edit-transition-dialog-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/dialogs/EditGlobalTransitionDialogView.js' */
define("workflow-designer/dialogs/edit-global-transition-dialog-view",["workflow-designer/dialogs/edit-transition-dialog-view","workflow-designer/io/ajax/workflow-global-transitions-ajax-manager","workflow-designer/analytics"],function(i,o,e){return i.extend({id:"edit-global-transition-dialog",_makeRequest:function(i){return o.updateGlobalTransition(i)},_triggerAnalyticsEvent:function(){e.triggerUpdateGlobalTransition()}})}),AJS.namespace("JIRA.WorkflowDesigner.Dialogs.EditGlobalTransitionDialogView",null,require("workflow-designer/dialogs/edit-global-transition-dialog-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/dialogs/EditLoopedTransitionDialogView.js' */
define("workflow-designer/dialogs/edit-looped-transition-dialog-view",["workflow-designer/dialogs/edit-transition-dialog-view","workflow-designer/io/ajax/workflow-looped-transitions-ajax-manager","workflow-designer/analytics"],function(i,o,e){return i.extend({id:"edit-looped-transition-dialog",_makeRequest:function(i){return o.updateLoopedTransition(i)},_triggerAnalyticsEvent:function(){e.triggerUpdateLoopedTransition()}})}),AJS.namespace("JIRA.WorkflowDesigner.Dialogs.EditLoopedTransitionDialogView",null,require("workflow-designer/dialogs/edit-looped-transition-dialog-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/dialogs/EditTransitionSourceDialogView.js' */
define("workflow-designer/dialogs/edit-transition-source-dialog-view",["workflow-designer/io/ajax/workflow-transitions-ajax-manager","workflow-designer/dialogs/form-dialog-view","workflow-designer/templates","workflow-designer/backbone","workflow-designer/underscore","jquery"],function(e,i,o,t,n,r){return i.extend({id:"edit-transition-source-dialog",initialize:function(e){n.bindAll(this,"_onError","_onSuccess"),this._newSourcePort=e.newSourcePort,this._newSourceView=e.newSourceView,this._originalSourceStatus=e.originalSourceStatus,this._transitionView=e.transitionView,this._workflowModel=e.workflowModel},_getContent:function(){return r(o.confirmEditTransitionSourceDialog({newSourceStatusName:this._newSourceView.model.get("name"),originalSourceStatusName:this._originalSourceStatus.get("name"),transitionName:this._transitionView.model.get("name")}))},_onCancel:function(){this._transitionView.resetConnection()},_onSubmit:function(i,o){var t;i.preventDefault(),this.disable(),this.removeErrorMessages(),t=e.updateTransitionSource({transitionId:this._transitionView.model.get("actionId"),newSourceStatusId:this._newSourceView.model.get("statusId"),originalSourceStatusId:this._originalSourceStatus.get("statusId"),workflowName:this._workflowModel.get("name")}),t.done(this._onSuccess).fail(o).fail(this._onError)},_onSuccess:function(){this.hide(),this._workflowModel.updateTransitionSource({sourceAngle:this._newSourceView.getAngleToPort(this._newSourcePort),sourceStepId:this._newSourceView.model.get("stepId"),transition:this._transitionView.model})}})}),AJS.namespace("JIRA.WorkflowDesigner.Dialogs.EditTransitionSourceDialogView",null,require("workflow-designer/dialogs/edit-transition-source-dialog-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/dialogs/EditTransitionTargetDialogView.js' */
define("workflow-designer/dialogs/edit-transition-target-dialog-view",["workflow-designer/dialogs/form-dialog-view","workflow-designer/io/ajax/workflow-transitions-ajax-manager","workflow-designer/templates","workflow-designer/backbone","workflow-designer/underscore","jquery"],function(t,e,i,o,r,n){return t.extend({id:"edit-transition-target-dialog",initialize:function(t){r.bindAll(this,"_onError","_onSuccess"),this._targetPort=t.targetPort,this._targetView=t.targetView,this._transitionView=t.transitionView,this._workflowModel=t.workflowModel},_getContent:function(){return n(i.confirmEditTransitionTargetDialog({targetStatusName:this._targetView.model.get("name"),transitionName:this._transitionView.model.get("name")}))},_onCancel:function(){this._transitionView.resetConnection()},_onSubmit:function(t,i){var o;t.preventDefault(),this.disable(),this.removeErrorMessages(),o=e.updateTransitionTarget({transitionId:this._transitionView.model.get("actionId"),targetStatusId:this._targetView.model.get("statusId"),workflowName:this._workflowModel.get("name")}),o.done(this._onSuccess).fail(i).fail(this._onError)},_onSuccess:function(){this.hide(),this._workflowModel.updateTransitionTargets({targetAngle:this._targetView.getAngleToPort(this._targetPort),targetStepId:this._targetView.model.get("stepId"),transition:this._transitionView.model})}})}),AJS.namespace("JIRA.WorkflowDesigner.Dialogs.EditTransitionTargetDialogView",null,require("workflow-designer/dialogs/edit-transition-target-dialog-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/statuses/BaseStatusView.js' */
define("workflow-designer/base-status-view",["workflow-designer/status-port","workflow-designer/draw-2d-view","workflow-designer/draw-2d","workflow-designer/backbone","workflow-designer/underscore"],function(e,t,i,r,n){return t.extend({initialize:function(e){t.prototype.initialize.apply(this,arguments),e=n.defaults({},e,{immutable:!1}),this.immutable=e.immutable,this.isPortDragged=e.isPortDragged,this.getAllTargetPorts=e.getAllTargetPorts,this.workflowModel=e.workflowModel,this.listenTo(this.model,"change",this.render)},_createAndConfigureFigure:function(){var e=this._createFigure(),t=this;return e.onDrag=n.wrap(e.onDrag,function(e){e.apply(this,n.toArray(arguments).slice(1)),t.trigger("drag")}),e.onDragEnd=n.wrap(e.onDragEnd,function(e){e.apply(this,n.toArray(arguments).slice(1)),t._updatePosition(),t.trigger("dragEnd")}),this.immutable?(e.setDeleteable(!1),e.setResizeable(!1)):e.installEditPolicy(new i.policy.figure.DragDropEditPolicy),e},_createPort:function(t){return t=n.extend({},t,{canvas:this._canvas,isPortDragged:this.isPortDragged,getAllTargetPorts:this.getAllTargetPorts}),new e(t)},_getAngleToFigure:function(e){var t=e.getBoundingBox().getCenter(),i=this._figure.getBoundingBox().getCenter();return Math.atan2(t.getY()-i.getY(),t.getX()-i.getX())/Math.PI*180},getAngleToPort:function(e){return this._getAngleToFigure(e)},getAngleToStatus:function(e){return this._getAngleToFigure(e._figure)},getPortForAngle:function(e){function t(t){var i=Math.abs(e-this._getAngleToFigure(t));return i<180?i:Math.abs(i-360)}return n.min(this.getPorts(),t,this)},_positionFigure:function(){this.model.hasCoordinates()&&this._figure.setPosition(this.model.get("x"),this.model.get("y"))},render:function(){return this._figure||(this._figure=this._createAndConfigureFigure()),this},setPosition:function(e,t){this.model.set({x:e,y:t})},_updatePosition:function(){var e=this.getBoundingBox();this.setPosition(e.getX(),e.getY())}})}),AJS.namespace("JIRA.WorkflowDesigner.BaseStatusView",null,require("workflow-designer/base-status-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/statuses/InitialStatusView.js' */
define("workflow-designer/initial-status-view",["workflow-designer/draw2d-utilities","workflow-designer/layout/locator/position-on-parent-bounds-locator","workflow-designer/base-status-view","workflow-designer/direction","workflow-designer/draw-2d","workflow-designer/underscore","workflow-designer/color-provider"],function(e,t,r,i,o,n,s){return r.extend({_createFigure:function(){var t,r;return t=this._figure=new o.shape.basic.Circle(30),t.setBackgroundColor(s.getUnselectedPathColor()),t.setStroke(0),t.setSelectable(!1),t.snapToGeometry=!0,r=this._fill=new o.shape.basic.Circle(30),r.onMouseEnter=n.bind(this.trigger,this,"highlight"),r.onMouseLeave=n.bind(this.trigger,this,"unhighlight"),r.setBackgroundColor(s.getUnselectedPathColor()),r.setStroke(0),t.addFigure(r,new o.layout.locator.CenterLocator(t)),this._canvas.addFigure(t),e.setCursor(r,"move"),this._addPort(),this._positionFigure(),t},_addPort:function(){var e,r=i.DOWN;this.port=this._createPort({connectionDirection:r}),e=new t({parent:this._figure,side:r,bias:.5}),this._figure.addPort(this.port,e)},getBoundingBox:function(){return this._figure.getBoundingBox()},getPorts:function(){return[this.port]},isSelected:function(){return!1},render:function(){return r.prototype.render.apply(this,arguments),this._positionFigure(),this}})}),AJS.namespace("JIRA.WorkflowDesigner.InitialStatusView",null,require("workflow-designer/initial-status-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/statuses/StatusFigure.js' */
define("workflow-designer/status-figure",["workflow-designer/draw2d-utilities","workflow-designer/draw-2d","workflow-designer/color-provider","workflow-designer/backbone","workflow-designer/underscore"],function(e,t,i,s,o){return t.shape.basic.Rectangle.extend({init:function(){var e,s,n,l,a,r,h;a=new t.layout.locator.CenterLocator(this),this._super.apply(this,arguments),this.installEditPolicy(new t.policy.figure.SelectionFeedbackPolicy),this.setAlpha(0),this.setDeleteable(!1),this.setStroke(0),this.snapToGeometry=!0,n=this._hover=new t.shape.basic.Rectangle,n.onDoubleClick=o.bind(this._onDoubleClick,this),n.onMouseEnter=o.bind(this._onMouseEnter,this),n.onMouseLeave=o.bind(this._onMouseLeave,this),n.setAlpha(0),this.addFigure(n,a),e=this._edge=new t.shape.basic.Rectangle,e.setRadius(4),e.setStroke(0),this.addFigure(e,a),r=this._selectedOutline=new t.shape.basic.Rectangle,r.setColor(i.getSelectedPathColor()),r.setRadius(4),r.setStroke(2),r.setVisible(!1),this.addFigure(r,a),h=this._validationErrorOutline=new t.shape.basic.Rectangle,h.setBackgroundColor("#ffffff"),h.setRadius(4),h.setStroke(2),h.setDashArray("-"),h.setVisible(!1),this.addFigure(h,a),s=this._fill=new t.shape.basic.Rectangle,s.setRadius(3),s.setStroke(0),this.addFigure(s,a),l=this._label=new t.shape.basic.Label,l.setBold(!0),l.setFontFamily("Arial"),l.setFontSize(11),l.setStroke(0),this.addFigure(l,a)},setValidation:function(e){this._validation=e,this._isSelected()||this.unselect()},getTextColor:function(){return this._label.getFontColor()},_onDoubleClick:function(){this.onDoubleClick.apply(this,arguments)},_onMouseEnter:function(){this.onMouseEnter.apply(this,arguments)},_onMouseLeave:function(){this.onMouseLeave.apply(this,arguments)},repaint:function(){function t(t){e.setCursor(t.figure,"move")}this._super.apply(this,arguments),o.each(this.children.asArray(),t)},_resize:function(){var e=Math.max(this._label.getBoundingBox().getWidth()+40,60);this.setDimension(e,30)},_isSelected:function(){return this._selectedOutline.isVisible()},select:function(){this._super.apply(this,arguments),this._selectedOutline.setVisible(!0),this._validationErrorOutline.setVisible(!1)},setBackgroundColor:function(e){this._super.apply(this,arguments),this._fill&&this._fill.setBackgroundColor(e)},setCanvas:function(e){this._super.apply(this,arguments),e&&this._selectedOutline.shape.attr("fill-opacity","0"),e&&this._selectedOutline.shape.attr("fill-opacity","0")},setColor:function(e){this._super.apply(this,arguments),this._edge&&this._edge.setBackgroundColor(e)},setDimension:function(e,t){var i=!!this._edge;this._super.apply(this,arguments),i&&(this._edge.setDimension(e,t),this._fill.setDimension(e-2,t-2),this._hover.setDimension(e+12,t+12),this._selectedOutline.setDimension(e+1,t+1),this._validationErrorOutline.setDimension(e+2,t+2))},setText:function(e){this._label.setText(e.toUpperCase()),this._resize()},setTextColor:function(e){this._label&&this._label.setFontColor(e)},unselect:function(){this._super.apply(this,arguments),this._selectedOutline.setVisible(!1),this._validation&&this._validation.alterDisplay?(this._validationErrorOutline.setColor(this._validation.color),this._validationErrorOutline.setVisible(!0)):this._validationErrorOutline.setVisible(!1)}})}),AJS.namespace("JIRA.WorkflowDesigner.StatusFigure",null,require("workflow-designer/status-figure"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/statuses/StatusView.js' */
define("workflow-designer/status-view",["workflow-designer/layout/locator/position-on-parent-bounds-locator","workflow-designer/status-figure","workflow-designer/dialogs/edit-status-dialog-view","workflow-designer/dialogs/delete-status-dialog-view","workflow-designer/direction","workflow-designer/status-lozenge-colours","workflow-designer/base-status-view","workflow-designer/selectable-figure-mixin","workflow-designer/cocktail","workflow-designer/underscore"],function(t,e,i,s,o,r,n,h,u,a){var g=n.extend({_addPort:function(e,i){var s,o,r=this;return o=this._createPort({connectionDirection:i}),s=new t({parent:this._figure,side:i,bias:e}),this._figure.addPort(o,s),o.bind("mouse:enter",function(t,e){r._onMouseEnter(e)}),o.bind("mouse:leave",function(t,e){r._onMouseLeave(e)}),o.bind("drag:start",a.bind(this._portStatusDragStart,this)),o.bind("drag:end",a.bind(this._portStatusDragEnd,this)),o.bind("select",a.bind(this.select,this)),o},_createFigure:function(){var t,i;return i={onOtherFigureIsMoving:a.throttle(a.bind(this.trigger,this,"move"),25)},t=this._figure=new e,t.attachMoveListener(i),t.onDeselect=a.bind(this._onDeselect,this),t.onMouseEnter=a.bind(this._onMouseEnter,this),t.onMouseLeave=a.bind(this._onMouseLeave,this),t.onSelect=a.bind(this._onSelect,this),t.setSelectable(!this.immutable),this.listenTo(this.workflowModel,"validation:statuses",function(e){t.setValidation(e[this.model.get("stepId")])}),this.immutable||(t.onDoubleClick=a.bind(this.edit,this)),this._canvas.getLayer("statuses").addFigure(t),this._createPorts(),this._positionFigure(),t},_createPorts:function(){this.ports=[this._addPort(.22,o.UP),this._addPort(.5,o.UP),this._addPort(.78,o.UP),this._addPort(.5,o.RIGHT),this._addPort(.78,o.DOWN),this._addPort(.5,o.DOWN),this._addPort(.22,o.DOWN),this._addPort(.5,o.LEFT)]},destroy:function(){new s({statusModel:this.model,workflowModel:this.workflowModel}).show()},edit:function(){new i({statusModel:this.model,workflowModel:this.workflowModel}).show()},_getBackgroundColor:function(){var t,e=this._isSubtle(),i=this.model.get("statusCategory");return t=i?r.getBackgroundColour({colourName:i.colourName,isSubtle:e}):e?"#ffffff":"#4a6785"},_getBorderColor:function(){var t,e=this._isSubtle(),i=this.model.get("statusCategory");return t=e?i?r.getBorderColour({colourName:i.colourName,isSubtle:e}):"#4a6785":"#ffffff"},getBoundingBox:function(){return this._figure.getBoundingBox()},_getFigure:function(){return this._figure},getPorts:function(){return this.ports},_getTextColor:function(){var t,e=this._isSubtle(),i=this.model.get("statusCategory");return t=i?r.getColour({colourName:i.colourName,isSubtle:e}):e?"#4a6785":"#ffffff"},highlight:function(){this.immutable||a.invoke(this.getPorts(),"show"),this.trigger("highlight")},_isSubtle:function(){var t=this.workflowModel.has("currentStepId"),e=this.model.get("stepId")===this.workflowModel.get("currentStepId"),i=this.model.get("initial");return t&&!e&&!i},_isThisStatusHighlightTarget:function(t){var e=t&&t.getParent()===this._figure,i=this._figure===t,s=a.contains(this.ports,t);return e||i||s},_onDeselect:function(){this._canvas.getLayer("statuses").addFigure(this._figure),this.trigger("deselected",this),this.selected=!1,this.unhighlight()},_onMouseEnter:function(t){this._isThisStatusHighlightTarget(t)||this.highlight()},_onMouseLeave:function(t){this._isThisStatusHighlightTarget(t)||this.unhighlight()},_onSelect:function(){this._canvas.getLayer("selected-status").addFigure(this._figure),this.highlight(),this.selected=!0,this.trigger("selected",this)},_portStatusDragEnd:function(){this.trigger("port:drag:end")},_portStatusDragStart:function(){this.trigger("port:drag:start")},render:function(){return n.prototype.render.apply(this,arguments),this._figure.setBackgroundColor(this._getBackgroundColor()),this._figure.setColor(this._getBorderColor()),this._figure.setText(this.model.get("name")),this._figure.setTextColor(this._getTextColor()),this._positionFigure(),this},unhighlight:function(){this.selected||(this.immutable||a.invoke(this.getPorts(),"hide"),this.trigger("unhighlight"))},updatePortsVisibility:function(){a.invoke(this.getPorts(),this.selected?"show":"hide")}});return u.mixin(g,h),g}),AJS.namespace("JIRA.WorkflowDesigner.StatusView",null,require("workflow-designer/status-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/transitions/GlobalTransitionFigure.js' */
define("workflow-designer/global-transition-figure",["workflow-designer/layout/locator/static-locator","workflow-designer/triangle-figure","workflow-designer/draw-2d","workflow-designer/color-provider","workflow-designer/underscore","jquery"],function(e,t,o,i,n,s){return o.shape.basic.Rectangle.extend({init:function(){var s,l,r,a,h;n.bindAll(this,"_onDoubleClick"),this._super.apply(this,arguments),this.installEditPolicy(new o.policy.figure.SelectionFeedbackPolicy),this.setAlpha(0),this.setDeleteable(!1),this.setDimension(68,14),this.setResizeable(!1),r=this._line=new o.shape.basic.Line(0,0,0,0),r.onDoubleClick=this._onDoubleClick,r.setColor(i.getUnselectedPathColor()),r.setStroke(1),this.addFigure(r,new o.layout.locator.CenterLocator(this)),s=this._arrow=new t,s.onDoubleClick=this._onDoubleClick,s.setDimension(7,8),s.setBackgroundColor(i.getUnselectedPathColor()),s.setColor(i.getUnselectedPathColor()),s.setStroke(1),this.addFigure(s,new e(this,0,3)),a=this._createLozenge(),h=new e(this,49,0),this.addFigure(a,h),l=this._hover=new o.shape.basic.Rectangle(19,14),l.onDoubleClick=this._onDoubleClick,l.setAlpha(0),this.addFigure(l,h)},_createLozenge:function(){var e,t;return e=this._lozengeRectangle=new o.shape.basic.Rectangle(19,14),e.setBackgroundColor(i.getHighlightedPathColor()),e.setStroke(0),t=this._lozengeText=new o.shape.basic.Label,t.setAlpha(0),t.setBold(!0),t.setFontColor("#ffffff"),t.setFontFamily("Arial"),t.setFontSize(11),t.setStroke(0),t.setText("All"),e.addFigure(t,new o.layout.locator.CenterLocator(e)),e},getHoverElement:function(){return this._hover.shape.node},getPorts:function(){return new o.util.ArrayList},onDrag:s.noop,_onDoubleClick:function(){this.onDoubleClick.apply(this,arguments)},_resizeLozenge:function(){var e=this._lozengeText.getWidth();this._hover.setDimension(e,this._hover.getHeight()),this._lozengeRectangle.setDimension(e,this._lozengeRectangle.getHeight())},select:function(){this._super.apply(this,arguments),this._arrow.setBackgroundColor("#ffffff"),this._arrow.setColor(i.getSelectedPathColor()),this._line.setColor(i.getSelectedPathColor())},setCanvas:function(){this._super.apply(this,arguments),this._resizeLozenge()},setPosition:function(e,t){var o;this._super(e,t),o=this.getBoundingBox(),this._line.setStartPoint(o.getLeft(),o.getCenter().getY()),this._line.setEndPoint(o.getRight(),o.getCenter().getY())},setValidation:function(e){this._validation=e,this._isSelected()||this._setLineColor()},_isSelected:function(){return this._line.getColor()===i.getSelectedPathColor()},_setLineColor:function(){var e=this._validation&&this._validation.color||i.getUnselectedPathColor();this._arrow.setBackgroundColor(e),this._arrow.setColor(e),this._line.setColor(e)},unselect:function(){this._super.apply(this,arguments),this._setLineColor()}})}),AJS.namespace("JIRA.WorkflowDesigner.GlobalTransitionFigure",null,require("workflow-designer/global-transition-figure"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/transitions/GlobalTransitionView.js' */
define("workflow-designer/global-transition-view",["workflow-designer/dialogs/edit-global-transition-dialog-view","workflow-designer/dialogs/delete-transition-dialog-view","workflow-designer/global-transition-figure","workflow-designer/inline-dialog-svg-positioner","workflow-designer/selectable-figure-mixin","workflow-designer/draw-2d-view","workflow-designer/color-provider","aui/inline-dialog","workflow-designer/templates","workflow-designer/cocktail","workflow-designer/underscore"],function(i,e,t,o,n,r,l,s,a,g,d){var h=r.extend({initialize:function(i){r.prototype.initialize.apply(this,arguments),i=d.defaults({},i,{immutable:!1}),this._immutable=i.immutable,this._targetView=i.targetView,this._workflowModel=i.workflowModel,this.listenTo(this._targetView,"move",this._onMove),this.listenTo(this._workflowModel,"validation:transitions",this._updateValidation)},_updateValidation:function(i){var e=i[this.model.get("id")];this._figure.setValidation(e)},_createDialog:function(){function i(){return{fill:l.getHighlightedPathColor(),stroke:l.getHighlightedPathColor()}}function e(i,e,t){var o=a.globalTransitionDialogContent;i.html(o({name:r.model.get("name"),statusName:r.model.get("target").get("name")})),t()}var t=this._figure.getHoverElement(),n=d.uniqueId("global-transition-dialog-"),r=this;this._dialog=s(t,n,e,{calculatePositions:o.calculatePosition,getArrowAttributes:i,hideDelay:50,onHover:!0})},_createFigure:function(){var i;i=this._figure=new t,i.onDeselect=d.bind(this._onDeselect,this),i.onSelect=d.bind(this._onSelect,this),i.setSelectable(!this._immutable),this._immutable||(i.onDoubleClick=d.bind(this.edit,this)),this._canvas.getLayer("global-transitions").addFigure(i),this._createDialog(),this._positionFigure()},destroy:function(){new e({transitionModel:this.model,workflowModel:this._workflowModel}).show()},edit:function(){new i({transitionModel:this.model,workflowModel:this._workflowModel}).show()},_getFigure:function(){return this._figure},_onDeselect:function(){this._canvas.getLayer("global-transitions").addFigure(this._figure),this.trigger("deselected",this)},_onMove:function(){this._dialog&&this._dialog.hide(),this._positionFigure()},_onSelect:function(){this._canvas.getLayer("selected-transition").addFigure(this._figure),this.trigger("selected",this)},_positionFigure:function(){var i=this._figure.getBoundingBox(),e=this._targetView.getBoundingBox();this._figure.setPosition(e.getRight()+2,e.getCenter().getY()-i.getHeight()/2)},render:function(){return this._figure||this._createFigure(),this}});return g.mixin(h,n),h}),AJS.namespace("JIRA.WorkflowDesigner.GlobalTransitionView",null,require("workflow-designer/global-transition-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/transitions/LoopedTransitionLocator.js' */
define("workflow-designer/layout/locator/looped-transition-locator",["workflow-designer/draw-2d"],function(o){var t=15;return o.layout.locator.Locator.extend({relocate:function(o,e){var r=e.getParent(),n=r.getBoundingBox(),a=e.getBoundingBox(),i=a.getHeight(),l=t+o*(t+i);e.setPosition(n.getWidth()/2-a.getWidth()/2,l)}})}),AJS.namespace("JIRA.WorkflowDesigner.Layout.Locator.LoopedTransitionLocator",null,require("workflow-designer/layout/locator/looped-transition-locator"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/transitions/LoopedTransitionContainerFigure.js' */
define("workflow-designer/looped-transition-container-figure",["workflow-designer/layout/locator/looped-transition-locator","workflow-designer/draw-2d"],function(e,o){return o.shape.basic.Rectangle.extend({init:function(){this._super.apply(this,arguments),this._locator=new e,this.installEditPolicy(new o.policy.figure.SelectionFeedbackPolicy),this.setBackgroundColor("#ffffff"),this.setColor("#cccccc"),this.setStroke(1),this.snapToGeometry=!0,this.allowSelectionIfAlreadySelected=!0},addTransitionFigure:function(e){this.addFigure(e,this._locator)}})}),AJS.namespace("JIRA.WorkflowDesigner.LoopedTransitionContainerFigure",null,require("workflow-designer/looped-transition-container-figure"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/transitions/LoopedTransitionFigure.js' */
define("workflow-designer/looped-transition-figure",["workflow-designer/triangle-figure-upwards","workflow-designer/layout/locator/static-locator","workflow-designer/draw-2d","workflow-designer/color-provider","workflow-designer/underscore","jquery"],function(e,t,o,i,n,s){return o.shape.basic.Rectangle.extend({init:function(i){var s,r,l,a,c,h,g,u;n.bindAll(this,"_onDoubleClick"),this._super.apply(this,arguments),this._transitionModel=i,this.installEditPolicy(new o.policy.figure.SelectionFeedbackPolicy),this.setAlpha(0),this.setDeleteable(!1),this.setDimension(90,40),this.setResizeable(!1),c=this._loopRectangle=new o.shape.basic.Rectangle(80,35),c.setBackgroundColor("#ffffff"),c.setStroke(1),c.onDoubleClick=this._onDoubleClick,c.setColor("#cccccc"),c.setStroke(1),h=new t(this,0,0),this.addFigure(c,h),s=this._arrow=new e,s.onDoubleClick=this._onDoubleClick,s.setDimension(8,9),s.setBackgroundColor("#cccccc"),s.setColor("#cccccc"),s.setStroke(1),this.addFigure(s,new t(this,(-5),11)),l=this._createLozenge(),a=new t(this,(-10),(-5)),this.addFigure(l,a),g=this._createNameLozenge(),u=new t(this,20,27),this.addFigure(g,u),r=this._hover=new o.shape.basic.Rectangle(19,14),r.onDoubleClick=this._onDoubleClick,r.select=this._onSelect,r.setAlpha(0),this.addFigure(r,u)},_createLozenge:function(){var e,t;return e=this._lozengeRectangle=new o.shape.basic.Rectangle(19,14),e.setBackgroundColor(i.getHighlightedPathColor()),e.setStroke(0),t=this._lozengeText=new o.shape.basic.Label,t.setAlpha(0),t.setBold(!0),t.setFontColor("#ffffff"),t.setFontFamily("Arial"),t.setFontSize(11),t.setStroke(0),t.setText("All"),e.addFigure(t,new o.layout.locator.CenterLocator(e)),e},_createEllipsifiedName:function(e){return e.length>12&&(e=e.substring(0,11)+".."),e},_createNameLozenge:function(){var e,t;return e=this._nameLozengeRectangle=new o.shape.basic.Rectangle(30,14),e.setBackgroundColor("#ffffff"),e.setStroke(0),t=this._nameLozengeText=new o.shape.basic.Label,t.setAlpha(0),t.setBold(!0),t.setFontColor("#333333"),t.setFontFamily("Arial"),t.setFontSize(11),t.setStroke(0),e.addFigure(t,new o.layout.locator.CenterLocator(e)),e},getHoverElement:function(){return this._hover.shape.node},getPorts:function(){return new o.util.ArrayList},loadText:function(){this._nameLozengeText.setText(this._createEllipsifiedName(this._transitionModel.get("name"))),this._resizeNameLozenge()},onDrag:s.noop,_onDoubleClick:function(){this.onDoubleClick.apply(this,arguments),this.select()},_resizeLozenge:function(){var e=this._lozengeText.getWidth();this._hover.setDimension(e,this._hover.getHeight()),this._lozengeRectangle.setDimension(e,this._lozengeRectangle.getHeight())},_resizeNameLozenge:function(){var e=this._nameLozengeText.getWidth();this._hover.setDimension(e,this._hover.getHeight()),this._nameLozengeRectangle.setDimension(e,this._nameLozengeRectangle.getHeight())},select:function(){this._super.apply(this,arguments),this._arrow.setBackgroundColor("#ffffff"),this._arrow.setColor(i.getSelectedPathColor()),this._loopRectangle.setColor(i.getSelectedPathColor()),this._nameLozengeRectangle.setBackgroundColor(i.getLabelColor()),this._nameLozengeText.setFontColor("#ffffff")},setCanvas:function(){this._super.apply(this,arguments),this._resizeLozenge(),this._resizeNameLozenge()},setPosition:function(e,t){var o;this._super(e,t),o=this.getBoundingBox()},setValidation:function(e){this._validation=e,this._selected()||this._setTransitionLineColor()},_selected:function(){return this._loopRectangle.getColor()===i.getSelectedPathColor()},_setTransitionLineColor:function(){var e=this._validation&&this._validation.color||i.getUnselectedPathColor();this._loopRectangle.setColor(e),this._arrow.setColor(e),this._arrow.setBackgroundColor(e)},unselect:function(){this._super.apply(this,arguments),this._arrow.setBackgroundColor(i.getUnselectedPathColor()),this._setTransitionLineColor(),this._nameLozengeRectangle.setBackgroundColor("#ffffff"),this._nameLozengeText.setFontColor(i.getLabelColor())}})}),AJS.namespace("JIRA.WorkflowDesigner.LoopedTransitionFigure",null,require("workflow-designer/looped-transition-figure"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/transitions/LoopedTransitionContainerView.js' */
define("workflow-designer/looped-transition-container-view",["workflow-designer/looped-transition-container-figure","workflow-designer/looped-transition-figure","workflow-designer/draw-2d-view","workflow-designer/draw-2d","workflow-designer/underscore"],function(e,i,t,n,s){return t.extend({initialize:function(e){t.prototype.initialize.apply(this,arguments),e=s.defaults({},e,{immutable:!1}),this.immutable=e.immutable,this.workflowModel=e.workflowModel,this._setTransitionViews(e.transitionViews)},_createAndConfigureFigure:function(){var e=this._createFigure(),i=this;return e.onDrag=s.wrap(e.onDrag,function(e){e.apply(this,s.toArray(arguments).slice(1)),i.trigger("drag")}),e.onDragEnd=s.wrap(e.onDragEnd,function(e){e.apply(this,s.toArray(arguments).slice(1)),i._updatePosition(),i.trigger("dragEnd")}),this.immutable?(e.setDeleteable(!1),e.setResizeable(!1)):e.installEditPolicy(new n.policy.figure.DragDropEditPolicy),e},_createFigure:function(){var i=this._figure=new e,t=15,n=15,r=0,o=0;return i.onDeselect=s.bind(this._onDeselect,this),i.onSelect=s.bind(this._onSelect,this),i.setSelectable(!this._immutable),this._transitionViews.each(function(e){e.reset();var n=e.getFigure();i.addTransitionFigure(n),o+=n.getHeight()+t,r=Math.max(r,n.getWidth())}),i.setDimension(r+2*n,o+t),this._canvas.getLayer("looped-transitions-container").addFigure(i),this._positionFigure(),i},getBoundingBox:function(){return this._figure.getBoundingBox()},getFigure:function(){return this._figure},_positionFigure:function(){this.model.hasCoordinates()&&this._figure.setPosition(this.model.get("x"),this.model.get("y"))},render:function(){return this._figure||(this._figure=this._createAndConfigureFigure()),this},reset:function(e){this._setTransitionViews(e),this.resetFigure()},resetFigure:function(){this._canvas.removeFigure(this._figure),this._figure=null,this.render()},setPosition:function(e,i){this.model.set({x:e,y:i})},_setTransitionViews:function(e){this._transitionViews=e,this.listenTo(this._transitionViews,"selected",this._transitionViewSelectedExternally)},_transitionViewSelectedExternally:function(e){this._selectedTransitionView&&this._selectedTransitionView!==e&&this._selectedTransitionView.deselect(),this._selectedTransitionView=e,this._canvas.getSelection().getPrimary()!==this.getFigure()&&this._canvas.getSelection().setPrimary(this.getFigure())},_updatePosition:function(){var e=this.getBoundingBox();this.setPosition(e.getX(),e.getY())},_onDeselect:function(){this._selectedTransitionView&&this._selectedTransitionView.deselect(),this._selectedTransitionView=null},_onSelect:function(e){var t,n;t=s.find(e,function(e){return e instanceof i}),t?(n=this._transitionViews.find(function(e){return e.getFigure()===t}),n&&(this._selectedTransitionView&&this._selectedTransitionView!==n&&this._selectedTransitionView.deselect(),(!this._selectedTransitionView||this._selectedTransitionView!==n)&&n.select())):this._selectedTransitionView&&this._selectedTransitionView.deselect(),this._selectedTransitionView=n}})}),AJS.namespace("JIRA.WorkflowDesigner.LoopedTransitionContainerView",null,require("workflow-designer/looped-transition-container-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/transitions/LoopedTransitionView.js' */
define("workflow-designer/looped-transition-view",["workflow-designer/dialogs/edit-looped-transition-dialog-view","workflow-designer/dialogs/delete-transition-dialog-view","workflow-designer/looped-transition-figure","workflow-designer/inline-dialog-svg-positioner","workflow-designer/draw-2d-view","aui/inline-dialog","workflow-designer/templates","workflow-designer/underscore"],function(i,e,t,o,n,r,s,l){return n.extend({initialize:function(i){n.prototype.initialize.apply(this,arguments),i=l.defaults({},i,{immutable:!1}),this._immutable=i.immutable,this._workflowModel=i.workflowModel,this.listenTo(this.model,"change:name",this.render),this.listenTo(this._workflowModel,"validation:transitions",this._updateValidation)},_updateValidation:function(i){var e=i[this.model.get("id")];this._figure.setValidation(e)},_createDialog:function(){function i(){return{fill:"#333333",stroke:"#333333"}}function e(i,e,t){var o=s.loopedTransitionDialogContent;i.html(o({name:a.model.get("name")})),t()}var t=this._figure.getHoverElement(),n=l.uniqueId("looped-transition-dialog-"),a=this;this._dialog=r(t,n,e,{calculatePositions:o.calculatePosition,getArrowAttributes:i,hideDelay:50,onHover:!0})},_createFigure:function(){var i;i=this._figure=new t(this.model),this._immutable||(i.onDoubleClick=l.bind(this.edit,this)),this._canvas.getLayer("looped-transitions").addFigure(i),this._createDialog()},destroy:function(){new e({transitionModel:this.model,workflowModel:this._workflowModel}).show()},edit:function(){new i({transitionModel:this.model,workflowModel:this._workflowModel}).show()},getFigure:function(){return this._figure},deselect:function(){this._immutable||(this._figure.unselect(),this._canvas.getLayer("looped-transitions").addFigure(this._figure),this.trigger("deselected",this))},select:function(){this._immutable||(this._figure.select(),this._canvas.getLayer("selected-transition").addFigure(this._figure),this.trigger("selected",this))},render:function(){return this._figure||this._createFigure(),this._figure.loadText(),this},reset:function(){this._canvas.removeFigure(this._figure),this._figure=null,this.render()}})}),AJS.namespace("JIRA.WorkflowDesigner.LoopedTransitionView",null,require("workflow-designer/looped-transition-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/transitions/TransitionConnection.js' */
define("workflow-designer/transition-connection",["workflow-designer/layout/locator/manhattan-percentage-locator","workflow-designer/layout/connection/rounded-manhattan-connection-router","workflow-designer/layout/connection/gapped-connection","workflow-designer/draw-2d","workflow-designer/color-provider","workflow-designer/backbone","workflow-designer/underscore"],function(t,e,o,i,s,n,r){var l=s.getHighlightedPathColor(),a=30,h=s.getUnselectedPathColor(),c="#ffffff",u=s.getSelectedPathColor(),d=s.getSelectedLabelColor();return o.extend({init:function(t){var o,s;r.bindAll(this,"_onDoubleClick","_onMouseEnter","_onMouseLeave"),this._isInitialTransition=t,t?this._super(0,3):this._super(3,3),o=new i.decoration.connection.ArrowDecorator,o.onDoubleClick=this._onDoubleClick,o.setBackgroundColor(h),o.setColor(h),o.setDimension(7,7),s=this._label=new i.shape.basic.Label,s.onDoubleClick=this._onDoubleClick,s.onMouseEnter=this._onMouseEnter,s.onMouseLeave=this._onMouseLeave,s.setBackgroundColor(c),s.setColor(h),s.setBold(!0),s.setDraggable(!1),s.setFontColor("#333333"),s.setFontFamily("Arial"),s.setFontSize(11),s.setPadding(2),s.setParent(this),s.setRadius(3),s.setSelectable(!1),s.setStroke(0),this.setColor(h),this.setCoronaWidth(6),this.setDeleteable(!1),this.setResizeable(!1),this.setRouter(new e),this.setStroke(1),this.setTargetDecorator(o)},appearSelected:function(){this.setColor(u),this.targetDecoratorNode.attr({fill:"#ffffff",stroke:u}).insertAfter(this.shape),this._label.setBackgroundColor(d).setStroke(1)},highlight:function(){this.setColor(l),this.targetDecoratorNode.attr({fill:l,stroke:l}).insertAfter(this.shape)},_onDoubleClick:function(){this.onDoubleClick.apply(this,arguments)},_onMouseEnter:function(){this.onMouseEnter.apply(this,arguments)},_onMouseLeave:function(){this.onMouseLeave.apply(this,arguments)},onOtherFigureIsMoving:function(){this._super.apply(this,arguments),this._positionLabel()},positionArrow:function(){this.targetDecoratorNode.insertAfter(this.shape)},_positionLabel:function(){this._labelLocator||(this._labelLocator=new t(this,.8)),this._labelLocator.relocate(0,this._label)},select:function(){var t;return this._super.apply(this,arguments),this.appearSelected(),t=this.selectionHandles.get(0),this._isInitialTransition&&t.hide(),t.sendToFront(),this.selectionHandles.get(0).sendActionableAreaToFront(),this.selectionHandles.get(1).sendActionableAreaToFront(),this},setCanvas:function(t){var e=null!==t,o=null===t;e?t.getLayer("transition-labels").addFigure(this._label):o&&this.canvas.removeFigure(this._label),this._super(t)},setText:function(t){this._label.setText(this._truncate(t)),this._positionLabel()},_truncate:function(t){var e=this._getEllipsis();return!t||t.length<=a?t:t.substring(0,a-e.length)+e},_getEllipsis:function(){return "\u2026"},setTextVisible:function(t){this._label.setVisible(t),this._positionLabel()},setSource:function(t){this._super(t),this._positionLabel()},setTarget:function(t){this._super(t),this._positionLabel()},textIsVisible:function(){return this._label.isVisible()},setValidation:function(t){this._validation=t},_showValidation:function(){return this._validation&&this._validation.alterDisplay},unhighlight:function(){this._label.setBackgroundColor(c).setStroke(0);var t=this._showValidation()&&this._validation.color||h;this.setColor(t),this.targetDecoratorNode.attr({fill:t,stroke:t}).insertAfter(this.shape)},unselect:function(){return this._super.apply(this,arguments),this.unhighlight(),this._label.setBackgroundColor(c).setStroke(0),this}})}),AJS.namespace("JIRA.WorkflowDesigner.TransitionConnection",null,require("workflow-designer/transition-connection"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/transitions/TransitionView.js' */
define("workflow-designer/transition-view",["workflow-designer/dialogs/edit-transition-dialog-view","workflow-designer/dialogs/delete-transition-dialog-view","workflow-designer/policy/feedback/line-selection-feedback-policy","workflow-designer/transition-connection","workflow-designer/collection","workflow-designer/selectable-figure-mixin","workflow-designer/request-response-mixin","workflow-designer/draw-2d-view","workflow-designer/cocktail","workflow-designer/underscore"],function(e,t,i,n,s,o,r,h,c,g){var l=h.extend({initialize:function(e){h.prototype.initialize.apply(this,arguments),this._canvasModel=e.canvasModel,this._immutable=e.immutable,this._views=new s,this._views.reset([e.sourceView,e.targetView]),this._workflowModel=e.workflowModel,this.listenTo(this._workflowModel,"validation:transitions",this._updateValidation),this.listenTo(this._canvasModel,"change:showTransitionLabels",this._setTextVisibility),this.listenTo(this.model,"change:name",this.render),this.listenTo(this._views,{drag:this._onStatusDrag,dragEnd:this._onStatusDragEnd,highlight:this._onMouseEnter,unhighlight:this._onMouseLeave})},_updateValidation:function(e){var t=e[this.model.get("id")];this._connection.setValidation(t),this._isSelected()||this._connection.unhighlight()},appearSelected:function(){this._canvas.getLayer("selected-transition").addFigure(this._connection),this._connection.appearSelected(),this._connection.positionArrow(),this.render()},_createConnection:function(){var e;e=new n(this.isInitialTransition()),e.onDeselect=g.bind(this._onDeselect,this),e.onMouseEnter=g.bind(this._onMouseEnter,this),e.onMouseLeave=g.bind(this._onMouseLeave,this),e.onReconnect=g.bind(this.trigger,this,"reconnect",this),e.onSelect=g.bind(this._onSelect,this),e.setSelectable(!this._immutable),this._immutable||(e.installEditPolicy(new i),e.onDoubleClick=g.bind(this.edit,this)),this._canvas.getLayer("transitions").addFigure(e),this._connection=this._figure=e,this._setConnectionPorts(),this._setTextVisibility()},destroy:function(){new t({transitionModel:this.model,workflowModel:this._workflowModel}).show()},edit:function(){new e({transitionModel:this.model,workflowModel:this._workflowModel}).show()},getConnection:function(){return this._connection},_getFigure:function(){return this._connection},_getSourceAngle:function(){var e=this._getSourceView()===this._getTargetView(),t=this.model.get("sourceAngle");return g.isNumber(t)?t:e?-90:this._getSourceView().getAngleToStatus(this._getTargetView())},_getSourceView:function(){return this._views.at(0)},_getTargetAngle:function(){var e=this._getSourceView()===this._getTargetView(),t=this.model.get("targetAngle");return g.isNumber(t)?t:e?0:this._getTargetView().getAngleToStatus(this._getSourceView())},_getTargetView:function(){return this._views.at(1)},_highlight:function(){this._canvas.getLayer("highlighted-transition").addFigure(this._connection),this._connection.highlight(),this._highlighted=!0,this.render()},isConnectedToAnyStatus:function(e){return g.contains(e,this._getSourceView())||g.contains(e,this._getTargetView())},isHighlighted:function(){return this._highlighted},isInitialTransition:function(){return this.model.get("source").get("initial")},_isSelected:function(){return this.requestResponse.request("isSelected",this)},_onDeselect:function(){this.trigger("deselected",this),this.unhighlight()},_onMouseEnter:function(){this._isSelected()||this._highlight()},_onMouseLeave:function(){var e=g.some(this._views.invoke("isSelected"));e||this._isSelected()||this.unhighlight()},_onSelect:function(){this.trigger("selected",this),this.appearSelected()},_onStatusDragEnd:function(){this._connection.setTextVisible(!0)},_onStatusDrag:function(){this._connection.setTextVisible(!1)},remove:function(){h.prototype.remove.apply(this,arguments),this._views.off({drag:this._onStatusDrag,dragEnd:this._onStatusDragEnd,highlight:this._onMousEnter,unhighlight:this._onMouseLeave})},render:function(){return this._connection||this._createConnection(),this._connection.setText(this.model.get("name")),this._setTextVisibility(),this},resetConnection:function(){this._canvas.removeFigure(this._connection),this._connection=null,this.render()},_setConnectionPorts:function(){var e=this._getSourceView().getPortForAngle(this._getSourceAngle()),t=this._getTargetView().getPortForAngle(this._getTargetAngle());this._connection.setSource(e),this._connection.setTarget(t),this.model.set({sourceAngle:this._getSourceView().getAngleToPort(e),targetAngle:this._getTargetView().getAngleToPort(t)})},_setTextVisibility:function(){var e=!!this.model.get("name"),t=this._canvasModel.get("showTransitionLabels"),i=e&&(t||this.isHighlighted()||this._isSelected());this._connection.setTextVisible(i)},setViews:function(e,t){this._views.reset([e,t])},unhighlight:function(){this._canvas.getLayer("transitions").addFigure(this._connection),this._connection.unhighlight(),this._highlighted=!1,this.render()}});return c.mixin(l,r,o),l}),AJS.namespace("JIRA.WorkflowDesigner.TransitionView",null,require("workflow-designer/transition-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/canvas/LayerRootFigure.js' */
define("workflow-designer/draw-2d-canvas/layer-root-figure",["workflow-designer/draw-2d"],function(e){return e.shape.basic.Rectangle.extend({init:function(){this._super(0,0),this.setAlpha(0),this.setDeleteable(!1),this.setDraggable(!1),this.setResizeable(!1),this.setSelectable(!1)}})}),AJS.namespace("JIRA.WorkflowDesigner.Draw2DCanvas.LayerRootFigure",null,require("workflow-designer/draw-2d-canvas/layer-root-figure"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/canvas/ZoomHandler.js' */
define("workflow-designer/zoom-handler",["workflow-designer/backbone","workflow-designer/underscore","jquery"],function(e,o,t){var n=function(e){o.bindAll(this,"_onMouseWheel"),t(document).on({mousewheel:this._onMouseWheel,MozMousePixelScroll:this._onMouseWheel}),this._canvas=t(e).get(0)};return o.extend(n.prototype,e.Events,{_computeZoomFactor:function(e){var o,t,n=.1;return e=e.originalEvent,o=!!e.detail,t=o?this._getDeltaFirefox(e):this._getDeltaOthers(e),isNaN(t)&&(t=1),Math.max(n,t)},destroy:function(){t(document).off({mousewheel:this._onMouseWheel,MozMousePixelScroll:this._onMouseWheel})},_getDeltaFirefox:function(e){var o=200,t=e.axis===e.VERTICAL_AXIS&&e.detail||0;return 1+t/o},_getDeltaOthers:function(e){var o=500,t=e.wheelDelta;return"wheelDeltaY"in e&&(t=e.wheelDeltaY),1-t/o},_isWorkflowDesigner:function(e){return e===this._canvas||t.contains(this._canvas,e)},_onMouseWheel:function(e){var o=e.altKey&&this._isWorkflowDesigner(e.target);o&&(e.preventDefault(),this.trigger("zoom",{clientX:e.originalEvent.clientX,clientY:e.originalEvent.clientY,factor:this._computeZoomFactor(e)}))}}),n}),AJS.namespace("JIRA.WorkflowDesigner.ZoomHandler",null,require("workflow-designer/zoom-handler"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/canvas/Layer.js' */
define("workflow-designer/draw-2d-canvas/layer",["workflow-designer/draw-2d-canvas/layer-root-figure","workflow-designer/underscore"],function(e,r){function s(e,a){var i=e.getChildren().clone().asArray().reverse(),n=a.svgNodes||a.shape;r.each(i,function(e){s(e,a)}),e.svgNodes&&n&&e.svgNodes.insertAfter(n),e.shape&&n&&e.shape.insertAfter(n)}var a=function(r){var s=new e;this._canvas=r,this._canvas.addFigure(s),this._figures=[s]};return r.extend(a.prototype,{addFigure:function(e){e.getCanvas()||this._canvas.addFigure(e),e._layer&&e._layer.removeFigure(e),e._layer=this,s(e,r.last(this._figures)),this._figures.push(e)},removeFigure:function(e){this._figures=r.without(this._figures,e)}}),a}),AJS.namespace("JIRA.WorkflowDesigner.Draw2DCanvas.Layer",null,require("workflow-designer/draw-2d-canvas/layer"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/canvas/Draw2DCanvas.js' */
define("workflow-designer/draw-2d-canvas",["workflow-designer/viewbox-transformer","workflow-designer/svg-utilities","workflow-designer/draw-2d-canvas/layer","workflow-designer/draw-2d","workflow-designer/backbone","workflow-designer/underscore","jquery"],function(e,t,i,s,n,o,r){var a=s.Canvas.extend({init:function(){o.bindAll(this,"_scheduleResize"),this._super.apply(this,arguments),this.paper.canvas.style.position="",this.svgElement=r(this.paper.canvas),this._debouncedSetViewBox=o.debounce(this.setViewBox,100),this._scheduleResize()},createLayers:function(){var e=this._layers||(this._layers={});o.each(o.flatten(arguments),function(t){e[t]||(e[t]=new i(this))},this)},fitToContainer:function(){var e=Number(this.svgElement.attr("height")),t=Number(this.svgElement.attr("width")),i=this.getHeight(),s=this.getWidth(),n=e!==i||t!==s;this.html.is(":visible")&&n&&(this.paper.setSize(s,i),this.svgElement.css({height:i,width:s}))},fromCanvasToDocumentCoordinate:function(e,i){var n=t.fromSVGToScreenCoordinate(this.paper.canvas,e,i);return new s.geo.Point(n.x,n.y)},fromDocumentToCanvasCoordinate:function(e,i){var n=t.fromScreenToSVGCoordinate(this.paper.canvas,e,i);return new s.geo.Point(n.x,n.y)},getBestFigure:function(e,t,i){var n=i instanceof s.Port,o=i instanceof s.shape.basic.LineResizeHandle;return!i||n||o?this._super(e,t,i):null},getLayer:function(e){return this._layers&&this._layers[e]},getSelectedFigure:function(){return this.getSelection().getPrimary()},getViewBox:function(){var e,t,i=r(this.html).offset();return t=this.paper.canvas.getAttribute("viewBox"),t=t&&o.map(t.split(" "),parseFloat).slice(0,2)||[0,0],e=this.fromDocumentToCanvasCoordinate(i.left+this.svgElement.width()-r(document).scrollLeft(),i.top+this.svgElement.height()-r(document).scrollTop()),new s.geo.Rectangle(t[0],t[1],e.x-t[0],e.y-t[1])},getZoom:function(){return this.svgElement.width()/this.getViewBox().getWidth()},removeFigure:function(e){this._super.apply(this,arguments),e._layer&&e._layer.removeFigure(e)},_scheduleResize:function(){var e=a.DEFAULT_RESIZE_INTERVAL,t=!!this.svgElement.closest("body").length,i=o.isNumber(this._resizeInterval)?this._resizeInterval:e;t&&(setTimeout(this._scheduleResize,i),this.fitToContainer())},selectFigure:function(e){var t=this;this.editPolicy.each(function(i,n){var o=n instanceof s.policy.canvas.SingleSelectionPolicy;o&&n.select(t,e)})},setResizeInterval:function(e){this._resizeInterval=e},setViewBoxQuick:function(e){this.paper.canvas.setAttribute("viewBox",[e.getX(),e.getY(),e.getWidth(),e.getHeight()].join(" ")),this._debouncedSetViewBox(e)},zoom:function(t,i,s){this.setViewBoxQuick(e.getZoomViewBox({diagramBoundingBox:s,factor:t,target:i,viewBox:this.getViewBox(),zoom:this.getZoom()}))}});return a.DEFAULT_RESIZE_INTERVAL=100,a}),AJS.namespace("JIRA.WorkflowDesigner.Draw2DCanvas",null,require("workflow-designer/draw-2d-canvas"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/canvas/CanvasView.js' */
define("workflow-designer/canvas-view",["workflow-designer/looped-transition-container-view","workflow-designer/positioner","workflow-designer/dialogs/edit-transition-target-dialog-view","workflow-designer/dialogs/edit-transition-source-dialog-view","workflow-designer/dialogs/add-transition-dialog-view","workflow-designer/transition-model","workflow-designer/draw-2d-canvas/layer-root-figure","workflow-designer/policy/canvas/snap-to-geometry/guide-line-edit-policy","workflow-designer/policy/canvas/snap-to-geometry/snap-edit-policy","workflow-designer/policy/canvas/panning-single-selection-policy","workflow-designer/global-transition-view","workflow-designer/looped-transition-view","workflow-designer/transition-view","workflow-designer/status-view","workflow-designer/initial-status-view","workflow-designer/validator","workflow-designer/zoom-handler","workflow-designer/collection","workflow-designer/draw-2d-canvas","workflow-designer/draw-2d","aui/inline-dialog","workflow-designer/backbone","workflow-designer/underscore","jquery"],function(e,t,i,o,n,s,a,r,l,d,h,c,w,g,u,f,v,_,m,V,T,k,M,p){return k.View.extend({className:"canvas",initialize:function(e){M.bindAll(this,"_onKeyDown"),e=M.defaults({},e,{immutable:!1}),this._canvasModel=e.canvasModel,this.immutable=e.immutable,this.statusViews=new _,this.transitionViews=new _,this._workflowModel=e.workflowModel,this._zoomHandler=new v(this.el),this.immutable||p(document).on("keydown",this._onKeyDown),this.listenTo(this._canvasModel,"change:selectedModel",this._onSelectedModelChange),this.listenTo(this.statusViews,{deselected:this._clearSelectedView,"port:drag:end":this._onPortDragEnd,"port:drag:start":M.bind(this._setPortDragged,this,!0),selected:this._setSelectedView}),this.listenTo(this.transitionViews,{deselected:this._onTransitionDeselected,reconnect:this._onReconnect,selected:this._onTransitionSelected}),this.listenTo(this._workflowModel,"reset:after",this._afterReset),this.listenTo(this._workflowModel.get("statuses"),{add:this.addStatus,remove:this.removeStatus,reset:this.resetStatuses});var t=this;this.listenTo(this._workflowModel.get("transitions"),{add:this.addTransition,"change:source change:target":this._updateTransitionSourceAndTarget,"add remove change:target change: source change:description change:name change:transitionOptions":function(){t._validate()},remove:this.removeTransition,reset:this.resetTransitions}),this.listenTo(this._workflowModel.get("statuses"),{"add remove change:name change:description change:statusCategory":function(){t._validate()}}),this.listenTo(this._workflowModel,"loopedTransitionAdded",this._reloadLoopedTransitionContainerView),this.listenTo(this._workflowModel,"loopedTransitionRemoved",this._reloadLoopedTransitionContainerView),this.listenTo(this._zoomHandler,"zoom",this._onZoom)},_validate:function(){this.immutable||f.validate(this._workflowModel)},_afterReset:function(){this._positionNewStatuses(),this._reloadLoopedTransitionContainerView(),this._validate()},addStatus:function(e){var t,i,o=e.get("initial"),n=this._canvasModel.get("selectedModel")===e;return i=o?u:g,t=new i({canvas:this.canvas,getAllTargetPorts:M.bind(this._getAllTargetPorts,this),immutable:this.immutable,isPortDragged:M.bind(this._isPortDragged,this),model:e,workflowModel:this._workflowModel}).render(),this.statusViews.add(t),n&&t.select(),t},addTransition:function(e){var t,i=e.isGlobalTransition(),o=e.isLoopedTransition(),n=this._canvasModel.get("selectedModel")===e,s=this._getTransitionViewWithModel(e);return s?s:(t=o?c:i?h:w,s=new t({canvas:this.canvas,canvasModel:this._canvasModel,immutable:this.immutable,model:e,sourceView:this._getStatusViewWithModel(e.get("source")),targetView:this._getStatusViewWithModel(e.get("target")),workflowModel:this._workflowModel}),s.requestResponse&&s.requestResponse.setHandler("isSelected",this._transitionIsSelected,this),s.render(),this.transitionViews.add(s),n&&s.select(),s)},autoFit:function(){var e,t,i,o,n=10;this.canvas.fitToContainer(),e=this.getCanvasBoundingBox(),e&&(e.scale(2*n,2*n),o=new V.geo.Rectangle(0,0,this.$el.width(),this.$el.height()),i=e.getHeight()<=o.getHeight()&&e.getWidth()<=o.getWidth(),i||(this.canvas.setViewBox(e),o=this.canvas.getViewBox()),t=e.getCenter(),this.canvas.setViewBox(new V.geo.Rectangle(t.getX()-o.getWidth()/2,t.getY()-o.getHeight()/2,o.getWidth(),o.getHeight())),this._canvasModel.set("zoomLevel",this.canvas.getZoom()))},_clearSelectedView:function(e){var t=this._canvasModel.get("selectedView")===e;t&&this._canvasModel.selectView(null)},_createCanvas:function(e){var t,i,o=M.bind(this.getCanvasBoundingBox,this),n=this._getUniqueId();return e=p(e),e.append(this.el),this.$el.attr("id",n),i=["statuses","selected-status","transitions","global-transitions","looped-transitions-container","looped-transitions","highlighted-transition","selected-transition","transition-labels"],t=new m(n),t.createLayers(i),t.installEditPolicy(new d(o)),t.installEditPolicy(new l),t.installEditPolicy(new r),t.onNewConnection=M.bind(this._onNewConnection,this),t},_delete:function(){var e=this._canvasModel.get("selectedView");return e&&e.destroy(),!!e},_getAllTargetPorts:function(){function e(e){return e.model.isInitial()}function t(e){return e.getPorts()}return this.statusViews.chain().reject(e).flatMap(t).value()},getCanvasBoundingBox:function(){function e(e){var t=e.getBoundingBox();i=i?i.union(t):t}function t(e){return e instanceof a}var i,o=this.canvas.getFigures().asArray(),n=this.canvas.getLines().asArray();return M.chain(o).reject(t).each(e),M.each(n,e),i},_getLoopedTransitionViews:function(){var e=this.transitionViews.chain().filter(function(e){return e.model.isLoopedTransition()}).sortBy(function(e){return e.model.getActionId()}).value();return new _(e)},_getSiblingTransitions:function(e){function t(e){return e.model.get("actionId")===i}var i=e.model.get("actionId");return this.transitionViews.chain().filter(t).without(e).value()},_getStatusViewWithModel:function(e){return this.statusViews.find(function(t){return t.model===e})},getStatusViewWithPort:function(e){return this.statusViews.find(function(t){return M.contains(t.getPorts(),e)})},_getTransitionViewWithModel:function(e){return this.transitionViews.find(function(t){return t.model===e})},_getUniqueId:function(){var e,t=0;do t++,e="workflow-designer"+t;while(p("#"+e).length);return e},_isPortDragged:function(){return!!this.portDragged},_onKeyDown:function(e){this._shouldHandleDelete(e)&&this._delete()&&e.preventDefault()},_onNewConnection:function(e){var t,i=e.getSource(),o=this.getStatusViewWithPort(i),a=e.getTarget(),r=this.getStatusViewWithPort(a);t=new s({source:o.model,sourceAngle:o.getAngleToPort(i),target:r.model,targetAngle:r.getAngleToPort(a)}),this.canvas.removeFigure(e),new n({canvasModel:this._canvasModel,transitionModel:t,workflowModel:this._workflowModel}).show()},_onReconnect:function(e){var t,n,s=e.getConnection().getSource(),a=this.getStatusViewWithPort(s),r=e.getConnection().getTarget(),l=this.getStatusViewWithPort(r);t=a.model!==e.model.get("source"),n=l.model!==e.model.get("target"),t?new o({newSourcePort:s,newSourceView:a,originalSourceStatus:e.model.get("source"),transitionView:e,workflowModel:this._workflowModel}).show():n?new i({targetPort:r,targetView:l,transitionView:e,workflowModel:this._workflowModel}).show():e.model.set({source:a.model,sourceAngle:a.getAngleToPort(s),target:l.model,targetAngle:l.getAngleToPort(r)})},_onTransitionDeselected:function(e){this._clearSelectedView(e),M.invoke(this._getSiblingTransitions(e),"unhighlight")},_onTransitionSelected:function(e){this._setSelectedView(e),M.invoke(this._getSiblingTransitions(e),"appearSelected")},_onZoom:function(e){T.current&&T.current.hide(),this.zoom(e.factor,this.canvas.fromDocumentToCanvasCoordinate(e.clientX,e.clientY))},_positionNewStatuses:function(){function e(e){return!e.model.isGlobalTransition()&&e.isConnectedToAnyStatus(i)}var i,o=this._workflowModel.get("statuses").map(this._getStatusViewWithModel,this);i=t.positionStatuses({statusViews:o,viewBox:this.canvas.getViewBox(),workflowModel:this._workflowModel}),this.transitionViews.chain().filter(e).invoke("resetConnection")},_reloadLoopedTransitionContainerView:function(){var i,o=this._workflowModel.get("loopedTransitionContainer");o&&(i=this._getLoopedTransitionViews(),this._loopedTransitionContainerView?i.length?this._loopedTransitionContainerView.reset(i):(this._loopedTransitionContainerView.remove(),this._loopedTransitionContainerView=null,this._workflowModel.removeLoopedTransitionContainer()):(this._loopedTransitionContainerView=new e({canvas:this.canvas,immutable:this.immutable,model:o,transitionViews:i,workflowModel:this._workflowModel}).render(),t.positionLoopedTransitionContainer({loopedTransitionContainerView:this._loopedTransitionContainerView,statusViews:this.statusViews})))},remove:function(){k.View.prototype.remove.apply(this,arguments),p(document).off("keydown",this._onKeyDown),this._zoomHandler.destroy(),this.canvas&&this.canvas.remove()},removeStatus:function(e){var t=this._getStatusViewWithModel(e);t&&(t.remove(),this.statusViews.remove(t))},removeTransition:function(e){var t=this._getTransitionViewWithModel(e);t&&(t.remove(),this.transitionViews.remove(t))},render:function(e){return this.canvas||(this.canvas=this._createCanvas(e)),this},resetStatuses:function(){for(;this.statusViews.length;)this.removeStatus(this.statusViews.at(0).model);this._workflowModel.get("statuses").each(function(e){this.addStatus(e)},this)},resetTransitions:function(){for(;this.transitionViews.length;)this.removeTransition(this.transitionViews.at(0).model);this._workflowModel.get("transitions").forEach(function(e){this.addTransition(e)},this)},_transitionIsSelected:function(e){var t=e.model.get("actionId"),i=this._canvasModel.get("selectedView")===e,o=this._canvasModel.get("selectedModel"),n=!!o&&o.get("actionId")===t;return i||n},_onSelectedModelChange:function(e,t){var i=this._getStatusViewWithModel(t)||this._getTransitionViewWithModel(t),o=this._canvasModel.get("selectedView");t&&i&&i!==o&&i.select()},_onPortDragEnd:function(){function e(e){return e.model.isInitial()}this._setPortDragged(!1),this.statusViews.chain().reject(e).invoke("updatePortsVisibility")},setLocked:function(e){this._isLocked=e},_setPortDragged:function(e){this.portDragged=e},setResizeInterval:function(e){this.canvas.setResizeInterval(e)},_setSelectedView:function(e){this._canvasModel.selectView(e)},_shouldHandleDelete:function(e){var t=[p.ui.keyCode.BACKSPACE,p.ui.keyCode.DELETE],i=!!p(".aui-blanket:visible").length,o=M.contains(t,e.which),n=p(e.target).is(":input");return!i&&o&&!n&&!this._isLocked},_updateTransitionSourceAndTarget:function(e){var t=this._getStatusViewWithModel(e.get("source")),i=this._getStatusViewWithModel(e.get("target")),o=this._getTransitionViewWithModel(e);o.setViews(t,i),o.resetConnection()},zoom:function(e,t){this.canvas.zoom(e,t||this.canvas.getViewBox().getCenter(),this.getCanvasBoundingBox()),this._canvasModel.set("zoomLevel",this.canvas.getZoom())}})}),AJS.namespace("JIRA.WorkflowDesigner.CanvasView",null,require("workflow-designer/canvas-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/properties-panel/StatusPropertiesView.js' */
define("workflow-designer/properties-panel/status-properties-view",["workflow-designer/status-view","workflow-designer/browser-utilities","workflow-designer/messages","workflow-designer/io/ajax/workflow-global-transitions-ajax-manager","workflow-designer/properties-panel/properties-view","workflow-designer/internal-api/panel-service","workflow-designer/templates","workflow-designer/underscore","jquery"],function(e,t,i,o,r,s,n,a,l){return r.extend({events:{"change #create-global-transition-sidebar":"_synchroniseGlobalTransition","click .delete":"_destroy","click .edit":"_edit","click .add-transition-quick-fix":function(){this._openAddTransitionDialog()}},template:n.PropertiesPanel.status,ui:{createGlobalTransition:"#create-global-transition-sidebar"},initialize:function(){a.bindAll(this,"_onCreateSuccess","_onError","_triggerTransactionEnd"),r.prototype.initialize.apply(this,arguments)},_openAddTransitionDialog:function(){l(".add-transition").click()},_createGlobalTransition:function(){var e,t,i=this._selectedView.model;e={description:"",name:i.get("name"),screenId:0,statusId:i.get("statusId"),workflowName:this._workflowModel.get("name")},t=o.createGlobalTransition(e),t.always(this._triggerTransactionEnd).done(this._onCreateSuccess).fail(this._onError)},_deleteGlobalTransition:function(){function e(){s._workflowModel.removeTransition(r)}var t,i,r=this._workflowModel.getGlobalTransitionForStatus(this._selectedView.model),s=this;t={transitionId:r.get("actionId"),workflowName:this._workflowModel.get("name")},i=o.deleteGlobalTransition(t),i.always(this._triggerTransactionEnd).done(e).fail(this._onError)},_hasGlobalTransition:function(){var e=this._selectedView.model;return this._workflowModel.statusHasGlobalTransition(e)},_onCreateSuccess:function(e){var t=this._selectedView.model.id;this._workflowModel.reset(e),this._canvasModel.set("selectedModel",this._workflowModel.getStatus(t))},_onError:function(e){i.showErrorMessage(e),this.ui.createGlobalTransition.attr("checked",this._hasGlobalTransition())},serializeData:function(){var e=this._workflowModel.get("name"),i=t.escapeQueryParameter(e),o=this._selectedView.model.get("statusId"),n=this._selectedView.model.get("stepId"),l={workflowName:e,stepId:n,statusId:o};return a.extend(r.prototype.serializeData.apply(this),{hasGlobalTransition:this._hasGlobalTransition(),isDraft:this._workflowModel.get("draft"),workflowName:i,additionalPanels:s.renderPanels("workflow.status.properties",l)})},_synchroniseGlobalTransition:function(){var e;e=this.ui.createGlobalTransition.is(":checked"),e?this._createGlobalTransition():this._deleteGlobalTransition(),this.trigger("transaction:start")},_triggerTransactionEnd:function(){this.trigger("transaction:end")}},{canHandleView:function(t){return t instanceof e}})}),AJS.namespace("JIRA.WorkflowDesigner.PropertiesPanel.StatusPropertiesView",null,require("workflow-designer/properties-panel/status-properties-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/properties-panel/TransitionPropertiesView.js' */
define("workflow-designer/properties-panel/transition-properties-view",["workflow-designer/internal-api/panel-service","workflow-designer/properties-panel/properties-view","workflow-designer/browser-utilities","workflow-designer/global-transition-view","workflow-designer/looped-transition-view","workflow-designer/transition-view","workflow-designer/templates","workflow-designer/backbone","workflow-designer/underscore","jquery"],function(e,i,n,r,o,t,s,l,a,w){return i.extend({events:{"click .delete":"_destroy","click .edit":"_edit","click .show-conditions-quick-fix":function(){this._openConditions()}},template:s.PropertiesPanel.transition,_openConditions:function(){window.open(w("a[href*='descriptorTab=conditions']")[0].href,"_blank")},_getQueryString:function(){var e=this._selectedView.model.isInitial(),i=this._selectedView.model.isGlobalTransition(),r={};return e||i||(r.workflowStep=this._selectedView.model.getSourceStepId()),n.makeQueryString(r)},serializeData:function(){var n=i.prototype.serializeData.apply(this),r=this._workflowModel.get("name"),o={workflowName:r,actionId:n.actionId};return a.extend(n,{additionalPanels:e.renderPanels("workflow.transition.properties",o),queryString:this._getQueryString()})}},{canHandleView:function(e){return e instanceof r||e instanceof o||e instanceof t}})}),AJS.namespace("JIRA.WorkflowDesigner.PropertiesPanel.TransitionPropertiesView",null,require("workflow-designer/properties-panel/transition-properties-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/properties-panel/PropertiesPanelView.js' */
define("workflow-designer/properties-panel/properties-panel-view",["workflow-designer/properties-panel/status-properties-view","workflow-designer/properties-panel/transition-properties-view","workflow-designer/backbone","workflow-designer/underscore","jquery"],function(e,r,i,t,n){var o=i.Marionette.ItemView.extend({className:"properties-panel",events:{"aui-expander-collapsed":"_forceReflow","aui-expander-expanded":"_forceReflow"},template:n.noop,initialize:function(e){this._canvasModel=e.canvasModel,this._workflowModel=e.workflowModel,this.listenTo(this._canvasModel,"change:selectedView",this.render)},_createPropertiesView:function(){var e,r=t.bind(this.trigger,this,"transaction:end"),i=t.bind(this.trigger,this,"transaction:start");return e=o.create({canvasModel:this._canvasModel,selectedView:this._canvasModel.get("selectedView"),workflowModel:this._workflowModel}),e&&this.listenTo(e,{"transaction:end":r,"transaction:start":i}),e},onBeforeRender:function(){this._propertiesView&&this._propertiesView.remove()},onRender:function(){this._propertiesView=this._createPropertiesView(),this._propertiesView&&(this._propertiesView.render().$el.appendTo(this.el),this.$el.height(),this._propertiesView.applyDescriptionExpander())},_forceReflow:function(){var e=t.bind(this.$el.css,this.$el,"height");e("1px"),t.defer(e,"")}},{create:function(i){var n,o,s=i.canvasModel.get("selectedView");return n=[e,r],o=t.find(n,function(e){return e.canHandleView(s)}),o&&new o(i)}});return o}),AJS.namespace("JIRA.WorkflowDesigner.PropertiesPanel.PropertiesPanelView",null,require("workflow-designer/properties-panel/properties-panel-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/actions/ActionsView.js' */
define("workflow-designer/actions-view",["workflow-designer/dialogs/add-transition-dialog-view","workflow-designer/dialogs/add-status-inline-dialog-view","workflow-designer/status-model","workflow-designer/transition-model","jira/util/users/logged-in-user","workflow-designer/templates","workflow-designer/backbone","workflow-designer/underscore","jquery"],function(e,t,i,s,o,a,l,n,r){return l.Marionette.ItemView.extend({className:"actions",events:{"change .show-transition-labels":"_setShowTransitionLabels","click .add-status":"_addStatus","click .add-transition":"_addTransition","click .enter-full-screen":"_enterFullScreen","click .exit-full-screen":"_exitFullScreen"},template:a.actions,ui:{addStatusButton:".add-status",fullScreenTriggers:".full-screen-trigger",lastEditedMessage:".last-edited-message"},initialize:function(e){this._canvasModel=e.canvasModel,this._fullScreenButton=e.fullScreenButton,this._immutable=e.immutable,this._workflowModel=e.workflowModel,this.listenTo(this._workflowModel,"change:updateAuthor change:updatedDate",function(){this._workflowModel.get("updateAuthor")&&this._workflowModel.get("updatedDate")&&(this.stopListening(this._workflowModel),this.render())})},_addStatus:function(){var e=this.ui.addStatusButton.hasClass("active");this._addStatusDialog||(this._addStatusDialog=this._createAddStatusDialog()),e?this._addStatusDialog.hide():this._addStatusDialog.show()},_addTransition:function(){var t=this._canvasModel.get("selectedModel"),o=t&&t instanceof i,a=new s;o&&a.set({source:t,target:t}),new e({canvasModel:this._canvasModel,transitionModel:a,workflowModel:this._workflowModel}).show()},_createAddStatusDialog:function(){var e;return e=new t({trigger:this.ui.addStatusButton,workflowModel:this._workflowModel}),this.listenTo(e,{done:n.bind(this.trigger,this,"addStatus:done"),submit:n.bind(this.trigger,this,"addStatus:submit")}),e},_enterFullScreen:function(){this._toggleFullScreenTriggers(),this.trigger("fullScreen:enter")},_exitFullScreen:function(){this._toggleFullScreenTriggers(),this.trigger("fullScreen:exit")},onRender:function(){this._addStatusDialog&&(this._addStatusDialog.remove(),delete this._addStatusDialog),this.ui.fullScreenTriggers.tooltip(),this.ui.fullScreenTriggers.filter(".hidden").tipsy("disable"),this.ui.lastEditedMessage.find("time").livestamp()},remove:function(){l.Marionette.ItemView.prototype.remove.apply(this,arguments),this._addStatusDialog&&this._addStatusDialog.remove()},serializeData:function(){return{currentUserName:o.username(),updatedDate:this._workflowModel.get("updatedDate")&&this._workflowModel.get("updatedDate").getTime(),updateAuthor:this._workflowModel.get("updateAuthor"),fullScreenButton:this._fullScreenButton,immutable:this._immutable,showTransitionLabels:this._canvasModel.get("showTransitionLabels")}},_setShowTransitionLabels:function(e){var t=r(e.target).is(":checked");this._canvasModel.set("showTransitionLabels",t)},_toggleFullScreenTriggers:function(){this.ui.fullScreenTriggers.each(function(e,t){r(t).tipsy("toggleEnabled")}).toggleClass("hidden")}})}),AJS.namespace("JIRA.WorkflowDesigner.ActionsView",null,require("workflow-designer/actions-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/views/actions/ZoomControlView.js' */
define("workflow-designer/zoom-control-view",["workflow-designer/templates","workflow-designer/backbone","workflow-designer/underscore"],function(e,o,i){return o.Marionette.ItemView.extend({className:"zoom-control",events:{"click .zoom-in":"_triggerZoomIn","click .zoom-out":"_triggerZoomOut"},modelEvents:{"change:zoomLevel":"_debouncedRender"},template:e.zoomControl,initialize:function(e){this._debouncedRender=i.debounce(this.render,100),this._maximumZoomLevel=e.maximumZoomLevel,this._minimumZoomLevel=e.minimumZoomLevel},serializeData:function(){var e=.001,o=this.model.get("zoomLevel");return{zoomInDisabled:o>=this._maximumZoomLevel-e,zoomOutDisabled:o<=this._minimumZoomLevel+e}},_triggerZoomIn:function(){this.trigger("zoomIn")},_triggerZoomOut:function(){this.trigger("zoomOut")}})}),AJS.namespace("JIRA.WorkflowDesigner.ZoomControlView",null,require("workflow-designer/zoom-control-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/Canvas.js' */
define("workflow-designer/canvas",["workflow-designer/properties-panel/properties-panel-view","workflow-designer/canvas-view","workflow-designer/actions-view","workflow-designer/progress-indicator-blanket-view","workflow-designer/full-screen-controller","workflow-designer/zoom-control-view","workflow-designer/browser-zoom-checker","workflow-designer/canvas-model","workflow-designer/templates","workflow-designer/draw-2d-canvas","workflow-designer/backbone","workflow-designer/underscore","jquery"],function(e,o,i,n,t,r,s,a,l,c,w,d,h){return w.Marionette.ItemView.extend({template:l.container,ui:{container:".container"},initialize:function(e){e=d.defaults(e,{actions:!0,fullScreenButton:!0,immutable:!1}),this._browserZoomChecker=new s,this._canvasModel=new a({},{workflowModel:e.workflowModel}),this._canvasView=new o({canvasModel:this._canvasModel,immutable:e.immutable,workflowModel:e.workflowModel}),e.actions&&(this._actionsView=this._createActionsView(e)),e.immutable||(this._propertiesPanelView=this._createPropertiesPanelView(e)),this._zoomControlView=this._createZoomControlView()},autoFit:function(){this._canvasView.autoFit()},_createActionsView:function(e){var o;return o=new i({canvasModel:this._canvasModel,fullScreenButton:e.fullScreenButton,immutable:e.immutable,workflowModel:e.workflowModel}),this.listenTo(o,{"addStatus:done":this.hideProgressIndicator,"addStatus:submit":this.showProgressIndicator,"fullScreen:enter":this._enterFullScreen,"fullScreen:exit":this._exitFullScreen}),o},_createPropertiesPanelView:function(o){var i;return i=new e({canvasModel:this._canvasModel,workflowModel:o.workflowModel}),this.listenTo(i,{"transaction:end":this.hideProgressIndicator,"transaction:start":this.showProgressIndicator}),i},_createZoomControlView:function(){var e,o;return e={maximumZoomLevel:2,minimumZoomLevel:.5,model:this._canvasModel},o=new r(e),this.listenTo(o,{zoomIn:d.bind(this._canvasView.zoom,this._canvasView,.75),zoomOut:d.bind(this._canvasView.zoom,this._canvasView,1.25)}),o},_enterFullScreen:function(){var e=this._canvasView;e.setResizeInterval(25),t.enterFullScreen(this.el).done(function(){e.setResizeInterval(c.DEFAULT_RESIZE_INTERVAL)})},_exitFullScreen:function(){var e=this._canvasView,o=this;e.setResizeInterval(25),t.exitFullScreen(this.el).done(function(){e.setResizeInterval(c.DEFAULT_RESIZE_INTERVAL),o.$el.removeAttr("style")})},hideProgressIndicator:function(){this._canvasView.setLocked(!1),this._progressIndicator.hide()},onRender:function(){this.$el.addClass("workflow-designer"),this._actionsView&&this.$el.prepend(this._createHorizontalSection(this._actionsView.render().el)),this._canvasView.render(this.ui.container),this._propertiesPanelView&&this.ui.container.append(this._propertiesPanelView.render().el),this.ui.container.append(this._zoomControlView.render().el)},_createHorizontalSection:function(e){return h(l.workflowDesignerSection()).append(e)},remove:function(){w.Marionette.ItemView.prototype.remove.apply(this,arguments),this._browserZoomChecker.destroy(),this._canvasView.remove()},showProgressIndicator:function(){var e={container:this.ui.container};this._canvasView.setLocked(!0),this._progressIndicator||(this._progressIndicator=new n(e)),this._progressIndicator.show()}})}),AJS.namespace("JIRA.WorkflowDesigner.Canvas",null,require("workflow-designer/canvas"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer', location = 'js/Application.js' */
define("workflow-designer/application",["workflow-designer/io/layout-auto-saver","workflow-designer/workflow-model","workflow-designer/browser-support","workflow-designer/messages","workflow-designer/io/ajax/workflow-ajax-manager","workflow-designer/canvas","workflow-designer/templates","workflow-designer/backbone","workflow-designer/underscore","workflow-designer/internal-api/workflow-service","jquery"],function(e,o,r,t,s,a,i,n,l,d,w){function f(e){var o=i.browserNotSupportedWarning;w(o()).appendTo(e)}var u=function(t){return t=l.defaults({},t,{draft:!1,immutable:!1}),r.browserIsSupported()?(this._workflowModel=new o({currentStepId:t.currentStepId,draft:t.draft,name:t.workflowId}),this._canvas=this._createCanvas(t).render(),t.immutable||(this._layoutAutoSaver=new e({workflowModel:this._workflowModel})),void this._initialiseWorkflow(t)):void f(t.element)};return l.extend(u.prototype,n.Events,{_createCanvas:function(e){return e=l.extend(e,{el:e.element,workflowModel:this._workflowModel}),new a(e)},destroy:function(){this._canvas&&this._canvas.remove(),this._layoutAutoSaver&&this._layoutAutoSaver.destroy()},discardDraft:function(e){return e=l.defaults({},e,{reloadDesigner:!0}),this._canvas.showProgressIndicator(),s.discard(this._workflowModel.get("name")).pipe(l.bind(this._onPublishOrDiscardSuccessHandler,this,e.reloadDesigner),l.bind(this._onPublishOrDiscardFailHandler,this))},publishDraft:function(e){return e=l.defaults({},e,{reloadDesigner:!0}),this._canvas.showProgressIndicator(),s.publish(this._workflowModel).pipe(l.bind(this._onPublishOrDiscardSuccessHandler,this,e.reloadDesigner),l.bind(this._onPublishOrDiscardFailHandler,this))},_initialiseWorkflow:function(e){var o=this,r=this._loadWorkflow(e);r.done(function(){o._workflowModel.set("loadedAt",new Date),o._canvas.autoFit(),d.registerWorkflowDesigner(o),o.trigger("loaded")})},_loadWorkflow:function(e){var o,r=w.Deferred(),a=this,i=w("meta[name=projectKey]").attr("content");return e.layoutData?o=w.Deferred().resolve(e.layoutData):e.workflowId&&(o=s.load(e.workflowId,!!e.draft)),o?(this._canvas.showProgressIndicator(),o.always(function(){s.triggerMauEventForProject(i),a._canvas.hideProgressIndicator()}),o.done(function(e){a._workflowModel.reset(e),r.resolve()}),o.fail(function(e){t.showErrorMessage(e),r.reject(e)})):r.resolve(),r.promise()},_onPublishOrDiscardSuccessHandler:function(e){if(this._layoutAutoSaver.removeUnsavedChangesMessage(),e)return this._loadWorkflow({workflowId:this._workflowModel.get("name"),draft:this._workflowModel.get("draft")})},_onPublishOrDiscardFailHandler:function(e){t.showErrorMessage(e),this._canvas.hideProgressIndicator()},getWorkflowData:function(){return this._workflowModel.toJSON()}}),u}),AJS.namespace("JIRA.WorkflowDesigner.Application",null,require("workflow-designer/application"));;